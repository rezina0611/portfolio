(function(){var __webpack_modules__={64311:function(t){"use strict";var e={};function n(t){return Math.floor(Math.abs(t)+.5)*(t>=0?1:-1)}function r(t,e,r){var i=2*((t=n(t*r))-(e=n(e*r)));i<0&&(i=-i-1);for(var o="";i>=32;)o+=String.fromCharCode(63+(32|31&i)),i/=32;return o+=String.fromCharCode(63+(0|i))}function i(t){for(var e=[],n=0;n<t.length;n++){var r=t[n].slice();e.push([r[1],r[0]])}return e}e.decode=function(t,e){for(var n,r=0,i=0,o=0,s=[],a=0,c=0,l=null,u=Math.pow(10,Number.isInteger(e)?e:5);r<t.length;){l=null,a=1,c=0;do{c+=(31&(l=t.charCodeAt(r++)-63))*a,a*=32}while(l>=32);n=1&c?(-c-1)/2:c/2,a=1,c=0;do{c+=(31&(l=t.charCodeAt(r++)-63))*a,a*=32}while(l>=32);i+=n,o+=1&c?(-c-1)/2:c/2,s.push([i/u,o/u])}return s},e.encode=function(t,e){if(!t.length)return"";for(var n=Math.pow(10,Number.isInteger(e)?e:5),i=r(t[0][0],0,n)+r(t[0][1],0,n),o=1;o<t.length;o++){var s=t[o],a=t[o-1];i+=r(s[0],a[0],n),i+=r(s[1],a[1],n)}return i},e.fromGeoJSON=function(t,n){if(t&&"Feature"===t.type&&(t=t.geometry),!t||"LineString"!==t.type)throw new Error("Input must be a GeoJSON LineString");return e.encode(i(t.coordinates),n)},e.toGeoJSON=function(t,n){return{type:"LineString",coordinates:i(e.decode(t,n))}},t.exports&&(t.exports=e)},9705:function(t,e,n){"use strict";var r=n(31540);function i(t){var e=[1/0,1/0,-1/0,-1/0];return r.coordEach(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}i.default=i,e.Z=i},84102:function(t,e){"use strict";function n(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function r(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!f(t[0])||!f(t[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:t},e,r)}function i(t,e,r){void 0===r&&(r={});for(var i=0,o=t;i<o.length;i++){var s=o[i];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,r)}function o(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:t},e,r)}function s(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function a(t,e,r){return void 0===r&&(r={}),n({type:"MultiLineString",coordinates:t},e,r)}function c(t,e,r){return void 0===r&&(r={}),n({type:"MultiPoint",coordinates:t},e,r)}function l(t,e,r){return void 0===r&&(r={}),n({type:"MultiPolygon",coordinates:t},e,r)}function u(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t*r}function h(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t/r}function p(t){return 180*(t%(2*Math.PI))/Math.PI}function f(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(t,e,n){switch(void 0===n&&(n={}),t){case"Point":return r(e).geometry;case"LineString":return o(e).geometry;case"Polygon":return i(e).geometry;case"MultiPoint":return c(e).geometry;case"MultiLineString":return a(e).geometry;case"MultiPolygon":return l(e).geometry;default:throw new Error(t+" is invalid")}},e.point=r,e.points=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return r(t,e)})),n)},e.polygon=i,e.polygons=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return i(t,e)})),n)},e.lineString=o,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return o(t,e)})),n)},e.featureCollection=s,e.multiLineString=a,e.multiPoint=c,e.multiPolygon=l,e.geometryCollection=function(t,e,r){return void 0===r&&(r={}),n({type:"GeometryCollection",geometries:t},e,r)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=u,e.lengthToRadians=h,e.lengthToDegrees=function(t,e){return p(h(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=p,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return u(h(t,e),n)},e.convertArea=function(t,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[n];if(!i)throw new Error("invalid original units");var o=e.areaFactors[r];if(!o)throw new Error("invalid final units");return t/i*o},e.isNumber=f,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!f(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}},31540:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(84102);function i(t,e,n){if(null!==t)for(var r,o,s,a,c,l,u,h,p=0,f=0,d=t.type,g="FeatureCollection"===d,m="Feature"===d,y=g?t.features.length:1,_=0;_<y;_++){c=(h=!!(u=g?t.features[_].geometry:m?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var v=0;v<c;v++){var x=0,b=0;if(null!==(a=h?u.geometries[v]:u)){l=a.coordinates;var w=a.type;switch(p=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(l,f,_,x,b))return!1;f++,x++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],f,_,x,b))return!1;f++,"MultiPoint"===w&&x++}"LineString"===w&&x++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(o=0;o<l[r].length-p;o++){if(!1===e(l[r][o],f,_,x,b))return!1;f++}"MultiLineString"===w&&x++,"Polygon"===w&&b++}"Polygon"===w&&x++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(b=0,o=0;o<l[r].length;o++){for(s=0;s<l[r][o].length-p;s++){if(!1===e(l[r][o][s],f,_,x,b))return!1;f++}b++}x++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===i(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function s(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function a(t,e){var n,r,i,o,s,a,c,l,u,h,p=0,f="FeatureCollection"===t.type,d="Feature"===t.type,g=f?t.features.length:1;for(n=0;n<g;n++){for(a=f?t.features[n].geometry:d?t.geometry:t,l=f?t.features[n].properties:d?t.properties:{},u=f?t.features[n].bbox:d?t.bbox:void 0,h=f?t.features[n].id:d?t.id:void 0,s=(c=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=c?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,l,u,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],p,l,u,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,l,u,h))return!1;p++}}function c(t,e){a(t,(function(t,n,i,o,s){var a,c=null===t?null:t.type;switch(c){case null:case"Point":case"LineString":case"Polygon":return!1!==e(r.feature(t,i,{bbox:o,id:s}),n,0)&&void 0}switch(c){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<t.coordinates.length;l++){var u={type:a,coordinates:t.coordinates[l]};if(!1===e(r.feature(u,i),n,l))return!1}}))}function l(t,e){c(t,(function(t,n,o){var s=0;if(t.geometry){var a=t.geometry.type;if("Point"!==a&&"MultiPoint"!==a){var c,l=0,u=0,h=0;return!1!==i(t,(function(i,a,p,f,d){if(void 0===c||n>l||f>u||d>h)return c=i,l=n,u=f,h=d,void(s=0);var g=r.lineString([c,i],t.properties);if(!1===e(g,n,o,d,s))return!1;s++,c=i}))&&void 0}}}))}function u(t,e){if(!t)throw new Error("geojson is required");c(t,(function(t,n,i){if(null!==t.geometry){var o=t.geometry.type,s=t.geometry.coordinates;switch(o){case"LineString":if(!1===e(t,n,i,0,0))return!1;break;case"Polygon":for(var a=0;a<s.length;a++)if(!1===e(r.lineString(s[a],t.properties),n,i,a))return!1}}}))}e.coordAll=function(t){var e=[];return i(t,(function(t){e.push(t)})),e},e.coordEach=i,e.coordReduce=function(t,e,n,r){var o=n;return i(t,(function(t,r,i,s,a){o=0===r&&void 0===n?t:e(o,t,r,i,s,a)}),r),o},e.featureEach=s,e.featureReduce=function(t,e,n){var r=n;return s(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},e.findPoint=function(t,e){if(e=e||{},!r.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,o=e.multiFeatureIndex||0,s=e.geometryIndex||0,a=e.coordIndex||0,c=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),c=c||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":c=c||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":return r.point(l,c,e);case"MultiPoint":return o<0&&(o=l.length+o),r.point(l[o],c,e);case"LineString":return a<0&&(a=l.length+a),r.point(l[a],c,e);case"Polygon":return s<0&&(s=l.length+s),a<0&&(a=l[s].length+a),r.point(l[s][a],c,e);case"MultiLineString":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a),r.point(l[o][a],c,e);case"MultiPolygon":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s),a<0&&(a=l[o][s].length-a),r.point(l[o][s][a],c,e)}throw new Error("geojson is invalid")},e.findSegment=function(t,e){if(e=e||{},!r.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,o=e.multiFeatureIndex||0,s=e.geometryIndex||0,a=e.segmentIndex||0,c=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),c=c||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":c=c||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=l.length+a-1),r.lineString([l[a],l[a+1]],c,e);case"Polygon":return s<0&&(s=l.length+s),a<0&&(a=l[s].length+a-1),r.lineString([l[s][a],l[s][a+1]],c,e);case"MultiLineString":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a-1),r.lineString([l[o][a],l[o][a+1]],c,e);case"MultiPolygon":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s),a<0&&(a=l[o][s].length-a-1),r.lineString([l[o][s][a],l[o][s][a+1]],c,e)}throw new Error("geojson is invalid")},e.flattenEach=c,e.flattenReduce=function(t,e,n){var r=n;return c(t,(function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)})),r},e.geomEach=a,e.geomReduce=function(t,e,n){var r=n;return a(t,(function(t,i,o,s,a){r=0===i&&void 0===n?t:e(r,t,i,o,s,a)})),r},e.lineEach=u,e.lineReduce=function(t,e,n){var r=n;return u(t,(function(t,i,o,s){r=0===i&&void 0===n?t:e(r,t,i,o,s)})),r},e.propEach=o,e.propReduce=function(t,e,n){var r=n;return o(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},e.segmentEach=l,e.segmentReduce=function(t,e,n){var r=n,i=!1;return l(t,(function(t,o,s,a,c){r=!1===i&&void 0===n?t:e(r,t,o,s,a,c),i=!0})),r}},69282:function(t,e,n){"use strict";var r=n(34155),i=n(25108);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,s=void 0,s=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===o(s)?s:String(s)),r)}var i,s}function a(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var c,l,u=n(62136).codes,h=u.ERR_AMBIGUOUS_ARGUMENT,p=u.ERR_INVALID_ARG_TYPE,f=u.ERR_INVALID_ARG_VALUE,d=u.ERR_INVALID_RETURN_VALUE,g=u.ERR_MISSING_ARGS,m=n(25961),y=n(89539).inspect,_=n(89539).types,v=_.isPromise,x=_.isRegExp,b=n(28162)(),w=n(75624)(),E=n(21924)("RegExp.prototype.test");new Map;function T(){var t=n(19158);c=t.isDeepEqual,l=t.isDeepStrictEqual}var S=!1,k=t.exports=C,A={};function M(t){if(t.message instanceof Error)throw t.message;throw new m(t)}function I(t,e,n,r){if(!n){var i=!1;if(0===e)i=!0,r="No value argument passed to `assert.ok()`";else if(r instanceof Error)throw r;var o=new m({actual:n,expected:!0,message:r,operator:"==",stackStartFn:t});throw o.generatedMessage=i,o}}function C(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];I.apply(void 0,[C,e.length].concat(e))}k.fail=function t(e,n,o,s,a){var c,l=arguments.length;if(0===l)c="Failed";else if(1===l)o=e,e=void 0;else{if(!1===S)S=!0,(r.emitWarning?r.emitWarning:i.warn.bind(i))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094");2===l&&(s="!=")}if(o instanceof Error)throw o;var u={actual:e,expected:n,operator:void 0===s?"fail":s,stackStartFn:a||t};void 0!==o&&(u.message=o);var h=new m(u);throw c&&(h.message=c,h.generatedMessage=!0),h},k.AssertionError=m,k.ok=C,k.equal=function t(e,n,r){if(arguments.length<2)throw new g("actual","expected");e!=n&&M({actual:e,expected:n,message:r,operator:"==",stackStartFn:t})},k.notEqual=function t(e,n,r){if(arguments.length<2)throw new g("actual","expected");e==n&&M({actual:e,expected:n,message:r,operator:"!=",stackStartFn:t})},k.deepEqual=function t(e,n,r){if(arguments.length<2)throw new g("actual","expected");void 0===c&&T(),c(e,n)||M({actual:e,expected:n,message:r,operator:"deepEqual",stackStartFn:t})},k.notDeepEqual=function t(e,n,r){if(arguments.length<2)throw new g("actual","expected");void 0===c&&T(),c(e,n)&&M({actual:e,expected:n,message:r,operator:"notDeepEqual",stackStartFn:t})},k.deepStrictEqual=function t(e,n,r){if(arguments.length<2)throw new g("actual","expected");void 0===c&&T(),l(e,n)||M({actual:e,expected:n,message:r,operator:"deepStrictEqual",stackStartFn:t})},k.notDeepStrictEqual=function t(e,n,r){if(arguments.length<2)throw new g("actual","expected");void 0===c&&T();l(e,n)&&M({actual:e,expected:n,message:r,operator:"notDeepStrictEqual",stackStartFn:t})},k.strictEqual=function t(e,n,r){if(arguments.length<2)throw new g("actual","expected");w(e,n)||M({actual:e,expected:n,message:r,operator:"strictEqual",stackStartFn:t})},k.notStrictEqual=function t(e,n,r){if(arguments.length<2)throw new g("actual","expected");w(e,n)&&M({actual:e,expected:n,message:r,operator:"notStrictEqual",stackStartFn:t})};var O=a((function t(e,n,r){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n.forEach((function(t){t in e&&(void 0!==r&&"string"==typeof r[t]&&x(e[t])&&E(e[t],r[t])?i[t]=r[t]:i[t]=e[t])}))}));function P(t,e,n,r){if("function"!=typeof e){if(x(e))return E(e,t);if(2===arguments.length)throw new p("expected",["Function","RegExp"],e);if("object"!==o(t)||null===t){var i=new m({actual:t,expected:e,message:n,operator:"deepStrictEqual",stackStartFn:r});throw i.operator=r.name,i}var s=Object.keys(e);if(e instanceof Error)s.push("name","message");else if(0===s.length)throw new f("error",e,"may not be an empty object");return void 0===c&&T(),s.forEach((function(i){"string"==typeof t[i]&&x(e[i])&&E(e[i],t[i])||function(t,e,n,r,i,o){if(!(n in t)||!l(t[n],e[n])){if(!r){var s=new O(t,i),a=new O(e,i,t),c=new m({actual:s,expected:a,operator:"deepStrictEqual",stackStartFn:o});throw c.actual=t,c.expected=e,c.operator=o.name,c}M({actual:t,expected:e,message:r,operator:o.name,stackStartFn:o})}}(t,e,i,n,s,r)})),!0}return void 0!==e.prototype&&t instanceof e||!Error.isPrototypeOf(e)&&!0===e.call({},t)}function L(t){if("function"!=typeof t)throw new p("fn","Function",t);try{t()}catch(t){return t}return A}function D(t){return v(t)||null!==t&&"object"===o(t)&&"function"==typeof t.then&&"function"==typeof t.catch}function R(t){return Promise.resolve().then((function(){var e;if("function"==typeof t){if(!D(e=t()))throw new d("instance of Promise","promiseFn",e)}else{if(!D(t))throw new p("promiseFn",["Function","Promise"],t);e=t}return Promise.resolve().then((function(){return e})).then((function(){return A})).catch((function(t){return t}))}))}function N(t,e,n,r){if("string"==typeof n){if(4===arguments.length)throw new p("error",["Object","Error","Function","RegExp"],n);if("object"===o(e)&&null!==e){if(e.message===n)throw new h("error/message",'The error message "'.concat(e.message,'" is identical to the message.'))}else if(e===n)throw new h("error/message",'The error "'.concat(e,'" is identical to the message.'));r=n,n=void 0}else if(null!=n&&"object"!==o(n)&&"function"!=typeof n)throw new p("error",["Object","Error","Function","RegExp"],n);if(e===A){var i="";n&&n.name&&(i+=" (".concat(n.name,")")),i+=r?": ".concat(r):".";var s="rejects"===t.name?"rejection":"exception";M({actual:void 0,expected:n,operator:t.name,message:"Missing expected ".concat(s).concat(i),stackStartFn:t})}if(n&&!P(e,n,r,t))throw e}function j(t,e,n,r){if(e!==A){if("string"==typeof n&&(r=n,n=void 0),!n||P(e,n)){var i=r?": ".concat(r):".",o="doesNotReject"===t.name?"rejection":"exception";M({actual:e,expected:n,operator:t.name,message:"Got unwanted ".concat(o).concat(i,"\n")+'Actual message: "'.concat(e&&e.message,'"'),stackStartFn:t})}throw e}}function z(t,e,n,r,i){if(!x(e))throw new p("regexp","RegExp",e);var s="match"===i;if("string"!=typeof t||E(e,t)!==s){if(n instanceof Error)throw n;var a=!n;n=n||("string"!=typeof t?'The "string" argument must be of type string. Received type '+"".concat(o(t)," (").concat(y(t),")"):(s?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(y(e),". Input:\n\n").concat(y(t),"\n"));var c=new m({actual:t,expected:e,message:n,operator:i,stackStartFn:r});throw c.generatedMessage=a,c}}function B(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];I.apply(void 0,[B,e.length].concat(e))}k.throws=function t(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];N.apply(void 0,[t,L(e)].concat(r))},k.rejects=function t(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return R(e).then((function(e){return N.apply(void 0,[t,e].concat(r))}))},k.doesNotThrow=function t(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];j.apply(void 0,[t,L(e)].concat(r))},k.doesNotReject=function t(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return R(e).then((function(e){return j.apply(void 0,[t,e].concat(r))}))},k.ifError=function t(e){if(null!=e){var n="ifError got unwanted exception: ";"object"===o(e)&&"string"==typeof e.message?0===e.message.length&&e.constructor?n+=e.constructor.name:n+=e.message:n+=y(e);var r=new m({actual:e,expected:null,operator:"ifError",message:n,stackStartFn:t}),i=e.stack;if("string"==typeof i){var s=i.split("\n");s.shift();for(var a=r.stack.split("\n"),c=0;c<s.length;c++){var l=a.indexOf(s[c]);if(-1!==l){a=a.slice(0,l);break}}r.stack="".concat(a.join("\n"),"\n").concat(s.join("\n"))}throw r}},k.match=function t(e,n,r){z(e,n,r,t,"match")},k.doesNotMatch=function t(e,n,r){z(e,n,r,t,"doesNotMatch")},k.strict=b(B,k,{equal:k.strictEqual,deepEqual:k.deepStrictEqual,notEqual:k.notStrictEqual,notDeepEqual:k.notDeepStrictEqual}),k.strict.strict=k.strict},25961:function(t,e,n){"use strict";var r=n(34155);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return(e=c(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c(r.key),r)}}function c(t){var e=function(t,e){if("object"!==m(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===m(e)?e:String(e)}function l(t,e){if(e&&("object"===m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){var e="function"==typeof Map?new Map:void 0;return h=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return p(t,arguments,g(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),d(r,t)},h(t)}function p(t,e,n){return p=f()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&d(i,n.prototype),i},p.apply(null,arguments)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function d(t,e){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},d(t,e)}function g(t){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},g(t)}function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}var y=n(89539).inspect,_=n(62136).codes.ERR_INVALID_ARG_TYPE;function v(t,e,n){return(void 0===n||n>t.length)&&(n=t.length),t.substring(n-e.length,n)===e}var x="",b="",w="",E="",T={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function S(t){var e=Object.keys(t),n=Object.create(Object.getPrototypeOf(t));return e.forEach((function(e){n[e]=t[e]})),Object.defineProperty(n,"message",{value:t.message}),n}function k(t){return y(t,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function A(t,e,n){var i="",o="",s=0,a="",c=!1,l=k(t),u=l.split("\n"),h=k(e).split("\n"),p=0,f="";if("strictEqual"===n&&"object"===m(t)&&"object"===m(e)&&null!==t&&null!==e&&(n="strictEqualObject"),1===u.length&&1===h.length&&u[0]!==h[0]){var d=u[0].length+h[0].length;if(d<=10){if(!("object"===m(t)&&null!==t||"object"===m(e)&&null!==e||0===t&&0===e))return"".concat(T[n],"\n\n")+"".concat(u[0]," !== ").concat(h[0],"\n")}else if("strictEqualObject"!==n){if(d<(r.stderr&&r.stderr.isTTY?r.stderr.columns:80)){for(;u[0][p]===h[0][p];)p++;p>2&&(f="\n  ".concat(function(t,e){if(e=Math.floor(e),0==t.length||0==e)return"";var n=t.length*e;for(e=Math.floor(Math.log(e)/Math.log(2));e;)t+=t,e--;return t+t.substring(0,n-t.length)}(" ",p),"^"),p=0)}}}for(var g=u[u.length-1],y=h[h.length-1];g===y&&(p++<2?a="\n  ".concat(g).concat(a):i=g,u.pop(),h.pop(),0!==u.length&&0!==h.length);)g=u[u.length-1],y=h[h.length-1];var _=Math.max(u.length,h.length);if(0===_){var S=l.split("\n");if(S.length>30)for(S[26]="".concat(x,"...").concat(E);S.length>27;)S.pop();return"".concat(T.notIdentical,"\n\n").concat(S.join("\n"),"\n")}p>3&&(a="\n".concat(x,"...").concat(E).concat(a),c=!0),""!==i&&(a="\n  ".concat(i).concat(a),i="");var A=0,M=T[n]+"\n".concat(b,"+ actual").concat(E," ").concat(w,"- expected").concat(E),I=" ".concat(x,"...").concat(E," Lines skipped");for(p=0;p<_;p++){var C=p-s;if(u.length<p+1)C>1&&p>2&&(C>4?(o+="\n".concat(x,"...").concat(E),c=!0):C>3&&(o+="\n  ".concat(h[p-2]),A++),o+="\n  ".concat(h[p-1]),A++),s=p,i+="\n".concat(w,"-").concat(E," ").concat(h[p]),A++;else if(h.length<p+1)C>1&&p>2&&(C>4?(o+="\n".concat(x,"...").concat(E),c=!0):C>3&&(o+="\n  ".concat(u[p-2]),A++),o+="\n  ".concat(u[p-1]),A++),s=p,o+="\n".concat(b,"+").concat(E," ").concat(u[p]),A++;else{var O=h[p],P=u[p],L=P!==O&&(!v(P,",")||P.slice(0,-1)!==O);L&&v(O,",")&&O.slice(0,-1)===P&&(L=!1,P+=","),L?(C>1&&p>2&&(C>4?(o+="\n".concat(x,"...").concat(E),c=!0):C>3&&(o+="\n  ".concat(u[p-2]),A++),o+="\n  ".concat(u[p-1]),A++),s=p,o+="\n".concat(b,"+").concat(E," ").concat(P),i+="\n".concat(w,"-").concat(E," ").concat(O),A+=2):(o+=i,i="",1!==C&&0!==p||(o+="\n  ".concat(P),A++))}if(A>20&&p<_-2)return"".concat(M).concat(I,"\n").concat(o,"\n").concat(x,"...").concat(E).concat(i,"\n")+"".concat(x,"...").concat(E)}return"".concat(M).concat(c?I:"","\n").concat(o).concat(i).concat(a).concat(f)}var M=function(t,e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(v,t);var n,i,s,c,h,p=(n=v,i=f(),function(){var t,e=g(n);if(i){var r=g(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return l(this,t)});function v(t){var e;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,v),"object"!==m(t)||null===t)throw new _("options","Object",t);var n=t.message,i=t.operator,o=t.stackStartFn,s=t.actual,a=t.expected,c=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=n)e=p.call(this,String(n));else if(r.stderr&&r.stderr.isTTY&&(r.stderr&&r.stderr.getColorDepth&&1!==r.stderr.getColorDepth()?(x="[34m",b="[32m",E="[39m",w="[31m"):(x="",b="",E="",w="")),"object"===m(s)&&null!==s&&"object"===m(a)&&null!==a&&"stack"in s&&s instanceof Error&&"stack"in a&&a instanceof Error&&(s=S(s),a=S(a)),"deepStrictEqual"===i||"strictEqual"===i)e=p.call(this,A(s,a,i));else if("notDeepStrictEqual"===i||"notStrictEqual"===i){var h=T[i],f=k(s).split("\n");if("notStrictEqual"===i&&"object"===m(s)&&null!==s&&(h=T.notStrictEqualObject),f.length>30)for(f[26]="".concat(x,"...").concat(E);f.length>27;)f.pop();e=1===f.length?p.call(this,"".concat(h," ").concat(f[0])):p.call(this,"".concat(h,"\n\n").concat(f.join("\n"),"\n"))}else{var d=k(s),g="",y=T[i];"notDeepEqual"===i||"notEqual"===i?(d="".concat(T[i],"\n\n").concat(d)).length>1024&&(d="".concat(d.slice(0,1021),"...")):(g="".concat(k(a)),d.length>512&&(d="".concat(d.slice(0,509),"...")),g.length>512&&(g="".concat(g.slice(0,509),"...")),"deepEqual"===i||"equal"===i?d="".concat(y,"\n\n").concat(d,"\n\nshould equal\n\n"):g=" ".concat(i," ").concat(g)),e=p.call(this,"".concat(d).concat(g))}return Error.stackTraceLimit=c,e.generatedMessage=!n,Object.defineProperty(u(e),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),e.code="ERR_ASSERTION",e.actual=s,e.expected=a,e.operator=i,Error.captureStackTrace&&Error.captureStackTrace(u(e),o),e.stack,e.name="AssertionError",l(e)}return s=v,(c=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:e,value:function(t,e){return y(this,o(o({},e),{},{customInspect:!1,depth:0}))}}])&&a(s.prototype,c),h&&a(s,h),Object.defineProperty(s,"prototype",{writable:!1}),v}(h(Error),y.custom);t.exports=M},62136:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,s=void 0,s=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===r(s)?s:String(s)),i)}var o,s}function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=a(t);if(e){var o=a(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}var c,l,u={};function h(t,e,n){n||(n=Error);var r=function(n){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}(u,n);var r,a,c,l=s(u);function u(n,r,i){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),o=l.call(this,function(t,n,r){return"string"==typeof e?e:e(t,n,r)}(n,r,i)),o.code=t,o}return r=u,a&&i(r.prototype,a),c&&i(r,c),Object.defineProperty(r,"prototype",{writable:!1}),r}(n);u[t]=r}function p(t,e){if(Array.isArray(t)){var n=t.length;return t=t.map((function(t){return String(t)})),n>2?"one of ".concat(e," ").concat(t.slice(0,n-1).join(", "),", or ")+t[n-1]:2===n?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}h("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),h("ERR_INVALID_ARG_TYPE",(function(t,e,i){var o,s,a,l;if(void 0===c&&(c=n(69282)),c("string"==typeof t,"'name' must be a string"),"string"==typeof e&&(s="not ",e.substr(!a||a<0?0:+a,s.length)===s)?(o="must not be",e=e.replace(/^not /,"")):o="must be",function(t,e,n){return(void 0===n||n>t.length)&&(n=t.length),t.substring(n-e.length,n)===e}(t," argument"))l="The ".concat(t," ").concat(o," ").concat(p(e,"type"));else{var u=function(t,e,n){return"number"!=typeof n&&(n=0),!(n+e.length>t.length)&&-1!==t.indexOf(e,n)}(t,".")?"property":"argument";l='The "'.concat(t,'" ').concat(u," ").concat(o," ").concat(p(e,"type"))}return l+=". Received type ".concat(r(i))}),TypeError),h("ERR_INVALID_ARG_VALUE",(function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===l&&(l=n(89539));var i=l.inspect(e);return i.length>128&&(i="".concat(i.slice(0,128),"...")),"The argument '".concat(t,"' ").concat(r,". Received ").concat(i)}),TypeError,RangeError),h("ERR_INVALID_RETURN_VALUE",(function(t,e,n){var i;return i=n&&n.constructor&&n.constructor.name?"instance of ".concat(n.constructor.name):"type ".concat(r(n)),"Expected ".concat(t,' to be returned from the "').concat(e,'"')+" function but got ".concat(i,".")}),TypeError),h("ERR_MISSING_ARGS",(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];void 0===c&&(c=n(69282)),c(e.length>0,"At least one arg needs to be specified");var i="The ",o=e.length;switch(e=e.map((function(t){return'"'.concat(t,'"')})),o){case 1:i+="".concat(e[0]," argument");break;case 2:i+="".concat(e[0]," and ").concat(e[1]," arguments");break;default:i+=e.slice(0,o-1).join(", "),i+=", and ".concat(e[o-1]," arguments")}return"".concat(i," must be specified")}),TypeError),t.exports.codes=u},19158:function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return a}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var s=void 0!==/a/g.flags,a=function(t){var e=[];return t.forEach((function(t){return e.push(t)})),e},c=function(t){var e=[];return t.forEach((function(t,n){return e.push([n,t])})),e},l=Object.is?Object.is:n(20609),u=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},h=Number.isNaN?Number.isNaN:n(20360);function p(t){return t.call.bind(t)}var f=p(Object.prototype.hasOwnProperty),d=p(Object.prototype.propertyIsEnumerable),g=p(Object.prototype.toString),m=n(89539).types,y=m.isAnyArrayBuffer,_=m.isArrayBufferView,v=m.isDate,x=m.isMap,b=m.isRegExp,w=m.isSet,E=m.isNativeError,T=m.isBoxedPrimitive,S=m.isNumberObject,k=m.isStringObject,A=m.isBooleanObject,M=m.isBigIntObject,I=m.isSymbolObject,C=m.isFloat32Array,O=m.isFloat64Array;function P(t){if(0===t.length||t.length>10)return!0;for(var e=0;e<t.length;e++){var n=t.charCodeAt(e);if(n<48||n>57)return!0}return 10===t.length&&t>=Math.pow(2,32)}function L(t){return Object.keys(t).filter(P).concat(u(t).filter(Object.prototype.propertyIsEnumerable.bind(t)))}function D(t,e){if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0}var R=0,N=1,j=2,z=3;function B(t,e,n,r){if(t===e)return 0!==t||(!n||l(t,e));if(n){if("object"!==o(t))return"number"==typeof t&&h(t)&&h(e);if("object"!==o(e)||null===t||null===e)return!1;if(Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1}else{if(null===t||"object"!==o(t))return(null===e||"object"!==o(e))&&t==e;if(null===e||"object"!==o(e))return!1}var i,a,c,u,p=g(t);if(p!==g(e))return!1;if(Array.isArray(t)){if(t.length!==e.length)return!1;var f=L(t),d=L(e);return f.length===d.length&&U(t,e,n,r,N,f)}if("[object Object]"===p&&(!x(t)&&x(e)||!w(t)&&w(e)))return!1;if(v(t)){if(!v(e)||Date.prototype.getTime.call(t)!==Date.prototype.getTime.call(e))return!1}else if(b(t)){if(!b(e)||(c=t,u=e,!(s?c.source===u.source&&c.flags===u.flags:RegExp.prototype.toString.call(c)===RegExp.prototype.toString.call(u))))return!1}else if(E(t)||t instanceof Error){if(t.message!==e.message||t.name!==e.name)return!1}else{if(_(t)){if(n||!C(t)&&!O(t)){if(!function(t,e){return t.byteLength===e.byteLength&&0===D(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}(t,e))return!1}else if(!function(t,e){if(t.byteLength!==e.byteLength)return!1;for(var n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0}(t,e))return!1;var m=L(t),P=L(e);return m.length===P.length&&U(t,e,n,r,R,m)}if(w(t))return!(!w(e)||t.size!==e.size)&&U(t,e,n,r,j);if(x(t))return!(!x(e)||t.size!==e.size)&&U(t,e,n,r,z);if(y(t)){if(a=e,(i=t).byteLength!==a.byteLength||0!==D(new Uint8Array(i),new Uint8Array(a)))return!1}else if(T(t)&&!function(t,e){return S(t)?S(e)&&l(Number.prototype.valueOf.call(t),Number.prototype.valueOf.call(e)):k(t)?k(e)&&String.prototype.valueOf.call(t)===String.prototype.valueOf.call(e):A(t)?A(e)&&Boolean.prototype.valueOf.call(t)===Boolean.prototype.valueOf.call(e):M(t)?M(e)&&BigInt.prototype.valueOf.call(t)===BigInt.prototype.valueOf.call(e):I(e)&&Symbol.prototype.valueOf.call(t)===Symbol.prototype.valueOf.call(e)}(t,e))return!1}return U(t,e,n,r,R)}function F(t,e){return e.filter((function(e){return d(t,e)}))}function U(t,e,n,i,s,l){if(5===arguments.length){l=Object.keys(t);var h=Object.keys(e);if(l.length!==h.length)return!1}for(var p=0;p<l.length;p++)if(!f(e,l[p]))return!1;if(n&&5===arguments.length){var g=u(t);if(0!==g.length){var m=0;for(p=0;p<g.length;p++){var y=g[p];if(d(t,y)){if(!d(e,y))return!1;l.push(y),m++}else if(d(e,y))return!1}var _=u(e);if(g.length!==_.length&&F(e,_).length!==m)return!1}else{var v=u(e);if(0!==v.length&&0!==F(e,v).length)return!1}}if(0===l.length&&(s===R||s===N&&0===t.length||0===t.size))return!0;if(void 0===i)i={val1:new Map,val2:new Map,position:0};else{var x=i.val1.get(t);if(void 0!==x){var b=i.val2.get(e);if(void 0!==b)return x===b}i.position++}i.val1.set(t,i.position),i.val2.set(e,i.position);var w=function(t,e,n,i,s,l){var u=0;if(l===j){if(!function(t,e,n,r){for(var i=null,s=a(t),c=0;c<s.length;c++){var l=s[c];if("object"===o(l)&&null!==l)null===i&&(i=new Set),i.add(l);else if(!e.has(l)){if(n)return!1;if(!W(t,e,l))return!1;null===i&&(i=new Set),i.add(l)}}if(null!==i){for(var u=a(e),h=0;h<u.length;h++){var p=u[h];if("object"===o(p)&&null!==p){if(!V(i,p,n,r))return!1}else if(!n&&!t.has(p)&&!V(i,p,n,r))return!1}return 0===i.size}return!0}(t,e,n,s))return!1}else if(l===z){if(!function(t,e,n,i){for(var s=null,a=c(t),l=0;l<a.length;l++){var u=r(a[l],2),h=u[0],p=u[1];if("object"===o(h)&&null!==h)null===s&&(s=new Set),s.add(h);else{var f=e.get(h);if(void 0===f&&!e.has(h)||!B(p,f,n,i)){if(n)return!1;if(!G(t,e,h,p,i))return!1;null===s&&(s=new Set),s.add(h)}}}if(null!==s){for(var d=c(e),g=0;g<d.length;g++){var m=r(d[g],2),y=m[0],_=m[1];if("object"===o(y)&&null!==y){if(!$(s,t,y,_,n,i))return!1}else if(!(n||t.has(y)&&B(t.get(y),_,!1,i)||$(s,t,y,_,!1,i)))return!1}return 0===s.size}return!0}(t,e,n,s))return!1}else if(l===N)for(;u<t.length;u++){if(!f(t,u)){if(f(e,u))return!1;for(var h=Object.keys(t);u<h.length;u++){var p=h[u];if(!f(e,p)||!B(t[p],e[p],n,s))return!1}return h.length===Object.keys(e).length}if(!f(e,u)||!B(t[u],e[u],n,s))return!1}for(u=0;u<i.length;u++){var d=i[u];if(!B(t[d],e[d],n,s))return!1}return!0}(t,e,n,l,i,s);return i.val1.delete(t),i.val2.delete(e),w}function V(t,e,n,r){for(var i=a(t),o=0;o<i.length;o++){var s=i[o];if(B(e,s,n,r))return t.delete(s),!0}return!1}function q(t){switch(o(t)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":t=+t;case"number":if(h(t))return!1}return!0}function W(t,e,n){var r=q(n);return null!=r?r:e.has(r)&&!t.has(r)}function G(t,e,n,r,i){var o=q(n);if(null!=o)return o;var s=e.get(o);return!(void 0===s&&!e.has(o)||!B(r,s,!1,i))&&(!t.has(o)&&B(r,s,!1,i))}function $(t,e,n,r,i,o){for(var s=a(t),c=0;c<s.length;c++){var l=s[c];if(B(n,l,i,o)&&B(r,e.get(l),i,o))return t.delete(l),!0}return!1}t.exports={isDeepEqual:function(t,e){return B(t,e,false)},isDeepStrictEqual:function(t,e){return B(t,e,true)}}},14701:function(t,e,n){"use strict";n.a(t,(async function(t,r){try{n.d(e,{NE:function(){return et},SO:function(){return it},oK:function(){return rt},qr:function(){return nt}});n(56977);var i=n(32388),o=(n(21343),n(79083),n(13572)),s=n(31891),a=n(54226),c=n(62076),l=n(584),u=n(51333),h=n(62633),p=n(63267),f=n(49769),d=n(64786),g=n(79578),m=n(78244),y=n(78620),_=n(84471),v=n(25780),x=n(74301),b=n(28294),w=n(88704),E=n(11463),T=n(39216),S=n(60389),k=n(5829),A=n(51242),M=n(76119),I=n(36152),C=n(13427),O=n.n(C),P=t([i,S,A,M]);[i,S,A,M]=P.then?(await P)():P,(0,s.Z)("#control-container [data-tippy-placement=right][data-tippy-content]",{placement:"right",animation:"scale"}),(0,s.Z)("#control-container [data-tippy-placement=left][data-tippy-content]",{placement:"left",animation:"scale"});var L,D,R,N,j=$("#menu"),z=$("#control-container input[type=text][name=position]"),B=$("#control-container input[type=text][name=altitude]"),F=$("#control-container input[type=text][name=zoom]"),U=$("#control-container .compass"),V=$("#target-tab"),q=$("#result-tab"),W=$("#command-tab"),G=($("#info-tab"),$("#target-tab-panel")),H=$("#direct-shot"),Z=$("#indirect-shot"),Y=$("#info-tab-panel"),X=!1,K=(0,o.Z)(["#map-grid-panel","#info-panel"],{sizes:[100,0],minSize:[0,0],gutterSize:3,onDragStart:function(){},onDrag:function(){},onDragEnd:function(){ct()}}),J=(0,o.Z)(["#map-panel","#grid-panel"],{sizes:[100,0],minSize:[0,0],gutterSize:3,direction:"vertical",onDragStart:function(){},onDrag:function(){},onDragEnd:function(){ct()}});(0,o.Z)(["#chat-content-panel","#chat-message-panel"],{sizes:[80,20],minSize:[0,0],gutterSize:3,direction:"vertical",onDragStart:function(){},onDrag:function(){},onDragEnd:function(){}}),(0,o.Z)(["#direct-shot-panel","#indirect-shot-panel"],{sizes:[50,50],minSize:[0,0],gutterSize:3,onDragStart:function(){},onDrag:function(){},onDragEnd:function(){}});function et(){K.setSizes([80,20]),ct()}function nt(){K.setSizes([70,30]),ct()}function rt(){K.collapse(1),ct()}function it(){J.setSizes([60,40]),ct()}K.collapse(1),J.collapse(1),a.Z.of($("input[type=number][name=range]"));var Q=l.df("map-container",ot,c.KJ),tt=function(t){var e=Q.getCenter();z.val(e.lng.toFixed(5)+", "+e.lat.toFixed(5)),U.rotate(360-Q.getBearing()),F.val(Q.getZoom().toFixed(2)),B.val("".concat(parseInt(l.nn(Q))," m"))}.debounce(20);function ot(){(0,M.sp)(Q),st(),at(Q),ACCOUNT.locSync&&M.xp.interval(60..seconds())}function st(){(0,I.cV)(Q),(0,y.B2)(Q),(0,T.m0)(Q),(0,E.wf)(Q),(0,w.jN)(Q),(0,k.X)(Q),(0,b.ym)(Q),(0,g.Wh)(Q),(0,m.bU)(Q),(0,v.kf)(Q),(0,_.ZO)(Q),(0,d.o)(Q),(0,p.L8)(Q),(0,x.MP)(Q),(0,f.uD)(Q),(0,_.LQ)(Q),(0,v.ss)(Q),X=!0}function at(t){(0,g.p3)(t),(0,k.pe)(t),(0,p.oT)(t,(function(e){e&&e.properties&&(0,A.M)(t,e.properties)}))}function ct(){Q.resize()}function lt(){if(!1!==X){var t=(0,g.KW)(Q);t.length>0&&(L=null,D=null,R=null,N=null,G.empty(),H.empty(),Z.empty(),(0,k.kS)(Q),(0,b.XX)(Q),(0,T.Wk)(Q),(0,E.G2)(Q),(0,w.eQ)(Q),(0,I.kN)(Q),(0,k._A)(Q),(0,p._j)(Q),(0,g.Jj)(Q),(0,m.PY)(Q),(0,y.Zr)(Q),(0,x.R0)(Q),(0,f.i0)(Q),rt(),q.disable(),q.prop("checked",!1),(0,m.Uy)(Q,t,(function(t,e,n,r){L=t,D=e,R=n,N=r,G.html(O()({targets:t})),(0,k.CJ)(e),V.enable(),V.prop("checked",!0),it(),Q.panTo(e.geometry.coordinates)})))}}function ut(){X=!1,L=null,D=null,R=null,N=null,G.empty(),H.empty(),Z.empty(),(0,k.kS)(Q),(0,b.XX)(Q),(0,T.Wk)(Q),(0,E.G2)(Q),(0,w.eQ)(Q),(0,I.kN)(Q),(0,k._A)(Q),(0,p.D7)(Q),(0,g.Jj)(Q),(0,m.PY)(Q),(0,y.Zr)(Q),(0,x.R0)(Q),(0,f.i0)(Q),(0,d.lZ)(Q),K.collapse(1),J.collapse(1),ct(),V.disable(),V.prop("checked",!1),q.disable(),q.prop("checked",!1)}l.tf(Q,tt,"dragend","zoomend","rotate","resize"),l.mg(Q,5e3),Q.on("mousemove",(function(t){z.val(t.lngLat.lng.toFixed(5)+", "+t.lngLat.lat.toFixed(5))})),Q.on("mouseout",(function(t){var e=Q.getCenter();z.val(e.lng.toFixed(5)+", "+e.lat.toFixed(5))})),$(document).hotkey("keydown","F2",(function(){(0,h.O)(Q)}),!1),Router.onresize((function(){ct()})),Router.watch(document).onclick().route("flyTo",(function(t,e,n){var r,i=null!==(r=(0,v.gT)(parseInt(n)))&&void 0!==r?r:(0,p.E$)(parseInt(n));i&&Q.flyTo({center:i.geometry.coordinates})})).route("tiles",(function(t,e,n){u.Q(Q),j.prop("checked",!1)})).route("command",(function(t,e,n){W.prop("checked",!0),et(),j.prop("checked",!1)})).route("closeCommand",(function(t,e,n){rt(),j.prop("checked",!1)})).route("closeInfoCommand",(function(t,e,n){J.collapse(1),ct()})).route("location",(function(t,e,n){l.Ac(Q),j.prop("checked",!1)})).route("reset",(function(t,e,n){Confirm(330,150,"초기화","초기화 하시겠습니까?",(function(){G.empty(),Y.empty(),ut(),st()}),"초기화","취 소"),j.prop("checked",!1)})).route("selectStyle",(function(t,e,n){u.A(n),Q.on("style.load",(function(t){ut(),st()}))})).route("target",(function(t,e,n){lt(),H.empty(),Z.empty(),q.disable(),q.prop("checked",!1),V.enable(),V.prop("checked",!0),j.prop("checked",!1)})).route("attack",(function(t,e,n){H.empty(),Z.empty(),!1!==X&&(0,S.f)(Q,L,D,R,N)})).route("setting",(function(t,e,n){(0,h.O)(Q),j.prop("checked",!1)})).ondblclick().route("resetBearing",(function(t,e,n){l.Vl(Q)})).ontab().route("info",(function(t,e,n,r){Y[0].scrollIntoView(!1)})),r()}catch(ht){r(ht)}}))},62076:function(t,e,n){"use strict";n.d(e,{Ag:function(){return v},B8:function(){return p},DY:function(){return _},Fh:function(){return o},HV:function(){return r},J_:function(){return l},KJ:function(){return d},NX:function(){return g},OJ:function(){return a},Rm:function(){return u},Vr:function(){return i},bo:function(){return m},g2:function(){return h},kL:function(){return f},kc:function(){return x},qn:function(){return y},rE:function(){return c},tB:function(){return s},zt:function(){return b}});n(43371),n(69826),n(41539),n(31672),n(2490),n(59461),n(68309);var r=8,i=[126.58744,38.30119],o=2,s=1,a=[2.6,2.6],c=[.2,2],l=Object.freeze({steps:360,units:"kilometers"}),u=Object.freeze({units:"kilometers"}),h=Object.freeze({units:"meters"}),p=Object.freeze([{name:"Monochrome",url:"mapbox://styles/funzin-mapbox/clh7dnuvy00ae01pz7ysq1cvp",image:"/images/tiles/monochrome.png"},{name:"Satellite",url:"mapbox://styles/funzin-mapbox/clh7dr3rp00am01r57suc3vlp",image:"/images/tiles/statellite.png"},{name:"Outdoor 1",url:"mapbox://styles/funzin-mapbox/clh7dubh700an01r54biu9bhz",image:"/images/tiles/out-door-1.png"},{name:"Outdoor 2",url:"mapbox://styles/funzin-mapbox/clh7ds7lx00an01rhec5sfovw",image:"/images/tiles/out-door-2.png"},{name:"Navigation",url:"mapbox://styles/funzin-mapbox/clmjz1r2i04a801qi3w4g8p4w",image:"/images/tiles/navigation.png"}]),f=p.find((function(t){return"Outdoor 1"===t.name})),d=(p.find((function(t){return"Outdoor 2"===t.name})),p.find((function(t){return"Satellite"===t.name}))),g=(p.find((function(t){return"Monochrome"===t.name})),p.find((function(t){return"Navigation"===t.name})),8.5),m=23,y=6,_=10,v=3,x=6.5,b=30},60389:function(t,e,n){"use strict";n.a(t,(async function(t,r){try{n.d(e,{f:function(){return N}});n(57327),n(41539),n(88449),n(2490),n(59849),n(15581),n(34514),n(54747),n(69826),n(31672),n(59461),n(56977),n(21249),n(57640),n(9924),n(47941),n(85827),n(25387),n(72608),n(69600),n(92222);var i=n(96486),o=n.n(i),s=n(77170),a=n(64311),c=n.n(a),l=n(52861),u=n(16171),h=n(62076),p=n(17544),f=n(14701),d=n(78244),g=n(25780),m=n(74301),y=n(36152),_=n(11463),v=n(39216),x=n(28294),b=n(88704),w=n(5829),E=n(76119),T=n(78201),S=n.n(T),k=n(29114),A=n.n(k),M=n(25108),I=t([f,E]);[f,E]=I.then?(await I)():I;var C,O,P=$("input[type=number][name=range]"),L=$("#result-tab"),D=$("#direct-shot"),R=$("#indirect-shot");function N(t,e,n,r,i){if(C=t,e&&e.length){var a=s.Xwo(n.geometry.coordinates,parseFloat(P.val()),h.J_);Confirm(420,140,"분석","최적 공격 무기 분석.",(function(){O=null;var t={targets:(0,d.L$)(C),peers:(0,g.Gw)(C).filter((function(t){return s.Fpf(t,a)})),artilleries:(0,g.F3)(C).filter((function(t){return s.Fpf(t,a)})),center:n,bbox:r,area:i},e=u.Z.show({text:"계산 요청 중",opacity:.5,seconds:60,circle:!0,mask:"#000",zIndex:1100});$.ajax({url:"https://infer-kwm.funzin.co.kr/predict",type:"post",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(t),complete:function(t,e){},success:function(t,a,u){L.enable(),L.prop("checked",!0);var p=(0,g.go)(C),f=o().cloneDeep(t),d=[];f.originalResponse=t;var m=[],y=0;f.p2p.forEach((function(t){t.matches.forEach((function(t){var e=o().cloneDeep(p.find((function(e){return e.properties.unitWeaponNo===t.ally})));t.ally=e;var n=o().cloneDeep(p.find((function(e){return e.properties.unitWeaponNo===t.target})));t.target=n;var r=j(e,n,y);t.scoreValue=parseFloat(t.score).toFixed(3),d.push(r),y++,m.push(t)})),t=o().merge(t,{center:n,bbox:r,area:i})})),f.btcs.forEach((function(t){var e=0;t.allys=t.allys.map((function(t){return o().cloneDeep(p.find((function(e){return e.properties.unitWeaponNo===t})))})),t.targets=t.targets.map((function(t){return o().cloneDeep(p.find((function(e){return e.properties.unitWeaponNo===t})))})),t.scoreValue=parseFloat(t.score).toFixed(3),t.allys.forEach((function(t){e=t.properties.weapon.readyTime>e?t.properties.weapon.readyTime:e})),t.duration=e,t.durationValue=e.toHumanizeApproximate(),t.scoreValue=parseFloat(t.score).toFixed(3),t.areaValue=(i/1e3/1e3).toFixed(3),(t=o().merge(t,{center:n,bbox:r,area:i})).allys.forEach((function(t){var e=s.TuJ([t.geometry.coordinates,n.geometry.coordinates]),r=s.kE(e,h.Rm);e.properties.distance_type="direct",e.properties.distance=r,e.properties.speed=t.properties.weapon.speed,e.properties.max_speed=t.properties.weapon.maxSpeed,e.properties.distance_string=r.toFixed(2)+" km",t.lineString=e,t.distance=r,t.duration=t.properties.weapon.readyTime,t.durationValue=t.duration.toHumanizeApproximate()}))})),e.text="예상 경로 계산 중입니다",l.Z.all(d).then(l.Z.spread((function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){var e=t.data,n=JSON.parse(t.config.data),r=e.routes[0].geometry,i=c().decode(r,5).map((function(t){return t.reverse()})),o=s.TuJ(i);o.geometry.coordinates.push(n.target.geometry.coordinates),o.geometry.coordinates.unshift(n.ally.geometry.coordinates);var a=s.kE(o,h.Rm);o.properties.distance_type="routing",o.properties.distance=a,o.properties.speed=n.ally.properties.weapon.speed,o.properties.max_speed=n.ally.properties.weapon.maxSpeed,o.properties.distance_string=a.toFixed(2)+" km";var l=m[n.index];l.lineString=o,l.distance=a;var u=1e3*a/l.ally.properties.weapon.maxSpeed+l.ally.properties.weapon.readyTime;l.duration=u,l.durationValue=u.toHumanizeApproximate()}));var i=[];f.p2p.forEach((function(t,e){var n=t.matches.reduce((function(t,e){return t.duration<e.duration?t:e})),r=s.f3b(t.bbox,1,h.Rm),o=n.lineString,a=s.HLN(o,r);t.assemblePoint=a.features[0],t.matches.forEach((function(n,r){i.push(z(n.ally,t.assemblePoint,e,r))}))})),e.text="최적 공격 경로 계산 중입니다",l.Z.all(i).then(l.Z.spread((function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){var e=t.data,n=JSON.parse(t.config.data),r=f.p2p[n.peerIndex].matches[n.index],i=e.routes[0].geometry,o=c().decode(i,5).map((function(t){return t.reverse()})),a=s.TuJ(o);a.geometry.coordinates.unshift(n.ally.geometry.coordinates),r.assembleLine=a;var l=s.kE(a,h.Rm);a.properties.assemble_distance_type="routing",a.properties.assemble_distance=l,a.properties.speed=n.ally.properties.weapon.speed,a.properties.max_speed=n.ally.properties.weapon.maxSpeed,a.properties.assemble_distance_string=l.toFixed(2)+" km",r.assembleDistance=l;var u=1e3*l/r.ally.properties.weapon.maxSpeed+r.ally.properties.weapon.readyTime;r.assembleDuration=u,r.assembleDurationValue=u.toHumanizeApproximate()})),O=f;var i=S()(f);$(i).appendTo(D);var o=A()(f);$(o).appendTo(R),e.stop()}))).catch((function(t){M.log(t),e.stop()}))}))).catch((function(t){M.log(t)}))}})}),"분석 진행","취 소")}}function j(t,e,n){var r=p.vD.INFANTRY.isNot(t.properties.weapon.type)?"driving":"walking",i=t.geometry.coordinates.join(","),o=e.geometry.coordinates.join(",");return(0,l.Z)({method:"GET",url:"https://api.mapbox.com/directions/v5/mapbox/".concat(r,"/").concat(i,";").concat(o),timeout:1e4,headers:{"content-type":"application/json"},params:{geometries:"polyline",steps:"true",overview:"full",language:"ko",access_token:MAPBOX_TOKEN},data:{ally:t,target:e,index:n}})}function z(t,e,n,r){var i=p.vD.INFANTRY.isNot(t.properties.weapon.type)?"driving":"walking",o=t.geometry.coordinates.join(","),s=e.geometry.coordinates.join(",");return(0,l.Z)({method:"GET",url:"https://api.mapbox.com/directions/v5/mapbox/".concat(i,"/").concat(o,";").concat(s),timeout:6e4,headers:{"content-type":"application/json"},params:{geometries:"polyline",steps:"true",overview:"full",language:"ko",access_token:MAPBOX_TOKEN},data:{ally:t,point:e,peerIndex:n,index:r}})}Router.watch(document).onclick().route("moveToAllyDirect",(function(t,e,n){C.panTo(n.ally.geometry.coordinates),(0,w.q6)(C,n.ally),(0,w.E6)(C,n.lineString)})).route("moveToTargetDirect",(function(t,e,n){C.panTo(n.target.geometry.coordinates),(0,w.q6)(C,n.ally),(0,w.E6)(C,n.lineString)})).route("moveToAllyIndirect",(function(t,e,n){C.panTo(n.geometry.coordinates),(0,w.q6)(C,n),(0,w.Vs)(C,n.lineString)})).route("moveToTargetIndirect",(function(t,e,n){C.panTo(n.geometry.coordinates)})).route("checkDirectRoute",(function(t,e,n){var r=O.p2p[parseInt(n)];(0,w.$P)(C),(0,w.kS)(C),(0,x.XX)(C),(0,m.R0)(C),(0,b.eQ)(C),(0,_.G2)(C),(0,v.Wk)(C);var i=r.matches.map((function(t){return t.lineString}));(0,v.uH)(C,i)})).route("attackDirect",(function(t,e,n){var r=O.p2p[parseInt(n)];Confirm(420,140,"공격","공격 명령을 내리시겠습니까?.",(function(){(0,w.$P)(C),(0,w.kS)(C),(0,x.XX)(C),(0,v.Wk)(C),(0,b.eQ)(C),(0,_.G2)(C),(0,m.R0)(C),(0,y.kN)(C);var t=r.matches.map((function(t){return t.assembleLine})),e=r.matches.map((function(t){return t.ally}));(0,_.RG)(C,t),(0,x.T5)(C,e),(0,b.hx)(C,r.assemblePoint),(0,f.NE)();var n=r.matches.map((function(t){return{unitWeaponNo:t.ally.properties.unitWeaponNo,unitNo:t.ally.properties.unitNo}})),i={type:p.hK.DIRECT.code,participators:n,actionDetail:JSON.stringify(r),enemyCount:r.matches.length,actionUuid:ACCOUNT.chatUuid,lng:r.center.geometry.coordinates[0],lat:r.center.geometry.coordinates[1]},o=u.Z.show({text:"Loading",opacity:.5,seconds:5,mask:"#000",color:"#fff",zIndex:100});$.ajax({url:"".concat(ctx.path,"/action/create"),type:"post",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(i),complete:function(t,e){o.stop()},success:function(t,e,n){(0,E.zn)('<span class="font-digital7 h5 text-strong"><i class="fa-regular fa-swords m0 mr5 h7"></i>'.concat(t.actionNo,"</span> 이동 및 공격 명력을 전송했습니다."),{type:p.hK.DIRECT.code,actionNo:t.actionNo}),t.participators.forEach((function(e){(0,E.WD)({type:p.hK.DIRECT.code,actionNo:t.actionNo,unitWeaponNo:e.unitWeaponNo,participator:e})}))}})}),"공격","취 소")})).route("checkIndirectRoute",(function(t,e,n){var r=O.btcs[parseInt(n)];(0,w.$P)(C),(0,w.kS)(C),(0,x.XX)(C),(0,m.R0)(C),(0,_.G2)(C),(0,b.eQ)(C),(0,v.Wk)(C);var i=r.allys.map((function(t){var e=t.lineString,n=s.HLN(e,r.bbox),i=s.Exj(s.xmu(e.geometry.coordinates[0]),n.features.pop(),e);return i.properties=e.properties,i.geometry.coordinates.length<2&&(i=t.lineString),i}));(0,v.lr)(C,i)})).route("attackIndirect",(function(t,e,n){Confirm(420,140,"포격","포격 명령을 내리시겠습니까?.",(function(){var t=O.btcs[parseInt(n)];(0,w.$P)(C),(0,w.kS)(C),(0,x.XX)(C),(0,v.Wk)(C),(0,_.G2)(C),(0,b.eQ)(C),(0,m.R0)(C),(0,y.kN)(C),(0,y.YN)(C,t.bbox);var e=[];t.allys.forEach((function(n){e.push({source:n.geometry.coordinates,target:t.center.geometry.coordinates})})),(0,m.CC)(C,e);var r=t.allys.map((function(e){var n=e.lineString,r=s.HLN(n,t.bbox),i=s.Exj(s.xmu(n.geometry.coordinates[0]),r.features.pop(),n);return i.properties=n.properties,i.geometry.coordinates.length<2&&(i=e.lineString),e.artilleryLine=i,i}));(0,_.Fp)(C,r),(0,x.T5)(C,t.allys),(0,f.NE)();var i=t.allys.map((function(t){return{unitWeaponNo:t.properties.unitWeaponNo,unitNo:t.properties.unitNo}})),o={type:p.hK.INDIRECT.code,participators:i,actionDetail:JSON.stringify(t),enemyCount:t.targets.length,actionUuid:ACCOUNT.chatUuid,lng:t.center.geometry.coordinates[0],lat:t.center.geometry.coordinates[1]},a=u.Z.show({text:"Loading",opacity:.5,seconds:5,mask:"#000",color:"#fff",zIndex:100});$.ajax({url:"".concat(ctx.path,"/action/create"),type:"post",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(o),complete:function(t,e){a.stop()},success:function(t,e,n){(0,E.zn)('<span class="font-digital7 h5 text-strong"><i class="fa-regular fa-swords m0 mr5 h7"></i>'.concat(t.actionNo,"</span> 포격 명력을 전송했습니다"),{type:p.hK.INDIRECT.code,actionNo:t.actionNo}),t.participators.forEach((function(e){(0,E.WD)({type:p.hK.INDIRECT.code,actionNo:t.actionNo,unitWeaponNo:e.unitWeaponNo,participator:e})}))}})}),"포격","취 소")})),r()}catch(B){r(B)}}))},74301:function(t,e,n){"use strict";n.d(e,{MP:function(){return Np},R0:function(){return zp},CC:function(){return jp}});var r=n(49142);function i(t,e,n){return(e=(0,r.Z)(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}let o=1,s=1;class a{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(t){const{delay:e=0,duration:n=Number.POSITIVE_INFINITY,rate:r=1,repeat:i=1}=t,s=o++,a={time:0,delay:e,duration:n,rate:r,repeat:i};return this._setChannelTime(a,this.time),this.channels.set(s,a),s}removeChannel(t){this.channels.delete(t);for(const[e,n]of this.animations)n.channel===t&&this.detachAnimation(e)}isFinished(t){const e=this.channels.get(t);return void 0!==e&&this.time>=e.delay+e.duration*e.repeat}getTime(t){if(void 0===t)return this.time;const e=this.channels.get(t);return void 0===e?-1:e.time}setTime(t){this.time=Math.max(0,t);const e=this.channels.values();for(const t of e)this._setChannelTime(t,this.time);const n=this.animations.values();for(const t of n){const{animation:e,channel:n}=t;e.setTime(this.getTime(n))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(t,e){const n=s++;return this.animations.set(n,{animation:t,channel:e}),t.setTime(this.getTime(e)),n}detachAnimation(t){this.animations.delete(t)}update(t){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}_setChannelTime(t,e){const n=e-t.delay;n>=t.duration*t.repeat?t.time=t.duration*t.rate:(t.time=Math.max(0,n)%t.duration,t.time*=t.rate)}}const c="Awaiting state",l="Matched. State transferred from previous layer",u="Initialized",h="Discarded. Awaiting garbage collection",p="No longer matched. Awaiting garbage collection",f="Finalized! Awaiting garbage collection",d=Symbol.for("component"),g=Symbol.for("propTypes"),m=Symbol.for("deprecatedProps"),y=Symbol.for("asyncPropDefaults"),_=Symbol.for("asyncPropOriginal"),v=Symbol.for("asyncPropResolved");var x=n(34155);function b(t){if("undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type)return!0;if(void 0!==x&&"object"==typeof x.versions&&Boolean(x.versions.electron))return!0;const e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}var w=n(34155);function E(){return!("object"==typeof w&&"[object process]"===String(w)&&!w.browser)||b()}const T="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source";E();class S{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";i(this,"storage",void 0),i(this,"id",void 0),i(this,"config",void 0),this.storage=function(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch(t){return null}}(n),this.id=t,this.config=e,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){if(Object.assign(this.config,t),this.storage){const t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}}_loadConfiguration(){let t={};if(this.storage){const e=this.storage.getItem(this.id);t=e?JSON.parse(e):{}}return Object.assign(this.config,t),this}}function k(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const o=t.width*n,s=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(s/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(s,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(s,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let A;function M(t){return"string"==typeof t?A[t.toUpperCase()]||A.WHITE:t}function I(t,e){if(!t)throw new Error(e||"Assertion failed")}!function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"}(A||(A={}));var C=n(34155);n(25108);const O={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==n.g&&n.g,document:"undefined"!=typeof document&&document,process:"object"==typeof C&&C},P=O.window||O.self||O.global,L=O.process||{};function D(){let t;var e,n;if(E&&"performance"in P)t=null==P||null===(e=P.performance)||void 0===e||null===(n=e.now)||void 0===n?void 0:n.call(e);else if("hrtime"in L){var r;const e=null==L||null===(r=L.hrtime)||void 0===r?void 0:r.call(L);t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}var R=n(25108);const N={debug:E&&R.debug||R.log,log:R.log,info:R.info,warn:R.warn,error:R.error},j={enabled:!0,level:0};function z(){}const B={},F={once:!0};class U{constructor(){let{id:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};i(this,"id",void 0),i(this,"VERSION",T),i(this,"_startTs",D()),i(this,"_deltaTs",D()),i(this,"_storage",void 0),i(this,"userData",{}),i(this,"LOG_THROTTLE_TIMEOUT",0),this.id=t,this.userData={},this._storage=new S("__probe-".concat(this.id,"__"),j),this.timeStamp("".concat(this.id," started")),function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n);for(const n of r)"function"==typeof t[n]&&(e.find((t=>n===t))||(t[n]=t[n].bind(t)))}(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((D()-this._startTs).toPrecision(10))}getDelta(){return Number((D()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.setConfiguration({enabled:t}),this}setLevel(t){return this._storage.setConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,e){this._storage.setConfiguration({[t]:e})}settings(){R.table?R.table(this._storage.config):R.log(this._storage.config)}assert(t,e){I(t,e)}warn(t){return this._getLogFunction(0,t,N.warn,arguments,F)}error(t){return this._getLogFunction(0,t,N.error,arguments)}deprecated(t,e){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(e,"` instead"))}removed(t,e){return this.error("`".concat(t,"` has been removed. Use `").concat(e,"` instead"))}probe(t,e){return this._getLogFunction(t,e,N.log,arguments,{time:!0,once:!0})}log(t,e){return this._getLogFunction(t,e,N.debug,arguments)}info(t,e){return this._getLogFunction(t,e,R.info,arguments)}once(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction(t,e,N.debug||N.info,arguments,F)}table(t,e,n){return e?this._getLogFunction(t,e,R.table||z,n&&[n],{tag:W(e)}):z}image(t){let{logLevel:e,priority:n,image:r,message:i="",scale:o=1}=t;return this._shouldLog(e||n)?E?function(t){let{image:e,message:n="",scale:r=1}=t;if("string"==typeof e){const t=new Image;return t.onload=()=>{const e=k(t,n,r);R.log(...e)},t.src=e,z}const i=e.nodeName||"";if("img"===i.toLowerCase())return R.log(...k(e,n,r)),z;if("canvas"===i.toLowerCase()){const t=new Image;return t.onload=()=>R.log(...k(t,n,r)),t.src=e.toDataURL(),z}return z}({image:r,message:i,scale:o}):function(t){let{image:e,message:n="",scale:r=1}=t;return R.warn("removed"),z}({image:r,message:i,scale:o}):z}time(t,e){return this._getLogFunction(t,e,R.time?R.time:R.info)}timeEnd(t,e){return this._getLogFunction(t,e,R.timeEnd?R.timeEnd:R.info)}timeStamp(t,e){return this._getLogFunction(t,e,R.timeStamp||z)}group(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const r=q({logLevel:t,message:e,opts:n}),{collapsed:i}=n;return r.method=(i?R.groupCollapsed:R.group)||R.info,this._getLogFunction(r)}groupCollapsed(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(t,e,Object.assign({},n,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",R.groupEnd||z)}withGroup(t,e,n){this.group(t,e)();try{n()}finally{this.groupEnd(t)()}}trace(){R.trace&&R.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=V(t)}_getLogFunction(t,e,n,r,i){if(this._shouldLog(t)){i=q({logLevel:t,message:e,args:r,opts:i}),I(n=n||i.method),i.total=this.getTotal(),i.delta=this.getDelta(),this._deltaTs=D();const o=i.tag||i.message;if(i.once){if(B[o])return z;B[o]=D()}return e=function(t,e,n){if("string"==typeof e){const s=n.time?function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}(function(t){let e;return e=t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s"),e}(n.total)):"";e=n.time?"".concat(t,": ").concat(s,"  ").concat(e):"".concat(t,": ").concat(e),r=e,i=n.color,o=n.background,E||"string"!=typeof r||(i&&(i=M(i),r="[".concat(i,"m").concat(r,"[39m")),o&&(i=M(o),r="[".concat(o+10,"m").concat(r,"[49m"))),e=r}var r,i,o;return e}(this.id,i.message,i),n.bind(R,e,...i.args)}return z}}function V(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return I(Number.isFinite(e)&&e>=0),e}function q(t){const{logLevel:e,message:n}=t;t.logLevel=V(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":void 0!==n&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e)}"function"==typeof t.message&&(t.message=t.message());const i=typeof t.message;return I("string"===i||"object"===i),Object.assign(t,{args:r},t.opts)}function W(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}i(U,"VERSION",T);var G=new U({id:"deck"});let $={};function H(t){$=t}function Z(t,e,n,r){G.level>0&&$[t]&&$[t].call(null,e,n,r)}function Y(t,e=(()=>!0)){return Array.isArray(t)?X(t,e,[]):e(t)?[t]:[]}function X(t,e,n){let r=-1;for(;++r<t.length;){const i=t[r];Array.isArray(i)?X(i,e,n):e(i)&&n.push(i)}return n}function K({target:t,source:e,start:n=0,count:r=1}){const i=e.length,o=r*i;let s=0;for(let r=n;s<i;s++)t[r++]=e[s];for(;s<o;)s<o-s?(t.copyWithin(n+s,n,n+s),s*=2):(t.copyWithin(n+s,n,n+o-s),s=o);return t}var J=n(34155);function Q(){let t;if("undefined"!=typeof window&&window.performance)t=window.performance.now();else if(void 0!==J&&J.hrtime){const e=J.hrtime();t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}class tt{constructor(t,e){i(this,"name",void 0),i(this,"type",void 0),i(this,"sampleSize",1),i(this,"time",void 0),i(this,"count",void 0),i(this,"samples",void 0),i(this,"lastTiming",void 0),i(this,"lastSampleTime",void 0),i(this,"lastSampleCount",void 0),i(this,"_count",0),i(this,"_time",0),i(this,"_samples",0),i(this,"_startTime",0),i(this,"_timerPending",!1),this.name=t,this.type=e,this.reset()}setSampleSize(t){return this.sampleSize=t,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(t){return this._count+=t,this._samples++,this._checkSampling(),this}subtractCount(t){return this._count-=t,this._samples++,this._checkSampling(),this}addTime(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=Q(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(Q()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class et{constructor(t){i(this,"id",void 0),i(this,"stats",{}),this.id=t.id,this.stats={},this._initializeStats(t.stats),Object.seal(this)}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:t,type:e})}get size(){return Object.keys(this.stats).length}reset(){for(const t in this.stats)this.stats[t].reset();return this}forEach(t){for(const e in this.stats)t(this.stats[e])}getTable(){const t={};return this.forEach((e=>{t[e.name]={time:e.time||0,count:e.count||0,average:e.getAverageTime()||0,hz:e.getHz()||0}})),t}_initializeStats(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((t=>this._getOrCreate(t)))}_getOrCreate(t){if(!t||!t.name)return null;const{name:e,type:n}=t;return this.stats[e]||(this.stats[e]=t instanceof tt?t:new tt(e,n)),this.stats[e]}}const nt=t=>"boolean"==typeof t,rt=t=>"function"==typeof t,it=t=>null!==t&&"object"==typeof t,ot=t=>it(t)&&t.constructor==={}.constructor,st=t=>t&&"function"==typeof t[Symbol.iterator],at=t=>t&&"function"==typeof t[Symbol.asyncIterator],ct=t=>"undefined"!=typeof Response&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,lt=t=>"undefined"!=typeof Blob&&t instanceof Blob,ut=t=>t&&"object"==typeof t&&t.isBuffer,ht=t=>(t=>"undefined"!=typeof ReadableStream&&t instanceof ReadableStream||it(t)&&rt(t.tee)&&rt(t.cancel)&&rt(t.getReader))(t)||(t=>it(t)&&rt(t.read)&&rt(t.pipe)&&nt(t.readable))(t);function pt(t,e){if(!t)throw new Error(e||"loader assertion failed.")}function ft(t){var e;if(!t)return!1;Array.isArray(t)&&(t=t[0]);return Array.isArray(null===(e=t)||void 0===e?void 0:e.extensions)}function dt(t){var e,n;let r;return pt(t,"null loader"),pt(ft(t),"invalid loader"),Array.isArray(t)&&(r=t[1],t=t[0],t={...t,options:{...t.options,...r}}),(null!==(e=t)&&void 0!==e&&e.parseTextSync||null!==(n=t)&&void 0!==n&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}let gt="";const mt={};const yt=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,_t=/^([-\w.]+\/[-\w.+]+)/;function vt(t){const e=yt.exec(t);return e?e[1]:""}const xt=/\?.*/;function bt(t){return t.replace(xt,"")}function wt(t){if(ct(t)){return t.url}if(lt(t)){return t.name||""}return"string"==typeof t?t:""}function Et(t){if(ct(t)){const e=t,n=e.headers.get("content-type")||"",r=bt(e.url);return function(t){const e=_t.exec(t);return e?e[1]:t}(n)||vt(r)}if(lt(t)){return t.type||""}return"string"==typeof t?vt(t):""}async function Tt(t){if(ct(t))return t;const e={},n=function(t){if(ct(t))return t.headers["content-length"]||-1;if(lt(t))return t.size;return"string"==typeof t?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}(t);n>=0&&(e["content-length"]=String(n));const r=wt(t),i=Et(t);i&&(e["content-type"]=i);const o=await async function(t){const e=5;if("string"==typeof t)return"data:,".concat(t.slice(0,e));if(t instanceof Blob){const e=t.slice(0,5);return await new Promise((t=>{const n=new FileReader;n.onload=e=>{var n;return t(null==e||null===(n=e.target)||void 0===n?void 0:n.result)},n.readAsDataURL(e)}))}if(t instanceof ArrayBuffer){const n=function(t){let e="";const n=new Uint8Array(t);for(let t=0;t<n.byteLength;t++)e+=String.fromCharCode(n[t]);return btoa(e)}(t.slice(0,e));return"data:base64,".concat(n)}return null}(t);o&&(e["x-first-bytes"]=o),"string"==typeof t&&(t=(new TextEncoder).encode(t));const s=new Response(t,{headers:e});return Object.defineProperty(s,"url",{value:r}),s}async function St(t,e){if("string"==typeof t){t=function(t){for(const e in mt)if(t.startsWith(e)){const n=mt[e];t=t.replace(e,n)}return t.startsWith("http://")||t.startsWith("https://")||(t="".concat(gt).concat(t)),t}(t);let n=e;return null!=e&&e.fetch&&"function"!=typeof(null==e?void 0:e.fetch)&&(n=e.fetch),await fetch(t,n)}return await Tt(t)}var kt=n(34155);var At=n(34155);function Mt(){return!("object"==typeof At&&"[object process]"===String(At)&&!At.browser)||function(t){if("undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type)return!0;if(void 0!==kt&&"object"==typeof kt.versions&&Boolean(kt.versions.electron))return!0;const e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}()}const It="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source";Mt();class Ct{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";this.storage=void 0,this.id=void 0,this.config=void 0,this.storage=function(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch(t){return null}}(n),this.id=t,this.config=e,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){if(Object.assign(this.config,t),this.storage){const t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}}_loadConfiguration(){let t={};if(this.storage){const e=this.storage.getItem(this.id);t=e?JSON.parse(e):{}}return Object.assign(this.config,t),this}}function Ot(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const o=t.width*n,s=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(s/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(s,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(s,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let Pt;!function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"}(Pt||(Pt={}));const Lt=10;function Dt(t){return"string"!=typeof t?t:(t=t.toUpperCase(),Pt[t]||Pt.WHITE)}function Rt(t,e){if(!t)throw new Error(e||"Assertion failed")}globalThis.self||globalThis.window||globalThis.global;const Nt=globalThis.window||globalThis.self||globalThis.global,jt=(globalThis.document,globalThis.process||{});globalThis.console,globalThis.navigator;function zt(){let t;var e,n;if(Mt()&&Nt.performance)t=null==Nt||null===(e=Nt.performance)||void 0===e||null===(n=e.now)||void 0===n?void 0:n.call(e);else if("hrtime"in jt){var r;const e=null==jt||null===(r=jt.hrtime)||void 0===r?void 0:r.call(jt);t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}var Bt=n(25108);const Ft={debug:Mt()&&Bt.debug||Bt.log,log:Bt.log,info:Bt.info,warn:Bt.warn,error:Bt.error},Ut={enabled:!0,level:0};function Vt(){}const qt={},Wt={once:!0};class Gt{constructor(){let{id:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};this.id=void 0,this.VERSION=It,this._startTs=zt(),this._deltaTs=zt(),this._storage=void 0,this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=t,this.userData={},this._storage=new Ct("__probe-".concat(this.id,"__"),Ut),this.timeStamp("".concat(this.id," started")),function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n),i=t;for(const n of r){const r=i[n];"function"==typeof r&&(e.find((t=>n===t))||(i[n]=r.bind(t)))}}(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((zt()-this._startTs).toPrecision(10))}getDelta(){return Number((zt()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.setConfiguration({enabled:t}),this}setLevel(t){return this._storage.setConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,e){this._storage.setConfiguration({[t]:e})}settings(){Bt.table?Bt.table(this._storage.config):Bt.log(this._storage.config)}assert(t,e){Rt(t,e)}warn(t){return this._getLogFunction(0,t,Ft.warn,arguments,Wt)}error(t){return this._getLogFunction(0,t,Ft.error,arguments)}deprecated(t,e){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(e,"` instead"))}removed(t,e){return this.error("`".concat(t,"` has been removed. Use `").concat(e,"` instead"))}probe(t,e){return this._getLogFunction(t,e,Ft.log,arguments,{time:!0,once:!0})}log(t,e){return this._getLogFunction(t,e,Ft.debug,arguments)}info(t,e){return this._getLogFunction(t,e,Bt.info,arguments)}once(t,e){return this._getLogFunction(t,e,Ft.debug||Ft.info,arguments,Wt)}table(t,e,n){return e?this._getLogFunction(t,e,Bt.table||Vt,n&&[n],{tag:Zt(e)}):Vt}image(t){let{logLevel:e,priority:n,image:r,message:i="",scale:o=1}=t;return this._shouldLog(e||n)?Mt()?function(t){let{image:e,message:n="",scale:r=1}=t;if("string"==typeof e){const t=new Image;return t.onload=()=>{const e=Ot(t,n,r);Bt.log(...e)},t.src=e,Vt}const i=e.nodeName||"";if("img"===i.toLowerCase())return Bt.log(...Ot(e,n,r)),Vt;if("canvas"===i.toLowerCase()){const t=new Image;return t.onload=()=>Bt.log(...Ot(t,n,r)),t.src=e.toDataURL(),Vt}return Vt}({image:r,message:i,scale:o}):function(t){let{image:e,message:n="",scale:r=1}=t;return Bt.warn("removed"),Vt}({image:r,message:i,scale:o}):Vt}time(t,e){return this._getLogFunction(t,e,Bt.time?Bt.time:Bt.info)}timeEnd(t,e){return this._getLogFunction(t,e,Bt.timeEnd?Bt.timeEnd:Bt.info)}timeStamp(t,e){return this._getLogFunction(t,e,Bt.timeStamp||Vt)}group(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const r=Ht({logLevel:t,message:e,opts:n}),{collapsed:i}=n;return r.method=(i?Bt.groupCollapsed:Bt.group)||Bt.info,this._getLogFunction(r)}groupCollapsed(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(t,e,Object.assign({},n,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",Bt.groupEnd||Vt)}withGroup(t,e,n){this.group(t,e)();try{n()}finally{this.groupEnd(t)()}}trace(){Bt.trace&&Bt.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=$t(t)}_getLogFunction(t,e,n,r,i){if(this._shouldLog(t)){i=Ht({logLevel:t,message:e,args:r,opts:i}),Rt(n=n||i.method),i.total=this.getTotal(),i.delta=this.getDelta(),this._deltaTs=zt();const o=i.tag||i.message;if(i.once&&o){if(qt[o])return Vt;qt[o]=zt()}return e=function(t,e,n){if("string"==typeof e){const r=n.time?function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}(function(t){let e;return e=t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s"),e}(n.total)):"";e=function(t,e,n){if(!Mt&&"string"==typeof t){if(e){const n=Dt(e);t="[".concat(n,"m").concat(t,"[39m")}if(n){const e=Dt(n);t="[".concat(e+Lt,"m").concat(t,"[49m")}}return t}(e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),n.color,n.background)}return e}(this.id,i.message,i),n.bind(Bt,e,...i.args)}return Vt}}function $t(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return Rt(Number.isFinite(e)&&e>=0),e}function Ht(t){const{logLevel:e,message:n}=t;t.logLevel=$t(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":void 0!==n&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e)}"function"==typeof t.message&&(t.message=t.message());const i=typeof t.message;return Rt("string"===i||"object"===i),Object.assign(t,{args:r},t.opts)}function Zt(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}Gt.VERSION=It;var Yt=n(25108);const Xt=new Gt({id:"loaders.gl"});class Kt{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}var Jt=n(34155);"undefined"!=typeof self&&self,"undefined"!=typeof window&&window,void 0!==n.g&&n.g,"undefined"!=typeof document&&document;const Qt=Boolean("object"!=typeof Jt||"[object process]"!==String(Jt)||Jt.browser),te=void 0!==Jt&&Jt.version&&/v([0-9]*)/.exec(Jt.version),ee=(te&&parseFloat(te[1]),{fetch:null,mimeType:void 0,nothrow:!1,log:new class{constructor(){i(this,"console",void 0),this.console=Yt}log(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.console.log.bind(this.console,...e)}info(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.console.info.bind(this.console,...e)}warn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.console.warn.bind(this.console,...e)}error(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.console.error.bind(this.console,...e)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:Qt,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]}),ne={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function re(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const ie=()=>{const t=re();return t.globalOptions=t.globalOptions||{...ee},t.globalOptions};function oe(t,e,n,r){return n=n||[],function(t,e){se(t,null,ee,ne,e);for(const n of e){const r=t&&t[n.id]||{},i=n.options&&n.options[n.id]||{},o=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};se(r,n.id,i,o,e)}}(t,n=Array.isArray(n)?n:[n]),ce(e,t,r)}function se(t,e,n,r,i){const o=e||"Top level",s=e?"".concat(e,"."):"";for(const a in t){const c=!e&&it(t[a]);if(!(a in n)&&!("baseUri"===a&&!e)&&!("workerUrl"===a&&e))if(a in r)Xt.warn("".concat(o," loader option '").concat(s).concat(a,"' no longer supported, use '").concat(r[a],"'"))();else if(!c){const t=ae(a,i);Xt.warn("".concat(o," loader option '").concat(s).concat(a,"' not recognized. ").concat(t))()}}}function ae(t,e){const n=t.toLowerCase();let r="";for(const i of e)for(const e in i.options){if(t===e)return"Did you mean '".concat(i.id,".").concat(e,"'?");const o=e.toLowerCase();(n.startsWith(o)||o.startsWith(n))&&(r=r||"Did you mean '".concat(i.id,".").concat(e,"'?"))}return r}function ce(t,e,n){const r={...t.options||{}};return function(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}(r,n),null===r.log&&(r.log=new Kt),le(r,ie()),le(r,e),r}function le(t,e){for(const n in e)if(n in e){const r=e[n];ot(r)&&ot(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function ue(t,e){const n=ie(),r=t||n;return"function"==typeof r.fetch?r.fetch:it(r.fetch)?t=>St(t,r):null!=e&&e.fetch?null==e?void 0:e.fetch:St}function he(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const pe="3.4.14";var fe=n(34155);"undefined"!=typeof self&&self,"undefined"!=typeof window&&window,void 0!==n.g&&n.g,"undefined"!=typeof document&&document;const de="object"!=typeof fe||"[object process]"!==String(fe)||fe.browser,ge="undefined"!=typeof window&&void 0!==window.orientation,me=void 0!==fe&&fe.version&&/v([0-9]*)/.exec(fe.version);me&&parseFloat(me[1]);class ye{terminate(){}}const _e=new Map;function ve(t){he(t.source&&!t.url||!t.source&&t.url);let e=_e.get(t.source||t.url);return e||(t.url&&(e=function(t){if(!t.startsWith("http"))return t;return xe((e=t,"try {\n  importScripts('".concat(e,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")));var e}(t.url),_e.set(t.url,e)),t.source&&(e=xe(t.source),_e.set(t.source,e))),he(e),e}function xe(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function be(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;const r=n||new Set;if(t){if(we(t))r.add(t);else if(we(t.buffer))r.add(t.buffer);else if(ArrayBuffer.isView(t));else if(e&&"object"==typeof t)for(const n in t)be(t[n],e,r)}else;return void 0===n?Array.from(r):[]}function we(t){return!!t&&(t instanceof ArrayBuffer||("undefined"!=typeof MessagePort&&t instanceof MessagePort||("undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas)))}var Ee=n(25108);const Te=()=>{};class Se{static isSupported(){return"undefined"!=typeof Worker&&de||void 0!==ye&&!de}constructor(t){i(this,"name",void 0),i(this,"source",void 0),i(this,"url",void 0),i(this,"terminated",!1),i(this,"worker",void 0),i(this,"onMessage",void 0),i(this,"onError",void 0),i(this,"_loadableURL","");const{name:e,source:n,url:r}=t;he(n||r),this.name=e,this.source=n,this.url=r,this.onMessage=Te,this.onError=t=>Ee.log(t),this.worker=de?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=Te,this.onError=Te,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(t,e){e=e||be(t),this.worker.postMessage(t,e)}_getErrorFromErrorEvent(t){let e="Failed to load ";return e+="worker ".concat(this.name," from ").concat(this.url,". "),t.message&&(e+="".concat(t.message," in ")),t.lineno&&(e+=":".concat(t.lineno,":").concat(t.colno)),new Error(e)}_createBrowserWorker(){this._loadableURL=ve({source:this.source,url:this.url});const t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=t=>{t.data?this.onMessage(t.data):this.onError(new Error("No data received"))},t.onerror=t=>{this.onError(this._getErrorFromErrorEvent(t)),this.terminated=!0},t.onmessageerror=t=>Ee.error(t),t}_createNodeWorker(){let t;if(this.url){const e=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);t=new ye(e,{eval:!1})}else{if(!this.source)throw new Error("no worker");t=new ye(this.source,{eval:!0})}return t.on("message",(t=>{this.onMessage(t)})),t.on("error",(t=>{this.onError(t)})),t.on("exit",(t=>{})),t}}class ke{constructor(t,e){i(this,"name",void 0),i(this,"workerThread",void 0),i(this,"isRunning",!0),i(this,"result",void 0),i(this,"_resolve",(()=>{})),i(this,"_reject",(()=>{})),this.name=t,this.workerThread=e,this.result=new Promise(((t,e)=>{this._resolve=t,this._reject=e}))}postMessage(t,e){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:e})}done(t){he(this.isRunning),this.isRunning=!1,this._resolve(t)}error(t){he(this.isRunning),this.isRunning=!1,this._reject(t)}}class Ae{static isSupported(){return Se.isSupported()}constructor(t){i(this,"name","unnamed"),i(this,"source",void 0),i(this,"url",void 0),i(this,"maxConcurrency",1),i(this,"maxMobileConcurrency",1),i(this,"onDebug",(()=>{})),i(this,"reuseWorkers",!0),i(this,"props",{}),i(this,"jobQueue",[]),i(this,"idleQueue",[]),i(this,"count",0),i(this,"isDestroyed",!1),this.source=t.source,this.url=t.url,this.setProps(t)}destroy(){this.idleQueue.forEach((t=>t.destroy())),this.isDestroyed=!0}setProps(t){this.props={...this.props,...t},void 0!==t.name&&(this.name=t.name),void 0!==t.maxConcurrency&&(this.maxConcurrency=t.maxConcurrency),void 0!==t.maxMobileConcurrency&&(this.maxMobileConcurrency=t.maxMobileConcurrency),void 0!==t.reuseWorkers&&(this.reuseWorkers=t.reuseWorkers),void 0!==t.onDebug&&(this.onDebug=t.onDebug)}async startJob(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t,e,n)=>t.done(n),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(t,e)=>t.error(e);const r=new Promise((r=>(this.jobQueue.push({name:t,onMessage:e,onError:n,onStart:r}),this)));return this._startQueuedJob(),await r}async _startQueuedJob(){if(!this.jobQueue.length)return;const t=this._getAvailableWorker();if(!t)return;const e=this.jobQueue.shift();if(e){this.onDebug({message:"Starting job",name:e.name,workerThread:t,backlog:this.jobQueue.length});const n=new ke(e.name,t);t.onMessage=t=>e.onMessage(n,t.type,t.payload),t.onError=t=>e.onError(n,t),e.onStart(n);try{await n.result}finally{this.returnWorkerToQueue(t)}}}returnWorkerToQueue(t){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const t="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new Se({name:t,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return ge?this.maxMobileConcurrency:this.maxConcurrency}}const Me={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class Ie{static isSupported(){return Se.isSupported()}static getWorkerFarm(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ie._workerFarm=Ie._workerFarm||new Ie({}),Ie._workerFarm.setProps(t),Ie._workerFarm}constructor(t){i(this,"props",void 0),i(this,"workerPools",new Map),this.props={...Me},this.setProps(t),this.workerPools=new Map}destroy(){for(const t of this.workerPools.values())t.destroy();this.workerPools=new Map}setProps(t){this.props={...this.props,...t};for(const t of this.workerPools.values())t.setProps(this._getWorkerPoolProps())}getWorkerPool(t){const{name:e,source:n,url:r}=t;let i=this.workerPools.get(e);return i||(i=new Ae({name:e,source:n,url:r}),i.setProps(this._getWorkerPoolProps()),this.workerPools.set(e,i)),i}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}i(Ie,"_workerFarm",void 0);const Ce="latest";var Oe=n(25108);async function Pe(t,e,n,r,i){const o=t.id,s=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e[t.id]||{},r="".concat(t.id,"-worker.js");let i=n.workerUrl;if(i||"compression"!==t.id||(i=e.workerUrl),"test"===e._workerType&&(i="modules/".concat(t.module,"/dist/").concat(r)),!i){let e=t.version;"latest"===e&&(e=Ce);const n=e?"@".concat(e):"";i="https://unpkg.com/@loaders.gl/".concat(t.module).concat(n,"/dist/").concat(r)}return he(i),i}(t,n),a=Ie.getWorkerFarm(n).getWorkerPool({name:o,url:s});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const c=await a.startJob("process-on-worker",Le.bind(null,i));c.postMessage("process",{input:e,options:n,context:r});const l=await c.result;return await l.result}async function Le(t,e,n,r){switch(n){case"done":e.done(r);break;case"error":e.error(new Error(r.error));break;case"process":const{id:i,input:o,options:s}=r;try{const n=await t(o,s);e.postMessage("done",{id:i,result:n})}catch(t){const n=t instanceof Error?t.message:"unknown error";e.postMessage("error",{id:i,error:n})}break;default:Oe.warn("parse-with-worker unknown message ".concat(n))}}async function De(t){const e=[];for await(const n of t)e.push(n);return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=e.map((t=>t instanceof ArrayBuffer?new Uint8Array(t):t)),i=r.reduce(((t,e)=>t+e.byteLength),0),o=new Uint8Array(i);let s=0;for(const t of r)o.set(t,s),s+=t.byteLength;return o.buffer}(...e)}const Re=262144;const Ne=262144;const je=1048576;function ze(t){if((e=t)&&"object"==typeof e&&e.isBuffer)return t;var e;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return 0===t.byteOffset&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if("string"==typeof t){const e=t;return(new TextEncoder).encode(e).buffer}if(t&&"object"==typeof t&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function Be(t,e){return Qt?async function*(t,e){const n=t.getReader();let r;try{for(;;){const t=r||n.read();null!=e&&e._streamReadAhead&&(r=n.read());const{done:i,value:o}=await t;if(i)return;yield ze(o)}}catch(t){n.releaseLock()}}(t,e):async function*(t,e){for await(const e of t)yield ze(e)}(t)}function Fe(t,e){if("string"==typeof t)return function*(t,e){const n=(null==e?void 0:e.chunkSize)||Re;let r=0;const i=new TextEncoder;for(;r<t.length;){const e=Math.min(t.length-r,n),o=t.slice(r,r+e);r+=e,yield i.encode(o)}}(t,e);if(t instanceof ArrayBuffer)return function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const{chunkSize:n=Ne}=e;let r=0;for(;r<t.byteLength;){const e=Math.min(t.byteLength-r,n),i=new ArrayBuffer(e),o=new Uint8Array(t,r,e);new Uint8Array(i).set(o),r+=e,yield i}}()}(t,e);if(lt(t))return async function*(t,e){const n=(null==e?void 0:e.chunkSize)||je;let r=0;for(;r<t.size;){const e=r+n,i=await t.slice(r,e).arrayBuffer();r=e,yield i}}(t,e);if(ht(t))return Be(t,e);if(ct(t)){return Be(t.body,e)}throw new Error("makeIterator")}const Ue="Cannot convert supplied data type";async function Ve(t,e,n){const r=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if("string"==typeof t||r)return function(t,e,n){if(e.text&&"string"==typeof t)return t;if(ut(t)&&(t=t.buffer),t instanceof ArrayBuffer){const n=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let n=t.buffer;const r=t.byteLength||t.length;return 0===t.byteOffset&&r===n.byteLength||(n=n.slice(t.byteOffset,t.byteOffset+r)),n}throw new Error(Ue)}(t,e);if(lt(t)&&(t=await Tt(t)),ct(t)){const n=t;return await async function(t){if(!t.ok){const e=await async function(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const n=t.headers.get("Content-Type");let r=t.statusText;n.includes("application/json")&&(r+=" ".concat(await t.text())),e+=r,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch(t){}return e}(t);throw new Error(e)}}(n),e.binary?await n.arrayBuffer():await n.text()}if(ht(t)&&(t=Fe(t,n)),st(t)||at(t))return De(t);throw new Error(Ue)}function qe(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function We(t,e,n){if(n)return n;const r={fetch:ue(e,t),...t};if(r.url){const t=bt(r.url);r.baseUrl=t,r.queryString=function(t){const e=t.match(xt);return e&&e[0]}(r.url),r.filename=qe(t),r.baseUrl=function(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}(t)}return Array.isArray(r.loaders)||(r.loaders=null),r}const Ge=new Gt({id:"loaders.gl"}),$e=()=>{const t=re();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};const He=/\.([^.]+)$/;function Ze(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!Ye(t))return null;if(e&&!Array.isArray(e))return dt(e);let i=[];e&&(i=i.concat(e)),null!=n&&n.ignoreRegisteredLoaders||i.push(...$e()),function(t){for(const e of t)dt(e)}(i);const o=function(t,e,n,r){const i=wt(t),o=Et(t),s=bt(i)||(null==r?void 0:r.url);let a=null,c="";null!=n&&n.mimeType&&(a=Ke(e,null==n?void 0:n.mimeType),c="match forced by supplied MIME type ".concat(null==n?void 0:n.mimeType));var l;a=a||function(t,e){const n=e&&He.exec(e),r=n&&n[1];return r?function(t,e){e=e.toLowerCase();for(const n of t)for(const t of n.extensions)if(t.toLowerCase()===e)return n;return null}(t,r):null}(e,s),c=c||(a?"matched url ".concat(s):""),a=a||Ke(e,o),c=c||(a?"matched MIME type ".concat(o):""),a=a||function(t,e){if(!e)return null;for(const n of t)if("string"==typeof e){if(Je(e,n))return n}else if(ArrayBuffer.isView(e)){if(Qe(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer){if(Qe(e,0,n))return n}return null}(e,t),c=c||(a?"matched initial data ".concat(tn(t)):""),a=a||Ke(e,null==n?void 0:n.fallbackMimeType),c=c||(a?"matched fallback MIME type ".concat(o):""),c&&Ge.log(1,"selectLoader selected ".concat(null===(l=a)||void 0===l?void 0:l.name,": ").concat(c,"."));return a}(t,i,n,r);if(!(o||null!=n&&n.nothrow))throw new Error(Xe(t));return o}function Ye(t){return!(t instanceof Response&&204===t.status)}function Xe(t){const e=wt(t),n=Et(t);let r="No valid loader found (";r+=e?"".concat(qe(e),", "):"no url provided, ",r+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const i=t?tn(t):"";return r+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",r+=")",r}function Ke(t,e){for(const n of t){if(n.mimeTypes&&n.mimeTypes.includes(e))return n;if(e==="application/x.".concat(n.id))return n}return null}function Je(t,e){if(e.testText)return e.testText(t);return(Array.isArray(e.tests)?e.tests:[e.tests]).some((e=>t.startsWith(e)))}function Qe(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some((r=>function(t,e,n,r){if(r instanceof ArrayBuffer)return function(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const r=new Uint8Array(t),i=new Uint8Array(e);for(let t=0;t<r.length;++t)if(r[t]!==i[t])return!1;return!0}(r,t,r.byteLength);switch(typeof r){case"function":return r(t,n);case"string":return r===en(t,e,r.length);default:return!1}}(t,e,n,r)))}function tn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"==typeof t)return t.slice(0,e);if(ArrayBuffer.isView(t))return en(t.buffer,t.byteOffset,e);if(t instanceof ArrayBuffer){return en(t,0,e)}return""}function en(t,e,n){if(t.byteLength<e+n)return"";const r=new DataView(t);let i="";for(let t=0;t<n;t++)i+=String.fromCharCode(r.getUint8(e+t));return i}async function nn(t,e,n,r){he(!r||"object"==typeof r),!e||Array.isArray(e)||ft(e)||(r=void 0,n=e,e=void 0),n=n||{};const i=wt(t=await t),o=function(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const t=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...t]:t}return n&&n.length?n:null}(e,r),s=await async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!Ye(t))return null;let i=Ze(t,e,{...n,nothrow:!0},r);if(i)return i;if(lt(t)&&(i=Ze(t=await t.slice(0,10).arrayBuffer(),e,n,r)),!(i||null!=n&&n.nothrow))throw new Error(Xe(t));return i}(t,o,n);return s?(r=We({url:i,parse:nn,loaders:o},n=oe(n,s,o,i),r||null),await async function(t,e,n,r){if(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pe;he(t,"no worker provided");const n=t.version}(t),ct(e)){const t=e,{ok:n,redirected:i,status:o,statusText:s,type:a,url:c}=t,l=Object.fromEntries(t.headers.entries());r.response={headers:l,ok:n,redirected:i,status:o,statusText:s,type:a,url:c}}if(e=await Ve(e,t,n),t.parseTextSync&&"string"==typeof e)return n.dataType="text",t.parseTextSync(e,n,r,t);if(function(t,e){return!!Ie.isSupported()&&!!(de||null!=e&&e._nodeWorkers)&&t.worker&&(null==e?void 0:e.worker)}(t,n))return await Pe(t,e,n,r,nn);if(t.parseText&&"string"==typeof e)return await t.parseText(e,n,r,t);if(t.parse)return await t.parse(e,n,r,t);throw he(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}(s,t,n,r)):null}async function rn(t,e,n,r){Array.isArray(e)||ft(e)||(void 0,n=e,e=void 0);const i=ue(n);let o=t;return"string"==typeof t&&(o=await i(t)),lt(t)&&(o=await i(t)),await nn(o,e,n)}class on{constructor(t,e,n){i(this,"id",void 0),i(this,"context",void 0),i(this,"isLoaded",void 0),i(this,"persistent",void 0),i(this,"_loadCount",0),i(this,"_subscribers",new Set),i(this,"_data",void 0),i(this,"_loader",void 0),i(this,"_error",void 0),i(this,"_content",void 0),this.id=t,this.context=n,this.setData(e)}subscribe(t){this._subscribers.add(t)}unsubscribe(t){this._subscribers.delete(t)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then((()=>this.getData()))}setData(t,e){if(t===this._data&&!e)return;this._data=t;const n=++this._loadCount;let r=t;"string"==typeof t&&(r=rn(t)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then((t=>{this._loadCount===n&&(this.isLoaded=!0,this._error=void 0,this._content=t)})).catch((t=>{this._loadCount===n&&(this.isLoaded=!0,this._error=t||!0)}))):(this.isLoaded=!0,this._error=void 0,this._content=t);for(const t of this._subscribers)t.onChange(this.getData())}}class sn{constructor({gl:t,protocol:e}){i(this,"protocol",void 0),i(this,"_context",void 0),i(this,"_resources",void 0),i(this,"_consumers",void 0),i(this,"_pruneRequest",void 0),this.protocol=e||"resource://",this._context={gl:t,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(t){return!!t.startsWith(this.protocol)||t in this._resources}add({resourceId:t,data:e,forceUpdate:n=!1,persistent:r=!0}){let i=this._resources[t];i?i.setData(e,n):(i=new on(t,e,this._context),this._resources[t]=i),i.persistent=r}remove(t){const e=this._resources[t];e&&(e.delete(),delete this._resources[t])}unsubscribe({consumerId:t}){const e=this._consumers[t];if(e){for(const t in e){const n=e[t],r=this._resources[n.resourceId];r&&r.unsubscribe(n)}delete this._consumers[t],this.prune()}}subscribe({resourceId:t,onChange:e,consumerId:n,requestId:r="default"}){const{_resources:i,protocol:o}=this;t.startsWith(o)&&(i[t=t.replace(o,"")]||this.add({resourceId:t,data:null,persistent:!1}));const s=i[t];if(this._track(n,r,s,e),s)return s.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout((()=>this._prune()),0))}finalize(){for(const t in this._resources)this._resources[t].delete()}_track(t,e,n,r){const i=this._consumers,o=i[t]=i[t]||{},s=o[e]||{},a=s.resourceId&&this._resources[s.resourceId];a&&(a.unsubscribe(s),this.prune()),n&&(o[e]=s,s.onChange=r,s.resourceId=n.id,n.subscribe(s))}_prune(){this._pruneRequest=null;for(const t of Object.keys(this._resources)){const e=this._resources[t];e.persistent||e.inUse()||(e.delete(),delete this._resources[t])}}}var an=new class{constructor(t={}){i(this,"_pool",[]),i(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(t)}setOptions(t){Object.assign(this.opts,t)}allocate(t,e,{size:n=1,type:r,padding:i=0,copy:o=!1,initialize:s=!1,maxCount:a}){const c=r||t&&t.constructor||Float32Array,l=e*n+i;if(ArrayBuffer.isView(t)){if(l<=t.length)return t;if(l*t.BYTES_PER_ELEMENT<=t.buffer.byteLength)return new c(t.buffer,0,l)}let u=1/0;a&&(u=a*n+i);const h=this._allocate(c,l,s,u);return t&&o?h.set(t):s||h.fill(0,0,4),this._release(t),h}release(t){this._release(t)}_allocate(t,e,n,r){let i=Math.max(Math.ceil(e*this.opts.overAlloc),1);i>r&&(i=r);const o=this._pool,s=t.BYTES_PER_ELEMENT*i,a=o.findIndex((t=>t.byteLength>=s));if(a>=0){const e=new t(o.splice(a,1)[0],0,i);return n&&e.fill(0),e}return new t(i)}_release(t){if(!ArrayBuffer.isView(t))return;const e=this._pool,{buffer:n}=t,{byteLength:r}=n,i=e.findIndex((t=>t.byteLength>=r));i<0?e.push(n):(i>0||e.length<this.opts.poolSize)&&e.splice(i,0,n),e.length>this.opts.poolSize&&e.shift()}};Math.PI,Math.PI;const cn={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function ln(t,{precision:e=cn.precision}={}){return t=function(t){return Math.round(t/cn.EPSILON)*cn.EPSILON}(t),"".concat(parseFloat(t.toPrecision(e)))}function un(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function hn(t,e,n){return dn(t,(t=>Math.max(e,Math.min(n,t))))}function pn(t,e,n){return un(t)?t.map(((t,r)=>pn(t,e[r],n))):n*e+(1-n)*t}function fn(t,e,n){const r=cn.EPSILON;n&&(cn.EPSILON=n);try{if(t===e)return!0;if(un(t)&&un(e)){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!fn(t[n],e[n]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):"number"==typeof t&&"number"==typeof e&&Math.abs(t-e)<=cn.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{cn.EPSILON=r}}function dn(t,e,n){if(un(t)){const r=t;n=n||function(t){return t.clone?t.clone():new Array(t.length)}(r);for(let i=0;i<n.length&&i<r.length;++i)n[i]=e(t[i],i,n);return n}return e(t)}class gn extends(function(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array)){clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){for(let n=0;n<this.ELEMENTS;++n)this[n]=t[n+e];return this.check()}toArray(t=[],e=0){for(let n=0;n<this.ELEMENTS;++n)t[e+n]=this[n];return t}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}to(t){return t===this?this:un(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(cn)}formatString(t){let e="";for(let n=0;n<this.ELEMENTS;++n)e+=(n>0?", ":"")+ln(this[n],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(e,"]")}equals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(!fn(this[e],t[e]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,e,n){if(void 0===n)return this.lerp(this,t,e);for(let r=0;r<this.ELEMENTS;++r){const i=t[r];this[r]=i+n*(e[r]-i)}return this.check()}min(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}max(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}clamp(t,e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),e[n]);return this.check()}add(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]+=e[t];return this.check()}subtract(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]-=e[t];return this.check()}scale(t){if("number"==typeof t)for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;else for(let e=0;e<this.ELEMENTS&&e<t.length;++e)this[e]*=t[e];return this.check()}multiplyByScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}check(){if(cn.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let t=this.length===this.ELEMENTS;for(let e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}sub(t){return this.subtract(t)}setScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}addScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}divideScalar(t){return this.multiplyByScalar(1/t)}clampScalar(t,e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),e);return this.check()}get elements(){return this}}n(25108);function mn(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function yn(t,e,n=""){if(cn.debug&&!function(t,e){if(t.length!==e)return!1;for(let e=0;e<t.length;++e)if(!Number.isFinite(t[e]))return!1;return!0}(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}function _n(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}class vn extends gn{get x(){return this[0]}set x(t){this[0]=mn(t)}get y(){return this[1]}set y(t){this[1]=mn(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let e=0;for(let n=0;n<this.ELEMENTS;++n){const r=this[n]-t[n];e+=r*r}return mn(e)}dot(t){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*t[n];return mn(e)}normalize(){const t=this.magnitude();if(0!==t)for(let e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}multiply(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]*=e[t];return this.check()}divide(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e[t];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return _n(t>=0&&t<this.ELEMENTS,"index is out of range"),mn(this[t])}setComponent(t,e){return _n(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}addVectors(t,e){return this.copy(t).add(e)}subVectors(t,e){return this.copy(t).subtract(e)}multiplyVectors(t,e){return this.copy(t).multiply(e)}addScaledVector(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}}var xn=1e-6,bn="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function wn(t,e,n){var r=e[0],i=e[1],o=e[2],s=n[3]*r+n[7]*i+n[11]*o+n[15];return s=s||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/s,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/s,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/s,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var En,Tn,Sn=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t};En=new bn(3),bn!=Float32Array&&(En[0]=0,En[1]=0,En[2]=0),Tn=En;function kn(t,e,n){const r=e[0],i=e[1],o=e[2],s=n[3]*r+n[7]*i+n[11]*o||1;return t[0]=(n[0]*r+n[4]*i+n[8]*o)/s,t[1]=(n[1]*r+n[5]*i+n[9]*o)/s,t[2]=(n[2]*r+n[6]*i+n[10]*o)/s,t}const An=[0,0,0];let Mn;class In extends vn{static get ZERO(){return Mn||(Mn=new In(0,0,0),Object.freeze(Mn)),Mn}constructor(t=0,e=0,n=0){super(-0,-0,-0),1===arguments.length&&un(t)?this.copy(t):(cn.debug&&(mn(t),mn(e),mn(n)),this[0]=t,this[1]=e,this[2]=n)}set(t,e,n){return this[0]=t,this[1]=e,this[2]=n,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return cn.debug&&(mn(t.x),mn(t.y),mn(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=mn(t)}angle(t){return n=t,r=(e=this)[0],i=e[1],o=e[2],s=n[0],a=n[1],c=n[2],l=Math.sqrt(r*r+i*i+o*o)*Math.sqrt(s*s+a*a+c*c),u=l&&function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}(e,n)/l,Math.acos(Math.min(Math.max(u,-1),1));var e,n,r,i,o,s,a,c,l,u}cross(t){return function(t,e,n){var r=e[0],i=e[1],o=e[2],s=n[0],a=n[1],c=n[2];t[0]=i*c-o*a,t[1]=o*s-r*c,t[2]=r*a-i*s}(this,this,t),this.check()}rotateX({radians:t,origin:e=An}){return function(t,e,n,r){var i=[],o=[];i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,e,t),this.check()}rotateY({radians:t,origin:e=An}){return function(t,e,n,r){var i=[],o=[];i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,e,t),this.check()}rotateZ({radians:t,origin:e=An}){return function(t,e,n,r){var i=[],o=[];i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,e,t),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return wn(this,this,t),this.check()}transformAsVector(t){return kn(this,this,t),this.check()}transformByMatrix3(t){return function(t,e,n){var r=e[0],i=e[1],o=e[2];t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8]}(this,this,t),this.check()}transformByMatrix2(t){return function(t,e,n){const r=e[0],i=e[1];t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2]}(this,this,t),this.check()}transformByQuaternion(t){return function(t,e,n){var r=n[0],i=n[1],o=n[2],s=n[3],a=e[0],c=e[1],l=e[2],u=i*l-o*c,h=o*a-r*l,p=r*c-i*a,f=i*p-o*h,d=o*u-r*p,g=r*h-i*u,m=2*s;u*=m,h*=m,p*=m,f*=2,d*=2,g*=2,t[0]=a+u+f,t[1]=c+h+d,t[2]=l+p+g}(this,this,t),this.check()}}const Cn=new In;function On(t,e,n,r){Cn.set(t,e,n);const i=Cn.len();return{distance:r/i,normal:new In(-t/i,-e/i,-n/i)}}let Pn;function Ln(t,e){const{size:n=1,startIndex:r=0}=e,i=void 0!==e.endIndex?e.endIndex:t.length,o=(i-r)/n;Pn=an.allocate(Pn,o,{type:Float32Array,size:2*n});let s=r,a=0;for(;s<i;){for(let e=0;e<n;e++){const r=t[s++];Pn[a+e]=r,Pn[a+e+n]=(c=r)-Math.fround(c)}a+=2*n}var c;return Pn.subarray(0,o*n*2)}function Dn(t){let e=null,n=!1;for(const r of t)r&&(e?(n||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],n=!0),e[0][0]=Math.min(e[0][0],r[0][0]),e[0][1]=Math.min(e[0][1],r[0][1]),e[1][0]=Math.max(e[1][0],r[1][0]),e[1][1]=Math.max(e[1][1],r[1][1])):e=r);return e}class Rn extends gn{toString(){let t="[";if(cn.printRowMajor){t+="row-major:";for(let e=0;e<this.RANK;++e)for(let n=0;n<this.RANK;++n)t+=" ".concat(this[n*this.RANK+e])}else{t+="column-major:";for(let e=0;e<this.ELEMENTS;++e)t+=" ".concat(this[e])}return t+="]",t}getElementIndex(t,e){return e*this.RANK+t}getElement(t,e){return this[e*this.RANK+t]}setElement(t,e,n){return this[e*this.RANK+t]=mn(n),this}getColumn(t,e=new Array(this.RANK).fill(-0)){const n=t*this.RANK;for(let t=0;t<this.RANK;++t)e[t]=this[n+t];return e}setColumn(t,e){const n=t*this.RANK;for(let t=0;t<this.RANK;++t)this[n+t]=e[t];return this}}function Nn(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],u=e[8],h=e[9],p=e[10],f=e[11],d=e[12],g=e[13],m=e[14],y=e[15],_=n*a-r*s,v=n*c-i*s,x=n*l-o*s,b=r*c-i*a,w=r*l-o*a,E=i*l-o*c,T=u*g-h*d,S=u*m-p*d,k=u*y-f*d,A=h*m-p*g,M=h*y-f*g,I=p*y-f*m,C=_*I-v*M+x*A+b*k-w*S+E*T;return C?(C=1/C,t[0]=(a*I-c*M+l*A)*C,t[1]=(i*M-r*I-o*A)*C,t[2]=(g*E-m*w+y*b)*C,t[3]=(p*w-h*E-f*b)*C,t[4]=(c*k-s*I-l*S)*C,t[5]=(n*I-i*k+o*S)*C,t[6]=(m*x-d*E-y*v)*C,t[7]=(u*E-p*x+f*v)*C,t[8]=(s*M-a*k+l*T)*C,t[9]=(r*k-n*M-o*T)*C,t[10]=(d*w-g*x+y*_)*C,t[11]=(h*x-u*w-f*_)*C,t[12]=(a*S-s*A-c*T)*C,t[13]=(n*A-r*S+i*T)*C,t[14]=(g*v-d*b-m*_)*C,t[15]=(u*b-h*v+p*_)*C,t):null}function jn(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],u=e[7],h=e[8],p=e[9],f=e[10],d=e[11],g=e[12],m=e[13],y=e[14],_=e[15],v=n[0],x=n[1],b=n[2],w=n[3];return t[0]=v*r+x*a+b*h+w*g,t[1]=v*i+x*c+b*p+w*m,t[2]=v*o+x*l+b*f+w*y,t[3]=v*s+x*u+b*d+w*_,v=n[4],x=n[5],b=n[6],w=n[7],t[4]=v*r+x*a+b*h+w*g,t[5]=v*i+x*c+b*p+w*m,t[6]=v*o+x*l+b*f+w*y,t[7]=v*s+x*u+b*d+w*_,v=n[8],x=n[9],b=n[10],w=n[11],t[8]=v*r+x*a+b*h+w*g,t[9]=v*i+x*c+b*p+w*m,t[10]=v*o+x*l+b*f+w*y,t[11]=v*s+x*u+b*d+w*_,v=n[12],x=n[13],b=n[14],w=n[15],t[12]=v*r+x*a+b*h+w*g,t[13]=v*i+x*c+b*p+w*m,t[14]=v*o+x*l+b*f+w*y,t[15]=v*s+x*u+b*d+w*_,t}function zn(t,e,n){var r,i,o,s,a,c,l,u,h,p,f,d,g=n[0],m=n[1],y=n[2];return e===t?(t[12]=e[0]*g+e[4]*m+e[8]*y+e[12],t[13]=e[1]*g+e[5]*m+e[9]*y+e[13],t[14]=e[2]*g+e[6]*m+e[10]*y+e[14],t[15]=e[3]*g+e[7]*m+e[11]*y+e[15]):(r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],u=e[7],h=e[8],p=e[9],f=e[10],d=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=s,t[4]=a,t[5]=c,t[6]=l,t[7]=u,t[8]=h,t[9]=p,t[10]=f,t[11]=d,t[12]=r*g+a*m+h*y+e[12],t[13]=i*g+c*m+p*y+e[13],t[14]=o*g+l*m+f*y+e[14],t[15]=s*g+u*m+d*y+e[15]),t}function Bn(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Fn(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],s=e[5],a=e[6],c=e[7],l=e[8],u=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+l*r,t[5]=s*i+u*r,t[6]=a*i+h*r,t[7]=c*i+p*r,t[8]=l*i-o*r,t[9]=u*i-s*r,t[10]=h*i-a*r,t[11]=p*i-c*r,t}function Un(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],s=e[1],a=e[2],c=e[3],l=e[4],u=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+l*r,t[1]=s*i+u*r,t[2]=a*i+h*r,t[3]=c*i+p*r,t[4]=l*i-o*r,t[5]=u*i-s*r,t[6]=h*i-a*r,t[7]=p*i-c*r,t}var Vn=function(t,e,n,r,i){var o,s=1/Math.tan(e/2);return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t};var qn=function(t,e,n,r,i,o,s){var a=1/(e-n),c=1/(r-i),l=1/(o-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*c,t[14]=(s+o)*l,t[15]=1,t};function Wn(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function Gn(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}!function(){var t=function(){var t=new bn(2);return bn!=Float32Array&&(t[0]=0,t[1]=0),t}()}();function $n(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*s,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*s,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*s,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*s,t}var Hn;!function(){var t=function(){var t=new bn(4);return bn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}()}();!function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"}(Hn||(Hn={}));const Zn=45*Math.PI/180,Yn=1,Xn=.1,Kn=500,Jn=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Qn extends Rn{static get IDENTITY(){return function(){er||(er=new Qn,Object.freeze(er));return er}()}static get ZERO(){return function(){tr||(tr=new Qn([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(tr));return tr}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return Hn}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,e,n,r,i,o,s,a,c,l,u,h,p,f,d,g){return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=s,this[7]=a,this[8]=c,this[9]=l,this[10]=u,this[11]=h,this[12]=p,this[13]=f,this[14]=d,this[15]=g,this.check()}setRowMajor(t,e,n,r,i,o,s,a,c,l,u,h,p,f,d,g){return this[0]=t,this[1]=i,this[2]=c,this[3]=p,this[4]=e,this[5]=o,this[6]=l,this[7]=f,this[8]=n,this[9]=s,this[10]=u,this[11]=d,this[12]=r,this[13]=a,this[14]=h,this[15]=g,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(Jn)}fromObject(t){return this.check()}fromQuaternion(t){return function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n+n,a=r+r,c=i+i,l=n*s,u=r*s,h=r*a,p=i*s,f=i*a,d=i*c,g=o*s,m=o*a,y=o*c;t[0]=1-h-d,t[1]=u+y,t[2]=p-m,t[3]=0,t[4]=u-y,t[5]=1-l-d,t[6]=f+g,t[7]=0,t[8]=p+m,t[9]=f-g,t[10]=1-l-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this,t),this.check()}frustum(t){const{left:e,right:n,bottom:r,top:i,near:o=Xn,far:s=Kn}=t;return s===1/0?function(t,e,n,r,i,o){const s=2*o/(n-e),a=2*o/(i-r),c=(n+e)/(n-e),l=(i+r)/(i-r),u=-1,h=-1,p=-2*o;t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=c,t[9]=l,t[10]=u,t[11]=h,t[12]=0,t[13]=0,t[14]=p,t[15]=0}(this,e,n,r,i,o):function(t,e,n,r,i,o,s){var a=1/(n-e),c=1/(i-r),l=1/(o-s);t[0]=2*o*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*c,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(i+r)*c,t[10]=(s+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*l,t[15]=0}(this,e,n,r,i,o,s),this.check()}lookAt(t){const{eye:e,center:n=[0,0,0],up:r=[0,1,0]}=t;return function(t,e,n,r){var i,o,s,a,c,l,u,h,p,f,d=e[0],g=e[1],m=e[2],y=r[0],_=r[1],v=r[2],x=n[0],b=n[1],w=n[2];Math.abs(d-x)<xn&&Math.abs(g-b)<xn&&Math.abs(m-w)<xn?function(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(t):(u=d-x,h=g-b,p=m-w,i=_*(p*=f=1/Math.hypot(u,h,p))-v*(h*=f),o=v*(u*=f)-y*p,s=y*h-_*u,(f=Math.hypot(i,o,s))?(i*=f=1/f,o*=f,s*=f):(i=0,o=0,s=0),a=h*s-p*o,c=p*i-u*s,l=u*o-h*i,(f=Math.hypot(a,c,l))?(a*=f=1/f,c*=f,l*=f):(a=0,c=0,l=0),t[0]=i,t[1]=a,t[2]=u,t[3]=0,t[4]=o,t[5]=c,t[6]=h,t[7]=0,t[8]=s,t[9]=l,t[10]=p,t[11]=0,t[12]=-(i*d+o*g+s*m),t[13]=-(a*d+c*g+l*m),t[14]=-(u*d+h*g+p*m),t[15]=1)}(this,e,n,r),this.check()}ortho(t){const{left:e,right:n,bottom:r,top:i,near:o=Xn,far:s=Kn}=t;return qn(this,e,n,r,i,o,s),this.check()}orthographic(t){const{fovy:e=Zn,aspect:n=Yn,focalDistance:r=1,near:i=Xn,far:o=Kn}=t;nr(e);const s=e/2,a=r*Math.tan(s),c=a*n;return this.ortho({left:-c,right:c,bottom:-a,top:a,near:i,far:o})}perspective(t){const{fovy:e=45*Math.PI/180,aspect:n=1,near:r=.1,far:i=500}=t;return nr(e),Vn(this,e,n,r,i),this.check()}determinant(){return e=(t=this)[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],c=t[7],l=t[8],u=t[9],h=t[10],p=t[11],f=t[12],d=t[13],g=t[14],m=t[15],(e*s-n*o)*(h*m-p*g)-(e*a-r*o)*(u*m-p*d)+(e*c-i*o)*(u*g-h*d)+(n*a-r*s)*(l*m-p*f)-(n*c-i*s)*(l*g-h*f)+(r*c-i*a)*(l*d-u*f);var t,e,n,r,i,o,s,a,c,l,u,h,p,f,d,g,m}getScale(t=[-0,-0,-0]){return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(t=[-0,-0,-0]){return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t,e){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],e=e||[-0,-0,-0];const n=this.getScale(e),r=1/n[0],i=1/n[1],o=1/n[2];return t[0]=this[0]*r,t[1]=this[1]*i,t[2]=this[2]*o,t[3]=0,t[4]=this[4]*r,t[5]=this[5]*i,t[6]=this[6]*o,t[7]=0,t[8]=this[8]*r,t[9]=this[9]*i,t[10]=this[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t,e){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0],e=e||[-0,-0,-0];const n=this.getScale(e),r=1/n[0],i=1/n[1],o=1/n[2];return t[0]=this[0]*r,t[1]=this[1]*i,t[2]=this[2]*o,t[3]=this[4]*r,t[4]=this[5]*i,t[5]=this[6]*o,t[6]=this[8]*r,t[7]=this[9]*i,t[8]=this[10]*o,t}transpose(){return function(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],s=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=s,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]}(this,this),this.check()}invert(){return Nn(this,this),this.check()}multiplyLeft(t){return jn(this,t,this),this.check()}multiplyRight(t){return jn(this,this,t),this.check()}rotateX(t){return Fn(this,this,t),this.check()}rotateY(t){return function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],s=e[1],a=e[2],c=e[3],l=e[8],u=e[9],h=e[10],p=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-l*r,t[1]=s*i-u*r,t[2]=a*i-h*r,t[3]=c*i-p*r,t[8]=o*r+l*i,t[9]=s*r+u*i,t[10]=a*r+h*i,t[11]=c*r+p*i}(this,this,t),this.check()}rotateZ(t){return Un(this,this,t),this.check()}rotateXYZ(t){return this.rotateX(t[0]).rotateY(t[1]).rotateZ(t[2])}rotateAxis(t,e){return function(t,e,n,r){var i,o,s,a,c,l,u,h,p,f,d,g,m,y,_,v,x,b,w,E,T,S,k,A,M=r[0],I=r[1],C=r[2],O=Math.hypot(M,I,C);O<xn||(M*=O=1/O,I*=O,C*=O,i=Math.sin(n),s=1-(o=Math.cos(n)),a=e[0],c=e[1],l=e[2],u=e[3],h=e[4],p=e[5],f=e[6],d=e[7],g=e[8],m=e[9],y=e[10],_=e[11],v=M*M*s+o,x=I*M*s+C*i,b=C*M*s-I*i,w=M*I*s-C*i,E=I*I*s+o,T=C*I*s+M*i,S=M*C*s+I*i,k=I*C*s-M*i,A=C*C*s+o,t[0]=a*v+h*x+g*b,t[1]=c*v+p*x+m*b,t[2]=l*v+f*x+y*b,t[3]=u*v+d*x+_*b,t[4]=a*w+h*E+g*T,t[5]=c*w+p*E+m*T,t[6]=l*w+f*E+y*T,t[7]=u*w+d*E+_*T,t[8]=a*S+h*k+g*A,t[9]=c*S+p*k+m*A,t[10]=l*S+f*k+y*A,t[11]=u*S+d*k+_*A,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(this,this,t,e),this.check()}scale(t){return Bn(this,this,Array.isArray(t)?t:[t,t,t]),this.check()}translate(t){return zn(this,this,t),this.check()}transform(t,e){return 4===t.length?(yn(e=$n(e||[-0,-0,-0,-0],t,this),4),e):this.transformAsPoint(t,e)}transformAsPoint(t,e){const{length:n}=t;let r;switch(n){case 2:r=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}(e||[-0,-0],t,this);break;case 3:r=wn(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return yn(r,t.length),r}transformAsVector(t,e){let n;switch(t.length){case 2:n=function(t,e,n){const r=e[0],i=e[1],o=n[3]*r+n[7]*i||1;return t[0]=(n[0]*r+n[4]*i)/o,t[1]=(n[1]*r+n[5]*i)/o,t}(e||[-0,-0],t,this);break;case 3:n=kn(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return yn(n,t.length),n}transformPoint(t,e){return this.transformAsPoint(t,e)}transformVector(t,e){return this.transformAsPoint(t,e)}transformDirection(t,e){return this.transformAsVector(t,e)}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,e,n){return this.identity().translate([t,e,n])}}let tr,er;function nr(t){if(t>2*Math.PI)throw Error("expected radians")}function rr(t,e){const n=$n([],e,t);return function(t,e,n){t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n}(n,n,1/n[3]),n}function ir(t,e){const n=t%e;return n<0?e+n:n}function or(t,e,n){return t<e?e:t>n?n:t}const sr=Math.log2||function(t){return Math.log(t)*Math.LOG2E};function ar(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const cr=Math.PI,lr=cr/4,ur=cr/180,hr=180/cr,pr=512,fr=4003e4,dr=85.051129,gr=1.5;function mr(t){const[e,n]=t;ar(Number.isFinite(e)),ar(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const r=n*ur;return[pr*(e*ur+cr)/(2*cr),pr*(cr+Math.log(Math.tan(lr+.5*r)))/(2*cr)]}function yr(t){const[e,n]=t,r=e/pr*(2*cr)-cr,i=2*(Math.atan(Math.exp(n/pr*(2*cr)-cr))-lr);return[r*hr,i*hr]}function _r(t){const{latitude:e}=t;ar(Number.isFinite(e));const n=Math.cos(e*ur);return function(t){return sr(t)}(fr*n)-9}function vr(t){const e=Math.cos(t*ur);return pr/fr/e}function xr(t){const{latitude:e,longitude:n,highPrecision:r=!1}=t;ar(Number.isFinite(e)&&Number.isFinite(n));const i=pr,o=Math.cos(e*ur),s=i/360,a=s/o,c=i/fr/o,l={unitsPerMeter:[c,c,c],metersPerUnit:[1/c,1/c,1/c],unitsPerDegree:[s,a,c],degreesPerUnit:[1/s,1/a,1/c]};if(r){const t=ur*Math.tan(e*ur)/o,n=s*t/2,r=i/fr*t,u=r/a*c;l.unitsPerDegree2=[0,n,r],l.unitsPerMeter2=[u,0,u]}return l}function br(t,e){const[n,r,i]=t,[o,s,a]=e,{unitsPerMeter:c,unitsPerMeter2:l}=xr({longitude:n,latitude:r,highPrecision:!0}),u=mr(t);u[0]+=o*(c[0]+l[0]*s),u[1]+=s*(c[1]+l[1]*s);const h=yr(u),p=(i||0)+(a||0);return Number.isFinite(i)||Number.isFinite(a)?[h[0],h[1],p]:h}function wr(t){const{width:e,height:n,altitude:r,pitch:i=0,offset:o,center:s,scale:a,nearZMultiplier:c=1,farZMultiplier:l=1}=t;let{fovy:u=Er(gr)}=t;void 0!==r&&(u=Er(r));const h=u*ur,p=i*ur,f=Tr(u);let d=f;s&&(d+=s[2]*a/Math.cos(p)/n);const g=h*(.5+(o?o[1]:0)/n),m=Math.sin(g)*d/Math.sin(or(Math.PI/2-p-g,.01,Math.PI-.01)),y=Math.sin(p)*m+d,_=10*d;return{fov:h,aspect:e/n,focalDistance:f,near:c,far:Math.min(y*l,_)}}function Er(t){return 2*Math.atan(.5/t)*hr}function Tr(t){return.5/Math.tan(.5*t*ur)}function Sr(t,e){const[n,r,i=0]=t;return ar(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(i)),rr(e,[n,r,i,1])}function kr(t,e,n=0){const[r,i,o]=t;if(ar(Number.isFinite(r)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(o)){return rr(e,[r,i,o,1])}const s=rr(e,[r,i,0,1]),a=rr(e,[r,i,1,1]),c=s[2],l=a[2];return Gn([],s,a,c===l?0:((n||0)-c)/(l-c))}function Ar(t){const{width:e,height:n,bounds:r,minExtent:i=0,maxZoom:o=24,offset:s=[0,0]}=t,[[a,c],[l,u]]=r,h=function(t=0){if("number"==typeof t)return{top:t,bottom:t,left:t,right:t};return ar(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t}(t.padding),p=mr([a,or(u,-85.051129,dr)]),f=mr([l,or(c,-85.051129,dr)]),d=[Math.max(Math.abs(f[0]-p[0]),i),Math.max(Math.abs(f[1]-p[1]),i)],g=[e-h.left-h.right-2*Math.abs(s[0]),n-h.top-h.bottom-2*Math.abs(s[1])];ar(g[0]>0&&g[1]>0);const m=g[0]/d[0],y=g[1]/d[1],_=(h.right-h.left)/2/m,v=(h.top-h.bottom)/2/y,x=yr([(f[0]+p[0])/2+_,(f[1]+p[1])/2+v]),b=Math.min(o,sr(Math.abs(Math.min(m,y))));return ar(Number.isFinite(b)),{longitude:x[0],latitude:x[1],zoom:b}}const Mr=Math.PI/180;function Ir(t,e,n){const{pixelUnprojectionMatrix:r}=t,i=rr(r,[e,0,1,1]),o=rr(r,[e,t.height,1,1]),s=yr(Gn([],i,o,(n*t.distanceScales.unitsPerMeter[2]-i[2])/(o[2]-i[2])));return s.push(n),s}const Cr={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(Cr,"IDENTITY",{get:()=>(G.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const Or={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Pr={common:0,meters:1,pixels:2},Lr={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},Dr=Math.PI/180,Rr=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Nr=[0,0,0],jr={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class zr{constructor(t={}){i(this,"id",void 0),i(this,"x",void 0),i(this,"y",void 0),i(this,"width",void 0),i(this,"height",void 0),i(this,"padding",void 0),i(this,"isGeospatial",void 0),i(this,"zoom",void 0),i(this,"focalDistance",void 0),i(this,"position",void 0),i(this,"modelMatrix",void 0),i(this,"distanceScales",void 0),i(this,"scale",void 0),i(this,"center",void 0),i(this,"cameraPosition",void 0),i(this,"projectionMatrix",void 0),i(this,"viewMatrix",void 0),i(this,"viewMatrixUncentered",void 0),i(this,"viewMatrixInverse",void 0),i(this,"viewProjectionMatrix",void 0),i(this,"pixelProjectionMatrix",void 0),i(this,"pixelUnprojectionMatrix",void 0),i(this,"resolution",void 0),i(this,"_frustumPlanes",{}),this.id=t.id||this.constructor.displayName||"viewport",this.x=t.x||0,this.y=t.y||0,this.width=t.width||1,this.height=t.height||1,this.zoom=t.zoom||0,this.padding=t.padding,this.distanceScales=t.distanceScales||jr,this.focalDistance=t.focalDistance||1,this.position=t.position||Nr,this.modelMatrix=t.modelMatrix||null;const{longitude:e,latitude:n}=t;this.isGeospatial=Number.isFinite(n)&&Number.isFinite(e),this._initProps(t),this._initMatrices(t),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Or.WEB_MERCATOR:Or.WEB_MERCATOR_AUTO_OFFSET:Or.IDENTITY}equals(t){return t instanceof zr&&(this===t||t.width===this.width&&t.height===this.height&&t.scale===this.scale&&fn(t.projectionMatrix,this.projectionMatrix)&&fn(t.viewMatrix,this.viewMatrix))}project(t,{topLeft:e=!0}={}){const n=Sr(this.projectPosition(t),this.pixelProjectionMatrix),[r,i]=n,o=e?i:this.height-i;return 2===t.length?[r,o]:[r,o,n[2]]}unproject(t,{topLeft:e=!0,targetZ:n}={}){const[r,i,o]=t,s=e?i:this.height-i,a=n&&n*this.distanceScales.unitsPerMeter[2],c=kr([r,s,o],this.pixelUnprojectionMatrix,a),[l,u,h]=this.unprojectPosition(c);return Number.isFinite(o)?[l,u,h]:Number.isFinite(n)?[l,u,n]:[l,u]}projectPosition(t){const[e,n]=this.projectFlat(t);return[e,n,(t[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(t){const[e,n]=this.unprojectFlat(t);return[e,n,(t[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(t){if(this.isGeospatial){const e=mr(t);return e[1]=hn(e[1],-318,830),e}return t}unprojectFlat(t){return this.isGeospatial?yr(t):t}getBounds(t={}){const e={targetZ:t.z||0},n=this.unproject([0,0],e),r=this.unproject([this.width,0],e),i=this.unproject([0,this.height],e),o=this.unproject([this.width,this.height],e);return[Math.min(n[0],r[0],i[0],o[0]),Math.min(n[1],r[1],i[1],o[1]),Math.max(n[0],r[0],i[0],o[0]),Math.max(n[1],r[1],i[1],o[1])]}getDistanceScales(t){return t?xr({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}containsPixel({x:t,y:e,width:n=1,height:r=1}){return t<this.x+this.width&&this.x<t+n&&e<this.y+this.height&&this.y<e+r}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,{left:On((t=this.viewProjectionMatrix)[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:On(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:On(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:On(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:On(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:On(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}),this._frustumPlanes;var t}panByPosition(t,e){return null}_initProps(t){const e=t.longitude,n=t.latitude;this.isGeospatial&&(Number.isFinite(t.zoom)||(this.zoom=_r({latitude:n})+Math.log2(this.focalDistance)),this.distanceScales=t.distanceScales||xr({latitude:n,longitude:e}));const r=Math.pow(2,this.zoom);this.scale=r;const{position:i,modelMatrix:o}=t;let s=Nr;if(i&&(s=o?new Qn(o).transformAsVector(i,[]):i),this.isGeospatial){const t=this.projectPosition([e,n,0]);this.center=new In(s).scale(this.distanceScales.unitsPerMeter).add(t)}else this.center=this.projectPosition(s)}_initMatrices(t){const{viewMatrix:e=Rr,projectionMatrix:n=null,orthographic:r=!1,fovyRadians:i,fovy:o=75,near:s=.1,far:a=1e3,padding:c=null,focalDistance:l=1}=t;this.viewMatrixUncentered=e,this.viewMatrix=(new Qn).multiplyRight(e).translate(new In(this.center).negate()),this.projectionMatrix=n||function({width:t,height:e,orthographic:n,fovyRadians:r,focalDistance:i,padding:o,near:s,far:a}){const c=t/e,l=n?(new Qn).orthographic({fovy:r,aspect:c,focalDistance:i,near:s,far:a}):(new Qn).perspective({fovy:r,aspect:c,near:s,far:a});if(o){const{left:n=0,right:r=0,top:i=0,bottom:s=0}=o,a=hn((n+t-r)/2,0,t)-t/2,c=hn((i+e-s)/2,0,e)-e/2;l[8]-=2*a/t,l[9]+=2*c/e}return l}({width:this.width,height:this.height,orthographic:r,fovyRadians:i||o*Dr,focalDistance:l,padding:c,near:s,far:a});const u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var h;jn(u,u,this.projectionMatrix),jn(u,u,this.viewMatrix),this.viewProjectionMatrix=u,this.viewMatrixInverse=Nn([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=[(h=this.viewMatrixInverse)[12],h[13],h[14]];const p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Bn(p,p,[this.width/2,-this.height/2,1]),zn(p,p,[1,-1,0]),jn(f,p,this.viewProjectionMatrix),this.pixelProjectionMatrix=f,this.pixelUnprojectionMatrix=Nn([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||G.warn("Pixel project matrix not invertible")()}}i(zr,"displayName","Viewport");const Br="vs",Fr="fs";function Ur(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const Vr={number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},array:{validate:(t,e)=>Array.isArray(t)||ArrayBuffer.isView(t)}};function qr(t){let e=Wr(t);return"object"===e?t?"type"in t?Object.assign({},t,Vr[t.type]):"value"in t?(e=Wr(t.value),Object.assign({type:e},t,Vr[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},Vr[e])}function Wr(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}class Gr{constructor(t){let{name:e,vs:n,fs:r,dependencies:i=[],uniforms:o,getUniforms:s,deprecations:a=[],defines:c={},inject:l={},vertexShader:u,fragmentShader:h}=t;Ur("string"==typeof e),this.name=e,this.vs=n||u,this.fs=r||h,this.getModuleUniforms=s,this.dependencies=i,this.deprecations=this._parseDeprecationDefinitions(a),this.defines=c,this.injections=function(t){const e={vs:{},fs:{}};for(const n in t){let r=t[n];"string"==typeof r&&(r={order:0,injection:r}),e[n.slice(0,2)][n]=r}return e}(l),o&&(this.uniforms=function(t){const e={};for(const n in t){const r=qr(t[n]);e[n]=r}return e}(o))}getModuleSource(t){let e;switch(t){case"vs":e=this.vs||"";break;case"fs":e=this.fs||"";break;default:Ur(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(e,"// END MODULE_").concat(this.name,"\n\n")}getUniforms(t,e){return this.getModuleUniforms?this.getModuleUniforms(t,e):this.uniforms?this._defaultGetUniforms(t):{}}getDefines(){return this.defines}checkDeprecations(t,e){this.deprecations.forEach((n=>{n.regex.test(t)&&(n.deprecated?e.deprecated(n.old,n.new)():e.removed(n.old,n.new)())}))}_parseDeprecationDefinitions(t){return t.forEach((t=>{if("function"===t.type)t.regex=new RegExp("\\b".concat(t.old,"\\("));else t.regex=new RegExp("".concat(t.type," ").concat(t.old,";"))})),t}_defaultGetUniforms(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e={},n=this.uniforms;for(const r in n){const i=n[r];r in t&&!i.private?(i.validate&&Ur(i.validate(t[r],i),"".concat(this.name,": invalid ").concat(r)),e[r]=t[r]):e[r]=i.value}return e}}function $r(t){return Hr(Yr(t))}function Hr(t){const e={},n={};return Zr({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort(((t,e)=>n[e]-n[t])).map((t=>e[t]))}function Zr(t){let{modules:e,level:n,moduleMap:r,moduleDepth:i}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const t of e)r[t.name]=t,(void 0===i[t.name]||i[t.name]<n)&&(i[t.name]=n);for(const t of e)t.dependencies&&Zr({modules:t.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}function Yr(t,e){return t.map((t=>(t instanceof Gr||(Ur("string"!=typeof t,"Shader module use by name is deprecated. Import shader module '".concat(t,"' and use it directly.")),Ur(t.name,"shader module has no name"),(t=new Gr(t)).dependencies=Yr(t.dependencies)),t)))}const Xr=7936,Kr=7937,Jr=7938,Qr=35724,ti={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},ei={};Object.keys(ti).forEach((t=>{ei[t]=t}));const ni={};function ri(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=ti[e];if(Ur(r,e),!function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e="undefined"!=typeof window&&window.navigator||{},n=t.userAgent||e.userAgent||"",r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i}(n))return!0;if(e in ni)return ni[e];const i=r[0],o=n.behavior||"enable",s="#extension GL_".concat(i," : ").concat(o,"\nvoid main(void) {}"),a=t.createShader(35633);t.shaderSource(a,s),t.compileShader(a);const c=t.getShaderParameter(a,35713);return t.deleteShader(a),ni[e]=c,c}function ii(t,e){const n=ti[e];Ur(n,e);const r=function(t){return"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&2===t._version)}(t)&&n[1]||n[0],i="string"==typeof r?Boolean(t.getExtension(r)):r;return Ur(!1===i||!0===i),i}function oi(t,e){return(e=Array.isArray(e)?e:[e]).every((e=>ii(t,e)))}function si(t){const e=function(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||Xr),r=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||Kr);return{gpuVendor:function(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}(n,r),vendor:n,renderer:r,version:t.getParameter(Jr),shadingLanguageVersion:t.getParameter(Qr)}}(t);switch(e.gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}const ai={[Br]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",[Fr]:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},ci="__LUMA_INJECT_DECLARATIONS__",li=/void\s+main\s*\([^)]*\)\s*\{\n?/,ui=/}\n?[^{}]*$/,hi=[];function pi(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=e===Br;for(const e in n){const r=n[e];r.sort(((t,e)=>t.order-e.order)),hi.length=r.length;for(let t=0,e=r.length;t<e;++t)hi[t]=r[t].injection;const o="".concat(hi.join("\n"),"\n");switch(e){case"vs:#decl":i&&(t=t.replace(ci,o));break;case"vs:#main-start":i&&(t=t.replace(li,(t=>t+o)));break;case"vs:#main-end":i&&(t=t.replace(ui,(t=>o+t)));break;case"fs:#decl":i||(t=t.replace(ci,o));break;case"fs:#main-start":i||(t=t.replace(li,(t=>t+o)));break;case"fs:#main-end":i||(t=t.replace(ui,(t=>o+t)));break;default:t=t.replace(e,(t=>t+o))}}return t=t.replace(ci,""),r&&(t=t.replace(/\}\s*$/,(t=>t+ai[e]))),t}function fi(t){const e={};return Ur(Array.isArray(t)&&t.length>1),t.forEach((t=>{for(const n in t)e[n]=e[n]?"".concat(e[n],"\n").concat(t[n]):t[n]})),e}function di(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const gi=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],mi=[...gi,[di("attribute"),"in $1"],[di("varying"),"out $1"]],yi=[...gi,[di("varying"),"in $1"]],_i=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],vi=[..._i,[di("in"),"attribute $1"],[di("out"),"varying $1"]],xi=[..._i,[di("in"),"varying $1"]],bi="gl_FragColor",wi=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,Ei=/void\s+main\s*\([^)]*\)\s*\{\n?/;function Ti(t,e,n){switch(e){case 300:return n?Si(t,mi):function(t){t=Si(t,yi);const e=t.match(wi);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat(bi,"\\b"),"g"),n)}else{const e="fragmentColor";t=t.replace(Ei,(t=>"out vec4 ".concat(e,";\n").concat(t))).replace(new RegExp("\\b".concat(bi,"\\b"),"g"),e)}return t}(t);case 100:return n?Si(t,vi):function(t){t=Si(t,xi);const e=t.match(wi);if(e){const n=e[1];t=t.replace(wi,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),bi)}return t}(t);default:throw new Error("unknown GLSL version ".concat(e))}}function Si(t,e){for(const[n,r]of e)t=t.replace(n,r);return t}const ki="\n\n".concat(ci,"\n\n"),Ai={[Br]:"vertex",[Fr]:"fragment"},Mi="precision highp float;\n\n";function Ii(t,e){let{id:n,source:r,type:i,modules:o,defines:s={},hookFunctions:a=[],inject:c={},transpileToGLSL100:l=!1,prologue:u=!0,log:h}=e;Ur("string"==typeof r,"shader source must be a string");const p=i===Br,f=r.split("\n");let d=100,g="",m=r;0===f[0].indexOf("#version ")?(d=300,g=f[0],m=f.slice(1).join("\n")):g="#version ".concat(d);const y={};o.forEach((t=>{Object.assign(y,t.getDefines())})),Object.assign(y,s);let _=u?"".concat(g,"\n").concat(function(t){let{id:e,source:n,type:r}=t;const i=e&&"string"==typeof e&&-1===n.indexOf("SHADER_NAME");return i?"\n#define SHADER_NAME ".concat(e,"_").concat(Ai[r],"\n\n"):""}({id:n,source:r,type:i}),"\n").concat(function(t){let{type:e}=t;return"\n#define SHADER_TYPE_".concat(Ai[e].toUpperCase(),"\n")}({type:i}),"\n").concat(si(t),"\n").concat(function(t,e,n){let r="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return oi(t,ei.GLSL_FRAG_DEPTH)&&(r+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),oi(t,ei.GLSL_DERIVATIVES)&&ri(t,ei.GLSL_DERIVATIVES)&&(r+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),oi(t,ei.GLSL_FRAG_DATA)&&ri(t,ei.GLSL_FRAG_DATA,{behavior:"require"})&&(r+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),oi(t,ei.GLSL_TEXTURE_LOD)&&(r+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),r}(t),"\n").concat(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,n="";for(const r in t){0===e&&(n+="\n// APPLICATION DEFINES\n"),e++;const i=t[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(t[r],"\n"))}0===e&&(n+="\n");return n}(y),"\n").concat(p?"":Mi,"\n"):"".concat(g,"\n");const v=function(t){const e={vs:{},fs:{}};return t.forEach((t=>{let n;"string"!=typeof t?(n=t,t=n.hook):n={},t=t.trim();const[r,i]=t.split(":"),o=t.replace(/\(.+/,"");e[r][o]=Object.assign(n,{signature:i})})),e}(a),x={},b={},w={};for(const t in c){const e="string"==typeof c[t]?{injection:c[t],order:0}:c[t],n=t.match(/^(v|f)s:(#)?([\w-]+)$/);if(n){const r=n[2],i=n[3];r?"decl"===i?b[t]=[e]:w[t]=[e]:x[t]=[e]}else w[t]=[e]}for(const t of o){h&&t.checkDeprecations(m,h);_+=t.getModuleSource(i,d);const e=t.injections[i];for(const t in e){const n=t.match(/^(v|f)s:#([\w-]+)$/);if(n){const r="decl"===n[2]?b:w;r[t]=r[t]||[],r[t].push(e[t])}else x[t]=x[t]||[],x[t].push(e[t])}}return _+=ki,_=pi(_,i,b),_+=function(t,e){let n="";for(const r in t){const i=t[r];if(n+="void ".concat(i.signature," {\n"),i.header&&(n+="  ".concat(i.header)),e[r]){const t=e[r];t.sort(((t,e)=>t.order-e.order));for(const e of t)n+="  ".concat(e.injection,"\n")}i.footer&&(n+="  ".concat(i.footer)),n+="}\n"}return n}(v[i],x),_+=m,_=pi(_,i,w),_=Ti(_,l?100:d,p),_}function Ci(t){return function(e){const n={};for(const r of t){const t=r.getUniforms(e,n);Object.assign(n,t)}return n}}const Oi=new U({id:"luma.gl"});function Pi(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const Li="Invalid WebGLRenderingContext",Di="Requires WebGL2";function Ri(t){return"undefined"!=typeof WebGLRenderingContext&&t instanceof WebGLRenderingContext||("undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&Number.isFinite(t._version)))}function Ni(t){return"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&2===t._version)}function ji(t){return Pi(Ri(t),Li),t}function zi(t){return Pi(Ni(t),Di),t}const Bi={};function Fi(t,e){var n;Bi[t]=!0,void 0!==e&&(n=e,globalThis.console&&globalThis.console.error&&globalThis.console.error(n))}const Ui=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let e=0;e<this.attribs.length;e++){const r=new t.VertexAttrib(n);this.attribs[e]=r}this.maxAttrib=0};(Ui.VertexAttrib=function(t){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const Vi=function(t){const e=this;this.gl=t,function(t){const e=t.getError;t.getError=function(){let n;do{n=e.apply(t),0!==n&&(Bi[n]=!0)}while(0!==n);for(n in Bi)if(Bi[n])return delete Bi[n],parseInt(n,10);return 0}}(t);const n=this.original={getParameter:t.getParameter,enableVertexAttribArray:t.enableVertexAttribArray,disableVertexAttribArray:t.disableVertexAttribArray,bindBuffer:t.bindBuffer,getVertexAttrib:t.getVertexAttrib,vertexAttribPointer:t.vertexAttribPointer};t.getParameter=function(t){return t===e.VERTEX_ARRAY_BINDING_OES?e.currentVertexArrayObject===e.defaultVertexArrayObject?null:e.currentVertexArrayObject:n.getParameter.apply(this,arguments)},t.enableVertexAttribArray=function(t){const r=e.currentVertexArrayObject;r.maxAttrib=Math.max(r.maxAttrib,t);return r.attribs[t].enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},t.disableVertexAttribArray=function(t){const r=e.currentVertexArrayObject;r.maxAttrib=Math.max(r.maxAttrib,t);return r.attribs[t].enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},t.bindBuffer=function(t,r){switch(t){case 34962:e.currentArrayBuffer=r;break;case 34963:e.currentVertexArrayObject.elementArrayBuffer=r}return n.bindBuffer.apply(this,arguments)},t.getVertexAttrib=function(t,r){const i=e.currentVertexArrayObject.attribs[t];switch(r){case 34975:return i.buffer;case 34338:return i.enabled;case 34339:return i.size;case 34340:return i.stride;case 34341:return i.type;case 34922:return i.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},t.vertexAttribPointer=function(t,r,i,o,s,a){const c=e.currentVertexArrayObject;c.maxAttrib=Math.max(c.maxAttrib,t);const l=c.attribs[t];return l.buffer=e.currentArrayBuffer,l.size=r,l.type=i,l.normalized=o,l.stride=s,l.offset=a,l.recache(),n.vertexAttribPointer.apply(this,arguments)},t.instrumentExtension&&t.instrumentExtension(this,"OES_vertex_array_object"),t.canvas&&t.canvas.addEventListener("webglcontextrestored",(()=>{var t;t="OESVertexArrayObject emulation library context restored",globalThis.console&&globalThis.console.log&&globalThis.console.log(t),e.reset_()}),!0),this.reset_()};Vi.prototype.VERTEX_ARRAY_BINDING_OES=34229,Vi.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let t=0;t<this.vertexArrayObjects.length;++t)this.vertexArrayObjects.isAlive=!1;const t=this.gl;this.maxVertexAttribs=t.getParameter(34921),this.defaultVertexArrayObject=new Ui(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},Vi.prototype.createVertexArrayOES=function(){const t=new Ui(this);return this.vertexArrayObjects.push(t),t},Vi.prototype.deleteVertexArrayOES=function(t){t.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(t),1),this.currentVertexArrayObject===t&&this.bindVertexArrayOES(null)},Vi.prototype.isVertexArrayOES=function(t){return!!(t&&t instanceof Ui&&t.hasBeenBound&&t.ext===this)},Vi.prototype.bindVertexArrayOES=function(t){const e=this.gl;if(t&&!t.isAlive)return void Fi(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const n=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=t||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const i=this.currentVertexArrayObject;if(r===i)return;r&&i.elementArrayBuffer===r.elementArrayBuffer||n.bindBuffer.call(e,34963,i.elementArrayBuffer);let o=this.currentArrayBuffer;const s=Math.max(r?r.maxAttrib:0,i.maxAttrib);for(let t=0;t<=s;t++){const s=i.attribs[t],a=r?r.attribs[t]:null;if(r&&s.enabled===a.enabled||(s.enabled?n.enableVertexAttribArray.call(e,t):n.disableVertexAttribArray.call(e,t)),s.enabled){let i=!1;r&&s.buffer===a.buffer||(o!==s.buffer&&(n.bindBuffer.call(e,34962,s.buffer),o=s.buffer),i=!0),(i||s.cached!==a.cached)&&n.vertexAttribPointer.call(e,t,s.size,s.type,s.normalized,s.stride,s.offset)}}this.currentArrayBuffer!==o&&n.bindBuffer.call(e,34962,this.currentArrayBuffer)};const qi="OES_element_index",Wi="WEBGL_draw_buffers",Gi="WEBGL_debug_renderer_info",$i=t=>Ni(t)?void 0:0,Hi={3074:t=>Ni(t)?void 0:36064,35723:t=>Ni(t)?void 0:4352,35977:$i,32937:$i,36795:(t,e)=>{const n=Ni(t)?t.getExtension("EXT_disjoint_timer_query_webgl2"):t.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},37445:(t,e)=>{const n=t.getExtension(Gi);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},37446:(t,e)=>{const n=t.getExtension(Gi);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},34047:(t,e)=>{const n=t.luma.extensions.EXT_texture_filter_anisotropic;return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:$i,35071:$i,37447:$i,36063:(t,e)=>{if(!Ni(t)){const n=t.getExtension(Wi);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:$i,35374:$i,35377:$i,34852:t=>{if(!Ni(t)){const e=t.getExtension(Wi);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension(qi)?2147483647:65535,33001:t=>t.getExtension(qi)?16777216:65535,33e3:t=>16777216,37157:$i,35373:$i,35657:$i,36183:$i,37137:$i,34045:$i,35978:$i,35979:$i,35968:$i,35376:$i,35375:$i,35659:$i,37154:$i,35371:$i,35658:$i,35076:$i,35077:$i,35380:$i};const Zi="ANGLE_instanced_arrays";const Yi={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{Pi(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[Zi]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){Pi(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Pi(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{Pi(!1)},deleteQuery:()=>{Pi(!1)},beginQuery:()=>{Pi(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},Xi={readBuffer:(t,e,n)=>{Ni(t)&&e(n)},getVertexAttrib:(t,e,n,r)=>{const{webgl2:i,ext:o}=function(t,e){return{webgl2:Ni(t),ext:t.getExtension(e)}}(t,Zi);let s;switch(r){case 35069:s=!!i&&void 0;break;case 35070:s=i||o?void 0:0}return void 0!==s?s:e(n,r)},getProgramParameter:(t,e,n,r)=>{if(!Ni(t))switch(r){case 35967:return 35981;case 35971:case 35382:return 0}return e(n,r)},getInternalformatParameter:(t,e,n,r,i)=>Ni(t)||32937!==i?t.getInternalformatParameter(n,r,i):new Int32Array([0]),getTexParameter(t,e,n,r){if(34046===r){const{extensions:e}=t.luma,n=e.EXT_texture_filter_anisotropic;r=n&&n.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(n,r)},getParameter:function(t,e,n){const r=Hi[n],i="function"==typeof r?r(t,e,n):r;return void 0!==i?i:e(n)},hint:(t,e,n,r)=>e(n,r)};function Ki(t,e){let{extension:n,target:r,target2:i}=e;const o=Yi[n];Pi(o);const{meta:s={}}=o,{suffix:a=""}=s,c=t.getExtension(n);for(const e of Object.keys(o)){const n="".concat(e).concat(a);let s=null;"meta"===e||"function"==typeof t[e]||(c&&"function"==typeof c[n]?s=function(){return c[n](...arguments)}:"function"==typeof o[e]&&(s=o[e].bind(r))),s&&(r[e]=s,i[e]=s)}}globalThis.polyfillContext=function(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(!function(t){if("function"==typeof t.createVertexArray)return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const t=e.call(this)||[];return t.indexOf("OES_vertex_array_object")<0&&t.push("OES_vertex_array_object"),t};const n=t.getExtension;t.getExtension=function(e){return n.call(this,e)||("OES_vertex_array_object"!==e?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Vi(this)),this.__OESVertexArrayObject))}}(t),function(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}(t),function(t,e){for(const n of Object.getOwnPropertyNames(e))"overrides"!==n&&Ki(t,{extension:n,target:t.luma,target2:t})}(t,Yi),function(t,e){let{target:n,target2:r}=e;Object.keys(Xi).forEach((e=>{if("function"==typeof Xi[e]){const i=t[e]?t[e].bind(t):()=>{},o=Xi[e].bind(null,t,i);n[e]=o,r[e]=o}}))}(t,{target:e,target2:t}),e.polyfilled=!0),t};const Ji={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},Qi=(t,e,n)=>e?t.enable(n):t.disable(n),to=(t,e,n)=>t.hint(n,e),eo=(t,e,n)=>t.pixelStorei(n,e);function no(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const ro={3042:Qi,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:Qi,2885:(t,e)=>t.cullFace(e),2929:Qi,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:Qi,35723:to,36006:(t,e)=>{const n=Ni(t)?36009:36160;return t.bindFramebuffer(n,e)},2886:(t,e)=>t.frontFace(e),33170:to,2849:(t,e)=>t.lineWidth(e),32823:Qi,32824:"polygonOffset",10752:"polygonOffset",35977:Qi,32938:"sampleCoverage",32939:"sampleCoverage",3089:Qi,3088:(t,e)=>t.scissor(...e),2960:Qi,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:eo,3317:eo,37440:eo,37441:eo,37443:eo,3330:eo,3332:eo,3331:eo,36010:(t,e)=>t.bindFramebuffer(36008,e),3314:eo,32878:eo,3316:eo,3315:eo,32877:eo,framebuffer:(t,e)=>{const n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=no(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=no(e)&&2===e.length?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=no(e)?e:[e,e];const[n,r]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,r)},stencilFunc:(t,e)=>{e=no(e)&&3===e.length?[...e,...e]:e;const[n,r,i,o,s,a]=e;t.stencilFuncSeparate(1028,n,r,i),t.stencilFuncSeparate(1029,o,s,a)},stencilOp:(t,e)=>{e=no(e)&&3===e.length?[...e,...e]:e;const[n,r,i,o,s,a]=e;t.stencilOpSeparate(1028,n,r,i),t.stencilOpSeparate(1029,o,s,a)},viewport:(t,e)=>t.viewport(...e)};function io(t,e,n){return void 0!==e[t]?e[t]:n[t]}const oo={blendEquation:(t,e,n)=>t.blendEquationSeparate(io(32777,e,n),io(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(io(32969,e,n),io(32968,e,n),io(32971,e,n),io(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(io(32824,e,n),io(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(io(32938,e,n),io(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,io(2962,e,n),io(2967,e,n),io(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,io(34816,e,n),io(36003,e,n),io(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,io(2964,e,n),io(2965,e,n),io(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,io(34817,e,n),io(34818,e,n),io(34819,e,n))},so={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},blendColor:(t,e,n,r,i)=>t({32773:new Float32Array([e,n,r,i])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,r,i)=>t({32969:e,32968:n,32971:r,32970:i}),clearColor:(t,e,n,r,i)=>t({3106:new Float32Array([e,n,r,i])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,r,i)=>t({3107:[e,n,r,i]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,r,i)=>t({3088:new Int32Array([e,n,r,i])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[1028===e?2968:36005]:n}),stencilFunc:(t,e,n,r)=>t({2962:e,2967:n,2963:r,34816:e,36003:n,36004:r}),stencilFuncSeparate:(t,e,n,r,i)=>t({[1028===e?2962:34816]:n,[1028===e?2967:36003]:r,[1028===e?2963:36004]:i}),stencilOp:(t,e,n,r)=>t({2964:e,2965:n,2966:r,34817:e,34818:n,34819:r}),stencilOpSeparate:(t,e,n,r,i)=>t({[1028===e?2964:34817]:n,[1028===e?2965:34818]:r,[1028===e?2966:34819]:i}),viewport:(t,e,n,r,i)=>t({2978:[e,n,r,i]})},ao=(t,e)=>t.isEnabled(e),co={3042:ao,2884:ao,2929:ao,3024:ao,32823:ao,32926:ao,32928:ao,3089:ao,2960:ao,35977:ao};function lo(t){for(const e in t)return!1;return!0}function uo(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}return!1}function ho(t,e){const n=t[e].bind(t);t[e]=function(){const e=arguments.length<=0?void 0:arguments[0];return e in t.state.cache&&t.state.enable?t.state.cache[e]:n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function po(t,e,n){const r=t[e].bind(t);t[e]=function(){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];const{valueChanged:s,oldValue:a}=n(t.state._updateCache,...i);return s&&r(...i),a},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}class fo{constructor(t){let{copyState:e=!1,log:n=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.program=null,this.stateStack=[],this.enable=!0,this.cache=e?function(t,e){if("number"==typeof(e=e||Ji)){const n=e,r=co[n];return r?r(t,n):t.getParameter(n)}const n=Array.isArray(e)?e:Object.keys(e),r={};for(const e of n){const n=co[e];r[e]=n?n(t,Number(e)):t.getParameter(Number(e))}return r}(t):Object.assign({},Ji),this.log=n,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){Pi(this.stateStack.length>0);const t=this.stateStack[this.stateStack.length-1];yo(this.gl,t),this.stateStack.pop()}_updateCache(t){let e,n=!1;const r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const i in t){Pi(void 0!==i);const o=t[i],s=this.cache[i];uo(o,s)||(n=!0,e=s,r&&!(i in r)&&(r[i]=s),this.cache[i]=o)}return{valueChanged:n,oldValue:e}}}function go(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{enable:n=!0,copyState:r}=e;if(Pi(void 0!==r),!t.state){const{polyfillContext:e}=globalThis;e&&e(t),t.state=new fo(t,{copyState:r}),function(t){const e=t.useProgram.bind(t);t.useProgram=function(n){t.state.program!==n&&(e(n),t.state.program=n)}}(t);for(const e in so){po(t,e,so[e])}ho(t,"getParameter"),ho(t,"isEnabled")}return t.state.enable=n,t}function mo(t){Pi(t.state),t.state.pop()}function yo(t,e){if(Pi(Ri(t),"setParameters requires a WebGL context"),lo(e))return;const n={};for(const r in e){const i=Number(r),o=ro[r];o&&("string"==typeof o?n[o]=!0:o(t,e[r],i))}const r=t.state&&t.state.cache;if(r)for(const i in n){(0,oo[i])(t,e,r)}}function _o(t,e,n){if(lo(e))return n(t);const{nocatch:r=!0}=e;let i;if(function(t){t.state||go(t,{copyState:!1}),t.state.push()}(t),yo(t,e),r)i=n(t),mo(t);else try{i=n(t)}finally{mo(t)}return i}function vo(t){const{luma:e}=t;if(t.canvas&&e){const n=e.canvasSizeInfo,r="clientWidth"in n?n.clientWidth:t.canvas.clientWidth;return r?t.drawingBufferWidth/r:1}return 1}function xo(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(t,e,n,r,i){const o=bo(t[0],e,n);let s=wo(t[1],e,r,i),a=bo(t[0]+1,e,n);const c=a===n-1?a:a-1;let l;a=wo(t[1]+1,e,r,i),i?(a=0===a?a:a+1,l=s,s=a):l=a===r-1?a:a-1;return{x:o,y:s,width:Math.max(c-o+1,1),height:Math.max(l-s+1,1)}}(e,vo(t),t.drawingBufferWidth,t.drawingBufferHeight,n)}function bo(t,e,n){return Math.min(Math.round(t*e),n-1)}function wo(t,e,n,r){return r?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}var Eo=n(25108);const To=E(),So=To&&"undefined"!=typeof document,ko={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function Ao(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Pi(To,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),t=Object.assign({},ko,t);const{width:e,height:n}=t;function r(e){if(t.throwOnError)throw new Error(e);return Eo.error(e),null}let i;t.onError=r;const{canvas:o}=t,s=function(t){let e,{canvas:n,width:r=800,height:i=600,onError:o}=t;if("string"==typeof n){So&&"complete"===document.readyState||o("createGLContext called on canvas '".concat(n,"' before page was loaded")),e=document.getElementById(n)}else n?e=n:(e=document.createElement("canvas"),e.id="lumagl-canvas",e.style.width=Number.isFinite(r)?"".concat(r,"px"):"100%",e.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",document.body.insertBefore(e,document.body.firstChild));return e}({canvas:o,width:e,height:n,onError:r});return i=function(t,e){const{onError:n}=e;let r=null;const i=t=>r=t.statusMessage||r;t.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:o=!0,webgl2:s=!0}=e;let a=null;s&&(a=a||t.getContext("webgl2",e),a=a||t.getContext("experimental-webgl2",e));o&&(a=a||t.getContext("webgl",e),a=a||t.getContext("experimental-webgl",e));if(t.removeEventListener("webglcontextcreationerror",i,!1),!a)return n("Failed to create ".concat(s&&!o?"WebGL2":"WebGL"," context: ").concat(r||"Unknown error"));e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1);e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1);return a}(s,t),i?(i=Mo(i,t),function(t){const e=Ni(t)?"WebGL2":"WebGL1",n=function(t){const e=t.getParameter(7936),n=t.getParameter(7937),r=t.getExtension("WEBGL_debug_renderer_info"),i=r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL||7936),o=r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||e,renderer:o||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",i=t.debug?" debug":"";Oi.info(1,"".concat(e).concat(i," context ").concat(r))()}(i),i):null}function Mo(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||function(t){if("undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext)return 2;return 1}(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},ko,e);const{manageState:n,debug:r}=e;return n&&go(t,{copyState:!1,log:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Oi.log(1,...e)()}}),To&&r&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),Oi.level=Math.max(Oi.level,1)):Oi.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function Io(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.canvas){return void function(t,e,n){let r="width"in n?n.width:t.canvas.clientWidth,i="height"in n?n.height:t.canvas.clientHeight;r&&i||(Oi.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=t.canvas.width||1,i=t.canvas.height||1);t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const o=t.luma.canvasSizeInfo;if(o.clientWidth!==r||o.clientHeight!==i||o.devicePixelRatio!==e){let n=e;const o=Math.floor(r*n),s=Math.floor(i*n);t.canvas.width=o,t.canvas.height=s,t.drawingBufferWidth===o&&t.drawingBufferHeight===s||(Oi.warn("Device pixel ratio clamped")(),n=Math.min(t.drawingBufferWidth/r,t.drawingBufferHeight/i),t.canvas.width=Math.floor(r*n),t.canvas.height=Math.floor(i*n)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:e})}}(t,function(t){const e="undefined"==typeof window?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}(e.useDevicePixels),e)}const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}const Co="8.5.21";const Oo=new class{constructor(){this.stats=new Map}get(t){return this.stats.has(t)||this.stats.set(t,new et({id:t})),this.stats.get(t)}};if(globalThis.luma&&globalThis.luma.VERSION!==Co)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(Co));globalThis.luma||(E()&&Oi.log(1,"luma.gl ".concat(Co," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),globalThis.luma=globalThis.luma||{VERSION:Co,version:Co,log:Oi,stats:Oo,globals:{modules:{},nodeIO:{}}});globalThis.luma;function Po(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function Lo(t,e){if("string"!=typeof e)return e;const n=Number(e);if(!isNaN(n))return n;const r=t[e=e.replace(/^.*\./,"")];return Po(void 0!==r,"Accessing undefined constant GL.".concat(e)),r}function Do(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}const Ro={};function No(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";Ro[t]=Ro[t]||1;const e=Ro[t]++;return"".concat(t,"-").concat(e)}function jo(t){return Po("number"==typeof t,"Input must be a number"),t&&0==(t&t-1)}function zo(t){let e=!0;for(const n in t){e=!1;break}return e}function Bo(t,e,n,r){const i="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(t);r.forEach((t=>{o.methodName||(o[t]=()=>{throw Oi.removed("Calling removed method ".concat(e,".").concat(t,": "),i)(),new Error(t)})}))}const Fo="Resource subclass must define virtual methods";class Uo{get[Symbol.toStringTag](){return"Resource"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ji(t);const{id:n,userData:r={}}=e;this.gl=t,this.gl2=t,this.id=n||No(this[Symbol.toStringTag]),this.userData=r,this._bound=!1,this._handle=e.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,e&&t&&e.filter(Boolean).forEach((t=>t.delete())),this}bind(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof e?(this._bindHandle(e),this):(this._bound?t=e():(this._bindHandle(this.handle),this._bound=!0,t=e(),this._bound=!1,this._bindHandle(null)),t)}unbind(){this.bind(null)}getParameter(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Po(t=Lo(this.gl,t));const n=(this.constructor.PARAMETERS||{})[t];if(n){const t=Ni(this.gl);if(!((!("webgl2"in n)||t)&&(!("extension"in n)||this.gl.getExtension(n.extension)))){const e=n.webgl1,r="webgl2"in n?n.webgl2:n.webgl1;return t?r:e}}return this._getParameter(t,e)}getParameters(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{parameters:e,keys:n}=t,r=this.constructor.PARAMETERS||{},i=Ni(this.gl),o={},s=e||Object.keys(r);for(const e of s){const s=r[e];if(s&&(!("webgl2"in s)||i)&&(!("extension"in s)||this.gl.getExtension(s.extension))){const r=n?Do(this.gl,e):e;o[r]=this.getParameter(e,t),n&&"GLenum"===s.type&&(o[r]=Do(this.gl,o[r]))}}return o}setParameter(t,e){Po(t=Lo(this.gl,t));const n=(this.constructor.PARAMETERS||{})[t];if(n){const t=Ni(this.gl);if(!((!("webgl2"in n)||t)&&(!("extension"in n)||this.gl.getExtension(n.extension))))throw new Error("Parameter not available on this platform");"GLenum"===n.type&&(e=Lo(e))}return this._setParameter(t,e),this}setParameters(t){for(const e in t)this.setParameter(e,t[e]);return this}stubRemovedMethods(t,e,n){return Bo(this,t,e,n)}initialize(t){}_createHandle(){throw new Error(Fo)}_deleteHandle(){throw new Error(Fo)}_bindHandle(t){throw new Error(Fo)}_getOptsFromHandle(){throw new Error(Fo)}_getParameter(t,e){throw new Error(Fo)}_setParameter(t,e){throw new Error(Fo)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const t=this[Symbol.toStringTag],e=Oo.get("Resource Counts");e.get("Resources Created").incrementCount(),e.get("".concat(t,"s Created")).incrementCount(),e.get("".concat(t,"s Active")).incrementCount()}_removeStats(){const t=this[Symbol.toStringTag];Oo.get("Resource Counts").get("".concat(t,"s Active")).decrementCount()}_trackAllocatedMemory(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(t,e),this._trackAllocatedMemoryForContext(t,e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=t}_trackAllocatedMemoryForContext(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const r=Oo.get("Memory Usage".concat(n));r.get("GPU Memory").addCount(t),r.get("".concat(e," Memory")).addCount(t)}_trackDeallocatedMemory(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(t),this._trackDeallocatedMemoryForContext(t,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=Oo.get("Memory Usage".concat(e));n.get("GPU Memory").subtractCount(this.byteLength),n.get("".concat(t," Memory")).subtractCount(this.byteLength)}}const Vo="Failed to deduce GL constant from typed array";function qo(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(Vo)}}function Wo(t){let{clamped:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Go(t){let{data:e,width:n,height:r}=t;const i=Math.round(n/2),o=Math.round(r/2),s=new Uint8Array(i*o*4);for(let t=0;t<o;t++)for(let r=0;r<i;r++)for(let o=0;o<4;o++)s[4*(t*i+r)+o]=e[4*(2*t*n+2*r)+o];return{data:s,width:i,height:o}}function $o(t,e,n){const{removedProps:r={},deprecatedProps:i={},replacedProps:o={}}=n;for(const n in r)if(n in e){const e=r[n]?"".concat(t,".").concat(r[n]):"N/A";Oi.removed("".concat(t,".").concat(n),e)()}for(const n in i)if(n in e){const e=i[n];Oi.deprecated("".concat(t,".").concat(n),"".concat(t,".").concat(e))()}let s=null;for(const n in o)if(n in e){const r=o[n];Oi.deprecated("".concat(t,".").concat(n),"".concat(t,".").concat(r))(),s=s||Object.assign({},e),s[r]=e[n],delete s[n]}return s||e}const Ho={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},Zo={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class Yo{static getBytesPerElement(t){return Wo(t.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(t){Po(t.size);return Wo(t.type||5126).BYTES_PER_ELEMENT*t.size}static resolve(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new Yo(...[Ho,...e])}constructor(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach((t=>this._assign(t))),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Yo.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Yo.getBytesPerVertex(this)}_assign(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=$o("Accessor",t,Zo),void 0!==t.type&&(this.type=t.type,5124!==t.type&&5125!==t.type||(this.integer=!0)),void 0!==t.size&&(this.size=t.size),void 0!==t.offset&&(this.offset=t.offset),void 0!==t.stride&&(this.stride=t.stride),void 0!==t.normalized&&(this.normalized=t.normalized),void 0!==t.integer&&(this.integer=t.integer),void 0!==t.divisor&&(this.divisor=t.divisor),void 0!==t.buffer&&(this.buffer=t.buffer),void 0!==t.index&&("boolean"==typeof t.index?this.index=t.index?1:0:this.index=t.index),void 0!==t.instanced&&(this.divisor=t.instanced?1:0),void 0!==t.isInstanced&&(this.divisor=t.isInstanced?1:0),this}}const Xo={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},Ko={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:Xo},Jo={removedProps:Xo};class Qo extends Uo{get[Symbol.toStringTag](){return"Buffer"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=e.target||(this.gl.webgl2?36662:34962),this.initialize(e),Object.seal(this)}getElementCount(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/Yo.getBytesPerElement(t))}getVertexCount(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/Yo.getBytesPerVertex(t))}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(t)&&(t={data:t}),Number.isFinite(t)&&(t={byteLength:t}),t=$o("Buffer",t,Ko),this.usage=t.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},t,t.accessor)),t.data?this._setData(t.data,t.offset,t.byteLength):this._setByteLength(t.byteLength||0),this}setProps(t){return"accessor"in(t=$o("Buffer",t,Jo))&&this.setAccessor(t.accessor),this}setAccessor(t){return delete(t=Object.assign({},t)).buffer,this.accessor=new Yo(t),this}reallocate(t){return t>this.byteLength?(this._setByteLength(t),!0):(this.bytesUsed=t,!1)}setData(t){return this.initialize(t)}subData(t){ArrayBuffer.isView(t)&&(t={data:t});const{data:e,offset:n=0,srcOffset:r=0}=t,i=t.byteLength||t.length;Po(e);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),0!==r||void 0!==i?(zi(this.gl),this.gl.bufferSubData(this.target,n,e,r,i)):this.gl.bufferSubData(o,n,e),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(e),this}copyData(t){let{sourceBuffer:e,readOffset:n=0,writeOffset:r=0,size:i}=t;const{gl:o}=this;return zi(o),o.bindBuffer(36662,e.handle),o.bindBuffer(36663,this.handle),o.copyBufferSubData(36662,36663,n,r,i),o.bindBuffer(36662,null),o.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:t=null,srcByteOffset:e=0,dstOffset:n=0,length:r=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};zi(this.gl);const i=Wo(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(e),s=n;let a,c;t?(c=t.length,a=c-s):(a=Math.min(o,r||o),c=s+a);const l=Math.min(o,a);return r=r||l,Po(r<=l),t=t||new i(c),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,e,t,n,r),this.gl.bindBuffer(36662,null),t}bind(){let{target:t=this.target,index:e=this.accessor&&this.accessor.index,offset:n=0,size:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===t||35982===t?void 0!==r?this.gl.bindBufferRange(t,e,this.handle,n,r):(Po(0===n),this.gl.bindBufferBase(t,e,this.handle)):this.gl.bindBuffer(t,this.handle),this}unbind(){let{target:t=this.target,index:e=this.accessor&&this.accessor.index}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===t||35982===t?this.gl.bindBufferBase(t,e,null):this.gl.bindBuffer(t,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.byteLength+e;Po(ArrayBuffer.isView(t)),this._trackDeallocatedMemory();const r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,this.usage),this.gl.bufferSubData(r,e,t),this.gl.bindBuffer(r,null),this.debugData=t.slice(0,10),this.bytesUsed=n,this._trackAllocatedMemory(n);const i=qo(t);return Po(i),this.setAccessor(new Yo(this.accessor,{type:i})),this}_setByteLength(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Po(t>=0),this._trackDeallocatedMemory();let n=t;0===t&&(n=new Float32Array(0));const r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,e),this.gl.bindBuffer(r,null),this.usage=e,this.debugData=null,this.bytesUsed=t,this._trackAllocatedMemory(t),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(t){const e=t/Wo(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-e}_inferType(t){this.accessor.type||this.setAccessor(new Yo(this.accessor,{type:qo(t)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(t){this.gl.bindBuffer(this.target,this.handle);const e=this.gl.getBufferParameter(this.target,t);return this.gl.bindBuffer(this.target,null),e}get type(){return Oi.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return Oi.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(t){return Oi.deprecated("setByteLength","reallocate")(),this.reallocate(t)}updateAccessor(t){return Oi.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new Yo(this.accessor,t),this}}const ts={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},es={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},ns={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};const rs=[9729,9728],is=globalThis.WebGLBuffer||function(){};class os extends Uo{get[Symbol.toStringTag](){return"Texture"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{format:n,linearFiltering:r}=e;let i=!0;return n&&(i=i&&function(t,e){const n=ts[e];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;const r=Ni(t)&&n.gl2||n.gl1;return"string"==typeof r?t.getExtension(r):r}(t,n),i=i&&(!r||function(t,e){const n=ts[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}(t,n))),i}constructor(t,e){const{id:n=No("texture"),handle:r,target:i}=e;super(t,{id:n,handle:r}),this.target=i,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.data;if(e instanceof Promise)return e.then((e=>this.initialize(Object.assign({},t,{pixels:e,data:e})))),this;const n="undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement;if(n&&e.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,e.addEventListener("loadeddata",(()=>this.initialize(t))),this;const{pixels:r=null,format:i=6408,border:o=0,recreate:s=!1,parameters:a={},pixelStore:c={},textureUnit:l}=t;e||(e=r);let{width:u,height:h,dataFormat:p,type:f,compressed:d=!1,mipmaps:g=!0}=t;const{depth:m=0}=t;return({width:u,height:h,compressed:d,dataFormat:p,type:f}=this._deduceParameters({format:i,type:f,dataFormat:p,compressed:d,data:e,width:u,height:h})),this.width=u,this.height=h,this.depth=m,this.format=i,this.type=f,this.dataFormat=p,this.border=o,this.textureUnit=l,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),g&&this._isNPOT()&&(Oi.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),g=!1,this._updateForNPOT(a)),this.mipmaps=g,this.setImageData({data:e,width:u,height:h,depth:m,format:i,type:f,dataFormat:p,border:o,mipmaps:g,parameters:c,compressed:d}),g&&this.generateMipmap(),this.setParameters(a),s&&(this.data=e),n&&(this._video={video:e,parameters:a,lastTime:e.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?e.currentTime:-1}),this}update(){if(this._video){const{video:t,parameters:e,lastTime:n}=this._video;if(n===t.currentTime||t.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:t,parameters:e}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=t.currentTime}}resize(t){let{height:e,width:n,mipmaps:r=!1}=t;return n!==this.width||e!==this.height?this.initialize({width:n,height:e,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:r}):this}generateMipmap(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(Oi.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),_o(this.gl,t,(()=>{this.gl.generateMipmap(this.target)})),this.gl.bindTexture(this.target,null),this)}setImageData(t){this._trackDeallocatedMemory("Texture");const{target:e=this.target,pixels:n=null,level:r=0,format:i=this.format,border:o=this.border,offset:s=0,parameters:a={}}=t;let{data:c=null,type:l=this.type,width:u=this.width,height:h=this.height,dataFormat:p=this.dataFormat,compressed:f=!1}=t;c||(c=n),({type:l,dataFormat:p,compressed:f,width:u,height:h}=this._deduceParameters({format:i,type:l,dataFormat:p,compressed:f,data:c,width:u,height:h}));const{gl:d}=this;d.bindTexture(this.target,this.handle);let g,m=null;({data:c,dataType:m}=this._getDataType({data:c,compressed:f}));let y=0;if(_o(this.gl,a,(()=>{switch(m){case"null":d.texImage2D(e,r,i,u,h,o,p,l,c);break;case"typed-array":d.texImage2D(e,r,i,u,h,o,p,l,c,s);break;case"buffer":g=zi(d),g.bindBuffer(35052,c.handle||c),g.texImage2D(e,r,i,u,h,o,p,l,s),g.bindBuffer(35052,null);break;case"browser-object":Ni(d)?d.texImage2D(e,r,i,u,h,o,p,l,c):d.texImage2D(e,r,i,p,l,c);break;case"compressed":for(const[t,n]of c.entries())d.compressedTexImage2D(e,t,n.format,n.width,n.height,o,n.data),y+=n.levelSize;break;default:Po(!1,"Unknown image data type")}})),"compressed"===m)this._trackAllocatedMemory(y,"Texture");else if(c&&c.byteLength)this._trackAllocatedMemory(c.byteLength,"Texture");else{const t=es[this.dataFormat]||4,e=ns[this.type]||1;this._trackAllocatedMemory(this.width*this.height*t*e,"Texture")}return this.loaded=!0,this}setSubImageData(t){let{target:e=this.target,pixels:n=null,data:r=null,x:i=0,y:o=0,width:s=this.width,height:a=this.height,level:c=0,format:l=this.format,type:u=this.type,dataFormat:h=this.dataFormat,compressed:p=!1,offset:f=0,border:d=this.border,parameters:g={}}=t;if(({type:u,dataFormat:h,compressed:p,width:s,height:a}=this._deduceParameters({format:l,type:u,dataFormat:h,compressed:p,data:r,width:s,height:a})),Po(0===this.depth,"texSubImage not supported for 3D textures"),r||(r=n),r&&r.data){const t=r;r=t.data,s=t.shape[0],a=t.shape[1]}r instanceof Qo&&(r=r.handle),this.gl.bindTexture(this.target,this.handle),_o(this.gl,g,(()=>{if(p)this.gl.compressedTexSubImage2D(e,c,i,o,s,a,l,r);else if(null===r)this.gl.texSubImage2D(e,c,i,o,s,a,h,u,null);else if(ArrayBuffer.isView(r))this.gl.texSubImage2D(e,c,i,o,s,a,h,u,r,f);else if(r instanceof is){const t=zi(this.gl);t.bindBuffer(35052,r),t.texSubImage2D(e,c,i,o,s,a,h,u,f),t.bindBuffer(35052,null)}else if(Ni(this.gl)){zi(this.gl).texSubImage2D(e,c,i,o,s,a,h,u,r)}else this.gl.texSubImage2D(e,c,i,o,h,u,r)})),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return Oi.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:e}=this;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,this.handle),t}unbind(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:e}=this;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,null),t}_getDataType(t){let{data:e,compressed:n=!1}=t;return n?{data:e,dataType:"compressed"}:null===e?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:e instanceof Qo?{data:e.handle,dataType:"buffer"}:e instanceof is?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}}_deduceParameters(t){const{format:e,data:n}=t;let{width:r,height:i,dataFormat:o,type:s,compressed:a}=t;const c=ts[e];return o=o||c&&c.dataFormat,s=s||c&&c.types[0],a=a||c&&c.compressed,({width:r,height:i}=this._deduceImageSize(n,r,i)),{dataFormat:o,type:s,compressed:a,width:r,height:i,format:e,data:n}}_deduceImageSize(t,e,n){let r;return r="undefined"!=typeof ImageData&&t instanceof ImageData?{width:t.width,height:t.height}:"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement?{width:t.naturalWidth,height:t.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?{width:t.width,height:t.height}:"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement?{width:t.videoWidth,height:t.videoHeight}:t?{width:e,height:n}:{width:e>=0?e:1,height:n>=0?n:1},Po(r,"Could not deduced texture size"),Po(void 0===e||r.width===e,"Deduced texture width does not match supplied width"),Po(void 0===n||r.height===n,"Deduced texture height does not match supplied height"),r}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(t){switch(t){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const e=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),e}}_setParameter(t,e){switch(this.gl.bindTexture(this.target,this.handle),e=this._getNPOTParam(t,e),t){case 33082:case 33083:this.gl.texParameterf(this.handle,t,e);break;case 4096:case 4097:Po(!1);break;default:this.gl.texParameteri(this.target,t,e)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!Ni(this.gl)&&(!(!this.width||!this.height)&&(!jo(this.width)||!jo(this.height)))}_updateForNPOT(t){void 0===t[this.gl.TEXTURE_MIN_FILTER]&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===t[this.gl.TEXTURE_WRAP_S]&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===t[this.gl.TEXTURE_WRAP_T]&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(t,e){if(this._isNPOT())switch(t){case 10241:-1===rs.indexOf(e)&&(e=9729);break;case 10242:case 10243:33071!==e&&(e=33071)}return e}}let ss="";class as extends os{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(t,e){return os.isSupported(t,e)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r;ji(t),(e instanceof Promise||"string"==typeof e)&&(e={data:e}),"string"==typeof e.data&&(e=Object.assign({},e,{data:(n=e.data,Po("string"==typeof n),n=ss+n,new Promise(((t,e)=>{try{const i=new Image;i.onload=()=>t(i),i.onerror=()=>e(new Error("Could not load image ".concat(n,"."))),i.crossOrigin=r&&r.crossOrigin||"anonymous",i.src=n}catch(t){e(t)}})))})),super(t,Object.assign({},e,{target:3553})),this.initialize(e),Object.seal(this)}}const cs="EXT_color_buffer_float";var ls={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:cs,bpp:2},33327:{gl2:cs,bpp:4},34842:{gl2:cs,bpp:8},33326:{gl2:cs,bpp:4},33328:{gl2:cs,bpp:8},34836:{gl2:cs,bpp:16},35898:{gl2:cs,bpp:4}};class us extends Uo{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(t){let{format:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null};return!e||function(t,e,n){const r=n[e];if(!r)return!1;const i=Ni(t)&&r.gl2||r.gl1;return"string"==typeof i?t.getExtension(i):i}(t,e,ls)}static getSamplesForFormat(t,e){let{format:n}=e;return t.getInternalformatParameter(36161,n,32937)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.initialize(e),Object.seal(this)}initialize(t){let{format:e,width:n=1,height:r=1,samples:i=0}=t;return Po(e,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==i&&Ni(this.gl)?this.gl.renderbufferStorageMultisample(36161,i,e,n,r):this.gl.renderbufferStorage(36161,e,n,r),this.format=e,this.width=n,this.height=r,this.samples=i,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*ls[this.format].bpp),this}resize(t){let{width:e,height:n}=t;return e!==this.width||n!==this.height?this.initialize({width:e,height:n,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(t){this.gl.bindRenderbuffer(36161,t)}_syncHandle(t){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(t){this.gl.bindRenderbuffer(36161,this.handle);return this.gl.getRenderbufferParameter(36161,t)}}const hs=6144,ps="clear: bad arguments";function fs(t){let{framebuffer:e=null,color:n=null,depth:r=null,stencil:i=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o={};e&&(o.framebuffer=e);let s=0;n&&(s|=16384,!0!==n&&(o.clearColor=n)),r&&(s|=256,!0!==r&&(o.clearDepth=r)),i&&(s|=1024,!0!==r&&(o.clearStencil=r)),Po(0!==s,ps),_o(t,o,(()=>{t.clear(s)}))}const ds=[34069,34070,34071,34072,34073,34074];class gs extends os{get[Symbol.toStringTag](){return"TextureCube"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ji(t),super(t,Object.assign({},e,{target:34067})),this.initialize(e),Object.seal(this)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mipmaps:e=!0,parameters:n={}}=t;return this.opts=t,this.setCubeMapImageData(t).then((()=>{this.loaded=!0,e&&this.generateMipmap(t),this.setParameters(n)})),this}subImage(t){let{face:e,data:n,x:r=0,y:i=0,mipmapLevel:o=0}=t;return this._subImage({target:e,data:n,x:r,y:i,mipmapLevel:o})}async setCubeMapImageData(t){let{width:e,height:n,pixels:r,data:i,border:o=0,format:s=6408,type:a=5121}=t;const{gl:c}=this,l=r||i,u=await Promise.all(ds.map((t=>{const e=l[t];return Promise.all(Array.isArray(e)?e:[e])})));this.bind(),ds.forEach(((t,r)=>{u[r].length>1&&!1!==this.opts.mipmaps&&Oi.warn("".concat(this.id," has mipmap and multiple LODs."))(),u[r].forEach(((r,i)=>{e&&n?c.texImage2D(t,i,s,e,n,o,s,a,r):c.texImage2D(t,i,s,s,a,r)}))})),this.unbind()}setImageDataForFace(t){const{face:e,width:n,height:r,pixels:i,data:o,border:s=0,format:a=6408,type:c=5121}=t,{gl:l}=this,u=i||o;return this.bind(),u instanceof Promise?u.then((n=>this.setImageDataForFace(Object.assign({},t,{face:e,data:n,pixels:n})))):this.width||this.height?l.texImage2D(e,0,a,n,r,s,a,c,u):l.texImage2D(e,0,a,a,c,u),this}}gs.FACES=ds;class ms extends os{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(t){return Ni(t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};zi(t),e=Object.assign({depth:1},e,{target:32879,unpackFlipY:!1}),super(t,e),this.initialize(e),Object.seal(this)}setImageData(t){let{level:e=0,dataFormat:n=6408,width:r,height:i,depth:o=1,border:s=0,format:a,type:c=5121,offset:l=0,data:u,parameters:h={}}=t;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),_o(this.gl,h,(()=>{ArrayBuffer.isView(u)&&this.gl.texImage3D(this.target,e,n,r,i,o,s,a,c,u),u instanceof Qo&&(this.gl.bindBuffer(35052,u.handle),this.gl.texImage3D(this.target,e,n,r,i,o,s,a,c,l))})),u&&u.byteLength)this._trackAllocatedMemory(u.byteLength,"Texture");else{const t=es[this.dataFormat]||4,e=ns[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*t*e,"Texture")}return this.loaded=!0,this}}function ys(t,e){const{gl:n,width:r,height:i,id:o}=t;return new Ms(n,Object.assign({},e,{id:"framebuffer-for-".concat(o),width:r,height:i,attachments:{36064:t}}))}function _s(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sourceX:n=0,sourceY:r=0,sourceFormat:i=6408}=e;let{sourceAttachment:o=36064,target:s=null,sourceWidth:a,sourceHeight:c,sourceType:l}=e;const{framebuffer:u,deleteFramebuffer:h}=xs(t);Po(u);const{gl:p,handle:f,attachments:d}=u;a=a||u.width,c=c||u.height,36064===o&&null===f&&(o=1028),Po(d[o]),l=l||d[o].type,s=function(t,e,n,r,i){if(t)return t;const o=Wo(e=e||5121,{clamped:!1}),s=function(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Po(!1),0}}(n);return new o(r*i*s)}(s,l,i,a,c),l=l||qo(s);const g=p.bindFramebuffer(36160,f);return p.readPixels(n,r,a,c,i,l,s),p.bindFramebuffer(36160,g||null),h&&u.delete(),s}function vs(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=_s(t,{sourceAttachment:e}),{width:i,height:o}=t;for(;o>n;)({data:r,width:i,height:o}=Go({data:r,width:i,height:o}));!function(t){let{data:e,width:n,height:r,bytesPerPixel:i=4,temp:o}=t;const s=n*i;o=o||new Uint8Array(s);for(let t=0;t<r/2;++t){const n=t*s,i=(r-t-1)*s;o.set(e.subarray(n,n+s)),e.copyWithin(n,i,i+s),e.set(o,i)}}({data:r,width:i,height:o});const s=document.createElement("canvas");s.width=i,s.height=o;const a=s.getContext("2d"),c=a.createImageData(i,o);return c.data.set(r),a.putImageData(c,0,0),s.toDataURL()}function xs(t){return t instanceof Ms?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:ys(t),deleteFramebuffer:!0}}const bs="TIMER_QUERY",ws="ELEMENT_INDEX_UINT32";var Es={["WEBGL2"]:[!1,!0],["VERTEX_ARRAY_OBJECT"]:["OES_vertex_array_object",!0],[bs]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],["INSTANCED_RENDERING"]:["ANGLE_instanced_arrays",!0],["MULTIPLE_RENDER_TARGETS"]:["WEBGL_draw_buffers",!0],[ws]:["OES_element_index_uint",!0],["BLEND_EQUATION_MINMAX"]:["EXT_blend_minmax",!0],["FLOAT_BLEND"]:["EXT_float_blend"],["COLOR_ENCODING_SRGB"]:["EXT_sRGB",!0],["TEXTURE_DEPTH"]:["WEBGL_depth_texture",!0],["TEXTURE_FLOAT"]:["OES_texture_float",!0],["TEXTURE_HALF_FLOAT"]:["OES_texture_half_float",!0],["TEXTURE_FILTER_LINEAR_FLOAT"]:["OES_texture_float_linear"],["TEXTURE_FILTER_LINEAR_HALF_FLOAT"]:["OES_texture_half_float_linear"],["TEXTURE_FILTER_ANISOTROPIC"]:["EXT_texture_filter_anisotropic"],["COLOR_ATTACHMENT_RGBA32F"]:[function(t){const e=new as(t,{format:6408,type:5126,dataFormat:6408}),n=new Ms(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),r=n.getStatus();return e.delete(),n.delete(),36053===r},"EXT_color_buffer_float"],["COLOR_ATTACHMENT_FLOAT"]:[!1,"EXT_color_buffer_float"],["COLOR_ATTACHMENT_HALF_FLOAT"]:["EXT_color_buffer_half_float"],["GLSL_FRAG_DATA"]:["WEBGL_draw_buffers",!0],["GLSL_FRAG_DEPTH"]:["EXT_frag_depth",!0],["GLSL_DERIVATIVES"]:["OES_standard_derivatives",!0],["GLSL_TEXTURE_LOD"]:["EXT_shader_texture_lod",!0]};const Ts=2;function Ss(t,e){return(e=Array.isArray(e)?e:[e]).every((e=>ks(t,e)))}function ks(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},void 0===t.luma.caps[e]&&(t.luma.caps[e]=function(t,e){const n=Es[e];let r;Po(n,e);const i=Ni(t)&&n[1]||n[0];if("function"==typeof i)r=i(t);else if(Array.isArray(i)){r=!0;for(const e of i)r=r&&Boolean(t.getExtension(e))}else"string"==typeof i?r=Boolean(t.getExtension(i)):"boolean"==typeof i?r=i:Po(!1);return r}(t,e)),t.luma.caps[e]||Oi.log(Ts,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}const As="Multiple render targets not supported";class Ms extends Uo{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{colorBufferFloat:n,colorBufferHalfFloat:r}=e;let i=!0;return n&&(i=Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("WEBGL_color_buffer_float")||t.getExtension("OES_texture_float"))),r&&(i=i&&Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("EXT_color_buffer_half_float"))),i}static getDefaultFramebuffer(t){return t.luma=t.luma||{},t.luma.defaultFramebuffer=t.luma.defaultFramebuffer||new Ms(t,{id:"default-framebuffer",handle:null,attachments:{}}),t.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const t=zi(this.gl);return t.getParameter(t.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const t=zi(this.gl);return t.getParameter(t.MAX_DRAW_BUFFERS)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(e),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(t){let{width:e=1,height:n=1,attachments:r=null,color:i=!0,depth:o=!0,stencil:s=!1,check:a=!0,readBuffer:c,drawBuffers:l}=t;if(Po(e>=0&&n>=0,"Width and height need to be integers"),this.width=e,this.height=n,r)for(const t in r){const i=r[t];(Array.isArray(i)?i[0]:i).resize({width:e,height:n})}else r=this._createDefaultAttachments(i,o,s,e,n);this.update({clearAttachments:!0,attachments:r,readBuffer:c,drawBuffers:l}),r&&a&&this.checkStatus()}delete(){for(const t of this.ownResources)t.delete();return super.delete(),this}update(t){let{attachments:e={},readBuffer:n,drawBuffers:r,clearAttachments:i=!1,resizeAttachments:o=!0}=t;this.attach(e,{clearAttachments:i,resizeAttachments:o});const{gl:s}=this,a=s.bindFramebuffer(36160,this.handle);return n&&this._setReadBuffer(n),r&&this._setDrawBuffers(r),s.bindFramebuffer(36160,a||null),this}resize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{width:e,height:n}=t;if(null===this.handle)return Po(void 0===e&&void 0===n),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===e&&(e=this.gl.drawingBufferWidth),void 0===n&&(n=this.gl.drawingBufferHeight),e!==this.width&&n!==this.height&&Oi.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(e,"x").concat(n))();for(const t in this.attachments)this.attachments[t].resize({width:e,height:n});return this.width=e,this.height=n,this}attach(t){let{clearAttachments:e=!1,resizeAttachments:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={};e&&Object.keys(this.attachments).forEach((t=>{r[t]=null})),Object.assign(r,t);const i=this.gl.bindFramebuffer(36160,this.handle);for(const t in r){Po(void 0!==t,"Misspelled framebuffer binding point?");const e=Number(t),i=r[e];let o=i;if(o)if(o instanceof us)this._attachRenderbuffer({attachment:e,renderbuffer:o});else if(Array.isArray(i)){const[t,n=0,r=0]=i;o=t,this._attachTexture({attachment:e,texture:t,layer:n,level:r})}else this._attachTexture({attachment:e,texture:o,layer:0,level:0});else this._unattach(e);n&&o&&o.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,i||null),Object.assign(this.attachments,t),Object.keys(this.attachments).filter((t=>!this.attachments[t])).forEach((t=>{delete this.attachments[t]}))}checkStatus(){const{gl:t}=this,e=this.getStatus();if(36053!==e)throw new Error(function(t){return(Ms.STATUS||{})[t]||"Framebuffer error ".concat(t)}(e));return this}getStatus(){const{gl:t}=this,e=t.bindFramebuffer(36160,this.handle),n=t.checkFramebufferStatus(36160);return t.bindFramebuffer(36160,e||null),n}clear(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{color:e,depth:n,stencil:r,drawBuffers:i=[]}=t,o=this.gl.bindFramebuffer(36160,this.handle);return(e||n||r)&&fs(this.gl,{color:e,depth:n,stencil:r}),i.forEach(((t,e)=>{!function(t){let{framebuffer:e=null,buffer:n=hs,drawBuffer:r=0,value:i=[0,0,0,0]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};zi(t),_o(t,{framebuffer:e},(()=>{switch(n){case hs:switch(i.constructor){case Int32Array:t.clearBufferiv(n,r,i);break;case Uint32Array:t.clearBufferuiv(n,r,i);break;case Float32Array:default:t.clearBufferfv(n,r,i)}break;case 6145:t.clearBufferfv(6145,0,[i]);break;case 6146:t.clearBufferiv(6146,0,[i]);break;case 34041:const[e,o]=i;t.clearBufferfi(34041,0,e,o);break;default:Po(!1,ps)}}))}(this.gl,{drawBuffer:e,value:t})})),this.gl.bindFramebuffer(36160,o||null),this}readPixels(){return Oi.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return Oi.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return Oi.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return Oi.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return Oi.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return Oi.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(t){let{attachments:e=[],x:n=0,y:r=0,width:i,height:o}=t;const s=zi(this.gl),a=s.bindFramebuffer(36008,this.handle);return 0===n&&0===r&&void 0===i&&void 0===o?s.invalidateFramebuffer(36008,e):s.invalidateFramebuffer(36008,e,n,r,i,o),s.bindFramebuffer(36008,a),this}getAttachmentParameter(t,e,n){let r=this._getAttachmentParameterFallback(e);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,t,e),this.gl.bindFramebuffer(36160,null)),n&&r>1e3&&(r=Do(this.gl,r)),r}getAttachmentParameters(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const r={};for(const i of n){r[e?Do(this.gl,i):i]=this.getAttachmentParameter(t,i,e)}return r}getParameters(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=Object.keys(this.attachments),n={};for(const r of e){const e=Number(r);n[t?Do(this.gl,e):e]=this.getAttachmentParameters(e,t)}return n}show(){return"undefined"!=typeof window&&window.open(vs(this),"luma-debug-texture"),this}log(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t>Oi.level||"undefined"==typeof window)return this;e=e||"Framebuffer ".concat(this.id);const n=vs(this,{targetMaxHeight:100});return Oi.image({logLevel:t,message:e,image:n},e)(),this}bind(){let{target:t=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(t,this.handle),this}unbind(){let{target:t=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(t,null),this}_createDefaultAttachments(t,e,n,r,i){let o=null;return t&&(o=o||{},o[36064]=new as(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:i,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),e&&n?(o=o||{},o[33306]=new us(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}),this.ownResources.push(o[33306])):e?(o=o||{},o[36096]=new us(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:i}),this.ownResources.push(o[36096])):n&&Po(!1),o}_unattach(t){const e=this.attachments[t];e&&(e instanceof us?this.gl.framebufferRenderbuffer(36160,t,36161,null):this.gl.framebufferTexture2D(36160,t,3553,null,0),delete this.attachments[t])}_attachRenderbuffer(t){let{attachment:e=36064,renderbuffer:n}=t;const{gl:r}=this;r.framebufferRenderbuffer(36160,e,36161,n.handle),this.attachments[e]=n}_attachTexture(t){let{attachment:e=36064,texture:n,layer:r,level:i}=t;const{gl:o}=this;switch(o.bindTexture(n.target,n.handle),n.target){case 35866:case 32879:zi(o).framebufferTextureLayer(36160,e,n.target,i,r);break;case 34067:const t=function(t){return t<34069?t+34069:t}(r);o.framebufferTexture2D(36160,e,t,n.handle,i);break;case 3553:o.framebufferTexture2D(36160,e,3553,n.handle,i);break;default:Po(!1,"Illegal texture type")}o.bindTexture(n.target,null),this.attachments[e]=n}_setReadBuffer(t){const e=Ni(n=this.gl)?n:null;var n;e?e.readBuffer(t):Po(36064===t||1029===t,As),this.readBuffer=t}_setDrawBuffers(t){const{gl:e}=this,n=zi(e);if(n)n.drawBuffers(t);else{const n=e.getExtension("WEBGL_draw_buffers");n?n.drawBuffersWEBGL(t):Po(1===t.length&&(36064===t[0]||1029===t[0]),As)}this.drawBuffers=t}_getAttachmentParameterFallback(t){const e=function(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in Es)void 0===t.luma.caps[e]&&(t.luma.caps[e]=ks(t,e));return t.luma.caps}(this.gl);switch(t){case 36052:return e.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return e.WEBGL2?null:8;case 33297:return e.WEBGL2?null:5125;case 33296:return e.WEBGL2||e.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(t){return this.gl.bindFramebuffer(36160,t)}}Ms.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];var Is=n(25108);const Cs={5126:Ws.bind(null,"uniform1fv",Ns,1,Gs),35664:Ws.bind(null,"uniform2fv",Ns,2,Gs),35665:Ws.bind(null,"uniform3fv",Ns,3,Gs),35666:Ws.bind(null,"uniform4fv",Ns,4,Gs),5124:Ws.bind(null,"uniform1iv",js,1,Gs),35667:Ws.bind(null,"uniform2iv",js,2,Gs),35668:Ws.bind(null,"uniform3iv",js,3,Gs),35669:Ws.bind(null,"uniform4iv",js,4,Gs),35670:Ws.bind(null,"uniform1iv",js,1,Gs),35671:Ws.bind(null,"uniform2iv",js,2,Gs),35672:Ws.bind(null,"uniform3iv",js,3,Gs),35673:Ws.bind(null,"uniform4iv",js,4,Gs),35674:Ws.bind(null,"uniformMatrix2fv",Ns,4,$s),35675:Ws.bind(null,"uniformMatrix3fv",Ns,9,$s),35676:Ws.bind(null,"uniformMatrix4fv",Ns,16,$s),35678:qs,35680:qs,5125:Ws.bind(null,"uniform1uiv",zs,1,Gs),36294:Ws.bind(null,"uniform2uiv",zs,2,Gs),36295:Ws.bind(null,"uniform3uiv",zs,3,Gs),36296:Ws.bind(null,"uniform4uiv",zs,4,Gs),35685:Ws.bind(null,"uniformMatrix2x3fv",Ns,6,$s),35686:Ws.bind(null,"uniformMatrix2x4fv",Ns,8,$s),35687:Ws.bind(null,"uniformMatrix3x2fv",Ns,6,$s),35688:Ws.bind(null,"uniformMatrix3x4fv",Ns,12,$s),35689:Ws.bind(null,"uniformMatrix4x2fv",Ns,8,$s),35690:Ws.bind(null,"uniformMatrix4x3fv",Ns,12,$s),35678:qs,35680:qs,35679:qs,35682:qs,36289:qs,36292:qs,36293:qs,36298:qs,36299:qs,36300:qs,36303:qs,36306:qs,36307:qs,36308:qs,36311:qs},Os={},Ps={},Ls={},Ds=[0];function Rs(t,e,n,r){1===e&&"boolean"==typeof t&&(t=t?1:0),Number.isFinite(t)&&(Ds[0]=t,t=Ds);const i=t.length;if(i%e&&Oi.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let o=r[i];o||(o=new n(i),r[i]=o);for(let e=0;e<i;e++)o[e]=t[e];return o}function Ns(t,e){return Rs(t,e,Float32Array,Os)}function js(t,e){return Rs(t,e,Int32Array,Ps)}function zs(t,e){return Rs(t,e,Uint32Array,Ls)}function Bs(t,e,n){const r=Cs[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r().bind(null,t,e)}function Fs(t){if("]"!==t[t.length-1])return{name:t,length:1,isArray:!1};const e=t.match(/([^[]*)(\[[0-9]+\])?/);if(!e||e.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:e[1],length:e[2]||1,isArray:Boolean(e[2])}}function Us(t){return Array.isArray(t)||ArrayBuffer.isView(t)?function(t){if(0===t.length)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t):!!isFinite(t)||(!0===t||!1===t||(t instanceof os||(t instanceof us||t instanceof Ms&&Boolean(t.texture))))}function Vs(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const r=t[e];for(let t=0,e=n.length;t<e;++t)r[t]=n[t]}else t[e]=n.slice();else t[e]=n}function qs(){let t=null;return(e,n,r)=>{const i=t!==r;return i&&(e.uniform1i(n,r),t=r),i}}function Ws(t,e,n,r){let i=null,o=null;return(s,a,c)=>{const l=e(c,n),u=l.length;let h=!1;if(null===i)i=new Float32Array(u),o=u,h=!0;else{Po(o===u,"Uniform length cannot change.");for(let t=0;t<u;++t)if(l[t]!==i[t]){h=!0;break}}return h&&(r(s,t,a,l),i.set(l)),h}}function Gs(t,e,n,r){t[e](n,r)}function $s(t,e,n,r){t[e](n,!1,r)}function Hs(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const n=t.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return n?n[1]:e}const Zs=35632,Ys=35633;function Xs(t,e,n,r){const i=t.split(/\r?\n/),o={},s={},a=r||Hs(e)||"(unnamed)",c="".concat(function(t){switch(t){case Zs:return"fragment";case Ys:return"vertex";default:return"unknown type"}}(n)," shader ").concat(a);for(let e=0;e<i.length;e++){const n=i[e];if(n.length<=1)continue;const r=n.split(":"),a=r[0],l=parseInt(r[2],10);if(isNaN(l))throw new Error("GLSL compilation error in ".concat(c,": ").concat(t));"WARNING"!==a?o[l]=n:s[l]=n}const l=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ";const r=t.split(/\r?\n/),i=String(r.length+e-1).length;return r.map(((t,r)=>{const o=String(r+e),s=o.length;return Js(o,i-s)+n+t}))}(e);return{shaderName:c,errors:Ks(o,l),warnings:Ks(s,l)}}function Ks(t,e){let n="";for(let r=0;r<e.length;r++){const i=e[r];if((t[r+3]||t[r+2]||t[r+1])&&(n+="".concat(i,"\n"),t[r+1])){const e=t[r+1],i=e.split(":",3),o=i[0],s=parseInt(i[1],10)||0,a=e.substring(i.join(":").length+1).trim();n+=Js("^^^ ".concat(o,": ").concat(a,"\n\n"),s)}}return n}function Js(t,e){let n="";for(let t=0;t<e;++t)n+=" ";return"".concat(n).concat(t)}class Qs extends Uo{get[Symbol.toStringTag](){return"Shader"}static getTypeName(t){switch(t){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return Po(!1),"unknown"}}constructor(t,e){ji(t),Po("string"==typeof e.source,"Shader: GLSL source code must be a JavaScript string");super(t,{id:Hs(e.source,null)||e.id||No("unnamed ".concat(Qs.getTypeName(e.shaderType)))}),this.shaderType=e.shaderType,this.source=e.source,this.initialize(e)}initialize(t){let{source:e}=t;const n=Hs(e,null);n&&(this.id=No(n)),this._compile(e)}getParameter(t){return this.gl.getShaderParameter(this.handle,t)}toString(){return"".concat(Qs.getTypeName(this.shaderType),":").concat(this.id)}getName(){return Hs(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const t=this.gl.getExtension("WEBGL_debug_shaders");return t?t.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;t.startsWith("#version ")||(t="#version 100\n".concat(t)),this.source=t,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle);if(!this.getParameter(35713)){const t=this.gl.getShaderInfoLog(this.handle),{shaderName:e,errors:n,warnings:r}=Xs(t,this.source,this.shaderType,this.id);throw Oi.error("GLSL compilation errors in ".concat(e,"\n").concat(n))(),Oi.warn("GLSL compilation warnings in ".concat(e,"\n").concat(r))(),new Error("GLSL compilation errors in ".concat(e))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class ta extends Qs{get[Symbol.toStringTag](){return"VertexShader"}constructor(t,e){"string"==typeof e&&(e={source:e}),super(t,Object.assign({},e,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class ea extends Qs{get[Symbol.toStringTag](){return"FragmentShader"}constructor(t,e){"string"==typeof e&&(e={source:e}),super(t,Object.assign({},e,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const na=5120,ra=5121,ia=5122,oa=5123,sa=0,aa=1,ca=2,la=3,ua=4,ha=5,pa=6,fa=5126,da=5124,ga=5125,ma={[fa]:[fa,1,"float"],35664:[fa,2,"vec2"],35665:[fa,3,"vec3"],35666:[fa,4,"vec4"],[da]:[da,1,"int"],35667:[da,2,"ivec2"],35668:[da,3,"ivec3"],35669:[da,4,"ivec4"],[ga]:[ga,1,"uint"],36294:[ga,2,"uvec2"],36295:[ga,3,"uvec3"],36296:[ga,4,"uvec4"],35670:[fa,1,"bool"],35671:[fa,2,"bvec2"],35672:[fa,3,"bvec3"],35673:[fa,4,"bvec4"],35674:[fa,8,"mat2"],35685:[fa,8,"mat2x3"],35686:[fa,8,"mat2x4"],35675:[fa,12,"mat3"],35687:[fa,12,"mat3x2"],35688:[fa,12,"mat3x4"],35676:[fa,16,"mat4"],35689:[fa,16,"mat4x2"],35690:[fa,16,"mat4x3"]};function ya(t){switch(t){case sa:return sa;case aa:case la:case ca:return aa;case ua:case ha:case pa:return ua;default:return Po(!1),0}}function _a(t){const e=ma[t];if(!e)return null;const[n,r]=e;return{type:n,components:r}}function va(t,e){switch(t){case na:case ra:case ia:case oa:t=fa}for(const n in ma){const[r,i,o]=ma[n];if(r===t&&i===e)return{glType:n,name:o}}return null}class xa{constructor(t){this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}getAttributeInfo(t){const e=Number(t);return Number.isFinite(e)?this.attributeInfosByLocation[e]:this.attributeInfosByName[t]||null}getAttributeLocation(t){const e=this.getAttributeInfo(t);return e?e.location:-1}getAttributeAccessor(t){const e=this.getAttributeInfo(t);return e?e.accessor:null}getVaryingInfo(t){const e=Number(t);return Number.isFinite(e)?this.varyingInfos[e]:this.varyingInfosByName[t]||null}getVaryingIndex(t){const e=this.getVaryingInfo();return e?e.location:-1}getVaryingAccessor(t){const e=this.getVaryingInfo();return e?e.accessor:null}_readAttributesFromProgram(t){const{gl:e}=t,n=e.getProgramParameter(t.handle,35721);for(let r=0;r<n;r++){const{name:n,type:i,size:o}=e.getActiveAttrib(t.handle,r),s=e.getAttribLocation(t.handle,n);s>=0&&this._addAttribute(s,n,i,o)}this.attributeInfos.sort(((t,e)=>t.location-e.location))}_readVaryingsFromProgram(t){const{gl:e}=t;if(!Ni(e))return;const n=e.getProgramParameter(t.handle,35971);for(let r=0;r<n;r++){const{name:n,type:i,size:o}=e.getTransformFeedbackVarying(t.handle,r);this._addVarying(r,n,i,o)}this.varyingInfos.sort(((t,e)=>t.location-e.location))}_addAttribute(t,e,n,r){const{type:i,components:o}=_a(n),s={type:i,size:r*o};this._inferProperties(t,e,s);const a={location:t,name:e,accessor:new Yo(s)};this.attributeInfos.push(a),this.attributeInfosByLocation[t]=a,this.attributeInfosByName[a.name]=a}_inferProperties(t,e,n){/instance/i.test(e)&&(n.divisor=1)}_addVarying(t,e,n,r){const{type:i,components:o}=_a(n),s={location:t,name:e,accessor:new Yo({type:i,size:r*o})};this.varyingInfos.push(s),this.varyingInfosByName[s.name]=s}}const ba=35981,wa=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class Ea extends Uo{get[Symbol.toStringTag](){return"Program"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.stubRemovedMethods("Program","v6.0",wa),this._isCached=!1,this.initialize(e),Object.seal(this),this._setId(e.id)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{hash:e,vs:n,fs:r,varyings:i,bufferMode:o=ba}=t;return this.hash=e||"",this.vs="string"==typeof n?new ta(this.gl,{id:"".concat(t.id,"-vs"),source:n}):n,this.fs="string"==typeof r?new ea(this.gl,{id:"".concat(t.id,"-fs"),source:r}):r,Po(this.vs instanceof ta),Po(this.fs instanceof ea),this.uniforms={},this._textureUniforms={},i&&i.length>0&&(zi(this.gl),this.varyings=i,this.gl2.transformFeedbackVaryings(this.handle,i,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new xa(this),this.setProps(t)}delete(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:super.delete(t)}setProps(t){return"uniforms"in t&&this.setUniforms(t.uniforms),this}draw(t){let{logPriority:e,drawMode:n=4,vertexCount:r,offset:i=0,start:o,end:s,isIndexed:a=!1,indexType:c=5123,instanceCount:l=0,isInstanced:u=l>0,vertexArray:h=null,transformFeedback:p,framebuffer:f,parameters:d={},uniforms:g,samplers:m}=t;if((g||m)&&(Oi.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(g||{})),Oi.priority>=e){const t=f?f.id:"default",i="mode=".concat(Do(this.gl,n)," verts=").concat(r," ")+"instances=".concat(l," indexType=").concat(Do(this.gl,c)," ")+"isInstanced=".concat(u," isIndexed=").concat(a," ")+"Framebuffer=".concat(t);Oi.log(e,i)()}return Po(h),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===r||u&&0===l)&&(h.bindForDraw(r,l,(()=>{if(void 0!==f&&(d=Object.assign({},d,{framebuffer:f})),p){const t=ya(n);p.begin(t)}this._bindTextures(),_o(this.gl,d,(()=>{a&&u?this.gl2.drawElementsInstanced(n,r,c,i,l):a&&Ni(this.gl)&&!isNaN(o)&&!isNaN(s)?this.gl2.drawRangeElements(n,o,s,r,c,i):a?this.gl.drawElements(n,r,c,i):u?this.gl2.drawArraysInstanced(n,i,r,l):this.gl.drawArrays(n,i,r)})),p&&p.end()})),!0)}setUniforms(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Oi.priority>=2&&function(t,e,n){for(const r in t){const i=t[r];if((!n||Boolean(n[r]))&&!Us(i))throw e=e?"".concat(e," "):"",Is.error("".concat(e," Bad uniform ").concat(r),i),new Error("".concat(e," Bad uniform ").concat(r))}}(t,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const e in t){const n=t[e],r=this._uniformSetters[e];if(r){let t=n,i=!1;if(t instanceof Ms&&(t=t.texture),t instanceof os)if(i=this.uniforms[e]!==n,i){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);const n=t,{textureIndex:i}=r;n.bind(i),t=i,this._textureUniforms[e]=n}else t=r.textureIndex;else this._textureUniforms[e]&&delete this._textureUniforms[e];(r(t)||i)&&Vs(this.uniforms,e,n)}}return this}_areTexturesRenderable(){let t=!0;for(const e in this._textureUniforms){const n=this._textureUniforms[e];n.update(),t=t&&n.loaded}return t}_bindTextures(){for(const t in this._textureUniforms){const e=this._uniformSetters[t].textureIndex;this._textureUniforms[t].bind(e)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(t){const e=this.gl.getAttachedShaders(t),n={};for(const t of e){switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new ta({handle:t});break;case 35632:n.fs=new ea({handle:t})}}return n}_getParameter(t){return this.gl.getProgramParameter(this.handle,t)}_setId(t){if(!t){const t=this._getName();this.id=No(t)}}_getName(){let t=this.vs.getName()||this.fs.getName();return t=t.replace(/shader/i,""),t=t?"".concat(t,"-program"):"program",t}_compileAndLink(){const{gl:t}=this;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),Oi.time(4,"linkProgram for ".concat(this._getName()))(),t.linkProgram(this.handle),Oi.timeEnd(4,"linkProgram for ".concat(this._getName()))(),t.debug||Oi.level>0){if(!t.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(t.getProgramInfoLog(this.handle)));t.validateProgram(this.handle);if(!t.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(t.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:t}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let e=0;e<this._uniformCount;e++){const n=this.gl.getActiveUniform(this.handle,e),{name:r}=Fs(n.name);let i=t.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=Bs(t,i,n),n.size>1)for(let e=0;e<n.size;e++)i=t.getUniformLocation(this.handle,"".concat(r,"[").concat(e,"]")),this._uniformSetters["".concat(r,"[").concat(e,"]")]=Bs(t,i,n)}this._textureIndexCounter=0}getActiveUniforms(t,e){return this.gl2.getActiveUniforms(this.handle,t,e)}getUniformBlockIndex(t){return this.gl2.getUniformBlockIndex(this.handle,t)}getActiveUniformBlockParameter(t,e){return this.gl2.getActiveUniformBlockParameter(this.handle,t,e)}uniformBlockBinding(t,e){this.gl2.uniformBlockBinding(this.handle,t,e)}}class Ta{static getDefaultProgramManager(t){return t.luma=t.luma||{},t.luma.defaultProgramManager=t.luma.defaultProgramManager||new Ta(t),t.luma.defaultProgramManager}constructor(t){this.gl=t,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(t){this._defaultModules.find((e=>e.name===t.name))||this._defaultModules.push(t),this.stateHash++}removeDefaultModule(t){const e="string"==typeof t?t:t.name;this._defaultModules=this._defaultModules.filter((t=>t.name!==e)),this.stateHash++}addShaderHook(t,e){e&&(t=Object.assign(e,{hook:t})),this._hookFunctions.push(t),this.stateHash++}get(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{vs:e="",fs:n="",defines:r={},inject:i={},varyings:o=[],bufferMode:s=35981,transpileToGLSL100:a=!1}=t,c=this._getModuleList(t.modules),l=this._getHash(e),u=this._getHash(n),h=c.map((t=>this._getHash(t.name))).sort(),p=o.map((t=>this._getHash(t))),f=Object.keys(r).sort(),d=Object.keys(i).sort(),g=[],m=[];for(const t of f)g.push(this._getHash(t)),g.push(this._getHash(r[t]));for(const t of d)m.push(this._getHash(t)),m.push(this._getHash(i[t]));const y="".concat(l,"/").concat(u,"D").concat(g.join("/"),"M").concat(h.join("/"),"I").concat(m.join("/"),"V").concat(p.join("/"),"H").concat(this.stateHash,"B").concat(s).concat(a?"T":"");if(!this._programCache[y]){const t=function(t,e){const{vs:n,fs:r}=e,i=$r(e.modules||[]);return{gl:t,vs:Ii(t,Object.assign({},e,{source:n,type:Br,modules:i})),fs:Ii(t,Object.assign({},e,{source:r,type:Fr,modules:i})),getUniforms:Ci(i)}}(this.gl,{vs:e,fs:n,modules:c,inject:i,defines:r,hookFunctions:this._hookFunctions,transpileToGLSL100:a});this._programCache[y]=new Ea(this.gl,{hash:y,vs:t.vs,fs:t.fs,varyings:o,bufferMode:s}),this._getUniforms[y]=t.getUniforms||(t=>{}),this._useCounts[y]=0}return this._useCounts[y]++,this._programCache[y]}getUniforms(t){return this._getUniforms[t.hash]||null}release(t){const e=t.hash;this._useCounts[e]--,0===this._useCounts[e]&&(this._programCache[e].delete(),delete this._programCache[e],delete this._getUniforms[e],delete this._useCounts[e])}_getHash(t){return void 0===this._hashes[t]&&(this._hashes[t]=this._hashCounter++),this._hashes[t]}_getModuleList(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const e=new Array(this._defaultModules.length+t.length),n={};let r=0;for(let t=0,i=this._defaultModules.length;t<i;++t){const i=this._defaultModules[t],o=i.name;e[r++]=i,n[o]=!0}for(let i=0,o=t.length;i<o;++i){const o=t[i],s=o.name;n[s]||(e[r++]=o,n[s]=!0)}return e.length=r,e}}const Sa={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null},ka="#define SMOOTH_EDGE_RADIUS 0.5";var Aa={name:"geometry",vs:"\n".concat(ka,"\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n"),fs:"\n".concat(ka,"\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n")};const Ma=Object.keys(Cr).map((t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(Cr[t],";"))).join(""),Ia=Object.keys(Or).map((t=>"const int PROJECTION_MODE_".concat(t," = ").concat(Or[t],";"))).join(""),Ca=Object.keys(Pr).map((t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(Pr[t],";"))).join("");var Oa="".concat(Ma,"\n").concat(Ia,"\n").concat(Ca,"\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size_at_latitude(float lat) {\n  float y = clamp(lat, -89.9, 89.9);\n  return 1.0 / cos(radians(y));\n}\n\nfloat project_size() {\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\n    project_uPseudoMeters == false) {\n    \n    if (geometry.position.w == 0.0) {\n      return project_size_at_latitude(geometry.worldPosition.y);\n    }\n  \n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\n    float y2 = y * y;\n    float y4 = y2 * y2;\n    float y6 = y4 * y2;\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n  }\n  return 1.0;\n}\n\nfloat project_size_at_latitude(float meters, float lat) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter * project_size();\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n  mat3 rotation;\n  if (project_needs_rotation(geometry.position.xyz, rotation)) {\n    n = rotation * n;\n  }\n  return n;\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size_at_latitude(position_world.z, position_world.y),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\n  if (unit == UNIT_COMMON) return size * project_uScale;\n  return size;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\n");function Pa(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function La(t){let e,n={};return r=>{for(const i in r)if(!Pa(r[i],n[i])){e=t(r),n=r;break}return e}}const Da=[0,0,0,0],Ra=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],Na=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ja=[0,0,0],za=[0,0,0],Ba=La((function({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:r}){const{projectionCenter:i,viewProjectionMatrix:o,originCommon:s,cameraPosCommon:a,shaderCoordinateOrigin:c,geospatialOrigin:l}=function(t,e,n){const{viewMatrixUncentered:r,projectionMatrix:i}=t;let{viewMatrix:o,viewProjectionMatrix:s}=t,a=Da,c=Da,l=t.cameraPosition;const{geospatialOrigin:u,shaderCoordinateOrigin:h,offsetMode:p}=Fa(t,e,n);p&&(c=t.projectPosition(u||h),l=[l[0]-c[0],l[1]-c[1],l[2]-c[2]],c[3]=1,a=$n([],c,s),o=r||o,s=jn([],i,o),s=jn([],s,Ra));return{viewMatrix:o,viewProjectionMatrix:s,projectionCenter:a,originCommon:c,cameraPosCommon:l,shaderCoordinateOrigin:h,geospatialOrigin:u}}(t,n,r),u=t.getDistanceScales(),h=[t.width*e,t.height*e],p=$n([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,f={project_uCoordinateSystem:n,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:c,project_uCommonOrigin:s.slice(0,3),project_uCenter:i,project_uPseudoMeters:Boolean(t._pseudoMeters),project_uViewportSize:h,project_uDevicePixelRatio:e,project_uFocalDistance:p,project_uCommonUnitsPerMeter:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:ja,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:o,project_uModelMatrix:Na,project_uCameraPosition:a};if(l){const e=t.getDistanceScales(l);switch(n){case Cr.METER_OFFSETS:f.project_uCommonUnitsPerWorldUnit=e.unitsPerMeter,f.project_uCommonUnitsPerWorldUnit2=e.unitsPerMeter2;break;case Cr.LNGLAT:case Cr.LNGLAT_OFFSETS:t._pseudoMeters||(f.project_uCommonUnitsPerMeter=e.unitsPerMeter),f.project_uCommonUnitsPerWorldUnit=e.unitsPerDegree,f.project_uCommonUnitsPerWorldUnit2=e.unitsPerDegree2;break;case Cr.CARTESIAN:f.project_uCommonUnitsPerWorldUnit=[1,1,e.unitsPerMeter[2]],f.project_uCommonUnitsPerWorldUnit2=[0,0,e.unitsPerMeter2[2]]}}return f}));function Fa(t,e,n=za){n.length<3&&(n=[n[0],n[1],0]);let r,i=n,o=!0;switch(r=e===Cr.LNGLAT_OFFSETS||e===Cr.METER_OFFSETS?n:t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case Or.WEB_MERCATOR:e!==Cr.LNGLAT&&e!==Cr.CARTESIAN||(r=[0,0,0],o=!1);break;case Or.WEB_MERCATOR_AUTO_OFFSET:e===Cr.LNGLAT?i=r:e===Cr.CARTESIAN&&(i=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],r=t.unprojectPosition(i),i[0]-=n[0],i[1]-=n[1],i[2]-=n[2]);break;case Or.IDENTITY:i=t.position.map(Math.fround),i[2]=i[2]||0;break;case Or.GLOBE:o=!1,r=null;break;default:o=!1}return{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:o}}const Ua={};var Va={name:"project",dependencies:[Sa,Aa],vs:Oa,getUniforms:function(t=Ua){return"viewport"in t?function({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:r=Cr.DEFAULT,coordinateOrigin:i=za,autoWrapLongitude:o=!1}){r===Cr.DEFAULT&&(r=t.isGeospatial?Cr.LNGLAT:Cr.CARTESIAN);const s=Ba({viewport:t,devicePixelRatio:e,coordinateSystem:r,coordinateOrigin:i});return s.project_uWrapLongitude=o,s.project_uModelMatrix=n||Na,s}(t):{}}};const qa=[Va],Wa=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function Ga(t){const e=Ta.getDefaultProgramManager(t);for(const t of qa)e.addDefaultModule(t);for(const t of Wa)e.addShaderHook(t);return e}class $a{constructor(t,{deck:e,stats:n,viewport:r,timeline:o}={}){i(this,"layers",void 0),i(this,"context",void 0),i(this,"resourceManager",void 0),i(this,"_lastRenderedLayers",[]),i(this,"_needsRedraw",!1),i(this,"_needsUpdate",!1),i(this,"_nextLayers",null),i(this,"_debug",!1),i(this,"activateViewport",(t=>{Z("layerManager.activateViewport",this,t),t&&(this.context.viewport=t)})),this.layers=[],this.resourceManager=new sn({gl:t,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:t,deck:e,programManager:t&&Ga(t),stats:n||new et({id:"deck.gl"}),viewport:r||new zr({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:o||new a,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const t of this.layers)this._finalizeLayer(t)}needsRedraw(t={clearRedrawFlags:!1}){let e=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);for(const n of this.layers){const r=n.getNeedsRedraw(t);e=e||r}return e}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(t){this._needsRedraw=this._needsRedraw||t}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t}getLayers({layerIds:t}={}){return t?this.layers.filter((e=>t.find((t=>0===e.id.indexOf(t))))):this.layers}setProps(t){"debug"in t&&(this._debug=t.debug),"userData"in t&&(this.context.userData=t.userData),"layers"in t&&(this._nextLayers=t.layers),"onError"in t&&(this.context.onError=t.onError)}setLayers(t,e){Z("layerManager.setLayers",this,e,t),this._lastRenderedLayers=t;const n=Y(t,Boolean);for(const t of n)t.context=this.context;this._updateLayers(this.layers,n)}updateLayers(){const t=this.needsUpdate();t&&(this.setNeedsRedraw("updating layers: ".concat(t)),this.setLayers(this._nextLayers||this._lastRenderedLayers,t)),this._nextLayers=null}_handleError(t,e,n){n.raiseError(e,"".concat(t," of ").concat(n))}_updateLayers(t,e){const n={};for(const e of t)n[e.id]?G.warn("Multiple old layers with same id ".concat(e.id))():n[e.id]=e;const r=[];this._updateSublayersRecursively(e,n,r),this._finalizeOldLayers(n);let i=!1;for(const t of r)if(t.hasUniformTransition()){i="Uniform transition in ".concat(t);break}this._needsUpdate=i,this.layers=r}_updateSublayersRecursively(t,e,n){for(const r of t){r.context=this.context;const t=e[r.id];null===t&&G.warn("Multiple new layers with same id ".concat(r.id))(),e[r.id]=null;let i=null;try{this._debug&&t!==r&&r.validateProps(),t?(this._transferLayerState(t,r),this._updateLayer(r)):this._initializeLayer(r),n.push(r),i=r.isComposite?r.getSubLayers():null}catch(t){this._handleError("matching",t,r)}i&&this._updateSublayersRecursively(i,e,n)}}_finalizeOldLayers(t){for(const e in t){const n=t[e];n&&this._finalizeLayer(n)}}_initializeLayer(t){try{t._initialize(),t.lifecycle=u}catch(e){this._handleError("initialization",e,t)}}_transferLayerState(t,e){e._transferState(t),e.lifecycle=l,e!==t&&(t.lifecycle=h)}_updateLayer(t){try{t._update()}catch(e){this._handleError("update",e,t)}}_finalizeLayer(t){this._needsRedraw=this._needsRedraw||"finalized ".concat(t),t.lifecycle=p;try{t._finalize(),t.lifecycle=f}catch(e){this._handleError("finalization",e,t)}}}function Ha(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!Ha(t[r],e[r],n-1))return!1;return!0}if(Array.isArray(e))return!1;if("object"==typeof t&&"object"==typeof e){const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(const i of r){if(!e.hasOwnProperty(i))return!1;if(!Ha(t[i],e[i],n-1))return!1}return!0}return!1}class Za{constructor(t){i(this,"width",void 0),i(this,"height",void 0),i(this,"views",void 0),i(this,"viewState",void 0),i(this,"controllers",void 0),i(this,"timeline",void 0),i(this,"_viewports",void 0),i(this,"_viewportMap",void 0),i(this,"_isUpdating",void 0),i(this,"_needsRedraw",void 0),i(this,"_needsUpdate",void 0),i(this,"_eventManager",void 0),i(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=t.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=t.eventManager,this._eventCallbacks={onViewStateChange:t.onViewStateChange,onInteractionStateChange:t.onInteractionStateChange},Object.seal(this),this.setProps(t)}finalize(){for(const t in this.controllers){const e=this.controllers[t];e&&e.finalize()}this.controllers={}}needsRedraw(t={clearRedrawFlags:!1}){const e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t,this._needsRedraw=this._needsRedraw||t}updateViewStates(){for(const t in this.controllers){const e=this.controllers[t];e&&e.updateTransition()}}getViewports(t){return t?this._viewports.filter((e=>e.containsPixel(t))):this._viewports}getViews(){const t={};return this.views.forEach((e=>{t[e.id]=e})),t}getView(t){return this.views.find((e=>e.id===t))}getViewState(t){const e="string"==typeof t?this.getView(t):t,n=e&&this.viewState[e.getViewStateId()]||this.viewState;return e?e.filterViewState(n):n}getViewport(t){return this._viewportMap[t]}unproject(t,e){const n=this.getViewports(),r={x:t[0],y:t[1]};for(let i=n.length-1;i>=0;--i){const o=n[i];if(o.containsPixel(r)){const n=t.slice();return n[0]-=o.x,n[1]-=o.y,o.unproject(n,e)}}return null}setProps(t){t.views&&this._setViews(t.views),t.viewState&&this._setViewState(t.viewState),("width"in t||"height"in t)&&this._setSize(t.width,t.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(t,e){t===this.width&&e===this.height||(this.width=t,this.height=e,this.setNeedsUpdate("Size changed"))}_setViews(t){t=Y(t,Boolean);this._diffViews(t,this.views)&&this.setNeedsUpdate("views changed"),this.views=t}_setViewState(t){if(t){!Ha(t,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=t}else G.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(t,e){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...e,viewId:t})}_createController(t,e){return new(0,e.type)({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,e.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:e=>{var n;return null===(n=this.getView(t.id))||void 0===n?void 0:n.makeViewport({viewState:e,width:this.width,height:this.height})}})}_updateController(t,e,n,r){const i=t.controller;if(i&&n){const o={...e,...i,id:t.id,x:n.x,y:n.y,width:n.width,height:n.height};return r&&r.constructor===i.type||(r=this._createController(t,o)),r&&r.setProps(o),r}return null}_rebuildViewports(){const{views:t}=this,e=this.controllers;this._viewports=[],this.controllers={};let n=!1;for(let r=t.length;r--;){const i=t[r],o=this.getViewState(i),s=i.makeViewport({viewState:o,width:this.width,height:this.height});let a=e[i.id];const c=Boolean(i.controller);c&&!a&&(n=!0),!n&&c||!a||(a.finalize(),a=null),this.controllers[i.id]=this._updateController(i,o,s,a),s&&this._viewports.unshift(s)}for(const t in e){const n=e[t];n&&!this.controllers[t]&&n.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach((t=>{t.id&&(this._viewportMap[t.id]=this._viewportMap[t.id]||t)}))}_diffViews(t,e){return t.length!==e.length||t.some(((n,r)=>!t[r].equals(e[r])))}}const Ya=/([0-9]+\.?[0-9]*)(%|px)/;function Xa(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=Ya.exec(t);if(e&&e.length>=3){const t="%"===e[2],n=parseFloat(e[1]);return{position:t?n/100:n,relative:t}}default:throw new Error("Could not parse position string ".concat(t))}}function Ka(t,e){return t.relative?Math.round(t.position*e):t.position}function Ja(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class Qa{constructor(t){i(this,"id",void 0),i(this,"viewportInstance",void 0),i(this,"_x",void 0),i(this,"_y",void 0),i(this,"_width",void 0),i(this,"_height",void 0),i(this,"_padding",void 0),i(this,"props",void 0);const{id:e,x:n=0,y:r=0,width:o="100%",height:s="100%",padding:a=null,viewportInstance:c}=t||{};Ja(!c||c instanceof zr),this.viewportInstance=c,this.id=e||this.constructor.displayName||"view",this.props={...t,id:this.id},this._x=Xa(n),this._y=Xa(r),this._width=Xa(o),this._height=Xa(s),this._padding=a&&{left:Xa(a.left||0),right:Xa(a.right||0),top:Xa(a.top||0),bottom:Xa(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(t){return this===t||(this.viewportInstance?!!t.viewportInstance&&this.viewportInstance.equals(t.viewportInstance):this.ViewportType===t.ViewportType&&Ha(this.props,t.props,2))}makeViewport({width:t,height:e,viewState:n}){if(this.viewportInstance)return this.viewportInstance;n=this.filterViewState(n);const r=this.getDimensions({width:t,height:e});return r.height&&r.width?new this.ViewportType({...n,...this.props,...r}):null}getViewStateId(){const{viewState:t}=this.props;return"string"==typeof t?t:(null==t?void 0:t.id)||this.id}filterViewState(t){if(this.props.viewState&&"object"==typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const e={...t};for(const t in this.props.viewState)"id"!==t&&(e[t]=this.props.viewState[t]);return e}return t}getDimensions({width:t,height:e}){const n={x:Ka(this._x,t),y:Ka(this._y,e),width:Ka(this._width,t),height:Ka(this._height,e)};return this._padding&&(n.padding={left:Ka(this._padding.left,t),top:Ka(this._padding.top,e),right:Ka(this._padding.right,t),bottom:Ka(this._padding.bottom,e)}),n}get controller(){const t=this.props.controller;return t?!0===t?{type:this.ControllerType}:"function"==typeof t?{type:t}:{type:this.ControllerType,...t}:null}}class tc extends zr{constructor(t={}){const{latitude:e=0,longitude:n=0,zoom:r=0,pitch:o=0,bearing:s=0,nearZMultiplier:a=.1,farZMultiplier:c=1.01,nearZ:l,farZ:u,orthographic:h=!1,projectionMatrix:p,repeat:f=!1,worldOffset:d=0,position:g,padding:m,legacyMeterSizes:y=!1}=t;let{width:_,height:v,altitude:x=1.5}=t;const b=Math.pow(2,r);let w;_=_||1,v=v||1;let E=null;if(p)x=p[5]/2,w=Er(x);else{let n;if(t.fovy?(w=t.fovy,x=Tr(w)):w=Er(x),m){const{top:t=0,bottom:e=0}=m;n=[0,hn((t+v-e)/2,0,v)-v/2]}E=wr({width:_,height:v,scale:b,center:g&&[0,0,g[2]*vr(e)],offset:n,pitch:o,fovy:w,nearZMultiplier:a,farZMultiplier:c}),Number.isFinite(l)&&(E.near=l),Number.isFinite(u)&&(E.far=u)}let T=function(t){const{height:e,pitch:n,bearing:r,altitude:i,scale:o,center:s}=t,a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];zn(a,a,[0,0,-i]),Fn(a,a,-n*ur),Un(a,a,r*ur);const c=o/e;return Bn(a,a,[c,c,c]),s&&zn(a,a,function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}([],s)),a}({height:v,pitch:o,bearing:s,scale:b,altitude:x});if(d){T=(new Qn).translate([512*d,0,0]).multiplyLeft(T)}super({...t,width:_,height:v,viewMatrix:T,longitude:n,latitude:e,zoom:r,...E,fovy:w,focalDistance:x}),i(this,"longitude",void 0),i(this,"latitude",void 0),i(this,"pitch",void 0),i(this,"bearing",void 0),i(this,"altitude",void 0),i(this,"fovy",void 0),i(this,"orthographic",void 0),i(this,"_subViewports",void 0),i(this,"_pseudoMeters",void 0),this.latitude=e,this.longitude=n,this.zoom=r,this.pitch=o,this.bearing=s,this.altitude=x,this.fovy=w,this.orthographic=h,this._subViewports=f?[]:null,this._pseudoMeters=y,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const t=this.getBounds(),e=Math.floor((t[0]+180)/360),n=Math.ceil((t[2]-180)/360);for(let t=e;t<=n;t++){const e=t?new tc({...this,worldOffset:t}):this;this._subViewports.push(e)}}return this._subViewports}projectPosition(t){if(this._pseudoMeters)return super.projectPosition(t);const[e,n]=this.projectFlat(t);return[e,n,(t[2]||0)*vr(t[1])]}unprojectPosition(t){if(this._pseudoMeters)return super.unprojectPosition(t);const[e,n]=this.unprojectFlat(t);return[e,n,(t[2]||0)/vr(n)]}addMetersToLngLat(t,e){return br(t,e)}panByPosition(t,e){const n=kr(e,this.pixelUnprojectionMatrix),r=Wn([],this.projectFlat(t),function(t,e){return t[0]=-e[0],t[1]=-e[1],t}([],n)),i=Wn([],this.center,r),[o,s]=this.unprojectFlat(i);return{longitude:o,latitude:s}}getBounds(t={}){const e=function(t,e=0){const{width:n,height:r,unproject:i}=t,o={targetZ:e},s=i([0,r],o),a=i([n,r],o);let c,l;return(t.fovy?.5*t.fovy*Mr:Math.atan(.5/t.altitude))>(90-t.pitch)*Mr-.01?(c=Ir(t,0,e),l=Ir(t,n,e)):(c=i([0,0],o),l=i([n,0],o)),[s,a,l,c]}(this,t.z||0);return[Math.min(e[0][0],e[1][0],e[2][0],e[3][0]),Math.min(e[0][1],e[1][1],e[2][1],e[3][1]),Math.max(e[0][0],e[1][0],e[2][0],e[3][0]),Math.max(e[0][1],e[1][1],e[2][1],e[3][1])]}fitBounds(t,e={}){const{width:n,height:r}=this,{longitude:i,latitude:o,zoom:s}=Ar({width:n,height:r,bounds:t,...e});return new tc({width:n,height:r,longitude:i,latitude:o,zoom:s})}}i(tc,"displayName","WebMercatorViewport");class ec{constructor(t){i(this,"_inProgress",void 0),i(this,"_handle",void 0),i(this,"_timeline",void 0),i(this,"time",void 0),i(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=t,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(t){var e,n;this.cancel(),this.settings=t,this._inProgress=!0,null===(e=(n=this.settings).onStart)||void 0===e||e.call(n,this)}end(){var t,e;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,null===(t=(e=this.settings).onEnd)||void 0===t||t.call(e,this))}cancel(){var t,e;this._inProgress&&(null===(t=(e=this.settings).onInterrupt)||void 0===t||t.call(e,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var t,e;if(!this._inProgress)return!1;if(null===this._handle){const{_timeline:t,settings:e}=this;this._handle=t.addChannel({delay:t.getTime(),duration:e.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),null===(t=(e=this.settings).onUpdate)||void 0===t||t.call(e,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const nc=()=>{},rc=2,ic=3,oc=t=>t,sc=1;class ac{constructor(t){i(this,"getControllerState",void 0),i(this,"props",void 0),i(this,"propsInTransition",void 0),i(this,"transition",void 0),i(this,"onViewStateChange",void 0),i(this,"onStateChange",void 0),i(this,"_onTransitionUpdate",(t=>{const{time:e,settings:{interpolator:n,startProps:r,endProps:i,duration:o,easing:s}}=t,a=s(e/o),c=n.interpolateProps(r,i,a);this.propsInTransition=this.getControllerState({...this.props,...c}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})})),this.getControllerState=t.getControllerState,this.propsInTransition=null,this.transition=new ec(t.timeline),this.onViewStateChange=t.onViewStateChange||nc,this.onStateChange=t.onStateChange||nc}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(t){let e=!1;const n=this.props;if(this.props=t,!n||this._shouldIgnoreViewportChange(n,t))return!1;if(this._isTransitionEnabled(t)){let r=n;if(this.transition.inProgress){const{interruption:t,endProps:e}=this.transition.settings;r={...n,...t===rc?e:this.propsInTransition||n}}this._triggerTransition(r,t),e=!0}else this.transition.cancel();return e}updateTransition(){this.transition.update()}_isTransitionEnabled(t){const{transitionDuration:e,transitionInterpolator:n}=t;return(e>0||"auto"===e)&&Boolean(n)}_isUpdateDueToCurrentTransition(t){return!(!this.transition.inProgress||!this.propsInTransition)&&this.transition.settings.interpolator.arePropsEqual(t,this.propsInTransition)}_shouldIgnoreViewportChange(t,e){return this.transition.inProgress?this.transition.settings.interruption===ic||this._isUpdateDueToCurrentTransition(e):!this._isTransitionEnabled(e)||e.transitionInterpolator.arePropsEqual(t,e)}_triggerTransition(t,e){const n=this.getControllerState(t),r=this.getControllerState(e).shortestPathFrom(n),i=e.transitionInterpolator,o=i.getDuration?i.getDuration(t,e):e.transitionDuration;if(0===o)return;const s=i.initializeProps(t,r);this.propsInTransition={};const a={duration:o,easing:e.transitionEasing||oc,interpolator:i,interruption:e.transitionInterruption||sc,startProps:s.start,endProps:s.end,onStart:e.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(e.onTransitionInterrupt),onEnd:this._onTransitionEnd(e.onTransitionEnd)};this.transition.start(a),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(t){return e=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),null==t||t(e)}}}class cc{constructor(t){i(this,"_propsToCompare",void 0),i(this,"_propsToExtract",void 0),i(this,"_requiredProps",void 0);const{compare:e,extract:n,required:r}=t;this._propsToCompare=e,this._propsToExtract=n||e,this._requiredProps=r}arePropsEqual(t,e){for(const n of this._propsToCompare)if(!(n in t)||!(n in e)||!fn(t[n],e[n]))return!1;return!0}initializeProps(t,e){const n={},r={};for(const i of this._propsToExtract)(i in t||i in e)&&(n[i]=t[i],r[i]=e[i]);return this._checkRequiredProps(n),this._checkRequiredProps(r),{start:n,end:r}}getDuration(t,e){return e.transitionDuration}_checkRequiredProps(t){this._requiredProps&&this._requiredProps.forEach((e=>{const n=t[e];Ja(Number.isFinite(n)||Array.isArray(n),"".concat(e," is required for transition"))}))}}const lc=["longitude","latitude","zoom","bearing","pitch"],uc=["longitude","latitude","zoom"];class hc extends cc{constructor(t={}){const e=Array.isArray(t)?t:t.transitionProps,n=Array.isArray(t)?{}:t;n.transitionProps=Array.isArray(e)?{compare:e,required:e}:e||{compare:lc,required:uc},super(n.transitionProps),i(this,"opts",void 0),this.opts=n}initializeProps(t,e){const n=super.initializeProps(t,e),{makeViewport:r,around:i}=this.opts;if(r&&i){const o=r(t),s=r(e),a=o.unproject(i);n.start.around=i,Object.assign(n.end,{around:s.project(a),aroundPosition:a,width:e.width,height:e.height})}return n}interpolateProps(t,e,n){const r={};for(const i of this._propsToExtract)r[i]=pn(t[i]||0,e[i]||0,n);if(e.aroundPosition&&this.opts.makeViewport){const i=this.opts.makeViewport({...e,...r});Object.assign(r,i.panByPosition(e.aroundPosition,pn(t.around,e.around,n)))}return r}}const pc={transitionDuration:0},fc=t=>1-(1-t)*(1-t),dc=["wheel"],gc=["panstart","panmove","panend"],mc=["pinchstart","pinchmove","pinchend"],yc=["tripanstart","tripanmove","tripanend"],_c=["doubletap"],vc=["keydown"],xc={};class bc{constructor(t){i(this,"props",void 0),i(this,"state",{}),i(this,"transitionManager",void 0),i(this,"eventManager",void 0),i(this,"onViewStateChange",void 0),i(this,"onStateChange",void 0),i(this,"makeViewport",void 0),i(this,"_controllerState",void 0),i(this,"_events",{}),i(this,"_interactionState",{isDragging:!1}),i(this,"_customEvents",[]),i(this,"_eventStartBlocked",null),i(this,"_panMove",!1),i(this,"invertPan",!1),i(this,"dragMode","rotate"),i(this,"inertia",0),i(this,"scrollZoom",!0),i(this,"dragPan",!0),i(this,"dragRotate",!0),i(this,"doubleClickZoom",!0),i(this,"touchZoom",!0),i(this,"touchRotate",!1),i(this,"keyboard",!0),this.transitionManager=new ac({...t,getControllerState:t=>new this.ControllerState(t),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=t.eventManager,this.onViewStateChange=t.onViewStateChange||(()=>{}),this.onStateChange=t.onStateChange||(()=>{}),this.makeViewport=t.makeViewport}set events(t){this.toggleEvents(this._customEvents,!1),this.toggleEvents(t,!0),this._customEvents=t,this.props&&this.setProps(this.props)}finalize(){for(const e in this._events){var t;if(this._events[e])null===(t=this.eventManager)||void 0===t||t.off(e,this.handleEvent)}this.transitionManager.finalize()}handleEvent(t){this._controllerState=void 0;const e=this._eventStartBlocked;switch(t.type){case"panstart":return!e&&this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return!e&&this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"tripanstart":return!e&&this._onTriplePanStart(t);case"tripanmove":return this._onTriplePan(t);case"tripanend":return this._onTriplePanEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(t){const{x:e,y:n}=this.props,{offsetCenter:r}=t;return[r.x-e,r.y-n]}isPointInBounds(t,e){const{width:n,height:r}=this.props;if(e&&e.handled)return!1;const i=t[0]>=0&&t[0]<=n&&t[1]>=0&&t[1]<=r;return i&&e&&e.stopPropagation(),i}isFunctionKeyPressed(t){const{srcEvent:e}=t;return Boolean(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(t){const e=setTimeout((()=>{this._eventStartBlocked===e&&(this._eventStartBlocked=null)}),t);this._eventStartBlocked=e}setProps(t){t.dragMode&&(this.dragMode=t.dragMode),this.props=t,"transitionInterpolator"in t||(t.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(t);const{inertia:e}=t;this.inertia=Number.isFinite(e)?e:!0===e?300:0;const{scrollZoom:n=!0,dragPan:r=!0,dragRotate:i=!0,doubleClickZoom:o=!0,touchZoom:s=!0,touchRotate:a=!1,keyboard:c=!0}=t,l=Boolean(this.onViewStateChange);this.toggleEvents(dc,l&&n),this.toggleEvents(gc,l),this.toggleEvents(mc,l&&(s||a)),this.toggleEvents(yc,l&&a),this.toggleEvents(_c,l&&o),this.toggleEvents(vc,l&&c),this.scrollZoom=n,this.dragPan=r,this.dragRotate=i,this.doubleClickZoom=o,this.touchZoom=s,this.touchRotate=a,this.keyboard=c}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(t,e){this.eventManager&&t.forEach((t=>{this._events[t]!==e&&(this._events[t]=e,e?this.eventManager.on(t,this.handleEvent):this.eventManager.off(t,this.handleEvent))}))}updateViewport(t,e=null,n={}){const r={...t.getViewportProps(),...e},i=this.controllerState!==t;if(this.state=t.getState(),this._setInteractionState(n),i){const t=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:t})}}_onTransition(t){this.onViewStateChange({...t,interactionState:this._interactionState})}_setInteractionState(t){Object.assign(this._interactionState,t),this.onStateChange(this._interactionState)}_onPanStart(t){const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;let n=this.isFunctionKeyPressed(t)||t.rightButton||!1;(this.invertPan||"pan"===this.dragMode)&&(n=!n);const r=this.controllerState[n?"panStart":"rotateStart"]({pos:e});return this._panMove=n,this.updateViewport(r,pc,{isDragging:!0}),!0}_onPan(t){return!!this.isDragging()&&(this._panMove?this._onPanMove(t):this._onPanRotate(t))}_onPanEnd(t){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(t):this._onPanRotateEnd(t))}_onPanMove(t){if(!this.dragPan)return!1;const e=this.getCenter(t),n=this.controllerState.pan({pos:e});return this.updateViewport(n,pc,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(t){const{inertia:e}=this;if(this.dragPan&&e&&t.velocity){const n=this.getCenter(t),r=[n[0]+t.velocityX*e/2,n[1]+t.velocityY*e/2],i=this.controllerState.pan({pos:r}).panEnd();this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:e,transitionEasing:fc},{isDragging:!1,isPanning:!0})}else{const t=this.controllerState.panEnd();this.updateViewport(t,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(t){if(!this.dragRotate)return!1;const e=this.getCenter(t),n=this.controllerState.rotate({pos:e});return this.updateViewport(n,pc,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(t){const{inertia:e}=this;if(this.dragRotate&&e&&t.velocity){const n=this.getCenter(t),r=[n[0]+t.velocityX*e/2,n[1]+t.velocityY*e/2],i=this.controllerState.rotate({pos:r}).rotateEnd();this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:e,transitionEasing:fc},{isDragging:!1,isRotating:!0})}else{const t=this.controllerState.rotateEnd();this.updateViewport(t,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(t){if(!this.scrollZoom)return!1;t.srcEvent.preventDefault();const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;const{speed:n=.01,smooth:r=!1}=!0===this.scrollZoom?{}:this.scrollZoom,{delta:i}=t;let o=2/(1+Math.exp(-Math.abs(i*n)));i<0&&0!==o&&(o=1/o);const s=this.controllerState.zoom({pos:e,scale:o});return this.updateViewport(s,{...this._getTransitionProps({around:e}),transitionDuration:r?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(t){const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;const n=this.controllerState.rotateStart({pos:e});return this.updateViewport(n,pc,{isDragging:!0}),!0}_onTriplePan(t){if(!this.touchRotate)return!1;if(!this.isDragging())return!1;const e=this.getCenter(t);e[0]-=t.deltaX;const n=this.controllerState.rotate({pos:e});return this.updateViewport(n,pc,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(t){if(!this.isDragging())return!1;const{inertia:e}=this;if(this.touchRotate&&e&&t.velocityY){const n=this.getCenter(t),r=[n[0],n[1]+=t.velocityY*e/2],i=this.controllerState.rotate({pos:r});this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:e,transitionEasing:fc},{isDragging:!1,isRotating:!0}),this.blockEvents(e)}else{const t=this.controllerState.rotateEnd();this.updateViewport(t,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(t){const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;const n=this.controllerState.zoomStart({pos:e}).rotateStart({pos:e});return xc._startPinchRotation=t.rotation,xc._lastPinchEvent=t,this.updateViewport(n,pc,{isDragging:!0}),!0}_onPinch(t){if(!this.touchZoom&&!this.touchRotate)return!1;if(!this.isDragging())return!1;let e=this.controllerState;if(this.touchZoom){const{scale:n}=t,r=this.getCenter(t);e=e.zoom({pos:r,scale:n})}if(this.touchRotate){const{rotation:n}=t;e=e.rotate({deltaAngleX:xc._startPinchRotation-n})}return this.updateViewport(e,pc,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),xc._lastPinchEvent=t,!0}_onPinchEnd(t){if(!this.isDragging())return!1;const{inertia:e}=this,{_lastPinchEvent:n}=xc;if(this.touchZoom&&e&&n&&t.scale!==n.scale){const r=this.getCenter(t);let i=this.controllerState.rotateEnd();const o=Math.log2(t.scale),s=(o-Math.log2(n.scale))/(t.deltaTime-n.deltaTime),a=Math.pow(2,o+s*e/2);i=i.zoom({pos:r,scale:a}).zoomEnd(),this.updateViewport(i,{...this._getTransitionProps({around:r}),transitionDuration:e,transitionEasing:fc},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(e)}else{const t=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(t,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return xc._startPinchRotation=null,xc._lastPinchEvent=null,!0}_onDoubleTap(t){if(!this.doubleClickZoom)return!1;const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;const n=this.isFunctionKeyPressed(t),r=this.controllerState.zoom({pos:e,scale:n?.5:2});return this.updateViewport(r,this._getTransitionProps({around:e}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(t){if(!this.keyboard)return!1;const e=this.isFunctionKeyPressed(t),{zoomSpeed:n,moveSpeed:r,rotateSpeedX:i,rotateSpeedY:o}=!0===this.keyboard?{}:this.keyboard,{controllerState:s}=this;let a;const c={};switch(t.srcEvent.code){case"Minus":a=e?s.zoomOut(n).zoomOut(n):s.zoomOut(n),c.isZooming=!0;break;case"Equal":a=e?s.zoomIn(n).zoomIn(n):s.zoomIn(n),c.isZooming=!0;break;case"ArrowLeft":e?(a=s.rotateLeft(i),c.isRotating=!0):(a=s.moveLeft(r),c.isPanning=!0);break;case"ArrowRight":e?(a=s.rotateRight(i),c.isRotating=!0):(a=s.moveRight(r),c.isPanning=!0);break;case"ArrowUp":e?(a=s.rotateUp(o),c.isRotating=!0):(a=s.moveUp(r),c.isPanning=!0);break;case"ArrowDown":e?(a=s.rotateDown(o),c.isRotating=!0):(a=s.moveDown(r),c.isPanning=!0);break;default:return!1}return this.updateViewport(a,this._getTransitionProps(),c),!0}_getTransitionProps(t){const{transition:e}=this;return e&&e.transitionInterpolator?t?{...e,transitionInterpolator:new hc({...t,...e.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:e:pc}}class wc{constructor(t,e){i(this,"_viewportProps",void 0),i(this,"_state",void 0),this._viewportProps=this.applyConstraints(t),this._state=e}getViewportProps(){return this._viewportProps}getState(){return this._state}}class Ec extends wc{constructor(t){const{width:e,height:n,latitude:r,longitude:o,zoom:s,bearing:a=0,pitch:c=0,altitude:l=1.5,position:u=[0,0,0],maxZoom:h=20,minZoom:p=0,maxPitch:f=60,minPitch:d=0,startPanLngLat:g,startZoomLngLat:m,startRotatePos:y,startBearing:_,startPitch:v,startZoom:x,normalize:b=!0}=t;Ja(Number.isFinite(o)),Ja(Number.isFinite(r)),Ja(Number.isFinite(s)),super({width:e,height:n,latitude:r,longitude:o,zoom:s,bearing:a,pitch:c,altitude:l,maxZoom:h,minZoom:p,maxPitch:f,minPitch:d,normalize:b,position:u},{startPanLngLat:g,startZoomLngLat:m,startRotatePos:y,startBearing:_,startPitch:v,startZoom:x}),i(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanLngLat:this._unproject(t)})}pan({pos:t,startPos:e}){const n=this.getState().startPanLngLat||this._unproject(e);if(!n)return this;const r=this.makeViewport(this.getViewportProps()).panByPosition(n,t);return this._getUpdatedState(r)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:t,deltaAngleX:e=0,deltaAngleY:n=0}){const{startRotatePos:r,startBearing:i,startPitch:o}=this.getState();if(!r||void 0===i||void 0===o)return this;let s;return s=t?this._getNewRotation(t,r,o,i):{bearing:i+e,pitch:o+n},this._getUpdatedState(s)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:t}){return this._getUpdatedState({startZoomLngLat:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:e,scale:n}){let{startZoom:r,startZoomLngLat:i}=this.getState();if(i||(r=this.getViewportProps().zoom,i=this._unproject(e)||this._unproject(t)),!i)return this;const{maxZoom:o,minZoom:s}=this.getViewportProps();let a=r+Math.log2(n);a=hn(a,s,o);const c=this.makeViewport({...this.getViewportProps(),zoom:a});return this._getUpdatedState({zoom:a,...c.panByPosition(i,t)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(t=2){return this._zoomFromCenter(t)}zoomOut(t=2){return this._zoomFromCenter(1/t)}moveLeft(t=100){return this._panFromCenter([t,0])}moveRight(t=100){return this._panFromCenter([-t,0])}moveUp(t=100){return this._panFromCenter([0,t])}moveDown(t=100){return this._panFromCenter([0,-t])}rotateLeft(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-t})}rotateRight(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+t})}rotateUp(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+t})}rotateDown(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-t})}shortestPathFrom(t){const e=t.getViewportProps(),n={...this.getViewportProps()},{bearing:r,longitude:i}=n;return Math.abs(r-e.bearing)>180&&(n.bearing=r<0?r+360:r-360),Math.abs(i-e.longitude)>180&&(n.longitude=i<0?i+360:i-360),n}applyConstraints(t){const{maxZoom:e,minZoom:n,zoom:r}=t;t.zoom=hn(r,n,e);const{maxPitch:i,minPitch:o,pitch:s}=t;t.pitch=hn(s,o,i);const{normalize:a=!0}=t;return a&&Object.assign(t,function(t){const{width:e,height:n,pitch:r=0}=t;let{longitude:i,latitude:o,zoom:s,bearing:a=0}=t;(i<-180||i>180)&&(i=ir(i+180,360)-180),(a<-180||a>180)&&(a=ir(a+180,360)-180);const c=sr(n/512);if(s<=c)s=c,o=0;else{const t=n/2/Math.pow(2,s),e=yr([0,t])[1];if(o<e)o=e;else{const e=yr([0,512-t])[1];o>e&&(o=e)}}return{width:e,height:n,longitude:i,latitude:o,zoom:s,pitch:r,bearing:a}}(t)),t}_zoomFromCenter(t){const{width:e,height:n}=this.getViewportProps();return this.zoom({pos:[e/2,n/2],scale:t})}_panFromCenter(t){const{width:e,height:n}=this.getViewportProps();return this.pan({startPos:[e/2,n/2],pos:[e/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}_unproject(t){const e=this.makeViewport(this.getViewportProps());return t&&e.unproject(t)}_getNewRotation(t,e,n,r){const i=t[0]-e[0],o=t[1]-e[1],s=t[1],a=e[1],{width:c,height:l}=this.getViewportProps(),u=i/c;let h=0;o>0?Math.abs(l-a)>5&&(h=o/(a-l)*1.2):o<0&&a>5&&(h=1-s/a),h=hn(h,-1,1);const{minPitch:p,maxPitch:f}=this.getViewportProps();let d=n;return h>0?d=n+h*(f-n):h<0&&(d=n-h*(p-n)),{pitch:d,bearing:r+180*u}}}class Tc extends bc{constructor(...t){super(...t),i(this,"ControllerState",Ec),i(this,"transition",{transitionDuration:300,transitionInterpolator:new hc({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),i(this,"dragMode","pan")}setProps(t){t.position=t.position||[0,0,0];const e=this.props;super.setProps(t);(!e||e.height!==t.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...t,...this.state}))}}class Sc extends Qa{get ViewportType(){return tc}get ControllerType(){return Tc}}i(Sc,"displayName","MapView");const kc=[255,255,255],Ac=1;let Mc=0;class Ic{constructor(t={}){i(this,"id",void 0),i(this,"color",void 0),i(this,"intensity",void 0),i(this,"type","ambient");const{color:e=kc}=t,{intensity:n=Ac}=t;this.id=t.id||"ambient-".concat(Mc++),this.color=e,this.intensity=n}}const Cc=[255,255,255],Oc=1,Pc=[0,0,-1];let Lc=0;class Dc{constructor(t={}){i(this,"id",void 0),i(this,"color",void 0),i(this,"intensity",void 0),i(this,"type","directional"),i(this,"direction",void 0),i(this,"shadow",void 0);const{color:e=Cc}=t,{intensity:n=Oc}=t,{direction:r=Pc}=t,{_shadow:o=!1}=t;this.id=t.id||"directional-".concat(Lc++),this.color=e,this.intensity=n,this.type="directional",this.direction=new In(r).normalize().toArray(),this.shadow=o}getProjectedLight(t){return this}}class Rc{constructor(t,e={id:"pass"}){i(this,"id",void 0),i(this,"gl",void 0),i(this,"props",void 0);const{id:n}=e;this.id=n,this.gl=t,this.props={...e}}setProps(t){Object.assign(this.props,t)}render(t){}cleanup(){}}class Nc extends Rc{constructor(...t){super(...t),i(this,"_lastRenderIndex",-1)}render(t){return yo(this.gl,{framebuffer:t.target}),this._drawLayers(t)}_drawLayers(t){const{target:e,moduleParameters:n,viewports:r,views:i,onViewportActive:o,clearStack:s=!0,clearCanvas:a=!0}=t;t.pass=t.pass||"unknown";const c=this.gl;a&&function(t,e){const n=e?e.width:t.drawingBufferWidth,r=e?e.height:t.drawingBufferHeight;yo(t,{viewport:[0,0,n,r]}),t.clear(16640)}(c,e),s&&(this._lastRenderIndex=-1);const l=[];for(const s of r){const r=i&&i[s.id];null==o||o(s);const a=this._getDrawLayerParams(s,t),u=s.subViewports||[s];for(const i of u){const o=this._drawLayersInViewport(c,{target:e,moduleParameters:n,viewport:i,view:r,pass:t.pass,layers:t.layers},a);l.push(o)}}return l}_getDrawLayerParams(t,{layers:e,pass:n,isPicking:r=!1,layerFilter:i,cullRect:o,effects:s,moduleParameters:a},c=!1){const l=[],u=jc(this._lastRenderIndex+1),h={layer:e[0],viewport:t,isPicking:r,renderPass:n,cullRect:o},p={};for(let r=0;r<e.length;r++){const o=e[r],f=this._shouldDrawLayer(o,h,i,p),d={shouldDrawLayer:f};f&&!c&&(d.layerRenderIndex=u(o,f),d.moduleParameters=this._getModuleParameters(o,s,n,a),d.layerParameters=this.getLayerParameters(o,r,t)),l[r]=d}return l}_drawLayersInViewport(t,{layers:e,moduleParameters:n,pass:r,target:i,viewport:o,view:s},a){const c=function(t,{moduleParameters:e,target:n,viewport:r}){const i=n&&"default-framebuffer"!==n.id,o=e&&e.devicePixelRatio||vo(t),s=i?n.height:t.drawingBufferHeight,a=r;return[a.x*o,s-(a.y+a.height)*o,a.width*o,a.height*o]}(t,{moduleParameters:n,target:i,viewport:o});if(s&&s.props.clear){const e=!0===s.props.clear?{color:!0,depth:!0}:s.props.clear;_o(t,{scissorTest:!0,scissor:c},(()=>fs(t,e)))}const l={totalCount:e.length,visibleCount:0,compositeCount:0,pickableCount:0};yo(t,{viewport:c});for(let t=0;t<e.length;t++){const n=e[t],{shouldDrawLayer:i,layerRenderIndex:s,moduleParameters:c,layerParameters:u}=a[t];if(i&&n.props.pickable&&l.pickableCount++,n.isComposite)l.compositeCount++;else if(i){l.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,s),c.viewport=o;try{n._drawLayer({moduleParameters:c,uniforms:{layerIndex:s},parameters:u})}catch(t){n.raiseError(t,"drawing ".concat(n," to ").concat(r))}}}return l}shouldDrawLayer(t){return!0}getModuleParameters(t,e){return null}getLayerParameters(t,e,n){return t.props.parameters}_shouldDrawLayer(t,e,n,r){if(!(t.props.visible&&this.shouldDrawLayer(t)))return!1;e.layer=t;let i=t.parent;for(;i;){if(!i.props.visible||!i.filterSubLayer(e))return!1;e.layer=i,i=i.parent}if(n){const t=e.layer.id;if(t in r||(r[t]=n(e)),!r[t])return!1}return t.activateViewport(e.viewport),!0}_getModuleParameters(t,e,n,r){var i;const o=Object.assign(Object.create((null===(i=t.internalState)||void 0===i?void 0:i.propsInTransition)||t.props),{autoWrapLongitude:t.wrapLongitude,viewport:t.context.viewport,mousePosition:t.context.mousePosition,pickingActive:0,devicePixelRatio:vo(this.gl)});if(e)for(const n of e){var s;Object.assign(o,null===(s=n.getModuleParameters)||void 0===s?void 0:s.call(n,t))}return Object.assign(o,this.getModuleParameters(t,e),r)}}function jc(t=0,e={}){const n={},r=(i,o)=>{const s=i.props._offset,a=i.id,c=i.parent&&i.parent.id;let l;if(c&&!(c in e)&&r(i.parent,!1),c in n){const t=n[c]=n[c]||jc(e[c],e);l=t(i,o),n[a]=t}else Number.isFinite(s)?(l=s+(e[c]||0),n[a]=null):l=t;return o&&l>=t&&(t=l+1),e[a]=l,l};return r}class zc extends Nc{constructor(t,e){super(t,e),i(this,"shadowMap",void 0),i(this,"depthBuffer",void 0),i(this,"fbo",void 0),this.shadowMap=new as(t,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new us(t,{format:33189,width:1,height:1}),this.fbo=new Ms(t,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(t){const e=this.fbo;_o(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},(()=>{const n=t.viewports[0],r=vo(this.gl),i=n.width*r,o=n.height*r;i===e.width&&o===e.height||e.resize({width:i,height:o}),super.render({...t,target:e,pass:"shadow"})}))}shouldDrawLayer(t){return!1!==t.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const Bc=La((function({viewport:t,center:e}){return new Qn(t.viewProjectionMatrix).invert().transform(e)})),Fc=La((function({viewport:t,shadowMatrices:e}){const n=[],r=t.pixelUnprojectionMatrix,i=t.isGeospatial?void 0:1,o=[[0,0,i],[t.width,0,i],[0,t.height,i],[t.width,t.height,i],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map((t=>function(t,e){const[n,r,i]=t,o=kr([n,r,i],e);if(Number.isFinite(i))return o;return[o[0],o[1],0]}(t,r)));for(const r of e){const e=r.clone().translate(new In(t.center).negate()),i=o.map((t=>e.transform(t))),s=(new Qn).ortho({left:Math.min(...i.map((t=>t[0]))),right:Math.max(...i.map((t=>t[0]))),bottom:Math.min(...i.map((t=>t[1]))),top:Math.max(...i.map((t=>t[1]))),near:Math.min(...i.map((t=>-t[2]))),far:Math.max(...i.map((t=>-t[2])))});n.push(s.multiplyRight(r))}return n})),Uc=[0,0,0,1],Vc=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];var qc={name:"shadow",dependencies:[Va],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?function(t,e){const{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const r={shadow_uDrawShadowMap:Boolean(t.drawToShadowMap),shadow_uUseShadowMap:!!t.shadowMaps&&t.shadowMaps.length>0,shadow_uColor:t.shadowColor||Uc,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},i=Bc({viewport:t.viewport,center:e.project_uCenter}),o=[],s=Fc({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let n=0;n<t.shadowMatrices.length;n++){const r=s[n],a=r.clone().translate(new In(t.viewport.center).negate());e.project_uCoordinateSystem===Cr.LNGLAT&&e.project_uProjectionMode===Or.WEB_MERCATOR?(s[n]=a,o[n]=i):(s[n]=r.clone().multiplyRight(Vc),o[n]=a.transform(i))}for(let e=0;e<s.length;e++)r["shadow_uViewProjectionMatrices[".concat(e,"]")]=s[e],r["shadow_uProjectCenters[".concat(e,"]")]=o[e],t.shadowMaps&&t.shadowMaps.length>0?r["shadow_uShadowMap".concat(e)]=t.shadowMaps[e]:r["shadow_uShadowMap".concat(e)]=t.dummyShadowMap;return r}(t,e):{}};const Wc={color:[255,255,255],intensity:1},Gc=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],$c=[0,0,0,200/255];class Hc{constructor(t={}){i(this,"id","lighting-effect"),i(this,"props",void 0),i(this,"shadowColor",$c),i(this,"shadow",void 0),i(this,"ambientLight",void 0),i(this,"directionalLights",void 0),i(this,"pointLights",void 0),i(this,"shadowPasses",[]),i(this,"shadowMaps",[]),i(this,"dummyShadowMap",null),i(this,"programManager",void 0),i(this,"shadowMatrices",void 0),this.setProps(t)}setProps(t){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const e in t){const n=t[e];switch(n.type){case"ambient":this.ambientLight=n;break;case"directional":this.directionalLights.push(n);break;case"point":this.pointLights.push(n)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some((t=>t.shadow)),this.props=t}preRender(t,{layers:e,layerFilter:n,viewports:r,onViewportActive:i,views:o}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),0===this.shadowPasses.length&&this._createShadowPasses(t),this.programManager||(this.programManager=Ta.getDefaultProgramManager(t),qc&&this.programManager.addDefaultModule(qc)),this.dummyShadowMap||(this.dummyShadowMap=new as(t,{width:1,height:1}));for(let t=0;t<this.shadowPasses.length;t++){this.shadowPasses[t].render({layers:e,layerFilter:n,viewports:r,onViewportActive:i,views:o,moduleParameters:{shadowLightId:t,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}}getModuleParameters(t){const e=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return e.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map((e=>e.getProjectedLight({layer:t}))),pointLights:this.pointLights.map((e=>e.getProjectedLight({layer:t})))},e}cleanup(){for(const t of this.shadowPasses)t.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(qc),this.programManager=null)}_calculateMatrices(){const t=[];for(const e of this.directionalLights){const n=(new Qn).lookAt({eye:new In(e.direction).negate()});t.push(n)}return t}_createShadowPasses(t){for(let e=0;e<this.directionalLights.length;e++){const n=new zc(t);this.shadowPasses[e]=n,this.shadowMaps[e]=n.shadowMap}}_applyDefaultLights(){const{ambientLight:t,pointLights:e,directionalLights:n}=this;t||0!==e.length||0!==n.length||(this.ambientLight=new Ic(Wc),this.directionalLights.push(new Dc(Gc[0]),new Dc(Gc[1])))}}const Zc=new Hc;class Yc{constructor(){i(this,"effects",void 0),i(this,"_resolvedEffects",[]),i(this,"_defaultEffects",[]),i(this,"_needsRedraw",void 0),this.effects=[],this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(t){const e=this._defaultEffects;if(!e.find((e=>e.id===t.id))){const n=e.findIndex((e=>{return n=t,(null!==(r=e.order)&&void 0!==r?r:1/0)-(null!==(i=n.order)&&void 0!==i?i:1/0)>0;var n,r,i}));n<0?e.push(t):e.splice(n,0,t),this._setEffects(this.effects)}}setProps(t){"effects"in t&&(Ha(t.effects,this.effects,1)||this._setEffects(t.effects))}needsRedraw(t={clearRedrawFlags:!1}){const e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}getEffects(){return this._resolvedEffects}_setEffects(t){const e={};for(const t of this.effects)e[t.id]=t;const n=[];for(const r of t){const t=e[r.id];t&&t!==r?t.setProps?(t.setProps(r.props),n.push(t)):(t.cleanup(),n.push(r)):n.push(r),delete e[r.id]}for(const t in e)e[t].cleanup();this.effects=n,this._resolvedEffects=n.concat(this._defaultEffects),t.some((t=>t instanceof Hc))||this._resolvedEffects.push(Zc),this._needsRedraw="effects changed"}finalize(){for(const t of this._resolvedEffects)t.cleanup();this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class Xc extends Nc{shouldDrawLayer(t){const{operation:e}=t.props;return e.includes("draw")||e.includes("terrain")}}const Kc={blendFunc:[1,0,32771,0],blendEquation:32774};class Jc extends Nc{constructor(...t){super(...t),i(this,"pickZ",void 0),i(this,"_colorEncoderState",null)}render(t){return"pickingFBO"in t?this._drawPickingBuffer(t):super.render(t)}_drawPickingBuffer({layers:t,layerFilter:e,views:n,viewports:r,onViewportActive:i,pickingFBO:o,deviceRect:{x:s,y:a,width:c,height:l},cullRect:u,effects:h,pass:p="picking",pickZ:f,moduleParameters:d}){const g=this.gl;this.pickZ=f;const m=this._resetColorEncoder(f),y=_o(g,{scissorTest:!0,scissor:[s,a,c,l],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...Kc,blend:!f},(()=>super.render({target:o,layers:t,layerFilter:e,views:n,viewports:r,onViewportActive:i,cullRect:u,effects:null==h?void 0:h.filter((t=>t.useInPicking)),pass:p,isPicking:!0,moduleParameters:d})));this._colorEncoderState=null;return{decodePickingColor:m&&Qc.bind(null,m),stats:y}}shouldDrawLayer(t){const{pickable:e,operation:n}=t.props;return e&&n.includes("draw")||n.includes("terrain")}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(t,e,n){const r={...t.props.parameters},{pickable:i,operation:o}=t.props;return this._colorEncoderState?i&&o.includes("draw")&&(Object.assign(r,Kc),r.blend=!0,r.blendColor=function(t,e,n){const{byLayer:r,byAlpha:i}=t;let o,s=r.get(e);s?(s.viewports.push(n),o=s.a):(o=r.size+1,o<=255?(s={a:o,layer:e,viewports:[n]},r.set(e,s),i[o]=s):(G.warn("Too many pickable layers, only picking the first 255")(),o=0));return[0,0,0,o/255]}(this._colorEncoderState,t,n)):r.blend=!1,o.includes("terrain")&&(r.blend=!1),r}_resetColorEncoder(t){return this._colorEncoderState=t?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function Qc(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}class tl{constructor(t){i(this,"gl",void 0),i(this,"layerFilter",void 0),i(this,"drawPickingColors",void 0),i(this,"drawLayersPass",void 0),i(this,"pickLayersPass",void 0),i(this,"renderCount",void 0),i(this,"_needsRedraw",void 0),i(this,"renderBuffers",void 0),i(this,"lastPostProcessEffect",void 0),this.gl=t,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new Xc(t),this.pickLayersPass=new Jc(t),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(t){this.layerFilter!==t.layerFilter&&(this.layerFilter=t.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==t.drawPickingColors&&(this.drawPickingColors=t.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(t){if(!t.viewports.length)return;const e=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,n={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...t,target:t.target||Ms.getDefaultFramebuffer(this.gl)};n.effects&&this._preRender(n.effects,n);const r=this.lastPostProcessEffect?this.renderBuffers[0]:n.target,i=e.render({...n,target:r});n.effects&&this._postRender(n.effects,n),this.renderCount++,Z("deckRenderer.renderLayers",this,i,t)}needsRedraw(t={clearRedrawFlags:!1}){const e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}finalize(){const{renderBuffers:t}=this;for(const e of t)e.delete();t.length=0}_preRender(t,e){this.lastPostProcessEffect=null,e.preRenderStats=e.preRenderStats||{};for(const n of t)e.preRenderStats[n.id]=n.preRender(this.gl,e),n.postRender&&(this.lastPostProcessEffect=n.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:t}=this;0===t.length&&t.push(new Ms(this.gl),new Ms(this.gl));for(const e of t)e.resize()}_postRender(t,e){const{renderBuffers:n}=this,r={...e,inputBuffer:n[0],swapBuffer:n[1],target:null};for(const i of t)if(i.postRender){if(i.id===this.lastPostProcessEffect){r.target=e.target,i.postRender(this.gl,r);break}const t=i.postRender(this.gl,r);r.inputBuffer=t,r.swapBuffer=t===n[0]?n[1]:n[0]}}}const el={pickedColor:null,pickedObjectIndex:-1};function nl({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:r,deviceRadius:i,deviceRect:o}){const{x:s,y:a,width:c,height:l}=o;let u=i*i,h=-1,p=0;for(let e=0;e<l;e++){const i=e+a-r,o=i*i;if(o>u)p+=4*c;else for(let e=0;e<c;e++){if(t[p+3]-1>=0){const t=e+s-n,r=t*t+o;r<=u&&(u=r,h=p)}p+=4}}if(h>=0){const n=t.slice(h,h+4),r=e(n);if(r){const t=Math.floor(h/4/c),e=h/4-t*c;return{...r,pickedColor:n,pickedX:s+e,pickedY:a+t}}G.error("Picked non-existent layer. Is picking buffer corrupt?")()}return el}function rl({pickInfo:t,viewports:e,pixelRatio:n,x:r,y:i,z:o}){let s,a=e[0];if(e.length>1&&(a=function(t,e){for(let n=t.length-1;n>=0;n--){const r=t[n];if(r.containsPixel(e))return r}return t[0]}((null==t?void 0:t.pickedViewports)||e,{x:r,y:i})),a){const t=[r-a.x,i-a.y];void 0!==o&&(t[2]=o),s=a.unproject(t)}return{color:null,layer:null,viewport:a,index:-1,picked:!1,x:r,y:i,pixel:[r,i],coordinate:s,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function il(t){const{pickInfo:e,lastPickedInfo:n,mode:r,layers:i}=t,{pickedColor:o,pickedLayer:s,pickedObjectIndex:a}=e,c=s?[s]:[];if("hover"===r){const t=n.index,e=n.layerId,r=s?s.props.id:null;if(r!==e||a!==t){if(r!==e){const t=i.find((t=>t.props.id===e));t&&c.unshift(t)}n.layerId=r,n.index=a,n.info=null}}const l=rl(t),u=new Map;return u.set(null,l),c.forEach((t=>{let e={...l};t===s&&(e.color=o,e.index=a,e.picked=!0),e=ol({layer:t,info:e,mode:r});const i=e.layer;t===s&&"hover"===r&&(n.info=e),u.set(i.id,e),"hover"===r&&i.updateAutoHighlight(e)})),u}function ol({layer:t,info:e,mode:n}){for(;t&&e;){const r=e.layer||null;e.sourceLayer=r,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:r}),t=t.parent}return e}class sl{constructor(t){i(this,"gl",void 0),i(this,"pickingFBO",void 0),i(this,"depthFBO",void 0),i(this,"pickLayersPass",void 0),i(this,"layerFilter",void 0),i(this,"lastPickedInfo",void 0),i(this,"_pickable",!0),this.gl=t,this.pickLayersPass=new Jc(t),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(t){"layerFilter"in t&&(this.layerFilter=t.layerFilter),"_pickable"in t&&(this._pickable=t._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(t){return this._pickClosestObject(t)}pickObjects(t){return this._pickVisibleObjects(t)}getLastPickedObject({x:t,y:e,layers:n,viewports:r},i=this.lastPickedInfo.info){const o=i&&i.layer&&i.layer.id,s=i&&i.viewport&&i.viewport.id,a=o?n.find((t=>t.id===o)):null,c=s&&r.find((t=>t.id===s))||r[0],l=c&&c.unproject([t-c.x,e-c.y]),u={x:t,y:e,viewport:c,coordinate:l,layer:a};return{...i,...u}}_resizeBuffer(){var t,e;const{gl:n}=this;if(!this.pickingFBO&&(this.pickingFBO=new Ms(n),Ms.isSupported(n,{colorBufferFloat:!0}))){const t=new Ms(n);t.attach({36064:new as(n,{format:Ni(n)?34836:6408,type:5126})}),this.depthFBO=t}null===(t=this.pickingFBO)||void 0===t||t.resize({width:n.canvas.width,height:n.canvas.height}),null===(e=this.depthFBO)||void 0===e||e.resize({width:n.canvas.width,height:n.canvas.height})}_getPickable(t){if(!1===this._pickable)return null;const e=t.filter((t=>this.pickLayersPass.shouldDrawLayer(t)&&!t.isComposite));return e.length?e:null}_pickClosestObject({layers:t,views:e,viewports:n,x:r,y:i,radius:o=0,depth:s=1,mode:a="query",unproject3D:c,onViewportActive:l,effects:u}){const h=this._getPickable(t),p=vo(this.gl);if(!h)return{result:[],emptyInfo:rl({viewports:n,x:r,y:i,pixelRatio:p})};this._resizeBuffer();const f=xo(this.gl,[r,i],!0),d=[f.x+Math.floor(f.width/2),f.y+Math.floor(f.height/2)],g=Math.round(o*p),{width:m,height:y}=this.pickingFBO,_=this._getPickingRect({deviceX:d[0],deviceY:d[1],deviceRadius:g,deviceWidth:m,deviceHeight:y}),v={x:r-o,y:i-o,width:2*o+1,height:2*o+1};let x;const b=[],w=new Set;for(let t=0;t<s;t++){let o,f;if(_){o=nl({...this._drawAndSample({layers:h,views:e,viewports:n,onViewportActive:l,deviceRect:_,cullRect:v,effects:u,pass:"picking:".concat(a)}),deviceX:d[0],deviceY:d[1],deviceRadius:g,deviceRect:_})}else o={pickedColor:null,pickedObjectIndex:-1};if(o.pickedLayer&&c&&this.depthFBO){const{pickedColors:t}=this._drawAndSample({layers:[o.pickedLayer],views:e,viewports:n,onViewportActive:l,deviceRect:{x:o.pickedX,y:o.pickedY,width:1,height:1},cullRect:v,effects:u,pass:"picking:".concat(a,":z")},!0);t[3]&&(f=t[0])}o.pickedLayer&&t+1<s&&(w.add(o.pickedLayer),o.pickedLayer.disablePickingIndex(o.pickedObjectIndex)),x=il({pickInfo:o,lastPickedInfo:this.lastPickedInfo,mode:a,layers:h,viewports:n,x:r,y:i,z:f,pixelRatio:p});for(const t of x.values())t.layer&&b.push(t);if(!o.pickedColor)break}for(const t of w)t.restorePickingColors();return{result:b,emptyInfo:x.get(null)}}_pickVisibleObjects({layers:t,views:e,viewports:n,x:r,y:i,width:o=1,height:s=1,mode:a="query",maxObjects:c=null,onViewportActive:l,effects:u}){const h=this._getPickable(t);if(!h)return[];this._resizeBuffer();const p=vo(this.gl),f=xo(this.gl,[r,i],!0),d=f.x,g=f.y+f.height,m=xo(this.gl,[r+o,i+s],!0),y=m.x+m.width,_=m.y,v={x:d,y:_,width:y-d,height:g-_},x=function({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t)for(let r=0;r<t.length;r+=4)if(t[r+3]-1>=0){const i=t.slice(r,r+4),o=i.join(",");if(!n.has(o)){const t=e(i);t?n.set(o,{...t,color:i}):G.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Array.from(n.values())}(this._drawAndSample({layers:h,views:e,viewports:n,onViewportActive:l,deviceRect:v,cullRect:{x:r,y:i,width:o,height:s},effects:u,pass:"picking:".concat(a)})),b=new Map,w=Number.isFinite(c);for(let t=0;t<x.length&&!(w&&c&&b.size>=c);t++){const e=x[t];let n={color:e.pickedColor,layer:null,index:e.pickedObjectIndex,picked:!0,x:r,y:i,pixelRatio:p};n=ol({layer:e.pickedLayer,info:n,mode:a}),b.has(n.object)||b.set(n.object,n)}return Array.from(b.values())}_drawAndSample({layers:t,views:e,viewports:n,onViewportActive:r,deviceRect:i,cullRect:o,effects:s,pass:a},c=!1){const l=c?this.depthFBO:this.pickingFBO,u={layers:t,layerFilter:this.layerFilter,views:e,viewports:n,onViewportActive:r,pickingFBO:l,deviceRect:i,cullRect:o,effects:s,pass:a,pickZ:c,preRenderStats:{}};for(const t of s)t.useInPicking&&(u.preRenderStats[t.id]=t.preRender(this.gl,u));const{decodePickingColor:h}=this.pickLayersPass.render(u),{x:p,y:f,width:d,height:g}=i,m=new(c?Float32Array:Uint8Array)(d*g*4);return _s(l,{sourceX:p,sourceY:f,sourceWidth:d,sourceHeight:g,target:m}),{pickedColors:m,decodePickingColor:h}}_getPickingRect({deviceX:t,deviceY:e,deviceRadius:n,deviceWidth:r,deviceHeight:i}){const o=Math.max(0,t-n),s=Math.max(0,e-n),a=Math.min(r,t+n+1)-o,c=Math.min(i,e+n+1)-s;return a<=0||c<=0?null:{x:o,y:s,width:a,height:c}}}const al={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class cl{constructor(t){i(this,"el",null),i(this,"isVisible",!1);const e=t.parentElement;e&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,al),e.appendChild(this.el))}setTooltip(t,e,n){const r=this.el;if(r){if("string"==typeof t)r.innerText=t;else{if(!t)return this.isVisible=!1,void(r.style.display="none");t.text&&(r.innerText=t.text),t.html&&(r.innerHTML=t.html),t.className&&(r.className=t.className)}this.isVisible=!0,r.style.display="block",r.style.transform="translate(".concat(e,"px, ").concat(n,"px)"),t&&"object"==typeof t&&"style"in t&&Object.assign(r.style,t.style)}}remove(){this.el&&(this.el.remove(),this.el=null)}}const{_parseImageNode:ll}=globalThis,ul="undefined"!=typeof Image,hl="undefined"!=typeof ImageBitmap,pl=Boolean(ll),fl=!!Qt||pl;function dl(t){const e=ml(t);if(!e)throw new Error("Not an image");return e}function gl(t){switch(dl(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function ml(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&t instanceof Image?"image":t&&"object"==typeof t&&t.data&&t.width&&t.height?"data":null}const yl=/^data:image\/svg\+xml/,_l=/\.svg((\?|#).*)?$/;function vl(t){return t&&(yl.test(t)||_l.test(t))}function xl(t,e){if(vl(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function bl(t,e,n){const r=function(t,e){if(vl(e)){let e=(new TextDecoder).decode(t);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(e=unescape(encodeURIComponent(e)))}catch(t){throw new Error(t.message)}return"data:image/svg+xml;base64,".concat(btoa(e))}return xl(t,e)}(t,n),i=self.URL||self.webkitURL,o="string"!=typeof r&&i.createObjectURL(r);try{return await async function(t,e){const n=new Image;if(n.src=t,e.image&&e.image.decode&&n.decode)return await n.decode(),n;return await new Promise(((e,r)=>{try{n.onload=()=>e(n),n.onerror=e=>r(new Error("Could not load image ".concat(t,": ").concat(e)))}catch(t){r(t)}}))}(o||r,e)}finally{o&&i.revokeObjectURL(o)}}var wl=n(25108);const El={};let Tl=!0;async function Sl(t,e,n){let r;if(vl(n)){r=await bl(t,e,n)}else r=xl(t,n);const i=e&&e.imagebitmap;return await async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(t){for(const e in t||El)return!1;return!0}(e)&&Tl||(e=null);if(e)try{return await createImageBitmap(t,e)}catch(t){wl.warn(t),Tl=!1}return await createImageBitmap(t)}(r,i)}function kl(t){return function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=(i=e,[...i].map((t=>t.charCodeAt(0))));var i;for(let e=0;e<r.length;++e)if(r[e]!==t[e+n])return!1;return!0}(t,"ftyp",4)?0==(96&t[8])?null:function(t){switch((e=t,n=8,r=12,String.fromCharCode(...e.slice(n,r))).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}var e,n,r}(t):null}const Al=!1,Ml=!0;function Il(t){const e=Cl(t);return function(t){const e=Cl(t),n=e.byteLength>=24&&2303741511===e.getUint32(0,Al);if(!n)return null;return{mimeType:"image/png",width:e.getUint32(16,Al),height:e.getUint32(20,Al)}}(e)||function(t){const e=Cl(t),n=e.byteLength>=3&&65496===e.getUint16(0,Al)&&255===e.getUint8(2);if(!n)return null;const{tableMarkers:r,sofMarkers:i}=function(){const t=new Set([65499,65476,65484,65501,65534]);for(let e=65504;e<65520;++e)t.add(e);const e=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:t,sofMarkers:e}}();let o=2;for(;o+9<e.byteLength;){const t=e.getUint16(o,Al);if(i.has(t))return{mimeType:"image/jpeg",height:e.getUint16(o+5,Al),width:e.getUint16(o+7,Al)};if(!r.has(t))return null;o+=2,o+=e.getUint16(o,Al)}return null}(e)||function(t){const e=Cl(t),n=e.byteLength>=10&&1195984440===e.getUint32(0,Al);if(!n)return null;return{mimeType:"image/gif",width:e.getUint16(6,Ml),height:e.getUint16(8,Ml)}}(e)||function(t){const e=Cl(t),n=e.byteLength>=14&&16973===e.getUint16(0,Al)&&e.getUint32(2,Ml)===e.byteLength;if(!n)return null;return{mimeType:"image/bmp",width:e.getUint32(18,Ml),height:e.getUint32(22,Ml)}}(e)||function(t){const e=new Uint8Array(t instanceof DataView?t.buffer:t),n=kl(e);if(!n)return null;return{mimeType:n.mimeType,width:0,height:0}}(e)}function Cl(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}const Ol={id:"image",module:"images",name:"Images",version:"3.4.14",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:async function(t,e,n){const r=((e=e||{}).image||{}).type||"auto",{url:i}=n||{};let o;switch(function(t){switch(t){case"auto":case"data":return function(){if(hl)return"imagebitmap";if(ul)return"image";if(fl)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(t){switch(t){case"auto":return hl||ul||fl;case"imagebitmap":return hl;case"image":return ul;case"data":return fl;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}(t),t}}(r)){case"imagebitmap":o=await Sl(t,e,i);break;case"image":o=await bl(t,e,i);break;case"data":o=await async function(t,e){const{mimeType:n}=Il(t)||{},r=globalThis._parseImageNode;return pt(r),await r(t,n)}(t);break;default:pt(!1)}return"data"===r&&(o=gl(o)),o},tests:[t=>Boolean(Il(new DataView(t)))],options:{image:{type:"auto",decode:!0}}};var Pl={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function(t){const e=t[0],n=t[t.length-1];return"{"===e&&"}"===n||"["===e&&"]"===n},parseTextSync:JSON.parse};const Ll=function(){const t="8.9.30",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error("deck.gl - multiple versions detected: ".concat(e," vs ").concat(t));return e||(G.log(1,"deck.gl ".concat(t))(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:G,_registerLoggers:H},function(t){const e=$e();t=Array.isArray(t)?t:[t];for(const n of t){const t=dt(n);e.find((e=>t===e))||e.unshift(t)}}([Pl,[Ol,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}(),Dl=globalThis;function Rl(t){if(!t&&!E())return"Node";if(b(t))return"Electron";const e="undefined"!=typeof navigator?navigator:{},n=t||e.userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i?"IE":Dl.chrome?"Chrome":Dl.safari?"Safari":Dl.mozInnerScreenX?"Firefox":"Unknown"}class Nl extends Uo{get[Symbol.toStringTag](){return"Query"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=Ni(t),r=Ss(t,bs);let i=n||r;for(const t of e)switch(t){case"queries":i=i&&n;break;case"timers":i=i&&r;break;default:Po(!1)}return i}constructor(t){super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery(){let{conservative:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.begin(t?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(t){return this._queryPending||(this.target=t,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const t=this.gl2.getQueryParameter(this.handle,34919);return t&&(this._queryPending=!1),t}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let e=0;return this._pollingPromise=new Promise(((n,r)=>{const i=()=>{this.isResultAvailable()?(n(this.getResult()),this._pollingPromise=null):e++>t?(r("Timed out"),this._pollingPromise=null):requestAnimationFrame(i)};requestAnimationFrame(i)})),this._pollingPromise}_createHandle(){return Nl.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}const jl=E()&&"undefined"!=typeof document;let zl=0;class Bl{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onCreateContext:e=(t=>Ao(t)),onAddHTML:n=null,onInitialize:r=(()=>{}),onRender:i=(()=>{}),onFinalize:o=(()=>{}),onError:s,gl:a=null,glOptions:c={},debug:l=!1,createFramebuffer:u=!1,autoResizeViewport:h=!0,autoResizeDrawingBuffer:p=!0,stats:f=Oo.get("animation-loop-".concat(zl++))}=t;let{useDevicePixels:d=!0}=t;"useDevicePixelRatio"in t&&(Oi.deprecated("useDevicePixelRatio","useDevicePixels")(),d=t.useDevicePixelRatio),this.props={onCreateContext:e,onAddHTML:n,onInitialize:r,onRender:i,onFinalize:o,onError:s,gl:a,glOptions:c,debug:l,createFramebuffer:u},this.gl=a,this.needsRedraw=null,this.timeline=null,this.stats=f,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:h,autoResizeDrawingBuffer:p,useDevicePixels:d}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(t){return Po("string"==typeof t),this.needsRedraw=this.needsRedraw||t,this}setProps(t){return"autoResizeViewport"in t&&(this.autoResizeViewport=t.autoResizeViewport),"autoResizeDrawingBuffer"in t&&(this.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer),"useDevicePixels"in t&&(this.useDevicePixels=t.useDevicePixels),this}start(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;const e=this._getPageLoadPromise().then((()=>!this._running||this._initialized?null:(this._createWebGLContext(t),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=Nl.isSupported(this.gl,["timers"])?new Nl(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps)))).then((t=>{this._running&&(this._addCallbackData(t||{}),!1!==t&&this._startLoop())}));return this.props.onError&&e.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(t){return this.timeline=t,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise((t=>{this._resolveNextFrame=t}))),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=document.getElementById(t);return n?Number(n.value):e}setViewParameters(){return Oi.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const t=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(t))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(t)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=jl?new Promise(((t,e)=>{jl&&"complete"===document.readyState?t(document):window.addEventListener("load",(()=>{t(document)}))})):Promise.resolve({})),this._pageLoadPromise}_setDisplay(t){this.display&&(this.display.delete(),this.display.animationLoop=null),t&&(t.animationLoop=this),this.display=t}_cancelAnimationFrame(t){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(t):(e=t,"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e));var e}_requestAnimationFrame(t){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(t):(e=t,"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60));var e}_renderFrame(){this.display?this.display._renderFrame(...arguments):this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:t,height:e,aspect:n}=this._getSizeAndAspect();t===this.animationProps.width&&e===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=e,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(t){"object"==typeof t&&null!==t&&(this.animationProps=Object.assign({},this.animationProps,t))}_createWebGLContext(t){if(this.offScreen=t.canvas&&"undefined"!=typeof OffscreenCanvas&&t.canvas instanceof OffscreenCanvas,t=Object.assign({},t,this.props.glOptions),this.gl=this.props.gl?Mo(this.props.gl,t):this.onCreateContext(t),!Ri(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");yo(this.gl,Ji),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";const e=document.createElement("div");e.style.position="absolute",e.style.left="10px",e.style.bottom="10px",e.style.width="300px",e.style.background="white",t.appendChild(this.gl.canvas),t.appendChild(e);const n=this.props.onAddHTML(e);n&&(e.innerHTML=n)}}_getSizeAndAspect(){const t=this.gl.drawingBufferWidth,e=this.gl.drawingBufferHeight;let n=1;const{canvas:r}=this.gl;return r&&r.clientHeight?n=r.clientWidth/r.clientHeight:t>0&&e>0&&(n=t/e),{width:t,height:e,aspect:n}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&Io(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new Ms(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:t}=this.gl;t&&(t.addEventListener("mousemove",this._onMousemove),t.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(t){this.animationProps._mousePosition=[t.offsetX,t.offsetY]}_onMouseleave(t){this.animationProps._mousePosition=null}}var Fl=n(50840);const Ul={mousedown:1,mousemove:2,mouseup:4};!function(t){const e=t.prototype.handler;t.prototype.handler=function(t){const n=this.store;t.button>0&&"pointerdown"===t.type&&(function(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}(n,(e=>e.pointerId===t.pointerId))||n.push(t)),e.call(this,t)}}(Fl.PointerEventInput),Fl.MouseInput.prototype.handler=function(t){let e=Ul[t.type];1&e&&t.button>=0&&(this.pressed=!0),2&e&&0===t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))};const Vl=Fl.Manager;var ql=Fl;class Wl{constructor(t,e,n){this.element=t,this.callback=e,this.options={enable:!0,...n}}}const Gl=ql?[[ql.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[ql.Rotate,{enable:!1}],[ql.Pinch,{enable:!1}],[ql.Swipe,{enable:!1}],[ql.Pan,{threshold:0,enable:!1}],[ql.Press,{enable:!1}],[ql.Tap,{event:"doubletap",taps:2,enable:!1}],[ql.Tap,{event:"anytap",enable:!1}],[ql.Tap,{enable:!1}]]:null,$l={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},Hl={doubletap:["tap"]},Zl={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},Yl={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},Xl={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},Kl={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},Jl="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",Ql="undefined"!=typeof window?window:n.g;void 0!==n.g?n.g:window,"undefined"!=typeof document&&document;let tu=!1;try{const t={get passive(){return tu=!0,!0}};Ql.addEventListener("test",null,t),Ql.removeEventListener("test",null)}catch(t){tu=!1}const eu=-1!==Jl.indexOf("firefox"),{WHEEL_EVENTS:nu}=Yl,ru="wheel",iu=4.000244140625;class ou extends Wl{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{if(!this.options.enable)return;let e=t.deltaY;Ql.WheelEvent&&(eu&&t.deltaMode===Ql.WheelEvent.DOM_DELTA_PIXEL&&(e/=Ql.devicePixelRatio),t.deltaMode===Ql.WheelEvent.DOM_DELTA_LINE&&(e*=40)),0!==e&&e%iu==0&&(e=Math.floor(e/iu)),t.shiftKey&&e&&(e*=.25),this.callback({type:ru,center:{x:t.clientX,y:t.clientY},delta:-e,srcEvent:t,pointerType:"mouse",target:t.target})},this.events=(this.options.events||[]).concat(nu),this.events.forEach((e=>t.addEventListener(e,this.handleEvent,!!tu&&{passive:!1})))}destroy(){this.events.forEach((t=>this.element.removeEventListener(t,this.handleEvent)))}enableEventType(t,e){t===ru&&(this.options.enable=e)}}const{MOUSE_EVENTS:su}=Yl,au="pointermove",cu="pointerover",lu="pointerout",uu="pointerenter",hu="pointerleave";class pu extends Wl{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{this.handleOverEvent(t),this.handleOutEvent(t),this.handleEnterEvent(t),this.handleLeaveEvent(t),this.handleMoveEvent(t)},this.pressed=!1;const{enable:r}=this.options;this.enableMoveEvent=r,this.enableLeaveEvent=r,this.enableEnterEvent=r,this.enableOutEvent=r,this.enableOverEvent=r,this.events=(this.options.events||[]).concat(su),this.events.forEach((e=>t.addEventListener(e,this.handleEvent)))}destroy(){this.events.forEach((t=>this.element.removeEventListener(t,this.handleEvent)))}enableEventType(t,e){t===au&&(this.enableMoveEvent=e),t===cu&&(this.enableOverEvent=e),t===lu&&(this.enableOutEvent=e),t===uu&&(this.enableEnterEvent=e),t===hu&&(this.enableLeaveEvent=e)}handleOverEvent(t){this.enableOverEvent&&"mouseover"===t.type&&this._emit(cu,t)}handleOutEvent(t){this.enableOutEvent&&"mouseout"===t.type&&this._emit(lu,t)}handleEnterEvent(t){this.enableEnterEvent&&"mouseenter"===t.type&&this._emit(uu,t)}handleLeaveEvent(t){this.enableLeaveEvent&&"mouseleave"===t.type&&this._emit(hu,t)}handleMoveEvent(t){if(this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":0===t.which&&(this.pressed=!1),this.pressed||this._emit(au,t);break;case"mouseup":this.pressed=!1}}_emit(t,e){this.callback({type:t,center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}const{KEY_EVENTS:fu}=Yl,du="keydown",gu="keyup";class mu extends Wl{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{const e=t.target||t.srcElement;"INPUT"===e.tagName&&"text"===e.type||"TEXTAREA"===e.tagName||(this.enableDownEvent&&"keydown"===t.type&&this.callback({type:du,srcEvent:t,key:t.key,target:t.target}),this.enableUpEvent&&"keyup"===t.type&&this.callback({type:gu,srcEvent:t,key:t.key,target:t.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(fu),t.tabIndex=this.options.tabIndex||0,t.style.outline="none",this.events.forEach((e=>t.addEventListener(e,this.handleEvent)))}destroy(){this.events.forEach((t=>this.element.removeEventListener(t,this.handleEvent)))}enableEventType(t,e){t===du&&(this.enableDownEvent=e),t===gu&&(this.enableUpEvent=e)}}const yu="contextmenu";class _u extends Wl{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{this.options.enable&&this.callback({type:yu,center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})},t.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(t,e){t===yu&&(this.options.enable=e)}}const vu={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};function xu(t){const e=vu[t.srcEvent.type];if(!e)return null;const{buttons:n,button:r,which:i}=t.srcEvent;let o=!1,s=!1,a=!1;return 4===e||2===e&&!Number.isFinite(n)?(o=1===i,s=2===i,a=3===i):2===e?(o=Boolean(1&n),s=Boolean(4&n),a=Boolean(2&n)):1===e&&(o=0===r,s=1===r,a=2===r),{leftButton:o,middleButton:s,rightButton:a}}function bu(t,e){const n=t.center;if(!n)return null;const r=e.getBoundingClientRect(),i=r.width/e.offsetWidth||1,o=r.height/e.offsetHeight||1;return{center:n,offsetCenter:{x:(n.x-r.left-e.clientLeft)/i,y:(n.y-r.top-e.clientTop)/o}}}const wu={srcElement:"root",priority:0};class Eu{constructor(t){this.handleEvent=t=>{if(this.isEmpty())return;const e=this._normalizeEvent(t);let n=t.srcEvent.target;for(;n&&n!==e.rootElement;){if(this._emit(e,n),e.handled)return;n=n.parentNode}this._emit(e,"root")},this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(t,e,n,r=!1,i=!1){const{handlers:o,handlersByElement:s}=this;let a=wu;"string"==typeof n||n&&n.addEventListener?a={...wu,srcElement:n}:n&&(a={...wu,...n});let c=s.get(a.srcElement);c||(c=[],s.set(a.srcElement,c));const l={type:t,handler:e,srcElement:a.srcElement,priority:a.priority};r&&(l.once=!0),i&&(l.passive=!0),o.push(l),this._active=this._active||!l.passive;let u=c.length-1;for(;u>=0&&!(c[u].priority>=l.priority);)u--;c.splice(u+1,0,l)}remove(t,e){const{handlers:n,handlersByElement:r}=this;for(let i=n.length-1;i>=0;i--){const o=n[i];if(o.type===t&&o.handler===e){n.splice(i,1);const t=r.get(o.srcElement);t.splice(t.indexOf(o),1),0===t.length&&r.delete(o.srcElement)}}this._active=n.some((t=>!t.passive))}_emit(t,e){const n=this.handlersByElement.get(e);if(n){let e=!1;const r=()=>{t.handled=!0},i=()=>{t.handled=!0,e=!0},o=[];for(let s=0;s<n.length;s++){const{type:a,handler:c,once:l}=n[s];if(c({...t,type:a,stopPropagation:r,stopImmediatePropagation:i}),l&&o.push(n[s]),e)break}for(let t=0;t<o.length;t++){const{type:e,handler:n}=o[t];this.remove(e,n)}}}_normalizeEvent(t){const e=this.eventManager.getElement();return{...t,...xu(t),...bu(t,e),preventDefault:()=>{t.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:e}}}const Tu={events:null,recognizers:null,recognizerOptions:{},Manager:Vl,touchAction:"none",tabIndex:0};class Su{constructor(t=null,e){this._onBasicInput=t=>{const{srcEvent:e}=t,n=Zl[e.type];n&&this.manager.emit(n,t)},this._onOtherEvent=t=>{this.manager.emit(t.type,t)},this.options={...Tu,...e},this.events=new Map,this.setElement(t);const{events:n}=this.options;n&&this.on(n)}getElement(){return this.element}setElement(t){if(this.element&&this.destroy(),this.element=t,!t)return;const{options:e}=this,n=e.Manager;this.manager=new n(t,{touchAction:e.touchAction,recognizers:e.recognizers||Gl}).on("hammer.input",this._onBasicInput),e.recognizers||Object.keys($l).forEach((t=>{const e=this.manager.get(t);e&&$l[t].forEach((t=>{e.recognizeWith(t)}))}));for(const t in e.recognizerOptions){const n=this.manager.get(t);if(n){const r=e.recognizerOptions[t];delete r.enable,n.set(r)}}this.wheelInput=new ou(t,this._onOtherEvent,{enable:!1}),this.moveInput=new pu(t,this._onOtherEvent,{enable:!1}),this.keyInput=new mu(t,this._onOtherEvent,{enable:!1,tabIndex:e.tabIndex}),this.contextmenuInput=new _u(t,this._onOtherEvent,{enable:!1});for(const[t,e]of this.events)e.isEmpty()||(this._toggleRecognizer(e.recognizerName,!0),this.manager.on(t,e.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(t,e,n){this._addEventHandler(t,e,n,!1)}once(t,e,n){this._addEventHandler(t,e,n,!0)}watch(t,e,n){this._addEventHandler(t,e,n,!1,!0)}off(t,e){this._removeEventHandler(t,e)}_toggleRecognizer(t,e){const{manager:n}=this;if(!n)return;const r=n.get(t);if(r&&r.options.enable!==e){r.set({enable:e});const i=Hl[t];i&&!this.options.recognizers&&i.forEach((i=>{const o=n.get(i);e?(o.requireFailure(t),r.dropRequireFailure(i)):o.dropRequireFailure(t)}))}this.wheelInput.enableEventType(t,e),this.moveInput.enableEventType(t,e),this.keyInput.enableEventType(t,e),this.contextmenuInput.enableEventType(t,e)}_addEventHandler(t,e,n,r,i){if("string"!=typeof t){n=e;for(const e in t)this._addEventHandler(e,t[e],n,r,i);return}const{manager:o,events:s}=this,a=Kl[t]||t;let c=s.get(a);c||(c=new Eu(this),s.set(a,c),c.recognizerName=Xl[a]||a,o&&o.on(a,c.handleEvent)),c.add(t,e,n,r,i),c.isEmpty()||this._toggleRecognizer(c.recognizerName,!0)}_removeEventHandler(t,e){if("string"!=typeof t){for(const e in t)this._removeEventHandler(e,t[e]);return}const{events:n}=this,r=Kl[t]||t,i=n.get(r);if(i&&(i.remove(t,e),i.isEmpty())){const{recognizerName:t}=i;let e=!1;for(const r of n.values())if(r.recognizerName===t&&!r.isEmpty()){e=!0;break}e||this._toggleRecognizer(t,!1)}}}function ku(){}const Au={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:ku,onResize:ku,onViewStateChange:ku,onInteractionStateChange:ku,onBeforeRender:ku,onAfterRender:ku,onLoad:ku,onError:t=>G.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:({isDragging:t})=>t?"grabbing":"grab",getTooltip:null,debug:!1,drawPickingColors:!1};class Mu{constructor(t){i(this,"props",void 0),i(this,"width",0),i(this,"height",0),i(this,"userData",{}),i(this,"canvas",null),i(this,"viewManager",null),i(this,"layerManager",null),i(this,"effectManager",null),i(this,"deckRenderer",null),i(this,"deckPicker",null),i(this,"eventManager",null),i(this,"tooltip",null),i(this,"metrics",void 0),i(this,"animationLoop",void 0),i(this,"stats",void 0),i(this,"viewState",void 0),i(this,"cursorState",void 0),i(this,"_needsRedraw",void 0),i(this,"_pickRequest",void 0),i(this,"_lastPointerDownInfo",null),i(this,"_metricsCounter",void 0),i(this,"_onPointerMove",(t=>{const{_pickRequest:e}=this;if("pointerleave"===t.type)e.x=-1,e.y=-1,e.radius=0;else{if(t.leftButton||t.rightButton)return;{const n=t.offsetCenter;if(!n)return;e.x=n.x,e.y=n.y,e.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:e.x,y:e.y}),e.event=t})),i(this,"_onEvent",(t=>{const e=Lr[t.type],n=t.offsetCenter;if(!e||!n||!this.layerManager)return;const r=this.layerManager.getLayers(),i=this.deckPicker.getLastPickedObject({x:n.x,y:n.y,layers:r,viewports:this.getViewports(n)},this._lastPointerDownInfo),{layer:o}=i,s=o&&(o[e.handler]||o.props[e.handler]),a=this.props[e.handler];let c=!1;s&&(c=s.call(o,i,t)),!c&&a&&a(i,t)})),i(this,"_onPointerDown",(t=>{const e=t.offsetCenter,n=this._pick("pickObject","pickObject Time",{x:e.x,y:e.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=n.result[0]||n.emptyInfo})),this.props={...Au,...t},t=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},t.viewState&&t.initialViewState&&G.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===Rl()&&G.warn("IE 11 is not supported")(),this.viewState=t.initialViewState,t.gl||"undefined"!=typeof document&&(this.canvas=this._createCanvas(t)),this.animationLoop=this._createAnimationLoop(t),this.stats=new et({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(t),t._typedArrayManagerProps&&an.setOptions(t._typedArrayManagerProps),this.animationLoop.start()}finalize(){var t,e,n,r,i,o,s,a,c;(null===(t=this.animationLoop)||void 0===t||t.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,null===(e=this.layerManager)||void 0===e||e.finalize(),this.layerManager=null,null===(n=this.viewManager)||void 0===n||n.finalize(),this.viewManager=null,null===(r=this.effectManager)||void 0===r||r.finalize(),this.effectManager=null,null===(i=this.deckRenderer)||void 0===i||i.finalize(),this.deckRenderer=null,null===(o=this.deckPicker)||void 0===o||o.finalize(),this.deckPicker=null,null===(s=this.eventManager)||void 0===s||s.destroy(),this.eventManager=null,null===(a=this.tooltip)||void 0===a||a.remove(),this.tooltip=null,this.props.canvas||this.props.gl||!this.canvas)||(null===(c=this.canvas.parentElement)||void 0===c||c.removeChild(this.canvas),this.canvas=null)}setProps(t){this.stats.get("setProps Time").timeStart(),"onLayerHover"in t&&G.removed("onLayerHover","onHover")(),"onLayerClick"in t&&G.removed("onLayerClick","onClick")(),t.initialViewState&&!Ha(this.props.initialViewState,t.initialViewState,3)&&(this.viewState=t.initialViewState),Object.assign(this.props,t),this._setCanvasSize(this.props);const e=Object.create(this.props);Object.assign(e,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(e),this.layerManager&&(this.viewManager.setProps(e),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(e),this.effectManager.setProps(e),this.deckRenderer.setProps(e),this.deckPicker.setProps(e)),this.stats.get("setProps Time").timeEnd()}needsRedraw(t={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let e=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);const n=this.viewManager.needsRedraw(t),r=this.layerManager.needsRedraw(t),i=this.effectManager.needsRedraw(t),o=this.deckRenderer.needsRedraw(t);return e=e||n||r||i||o,e}redraw(t){if(!this.layerManager)return;let e=this.needsRedraw({clearRedrawFlags:!0});e=t||e,e&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(e):this._drawLayers(e))}get isInitialized(){return null!==this.viewManager}getViews(){return Ja(this.viewManager),this.viewManager.views}getViewports(t){return Ja(this.viewManager),this.viewManager.getViewports(t)}pickObject(t){const e=this._pick("pickObject","pickObject Time",t).result;return e.length?e[0]:null}pickMultipleObjects(t){return t.depth=t.depth||10,this._pick("pickObject","pickMultipleObjects Time",t).result}pickObjects(t){return this._pick("pickObjects","pickObjects Time",t)}_addResources(t,e=!1){for(const n in t)this.layerManager.resourceManager.add({resourceId:n,data:t[n],forceUpdate:e})}_removeResources(t){for(const e of t)this.layerManager.resourceManager.remove(e)}_addDefaultEffect(t){this.effectManager.addDefaultEffect(t)}_pick(t,e,n){Ja(this.deckPicker);const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(e).timeStart();const i=this.deckPicker[t]({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...n});return r.get(e).timeEnd(),i}_createCanvas(t){let e=t.canvas;if("string"==typeof e&&(e=document.getElementById(e),Ja(e)),!e){e=document.createElement("canvas"),e.id=t.id||"deckgl-overlay";(t.parent||document.body).appendChild(e)}return Object.assign(e.style,t.style),e}_setCanvasSize(t){if(!this.canvas)return;const{width:e,height:n}=t;if(e||0===e){const t=Number.isFinite(e)?"".concat(e,"px"):e;this.canvas.style.width=t}if(n||0===n){var r;const e=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.position=(null===(r=t.style)||void 0===r?void 0:r.position)||"absolute",this.canvas.style.height=e}}_updateCanvasSize(){var t,e;const{canvas:n}=this;if(!n)return;const r=null!==(t=n.clientWidth)&&void 0!==t?t:n.width,i=null!==(e=n.clientHeight)&&void 0!==e?e:n.height;var o,s;r===this.width&&i===this.height||(this.width=r,this.height=i,null===(o=this.viewManager)||void 0===o||o.setProps({width:r,height:i}),null===(s=this.layerManager)||void 0===s||s.activateViewport(this.getViewports()[0]),this.props.onResize({width:r,height:i}))}_createAnimationLoop(t){const{width:e,height:n,gl:r,glOptions:i,debug:o,onError:s,onBeforeRender:a,onAfterRender:c,useDevicePixels:l}=t;return new Bl({width:e,height:n,useDevicePixels:l,autoResizeDrawingBuffer:!r,autoResizeViewport:!1,gl:r,onCreateContext:t=>Ao({...i,...t,canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()}),onInitialize:t=>this._setGLContext(t.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:a,onAfterRender:c,onError:s})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let t=this.props.views||[new Sc({id:"default-view"})];return t=Array.isArray(t)?t:[t],t.length&&this.props.controller&&(t[0].props.controller=this.props.controller),t}_onContextLost(){const{onError:t}=this.props;this.animationLoop&&t&&t(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:t}=this;if(t.event){const{result:n,emptyInfo:r}=this._pick("pickObject","pickObject Time",t);this.cursorState.isHovering=n.length>0;let i=r,o=!1;for(const r of n){var e;i=r,o=(null===(e=r.layer)||void 0===e?void 0:e.onHover(r,t.event))||o}if(!o&&this.props.onHover&&this.props.onHover(i,t.event),this.props.getTooltip&&this.tooltip){const t=this.props.getTooltip(i);this.tooltip.setTooltip(t,i.x,i.y)}t.event=null}}_updateCursor(){const t=this.props.parent||this.canvas;t&&(t.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(t){if(this.layerManager)return;this.canvas||(this.canvas=t.canvas,Mo(t,{enable:!0,copyState:!0})),this.tooltip=new cl(this.canvas),yo(t,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(t);const e=new a;e.play(),this.animationLoop.attachTimeline(e),this.eventManager=new Su(this.props.parent||t.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const t in Lr)this.eventManager.on(t,this._onEvent);this.viewManager=new Za({timeline:e,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const n=this.viewManager.getViewports()[0];this.layerManager=new $a(t,{deck:this,stats:this.stats,viewport:n,timeline:e}),this.effectManager=new Yc,this.deckRenderer=new tl(t),this.deckPicker=new sl(t),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(t,e){const{gl:n}=this.layerManager.context;yo(n,this.props.parameters),this.props.onBeforeRender({gl:n}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...e}),this.props.onAfterRender({gl:n})}_onRenderFrame(t){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),G.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(t){const e=this.props.onViewStateChange(t)||t.viewState;this.viewState&&(this.viewState={...this.viewState,[t.viewId]:e},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(t){this.cursorState.isDragging=t.isDragging||!1,this.props.onInteractionStateChange(t)}_getFrameStats(){const{stats:t}=this;t.get("frameRate").timeEnd(),t.get("frameRate").timeStart();const e=this.animationLoop.stats;t.get("GPU Time").addTime(e.get("GPU Time").lastTiming),t.get("CPU Time").addTime(e.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:t,stats:e}=this;t.fps=e.get("frameRate").getHz(),t.setPropsTime=e.get("setProps Time").time,t.updateAttributesTime=e.get("Update Attributes").time,t.framesRedrawn=e.get("Redraw Count").count,t.pickTime=e.get("pickObject Time").time+e.get("pickMultipleObjects Time").time+e.get("pickObjects Time").time,t.pickCount=e.get("Pick Count").count,t.gpuTime=e.get("GPU Time").time,t.cpuTime=e.get("CPU Time").time,t.gpuTimePerFrame=e.get("GPU Time").getAverageTime(),t.cpuTimePerFrame=e.get("CPU Time").getAverageTime();const n=Oo.get("Memory Usage");t.bufferMemory=n.get("Buffer Memory").count,t.textureMemory=n.get("Texture Memory").count,t.renderbufferMemory=n.get("Renderbuffer Memory").count,t.gpuMemory=n.get("GPU Memory").count}}i(Mu,"defaultProps",Au),i(Mu,"VERSION",Ll);const Iu=512,Cu=Math.PI/180;function Ou({map:t,gl:e,deck:n}){if(t.__deck)return t.__deck;const r=null==n?void 0:n.props._customRender,i=null==n?void 0:n.props.onLoad,o=(s={...null==n?void 0:n.props,_customRender:()=>{t.triggerRepaint(),null==r||r("")}},{...s,parameters:{depthMask:!0,depthTest:!0,blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthFunc:515,blendEquation:32774,...s.parameters},views:s.views||[new Sc({id:"mapbox"})]});var s;let a;return n&&n.props.gl!==e||(Object.assign(o,{gl:e,width:null,height:null,touchAction:"unset",viewState:Lu(t)}),null!=n&&n.isInitialized?Pu(n,t):o.onLoad=()=>{null==i||i(),Pu(a,t)}),n?(a=n,n.setProps(o),n.userData.isExternal=!0):(a=new Mu(o),t.on("remove",(()=>{!function(t){var e;null===(e=t.__deck)||void 0===e||e.finalize(),t.__deck=null}(t)}))),a.userData.mapboxLayers=new Set,t.__deck=a,t.on("render",(()=>{a.isInitialized&&function(t,e){const{mapboxLayers:n,isExternal:r}=t.userData;if(r){const r=Array.from(n,(t=>t.id)),i=Y(t.props.layers,Boolean).some((t=>t&&!r.includes(t.id)));let o=t.getViewports();const s=o.findIndex((t=>"mapbox"===t.id)),a=o.length>1||s<0;(i||a)&&(s>=0&&(o=o.slice(),o[s]=Du(t,e,!1)),t._drawLayers("mapbox-repaint",{viewports:o,layerFilter:e=>(!t.props.layerFilter||t.props.layerFilter(e))&&("mapbox"!==e.viewport.id||!r.includes(e.layer.id)),clearCanvas:!1}))}t.userData.currentViewport=null}(a,t)})),a}function Pu(t,e){const n=()=>{t.isInitialized?function(t,e){t.setProps({viewState:Lu(e)}),t.needsRedraw({clearRedrawFlags:!0})}(t,e):e.off("move",n)};e.on("move",n)}function Lu(t){var e;const{lng:n,lat:r}=t.getCenter(),i={longitude:(n+540)%360-180,latitude:r,zoom:t.getZoom(),bearing:t.getBearing(),pitch:t.getPitch(),padding:t.getPadding(),repeat:t.getRenderWorldCopies()};return null!==(e=t.getTerrain)&&void 0!==e&&e.call(t)&&function(t,e){if(t.getFreeCameraOptions){const{position:n}=t.getFreeCameraOptions();if(!n||void 0===n.z)return;const r=t.transform.height,{longitude:i,latitude:o,pitch:s}=e,a=n.x*Iu,c=(1-n.y)*Iu,l=n.z*Iu,u=mr([i,o]),h=a-u[0],p=c-u[1],f=Math.sqrt(h*h+p*p),d=s*Cu,g=1.5*r,m=d<.001?g*Math.cos(d)/l:g*Math.sin(d)/f;e.zoom=Math.log2(m);const y=l-g*Math.cos(d)/m;e.position=[0,0,y/vr(o)]}else"number"==typeof t.transform.elevation&&(e.position=[0,0,t.transform.elevation])}(t,i),i}function Du(t,e,n=!0){return new tc({id:"mapbox",x:0,y:0,width:t.width,height:t.height,...Lu(e),nearZMultiplier:n?.02:.1,nearZ:e.transform._nearZ/e.transform.height,farZ:e.transform._farZ/e.transform.height})}function Ru(t){if(t.userData.isExternal)return;const e=[];t.userData.mapboxLayers.forEach((t=>{const n=new(0,t.props.type)(t.props);e.push(n)})),t.setProps({layers:e})}class Nu{constructor(t){if(i(this,"id",void 0),i(this,"type",void 0),i(this,"renderingMode",void 0),i(this,"map",void 0),i(this,"deck",void 0),i(this,"props",void 0),!t.id)throw new Error("Layer must have an unique id");this.id=t.id,this.type="custom",this.renderingMode=t.renderingMode||"3d",this.map=null,this.deck=null,this.props=t}onAdd(t,e){var n,r;this.map=t,this.deck=Ou({map:t,gl:e,deck:this.props.deck}),n=this.deck,r=this,n.userData.mapboxLayers.add(r),Ru(n)}onRemove(){var t,e;this.deck&&(t=this.deck,e=this,t.userData.mapboxLayers.delete(e),Ru(t))}setProps(t){Object.assign(this.props,t,{id:this.id}),this.deck&&Ru(this.deck)}render(){!function(t,e,n){let{currentViewport:r}=t.userData,i=!1;r||(r=Du(t,e,!0),t.userData.currentViewport=r,i=!0),t.isInitialized&&t._drawLayers("mapbox-repaint",{viewports:[r],layerFilter:({layer:t})=>n.id===t.id||t.props.operation.includes("terrain"),clearStack:i,clearCanvas:!1})}(this.deck,this.map,this)}}class ju{constructor(t,e){i(this,"opts",void 0),i(this,"source",void 0),this.opts=e,this.source=t}get value(){return this.source.value}getValue(){const t=this.source.getBuffer(),e=this.getAccessor();if(t)return[t,e];const{value:n}=this.source,{size:r}=e;let i=n;if(n&&n.length!==r){i=new Float32Array(r);const t=e.elementOffset||0;for(let e=0;e<r;++e)i[e]=n[t+e]}return i}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function zu(t){return t.stride||t.size*t.bytesPerElement}function Bu(t,e){e.offset&&G.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=zu(t),r=(void 0!==e.vertexOffset?e.vertexOffset:t.vertexOffset||0)*n+(e.elementOffset||0)*t.bytesPerElement+(t.offset||0);return{...e,offset:r,stride:n}}class Fu{constructor(t,e,n){i(this,"gl",void 0),i(this,"id",void 0),i(this,"size",void 0),i(this,"settings",void 0),i(this,"value",void 0),i(this,"doublePrecision",void 0),i(this,"_buffer",void 0),i(this,"state",void 0),this.gl=t,this.id=e.id||"",this.size=e.size||1;const r=e.logicalType||e.type,o=5130===r;let s,{defaultValue:a}=e;a=Number.isFinite(a)?[a]:a||new Array(this.size).fill(0),s=o?5126:!r&&e.isIndexed?t&&function(t,e){return Ss(t,e)}(t,ws)?5125:5123:r||5126;let c=function(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(r||s||5126);this.doublePrecision=o,o&&!1===e.fp64&&(c=Float32Array),this.value=null,this.settings={...e,defaultType:c,defaultValue:a,logicalType:r,type:s,size:this.size,bytesPerElement:c.BYTES_PER_ELEMENT},this.state={...n,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:t,type:e}=this.settings;this._buffer=new Qo(this.gl,{id:this.id,target:t?34963:34962,accessor:{type:e}})}return this._buffer}get byteOffset(){const t=this.getAccessor();return t.vertexOffset?t.vertexOffset*zu(t):0}get numInstances(){return this.state.numInstances}set numInstances(t){this.state.numInstances=t}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),an.release(this.state.allocatedValue)}getShaderAttributes(t,e){if(this.doublePrecision){const n={},r=this.value instanceof Float64Array,i=function(t,e){const n=Bu(t,e);return{high:n,low:{...n,offset:n.offset+4*t.size}}}(this.getAccessor(),e||{});return n[t]=new ju(this,i.high),n["".concat(t,"64Low")]=r?new ju(this,i.low):new Float32Array(this.size),n}if(e){const n=Bu(this.getAccessor(),e);return{[t]:new ju(this,n)}}return{[t]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let t=null;if(this.state.constant&&this.value){const e=Array.from(this.value);t=[e,e]}else{const{value:e,numInstances:n,size:r}=this,i=n*r;if(e&&i&&e.length>=i){const n=new Array(r).fill(1/0),o=new Array(r).fill(-1/0);for(let t=0;t<i;)for(let i=0;i<r;i++){const r=e[t++];r<n[i]&&(n[i]=r),r>o[i]&&(o[i]=r)}t=[n,o]}}return this.state.bounds=t,t}setData(t){const{state:e}=this;let n;n=ArrayBuffer.isView(t)?{value:t}:t instanceof Qo?{buffer:t}:t;const r={...this.settings,...n};if(e.bufferAccessor=r,e.bounds=null,n.constant){let t=n.value;t=this._normalizeValue(t,[],0),this.settings.normalized&&(t=this.normalizeConstant(t));if(!(!e.constant||!this._areValuesEqual(t,this.value)))return!1;e.externalBuffer=null,e.constant=!0,this.value=t}else if(n.buffer){const t=n.buffer;e.externalBuffer=t,e.constant=!1,this.value=n.value||null;const i=n.value instanceof Float64Array;r.type=n.type||t.accessor.type,r.bytesPerElement=t.accessor.BYTES_PER_ELEMENT*(i?2:1),r.stride=zu(r)}else if(n.value){this._checkExternalBuffer(n);let t=n.value;e.externalBuffer=null,e.constant=!1,this.value=t,r.bytesPerElement=t.BYTES_PER_ELEMENT,r.stride=zu(r);const{buffer:i,byteOffset:o}=this;this.doublePrecision&&t instanceof Float64Array&&(t=Ln(t,r));const s=t.byteLength+o+2*r.stride;i.byteLength<s&&i.reallocate(s),i.setAccessor(null),i.subData({data:t,offset:o}),r.type=n.type||i.accessor.type}return!0}updateSubBuffer(t={}){this.state.bounds=null;const e=this.value,{startOffset:n=0,endOffset:r}=t;this.buffer.subData({data:this.doublePrecision&&e instanceof Float64Array?Ln(e,{size:this.size,startIndex:n,endIndex:r}):e.subarray(n,r),offset:n*e.BYTES_PER_ELEMENT+this.byteOffset})}allocate(t,e=!1){const{state:n}=this,r=n.allocatedValue,i=an.allocate(r,t+1,{size:this.size,type:this.settings.defaultType,copy:e});this.value=i;const{buffer:o,byteOffset:s}=this;return o.byteLength<i.byteLength+s&&(o.reallocate(i.byteLength+s),e&&r&&o.subData({data:r instanceof Float64Array?Ln(r,this):r,offset:s})),n.allocatedValue=i,n.constant=!1,n.externalBuffer=null,n.bufferAccessor=this.settings,!0}_checkExternalBuffer(t){const{value:e}=t;if(!ArrayBuffer.isView(e))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const n=this.settings.defaultType;let r=!1;if(this.doublePrecision&&(r=e.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(e.constructor.name));e instanceof n||!this.settings.normalized||"normalized"in t||G.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(t){switch(this.settings.type){case 5120:return new Float32Array(t).map((t=>(t+128)/255*2-1));case 5122:return new Float32Array(t).map((t=>(t+32768)/65535*2-1));case 5121:return new Float32Array(t).map((t=>t/255));case 5123:return new Float32Array(t).map((t=>t/65535));default:return t}}_normalizeValue(t,e,n){const{defaultValue:r,size:i}=this.settings;if(Number.isFinite(t))return e[n]=t,e;if(!t){let t=i;for(;--t>=0;)e[n+t]=r[t];return e}switch(i){case 4:e[n+3]=Number.isFinite(t[3])?t[3]:r[3];case 3:e[n+2]=Number.isFinite(t[2])?t[2]:r[2];case 2:e[n+1]=Number.isFinite(t[1])?t[1]:r[1];case 1:e[n+0]=Number.isFinite(t[0])?t[0]:r[0];break;default:let o=i;for(;--o>=0;)e[n+o]=Number.isFinite(t[o])?t[o]:r[o]}return e}_areValuesEqual(t,e){if(!t||!e)return!1;const{size:n}=this;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}}const Uu=[],Vu=[];function qu(t){return t&&t[Symbol.asyncIterator]}const Wu=[],Gu=[[0,1/0]];function $u(t){const{source:e,target:n,start:r=0,size:i,getData:o}=t,s=t.end||n.length,a=e.length,c=s-r;if(a>c)return void n.set(e.subarray(0,c),r);if(n.set(e,r),!o)return;let l=a;for(;l<c;){const t=o(l,e);for(let e=0;e<i;e++)n[r+l]=t[e]||0,l++}}const Hu={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function Zu(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...Hu[n],...e,...t,type:n}}function Yu(t,e){const n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function Xu(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function Ku(t){t.push(t.shift())}function Ju(t,e){const{doublePrecision:n,settings:r,value:i,size:o}=t,s=n&&i instanceof Float64Array?2:1;return(r.noAlloc?i.length:e*o)*s}function Qu({buffer:t,numInstances:e,attribute:n,fromLength:r,fromStartIndices:i,getData:o=(t=>t)}){const s=n.doublePrecision&&n.value instanceof Float64Array?2:1,a=n.size*s,c=n.byteOffset,l=n.startIndices,u=i&&l,h=Ju(n,e),p=n.isConstant;if(!u&&r>=h)return;const f=p?n.value:n.getBuffer().getData({srcByteOffset:c});if(n.settings.normalized&&!p){const t=o;o=(e,r)=>n.normalizeConstant(t(e,r))}const d=p?(t,e)=>o(f,e):(t,e)=>o(f.subarray(t,t+a),e),g=t.getData({length:r}),m=new Float32Array(h);!function({source:t,target:e,size:n,getData:r,sourceStartIndices:i,targetStartIndices:o}){if(!Array.isArray(o))return $u({source:t,target:e,size:n,getData:r}),e;let s=0,a=0;const c=r&&((t,e)=>r(t+a,e)),l=Math.min(i.length,o.length);for(let r=1;r<l;r++){const l=i[r]*n,u=o[r]*n;$u({source:t.subarray(s,l),target:e,start:a,end:u,size:n,getData:c}),s=l,a=u}a<e.length&&$u({source:[],target:e,start:a,size:n,getData:c})}({source:g,target:m,sourceStartIndices:i,targetStartIndices:l,size:a,getData:d}),t.byteLength<m.byteLength+c&&t.reallocate(m.byteLength+c),t.subData({data:m,offset:c})}class th extends Fu{constructor(t,e){super(t,e,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:Gu}),i(this,"constant",!1),this.settings.update=e.update||(e.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(t){this.state.startIndices=t}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:t=!1}={}){const e=this.state.needsRedraw;return this.state.needsRedraw=e&&!t,e}getUpdateTriggers(){const{accessor:t}=this.settings;return[this.id].concat("function"!=typeof t&&t||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(t){if(!t||!this.supportsTransition())return null;const{accessor:e}=this.settings,n=this.settings.transition;return Zu(Array.isArray(e)?t[e.find((e=>t[e]))]:t[e],n)}setNeedsUpdate(t=this.id,e){if(this.state.needsUpdate=this.state.needsUpdate||t,this.setNeedsRedraw(t),e){const{startRow:t=0,endRow:n=1/0}=e;this.state.updateRanges=function(t,e){if(t===Gu)return t;if(e[0]<0&&(e[0]=0),e[0]>=e[1])return t;const n=[],r=t.length;let i=0;for(let o=0;o<r;o++){const r=t[o];r[1]<e[0]?(n.push(r),i=o+1):r[0]>e[1]?n.push(r):e=[Math.min(r[0],e[0]),Math.max(r[1],e[1])]}return n.splice(i,0,e),n}(this.state.updateRanges,[t,n])}else this.state.updateRanges=Gu}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=Wu}setNeedsRedraw(t=this.id){this.state.needsRedraw=this.state.needsRedraw||t}allocate(t){const{state:e,settings:n}=this;return!n.noAlloc&&(!!n.update&&(super.allocate(t,e.updateRanges!==Gu),!0))}updateBuffer({numInstances:t,data:e,props:n,context:r}){if(!this.needsUpdate())return!1;const{state:{updateRanges:i},settings:{update:o,noAlloc:s}}=this;let a=!0;if(o){for(const[s,a]of i)o.call(r,this,{data:e,startRow:s,endRow:a,props:n,numInstances:t});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[e,n]of i){const r=Number.isFinite(e)?this.getVertexOffset(e):0,i=Number.isFinite(n)?this.getVertexOffset(n):s||!Number.isFinite(t)?this.value.length:t*this.size;super.updateSubBuffer({startOffset:r,endOffset:i})}else;this._checkAttributeArray()}else a=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),a}setConstantValue(t){if(void 0===t||"function"==typeof t)return!1;return this.setData({constant:!0,value:t})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0}setExternalBuffer(t){const{state:e}=this;return t?(this.clearNeedsUpdate(),e.lastExternalBuffer===t||(e.lastExternalBuffer=t,this.setNeedsRedraw(),this.setData(t)),!0):(e.lastExternalBuffer=null,!1)}setBinaryValue(t,e=null){const{state:n,settings:r}=this;if(!t)return n.binaryValue=null,n.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(n.binaryValue===t)return this.clearNeedsUpdate(),!0;n.binaryValue=t,this.setNeedsRedraw();if(r.transform||e!==this.startIndices){ArrayBuffer.isView(t)&&(t={value:t});const i=t;Ja(ArrayBuffer.isView(i.value),"invalid ".concat(r.accessor));const o=Boolean(i.size)&&i.size!==this.size;return n.binaryAccessor=function(t,e){const{size:n,stride:r,offset:i,startIndices:o,nested:s}=e,a=t.BYTES_PER_ELEMENT,c=r?r/a:n,l=i?i/a:0,u=Math.floor((t.length-l)/c);return(e,{index:r,target:i})=>{if(!o){const e=r*c+l;for(let r=0;r<n;r++)i[r]=t[e+r];return i}const a=o[r],h=o[r+1]||u;let p;if(s){p=new Array(h-a);for(let e=a;e<h;e++){const r=e*c+l;i=new Array(n);for(let e=0;e<n;e++)i[e]=t[r+e];p[e-a]=i}}else if(c===n)p=t.subarray(a*n+l,h*n+l);else{p=new t.constructor((h-a)*n);let e=0;for(let r=a;r<h;r++){const i=r*c+l;for(let r=0;r<n;r++)p[e++]=t[i+r]}}return p}}(i.value,{size:i.size||this.size,stride:i.stride,offset:i.offset,startIndices:e,nested:o}),!1}return this.clearNeedsUpdate(),this.setData(t),!0}getVertexOffset(t){const{startIndices:e}=this;return(e?t<e.length?e[t]:this.numInstances:t)*this.size}getShaderAttributes(){const t=this.settings.shaderAttributes||{[this.id]:null},e={};for(const n in t)Object.assign(e,super.getShaderAttributes(n,t[n]));return e}_autoUpdater(t,{data:e,startRow:n,endRow:r,props:i,numInstances:o}){if(t.constant)return;const{settings:s,state:a,value:c,size:l,startIndices:u}=t,{accessor:h,transform:p}=s,f=a.binaryAccessor||("function"==typeof h?h:i[h]);Ja("function"==typeof f,'accessor "'.concat(h,'" is not a function'));let d=t.getVertexOffset(n);const{iterable:g,objectInfo:m}=function(t,e=0,n=1/0){let r=Uu;const i={index:-1,data:t,target:[]};return t?"function"==typeof t[Symbol.iterator]?r=t:t.length>0&&(Vu.length=t.length,r=Vu):r=Uu,(e>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(e,n),i.index=e-1),{iterable:r,objectInfo:i}}(e,n,r);for(const e of g){m.index++;let n=f(e,m);if(p&&(n=p.call(this,n)),u){const e=(m.index<u.length-1?u[m.index+1]:o)-u[m.index];if(n&&Array.isArray(n[0])){let e=d;for(const r of n)t._normalizeValue(r,c,e),e+=l}else n&&n.length>l?c.set(n,d):(t._normalizeValue(n,m.target,0),K({target:c,source:m.target,start:d,count:e}));d+=e*l}else t._normalizeValue(n,c,d),d+=l}}_validateAttributeUpdaters(){const{settings:t}=this;if(!(t.noAlloc||"function"==typeof t.update))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:t}=this,e=Math.min(4,this.size);if(t&&t.length>=e){let n=!0;switch(e){case 4:n=n&&Number.isFinite(t[3]);case 3:n=n&&Number.isFinite(t[2]);case 2:n=n&&Number.isFinite(t[1]);case 1:n=n&&Number.isFinite(t[0]);break;default:n=!1}if(!n)throw new Error("Illegal attribute generated for ".concat(this.id))}}}const eh="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",nh="#version 300 es\n".concat(eh);function rh(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[r,i,o]=n;if(!e.includes(r)||!i||!o)return null;return{qualifier:r,type:i,name:o.split(";")[0]}}function ih(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{version:e=100,input:n,inputType:r,output:i}=t;if(!n)return 300===e?nh:e>300?"#version ".concat(e,"\n").concat(eh):"void main() {gl_FragColor = vec4(0);}";const o=function(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return Ur(!1),null}}(n,r);return e>=300?"#version ".concat(e," ").concat(300===e?"es":"","\nin ").concat(r," ").concat(n,";\nout vec4 ").concat(i,";\nvoid main() {\n  ").concat(i," = ").concat(o,";\n}"):"varying ".concat(r," ").concat(n,";\nvoid main() {\n  gl_FragColor = ").concat(o,";\n}")}class oh extends Uo{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(t){return Ni(t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};zi(t),super(t,e),this.initialize(e),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,zo(this.buffers)||this.bind((()=>this._unbindBuffers())),this.setProps(t),this}setProps(t){"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"bindOnUse"in t&&(t=t.bindOnUse),"buffers"in t&&this.setBuffers(t.buffers)}setBuffers(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind((()=>{for(const e in t)this.setBuffer(e,t[e])})),this}setBuffer(t,e){const n=this._getVaryingIndex(t),{buffer:r,byteSize:i,byteOffset:o}=this._getBufferParams(e);return n<0?(this.unused[t]=r,Oi.warn("".concat(this.id," unused varying buffer ").concat(t))(),this):(this.buffers[n]=e,this.bindOnUse||this._bindBuffer(n,r,o,i),this)}begin(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(t),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(t){let e,n,r;return t instanceof Qo==!1?(r=t.buffer,n=t.byteSize,e=t.byteOffset):r=t,void 0===e&&void 0===n||(e=e||0,n=n||r.byteLength-e),{buffer:r,byteOffset:e,byteSize:n}}_getVaryingInfo(t){return this.configuration&&this.configuration.getVaryingInfo(t)}_getVaryingIndex(t){if(this.configuration)return this.configuration.getVaryingInfo(t).location;const e=Number(t);return Number.isFinite(e)?e:-1}_bindBuffers(){if(this.bindOnUse)for(const t in this.buffers){const{buffer:e,byteSize:n,byteOffset:r}=this._getBufferParams(this.buffers[t]);this._bindBuffer(t,e,r,n)}}_unbindBuffers(){if(this.bindOnUse)for(const t in this.buffers)this._bindBuffer(t,null)}_bindBuffer(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;const i=e&&e.handle;return i&&void 0!==r?this.gl.bindBufferRange(35982,t,i,n,r):this.gl.bindBufferBase(35982,t,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(t){this.gl.bindTransformFeedback(36386,this.handle)}}class sh{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(e),Object.seal(this)}setupResources(t){for(const e of this.bindings)this._setupTransformFeedback(e,t)}updateModelProps(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyings:e}=this;return e.length>0&&(t=Object.assign({},t,{varyings:e})),t}getDrawOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this.bindings[this.currentIndex],{sourceBuffers:n,transformFeedback:r}=e;return{attributes:Object.assign({},n,t.attributes),transformFeedback:r}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(t)}getBuffer(t){const{feedbackBuffers:e}=this.bindings[this.currentIndex],n=t?e[t]:null;return n?n instanceof Qo?n:n.buffer:null}getData(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyingName:e}=t,n=this.getBuffer(e);return n?n.getData():null}delete(){for(const t in this.resources)this.resources[t].delete()}_initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(t),this.varyings=t.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&Po(Ni(this.gl))}_getFeedbackBuffers(t){const{sourceBuffers:e={}}=t,n={};if(this.bindings[this.currentIndex]&&Object.assign(n,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const t in this.feedbackMap){const r=this.feedbackMap[t];t in e&&(n[r]=t)}Object.assign(n,t.feedbackBuffers);for(const t in n){const r=n[t];if("string"==typeof r){const i=e[r],{byteLength:o,usage:s,accessor:a}=i;n[t]=this._createNewBuffer(t,{byteLength:o,usage:s,accessor:a})}}return n}_setupBuffers(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:e=null}=t;Object.assign(this.feedbackMap,t.feedbackMap);const n=this._getFeedbackBuffers(t);this._updateBindings({sourceBuffers:e,feedbackBuffers:n})}_setupTransformFeedback(t,e){let{model:n}=e;const{program:r}=n;t.transformFeedback=new oh(this.gl,{program:r,buffers:t.feedbackBuffers})}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this.feedbackMap){const{sourceBuffers:t,feedbackBuffers:e}=this._swapBuffers(this.bindings[this.currentIndex]),n=this._getNextIndex();this.bindings[n]=this._updateBinding(this.bindings[n],{sourceBuffers:t,feedbackBuffers:e})}}_updateBinding(t,e){return t?(Object.assign(t.sourceBuffers,e.sourceBuffers),Object.assign(t.feedbackBuffers,e.feedbackBuffers),t.transformFeedback&&t.transformFeedback.setBuffers(t.feedbackBuffers),t):{sourceBuffers:Object.assign({},e.sourceBuffers),feedbackBuffers:Object.assign({},e.feedbackBuffers)}}_swapBuffers(t){if(!this.feedbackMap)return null;const e=Object.assign({},t.sourceBuffers),n=Object.assign({},t.feedbackBuffers);for(const r in this.feedbackMap){const i=this.feedbackMap[r];e[r]=t.feedbackBuffers[i],n[i]=t.sourceBuffers[r],Po(n[i]instanceof Qo)}return{sourceBuffers:e,feedbackBuffers:n}}_createNewBuffer(t,e){const n=new Qo(this.gl,e);return this.resources[t]&&this.resources[t].delete(),this.resources[t]=n,n}_getNextIndex(){return(this.currentIndex+1)%2}}function ah(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){const t=parseInt(n[1],10);Number.isFinite(t)&&(e=t)}return e}const ch={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},lh="transform_uSampler_",uh="transform_uSize_",hh="transform_position";function ph(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:r,targetTexture:i}=t;let o=Object.keys(n).length,s=null;const a={};let c=e,l={};if(o>0||r){const t=c.split("\n"),e=t.slice();if(t.forEach(((t,i,c)=>{if(o>0){const r=function(t,e){const n={},r=function(t){return rh(t,["attribute","in"])}(t);if(!r)return null;const{type:i,name:o}=r;if(o&&e[o]){const e="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:r,sizeName:s,uniformDeclerations:a}=function(t){const e="".concat(lh).concat(t),n="".concat(uh).concat(t),r="  uniform sampler2D ".concat(e,";\n  uniform vec2 ").concat(n,";");return{samplerName:e,sizeName:n,uniformDeclerations:r}}(o),c=function(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Ur(!1),null}}(i),l="  ".concat(i," ").concat(o," = transform_getInput(").concat(r,", ").concat(s,").").concat(c,";\n");n[r]=o;return{updatedLine:e,inject:{"vs:#decl":a,"vs:#main-start":l},samplerTextureMap:n}}return null}(t,n);if(r){const{updatedLine:t,inject:n}=r;e[i]=t,l=fi([l,n]),Object.assign(a,r.samplerTextureMap),o--}}r&&!s&&(s=function(t,e){const n=rh(t,["varying","out"]);if(!n)return null;return n.name===e?n.type:null}(t,r))})),r){Po(i);const t="".concat(uh).concat(r),e="uniform vec2 ".concat(t,";\n"),n="     vec2 ".concat(hh," = transform_getPos(").concat(t,");\n     gl_Position = vec4(").concat(hh,", 0, 1.);\n");l=fi([l,{"vs:#decl":e,"vs:#main-start":n}])}c=e.join("\n")}return{vs:c,targetTextureType:s,inject:l,samplerTextureMap:a}}const fh={10241:9728,10240:9728,10242:33071,10243:33071};class dh{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(e),Object.seal(this)}updateModelProps(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this._processVertexShader(t);return Object.assign({},t,e)}getDrawOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:e,sourceTextures:n,framebuffer:r,targetTexture:i}=this.bindings[this.currentIndex],o=Object.assign({},e,t.attributes),s=Object.assign({},t.uniforms),a=Object.assign({},t.parameters);let c=t.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const t in this.samplerTextureMap){const e=this.samplerTextureMap[t];s[t]=n[e]}this._setSourceTextureParameters();const t=function(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:r}=t;const i={};let o,s;n&&(({width:o,height:s}=r),i["".concat(uh).concat(n)]=[o,s]);for(const t in e)({width:o,height:s}=e[t]),i["".concat(uh).concat(t)]=[o,s];return i}({sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:i});Object.assign(s,t)}return this.hasTargetTexture&&(c=!1,a.viewport=[0,0,r.width,r.height]),{attributes:o,framebuffer:r,uniforms:s,discard:c,parameters:a}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupTextures(t)}getTargetTexture(){const{targetTexture:t}=this.bindings[this.currentIndex];return t}getData(){let{packed:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{framebuffer:e}=this.bindings[this.currentIndex],n=_s(e);if(!t)return n;const r=n.constructor,i=function(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Ur(!1),null}}(this.targetTextureType),o=new r(n.length*i/4);let s=0;for(let t=0;t<n.length;t+=4)for(let e=0;e<i;e++)o[s++]=n[t+e];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{_targetTextureVarying:e,_swapTexture:n}=t;this._swapTexture=n,this.targetTextureVarying=e,this.hasTargetTexture=e,this._setupTextures(t)}_createTargetTexture(t){const{sourceTextures:e,textureOrReference:n}=t;if(n instanceof as)return n;const r=e[n];return r?(this._targetRefTexName=n,this._createNewTexture(r)):null}_setupTextures(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:e,_sourceTextures:n={},_targetTexture:r}=t,i=this._createTargetTexture({sourceTextures:n,textureOrReference:r});this.hasSourceTextures=this.hasSourceTextures||n&&Object.keys(n).length>0,this._updateBindings({sourceBuffers:e,sourceTextures:n,targetTexture:i}),"elementCount"in t&&this._updateElementIDBuffer(t.elementCount)}_updateElementIDBuffer(t){if("number"!=typeof t||this.elementCount>=t)return;const e=new Float32Array(t);e.forEach(((t,e,n)=>{n[e]=e})),this.elementIDBuffer?this.elementIDBuffer.setData({data:e}):this.elementIDBuffer=new Qo(this.gl,{data:e,accessor:{size:1}}),this.elementCount=t}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this._swapTexture){const{sourceTextures:t,targetTexture:e}=this._swapTextures(this.bindings[this.currentIndex]),n=this._getNextIndex();this.bindings[n]=this._updateBinding(this.bindings[n],{sourceTextures:t,targetTexture:e})}}_updateBinding(t,e){const{sourceBuffers:n,sourceTextures:r,targetTexture:i}=e;if(t||(t={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(t.sourceTextures,r),Object.assign(t.sourceBuffers,n),i){t.targetTexture=i;const{width:e,height:n}=i,{framebuffer:r}=t;r?(r.update({attachments:{36064:i},resizeAttachments:!1}),r.resize({width:e,height:n})):t.framebuffer=new Ms(this.gl,{id:"transform-framebuffer",width:e,height:n,attachments:{36064:i}})}return t}_setSourceTextureParameters(){const t=this.currentIndex,{sourceTextures:e}=this.bindings[t];for(const t in e)e[t].setParameters(fh)}_swapTextures(t){if(!this._swapTexture)return null;const e=Object.assign({},t.sourceTextures);e[this._swapTexture]=t.targetTexture;return{sourceTextures:e,targetTexture:t.sourceTextures[this._swapTexture]}}_createNewTexture(t){const e=function(t,e){Po(t instanceof as||t instanceof gs||t instanceof ms);const n=t.constructor,{gl:r,width:i,height:o,format:s,type:a,dataFormat:c,border:l,mipmaps:u}=t;return new n(r,Object.assign({width:i,height:o,format:s,type:a,dataFormat:c,border:l,mipmaps:u},e))}(t,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=e,e}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceTextures:e,targetTexture:n}=this.bindings[this.currentIndex],{vs:r,uniforms:i,targetTextureType:o,inject:s,samplerTextureMap:a}=ph({vs:t.vs,sourceTextureMap:e,targetTextureVarying:this.targetTextureVarying,targetTexture:n}),c=fi([t.inject||{},s]);this.targetTextureType=o,this.samplerTextureMap=a;return{vs:r,fs:t._fs||ih({version:ah(r),input:this.targetTextureVarying,inputType:o,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[ch].concat(t.modules||[]):t.modules,uniforms:i,inject:c}}}let gh=null;function mh(t,e){var n;return new t((n=t.BYTES_PER_ELEMENT*e,(!gh||gh.byteLength<n)&&(gh=new ArrayBuffer(n)),gh),0,e)}class yh extends Uo{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(t){return!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero||(Ni(t)||"Chrome"===Rl())}static getDefaultArray(t){return t.luma=t.luma||{},t.luma.defaultVertexArray||(t.luma.defaultVertexArray=new yh(t,{handle:null,isDefaultArray:!0})),t.luma.defaultVertexArray}static getMaxAttributes(t){return yh.MAX_ATTRIBUTES=yh.MAX_ATTRIBUTES||t.getParameter(34921),yh.MAX_ATTRIBUTES}static setConstant(t,e,n){switch(n.constructor){case Float32Array:yh._setConstantFloatArray(t,e,n);break;case Int32Array:yh._setConstantIntArray(t,e,n);break;case Uint32Array:yh._setConstantUintArray(t,e,n);break;default:Po(!1)}}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.id||e.program&&e.program.id;super(t,Object.assign({},e,{id:n})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=e.isDefaultArray||!1,this.gl2=t,this.initialize(e),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return yh.getMaxAttributes(this.gl)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(t)}setProps(t){return this}setElementBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Po(!t||34963===t.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind((()=>{this.gl.bindBuffer(34963,t?t.handle:null)})),this}setBuffer(t,e,n){if(34963===e.target)return this.setElementBuffer(e,n);const{size:r,type:i,stride:o,offset:s,normalized:a,integer:c,divisor:l}=n,{gl:u,gl2:h}=this;return t=Number(t),this.bind((()=>{u.bindBuffer(34962,e.handle),c?(Po(Ni(u)),h.vertexAttribIPointer(t,r,i,o,s)):u.vertexAttribPointer(t,r,i,a,o,s),u.enableVertexAttribArray(t),h.vertexAttribDivisor(t,l||0)})),this}enable(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!e&&0===t&&!yh.isSupported(this.gl,{constantAttributeZero:!0})||(t=Number(t),this.bind((()=>e?this.gl.enableVertexAttribArray(t):this.gl.disableVertexAttribArray(t)))),this}getConstantBuffer(t,e){const n=this._normalizeConstantArrayValue(e),r=n.byteLength*t,i=n.length*t;let o=!this.buffer;if(this.buffer=this.buffer||new Qo(this.gl,r),o=o||this.buffer.reallocate(r),o=o||!this._compareConstantArrayValues(n,this.bufferValue),o){const t=mh(e.constructor,i);!function(t){let{target:e,source:n,start:r=0,count:i=1}=t;const o=n.length,s=i*o;let a=0;for(let t=r;a<o;a++)e[t++]=n[a];for(;a<s;)a<s-a?(e.copyWithin(r+a,r,r+a),a*=2):(e.copyWithin(r+a,r,r+s-a),a=s)}({target:t,source:n,start:0,count:i}),this.buffer.subData(t),this.bufferValue=e}return this.buffer}_normalizeConstantArrayValue(t){return Array.isArray(t)?new Float32Array(t):t}_compareConstantArrayValues(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}static _setConstantFloatArray(t,e,n){switch(n.length){case 1:t.vertexAttrib1fv(e,n);break;case 2:t.vertexAttrib2fv(e,n);break;case 3:t.vertexAttrib3fv(e,n);break;case 4:t.vertexAttrib4fv(e,n);break;default:Po(!1)}}static _setConstantIntArray(t,e,n){switch(Po(Ni(t)),n.length){case 1:t.vertexAttribI1iv(e,n);break;case 2:t.vertexAttribI2iv(e,n);break;case 3:t.vertexAttribI3iv(e,n);break;case 4:t.vertexAttribI4iv(e,n);break;default:Po(!1)}}static _setConstantUintArray(t,e,n){switch(Po(Ni(t)),n.length){case 1:t.vertexAttribI1uiv(e,n);break;case 2:t.vertexAttribI2uiv(e,n);break;case 3:t.vertexAttribI3uiv(e,n);break;case 4:t.vertexAttribI4uiv(e,n);break;default:Po(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(t){return this.gl2.deleteVertexArray(t),[this.elements]}_bindHandle(t){this.gl2.bindVertexArray(t)}_getParameter(t,e){let{location:n}=e;return Po(Number.isFinite(n)),this.bind((()=>34373===t?this.gl.getVertexAttribOffset(n,t):this.gl.getVertexAttrib(n,t)))}}const _h=/^(.+)__LOCATION_([0-9]+)$/,vh=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class xh{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.id||e.program&&e.program.id;this.id=n,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new yh(t),Bo(this,"VertexArray","v6.0",vh),this.initialize(e),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:t}=this.vertexArrayObject;return this.values=new Array(t).fill(null),this.accessors=new Array(t).fill(null),this.unused={},this.drawParams=null,this}setProps(t){return"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"attributes"in t&&this.setAttributes(t.attributes),"elements"in t&&this.setElementBuffer(t.elements),"bindOnUse"in t&&(t=t.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(t){return Object.assign(this.attributes,t),this.vertexArrayObject.bind((()=>{for(const e in t){const n=t[e];this._setAttribute(e,n)}this.gl.bindBuffer(34962,null)})),this}setElementBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=t,this.elementsAccessor=e,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(t,e),this}setBuffer(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===e.target)return this.setElementBuffer(e,n);const{location:r,accessor:i}=this._resolveLocationAndAccessor(t,e,e.accessor,n);return r>=0&&(this.values[r]=e,this.accessors[r]=i,this.clearDrawParams(),this.vertexArrayObject.setBuffer(r,e,i)),this}setConstant(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{location:r,accessor:i}=this._resolveLocationAndAccessor(t,e,Object.assign({size:e.length},n));return r>=0&&(e=this.vertexArrayObject._normalizeConstantArrayValue(e),this.values[r]=e,this.accessors[r]=i,this.clearDrawParams(),this.vertexArrayObject.enable(r,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind((()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Qo(this.gl,{accessor:{size:4}});for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this.values[t]instanceof Qo&&(this.gl.disableVertexAttribArray(t),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(t,1,5126,!1,0,0))})),this}bindBuffers(){return this.vertexArrayObject.bind((()=>{this.elements&&this.setElementBuffer(this.elements);for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++){const e=this.values[t];e instanceof Qo&&this.setBuffer(t,e)}})),this}bindForDraw(t,e,n){let r;return this.vertexArrayObject.bind((()=>{this._setConstantAttributes(t,e),r=n()})),r}_resolveLocationAndAccessor(t,e,n,r){const i={location:-1,accessor:null},{location:o,name:s}=this._getAttributeIndex(t);if(!Number.isFinite(o)||o<0)return this.unused[t]=e,Oi.once(3,(()=>"unused value ".concat(t," in ").concat(this.id)))(),i;const a=this._getAttributeInfo(s||o);if(!a)return i;const c=this.accessors[o]||{},l=Yo.resolve(a.accessor,c,n,r),{size:u,type:h}=l;return Po(Number.isFinite(u)&&Number.isFinite(h)),{location:o,accessor:l}}_getAttributeInfo(t){return this.configuration&&this.configuration.getAttributeInfo(t)}_getAttributeIndex(t){const e=Number(t);if(Number.isFinite(e))return{location:e};const n=_h.exec(t),r=n?n[1]:t,i=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+i,name:r}:{location:-1}}_setAttribute(t,e){if(e instanceof Qo)this.setBuffer(t,e);else if(Array.isArray(e)&&e.length&&e[0]instanceof Qo){const n=e[0],r=e[1];this.setBuffer(t,n,r)}else if(ArrayBuffer.isView(e)||Array.isArray(e)){const n=e;this.setConstant(t,n)}else{if(!(e.buffer instanceof Qo))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");{const n=e;this.setBuffer(t,n.buffer,n)}}}_setConstantAttributes(t,e){const n=Math.max(0|t,0|e);let r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,n);for(let t=1;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)r=this.values[t],ArrayBuffer.isView(r)&&this._setConstantAttribute(t,r)}_setConstantAttributeZero(t,e){if(yh.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,t);const n=this.vertexArrayObject.getConstantBuffer(e,t);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}_setConstantAttribute(t,e){yh.setConstant(this.gl,t,e)}_updateDrawParams(){const t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this._updateDrawParamsForLocation(t,e);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elementsAccessor.type||this.elements.accessor.type,t.indexOffset=this.elementsAccessor.offset||0),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t}_updateDrawParamsForLocation(t,e){const n=this.values[e],r=this.accessors[e];if(!n)return;const{divisor:i}=r,o=i>0;if(t.isInstanced=t.isInstanced||o,n instanceof Qo){const e=n;if(o){const n=e.getVertexCount(r);t.instanceCount=Math.min(t.instanceCount,n)}else{const n=e.getVertexCount(r);t.vertexCount=Math.min(t.vertexCount,n)}}}setElements(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Oi.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(t,e)}}function bh(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isInteger:n=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return function(t,e){const{maxElts:n=16,size:r=1}=e;let i="[";for(let o=0;o<t.length&&o<n;++o)o>0&&(i+=",".concat(o%r==0?" ":"")),i+=bh(t[o],e);const o=t.length>n?"...":"]";return"".concat(i).concat(o)}(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<1e-16)return n?"0":"0.";if(n)return t.toFixed(0);if(Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const r=t.toPrecision(2);return r.indexOf(".0")===r.length-2?r.slice(0,-1):r}function wh(t,e,n,r){const{gl:i}=t;if(!e)return{[r]:"null","Format ":"N/A"};let o,s,a,c="NOT PROVIDED",l=1,u=0,h=0;if(n&&(c=n.type,l=n.size,c=String(c).replace("Array",""),o=-1!==c.indexOf("nt")),e instanceof Qo){const t=e,{data:p,changed:f}=t.getDebugData();let d;if(s=f?"*":"",a=p,h=t.byteLength,u=h/p.BYTES_PER_ELEMENT/l,n){const t=n.divisor>0;d="".concat(t?"I ":"P "," ").concat(u," (x").concat(l,"=").concat(h," bytes ").concat(Do(i,c),")")}else o=!0,d="".concat(h," bytes");return{[r]:"".concat(s).concat(bh(a,{size:l,isInteger:o})),"Format ":d}}return a=e,l=e.length,c=String(e.constructor.name).replace("Array",""),o=-1!==c.indexOf("nt"),{[r]:"".concat(bh(a,{size:l,isInteger:o})," (constant)"),"Format ":"".concat(l,"x").concat(c," (constant)")}}function Eh(t,e){const{type:n,size:r}=e,i=va(n,r);return i?"".concat(t," (").concat(i.name,")"):t}function Th(t){let{header:e="Uniforms",program:n,uniforms:r,undefinedOnly:i=!1}=t;Po(n);const o=".*Matrix",s=n._uniformSetters,a={},c=Object.keys(s).sort();let l=0;for(const t of c)t.match(".*_.*")||t.match(o)||Sh({table:a,header:e,uniforms:r,uniformName:t,undefinedOnly:i})&&l++;for(const t of c)t.match(o)&&Sh({table:a,header:e,uniforms:r,uniformName:t,undefinedOnly:i})&&l++;for(const t of c)a[t]||Sh({table:a,header:e,uniforms:r,uniformName:t,undefinedOnly:i})&&l++;let u=0;const h={};if(!i)for(const t in r){const n=r[t];a[t]||(u++,h[t]={Type:"NOT USED: ".concat(n),[e]:bh(n)})}return{table:a,count:l,unusedTable:h,unusedCount:u}}function Sh(t){let{table:e,header:n,uniforms:r,uniformName:i,undefinedOnly:o}=t;const s=r[i],a=function(t){return null!=t}(s);return(!o||!a)&&(e[i]={[n]:a?bh(s):"N/A","Uniform Type":a?s:"NOT PROVIDED"},!0)}function kh(t){const{type:e,size:n}=t.accessor,r=va(e,n);return r?"".concat(r.name," ").concat(t.name):t.name}const Ah={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function Mh(t,e){const{attributeMap:n=Ah}=e||{};return n&&n[t]||t}function Ih(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}Po(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const Ch=()=>{},Oh={};class Ph{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:n=No("model")}=e;Po(Ri(t)),this.id=n,this.gl=t,this.id=e.id||No("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(e)}initialize(t){this.props={},this.programManager=t.programManager||Ta.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:e=null,vs:n,fs:r,modules:i,defines:o,inject:s,varyings:a,bufferMode:c,transpileToGLSL100:l}=t;this.programProps={program:e,vs:n,fs:r,modules:i,defines:o,inject:s,varyings:a,bufferMode:c,transpileToGLSL100:l},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(t.moduleSettings))),this.drawMode=void 0!==t.drawMode?t.drawMode:4,this.vertexCount=t.vertexCount||0,this.geometryBuffers={},this.isInstanced=t.isInstanced||t.instanced||t.instanceCount>0,this._setModelProps(t),this.geometry={},Po(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(t){this._setModelProps(t)}delete(){for(const t in this._attributes)this._attributes[t]!==this.attributes[t]&&this._attributes[t].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(t){const{program:e,vs:n,fs:r,modules:i,defines:o,inject:s,varyings:a,bufferMode:c,transpileToGLSL100:l}=t;this.programProps={program:e,vs:n,fs:r,modules:i,defines:o,inject:s,varyings:a,bufferMode:c,transpileToGLSL100:l},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(t){return this.drawMode=t,this}setVertexCount(t){return Po(Number.isFinite(t)),this.vertexCount=t,this}setInstanceCount(t){return Po(Number.isFinite(t)),this.instanceCount=t,this}setGeometry(t){return this.drawMode=t.drawMode,this.vertexCount=t.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function(t,e,n){const r={};let i=e.indices;for(const o in e.attributes){const s=e.attributes[o],a=Mh(o,n);if("indices"===o)i=s;else if(s.constant)r[a]=s.value;else{const e=s.value,n={...s};delete n.value,r[a]=[new Qo(t,e),n],Ih(o,n)}}if(i){const e=i.value||i;Po(e instanceof Uint16Array||e instanceof Uint32Array,'attribute array for "indices" must be of integer type');const n={size:1,isIndexed:void 0===i.isIndexed||i.isIndexed};r.indices=[new Qo(t,{data:e,target:34963}),n]}return r}(this.gl,t),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(zo(t))return this;const e={};for(const n in t){const r=t[n];e[n]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(e),this}setUniforms(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(this.uniforms,t),this}getModuleUniforms(t){this._checkProgram();const e=this.programManager.getUniforms(this.program);return e?e(t):{}}updateModuleSettings(t){const e=this.getModuleUniforms(t||{});return this.setUniforms(e)}clear(t){return fs(this.program.gl,t),this}draw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();const{moduleSettings:e=null,framebuffer:n,uniforms:r={},attributes:i={},transformFeedback:o=this.transformFeedback,parameters:s={},vertexArray:a=this.vertexArray}=t;let c;this.setAttributes(i),this.updateModuleSettings(e),this.setUniforms(r),Oi.priority>=2&&(c=this._logDrawCallStart(2));const l=this.vertexArray.getDrawParams(),{isIndexed:u=l.isIndexed,indexType:h=l.indexType,indexOffset:p=l.indexOffset,vertexArrayInstanced:f=l.isInstanced}=this.props;f&&!this.isInstanced&&Oi.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:d,instanceCount:g}=this,{onBeforeRender:m=Ch,onAfterRender:y=Ch}=this.props;m(),this.program.setUniforms(this.uniforms);const _=this.program.draw(Object.assign(Oh,t,{logPriority:c,uniforms:null,framebuffer:n,parameters:s,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:a,transformFeedback:o,isIndexed:u,indexType:h,isInstanced:d,instanceCount:g,offset:u?p:0}));return y(),Oi.priority>=2&&this._logDrawCallEnd(c,a,n),_}transform(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{discard:e=!0,feedbackBuffers:n,unbindModels:r=[]}=t;let{parameters:i}=t;n&&this._setFeedbackBuffers(n),e&&(i=Object.assign({},i,{35977:e})),r.forEach((t=>t.vertexArray.unbindBuffers()));try{this.draw(Object.assign({},t,{parameters:i}))}finally{r.forEach((t=>t.vertexArray.bindBuffers()))}return this}render(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Oi.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(t).draw()}_setModelProps(t){Object.assign(this.props,t),"uniforms"in t&&this.setUniforms(t.uniforms),"pickable"in t&&(this.pickable=t.pickable),"instanceCount"in t&&(this.instanceCount=t.instanceCount),"geometry"in t&&this.setGeometry(t.geometry),"attributes"in t&&this.setAttributes(t.attributes),"_feedbackBuffers"in t&&this._setFeedbackBuffers(t._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:t}=this.programProps;if(t)this._managedProgram=!1;else{const{vs:e,fs:n,modules:r,inject:i,defines:o,varyings:s,bufferMode:a,transpileToGLSL100:c}=this.programProps;t=this.programManager.get({vs:e,fs:n,modules:r,inject:i,defines:o,varyings:s,bufferMode:a,transpileToGLSL100:c}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}Po(t instanceof Ea,"Model needs a program"),this._programDirty=!1,t!==this.program&&(this.program=t,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new xh(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const t in this.geometryBuffers){const e=this.geometryBuffers[t][0]||this.geometryBuffers[t];e instanceof Qo&&e.delete()}}_setAnimationProps(t){this.animated&&Po(t,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(zo(t))return this;const{gl:e}=this.program;return this.transformFeedback=this.transformFeedback||new oh(e,{program:this.program}),this.transformFeedback.setBuffers(t),this}_logDrawCallStart(t){const e=t>3?0:1e4;if(!(Date.now()-this.lastLogTime<e))return this.lastLogTime=Date.now(),Oi.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:Oi.level<=2})(),t}_logDrawCallEnd(t,e,n,r){if(void 0===t)return;const i=function(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const r={};e.elements&&(r.ELEMENT_ARRAY_BUFFER=wh(e,e.elements,null,n));const i=e.values;for(const t in i){const o=e._getAttributeInfo(t);if(o){let s="".concat(t,": ").concat(o.name);const a=e.accessors[o.location];a&&(s="".concat(t,": ").concat(Eh(o.name,a))),r[s]=wh(e,i[t],a,n)}}return r}({vertexArray:e,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:o,unusedTable:s,unusedCount:a}=Th({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),{table:c,count:l}=Th({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0});l>0&&Oi.log("MISSING UNIFORMS",Object.keys(c))(),a>0&&Oi.log("UNUSED UNIFORMS",Object.keys(s))();const u=function(t){const e={},n="Accessors for ".concat(t.id);for(const r of t.attributeInfos)if(r){const t=kh(r);e["in ".concat(t)]={[n]:JSON.stringify(r.accessor)}}for(const r of t.varyingInfos)if(r){const t=kh(r);e["out ".concat(t)]={[n]:JSON.stringify(r.accessor)}}return e}(this.vertexArray.configuration);Oi.table(t,i)(),Oi.table(t,o)(),Oi.table(t+1,u)(),r&&r.log({logLevel:2,message:"Rendered to ".concat(r.id)}),Oi.groupEnd(2)()}}class Lh{static isSupported(t){return Ni(t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(e),Object.seal(this)}delete(){const{model:t,bufferTransform:e,textureTransform:n}=this;t&&t.delete(),e&&e.delete(),n&&n.delete()}run(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{clearRenderTarget:e=!0}=t,n=this._updateDrawOptions(t);e&&n.framebuffer&&n.framebuffer.clear({color:!0}),this.model.transform(n)}swap(){let t=!1;const e=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of e)t=t||n.swap();Po(t,"Nothing to swap")}getBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(t)}getData(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of e){const e=n.getData(t);if(e)return e}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in t&&this.model.setVertexCount(t.elementCount);const e=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of e)n.update(t)}_initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{gl:e}=this;this._buildResourceTransforms(e,t),t=this._updateModelProps(t),this.model=new Ph(e,Object.assign({},t,{fs:t.fs||ih({version:ah(t.vs)}),id:t.id||"transform-model",drawMode:t.drawMode||0,vertexCount:t.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(t){let e=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const t of n)e=t.updateModelProps(e);return e}_buildResourceTransforms(t,e){(function(t){if(!zo(t.feedbackBuffers)||!zo(t.feedbackMap)||t.varyings&&t.varyings.length>0)return!0;return!1})(e)&&(this.bufferTransform=new sh(t,e)),function(t){if(!zo(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)return!0;return!1}(e)&&(this.textureTransform=new dh(t,e)),Po(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(t){let e=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const t of n)e=Object.assign(e,t.getDrawOptions(e));return e}}const Dh="\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n";const Rh={interpolation:class{constructor({gl:t,attribute:e,timeline:n}){i(this,"gl",void 0),i(this,"type","interpolation"),i(this,"attributeInTransition",void 0),i(this,"settings",void 0),i(this,"attribute",void 0),i(this,"transition",void 0),i(this,"currentStartIndices",void 0),i(this,"currentLength",void 0),i(this,"transform",void 0),i(this,"buffers",void 0),this.gl=t,this.transition=new ec(n),this.attribute=e,this.attributeInTransition=new th(t,e.settings),this.currentStartIndices=e.startIndices,this.currentLength=0,this.transform=function(t,e){const n=Xu(e.size);return new Lh(t,{vs:Dh,defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}(t,e);const r={byteLength:0,usage:35050};this.buffers=[new Qo(t,r),new Qo(t,r)]}get inProgress(){return this.transition.inProgress}start(t,e){if(t.duration<=0)return void this.transition.cancel();this.settings=t;const{gl:n,buffers:r,attribute:i}=this;Ku(r);const o={numInstances:e,attribute:i,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const t of r)Qu({buffer:t,...o});this.currentStartIndices=i.startIndices,this.currentLength=Ju(i,e),this.attributeInTransition.setData({buffer:r[1],value:i.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/i.size),sourceBuffers:{aFrom:r[0],aTo:Yu(0,i)},feedbackBuffers:{vCurrent:r[1]}})}update(){const t=this.transition.update();if(t){const{duration:t,easing:e}=this.settings,{time:n}=this.transition;let r=n/t;e&&(r=e(r)),this.transform.run({uniforms:{time:r}})}return t}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0}},spring:class{constructor({gl:t,attribute:e,timeline:n}){i(this,"gl",void 0),i(this,"type","spring"),i(this,"attributeInTransition",void 0),i(this,"settings",void 0),i(this,"attribute",void 0),i(this,"transition",void 0),i(this,"currentStartIndices",void 0),i(this,"currentLength",void 0),i(this,"texture",void 0),i(this,"framebuffer",void 0),i(this,"transform",void 0),i(this,"buffers",void 0),this.gl=t,this.type="spring",this.transition=new ec(n),this.attribute=e,this.attributeInTransition=new th(t,{...e.settings,normalized:!1}),this.currentStartIndices=e.startIndices,this.currentLength=0,this.texture=function(t){return new as(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(t),this.framebuffer=function(t,e){return new Ms(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}(t,this.texture),this.transform=function(t,e,n){const r=Xu(e.size);return new Lh(t,{framebuffer:n,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}(t,e,this.framebuffer);const r={byteLength:0,usage:35050};this.buffers=[new Qo(t,r),new Qo(t,r),new Qo(t,r)]}get inProgress(){return this.transition.inProgress}start(t,e){const{gl:n,buffers:r,attribute:i}=this,o={numInstances:e,attribute:i,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const t of r)Qu({buffer:t,...o});this.settings=t,this.currentStartIndices=i.startIndices,this.currentLength=Ju(i,e),this.attributeInTransition.setData({buffer:r[1],value:i.value}),this.transition.start({...t,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/i.size),sourceBuffers:{aTo:Yu(0,i)}})}update(){const{buffers:t,transform:e,framebuffer:n,transition:r}=this;if(!r.update())return!1;const i=this.settings;e.update({sourceBuffers:{aPrev:t[0],aCur:t[1]},feedbackBuffers:{vNext:t[2]}}),e.run({framebuffer:n,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:i.stiffness,damping:i.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),Ku(t),this.attributeInTransition.setData({buffer:t[1],value:this.attribute.value});return _s(n)[0]>0||r.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}};class Nh{constructor(t,{id:e,timeline:n}){i(this,"id",void 0),i(this,"isSupported",void 0),i(this,"gl",void 0),i(this,"timeline",void 0),i(this,"transitions",void 0),i(this,"needsRedraw",void 0),i(this,"numInstances",void 0),this.id=e,this.gl=t,this.timeline=n,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=Lh.isSupported(t)}finalize(){for(const t in this.transitions)this._removeTransition(t)}update({attributes:t,transitions:e,numInstances:n}){this.numInstances=n||1;for(const n in t){const r=t[n],i=r.getTransitionSetting(e);i&&this._updateAttribute(n,r,i)}for(const n in this.transitions){const r=t[n];r&&r.getTransitionSetting(e)||this._removeTransition(n)}}hasAttribute(t){const e=this.transitions[t];return e&&e.inProgress}getAttributes(){const t={};for(const e in this.transitions){const n=this.transitions[e];n.inProgress&&(t[e]=n.attributeInTransition)}return t}run(){if(!this.isSupported||0===this.numInstances)return!1;for(const t in this.transitions){this.transitions[t].update()&&(this.needsRedraw=!0)}const t=this.needsRedraw;return this.needsRedraw=!1,t}_removeTransition(t){this.transitions[t].cancel(),delete this.transitions[t]}_updateAttribute(t,e,n){const r=this.transitions[t];let i=!r||r.type!==n.type;if(i){if(!this.isSupported)return void G.warn("WebGL2 not supported by this browser. Transition for ".concat(t," is disabled."))();r&&this._removeTransition(t);const o=Rh[n.type];o?this.transitions[t]=new o({attribute:e,timeline:this.timeline,gl:this.gl}):(G.error("unsupported transition type '".concat(n.type,"'"))(),i=!1)}(i||e.needsRedraw())&&(this.needsRedraw=!0,this.transitions[t].start(n,this.numInstances))}}const jh="attributeManager.invalidate";class zh{constructor(t,{id:e="attribute-manager",stats:n,timeline:r}={}){i(this,"id",void 0),i(this,"gl",void 0),i(this,"attributes",void 0),i(this,"updateTriggers",void 0),i(this,"needsRedraw",void 0),i(this,"userData",void 0),i(this,"stats",void 0),i(this,"attributeTransitionManager",void 0),i(this,"mergeBoundsMemoized",La(Dn)),this.id=e,this.gl=t,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=n,this.attributeTransitionManager=new Nh(t,{id:"".concat(e,"-transitions"),timeline:r}),Object.seal(this)}finalize(){for(const t in this.attributes)this.attributes[t].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(t={clearRedrawFlags:!1}){const e=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!t.clearRedrawFlags,e&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(t){this._add(t)}addInstanced(t){this._add(t,{instanced:1})}remove(t){for(const e of t)void 0!==this.attributes[e]&&(this.attributes[e].delete(),delete this.attributes[e])}invalidate(t,e){const n=this._invalidateTrigger(t,e);Z(jh,this,t,n)}invalidateAll(t){for(const e in this.attributes)this.attributes[e].setNeedsUpdate(e,t);Z(jh,this,"all")}update({data:t,numInstances:e,startIndices:n=null,transitions:r,props:i={},buffers:o={},context:s={}}){let a=!1;Z("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const r in this.attributes){const c=this.attributes[r],l=c.settings.accessor;c.startIndices=n,c.numInstances=e,i[r]&&G.removed("props.".concat(r),"data.attributes.".concat(r))(),c.setExternalBuffer(o[r])||c.setBinaryValue("string"==typeof l?o[l]:void 0,t.startIndices)||"string"==typeof l&&!o[l]&&c.setConstantValue(i[l])||c.needsUpdate()&&(a=!0,this._updateAttribute({attribute:c,numInstances:e,data:t,props:i,context:s})),this.needsRedraw=this.needsRedraw||c.needsRedraw()}a&&Z("attributeManager.updateEnd",this,e),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:e,transitions:r})}updateTransition(){const{attributeTransitionManager:t}=this,e=t.run();return this.needsRedraw=this.needsRedraw||e,e}getAttributes(){return this.attributes}getBounds(t){const e=t.map((t=>{var e;return null===(e=this.attributes[t])||void 0===e?void 0:e.getBounds()}));return this.mergeBoundsMemoized(e)}getChangedAttributes(t={clearChangedFlags:!1}){const{attributes:e,attributeTransitionManager:n}=this,r={...n.getAttributes()};for(const i in e){const o=e[i];o.needsRedraw(t)&&!n.hasAttribute(i)&&(r[i]=o)}return r}getShaderAttributes(t,e={}){t||(t=this.getAttributes());const n={};for(const r in t)e[r]||Object.assign(n,t[r].getShaderAttributes());return n}_add(t,e={}){for(const n in t){const r=t[n];this.attributes[n]=this._createAttribute(n,r,e)}this._mapUpdateTriggersToAttributes()}_createAttribute(t,e,n){const r={...e,id:t,size:(e.isIndexed?1:e.size)||1,divisor:n.instanced?1:e.divisor||0};return new th(this.gl,r)}_mapUpdateTriggersToAttributes(){const t={};for(const e in this.attributes){this.attributes[e].getUpdateTriggers().forEach((n=>{t[n]||(t[n]=[]),t[n].push(e)}))}this.updateTriggers=t}_invalidateTrigger(t,e){const{attributes:n,updateTriggers:r}=this,i=r[t];return i&&i.forEach((t=>{const r=n[t];r&&r.setNeedsUpdate(r.id,e)})),i}_updateAttribute(t){const{attribute:e,numInstances:n}=t;if(Z("attribute.updateStart",e),e.constant)return void e.setConstantValue(e.value);e.allocate(n)&&Z("attribute.allocate",e,n);e.updateBuffer(t)&&(this.needsRedraw=!0,Z("attribute.updateEnd",e,n))}}const Bh=1e-5;function Fh(t,e,n,r,i){const o=e-t;return(n-e)*i+-o*r+o+e}function Uh(t,e){if(Array.isArray(t)){let n=0;for(let r=0;r<t.length;r++){const i=t[r]-e[r];n+=i*i}return Math.sqrt(n)}return Math.abs(t-e)}const Vh={interpolation:class extends ec{get value(){return this._value}_onUpdate(){const{time:t,settings:{fromValue:e,toValue:n,duration:r,easing:i}}=this,o=i(t/r);this._value=pn(e,n,o)}},spring:class extends ec{get value(){return this._currValue}_onUpdate(){const{fromValue:t,toValue:e,damping:n,stiffness:r}=this.settings,{_prevValue:i=t,_currValue:o=t}=this;let s=function(t,e,n,r,i){if(Array.isArray(n)){const o=[];for(let s=0;s<n.length;s++)o[s]=Fh(t[s],e[s],n[s],r,i);return o}return Fh(t,e,n,r,i)}(i,o,e,n,r);const a=Uh(s,e),c=Uh(s,o);a<Bh&&c<Bh&&(s=e,this.end()),this._prevValue=o,this._currValue=s}}};class qh{constructor(t){this.transitions=new Map,this.timeline=t}get active(){return this.transitions.size>0}add(t,e,n,r){const{transitions:i}=this;if(i.has(t)){const n=i.get(t),{value:r=n.settings.fromValue}=n;e=r,this.remove(t)}if(!(r=Zu(r)))return;const o=Vh[r.type];if(!o)return void G.error("unsupported transition type '".concat(r.type,"'"))();const s=new o(this.timeline);s.start({...r,fromValue:e,toValue:n}),i.set(t,s)}remove(t){const{transitions:e}=this;e.has(t)&&(e.get(t).cancel(),e.delete(t))}update(){const t={};for(const[e,n]of this.transitions)n.update(),t[e]=n.value,n.inProgress||this.remove(e);return t}clear(){for(const t of this.transitions.keys())this.remove(t)}}function Wh(t,e){const n=$h({newProps:t,oldProps:e,propTypes:t[g],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=function(t,e){if(null===e)return"oldProps is null, initial diff";let n=!1;const{dataComparator:r,_dataDiff:i}=t;r?r(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied");n&&i&&(n=i(t.data,e.data)||n);return n}(t,e);let i=!1;return r||(i=function(t,e){if(null===e)return{all:!0};if("all"in t.updateTriggers){if(Yh(t,e,"all"))return{all:!0}}const n={};let r=!1;for(const i in t.updateTriggers)if("all"!==i){Yh(t,e,i)&&(n[i]=!0,r=!0)}return!!r&&n}(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:Zh(t,e),transitionsChanged:Gh(t,e)}}function Gh(t,e){if(!t.transitions)return!1;const n={},r=t[g];let i=!1;for(const o in t.transitions){const s=r[o],a=s&&s.type;("number"===a||"color"===a||"array"===a)&&Hh(t[o],e[o],s)&&(n[o]=!0,i=!0)}return!!i&&n}function $h({newProps:t,oldProps:e,ignoreProps:n={},propTypes:r={},triggerName:i="props"}){if(e===t)return!1;if("object"!=typeof t||null===t)return"".concat(i," changed shallowly");if("object"!=typeof e||null===e)return"".concat(i," changed shallowly");for(const o of Object.keys(t))if(!(o in n)){if(!(o in e))return"".concat(i,".").concat(o," added");const n=Hh(t[o],e[o],r[o]);if(n)return"".concat(i,".").concat(o," ").concat(n)}for(const o of Object.keys(e))if(!(o in n)){if(!(o in t))return"".concat(i,".").concat(o," dropped");if(!Object.hasOwnProperty.call(t,o)){const n=Hh(t[o],e[o],r[o]);if(n)return"".concat(i,".").concat(o," ").concat(n)}}return!1}function Hh(t,e,n){let r=n&&n.equal;return r&&!r(t,e,n)?"changed deeply":r||(r=t&&e&&t.equals,!r||r.call(t,e))?r||e===t?null:"changed shallowly":"changed deeply"}function Zh(t,e){if(null===e)return!0;const n=e.extensions,{extensions:r}=t;if(r===n)return!1;if(!n||!r)return!0;if(r.length!==n.length)return!0;for(let t=0;t<r.length;t++)if(!r[t].equals(n[t]))return!0;return!1}function Yh(t,e,n){let r=t.updateTriggers[n];r=null==r?{}:r;let i=e.updateTriggers[n];i=null==i?{}:i;return $h({oldProps:i,newProps:r,triggerName:n})}function Xh(t){if(null===(e=t)||"object"!=typeof e)throw new Error("count(): argument not an object");var e;if("function"==typeof t.count)return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(function(t){return null!==t&&"object"==typeof t&&t.constructor===Object}(t))return Object.keys(t).length;throw new Error("count(): argument not a container")}function Kh(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some((t=>"project64"===t.name)))){const t=n.modules.findIndex((t=>"project32"===t.name));t>=0&&n.modules.splice(t,1)}if("inject"in e)if(t.inject){const r={...t.inject};for(const t in e.inject)r[t]=(r[t]||"")+e.inject[t];n.inject=r}else n.inject=e.inject;return n}const Jh=[0,0,0];function Qh(t,e,n=!1){const r=e.projectPosition(t);if(n&&e instanceof tc){const[n,i,o=0]=t,s=e.getDistanceScales([n,i]);r[2]=o*s.unitsPerMeter[2]}return r}function tp(t,{viewport:e,modelMatrix:n,coordinateSystem:r,coordinateOrigin:i,offsetMode:o}){let[s,a,c=0]=t;switch(n&&([s,a,c]=$n([],[s,a,c,1],n)),r){case Cr.LNGLAT:return Qh([s,a,c],e,o);case Cr.LNGLAT_OFFSETS:return Qh([s+i[0],a+i[1],c+(i[2]||0)],e,o);case Cr.METER_OFFSETS:return Qh(br(i,[s,a,c]),e,o);case Cr.CARTESIAN:default:return e.isGeospatial?[s+i[0],a+i[1],c+i[2]]:e.projectPosition([s,a,c])}}function ep(t,e){const{viewport:n,coordinateSystem:r,coordinateOrigin:i,modelMatrix:o,fromCoordinateSystem:s,fromCoordinateOrigin:a}=function(t){const{viewport:e,modelMatrix:n,coordinateOrigin:r}=t;let{coordinateSystem:i,fromCoordinateSystem:o,fromCoordinateOrigin:s}=t;return i===Cr.DEFAULT&&(i=e.isGeospatial?Cr.LNGLAT:Cr.CARTESIAN),void 0===o&&(o=i),void 0===s&&(s=r),{viewport:e,coordinateSystem:i,coordinateOrigin:r,modelMatrix:n,fromCoordinateSystem:o,fromCoordinateOrigin:s}}(e),{autoOffset:c=!0}=e,{geospatialOrigin:l=Jh,shaderCoordinateOrigin:u=Jh,offsetMode:h=!1}=c?Fa(n,r,i):{},p=tp(t,{viewport:n,modelMatrix:o,coordinateSystem:s,coordinateOrigin:a,offsetMode:h});if(h){const t=n.projectPosition(l||u);Sn(p,p,t)}return p}const np={10241:9987,10240:9729,10242:33071,10243:33071},rp={};const ip={boolean:{validate:(t,e)=>!0,equal:(t,e,n)=>Boolean(t)===Boolean(e)},number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},color:{validate:(t,e)=>e.optional&&!t||ap(t)&&(3===t.length||4===t.length),equal:(t,e,n)=>Ha(t,e,1)},accessor:{validate(t,e){const n=cp(t);return"function"===n||n===cp(e.value)},equal:(t,e,n)=>"function"==typeof e||Ha(t,e,1)},array:{validate:(t,e)=>e.optional&&!t||ap(t),equal(t,e,n){const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?Ha(t,e,i):t===e}},object:{equal(t,e,n){if(n.ignore)return!0;const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?Ha(t,e,i):t===e}},function:{validate:(t,e)=>e.optional&&!t||"function"==typeof t,equal:(t,e,n)=>!n.compare&&!1!==n.ignore||t===e},data:{transform:(t,e,n)=>{const{dataTransform:r}=n.props;return r&&t?r(t):t}},image:{transform:(t,e,n)=>{const r=n.context;return r&&r.gl?function(t,e,n,r){if(n instanceof as)return n;n.constructor&&"Object"!==n.constructor.name&&(n={data:n});let i=null;n.compressed&&(i={10241:n.data.length>1?9985:9729});const o=new as(e,{...n,parameters:{...np,...i,...r}});return rp[o.id]=t,o}(n.id,r.gl,t,{...e.parameters,...n.props.textureParameters}):null},release:(t,e,n)=>{var r,i;r=n.id,(i=t)&&i instanceof as&&rp[i.id]===r&&(i.delete(),delete rp[i.id])}}};function op(t,e){switch(cp(e)){case"object":return sp(t,e);case"array":return sp(t,{type:"array",value:e,compare:!1});case"boolean":return sp(t,{type:"boolean",value:e});case"number":return sp(t,{type:"number",value:e});case"function":return sp(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function sp(t,e){return"type"in e?{name:t,...ip[e.type],...e}:"value"in e?{name:t,type:cp(e.value),...e}:{name:t,type:"object",value:e}}function ap(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function cp(t){return ap(t)?"array":null===t?"null":typeof t}const lp="_mergedDefaultProps";function up(t,e){let n=lp;if(e)for(const t of e){const e=t.constructor;e&&(n+=":".concat(e.extensionName||e.name))}const r=fp(t,n);return r||(t[n]=function(t,e){const n=t.prototype;if(!n)return null;const r=Object.getPrototypeOf(t),i=up(r),o=fp(t,"defaultProps")||{},s=function(t){const e={},n={},r={};for(const[i,o]of Object.entries(t)){const t=null==o?void 0:o.deprecatedFor;if(t)r[i]=Array.isArray(t)?t:[t];else{const t=op(i,o);e[i]=t,n[i]=t.value}}return{propTypes:e,defaultProps:n,deprecatedProps:r}}(o),a=Object.assign(Object.create(null),i,s.defaultProps),c=Object.assign(Object.create(null),null==i?void 0:i[g],s.propTypes),l=Object.assign(Object.create(null),null==i?void 0:i[m],s.deprecatedProps);for(const t of e){const e=up(t.constructor);e&&(Object.assign(a,e),Object.assign(c,e[g]),Object.assign(l,e[m]))}(function(t,e){const n=function(t){const e=t.componentName;e||G.warn("".concat(t.name,".componentName not specified"))();return e||t.name}(e);Object.defineProperties(t,{id:{writable:!0,value:n}})})(a,t),function(t,e){const n={},r={};for(const t in e){const i=e[t],{name:o,value:s}=i;i.async&&(n[o]=s,r[o]=hp(o))}t[y]=n,t[_]={},Object.defineProperties(t,r)}(a,c),function(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(t){const r="".concat(this.id,": ").concat(n);for(const r of e[n])pp(this,r)||(this[r]=t);G.deprecated(r,e[n].join("/"))()}})}(a,l),a[g]=c,a[m]=l,0!==e.length||pp(t,"_propTypes")||(t._propTypes=c);return a}(t,e||[]))}function hp(t){return{enumerable:!0,set(e){"string"==typeof e||e instanceof Promise||qu(e)?this[_][t]=e:this[v][t]=e},get(){if(this[v]){if(t in this[v]){return this[v][t]||this[y][t]}if(t in this[_]){const e=this[d]&&this[d].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[y][t]}}return this[y][t]}}}function pp(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function fp(t,e){return pp(t,e)&&t[e]}let dp=0;class gp{constructor(...t){i(this,"id",void 0),i(this,"props",void 0),i(this,"count",void 0),this.props=function(t,e){let n;for(let t=e.length-1;t>=0;t--){const r=e[t];"extensions"in r&&(n=r.extensions)}const r=up(t.constructor,n),i=Object.create(r);i[d]=t,i[_]={},i[v]={};for(let t=0;t<e.length;++t){const n=e[t];for(const t in n)i[t]=n[t]}return Object.freeze(i),i}(this,t),this.id=this.props.id,this.count=dp++}clone(t){const{props:e}=this,n={};for(const t in e[y])t in e[v]?n[t]=e[v][t]:t in e[_]&&(n[t]=e[_][t]);return new this.constructor({...e,...n,...t})}}i(gp,"componentName","Component"),i(gp,"defaultProps",{});const mp=Object.freeze({});class yp{constructor(t){i(this,"component",void 0),i(this,"onAsyncPropUpdated",void 0),i(this,"asyncProps",void 0),i(this,"oldProps",void 0),i(this,"oldAsyncProps",void 0),this.component=t,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const t in this.asyncProps){const e=this.asyncProps[t];e&&e.type&&e.type.release&&e.type.release(e.resolvedValue,e.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||mp}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(t){return t in this.asyncProps}getAsyncProp(t){const e=this.asyncProps[t];return e&&e.resolvedValue}isAsyncPropLoading(t){if(t){const e=this.asyncProps[t];return Boolean(e&&e.pendingLoadCount>0&&e.pendingLoadCount!==e.resolvedLoadCount)}for(const t in this.asyncProps)if(this.isAsyncPropLoading(t))return!0;return!1}reloadAsyncProp(t,e){this._watchPromise(t,Promise.resolve(e))}setAsyncProps(t){this.component=t[d]||this.component;const e=t[v]||{},n=t[_]||t,r=t[y]||{};for(const t in e){const n=e[t];this._createAsyncPropData(t,r[t]),this._updateAsyncProp(t,n),e[t]=this.getAsyncProp(t)}for(const t in n){const e=n[t];this._createAsyncPropData(t,r[t]),this._updateAsyncProp(t,e)}}_fetch(t,e){return null}_onResolve(t,e){}_onError(t,e){}_updateAsyncProp(t,e){this._didAsyncInputValueChange(t,e)&&("string"==typeof e&&(e=this._fetch(t,e)),e instanceof Promise?this._watchPromise(t,e):qu(e)?this._resolveAsyncIterable(t,e):this._setPropValue(t,e))}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const t in this.asyncProps)Object.defineProperty(this.oldAsyncProps,t,{enumerable:!0,value:this.oldProps[t]})}}_didAsyncInputValueChange(t,e){const n=this.asyncProps[t];return e!==n.resolvedValue&&e!==n.lastValue&&(n.lastValue=e,!0)}_setPropValue(t,e){this._freezeAsyncOldProps();const n=this.asyncProps[t];n&&(e=this._postProcessValue(n,e),n.resolvedValue=e,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount)}_setAsyncPropValue(t,e,n){const r=this.asyncProps[t];r&&n>=r.resolvedLoadCount&&void 0!==e&&(this._freezeAsyncOldProps(),r.resolvedValue=e,r.resolvedLoadCount=n,this.onAsyncPropUpdated(t,e))}_watchPromise(t,e){const n=this.asyncProps[t];if(n){n.pendingLoadCount++;const r=n.pendingLoadCount;e.then((e=>{this.component&&(e=this._postProcessValue(n,e),this._setAsyncPropValue(t,e,r),this._onResolve(t,e))})).catch((e=>{this._onError(t,e)}))}}async _resolveAsyncIterable(t,e){if("data"!==t)return void this._setPropValue(t,e);const n=this.asyncProps[t];if(!n)return;n.pendingLoadCount++;const r=n.pendingLoadCount;let i=[],o=0;for await(const n of e){if(!this.component)return;const{dataTransform:e}=this.component.props;i=e?e(n,i):i.concat(n),Object.defineProperty(i,"__diff",{enumerable:!1,value:[{startRow:o,endRow:i.length}]}),o=i.length,this._setAsyncPropValue(t,i,r)}this._onResolve(t,i)}_postProcessValue(t,e){const n=t.type;return n&&this.component&&(n.release&&n.release(t.resolvedValue,n,this.component),n.transform)?n.transform(e,n,this.component):e}_createAsyncPropData(t,e){if(!this.asyncProps[t]){const n=this.component&&this.component.props[g];this.asyncProps[t]={type:n&&n[t],lastValue:null,resolvedValue:e,pendingLoadCount:0,resolvedLoadCount:0}}}}class _p extends yp{constructor({attributeManager:t,layer:e}){super(e),i(this,"attributeManager",void 0),i(this,"needsRedraw",void 0),i(this,"needsUpdate",void 0),i(this,"subLayers",void 0),i(this,"usesPickingColorCache",void 0),i(this,"hasPickingBuffer",void 0),i(this,"changeFlags",void 0),i(this,"viewport",void 0),i(this,"uniformTransitions",void 0),i(this,"propsInTransition",void 0),this.attributeManager=t,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(t,e){const n=this.layer,r=null==n?void 0:n.props.fetch;return r?r(e,{propName:t,layer:n}):super._fetch(t,e)}_onResolve(t,e){const n=this.layer;if(n){const r=n.props.onDataLoad;"data"===t&&r&&r(e,{propName:t,layer:n})}}_onError(t,e){const n=this.layer;n&&n.raiseError(e,"loading ".concat(t," of ").concat(this.layer))}}const vp=2**24-1,xp=Object.freeze([]),bp=La((({oldViewport:t,viewport:e})=>t.equals(e)));let wp=new Uint8ClampedArray(0);const Ep={data:{type:"data",value:xp,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:r,loadOptions:i,signal:o})=>{const{resourceManager:s}=n.context;var a;(i=i||n.getLoadOptions(),r=r||n.props.loaders,o)&&(i={...i,fetch:{...null===(a=i)||void 0===a?void 0:a.fetch,signal:o}});let c=s.contains(t);return c||i||(s.add({resourceId:t,data:rn(t,r),persistent:!1}),c=!0),c?s.subscribe({resourceId:t,onChange:t=>{var r;return null===(r=n.internalState)||void 0===r?void 0:r.reloadAsyncProp(e,t)},consumerId:n.id,requestId:e}):rn(t,r,i)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:Cr.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,100*-t]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Tp extends gp{constructor(...t){super(...t),i(this,"internalState",null),i(this,"lifecycle",c),i(this,"context",void 0),i(this,"state",void 0),i(this,"parent",null)}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let t=this;for(;t.parent;)t=t.parent;return t}toString(){const t=this.constructor.layerName||this.constructor.name;return"".concat(t,"({id: '").concat(this.props.id,"'})")}project(t){Ja(this.internalState);const e=this.internalState.viewport||this.context.viewport,n=tp(t,{viewport:e,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[r,i,o]=Sr(n,e.pixelProjectionMatrix);return 2===t.length?[r,i]:[r,i,o]}unproject(t){Ja(this.internalState);return(this.internalState.viewport||this.context.viewport).unproject(t)}projectPosition(t,e){Ja(this.internalState);return ep(t,{viewport:this.internalState.viewport||this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...e})}get isComposite(){return!1}setState(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return!!this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(t){for(const e of this.getModels())e.updateModuleSettings(t)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:t}=this.props;return t===Cr.DEFAULT||t===Cr.LNGLAT||t===Cr.CARTESIAN}onHover(t,e){return this.props.onHover&&this.props.onHover(t,e)||!1}onClick(t,e){return this.props.onClick&&this.props.onClick(t,e)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(t,e=[]){return e[0]=t+1&255,e[1]=t+1>>8&255,e[2]=t+1>>8>>8&255,e}decodePickingColor(t){Ja(t instanceof Uint8Array);const[e,n,r]=t;return e+256*n+65536*r-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:Xh(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var t;return null===(t=this.getAttributeManager())||void 0===t?void 0:t.getBounds(["positions","instancePositions"])}getShaders(t){for(const e of this.props.extensions)t=Kh(t,e.getShaders.call(this,e));return t}shouldUpdateState(t){return t.changeFlags.propsOrDataChanged}updateState(t){const e=this.getAttributeManager(),{dataChanged:n}=t.changeFlags;if(n&&e)if(Array.isArray(n))for(const t of n)e.invalidateAll(t);else e.invalidateAll();if(e){const{props:n}=t,r=this.internalState.hasPickingBuffer,i=Number.isInteger(n.highlightedObjectIndex)||n.pickable||n.extensions.some((t=>t.getNeedsPickingBuffer.call(this,t)));if(r!==i){this.internalState.hasPickingBuffer=i;const{pickingColors:t,instancePickingColors:n}=e.attributes,r=t||n;r&&(i&&r.constant&&(r.constant=!1,e.invalidate(r.id)),r.value||i||(r.constant=!0,r.value=[0,0,0]))}}}finalizeState(t){for(const t of this.getModels())t.delete();const e=this.getAttributeManager();e&&e.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(t){for(const e of this.getModels())e.draw(t)}getPickingInfo({info:t,mode:e,sourceLayer:n}){const{index:r}=t;return r>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[r]),t}raiseError(t,e){var n,r,i,o;(e&&(t=new Error("".concat(e,": ").concat(t.message),{cause:t})),null!==(n=(r=this.props).onError)&&void 0!==n&&n.call(r,t))||(null===(i=this.context)||void 0===i||null===(o=i.onError)||void 0===o||o.call(i,t,this))}getNeedsRedraw(t={clearRedrawFlags:!1}){return this._getNeedsRedraw(t)}needsUpdate(){return!!this.internalState&&(this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()))}hasUniformTransition(){var t;return(null===(t=this.internalState)||void 0===t?void 0:t.uniformTransitions.active)||!1}activateViewport(t){if(!this.internalState)return;const e=this.internalState.viewport;this.internalState.viewport=t,e&&bp({oldViewport:e,viewport:t})||(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(t="all"){const e=this.getAttributeManager();e&&("all"===t?e.invalidateAll():e.invalidate(t))}updateAttributes(t){for(const e of this.getModels())this._setModelAttributes(e,t)}_updateAttributes(){const t=this.getAttributeManager();if(!t)return;const e=this.props,n=this.getNumInstances(),r=this.getStartIndices();t.update({data:e.data,numInstances:n,startIndices:r,props:e,transitions:e.transitions,buffers:e.data.attributes,context:this});const i=t.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(i)}_updateAttributeTransition(){const t=this.getAttributeManager();t&&t.updateTransition()}_updateUniformTransition(){const{uniformTransitions:t}=this.internalState;if(t.active){const e=t.update(),n=Object.create(this.props);for(const t in e)Object.defineProperty(n,t,{value:e[t]});return n}return this.props}calculateInstancePickingColors(t,{numInstances:e}){if(t.constant)return;const n=Math.floor(wp.length/3);if(this.internalState.usesPickingColorCache=!0,n<e){e>vp&&G.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),wp=an.allocate(wp,e,{size:3,copy:!0,maxCount:Math.max(e,vp)});const t=Math.floor(wp.length/3),r=[];for(let e=n;e<t;e++)this.encodePickingColor(e,r),wp[3*e+0]=r[0],wp[3*e+1]=r[1],wp[3*e+2]=r[2]}t.value=wp.subarray(0,3*e)}_setModelAttributes(t,e){const n=this.getAttributeManager(),r=t.userData.excludeAttributes||{},i=n.getShaderAttributes(e,r);t.setAttributes(i)}disablePickingIndex(t){const e=this.props.data;if(!("attributes"in e))return void this._disablePickingIndex(t);const{pickingColors:n,instancePickingColors:r}=this.getAttributeManager().attributes,i=n||r,o=i&&e.attributes&&e.attributes[i.id];if(o&&o.value){const n=o.value,r=this.encodePickingColor(t);for(let t=0;t<e.length;t++){const e=i.getVertexOffset(t);n[e]===r[0]&&n[e+1]===r[1]&&n[e+2]===r[2]&&this._disablePickingIndex(t)}}else this._disablePickingIndex(t)}_disablePickingIndex(t){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,r=e||n;if(!r)return;const i=r.getVertexOffset(t),o=r.getVertexOffset(t+1);r.buffer.subData({data:new Uint8Array(o-i),offset:i})}restorePickingColors(){const{pickingColors:t,instancePickingColors:e}=this.getAttributeManager().attributes,n=t||e;n&&(this.internalState.usesPickingColorCache&&n.value.buffer!==wp.buffer&&(n.value=wp.subarray(0,n.value.length)),n.updateSubBuffer({startOffset:0}))}_initialize(){Ja(!this.internalState),Ja(Number.isFinite(this.props.coordinateSystem)),Z("layer.initialize",this);const t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new _p({attributeManager:t,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(G.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),t)}),this.internalState.uniformTransitions=new qh(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const t of this.props.extensions)t.initializeState.call(this,this.context,t);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(t){Z("layer.matched",this,this===t);const{state:e,internalState:n}=t;this!==t&&(this.internalState=n,this.state=e,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const t=this.needsUpdate();if(Z("layer.update",this,t),!t)return;const e=this.props,n=this.context,r=this.internalState,i=n.viewport,o=this._updateUniformTransition();r.propsInTransition=o,n.viewport=r.viewport||i,this.props=o;try{const t=this._getUpdateParams(),e=this.getModels();if(n.gl)this.updateState(t);else try{this.updateState(t)}catch(t){}for(const e of this.props.extensions)e.updateState.call(this,t,e);const r=this.getModels()[0]!==e[0];this._postUpdate(t,r)}finally{n.viewport=i,this.props=e,this._clearChangeFlags(),r.needsUpdate=!1,r.resetOldProps()}}_finalize(){Z("layer.finalize",this),this.finalizeState(this.context);for(const t of this.props.extensions)t.finalizeState.call(this,this.context,t)}_drawLayer({moduleParameters:t=null,uniforms:e={},parameters:n={}}){this._updateAttributeTransition();const r=this.props,i=this.context;this.props=this.internalState.propsInTransition||r;const o=this.props.opacity;e.opacity=Math.pow(o,1/2.2);try{t&&this.setModuleParameters(t);const{getPolygonOffset:r}=this.props,o=r&&r(e)||[0,0];yo(i.gl,{polygonOffset:o}),_o(i.gl,n,(()=>{const r={moduleParameters:t,uniforms:e,parameters:n,context:i};for(const t of this.props.extensions)t.draw.call(this,r,t);this.draw(r)}))}finally{this.props=r}}getChangeFlags(){var t;return null===(t=this.internalState)||void 0===t?void 0:t.changeFlags}setChangeFlags(t){if(!this.internalState)return;const{changeFlags:e}=this.internalState;for(const n in t)if(t[n]){let r=!1;if("dataChanged"===n){const i=t[n],o=e[n];i&&Array.isArray(o)&&(e.dataChanged=Array.isArray(i)?o.concat(i):i,r=!0)}e[n]||(e[n]=t[n],r=!0),r&&Z("layer.changeFlag",this,n,t)}const n=Boolean(e.dataChanged||e.updateTriggersChanged||e.propsChanged||e.extensionsChanged);e.propsOrDataChanged=n,e.somethingChanged=n||e.viewportChanged||e.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(t,e){const n=Wh(t,e);if(n.updateTriggersChanged)for(const t in n.updateTriggersChanged)n.updateTriggersChanged[t]&&this.invalidateAttribute(t);if(n.transitionsChanged)for(const i in n.transitionsChanged){var r;this.internalState.uniformTransitions.add(i,e[i],t[i],null===(r=t.transitions)||void 0===r?void 0:r[i])}return this.setChangeFlags(n)}validateProps(){!function(t){const e=t[g];for(const n in e){const r=e[n],{validate:i}=r;if(i&&!i(t[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}(this.props)}updateAutoHighlight(t){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(t)}_updateAutoHighlight(t){const e={pickingSelectedColor:t.picked?t.color:null},{highlightColor:n}=this.props;t.picked&&"function"==typeof n&&(e.pickingHighlightColor=n(t)),this.setModuleParameters(e),this.setNeedsRedraw()}_getAttributeManager(){const t=this.context;return new zh(t.gl,{id:this.props.id,stats:t.stats,timeline:t.timeline})}_postUpdate(t,e){const{props:n,oldProps:r}=t;this.setNeedsRedraw(),this._updateAttributes();const{model:i}=this.state;null==i||i.setInstanceCount(this.getNumInstances());const{autoHighlight:o,highlightedObjectIndex:s,highlightColor:a}=n;if(e||r.autoHighlight!==o||r.highlightedObjectIndex!==s||r.highlightColor!==a){const t={};o||(t.pickingSelectedColor=null),Array.isArray(a)&&(t.pickingHighlightColor=a),(e||s!==r.highlightedObjectIndex)&&(t.pickingSelectedColor=Number.isFinite(s)&&s>=0?this.encodePickingColor(s):null),this.setModuleParameters(t)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(t){if(!this.internalState)return!1;let e=!1;e=e||this.internalState.needsRedraw&&this.id;const n=this.getAttributeManager(),r=!!n&&n.getNeedsRedraw(t);if(e=e||r,e)for(const t of this.props.extensions)t.onNeedsRedraw.call(this,t);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags,e}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}i(Tp,"defaultProps",Ep),i(Tp,"layerName","Layer");var Sp={name:"project32",dependencies:[Va],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"};const kp={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1};const Ap={name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kp;const e={};if(void 0!==t.pickingSelectedColor)if(t.pickingSelectedColor){const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}else e.picking_uSelectedColorValid=0;if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,(t=>t/255));Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return void 0!==t.pickingActive&&(e.picking_uActive=Boolean(t.pickingActive),e.picking_uAttribute=Boolean(t.pickingAttribute)),e}};var Mp={inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:#decl":"\nuniform bool picking_uAttribute;\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}},...Ap};const Ip={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class Cp{static get DRAW_MODE(){return Ip}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:e=No("geometry"),drawMode:n=Ip.TRIANGLES,attributes:r={},indices:i=null,vertexCount:o=null}=t;this.id=e,this.drawMode=0|n,this.attributes={},this.userData={},this._setAttributes(r,i),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(t){return"Geometry ".concat(this.id," attribute ").concat(t)}_setAttributes(t,e){e&&(this.indices=ArrayBuffer.isView(e)?{value:e,size:1}:e);for(const e in t){let n=t[e];n=ArrayBuffer.isView(n)?{value:n}:n,Po(ArrayBuffer.isView(n.value),"".concat(this._print(e),": must be typed array or object with value as typed array")),"POSITION"!==e&&"positions"!==e||n.size||(n.size=3),"indices"===e?(Po(!this.indices),this.indices=n):this.attributes[e]=n}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(t,e){if(e)return e.value.length;let n=1/0;for(const e in t){const r=t[e],{value:i,size:o,constant:s}=r;!s&&i&&o>=1&&(n=Math.min(n,i.length/o))}return Po(Number.isFinite(n)),n}}const Op=[0,0,0,255],Pp={getSourcePosition:{type:"accessor",value:t=>t.sourcePosition},getTargetPosition:{type:"accessor",value:t=>t.targetPosition},getSourceColor:{type:"accessor",value:Op},getTargetColor:{type:"accessor",value:Op},getWidth:{type:"accessor",value:1},getHeight:{type:"accessor",value:1},getTilt:{type:"accessor",value:0},greatCircle:!1,numSegments:{type:"number",value:50,min:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}};class Lp extends Tp{constructor(...t){super(...t),i(this,"state",void 0)}getBounds(){var t;return null===(t=this.getAttributeManager())||void 0===t?void 0:t.getBounds(["instanceSourcePositions","instanceTargetPositions"])}getShaders(){return super.getShaders({vs:"#define SHADER_NAME arc-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec4 instanceSourceColors;\nattribute vec4 instanceTargetColors;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceSourcePositions64Low;\nattribute vec3 instanceTargetPositions;\nattribute vec3 instanceTargetPositions64Low;\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\nattribute float instanceHeights;\nattribute float instanceTilts;\n\nuniform bool greatCircle;\nuniform bool useShortestPath;\nuniform float numSegments;\nuniform float opacity;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform int widthUnits;\n\nvarying vec4 vColor;\nvarying vec2 uv;\nvarying float isValid;\n\nfloat paraboloid(float distance, float sourceZ, float targetZ, float ratio) {\n\n  float deltaZ = targetZ - sourceZ;\n  float dh = distance * instanceHeights;\n  if (dh == 0.0) {\n    return sourceZ + deltaZ * ratio;\n  }\n  float unitZ = deltaZ / dh;\n  float p2 = unitZ * unitZ + 1.0;\n  float dir = step(deltaZ, 0.0);\n  float z0 = mix(sourceZ, targetZ, dir);\n  float r = mix(ratio, 1.0 - ratio, dir);\n  return sqrt(r * (p2 - r)) * dh + z0;\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  return dir_screenspace * offset_direction * width / 2.0;\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (numSegments - 1.0));\n}\n\nvec3 interpolateFlat(vec3 source, vec3 target, float segmentRatio) {\n  float distance = length(source.xy - target.xy);\n  float z = paraboloid(distance, source.z, target.z, segmentRatio);\n\n  float tiltAngle = radians(instanceTilts);\n  vec2 tiltDirection = normalize(target.xy - source.xy);\n  vec2 tilt = vec2(-tiltDirection.y, tiltDirection.x) * z * sin(tiltAngle);\n\n  return vec3(\n    mix(source.xy, target.xy, segmentRatio) + tilt,\n    z * cos(tiltAngle)\n  );\n}\nfloat getAngularDist (vec2 source, vec2 target) {\n  vec2 sourceRadians = radians(source);\n  vec2 targetRadians = radians(target);\n  vec2 sin_half_delta = sin((sourceRadians - targetRadians) / 2.0);\n  vec2 shd_sq = sin_half_delta * sin_half_delta;\n\n  float a = shd_sq.y + cos(sourceRadians.y) * cos(targetRadians.y) * shd_sq.x;\n  return 2.0 * asin(sqrt(a));\n}\n\nvec3 interpolateGreatCircle(vec3 source, vec3 target, vec3 source3D, vec3 target3D, float angularDist, float t) {\n  vec2 lngLat;\n  if(abs(angularDist - PI) < 0.001) {\n    lngLat = (1.0 - t) * source.xy + t * target.xy;\n  } else {\n    float a = sin((1.0 - t) * angularDist);\n    float b = sin(t * angularDist);\n    vec3 p = source3D.yxz * a + target3D.yxz * b;\n    lngLat = degrees(vec2(atan(p.y, -p.x), atan(p.z, length(p.xy))));\n  }\n\n  float z = paraboloid(angularDist * EARTH_RADIUS, source.z, target.z, t);\n\n  return vec3(lngLat, z);\n}\n\nvoid main(void) {\n  geometry.worldPosition = instanceSourcePositions;\n  geometry.worldPositionAlt = instanceTargetPositions;\n\n  float segmentIndex = positions.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float prevSegmentRatio = getSegmentRatio(max(0.0, segmentIndex - 1.0));\n  float nextSegmentRatio = getSegmentRatio(min(numSegments - 1.0, segmentIndex + 1.0));\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  isValid = 1.0;\n\n  uv = vec2(segmentRatio, positions.y);\n  geometry.uv = uv;\n  geometry.pickingColor = instancePickingColors;\n\n  vec4 curr;\n  vec4 next;\n  vec3 source;\n  vec3 target;\n\n  if ((greatCircle || project_uProjectionMode == PROJECTION_MODE_GLOBE) && project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n    source = project_globe_(vec3(instanceSourcePositions.xy, 0.0));\n    target = project_globe_(vec3(instanceTargetPositions.xy, 0.0));\n    float angularDist = getAngularDist(instanceSourcePositions.xy, instanceTargetPositions.xy);\n\n    vec3 prevPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, prevSegmentRatio);\n    vec3 currPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, segmentRatio);\n    vec3 nextPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, nextSegmentRatio);\n\n    if (abs(currPos.x - prevPos.x) > 180.0) {\n      indexDir = -1.0;\n      isValid = 0.0;\n    } else if (abs(currPos.x - nextPos.x) > 180.0) {\n      indexDir = 1.0;\n      isValid = 0.0;\n    }\n    nextPos = indexDir < 0.0 ? prevPos : nextPos;\n    nextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;\n\n    if (isValid == 0.0) {\n      nextPos.x += nextPos.x > 0.0 ? -360.0 : 360.0;\n      float t = ((currPos.x > 0.0 ? 180.0 : -180.0) - currPos.x) / (nextPos.x - currPos.x);\n      currPos = mix(currPos, nextPos, t);\n      segmentRatio = mix(segmentRatio, nextSegmentRatio, t);\n    }\n\n    vec3 currPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, segmentRatio);\n    vec3 nextPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, nextSegmentRatio);\n  \n    curr = project_position_to_clipspace(currPos, currPos64Low, vec3(0.0), geometry.position);\n    next = project_position_to_clipspace(nextPos, nextPos64Low, vec3(0.0));\n  \n  } else {\n    vec3 source_world = instanceSourcePositions;\n    vec3 target_world = instanceTargetPositions;\n    if (useShortestPath) {\n      source_world.x = mod(source_world.x + 180., 360.0) - 180.;\n      target_world.x = mod(target_world.x + 180., 360.0) - 180.;\n\n      float deltaLng = target_world.x - source_world.x;\n      if (deltaLng > 180.) target_world.x -= 360.;\n      if (deltaLng < -180.) source_world.x -= 360.;\n    }\n    source = project_position(source_world, instanceSourcePositions64Low);\n    target = project_position(target_world, instanceTargetPositions64Low);\n    float antiMeridianX = 0.0;\n\n    if (useShortestPath) {\n      if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n        antiMeridianX = -(project_uCoordinateOrigin.x + 180.) / 360. * TILE_SIZE;\n      }\n      float thresholdRatio = (antiMeridianX - source.x) / (target.x - source.x);\n\n      if (prevSegmentRatio <= thresholdRatio && nextSegmentRatio > thresholdRatio) {\n        isValid = 0.0;\n        indexDir = sign(segmentRatio - thresholdRatio);\n        segmentRatio = thresholdRatio;\n      }\n    }\n\n    nextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;\n    vec3 currPos = interpolateFlat(source, target, segmentRatio);\n    vec3 nextPos = interpolateFlat(source, target, nextSegmentRatio);\n\n    if (useShortestPath) {\n      if (nextPos.x < antiMeridianX) {\n        currPos.x += TILE_SIZE;\n        nextPos.x += TILE_SIZE;\n      }\n    }\n\n    curr = project_common_position_to_clipspace(vec4(currPos, 1.0));\n    next = project_common_position_to_clipspace(vec4(nextPos, 1.0));\n    geometry.position = vec4(currPos, 1.0);\n  }\n  float widthPixels = clamp(\n    project_size_to_pixel(instanceWidths * widthScale, widthUnits),\n    widthMinPixels, widthMaxPixels\n  );\n  vec3 offset = vec3(\n    getExtrusionOffset((next.xy - curr.xy) * indexDir, positions.y, widthPixels),\n    0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  DECKGL_FILTER_GL_POSITION(curr, geometry);\n  gl_Position = curr + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);\n\n  vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio);\n  vColor = vec4(color.rgb, color.a * opacity);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME arc-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 uv;\nvarying float isValid;\n\nvoid main(void) {\n  if (isValid == 0.0) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n  geometry.uv = uv;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[Sp,Mp]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceSourceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getSourceColor",defaultValue:Op},instanceTargetColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getTargetColor",defaultValue:Op},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1},instanceHeights:{size:1,transition:!0,accessor:"getHeight",defaultValue:1},instanceTilts:{size:1,transition:!0,accessor:"getTilt",defaultValue:0}})}updateState(t){super.updateState(t);const{props:e,oldProps:n,changeFlags:r}=t;if(r.extensionsChanged||r.propsChanged&&e.numSegments!==n.numSegments){var i;const{gl:t}=this.context;null===(i=this.state.model)||void 0===i||i.delete(),this.state.model=this._getModel(t),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{widthUnits:e,widthScale:n,widthMinPixels:r,widthMaxPixels:i,greatCircle:o,wrapLongitude:s}=this.props;this.state.model.setUniforms(t).setUniforms({greatCircle:o,widthUnits:Pr[e],widthScale:n,widthMinPixels:r,widthMaxPixels:i,useShortestPath:s}).draw()}_getModel(t){const{id:e,numSegments:n}=this.props;let r=[];for(let t=0;t<n;t++)r=r.concat([t,1,0,t,-1,0]);const i=new Ph(t,{...this.getShaders(),id:e,geometry:new Cp({drawMode:5,attributes:{positions:new Float32Array(r)}}),isInstanced:!0});return i.setUniforms({numSegments:n}),i}}i(Lp,"layerName","ArcLayer"),i(Lp,"defaultProps",Pp);var Dp,Rp=n(62076);function Np(t){t.getLayer("artillery")||(Dp=new Nu({id:"artillery",type:Lp,data:[],pickable:!0,getWidth:1,getHeight:.5,minzoom:Rp.NX,maxzoom:Rp.bo,getSourcePosition:function(t){return t.source},getTargetPosition:function(t){return t.target},getSourceColor:function(t){return[0,0,255,100]},getTargetColor:function(t){return[255,0,0,100]}}),t.addLayer(Dp))}function jp(t,e){t.getLayer("artillery")&&Dp.setProps({data:e})}function zp(t){t.getLayer("artillery")&&Dp.setProps({data:[]})}},88704:function(t,e,n){"use strict";n.d(e,{jN:function(){return u},eQ:function(){return p},hx:function(){return h}});var r=n(15671),i=n(43144),o=(n(66992),n(39575),n(41539),n(82472),n(92990),n(18927),n(33105),n(35035),n(74345),n(7174),n(32846),n(44731),n(77209),n(96319),n(58867),n(37789),n(33739),n(29368),n(14483),n(12056),n(3462),n(30678),n(27462),n(33824),n(55021),n(12974),n(15016),n(21249),n(57640),n(9924),n(39714),n(43290),n(6767)),s=n.n(o),a=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;(0,r.Z)(this,t),this.color=s()(),this.size=0,this.data=new Uint8Array(0),this.width=0,this.height=0,this.widthHalf=0,this.heightHalf=0,this.map=null,this.map=e,this.color=s()(n),this.size=i,this.data=new Uint8Array(i*i*4),this.width=this.size,this.height=this.size,this.widthHalf=this.width/2,this.heightHalf=this.height/2,this.radius=this.size/2*.3}return(0,i.Z)(t,[{key:"onAdd",value:function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.context=this.canvas.getContext("2d",{willReadFrequently:!0})}},{key:"render",value:function(){var t=performance.now()%1e3/1e3,e=.7*this.widthHalf*t+this.radius;return this.context.clearRect(0,0,this.width,this.height),this.context.beginPath(),this.context.arc(this.widthHalf,this.heightHalf,e,0,2*Math.PI),this.context.fillStyle=this.color.alpha(1-t).toString(),this.context.fill(),this.context.closePath(),this.data=this.context.getImageData(0,0,this.width,this.height).data,this.map.triggerRepaint(),!0}}]),t}(),c=n(86487),l=n(62076);function u(t){!function(t){if(!t.hasImage("assemble-dot")){var e=new a(t,"rgb(252,27,27)",20);t.addImage("assemble-dot",e,{pixelRatio:.5})}t.getSource("assemble-point")||t.addSource("assemble-point",{type:"geojson",tolerance:0,data:(0,c.dc)()})}(t),t.getLayer("assemble-point")||t.addLayer({id:"assemble-point",type:"symbol",source:"assemble-point",minzoom:l.NX,maxzoom:l.bo,layout:{"icon-image":"assemble-dot","icon-allow-overlap":!0,"text-allow-overlap":!0}})}function h(t,e){if(t.getSource("assemble-point")){var n=t.getSource("assemble-point"),r=n._data;r.features=[],r.features.push(e),n.setData(r)}}function p(t){t.getSource("assemble-point")&&t.getSource("assemble-point").setData((0,c.dc)())}},28294:function(t,e,n){"use strict";n.d(e,{T5:function(){return a},XX:function(){return c},ym:function(){return s}});var r=n(61928),i=n(86487),o=n(62076);function s(t){!function(t){if(!t.hasImage("attack-select-dot")){var e=new r.y(t,"rgba(42,253,246)",100);t.addImage("attack-select-dot",e,{pixelRatio:1})}t.getSource("attack-select")||t.addSource("attack-select",{type:"geojson",tolerance:0,data:(0,i.dc)()})}(t),t.getLayer("attack-select")||t.addLayer({id:"attack-select",type:"symbol",source:"attack-select",minzoom:o.NX,maxzoom:o.bo,layout:{"icon-image":"attack-select-dot","icon-allow-overlap":!0,"text-allow-overlap":!0}})}function a(t,e){if(t.getSource("attack-select")){var n=t.getSource("attack-select"),r=n._data;r.features=e,n.setData(r)}}function c(t){if(t.getSource("attack-select")){var e=t.getSource("attack-select");e._data.features=[],e.setData((0,i.dc)())}}},36152:function(t,e,n){"use strict";n.d(e,{YN:function(){return a},cV:function(){return o},kN:function(){return s}});var r=n(86487),i=n(62076);function o(t){!function(t){t.getSource("target-area")||t.addSource("target-area",{type:"geojson",tolerance:0,data:(0,r.dc)()})}(t),t.getLayer("target-area-line")||t.addLayer({id:"target-area-line",type:"line",source:"target-area",minzoom:i.NX,maxzoom:i.bo,paint:{"line-color":"#4395fa","line-width":2,"line-opacity":1}}),t.getLayer("target-area")||t.addLayer({id:"target-area",type:"fill",source:"target-area",minzoom:i.NX,maxzoom:i.bo,paint:{"fill-opacity":.5,"fill-color":"rgb(147,193,252)"}})}function s(t){t.getSource("target-area")&&t.getSource("target-area").setData((0,r.dc)())}function a(t,e){(0,r.AO)(t,"target-area",e)}},76119:function(t,e,n){"use strict";n.a(t,(async function(t,r){try{n.d(e,{WD:function(){return L},sp:function(){return E},xp:function(){return S},zn:function(){return P}});n(47941),n(92222),n(69826),n(41539),n(31672),n(2490),n(59461),n(68309);var i=n(34446),o=n(28e3),s=n.n(o),a=n(68384),c=n.n(a),l=(n(16171),n(17544)),u=n(46185),h=n.n(u),p=n(89635),f=n.n(p),d=n(14701),g=n(25108),m=t([d]);d=(m.then?(await m)():m)[0];var y,_,v=$("#command-tab"),x=!1,b=$("#chat-messages"),w=$("textarea[name=message]");function E(t){var e;_=t,y||((y=i.L.over((function(){return new(s())("".concat(CHAT_HOST,"/chat"))}))).reconnect_delay=1e4,y.heartbeat.incoming=1e3,y.heartbeat.outgoing=1e3,y.debug=function(t){},y.onConnect=function(t){g.info("socket connected"),C(),x=!0,w.enable(),y.subscribe("".concat(ctx.path,"/subscribe/chat"),(function(t){A(JSON.parse(t.body))})),y.subscribe("".concat(ctx.path,"/subscribe/chat/").concat(ACCOUNT.chatUuid),(function(t){k(JSON.parse(t.body))})),ACCOUNT.unitWeaponNo&&y.subscribe("".concat(ctx.path,"/subscribe/chat/weapon/").concat(ACCOUNT.unitWeaponNo),(function(t){M(JSON.parse(t.body))})),e=T.interval(30..seconds())},y.onStompError=function(t){g.log(">>>",t),g.error("###################################################################################"),g.error("Broker reported error: "+t.headers.message),g.error("Additional details: "+t.body),g.error("###################################################################################")},y.onWebSocketClose=function(t){e&&e.stop(),e=null,g.log(">>",t),g.error("----------------------------------------------------------------------------------"),g.error("Broker reported close: "+t.reason),g.error("socket closed"),g.error("----------------------------------------------------------------------------------"),w.disable()},y.activate()),w.hotkey("keydown","Enter",(function(t){if(t.shiftKey)return!0;O()}),!0)}function T(){y&&x&&y.send("".concat(ctx.path,"/publish/chat/ping/").concat(ACCOUNT.chatUuid),{},JSON.stringify({command:l.mY.PING.code,senderNo:ACCOUNT.no}))}function S(){y&&x&&c().getCurrentPosition((function(t,e){t||y.send("".concat(ctx.path,"/publish/chat/position/").concat(ACCOUNT.unitWeaponNo),{},JSON.stringify({command:l.mY.POSITION.code,senderNo:ACCOUNT.no,lng:e.coords.longitude,lat:e.coords.latitude}))}))}function k(t){switch(t.command=l.mY.of(t.command),l.mY.PING.equals(t.command)||((0,d.NE)(),v.prop("checked",!0)),t.command){case l.mY.COMMAND:t.css="bg-blue",$(h()(t)).appendTo(b);break;case l.mY.ACCEPTANCE:t.css="bg-orange",$(h()(t)).appendTo(b)}C()}function A(t){switch(t.command=l.mY.of(t.command),l.mY.POSITION.equals(t.command)||((0,d.NE)(),v.prop("checked",!0)),t.command){case l.mY.CHAT:t.css="bg-blue",$(h()(t)).appendTo(b);break;case l.mY.JOIN:case l.mY.LEAVE:t.css="bg-orange bordered-none"}C()}function M(t){if(t.command=l.mY.of(t.command),t.info=JSON.parse(t.info),(0,d.NE)(),v.prop("checked",!0),t.command===l.mY.COMMAND)$.ajax({url:"".concat(ctx.path,"/action/get"),type:"post",data:{participantNo:t.info.participator.participantNo,actionNo:t.info.participator.actionNo},complete:function(t,e){},success:function(e,n,r){var i,o;switch(e.detail=JSON.parse(e.detail),t.response=e,t.type=l.hK.of(t.info.type),t.css="bg-purple-darker",t.type){case l.hK.DIRECT:var s=null===(i=t.response.detail)||void 0===i||null===(i=i.matches)||void 0===i?void 0:i.find((function(e){var n,r;return(null===(n=e.ally)||void 0===n||null===(n=n.properties)||void 0===n?void 0:n.unitWeaponNo)===(null===(r=t.info)||void 0===r||null===(r=r.participator)||void 0===r?void 0:r.unitWeaponNo)}));t.ally=null==s?void 0:s.ally,t.target=null==s?void 0:s.target,$(f()({message:t})).appendTo(b);break;case l.hK.INDIRECT:t.ally=null===(o=t.response.detail)||void 0===o||null===(o=o.allys)||void 0===o?void 0:o.find((function(e){var n,r;return(null===(n=e.properties)||void 0===n?void 0:n.unitWeaponNo)===(null===(r=t.info)||void 0===r||null===(r=r.participator)||void 0===r?void 0:r.unitWeaponNo)})),$(f()({message:t})).appendTo(b)}}});C()}function I(){v.prop("checked")&&b.exists()&&b[0].scrollIntoView(!1)}function C(){I.timeout(10)}function O(){if(y&&x&&!w.val().isEmpty()){var t,e,n,r,i,o="["+ACCOUNT.name+"]";null!==(t=ACCOUNT.unit)&&void 0!==t&&t.unitName&&(o=o+" "+ACCOUNT.unit.unitName),null!==(e=ACCOUNT.weapon)&&void 0!==e&&e.name&&(o=o+" "+ACCOUNT.weapon.name),y.send("".concat(ctx.path,"/publish/chat"),{},JSON.stringify({command:l.mY.CHAT.code,senderNo:ACCOUNT.no,senderUUID:ACCOUNT.chatUuid,senderUnitNo:ACCOUNT.unitNo,senderWeaponNo:ACCOUNT.unitWeaponNo,senderName:o,uuid:null!==(n=null===(r=ACCOUNT.weapon)||void 0===r||null===(r=r.weapon)||void 0===r||null===(r=r.icon)||void 0===r?void 0:r.uuid)&&void 0!==n?n:null===(i=ACCOUNT.unit)||void 0===i||null===(i=i.icon)||void 0===i?void 0:i.uuid,message:w.val()})),function(){w.val("")}.timeout(50)}}function P(t,e){if(y&&x){var n,r,i,o,s,a="["+ACCOUNT.name+"]";null!==(n=ACCOUNT.unit)&&void 0!==n&&n.unitName&&(a=a+" "+ACCOUNT.unit.unitName),null!==(r=ACCOUNT.weapon)&&void 0!==r&&r.name&&(a=a+" "+ACCOUNT.weapon.name),y.send("".concat(ctx.path,"/publish/chat/").concat(ACCOUNT.chatUuid),{},JSON.stringify({command:l.mY.COMMAND.code,senderNo:ACCOUNT.no,senderUnitNo:ACCOUNT.unitNo,senderWeaponNo:ACCOUNT.unitWeaponNo,senderName:a,receiverUUID:ACCOUNT.chatUuid,uuid:null!==(i=null===(o=ACCOUNT.weapon)||void 0===o||null===(o=o.weapon)||void 0===o||null===(o=o.icon)||void 0===o?void 0:o.uuid)&&void 0!==i?i:null===(s=ACCOUNT.unit)||void 0===s||null===(s=s.icon)||void 0===s?void 0:s.uuid,message:t,info:JSON.stringify(e)}))}}function L(t){if(y&&x){var e,n,r,i,o,s="["+ACCOUNT.name+"]";null!==(e=ACCOUNT.unit)&&void 0!==e&&e.unitName&&(s=s+" "+ACCOUNT.unit.unitName),null!==(n=ACCOUNT.weapon)&&void 0!==n&&n.name&&(s=s+" "+ACCOUNT.weapon.name),t.commanderNo=ACCOUNT.no,t.uuid=ACCOUNT.chatUuid,t.commanderUnitNo=ACCOUNT.unitNo,t.commanderWeaponNo=ACCOUNT.unitWeaponNo,y.send("".concat(ctx.path,"/publish/chat/weapon/").concat(t.unitWeaponNo),{},JSON.stringify({command:l.mY.COMMAND.code,senderNo:ACCOUNT.no,senderUUID:ACCOUNT.chatUuid,senderUnitNo:ACCOUNT.unitNo,senderWeaponNo:ACCOUNT.unitWeaponNo,receiverWeaponNo:t.unitWeaponNo,actionNo:t.actionNo,senderName:s,uuid:null!==(r=null===(i=ACCOUNT.weapon)||void 0===i||null===(i=i.weapon)||void 0===i||null===(i=i.icon)||void 0===i?void 0:i.uuid)&&void 0!==r?r:null===(o=ACCOUNT.unit)||void 0===o||null===(o=o.icon)||void 0===o?void 0:o.uuid,message:"",info:JSON.stringify(t)})),function(){w.val("")}.timeout(50)}}Router.watch(document).onclick().route("myPosition",(function(t,e,n){_.panTo(n.geometry.coordinates)})).route("assemblePosition",(function(t,e,n){_.panTo(n.geometry.coordinates)})).route("targetPosition",(function(t,e,n){_.panTo(n.geometry.coordinates)})).ontab().route("chat",(function(t,e,n,r){C()})),r()}catch(D){r(D)}}))},79578:function(t,e,n){"use strict";n.d(e,{Jj:function(){return y},KW:function(){return m},Wh:function(){return g},p3:function(){return d}});n(92222),n(57327),n(41539),n(88449),n(2490),n(59849),n(21249),n(57640),n(9924),n(91038),n(78783);var r=n(96486),i=n.n(r),o=n(77170),s=n(61928),a=n(86487),c=n(62076),l=n(17544),u=n(6158),h=n.n(u),p=n(25108),f=!1;function d(t){if(t.getLayer("enemy-select")){var e=function(t){var e=x.getBoundingClientRect();return new(h().Point)(t.clientX-e.left-x.clientLeft,t.clientY-e.top-x.clientTop)},n=function(t){var e=x.getBoundingClientRect();return new(h().Point)(t.changedTouches[0].clientX-e.left-x.clientLeft,t.changedTouches[0].clientY-e.top-x.clientTop)},r=function(n){(n.shiftKey||f)&&(t.dragPan.disable(),document.addEventListener("mousemove",a),document.addEventListener("mouseup",d),y=e(n))},s=function(e){f&&1===e.changedTouches.length&&(t.dragPan.disable(),document.addEventListener("touchmove",u),document.addEventListener("touchend",g),y=n(e),p.log(y))},a=function(t){b=!0,_=e(t),v||((v=document.createElement("div")).classList.add("weapon-select-area"),x.appendChild(v));var n=Math.min(y.x,_.x),r=Math.max(y.x,_.x),i=Math.min(y.y,_.y),o=Math.max(y.y,_.y),s="translate(".concat(n,"px, ").concat(i,"px)");v.style.transform=s,v.style.width="".concat(r-n,"px"),v.style.height="".concat(o-i,"px")},u=function(t){b=!0,_=n(t),v||((v=document.createElement("div")).classList.add("weapon-select-area"),x.appendChild(v));var e=Math.min(y.x,_.x),r=Math.max(y.x,_.x),i=Math.min(y.y,_.y),o=Math.max(y.y,_.y),s="translate(".concat(e,"px, ").concat(i,"px)");v.style.transform=s,v.style.width="".concat(r-e,"px"),v.style.height="".concat(o-i,"px")},d=function(t){b&&m([y,e(t)])},g=function(t){b&&m([y,n(t)])},m=function(e){document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",d),document.removeEventListener("touchmove",u),document.removeEventListener("touchend",g),v&&v.parentNode.removeChild(v),v=null;var n=t.unproject(e[0]),r=t.unproject(e[1]),s=o.v4B(o.uf4([o.xmu([n.lng,n.lat]),o.xmu([r.lng,r.lat])]));if(e&&t.getZoom()>=c.NX&&t.getZoom()<=c.bo){var h=t.queryRenderedFeatures(e,{layers:["enemy"]}).filter((function(t){return l.jd.ENEMY.equals(l.jd.of(t.properties.peers))})).filter((function(t){return o.$ZQ(s,t.geometry)}));!function(t,e,n){if(t.getSource("enemy-select")){var r=Array.from(e).map((function(t){return i().pick(t,"id","type","geometry","properties")})),o=t.getSource("enemy-select"),s=o._data;s.features=r,o.setData(s)}}(t,h)}t.dragPan.enable(),b=!1,f=!1};t.boxZoom.disable();var y,_,v,x=t.getCanvasContainer(),b=!1;x.removeEventListener("mousedown",r,!0),x.removeEventListener("touchstart",s,!0),x.addEventListener("mousedown",r,!0),x.addEventListener("touchstart",s,!0)}}function g(t){!function(t){if(!t.hasImage("enemy-select-dot")){var e=new s.y(t,"rgba(255,255,255,0.46)",100);t.addImage("enemy-select-dot",e,{pixelRatio:1})}t.getSource("enemy-select")||t.addSource("enemy-select",{type:"geojson",tolerance:0,data:(0,a.dc)()})}(t),t.getLayer("enemy-select")||t.addLayer({id:"enemy-select",type:"symbol",source:"enemy-select",minzoom:c.NX,maxzoom:c.bo,layout:{"icon-image":"enemy-select-dot","icon-allow-overlap":!0,"text-allow-overlap":!0}})}function m(t){if(t.getSource("enemy-select"))return t.getSource("enemy-select")._data.features.map((function(t){return(0,a.Zm)(t)}))}function y(t){t.getSource("enemy-select")&&t.getSource("enemy-select").setData((0,a.dc)())}Router.watch(document).onclick().route("selectArea",(function(t,e,n){f=!0}))},78244:function(t,e,n){"use strict";n.d(e,{L$:function(){return d},PY:function(){return f},Uy:function(){return p},bU:function(){return h}});var r=n(15785),i=(n(21249),n(57640),n(9924),n(91038),n(78783),n(92222),n(96486)),o=n.n(i),s=n(77170),a=n(61928),c=n(78620),l=n(86487),u=n(62076);function h(t){!function(t){if(!t.hasImage("enemy-target-dot")){var e=new a.y(t,"rgba(255,134,65,0.98)",100);t.addImage("enemy-target-dot",e,{pixelRatio:1})}t.getSource("enemy-target")||t.addSource("enemy-target",{type:"geojson",tolerance:0,data:(0,l.dc)()})}(t),t.getLayer("enemy-target")||t.addLayer({id:"enemy-target",type:"symbol",source:"enemy-target",minzoom:u.NX,maxzoom:u.bo,layout:{"icon-image":"enemy-target-dot","icon-allow-overlap":!0,"text-allow-overlap":!0}})}function p(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Function.empty;if(t.getSource("enemy-target")){var i=Array.from(e).map((function(t){return o().pick(t,"id","type","geometry","properties")})),a=t.getSource("enemy-target"),l=a._data;l.features=i,a.setData(l),(0,c.Zr)(t);var h=i.map((function(t){return t.geometry.coordinates}));if(1===h.length){(0,c.n$)(t,h[0]);var p=s.bAF([].concat((0,r.Z)(h[0]),(0,r.Z)(h[0]))),f=s.xmu(h[0]),d=s.f3b(p,u.zt,u.g2);n(i,f,d,s.SOn(d))}else if(h.length>=2){var g=s.beQ(s.YmM(h));(0,c.n$)(t,g.geometry.coordinates);var m=s.bAF(s.VWR(s.TuJ(h))),y=s.f3b(m,u.zt,u.g2);n(i,g,y,s.SOn(y))}}}function f(t){t.getSource("enemy-target")&&t.getSource("enemy-target").setData((0,l.dc)())}function d(t){if(t.getSource("enemy-target"))return t.getSource("enemy-target")._data.features.map((function(t){return function(t){var e=o().pick(t,"id","type","geometry","properties");e.properties.unit&&(e.properties.unit=o().omit(e.properties.unit,"parent","geometry"));e.properties.weapon.ammos&&(e.properties.ammos=e.properties.weapon.ammos.map((function(t){return t.ammo})));e.properties.weapon&&(e.properties.weapon=o().omit(e.properties.weapon,"icon","ammos"));return e.properties=o().omit(e.properties,"icon","scale","anchor","radialOffset","textSize","offset","textColor","textWidth","textHaloColor","textHaloWidth"),e}(t)}))}},39216:function(t,e,n){"use strict";n.d(e,{Wk:function(){return c},lr:function(){return a},m0:function(){return o},uH:function(){return s}});var r=n(86487),i=n(62076);function o(t){!function(t){t.getSource("multi-check-routing")||t.addSource("multi-check-routing",{type:"geojson",tolerance:0,data:(0,r.dc)()}),t.getSource("multi-direct-check-routing")||t.addSource("multi-direct-check-routing",{type:"geojson",tolerance:0,data:(0,r.dc)()})}(t),t.getLayer("multi-check-routing")||t.addLayer({id:"multi-check-routing",type:"line",source:"multi-check-routing",minzoom:i.NX,maxzoom:i.bo,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#6dfd94","line-width":12}}),t.getLayer("multi-check-routing-outer")||t.addLayer({id:"multi-check-routing-outer",type:"line",source:"multi-check-routing",minzoom:i.NX,maxzoom:i.bo,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#acffbf","line-width":6}}),t.getLayer("multi-check-routing-distance")||t.addLayer({id:"multi-check-routing-distance",type:"symbol",source:"multi-check-routing",minzoom:i.NX,maxzoom:i.bo,layout:{"symbol-placement":"line","text-font":["Open Sans Regular"],"text-field":["get","distance_string"],"text-size":14,"icon-allow-overlap":!0,"text-allow-overlap":!1,"icon-ignore-placement":!0,"text-ignore-placement":!1},paint:{"text-color":"#005e16","text-halo-color":"white","text-halo-width":1,"text-halo-blur":1}}),t.getLayer("multi-direct-check-routing")||t.addLayer({id:"multi-direct-check-routing",type:"line",source:"multi-direct-check-routing",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#0dece5","line-width":i.Fh,"line-opacity":i.tB,"line-dasharray":i.OJ}}),t.getLayer("multi-direct-check-routing-distances")||t.addLayer({id:"multi-direct-check-routing-distances",type:"symbol",source:"multi-direct-check-routing",layout:{"symbol-placement":"line","text-font":["Open Sans Regular"],"text-field":["get","distance_string"],"text-size":14,"icon-allow-overlap":!0,"text-allow-overlap":!1,"icon-ignore-placement":!0,"text-ignore-placement":!1},paint:{"text-color":"#005e16","text-halo-color":"white","text-halo-width":1,"text-halo-blur":1}})}function s(t,e){if(t.getSource("multi-check-routing")){var n=t.getSource("multi-check-routing"),r=n._data;r.features=e,n.setData(r)}}function a(t,e){if(t.getSource("multi-direct-check-routing")){var n=t.getSource("multi-direct-check-routing"),r=n._data;r.features=e,n.setData(r)}}function c(t){!function(t){if(t.getSource("multi-check-routing")){t.getSource("multi-check-routing").setData((0,r.dc)())}}(t),function(t){if(t.getSource("multi-direct-check-routing")){t.getSource("multi-direct-check-routing").setData((0,r.dc)())}}(t)}},11463:function(t,e,n){"use strict";n.d(e,{Fp:function(){return a},G2:function(){return c},RG:function(){return s},wf:function(){return o}});var r=n(86487),i=n(62076);function o(t){!function(t){t.getSource("multi-routing")||t.addSource("multi-routing",{type:"geojson",tolerance:0,data:(0,r.dc)()}),t.getSource("multi-direct-routing")||t.addSource("multi-direct-routing",{type:"geojson",tolerance:0,data:(0,r.dc)()})}(t),t.getLayer("multi-routing")||t.addLayer({id:"multi-routing",type:"line",source:"multi-routing",minzoom:i.NX,maxzoom:i.bo,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#f8c135","line-width":12}}),t.getLayer("multi-routing-outer")||t.addLayer({id:"multi-routing-outer",type:"line",source:"multi-routing",minzoom:i.NX,maxzoom:i.bo,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#b28513","line-width":6}}),t.getLayer("multi-routing-distance")||t.addLayer({id:"multi-routing-distance",type:"symbol",source:"multi-routing",minzoom:i.NX,maxzoom:i.bo,layout:{"symbol-placement":"line","text-font":["Open Sans Regular"],"text-field":["get","assemble_distance_string"],"text-size":14,"icon-allow-overlap":!0,"text-allow-overlap":!1,"icon-ignore-placement":!0,"text-ignore-placement":!1},paint:{"text-color":"#438bf3","text-halo-color":"white","text-halo-width":1,"text-halo-blur":1}}),t.getLayer("multi-direct-routing")||t.addLayer({id:"multi-direct-routing",type:"line",source:"multi-direct-routing",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#39ec0d","line-width":i.Fh,"line-opacity":i.tB,"line-dasharray":i.OJ}}),t.getLayer("multi-direct-routing-distances")||t.addLayer({id:"multi-direct-routing-distances",type:"symbol",source:"multi-direct-routing",layout:{"symbol-placement":"line","text-font":["Open Sans Regular"],"text-field":["get","distance_string"],"text-size":14,"icon-allow-overlap":!0,"text-allow-overlap":!1,"icon-ignore-placement":!0,"text-ignore-placement":!1},paint:{"text-color":"#0f4da4","text-halo-color":"white","text-halo-width":1,"text-halo-blur":1}})}function s(t,e){if(t.getSource("multi-routing")){var n=t.getSource("multi-routing"),r=n._data;r.features=e,n.setData(r)}}function a(t,e){if(t.getSource("multi-direct-routing")){var n=t.getSource("multi-direct-routing"),r=n._data;r.features=e,n.setData(r)}}function c(t){!function(t){if(t.getSource("multi-routing")){t.getSource("multi-routing").setData((0,r.dc)())}}(t),function(t){if(t.getSource("multi-direct-routing")){t.getSource("multi-direct-routing").setData((0,r.dc)())}}(t)}},78620:function(t,e,n){"use strict";n.d(e,{B2:function(){return s},Zr:function(){return c},n$:function(){return a}});n(19601);var r=n(77170),i=n(86487),o=n(62076);function s(t){!function(t){t.getSource("circle-range")||t.addSource("circle-range",{type:"geojson",tolerance:0,data:(0,i.dc)()})}(t),t.getLayer("circle-range")||t.addLayer({id:"circle-range",type:"line",source:"circle-range",paint:{"line-color":["get","color"],"line-width":o.Fh,"line-opacity":o.tB,"line-dasharray":o.OJ}})}function a(t,e){var n=r.xmu(e),i=r.Xwo(n,.5,Object.assign({properties:{color:"#ff2600"}},o.J_)),s=r.Xwo(n,1,Object.assign({properties:{color:"#ffa600"}},o.J_)),a=r.Xwo(n,5,Object.assign({properties:{color:"#bfff00"}},o.J_)),c=r.Xwo(n,10,Object.assign({properties:{color:"#00ff6f"}},o.J_)),l=r.Xwo(n,20,Object.assign({properties:{color:"#00ffff"}},o.J_)),u=r.Xwo(n,40,Object.assign({properties:{color:"#008cff"}},o.J_));if(t.getSource("circle-range")){var h=t.getSource("circle-range"),p=h._data;p.features=[],p.features.push(i),p.features.push(s),p.features.push(a),p.features.push(c),p.features.push(l),p.features.push(u),h.setData(p)}}function c(t){t.getSource("circle-range")&&t.getSource("circle-range").setData((0,i.dc)())}},62633:function(t,e,n){"use strict";function r(t,e,n,r,i,o,s){try{var a=t[o](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,i)}n.d(e,{O:function(){return _}});var i,o,s,a,c=n(64687),l=n.n(c),u=(n(69826),n(41539),n(31672),n(2490),n(59461),n(24057)),h=(n(79083),n(66128)),p=n.n(h),f=n(69483),d=n.n(f),g=n(25780),m=n(84471),y=n(40299);function _(t){return v.apply(this,arguments)}function v(){var t;return t=l().mark((function t(e){var n,r,c,h;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e,t.next=3,d().getItem("showUnitLabel");case 3:return n=t.sent,t.next=6,d().getItem("showWeaponLabel");case 6:return r=t.sent,t.next=9,d().getItem("showGridLayer");case 9:c=t.sent,Object.isNull(n)&&(n=!0),Object.isNull(r)&&(r=!0),Object.isNull(c)&&(c=!0),h={showUnitLabel:n,showWeaponLabel:r,showGridLayer:c},u.Z.show(p()(h),{title:'<div><strong>설정</strong></div><div class="closable"><i class="fa-sharp fa-solid fa-circle-xmark"></i></div>',width:"400px",bgColor:"#282828",color:"#e1e1e1",opacity:.01,titleCss:{backgroundColor:"#1f9469"},css:{padding:"0.357rem"},onShow:function(t){o=t.find("input[name=showUnitLabel]"),s=t.find("input[name=showWeaponLabel]"),a=t.find("input[name=showGridLayer]")},onHide:function(){i=null}});case 15:case"end":return t.stop()}}),t)})),v=function(){var e=this,n=arguments;return new Promise((function(i,o){var s=t.apply(e,n);function a(t){r(s,i,o,a,c,"next",t)}function c(t){r(s,i,o,a,c,"throw",t)}a(void 0)}))},v.apply(this,arguments)}Router.watch(document).onclick().route("applySetting",(function(t,e,n){d().setItem("showUnitLabel",o.prop("checked")),d().setItem("showWeaponLabel",s.prop("checked")),d().setItem("showGridLayer",a.prop("checked")),(0,m.f2)(i,o.prop("checked")),(0,g.yp)(i,s.prop("checked")),(0,y.x)(i,a.prop("checked")),u.Z.hide()}))},5829:function(t,e,n){"use strict";n.d(e,{X:function(){return w},pe:function(){return m},_A:function(){return b},kS:function(){return k},$P:function(){return S},Ge:function(){return _},CJ:function(){return x},Vs:function(){return T},q6:function(){return A},E6:function(){return E}});n(69826),n(41539),n(31672),n(2490),n(59461),n(47941);var r=n(96486),i=n.n(r),o=n(86487),s=n(62076),a=n(17544),c=(n(29253),n(69600),n(92222),n(21249),n(57640),n(9924),n(56977),n(77170)),l=n(64311),u=n.n(l);var h,p=n(61928),f=n(50438),d=n.n(f),g=$("#info-tab-panel");$("#info-tab");function m(t){t.getLayer("single-routing")&&t.getLayer("single-direct-routing")&&(y(t,"ally"),y(t,"uav"),v(t,"ally"),v(t,"uav")),t.getLayer("enemy")&&v(t,"enemy")}function y(t,e){t.off("click",e),t.on("click",e,(function(n){var r=t.queryRenderedFeatures(n.point).find((function(t){return t.layer.id===e}));if(r){var o=i().pick(r,"id","type","geometry","properties");o.properties.weapon&&(o.properties.weapon=JSON.parse(o.properties.weapon),a.vD.UAV.isNot(o.properties.weapon.type)&&a.jd.ALLY.is(o.properties.peers)&&h&&function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Function.empty;if(t&&e)if(t.properties.weapon.fixed){var r=c.TuJ([t.geometry.coordinates,e.geometry.coordinates]),i=c.kE(r);r.properties.distance_type="direct",r.properties.distance=i,r.properties.speed=t.properties.weapon.speed,r.properties.max_speed=t.properties.weapon.maxSpeed,r.properties.distance_string=i.toFixed(2)+" km",n(t,e,r,i)}else{var o=a.vD.INFANTRY.isNot(t.properties.weapon.type)?"driving":"walking",s=t.geometry.coordinates.join(","),l=e.geometry.coordinates.join(",");$.ajax({type:"get",dataType:"json",url:"https://api.mapbox.com/directions/v5/mapbox/".concat(o,"/").concat(s,";").concat(l),data:{geometries:"polyline",steps:"true",overview:"full",language:"ko",access_token:MAPBOX_TOKEN},success:function(r,i,o){var s=r.routes[0].geometry,a=u().decode(s,5).map((function(t){return t.reverse()})),l=c.TuJ(a);l.geometry.coordinates.push(e.geometry.coordinates),l.geometry.coordinates.unshift(t.geometry.coordinates);var h=c.kE(l);l.properties.distance_type="routing",l.properties.distance=h,l.properties.speed=t.properties.weapon.speed,l.properties.max_speed=t.properties.weapon.maxSpeed,l.properties.distance_string=h.toFixed(2)+" km",n(t,e,l,h)}})}}(o,h,(function(e,n,r,i){S(t),"routing"===r.properties.distance_type?E(t,r):"direct"===r.properties.distance_type&&T(t,r)})),a.jd.ALLY.is(o.properties.peers)&&$.ajax({url:"".concat(ctx.path,"/map/weapon"),type:"get",cache:!1,data:{unitWeaponNo:o.properties.unitWeaponNo},success:function(t,e,n){_(t)}})),n.preventDefault()}}))}function _(t){$(d()(t)).appendTo(g),g[0].scrollIntoView(!1)}function v(t,e){t.off("click",e),t.on("click",e,(function(n){var r=t.queryRenderedFeatures(n.point).find((function(t){return t.layer.id===e}));if(r){var o=i().pick(r,"id","type","geometry","properties");t.flyTo({center:o.geometry.coordinates,duration:500})}n.preventDefault()}))}function x(t){h=t}function b(t){S(t),h=null}function w(t){!function(t){if(!t.hasImage("single-routing-select-dot")){var e=new p.y(t,"rgb(255,255,255)",100);t.addImage("single-routing-select-dot",e,{pixelRatio:1})}t.getSource("single-routing-select")||t.addSource("single-routing-select",{type:"geojson",tolerance:0,data:(0,o.dc)()}),t.getSource("single-routing")||t.addSource("single-routing",{type:"geojson",tolerance:0,data:(0,o.dc)()}),t.getSource("single-direct-routing")||t.addSource("single-direct-routing",{type:"geojson",tolerance:0,data:(0,o.dc)()})}(t),t.getLayer("single-routing")||t.addLayer({id:"single-routing",type:"line",source:"single-routing",minzoom:s.NX,maxzoom:s.bo,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#206ac4","line-width":12}}),t.getLayer("single-routing-outer")||t.addLayer({id:"single-routing-outer",type:"line",source:"single-routing",minzoom:s.NX,maxzoom:s.bo,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#92befa","line-width":6}}),t.getLayer("single-routing-distance")||t.addLayer({id:"single-routing-distance",type:"symbol",source:"single-routing",minzoom:s.NX,maxzoom:s.bo,layout:{"symbol-placement":"line","text-font":["Open Sans Regular"],"text-field":["get","distance_string"],"text-size":14,"icon-allow-overlap":!0,"text-allow-overlap":!0,"icon-ignore-placement":!0,"text-ignore-placement":!0},paint:{"text-color":"#0f4da4","text-halo-color":"white","text-halo-width":1,"text-halo-blur":1}}),t.getLayer("single-direct-routing")||t.addLayer({id:"single-direct-routing",type:"line",source:"single-direct-routing",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#ff6246","line-width":s.Fh,"line-opacity":s.tB,"line-dasharray":s.OJ}}),t.getLayer("single-direct-routing-distances")||t.addLayer({id:"single-direct-routing-distances",type:"symbol",source:"single-direct-routing",layout:{"symbol-placement":"line","text-font":["Open Sans Regular"],"text-field":["get","distance_string"],"text-size":14,"icon-allow-overlap":!0,"text-allow-overlap":!0,"icon-ignore-placement":!0,"text-ignore-placement":!0},paint:{"text-color":"#0f4da4","text-halo-color":"white","text-halo-width":1,"text-halo-blur":1}}),t.getLayer("single-routing-select")||t.addLayer({id:"single-routing-select",type:"symbol",source:"single-routing-select",minzoom:s.NX,maxzoom:s.bo,layout:{"icon-image":"single-routing-select-dot","icon-allow-overlap":!0,"text-allow-overlap":!0}})}function E(t,e){if(t.getSource("single-routing")){var n=t.getSource("single-routing"),r=n._data;r.features=[],r.features.push(e),n.setData(r)}}function T(t,e){if(t.getSource("single-direct-routing")){var n=t.getSource("single-direct-routing"),r=n._data;r.features=[],r.features.push(e),n.setData(r)}}function S(t){!function(t){if(t.getSource("single-routing")){t.getSource("single-routing").setData((0,o.dc)())}}(t),function(t){if(t.getSource("single-direct-routing")){t.getSource("single-direct-routing").setData((0,o.dc)())}}(t)}function k(t){t.getSource("single-routing-select")&&t.getSource("single-routing-select").setData((0,o.dc)())}function A(t,e){if(t.getSource("single-routing-select")){var n=t.getSource("single-routing-select"),r=n._data;r.features=[],r.features.push(e),n.setData(r)}}},51333:function(t,e,n){"use strict";n.d(e,{A:function(){return l},Q:function(){return c}});var r,i=n(24057),o=(n(79083),n(1448)),s=n.n(o),a=n(62076);function c(t){r=t,i.Z.show(s()({tiles:a.B8}),{title:'<div><strong>지도 스타일</strong></div><div class="closable"><i class="fa-sharp fa-solid fa-circle-xmark"></i></div>',width:"400px",bgColor:"#d3d3d3",color:"#000",opacity:.01,titleCss:{backgroundColor:"#576eeb"},css:{padding:"0.357rem"},onHide:function(){r=null}})}function l(t){r.setStyle(t.url),r.resize(),i.Z.hide()}},63267:function(t,e,n){"use strict";n.d(e,{L8:function(){return A},oT:function(){return k},UG:function(){return I},jB:function(){return R},D7:function(){return B},E$:function(){return D},_j:function(){return z},wo:function(){return P},lS:function(){return L},Ah:function(){return C},WH:function(){return j}});var r,i=n(15785),o=(n(66992),n(51532),n(41539),n(78783),n(10072),n(99137),n(71957),n(96306),n(103),n(74592),n(58276),n(35082),n(12813),n(18222),n(38563),n(50336),n(7512),n(33948),n(69826),n(31672),n(2490),n(59461),n(47941),n(19601),n(15581),n(34514),n(54747),n(96486)),s=n.n(o),a=n(86487),c=n(62076),l=n(15671),u=n(43144),h=(n(39575),n(82472),n(92990),n(18927),n(33105),n(35035),n(74345),n(7174),n(32846),n(44731),n(77209),n(96319),n(58867),n(37789),n(33739),n(29368),n(14483),n(12056),n(3462),n(30678),n(27462),n(33824),n(55021),n(12974),n(15016),n(21249),n(57640),n(9924),n(39714),n(43290),n(6767)),p=n.n(h),f=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:45,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;(0,l.Z)(this,t),this.color=p()(),this.size=0,this.data=new Uint8Array(0),this.width=0,this.height=0,this.widthHalf=0,this.heightHalf=0,this.angle=0,this.aspect=45,this.rotate=!0,this.map=null,this.map=e,this.color=p()(n),this.size=i,this.data=new Uint8Array(i*i*4),this.width=this.size,this.height=this.size,this.widthHalf=this.width/2,this.heightHalf=this.height/2,this.radius=this.size/2*.3,this.aspect=r,this.rotate=!0===o,this.angle=s}return(0,u.Z)(t,[{key:"onAdd",value:function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.context=this.canvas.getContext("2d",{willReadFrequently:!0})}},{key:"render",value:function(){var t=performance.now()%1e3/1e3,e=.7*this.widthHalf*t+this.radius,n=this.computeDegree(this.angle,this.aspect);return this.context.clearRect(0,0,this.width,this.height),this.context.beginPath(),this.context.arc(this.widthHalf,this.heightHalf,e,n.start,n.end,!1),this.context.lineTo(this.widthHalf,this.heightHalf),this.context.fillStyle=this.color.alpha(1-t).toString(),this.context.fill(),this.context.closePath(),this.data=this.context.getImageData(0,0,this.width,this.height).data,this.map.triggerRepaint(),this.rotate&&(this.angle=(this.angle+1)%360),!0}},{key:"computeDegree",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t-e/2,r=t+e/2;return n<0&&(n=360+n),r>360&&(r-=360),{start:(n-90)*(Math.PI/180),end:(r-90)*(Math.PI/180)}}},{key:"setAngle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.angle=parseFloat(t)}},{key:"setRotate",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.rotate=!0===t}}]),t}(),d=n(69483),g=n.n(d),m=n(66274),y=n(99359),_=(n(70189),n(88921),n(96248),n(13599),n(11477),n(64362),n(15389),n(90401),n(45164),n(91238),n(54837),n(87485),n(56767),n(76651),n(61437),n(35285),n(39865),n(29253),n(77170)),v=(0,y.Z)("aniFrame"),x=function(){function t(e){(0,l.Z)(this,t),this.request=void 0,Object.defineProperty(this,v,{writable:!0,value:void 0}),this.map=e,this.objects=new Map,this.callbacks=new Set,(0,m.Z)(this,v)[v]=this.animate.bind(this)}return(0,u.Z)(t,[{key:"getMap",value:function(){return this.map}},{key:"add",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=Object.assign({onMove:Function.empty,onMoveEnd:Function.empty},r);if(e&&Object.isHash(e)){var o=e.properties.weapon.maxSpeed/3.6,s=_.kE(n,c.g2)/o;e.properties.animation={start:performance.now(),duration:s,pos:e.geometry.coordinates,pos0:e.geometry.coordinates,pos1:e.geometry.coordinates,speed:e.properties.weapon.speed,maxSpeed:e.properties.weapon.maxSpeed,rotatable:e.properties.weapon.rotatable,fixed:e.properties.weapon.fixed,meters_per_sec:o,path:n,options:i},this.objects.set(t,e)}}},{key:"remove",value:function(t){var e=this.objects.get(t);e&&(this.objects.delete(t),delete e.properties.animation)}},{key:"addDrawCallback",value:function(t){t&&Object.isFunction(t)&&this.callbacks.add(t)}},{key:"removeDrawCallback",value:function(t){t&&Object.isFunction(t)&&this.callbacks.delete(t)}},{key:"animate",value:function(){var t=this,e=performance.now();this.objects.forEach((function(n){var r,i=e-n.properties.animation.start,o=n.properties.animation.meters_per_sec*i/1e3,s=_.$1t(n.properties.animation.path,o,c.g2);if(n.properties.animation.pos0=null!==(r=n.properties.animation.pos1)&&void 0!==r?r:n.properties.animation.pos0,n.properties.animation.pos1=s,n.geometry=s.geometry,n.properties.animation.rotatable&&(n.properties.bearing=_.Y30(n.properties.animation.pos0,n.properties.animation.pos1)),n.properties.animation.options&&Object.isFunction(n.properties.animation.options.onMove)){var a=_.Exj(n.properties.animation.pos,n.properties.animation.pos1,n.properties.animation.path);a.id=n.id,n.properties.animation.options.onMove(n,a)}i/1e3>n.properties.animation.duration&&(n.properties.animation.options&&Object.isFunction(n.properties.animation.options.onMoveEnd)&&n.properties.animation.options.onMoveEnd(n.id),t.remove(n.id))})),this.objects.size>0&&this.callbacks.forEach((function(e){e(t.map)})),this.request=requestAnimationFrame((0,m.Z)(this,v)[v])}},{key:"stop",value:function(){this.request&&cancelAnimationFrame(this.request),this.request=null}},{key:"clearAll",value:function(){this.objects.clear()}}]),t}(),b=n(17544),w=n(64786),E=new Map,T=new Map,S={type:"symbol",layout:{"text-field":["get","name"],"text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":["get","radialOffset"],"text-max-width":["get","textWidth"],"text-justify":"auto","text-size":["get","textSize"],"icon-image":["get","icon"],"icon-size":["get","scale"],"icon-offset":["get","offset"],"icon-rotate":["get","bearing"],"icon-rotation-alignment":"map","icon-allow-overlap":!0,"text-allow-overlap":!0},paint:{"text-color":["get","textColor"],"text-opacity":1,"text-halo-color":["get","textHaloColor"],"text-halo-width":["get","textHaloWidth"],"text-halo-blur":1}};function k(t,e){if(t.getLayer("recon-pulsing")&&t.getLayer("uav")){var n="uav";t.off("click",n),t.on("click",n,(function(r){var i=t.queryRenderedFeatures(r.point).find((function(t){return t.layer.id===n}));if(i){var o=s().pick(i,"id","type","geometry","properties");o.properties.weapon&&(o.properties.weapon=JSON.parse(o.properties.weapon),(b.vD.RECON.is(o.properties.weapon.type)||b.vD.UAV.is(o.properties.weapon.type))&&(j(t,o.id),o.properties.video&&(o.properties.video=JSON.parse(o.properties.video)),e(o),t.flyTo({center:o.geometry.coordinates,duration:500}))),r.preventDefault()}}))}}function A(t){r||((r=new x(t)).addDrawCallback(N),r.animate()),function(t){t.getSource("uav")||t.addSource("uav",{type:"geojson",tolerance:0,data:(0,a.dc)()})}(t),t.getLayer("uav")||(t.addLayer(Object.assign(S,{id:"uav",source:"uav",minzoom:c.NX,maxzoom:c.bo})),g().getItem("showWeaponLabel").then((function(e){Object.isNull(e)&&(e=!0),t.setPaintProperty("uav","text-opacity",e?1:0)}))),t.getLayer("recon-pulsing")||t.addLayer({id:"recon-pulsing",type:"symbol",source:"uav",minzoom:c.NX,maxzoom:c.bo,layout:{"icon-image":["get","recon_pulsing_dot"],"icon-allow-overlap":!0,"text-allow-overlap":!0,"icon-rotation-alignment":"map"},paint:{"icon-opacity":["get","icon_opacity"]}})}function M(t,e){if(t.getSource("uav")){var n=t.getSource("uav"),r=(0,a.dc)();return r.features=e,n.setData(r),n}}function I(t,e){t.getLayer("uav")&&t.setPaintProperty("uav","text-opacity",e?1:0)}function C(t,e){e.forEach((function(e){if(e.properties.recon_pulsing_dot="recon-pulsing-dot-".concat(e.id),E.set(e.id,e),!t.hasImage("recon-pulsing-dot-".concat(e.id))){var n=new f(t,"#fff",160,100,!1,0);T.set(e.id,n),t.addImage("recon-pulsing-dot-".concat(e.id),n,{pixelRatio:.5})}})),M(t,(0,i.Z)(E.values()))}function O(t,e){E.set(t.id,t),T.get(t.id).setAngle(t.properties.bearing),(0,w.qP)(e)}function P(t){r.remove(t),(0,w.zL)(r.getMap(),t)}function L(t,e){r&&r.add(t.id,t,e,{onMove:O,onMoveEnd:P})}function D(t){return E.get(t)}function R(){E.clear()}function N(t){M(t,(0,i.Z)(E.values())),(0,w.lK)(t)}function j(t,e){var n=E.get(e);if(n&&t.getSource("uav")){n.properties.icon_opacity=1;var r=t.getSource("uav"),o=(0,a.dc)();o.features=(0,i.Z)(E.values()),r.setData(o)}}function z(t){if(t.getSource("uav")){E.forEach((function(t){t.properties.icon_opacity=0}));var e=t.getSource("uav"),n=(0,a.dc)();n.features=(0,i.Z)(E.values()),e.setData(n)}}function B(t){t.getSource("uav")&&t.getSource("uav").setData((0,a.dc)())}},64786:function(t,e,n){"use strict";n.d(e,{lK:function(){return u},lZ:function(){return h},o:function(){return a},qP:function(){return c},zL:function(){return l}});var r=n(15785),i=(n(66992),n(51532),n(41539),n(78783),n(10072),n(99137),n(71957),n(96306),n(103),n(74592),n(58276),n(35082),n(12813),n(18222),n(38563),n(50336),n(7512),n(33948),n(86487)),o=n(62076),s=new Map;function a(t){!function(t){t.getSource("uav-moving-route")||t.addSource("uav-moving-route",{type:"geojson",data:(0,i.dc)()})}(t),t.getLayer("uav-moving-route")||t.addLayer({id:"uav-moving-route",type:"line",source:"uav-moving-route",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fcfcfc","line-width":o.Fh,"line-opacity":o.tB,"line-dasharray":o.rE}})}function c(t){s.set(t.id,t)}function l(t,e){s.delete(e),u(t)}function u(t){if(t.getSource("uav-moving-route")){var e=t.getSource("uav-moving-route"),n=(0,i.dc)();n.features=(0,r.Z)(s.values()),e.setData(n)}}function h(t){(s.clear(),t.getSource("uav-moving-route"))&&t.getSource("uav-moving-route").setData((0,i.dc)())}},49769:function(t,e,n){"use strict";n.d(e,{ZG:function(){return a},i0:function(){return c},n7:function(){return s},uD:function(){return o}});var r=n(86487),i=n(62076);function o(t){!function(t){t.getSource("uav-route")||t.addSource("uav-route",{type:"geojson",data:(0,r.dc)()}),t.getSource("uav-route-point")||t.addSource("uav-route-point",{type:"geojson",data:(0,r.dc)()})}(t),t.getLayer("uav-route")||t.addLayer({id:"uav-route",type:"line",source:"uav-route",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-width":i.Fh,"line-opacity":i.tB,"line-dasharray":i.rE}}),t.getLayer("uav-route-point")||t.addLayer({id:"uav-route-point-outer",type:"circle",source:"uav-route-point",paint:{"circle-radius":7,"circle-color":"#fff"}}),t.getLayer("uav-route-point-inner")||t.addLayer({id:"uav-route-point-inner",type:"circle",source:"uav-route-point",paint:{"circle-radius":3,"circle-color":"#3bb2d0"}})}function s(t,e){if(t.getSource("uav-route")){var n=t.getSource("uav-route"),i=(0,r.dc)();i.features.push(e),n.setData(i)}}function a(t,e){if(t.getSource("uav-route-point")){var n=t.getSource("uav-route-point"),r=n._data;r.features.push(e),n.setData(r)}}function c(t){t.getSource("uav-route")&&t.getSource("uav-route").setData((0,r.dc)());t.getSource("uav-route-point")&&t.getSource("uav-route-point").setData((0,r.dc)())}},84471:function(t,e,n){"use strict";n.d(e,{LQ:function(){return l},ZO:function(){return c},f2:function(){return u}});n(19601),n(21249),n(57640),n(9924),n(57327),n(41539),n(88449),n(2490),n(59849);var r=n(86487),i=n(62076),o=n(69483),s=n.n(o),a={type:"symbol",layout:{"text-field":["get","unitName"],"text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":["get","radialOffset"],"text-max-width":["get","textWidth"],"text-justify":"auto","text-size":["get","textSize"],"icon-image":["get","icon"],"icon-size":["get","scale"],"icon-offset":["get","offset"],"icon-allow-overlap":!0,"text-allow-overlap":!0},paint:{"text-color":["get","textColor"],"text-opacity":1,"text-halo-color":["get","textHaloColor"],"text-halo-width":["get","textHaloWidth"],"text-halo-blur":1}};function c(t){!function(t){t.getSource("headquarters")||t.addSource("headquarters",{type:"geojson",tolerance:0,data:(0,r.dc)()}),t.getSource("unit")||t.addSource("unit",{type:"geojson",tolerance:0,data:(0,r.dc)()})}(t),t.getLayer("unit")||(t.addLayer(Object.assign(a,{id:"unit",source:"unit",minzoom:i.qn,maxzoom:i.DY})),s().getItem("showUnitLabel").then((function(e){Object.isNull(e)&&(e=!0),t.setPaintProperty("unit","text-opacity",e?1:0)}))),t.getLayer("headquarters")||(t.addLayer(Object.assign(a,{id:"headquarters",source:"headquarters",minzoom:i.Ag,maxzoom:i.kc})),s().getItem("showUnitLabel").then((function(e){Object.isNull(e)&&(e=!0),t.setPaintProperty("headquarters","text-opacity",e?1:0)})))}function l(t){!function(t){t.getSource("unit")&&t.getSource("unit").setData((0,r.dc)())}(t),$.ajax({url:"".concat(ctx.path,"/map/unit/list"),type:"get",cache:!1,success:function(e){var n=e.map((function(t){return(0,r.z9)(t)})),i=n.filter((function(t){return"H"===t.properties.type}));!function(t,e){if(t.getSource("headquarters")){var n=t.getSource("headquarters"),r=n._data;r.features=e,n.setData(r)}}(t,i);var o=n.filter((function(t){return"H"!==t.properties.type}));!function(t,e){if(t.getSource("unit")){var n=t.getSource("unit"),r=n._data;r.features=e,n.setData(r)}}(t,o)}})}function u(t,e){t.getLayer("unit")&&t.setPaintProperty("unit","text-opacity",e?1:0),t.getLayer("headquarters")&&t.setPaintProperty("headquarters","text-opacity",e?1:0)}},51242:function(t,e,n){"use strict";n.a(t,(async function(t,r){try{n.d(e,{M:function(){return A}});n(68309),n(21249),n(57640),n(9924),n(69826),n(41539),n(31672),n(2490),n(59461);var i=n(16171),o=n(90702),s=n.n(o),a=n(35097),c=n.n(a),l=n(99177),u=n(14701),h=n(63267),p=n(5829),f=n(49769),d=t([u]);u=(d.then?(await d)():d)[0];var g,m,y=$("#video-panel"),_=$("#command-tab"),v=$("#info-tab"),x=$("#uav-tab"),b=$("#uav-control-tab"),w=$("#uav-control"),E=$("#uav-recon-images-panel"),T=$("#uav-name"),S=$("input[type=checkbox][name=draw_route]"),k=$("#draw_route_name");function A(t,e){g=e,m=new l.Z(t,{onAdd:M,onComplete:I}),y.empty(),x.enable(),x.prop("checked",!0),T.html(e.name);var n=i.Z.show({text:"영상 정보를 가져 오는 중",opacity:.5,seconds:60,circle:!0,mask:"#000",zIndex:1100});$.ajax({url:"".concat(ctx.path,"/map/videos"),type:"get",cache:!1,complete:function(t,e){n.stop()},success:function(t,n,r){var i,o,a;(v.enable(),x.prop("checked",!0),w.hide(),E.empty(),null!==(i=t.map.weapons)&&void 0!==i&&i.length)?((0,u.qr)(),(0,u.SO)(),w.show(),b.prop("checked",!0),y.html(s()({weapons:null===(o=t.map)||void 0===o?void 0:o.weapons,weapon:e})),P(null===(a=t.map.weapons)||void 0===a?void 0:a.find((function(t){return t.unitWeaponNo===e.unitWeaponNo})))):(x.disable(),x.prop("checked",!1),_.prop("checked",!0),(0,u.oK)())}})}function M(t,e,n){e.id=g.unitWeaponNo,(0,f.n7)(t,e),(0,f.ZG)(m.getMap(),n)}function I(t,e){var n=(0,h.E$)(g.unitWeaponNo);e.id=n.id,(0,h.lS)(n,e)}function C(){m.clear(),(0,f.i0)(m.getMap());var t=(0,h.E$)(g.unitWeaponNo);m.add(t.geometry.coordinates),(0,f.ZG)(m.getMap(),t),m.on()}function O(){(0,f.i0)(m.getMap()),m.off()}function P(t){t&&((0,u.SO)(),$(".video-header").removeClass("text-blue"),$("#video-header-".concat(t.unitWeaponNo)).addClass("text-blue"),E.html(c()(t)))}Router.watch(document).onclick().route("showImages",(function(t,e,n){$("card").removeClass("shadow-blue"),$("card").find("header").removeClass("bg-info"),P(n),e.addClass("shadow-blue"),e.find("header").addClass("bg-info");var r=(0,h.E$)(n.unitWeaponNo);if(g=n,O(),S.prop("checked",!1),m){var i=m.getMap();i&&((0,h.WH)(i,r.id),i.flyTo({center:r.geometry.coordinates,duration:500}),(0,p.Ge)(r.properties))}})).onchange().route("drawRoute",(function(t,e,n){e.prop("checked")?((0,h.wo)(parseInt(g.unitWeaponNo)),k.html("경로 지정 완료 및 이동"),C()):(k.html("경로 지정"),O())})),r()}catch(L){r(L)}}))},25780:function(t,e,n){"use strict";n.d(e,{F3:function(){return v},Gw:function(){return _},gT:function(){return x},go:function(){return y},kf:function(){return d},ss:function(){return m},yp:function(){return b}});var r=n(15785),i=(n(66992),n(51532),n(41539),n(78783),n(10072),n(99137),n(71957),n(96306),n(103),n(74592),n(58276),n(35082),n(12813),n(18222),n(38563),n(50336),n(7512),n(33948),n(19601),n(21249),n(57640),n(9924),n(15581),n(2490),n(34514),n(54747),n(57327),n(88449),n(59849),n(29253),n(86487)),o=n(17544),s=n(62076),a=n(69483),c=n.n(a),l=n(63267),u=new Map,h=new Map,p=new Map,f={type:"symbol",layout:{"text-field":["get","name"],"text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":["get","radialOffset"],"text-max-width":["get","textWidth"],"text-justify":"auto","text-size":["get","textSize"],"icon-image":["get","icon"],"icon-size":["get","scale"],"icon-offset":["get","offset"],"icon-rotate":["get","bearing"],"icon-allow-overlap":!0,"text-allow-overlap":!0},paint:{"text-color":["get","textColor"],"text-opacity":1,"text-halo-color":["get","textHaloColor"],"text-halo-width":["get","textHaloWidth"],"text-halo-blur":1}};function d(t){!function(t){t.getSource("weapon")||t.addSource("weapon",{type:"geojson",tolerance:0,data:(0,i.dc)()}),t.getSource("ally")||t.addSource("ally",{type:"geojson",tolerance:0,data:(0,i.dc)()}),t.getSource("enemy")||t.addSource("enemy",{type:"geojson",tolerance:0,data:(0,i.dc)()})}(t),t.getLayer("weapon")||(t.addLayer(Object.assign(f,{id:"weapon",source:"weapon",minzoom:s.NX,maxzoom:s.bo})),c().getItem("showWeaponLabel").then((function(e){Object.isNull(e)&&(e=!0),t.setPaintProperty("weapon","text-opacity",e?1:0)}))),t.getLayer("enemy")||(t.addLayer(Object.assign(f,{id:"enemy",source:"enemy",minzoom:s.NX,maxzoom:s.bo})),c().getItem("showWeaponLabel").then((function(e){Object.isNull(e)&&(e=!0),t.setPaintProperty("enemy","text-opacity",e?1:0)}))),t.getLayer("ally")||(t.addLayer(Object.assign(f,{id:"ally",source:"ally",minzoom:s.NX,maxzoom:s.bo})),c().getItem("showWeaponLabel").then((function(e){Object.isNull(e)&&(e=!0),t.setPaintProperty("ally","text-opacity",e?1:0)}))),(0,l.L8)(t)}function g(t,e){if(t.getSource("ally")){var n=t.getSource("ally"),r=n._data;return r.features=e,n.setData(r),n}}function m(t){!function(t){u.clear(),h.clear(),p.clear(),(0,l.jB)(),t.getSource("weapon")&&t.getSource("weapon").setData((0,i.dc)()),t.getSource("ally")&&t.getSource("ally").setData((0,i.dc)()),t.getSource("enemy")&&t.getSource("enemy").setData((0,i.dc)())}(t),$.ajax({url:"".concat(ctx.path,"/map/weapon/list"),type:"get",cache:!1,success:function(e){var n=e.map((function(t){return(0,i.hU)(t)}));n.forEach((function(t){t.properties.bearing=0,u.set(t.id,t)})),n.forEach((function(t){o.jd.ALLY.is(t.properties.peers)&&o.vD.UAV.isNot(t.properties.weapon.type)&&h.set(t.id,t)})),n.forEach((function(t){o.jd.ENEMY.is(t.properties.peers)&&p.set(t.id,t)}));var s=n.filter((function(t){return o.jd.ALLY.is(t.properties.peers)&&o.vD.UAV.is(t.properties.weapon.type)})).map((function(t){return t.properties.icon_opacity=0,t}));g(t,(0,r.Z)(h.values())),function(t,e){if(t.getSource("enemy")){var n=t.getSource("enemy"),r=n._data;r.features=e,n.setData(r)}}(t,(0,r.Z)(p.values())),(0,l.Ah)(t,s)}})}function y(t){return(0,r.Z)(u.values())}function _(t){return(0,r.Z)(h.values()).filter((function(t){return o.jd.ALLY.is(t.properties.weapon.peers)})).filter((function(t){return o.vD.UAV.isNot(t.properties.weapon.type)&&o.vD.RECON.isNot(t.properties.weapon.type)&&!t.properties.weapon.fixed}))}function v(t){return(0,r.Z)(h.values()).filter((function(t){return o.jd.ALLY.is(t.properties.weapon.peers)})).filter((function(t){return o.vD.UAV.isNot(t.properties.weapon.type)&&o.vD.RECON.isNot(t.properties.weapon.type)&&t.properties.weapon.fixed}))}function x(t){return h.get(t)}function b(t,e){t.getLayer("weapon")&&t.setPaintProperty("weapon","text-opacity",e?1:0),t.getLayer("ally")&&t.setPaintProperty("ally","text-opacity",e?1:0),t.getLayer("enemy")&&t.setPaintProperty("enemy","text-opacity",e?1:0),(0,l.UG)(t,e)}},61928:function(t,e,n){"use strict";n.d(e,{y:function(){return c}});var r=n(15671),i=n(43144),o=(n(66992),n(39575),n(41539),n(82472),n(92990),n(18927),n(33105),n(35035),n(74345),n(7174),n(32846),n(44731),n(77209),n(96319),n(58867),n(37789),n(33739),n(29368),n(14483),n(12056),n(3462),n(30678),n(27462),n(33824),n(55021),n(12974),n(15016),n(21249),n(57640),n(9924),n(39714),n(43290),n(6767)),s=n.n(o),a=6.283185307179586,c=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;(0,r.Z)(this,t),this.color=s()(),this.size=0,this.data=new Uint8Array(0),this.width=0,this.height=0,this.widthHalf=0,this.heightHalf=0,this.map=null,this.map=e,this.color=s()(n),this.size=i,this.data=new Uint8Array(i*i*4),this.width=this.size,this.height=this.size,this.widthHalf=this.width/2,this.heightHalf=this.height/2,this.outerRadius=this.size/2*.7,this.innerRadius=this.size/2*.6}return(0,i.Z)(t,[{key:"onAdd",value:function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.context=this.canvas.getContext("2d",{willReadFrequently:!0})}},{key:"render",value:function(){return this.context.clearRect(0,0,this.width,this.height),this.context.beginPath(),this.context.arc(this.widthHalf,this.heightHalf,this.outerRadius,0,a,!1),this.context.arc(this.widthHalf,this.heightHalf,this.innerRadius,0,a,!0),this.context.fillStyle=this.color.toString(),this.context.fill(),this.context.closePath(),this.data=this.context.getImageData(0,0,this.width,this.height).data,this.map.triggerRepaint(),!0}}]),t}()},99177:function(t,e,n){"use strict";n.d(e,{Z:function(){return u}});var r=n(15785),i=n(15671),o=n(43144),s=n(66274),a=n(99359),c=(n(21249),n(57640),n(9924),n(66992),n(41539),n(70189),n(78783),n(88921),n(96248),n(13599),n(11477),n(64362),n(15389),n(90401),n(45164),n(91238),n(54837),n(87485),n(56767),n(76651),n(61437),n(35285),n(39865),n(33948),n(19601),n(9653),n(77170)),l=(0,a.Z)("mousedown"),u=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.Z)(this,t),Object.defineProperty(this,l,{writable:!0,value:void 0}),this.map=e,this.points=new Set,this.option=Object.assign({onAdd:Function.empty,onComplete:Function.empty},n),(0,s.Z)(this,l)[l]=this.mousedown.bind(this)}return(0,o.Z)(t,[{key:"getMap",value:function(){return this.map}},{key:"add",value:function(t){Object.isArray(t)&&this.points.add(t)}},{key:"clear",value:function(){this.points.clear()}},{key:"on",value:function(){this.map.on("mousedown",(0,s.Z)(this,l)[l])}},{key:"off",value:function(){if(this.map.off("mousedown",(0,s.Z)(this,l)[l]),this.points.size>1){var t={type:"Feature",properties:{},geometry:{type:"LineString",coordinates:(0,r.Z)(this.points.values())}},e=(0,c.Y2u)(t);this.option.onComplete(this.map,e)}this.points.clear()}},{key:"mousedown",value:function(t){var e=[t.lngLat.lng,t.lngLat.lat];this.points.add(e);var n={type:"Feature",properties:{},geometry:{type:"LineString",coordinates:(0,r.Z)(this.points.values())}},i={id:Number.randomInt(0,Number.MAX_VALUE),type:"Feature",properties:{},geometry:{type:"Point",coordinates:e}};this.option.onAdd(this.map,n,i)}}]),t}()},86487:function(t,e,n){"use strict";n.d(e,{AO:function(){return u},Zm:function(){return l},dc:function(){return o},hU:function(){return c},nI:function(){return s},z9:function(){return a}});n(21249),n(57640),n(9924),n(26572),n(15218),n(47941),n(69826),n(41539),n(31672),n(2490),n(59461);var r=n(96486),i=n.n(r);function o(){return{type:"FeatureCollection",features:[]}}function s(){return{type:"Feature",geometry:{},properties:{}}}function a(t){var e,n,r,o,s,a,c,l,u,h,p,f,d,g,m,y,_,v,x,b,w,E,T,S,k={type:"Feature",geometry:{},properties:{}};k.id=t.unitNo;for(var A=arguments.length,M=new Array(A>1?A-1:0),I=1;I<A;I++)M[I-1]=arguments[I];(k.properties=i().omit(t,"geometry","weapons","icon","nodeId","text","createdAt","createdBy","creator","modifiedAt","modifier","modifiedBy","open","parent",M),null!=t&&null!==(e=t.icon)&&void 0!==e&&e.mapId)&&(k.properties.icon=null==t||null===(r=t.icon)||void 0===r?void 0:r.mapId,k.properties.icon=null!==(o=k.properties)&&void 0!==o&&o.icon?"fz-"+k.properties.icon:"empty-icon",k.properties.scale=null!==(s=null==t||null===(a=t.icon)||void 0===a?void 0:a.scale)&&void 0!==s?s:.5,k.properties.anchor=null!==(c=null==t||null===(l=t.icon)||void 0===l?void 0:l.anchor)&&void 0!==c?c:["top"],k.properties.radialOffset=null!==(u=null==t||null===(h=t.icon)||void 0===h?void 0:h.radialOffset)&&void 0!==u?u:1.8,k.properties.textSize=null!==(p=null==t||null===(f=t.icon)||void 0===f?void 0:f.textSize)&&void 0!==p?p:14,k.properties.offset=[null!==(d=null==t||null===(g=t.icon)||void 0===g?void 0:g.offsetX)&&void 0!==d?d:0,null!==(m=null==t||null===(y=t.icon)||void 0===y?void 0:y.offsetY)&&void 0!==m?m:0],k.properties.textColor=null!==(_=null==t||null===(v=t.icon)||void 0===v?void 0:v.textColor)&&void 0!==_?_:"#0f4da4",k.properties.textWidth=null!==(x=null==t||null===(b=t.icon)||void 0===b?void 0:b.textWidth)&&void 0!==x?x:10,k.properties.textHaloColor=null!==(w=null==t||null===(E=t.icon)||void 0===E?void 0:E.textHaloColor)&&void 0!==w?w:"white",k.properties.textHaloWidth=null!==(T=null==t||null===(S=t.icon)||void 0===S?void 0:S.textHaloWidth)&&void 0!==T?T:1);var C=i().pick(t,"geometry");return k.geometry=null!==(n=null==C?void 0:C.geometry)&&void 0!==n?n:{},k}function c(t){var e,n,r,o,s,a,c,l,u,h,p,f,d,g,m,y,_,v,x,b,w,E,T,S,k={type:"Feature",geometry:{},properties:{}};k.id=t.unitWeaponNo;for(var A=arguments.length,M=new Array(A>1?A-1:0),I=1;I<A;I++)M[I-1]=arguments[I];(k.properties=i().omit(t,"geometry","createdAt","createdBy","creator","modifiedAt","modifier","modifiedBy",M),null!=t&&null!==(e=t.weapon)&&void 0!==e&&null!==(e=e.icon)&&void 0!==e&&e.mapId)&&(k.properties.icon=null==t||null===(r=t.weapon)||void 0===r||null===(r=r.icon)||void 0===r?void 0:r.mapId,k.properties.icon=null!==(o=k.properties)&&void 0!==o&&o.icon?"fz-"+k.properties.icon:"empty-icon",k.properties.scale=null!==(s=null==t||null===(a=t.weapon)||void 0===a||null===(a=a.icon)||void 0===a?void 0:a.scale)&&void 0!==s?s:.5,k.properties.anchor=null!==(c=null==t||null===(l=t.weapon)||void 0===l||null===(l=l.icon)||void 0===l?void 0:l.anchor)&&void 0!==c?c:["top"],k.properties.radialOffset=null!==(u=null==t||null===(h=t.icon)||void 0===h?void 0:h.radialOffset)&&void 0!==u?u:1.8,k.properties.textSize=null!==(p=null==t||null===(f=t.weapon)||void 0===f||null===(f=f.icon)||void 0===f?void 0:f.textSize)&&void 0!==p?p:14,k.properties.offset=[null!==(d=null==t||null===(g=t.weapon)||void 0===g||null===(g=g.icon)||void 0===g?void 0:g.offsetX)&&void 0!==d?d:0,null!==(m=null==t||null===(y=t.weapon)||void 0===y||null===(y=y.icon)||void 0===y?void 0:y.offsetY)&&void 0!==m?m:0],k.properties.textColor=null!==(_=null==t||null===(v=t.weapon)||void 0===v||null===(v=v.icon)||void 0===v?void 0:v.textColor)&&void 0!==_?_:"#0f4da4",k.properties.textWidth=null!==(x=null==t||null===(b=t.weapon)||void 0===b||null===(b=b.icon)||void 0===b?void 0:b.textWidth)&&void 0!==x?x:10,k.properties.textHaloColor=null!==(w=null==t||null===(E=t.weapon)||void 0===E||null===(E=E.icon)||void 0===E?void 0:E.textHaloColor)&&void 0!==w?w:"white",k.properties.textHaloWidth=null!==(T=null==t||null===(S=t.weapon)||void 0===S||null===(S=S.icon)||void 0===S?void 0:S.textHaloWidth)&&void 0!==T?T:1);var C=i().pick(t,"geometry");return k.geometry=null!==(n=null==C?void 0:C.geometry)&&void 0!==n?n:{},k}function l(t){var e=i().pick(t,"id","type","geometry","properties");if(e.properties.weapon)try{var n=JSON.parse(e.properties.weapon);e.properties.weapon=i().omit(n,"icon","ammos"),e.properties.icon=i().omit(n.icon,"scale","anchor","radialOffset","offsetX","offsetY","textSize","textColor","textWidth","textHaloColor","textHaloWidth"),n.ammos&&(e.properties.ammos=n.ammos.map((function(t){return t.ammo}))),e.properties=i().omit(e.properties,"scale","anchor","radialOffset","textSize","offset","textColor","textWidth","textHaloColor","textHaloWidth")}catch(t){}if(e.properties.unit)try{e.properties.unit=JSON.parse(e.properties.unit)}catch(t){}return e}function u(t,e,n){if(t.getSource(e)){var r=t.getSource(e),o=i().pick(r._data,"type","features","tolerance");return o.features=[],o.features.push(n),r.setData(o),r}}},40299:function(t,e,n){"use strict";n.d(e,{G:function(){return h},x:function(){return p}});n(41539),n(15581),n(2490),n(34514),n(54747),n(9653);var r=n(77170),i=n(62076),o=n(86487),s=n(69483),a=n.n(s),c=["#fa7c37","#fad005","#e63f01","#11faf3","#1f8efa","#cc4dff","#05c985","#fc1e6c","#697ce3","#c0e3d8","#cb876e","#ff000c","#f16b6a","#c28dbf","#a9be87","#3286c7","#f7911d","#cf3945","#6093bf","#005c63","#8c7058","#27093f","#ef508b","#fccba9","#bf9455","#593a28","#44b657","#8c1c57","#f1cb15","#be5d27","#1a66a6","#33b5ab","#6681a6","#3f2123","#8c4d64","#d08b55","#8c6151","#5d8c76","#6f515f","#ee3d55"];function l(t,e){var n=r.Dhe(t,e,{units:"kilometers"});return n.features.forEach((function(t,e){t.id=e,t.properties.color=c[Number.randomInt(0,c.length)],t.properties.center=r.MqI(t)})),n}function u(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,3,5],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,2,4],i=o.dc(),s=Math.ceil(t.features.length/6),a=0;a<s;a++){for(var l=6*a,u=o.dc(),h=0;null!=n&&h<n.length;h++)l+n[h]<t.features.length&&u.features.push(t.features[l+n[h]]);for(var p=0;null!=e&&p<e.length;p++)if(l+e[p]<t.features.length){var f=t.features[l+e[p]];i.features.push(f)}if(u.features.length){var d=r.VWR(u),g=r.bAF(d),m=o.nI();m.id=l,m.properties.color=c[Number.randomInt(0,c.length)],m.properties.center=r.MqI(g),m.geometry=g.geometry,i.features.push(m)}}return i}function h(t){var e=u(l([124.83991,38.27551,128.60908,38.45694],10)),n=u(l([124.94434,38.47998,128.39636,38.66167],10),[0,2,4],[1,3,5]);t.getSource("allyGridSource")||t.addSource("allyGridSource",{type:"geojson",data:e}),t.getLayer("allyGridLine")||(t.addLayer({id:"allyGridLine",type:"line",source:"allyGridSource",paint:{"line-color":"#346df5","line-width":i.Fh,"line-opacity":i.tB,"line-dasharray":i.OJ}}),a().getItem("showGridLayer").then((function(e){Object.isNull(e)&&(e=!0),t.setLayoutProperty("allyGridLine","visibility",e?"visible":"none")}))),t.getSource("enemyGridSource")||t.addSource("enemyGridSource",{type:"geojson",data:n}),t.getLayer("enemyGridLine")||(t.addLayer({id:"enemyGridLine",type:"line",source:"enemyGridSource",paint:{"line-color":"#f5343a","line-width":i.Fh,"line-opacity":i.tB,"line-dasharray":i.OJ}}),a().getItem("showGridLayer").then((function(e){Object.isNull(e)&&(e=!0),t.setLayoutProperty("enemyGridLine","visibility",e?"visible":"none")})))}function p(t,e){t.getLayer("allyGridLine")&&t.setLayoutProperty("allyGridLine","visibility",e?"visible":"none"),t.getLayer("enemyGridLine")&&t.setLayoutProperty("enemyGridLine","visibility",e?"visible":"none")}},584:function(t,e,n){"use strict";n.d(e,{Ac:function(){return y},Vl:function(){return _},df:function(){return f},mg:function(){return m},nn:function(){return v},tf:function(){return g}});n(41539),n(15581),n(2490),n(34514),n(54747),n(92222),n(66992),n(39575),n(82472),n(92990),n(18927),n(33105),n(35035),n(74345),n(7174),n(32846),n(44731),n(77209),n(96319),n(58867),n(37789),n(33739),n(29368),n(14483),n(12056),n(3462),n(30678),n(27462),n(33824),n(55021),n(12974),n(15016),n(23157);var r=n(6158),i=n.n(r),o=n(68384),s=n.n(o),a=(n(21343),n(62076)),c=n(96486),l=n.n(c),u=n(40299),h=n(25108);i().accessToken=MAPBOX_TOKEN;var p=function(){for(var t=new Uint8Array(64),e=0;e<4;e++)for(var n=4;n<4;n++){var r=4*(4*n+e);t[r]=0,t[r+1]=0,t[r+2]=0,t[r+3]=0}return{width:4,height:4,data:t}}();function f(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.kL,r=new(i().Map)({container:"map-container",style:n.url,pitch:0,bearing:0,zoom:a.HV});return d(r),r.on("load",(function(t){r.addControl(new(i().ScaleControl),"bottom-left"),r.once("idle",(function(t){d(r),e(),r.getCanvasContainer().style.cursor="crosshair"}))})),r.on("style.load",(function(t){r.addImage("empty-icon",{width:p.width,height:p.height,data:p.data}),function(t){$.ajax({type:"get",url:"".concat(ctx.path,"/icon/list"),success:function(e,n,r){e.forEach((function(e){var n="fz-".concat(e.mapId);t.loadImage("".concat(ctx.path,"/icon/by-name/").concat(n),(function(e,r){e&&h.log(e),t.hasImage(n)||t.addImage(n,r)}))})),t.loadImage("".concat(ctx.path,"/images/military/noun-triangle-1448803-71D358.png"),(function(e,n){e&&h.log(e),t.hasImage("triangle-weapon-marker")||t.addImage("triangle-weapon-marker",n)}))}})}(r),u.G(r)})),r}function d(t){t.setBearing(0),t.setPitch(0)}function g(t,e){for(var n=function(n){e(n),t.once("idle",(function(t){e(t)}))},r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];i.forEach((function(e){return t.on(e,n)})),t.on("styleimagemissing",(function(e){var n=e.id;n.startsWith("fz-")?t.loadImage("".concat(ctx.path,"/icon/by-name/").concat(n),(function(e,r){e&&h.log(e),t.hasImage(n)||t.addImage(n,r)})):t.addImage(n,{width:p.width,height:p.height,data:p.data})}))}function m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;s().getCurrentPosition((function(n,r){n?t.flyTo({center:a.Vr,zoom:a.HV,duration:e,essential:!0}):t.flyTo({center:[r.coords.longitude,r.coords.latitude],zoom:a.HV,duration:e,essential:!0})}))}function y(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;s().getCurrentPosition((function(n,r){n?t.flyTo({center:a.Vr,zoom:a.HV,duration:e,essential:!0}):t.flyTo({center:[r.coords.longitude,r.coords.latitude],zoom:t.getZoom(),duration:e,essential:!0})}))}function _(t){t.setBearing(0),t.setPitch(0)}function v(t){var e=l().cloneDeep(t.getFreeCameraOptions()._position);return new(i().MercatorCoordinate)(e.x,e.y,e.z).toAltitude()}},32388:function(t,e,n){"use strict";n.a(t,(async function(t,e){try{n(9653),n(56977),n(69826),n(41539),n(31672),n(2490),n(59461);var r=n(37921),i=n(47489),o=n(69483),s=n.n(o);n(21343);n.g.ctx={};var a="";(0,r.Z)("head meta[name=ctx]").length&&(a=(0,r.Z)("head meta[name=ctx]").attr("content")?(0,r.Z)("head meta[name=ctx]").attr("content"):"");try{Object.defineProperty(n.g.ctx,"path",{value:a,writable:!1})}catch(t){n.g.ctx.path=a}var c=(0,r.Z)(".fz-side-wrapper");c.on("webkitTransitionEnd oTransitionEnd msTransitionEnd transitionend",(function(){(0,r.Z)(n.g).trigger("resize")})),await s().getItem("sideCollapsed")?c.addClass("collapse"):c.removeClass("collapse"),(0,r.Z)(document).hotkey("keydown","F11",(function(){i.Z.toggle(document.documentElement)}),!1),i.Z.isEnabled&&(i.Z.on("change",(function(){i.Z.isFullscreen?(0,r.Z)(document.body).addClass("fullscreen"):(0,r.Z)(document.body).removeClass("fullscreen")})),i.Z.on("error",(function(t){}))),Object.extend(Number.prototype,{toStorage:function(){return this/1024/1024/1024/1024>1024?(this/1024/1024/1024/1024/1024).toFixed(2)+" PB":this/1024/1024/1024>1024?(this/1024/1024/1024/1024).toFixed(2)+" TB":this/1024/1024>1024?(this/1024/1024/1024).toFixed(2)+" GB":this/1024>1024?(this/1024/1024).toFixed(2)+" MB":(this/1024).toFixed(2)+" KB"},toInterval:function(){if(this>3600){var t=Math.floor(this/3600),e=Math.floor((this-3600*t)/60),n=this-3600*t-60*e;return t+" 시간"+(0!=e?" "+e+" 분":"")+(0!=n?" "+n+" 초":"")}if(this>60){var r=Math.floor(this/60),i=this-60*r;return r+" 분"+(0!=i?" "+i+" 초":"")}return this+"  초"},toHumanize:function(){if(this>86400){var t=Math.floor(this/86400),e=Math.floor((this-86400*t)/3600),n=Math.floor((this-86400*t-3600*e)/60),r=this-86400*t-3600*e-60*n;return t+"d"+(0!=e?e+"h":"")+(0!=n?n+"m":"")+(0!=r?r+"s":"")}if(this>3600){var i=Math.floor(this/3600),o=Math.floor((this-3600*i)/60),s=this-3600*i-60*o;return i+"h"+(0!=o?o+"m":"")+(0!=s?s+"s":"")}if(this>60){var a=Math.floor(this/60),c=this-60*a;return a+"m"+(0!=c?c+"s":"")}return this+"s"},toHumanizeApproximate:function(){if(this>86400){var t=Math.floor(this/86400),e=Math.floor((this-86400*t)/3600),n=Math.ceil((this-86400*t-3600*e)/60);return t+"일"+(0!=e?e+"시간":"")+(0!=n?n+"분":"")}if(this>3600){var r=Math.floor(this/3600),i=Math.ceil((this-3600*r)/60);return r+"시간"+(0!=i?i+"분":"")}return this>60?Math.ceil(this/60)+"분":"1분"}}),n.g.RemoveInvalid=function(t){(0,r.Z)(t||document).find("input.invalid, textarea.invalid, select.invalid, label.invalid, .input-group.invalid, .inner-input-group.invalid").each((function(t){(0,r.Z)(this).removeClass("invalid")}))},r.Z.ajaxPrefilter((function(t,e,i){t.error||(t.error=function(){}),t.beforeSend||(t.beforeSend=function(){}),t.beforeSend=t.beforeSend.before((function(t,e){var n=(0,r.Z)('meta[name="_csrf_parameter"]').attr("content"),i=(0,r.Z)('meta[name="_csrf_header"]').attr("content"),o=(0,r.Z)('meta[name="'+n+'"]').attr("content");i&&o&&t.setRequestHeader(i,o)})),t.error=t.error.before((function(t,e,i){var o=t.status;301===o||302===o?r.Z.move(t.getResponseHeader("Location")):400===o?Alert(300,230,"Bad Request.",t.responseJSON.message):401===o||403===o?r.Z.move("".concat(n.g.ctx.path,"/")):404===o?Alert(300,120,"Page Not Found.",t.responseJSON.message):405===o?Alert(300,120,"Method Not Allowed.",t.responseJSON.message):406===o?Alert(300,120,"Not Acceptable.",t.responseJSON.message):410===o?r.Z.move("".concat(n.g.ctx.path,"/")):500===o&&Alert(600,220,"Error.",t.responseJSON.message)}))})),(0,r.Z)(document).ready((function(){(0,r.Z)(".fz-side-menu .fz-side-nav .fz-side-nav-list .selected").each((function(t,e){e.scrollIntoView(!0)}))})),n.g.toggleSideMenu=function(){(0,r.Z)(document.body).toggleClass("fold-side")},Router.watch(document).onclick().route("Logout",(function(){var t;(t=new PopupDialog({titleCss:"bg-black",title:"로그 아웃",width:300,height:130,bodyCss:"text-black",bodyTextAlign:"center",bodyContent:"로그 아웃 하시겠습니까??",maskColor:"#6c6f73",maskOpacity:.3,mask:!0,pin:!0,resize:!0,vcenter:!0,rounded:!0,hideOnClose:!1,buttonClass:"button",showEffect:"zoomin",hideEffect:"fadeout",blurTarget:".fz-wrapper",blurValue:2})).addButton({id:"logout",text:"로그 아웃",css:"black",strong:!0,close:!0,rounded:!1,onClick:function(){r.Z.move("".concat(ctx.path,"/logout"))}}),t.addButton({text:"취 소",css:"gray-dark",strong:!0,close:!0,rounded:!1,onClick:function(){}}),t.show()})).route("CollapseSide",(function(t,e,n){c.hasClass("collapse")?(c.removeClass("collapse"),s().setItem("sideCollapsed",!1)):(c.addClass("collapse"),s().setItem("sideCollapsed",!0))})).route("toggleSideMenu",(function(){toggleSideMenu()})),e()}catch(t){e(t)}}),1)},21343:function(t,e,n){"use strict";n(74916),n(73210),n(69826),n(41539),n(31672),n(2490),n(59461),n(37268),n(13499);var r=n(19755),i=n.n(r),o=n(25108);!function(t,e){var n,r=void 0!==(n=(document.body||document.documentElement).style).transition||void 0!==n.WebkitTransition||void 0!==n.MozTransition||void 0!==n.MsTransition||void 0!==n.OTransition;e.PopupDialogMgr={};var s=!!/msie [\w.]+/.exec(window.navigator.userAgent.toLowerCase());Object.extend(PopupDialogMgr,{zIndex:-1,dialogBuffer:[],focusedDialog:null,maskDialog:null,maskInitialized:!1,ecsInitialized:!1,cascadeXDegree:20,cascadeYDegree:20,lastCascadeX:null,lastCascadeY:null,blurFilter:null,getBlurFilter:function(){return this.blurFilter},contains:function(t){for(var e=0,n=this.dialogBuffer.length;e<n;e++)if(this.dialogBuffer[e]&&this.dialogBuffer[e]==t)return!0;return!1},indexOf:function(t){for(var e=0,n=this.dialogBuffer.length;e<n;e++)if(this.dialogBuffer[e]&&this.dialogBuffer[e]==t)return e;return-1},moveFocusToPrevious:function(){var t=this.findPrevDialog();if(this.focusedDialog=t,null!=t){t.getDialogTitle()&&t.getDialogTitle().addClass("dialog-title-focus");try{t.getOptions().onFocus.call(t),t.pinDialog()}catch(t){}}},add:function(e){this.ecsInitialized||(this.ecsInitialized=!0,this.press=function(t){27==(t.keyCode?t.keyCode:t.which)&&(null!=this.focusedDialog&&this.focusedDialog.getOptions().closeable&&this.focusedDialog.close(),t.stopPropagation())}.bind(this),s?t(document).on("keypress",this.press):t(document).on("keydown",this.press)),this.contains(e)||(this.dialogBuffer.push(e),this.bringToFront(e))},remove:function(t){var e=this.indexOf(t);-1!=e&&(delete this.dialogBuffer[e],t==this.focusedDialog&&(this.focusedDialog=null))},findById:function(t){if(null==t||null==t||"string"!=typeof t||"".equals(t.trim()))return null;for(var e=0,n=this.dialogBuffer.length;e<n;e++)if(this.dialogBuffer[e]&&"none"!=this.dialogBuffer[e].getDialog().css("display")&&t.equals(this.dialogBuffer[e].getOptions().id))return this.dialogBuffer[e];return null},findPrevDialog:function(){for(var t=null,e=0,n=0,r=this.dialogBuffer.length;n<r;n++)if(this.dialogBuffer[n]&&"none"!=this.dialogBuffer[n].getDialog().css("display")){var i=this.dialogBuffer[n].getOptions().zIndex;e<i&&(t=this.dialogBuffer[n],e=i)}return t},bringToFront:function(t){if(null!=this.focusedDialog)try{this.focusedDialog.getOptions().onBlur.call(this.focusedDialog)}catch(t){}if(-1==this.zIndex&&(this.zIndex=t.zIndex()),t!=this.focusedDialog&&(this.zIndex=this.zIndex+6,t.zIndex(this.zIndex),null!=this.focusedDialog&&this.focusedDialog.getDialogTitle()&&this.focusedDialog.getDialogTitle().removeClass("dialog-title-focus"),t.getDialogTitle()&&t.getDialogTitle().addClass("dialog-title-focus")),this.focusedDialog=t,null!=this.focusedDialog)try{this.focusedDialog.getDialogBody().focus(),this.focusedDialog.getOptions().onFocus.call(this.focusedDialog)}catch(t){}},_computeWidthAndHeight:function(){var e=0,n=0;try{e=Math.max(window.innerWidth,document.body.clientWidth)}catch(n){e=Math.max(t(document).width(),t(window).width())}try{n=Math.max(window.innerHeight,document.body.clientHeight)}catch(e){n=Math.max(t(document).height(),t(window).height())}return{width:e,height:n}},showMask:function(e){var n=e.getOptions();if(!this.maskInitialized){this.maskInitialized=!0;var r=t("<div/>").css({position:"fixed",top:n.maskTop,left:n.maskLeft,width:"0px",height:"0px",opacity:.01,display:"none"}).addClass("popup-dialog-mask");r.appendTo("body"),r.on("scroll touchmove mousewheel",(function(t){return t.preventDefault(),t.stopPropagation(),!1})),this.getMask=function(){return r};var i=t.proxy((function(){var e=0,r=0;if("document"==n.maskViewport)e=t(document).width(),r=t(document).height();else if("window"==n.maskViewport)e=t(window).width(),r=t(window).height();else if("max"==n.maskViewport)e=Math.max(window.innerWidth,document.body.clientWidth,t(document).width(),t(window).width()),r=Math.max(window.innerHeight,document.body.clientHeight,t(document).height(),t(window).height());else{var i=this._computeWidthAndHeight();e=i.width,r=i.height}n.maskWidth&&(e=n.maskWidth),n.maskHeight&&(r=n.maskHeight),this.getMask().css({width:e+"px",height:r+"px"}),null!=this.focusedDialog&&(this.focusedDialog.resize(),this.focusedDialog.pinDialog())}),this);t(window).on("resize",i)}var o=0,s=0;if("document"==n.maskViewport)o=t(document).width(),s=t(document).height();else if("window"==n.maskViewport)o=t(window).width(),s=t(window).height();else if("max"==n.maskViewport)o=Math.max(window.innerWidth,document.body.clientWidth,t(document).width(),t(window).width()),s=Math.max(window.innerHeight,document.body.clientHeight,t(document).height(),t(window).height());else{var a=this._computeWidthAndHeight();o=a.width,s=a.height}n.maskWidth&&(o=n.maskWidth),n.maskHeight&&(s=n.maskHeight),null!=this.maskDialog&&this.maskDialog.getOptions().zIndex>n.zIndex||(n.blurValue&&(this.getBlurFilter()||(this.blurFilter=t("<div/>").css({visibility:"hidden"}),this.blurFilter.html('<svg width="0" height="0" style="position:absolute"><filter id="__blur__"><feGaussianBlur id="__blursource__" in="SourceGraphic" stdDeviation="0" /></filter></svg>'),this.blurFilter.appendTo("body")),document.getElementById("__blursource__").attributes.stdDeviation.value=n.blurValue,n.blurTarget&&t(n.blurTarget).css({filter:"url(#__blur__)"})),this.getMask().css({width:o+"px",height:s+"px",opacity:n.maskOpacity,backgroundColor:n.maskColor,zIndex:n.zIndex-4}),this.getMask().show(),this.maskDialog=e)},hideMask:function(e){if(e==this.maskDialog)if(this.maskDialog=this.findPrevMaskDialog(e),null!=this.maskDialog)this.showMask(this.maskDialog);else{if(this.getBlurFilter()){document.getElementById("__blursource__").attributes.stdDeviation.value=0;var n=e.getOptions();t(n.blurTarget).css({filter:""})}this.getMask().hide()}},findPrevMaskDialog:function(t){var e=null;if(null!=this.maskDialog)for(var n=0,r=t.getOptions().zIndex-4,i=0,o=this.dialogBuffer.length;i<o;i++)if(this.dialogBuffer[i]&&this.dialogBuffer[i].getOptions().mask){if("none"==this.dialogBuffer[i].getDialog().css("display"))continue;var s=this.dialogBuffer[i].getOptions().zIndex;s<r&&n<s&&(e=this.dialogBuffer[i],n=s)}return e},cascadeDialog:function(e){if("cascade"==e.getOptions().openType){var n=t(window).width(),r=t(window).height(),i=e.getDialog().width(),o=e.getDialog().height(),s=parseInt(e.getDialog().css("top")),a=parseInt(e.getDialog().css("left"));if(null==this.lastCascadeX&&null==this.lastCascadeY)this.lastCascadeX=a,this.lastCascadeY=s;else{var c=this.lastCascadeX+this.cascadeXDegree,l=this.lastCascadeY+this.cascadeYDegree;c+i>=n&&(c=this.cascadeXDegree),l+o>=r&&(l=this.cascadeYDegree),this.lastCascadeX=c,this.lastCascadeY=l,e.moveTo(this.lastCascadeY,this.lastCascadeX)}}},resetZIndex:function(){this.zIndex=-1}}),e.PopupDialog=Class.define({create:function(){var e=Object.extend({id:"",css:"",bodyContent:null,url:null,method:"get",async:!1,contentType:null,stringify:!1,unit:"px",params:{},minWidth:20,minHeight:20,maxWidth:-1,maxHeight:-1,width:20,height:20,title:!1,openType:"center",resize:!0,pin:!1,full:!1,fullMargin:20,shadow:!0,closeable:!0,overflowX:!0,overflowY:!0,overflow:!0,titleColor:null,titleBgColor:null,titleCss:null,bodyColor:null,bodyTextAlign:"left",bodyCss:null,backgroundColor:null,buttonClass:"button",buttonsBgColor:null,borderColor:null,shadowColor:null,dialogStyle:{},titleStyle:{},bodyStyle:{},content:!1,contentCss:"",contentStyle:{},buttonsCss:"",buttonsStyle:{},closeColor:"#fff",waiting:!1,waitingSeconds:30,waitingOpacity:.3,waitingBgColor:"#000",waitingCss:"cube",mask:!0,maskViewport:"viewport",maskColor:"#000",maskOpacity:.3,maskTop:0,maskLeft:0,maskWidth:null,maskHeight:null,zIndex:100,onBeforeShow:Function.empty,onShow:Function.empty,onBeforeHide:Function.empty,onHide:Function.empty,onInit:Function.empty,onFirstShow:Function.empty,onResizeStart:Function.empty,onResize:Function.empty,onResizeEnd:Function.empty,onBlur:Function.empty,onFocus:Function.empty,onDestroy:Function.empty,onDragSart:Function.empty,onDragEnd:Function.empty,buttonAlign:"center",buttonOptions:{},localData:{},hideOnClose:!1,rounded:!1,hided:!0,showEffect:null,hideEffect:null,blurTarget:null,blurValue:0},arguments[0]||{});if(Object.isNumber(e.width)&&Object.isNumber(e.width)){e.width<e.minWidth&&(e.width=e.minWidth),e.height<e.minHeight&&(e.height=e.minHeight);var n=t(window).width(),r=t(window).height();e.width>n&&(e.width=n-e.fullMargin),e.height>r&&(e.height=r-e.fullMargin),-1!=e.maxWidth&&e.maxWidth<e.minWidth&&(e.maxWidth=n-e.fullMargin),-1!=e.maxHeight&&e.maxHeight<e.minHeight&&(e.maxHeight=r-e.fullMargin),e.full&&(e.shadow=!1,e.width=n-e.fullMargin,e.height=r-e.fullMargin,e.maxWidth=e.width,e.maxHeight=e.height)}this.getOptions=function(){return e},this.clearOptions=function(){try{delete e.localData,e.localData=null}catch(t){}e=null},this.tabs=[],this.tabObjs=[],this.initialized=!1,this.firstShow=!1,this.getDialog=function(){return null}},data:function(t,e){if(null!=e){var n=this.getOptions().localData[t];return this.getOptions().localData[t]=e,n}return this.getOptions().localData[t]},show:function(){var e=this,n=this.getOptions();if(n.hided=!1,null==PopupDialogMgr.findById(n.id)){if(0==this.initialized){var i=t("<div/>").addClass("popup-dialog").css({width:Object.isNumber(n.width)?n.width+n.unit:n.width,height:Object.isNumber(n.height)?n.height+n.unit:n.height}).addClass(n.css);""!==n.borderColor&&i.css({borderColor:n.borderColor}),null==n.backgroundColor||"".equals(n.backgroundColor.trim())||i.css({backgroundColor:n.backgroundColor}),n.rounded&&i.addClass("rounded"),n.shadow&&(i.addClass("shadow"),""!==n.shadowColor&&i.css({boxShadowColor:n.shadowColor})),this.getDialog=function(){return i};var s=t("<div/>").addClass("dialog-close").unselect();s.css({color:n.closeColor});var a=null;!1!==n.title&&(a=t("<div/>").addClass("dialog-title").unselect().html(n.title),""!==n.titleColor&&a.css({color:n.titleColor}),""!==n.titleBgColor&&a.css({backgroundColor:n.titleBgColor}),""!==n.titleCss&&a.addClass(n.titleCss));var c=t("<div/>").addClass("dialog-body").addClass(n.bodyCss).css({textAlign:n.bodyTextAlign});if(n.bodyColor||c.css({color:n.bodyColor}),n.overflowX||c.css({overflowX:"hidden"}),n.overflowY||c.css({overflowY:"hidden"}),n.overflow||c.css({overflow:"hidden"}),n.vcenter||n.content){var l=t("<div/>").addClass("dialog-content").css({textAlign:n.bodyTextAlign}).appendTo(c);l.addClass(n.contentCss),l.css(n.contentStyle),n.vcenter&&(c.css({overflowX:"hidden",overflowY:"hidden",overflow:"hidden",position:"relative"}),l.css({position:"absolute",width:"100%"}))}null==n.backgroundColor||"".equals(n.backgroundColor.trim())||c.css({backgroundColor:n.backgroundColor}),null==n.bodyContent||"".equals(n.bodyContent.trim())||(n.vcenter||n.content?c.find("div.dialog-content").eq(0).html(n.bodyContent):c.html(n.bodyContent)),this.getDialogTitle=function(){return a},this.getDialogBody=function(){return c},this.getDialogContentBody=function(){return n.vcenter||n.content?c.find("div.dialog-content").eq(0):c},this.getDialogContent=function(){return n.vcenter||n.content?c.find("div.dialog-content").eq(0).find(":first-child").eq(0):c.find(":first-child").eq(0)},this.getDialogButtons=function(){return null},i.on("mousedown",this.bringToFront.bind(this)),a&&a.on("mousedown",this.dragstart.bind(this)),s.on("click",this.close.bind(this)),a&&a.appendTo(i),c.appendTo(i);var u=function(){if(null==e.getDialogButtons()){var r=t("<div/>").addClass("dialog-buttons").addClass(n.buttonsCss);r.css({position:"absolute",left:0,bottom:0,width:e.getDialog().width()-10}),""!==n.buttonsBgColor&&r.css({backgroundColor:n.buttonsBgColor}),n.small&&r.addClass("small"),n.buttonAlign&&r.css("textAlign",n.buttonAlign),""!==n.buttonsCss&&r.addClass(n.buttonsCss),""!==n.buttonsStyle&&r.css(n.buttonsStyle),e.getDialogButtons=function(){return r}}var o=e.getDialogButtons(),s=n.buttonOptions[h],a=t("<button/>");n.small&&a.addClass("small"),s.disabled&&a.disable(),null==s.id||"".equals(s.id.trim())||(s.getButton=Object.methodize(a));try{a.type="button"}catch(t){}a.addClass(n.buttonClass),s.rounded&&a.addClass("rounded"),s.small&&a.addClass("small"),s.strong&&a.addClass("strong"),s.css&&!"".equals(s.css)&&a.addClass(s.css),s.bgColor&&!"".equals(s.bgColor)&&a.css({backgroundColor:s.bgColor}),s.disabled&&a.disable(),a.css(s.style),a.html(s.text);var c=function(t,e){if(!a.prop("disabled")&&!a.is(":disabled")){var n=e.call(this);(t||!0===n)&&this.close()}}.bind(e,s.close,s.onClick);a.on("click",c),n.hide&&a.css({display:"none"}),a.appendTo(o),o.appendTo(i)};for(var h in n.buttonOptions)u();if(n.resize){var p=t("<div/>").addClass("dialog-resizer").unselect();p.on("mousedown",this.resizestart.bind(this)),p.appendTo(i)}s.appendTo(i),n.closeable||s.hide(),c&&c.css(n.bodyStyle),a&&a.css(n.titleStyle),i&&i.css(n.dialogStyle),i.hide(),i.appendTo("body"),this.bindClosable();try{n.onInit.call(this)}catch(t){o.log(t)}PopupDialogMgr.add(this),this.initialized=!0}PopupDialogMgr.bringToFront(this);try{n.onBeforeShow.call(this)}catch(t){}var f=this.centerPos();this.getDialog().css({top:f.Y+n.unit,left:f.X+n.unit}),this.getDialog().show(),this.resizeBody();this.getDialog().width(),this.getDialog().height();if(n.mask&&PopupDialogMgr.showMask(this),null!=n.bodyContent&&!"".equals(n.bodyContent.trim())&&1!=this.firstShow){try{PopupDialogMgr.cascadeDialog(this),n.onFirstShow.call(this)}catch(t){o.log(t)}this.firstShow=!0}try{r&&n.showEffect&&(this.getDialog().addClass(n.showEffect),this.getDialog().one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){this.getDialog().removeClass(n.showEffect)}.bind(this)))}catch(t){}if(0==this.firstShow&&null!=n.url){var d=this;n.waiting&&this.getDialog().loading({seconds:n.waitingSeconds,reusable:!1,opacity:n.waitingOpacity,mask:n.waitingBgColor,css:n.waitingCss,zIndex:this.getOptions().zIndex}).loading("start"),t.ajax({type:n.method,url:n.url,async:n.async,contentType:n.contentType?n.contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:n.stringify?JSON.stringify(n.params):n.params,complete:function(){try{d.getDialog().loading("stop")}catch(t){}if(1!=d.firstShow){try{d.getOptions().onFirstShow.call(this)}catch(t){o.log(t)}d.firstShow=!0}try{d.getOptions().onShow.call(this),d.resizeBody()}catch(t){o.log(t)}},success:function(t,e,n){d.getDialogContentBody().html(t)}})}else if(1==this.firstShow)try{n.onShow.call(this),this.resizeBody()}catch(t){o.log(t)}return this}PopupDialogMgr.findById(n.id).bringToFront()},hide:function(){var t=this.getOptions();if(!t.hided){try{t.onBeforeHide.call(this)}catch(t){o.log(t)}if(null!=this.getDialog()){try{that.getDialog().loading("stop")}catch(t){}this.getDialog().hide()}t.mask&&PopupDialogMgr.hideMask(this);try{t.onHide.call(this)}catch(t){o.log(t)}return t.hided=!0,PopupDialogMgr.moveFocusToPrevious(),this}},close:function(){var t=this.getOptions();t.hideOnClose?r&&t.hideEffect?(this.getDialog().addClass(t.hideEffect),this.getDialog().one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){this.hide(),this.getDialog().removeClass(t.hideEffect)}.bind(this))):this.hide():r&&t.hideEffect?(this.getDialog().addClass(t.hideEffect),this.getDialog().one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){this.__destroy__()}.bind(this))):this.__destroy__()},destroy:function(){var t=this.getOptions();r&&t.hideEffect?(this.getDialog().addClass(t.hideEffect),this.getDialog().one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){this.__destroy__()}.bind(this))):this.__destroy__()},__destroy__:function(){this.hide();var t=this.getOptions();try{t.onDestroy.call(this)}catch(t){}this.clearOptions(),this.clearOptions=null,this.getOptions=null,PopupDialogMgr.remove(this),null!=this.getDialog()&&this.getDialog().remove(),this.getDialogTitle=null,this.getDialogBody=null,this.getDialogButtons=null,this.getOptions=null,this.getDialog=null},body:function(){return this.getDialogBody()},zIndex:function(t){return null!=t?(null!=this.getDialog()&&this.getDialog().css({zIndex:t-1}),this.getOptions().zIndex=t,this):this.getOptions().zIndex},getMask:function(){return PopupDialogMgr.getMask()},bringToFront:function(){return PopupDialogMgr.bringToFront(this),this},pinDialog:function(){var t=this.getOptions();if(t&&t.pin){var e=this.centerPos();this.moveTo(e.Y,e.X)}return this},resizeBody:function(){var t=this.getOptions();if(null!=this.getDialog()){var e=this.getDialog().width(),n=this.getDialog().height(),r=0;this.getDialogTitle()&&(r=this.getAbsoluteHeight(this.getDialogTitle()[0]));var i=0;null!=this.getDialogButtons()&&(i=this.getAbsoluteHeight(this.getDialogButtons()[0]));var s=e-this.getMarginWidth(this.getDialogBody()[0]),a=n-r-i-this.getMarginHeight(this.getDialogBody()[0]);if(this.getDialogBody().css({width:s+t.unit,height:a+t.unit}),this.getDialogButtons()&&this.getDialogButtons().css({width:this.getDialog().width()}),this.getOptions().vcenter){var c=this.getDialogContentBody().height();a-c>0&&this.getDialogContentBody().css({top:(a-c)/2+t.unit})}try{this.getOptions().onResize.call(this,s,a),1==this.getOptions().pin&&this.pinDialog()}catch(t){o.log(t)}}},getAbsoluteHeight:function(t){t="string"==typeof t?document.querySelector(t):t;var e=window.getComputedStyle(t),n=parseFloat(e.marginTop)+parseFloat(e.marginBottom);return Math.ceil(t.offsetHeight+n)},getAbsoluteWidth:function(t){t="string"==typeof t?document.querySelector(t):t;var e=window.getComputedStyle(t),n=parseFloat(e.marginLeft)+parseFloat(e.marginRight);return Math.ceil(t.offsetWidth+n)},getMarginHeight:function(t){t="string"==typeof t?document.querySelector(t):t;var e=window.getComputedStyle(t),n=parseFloat(e.marginTop)+parseFloat(e.marginBottom);return Math.ceil(n)},getMarginWidth:function(t){t="string"==typeof t?document.querySelector(t):t;var e=window.getComputedStyle(t),n=parseFloat(e.marginLeft)+parseFloat(e.marginRight);return Math.ceil(n)},centerPos:function(){var e={X:0,Y:0};if(null!=this.getDialog()){var n,r,i=this.getDialog();this.getOptions().maskViewport;n=t(window).width(),r=t(window).height();var o=i.borderTickWidth(),s=i.borderTickHeight(),a={width:i.width()+o,height:i.height()+s};e.Y=Math.ceil((r-a.height)/2),e.X=Math.ceil((n-a.width)/2),e.X<0&&(e.X=0),e.Y<0&&(e.Y=0)}return e},moveTo:function(t,e){var n=this.getOptions();return this.getDialog().css({top:t+n.unit,left:e+n.unit}),this},dragstart:function(e){if(e.stopPropagation(),null!=this.getDialog()){var n=this.getDialog(),r=this.getOptions(),i="viewport"===r.maskViewport;this.bringToFront();try{r.onDragSart.call(this)}catch(t){o.log(t)}var s=0,a=0;if(i){var c={top:parseInt(n.css("top")),left:parseInt(n.css("left"))};s=e.screenX-c.left,a=e.screenY-c.top}else{var l=n.offset();s=e.clientX-l.left,a=e.clientY-l.top}var u=function(t){t.stopPropagation(),i?n.css({top:t.screenY-a+r.unit,left:t.screenX-s+r.unit}):n.css({top:t.clientY-a-window.scrollY+r.unit,left:t.clientX-s+r.unit})}.bind(this),h=function(e){try{r.onDragEnd.call(this)}catch(t){o.log(t)}1==r.pin&&this.pinDialog(),t(document).off("mousemove",u),t(document).off("mouseup",h)}.bind(this);t(document).on("mousemove",u),t(document).on("mouseup",h)}},resizestart:function(e){if(e.stopPropagation(),null!=this.getDialog()){var n=this.getDialog(),r=this.getOptions();this.bringToFront();try{r.onResizeStart.call(this)}catch(t){o.log(t)}var i=this.getDialog().offset(),s=i.top,a=i.left,c=function(e){e.stopPropagation();var i=e.clientY+t(document).scrollTop()-s,o=e.clientX+t(document).scrollLeft()-a;i<r.minHeight&&(i=r.minHeight),o<r.minWidth&&(o=r.minWidth),-1!=r.maxWidth&&o>r.maxWidth&&(o=r.maxWidth),-1!=r.maxHeight&&i>r.maxHeight&&(i=r.maxHeight),n.css({height:i+r.unit,width:o+r.unit}),this.resizeBody()}.bind(this),l=function(e){try{r.onResizeEnd.call(this)}catch(t){o.log(t)}1==r.pin&&this.pinDialog(),t(document).off("mousemove",c),t(document).off("mouseup",l)}.bind(this);t(document).on("mousemove",c),t(document).on("mouseup",l)}},resize:function(){var e=this.getOptions();if(e.full){var n=t(window).width(),r=t(window).height(),i=n-e.fullMargin,o=r-e.fullMargin;this.getDialog().css({height:o+e.unit,width:i+e.unit}),this.resizeBody()}return this},saveTabObjs:function(){for(var e=0,n=PopupDialog.TagsObj.length;e<n;e++)for(var r=document.getElementsByTagName(PopupDialog.TagsObj[e]),i=0,o=r.length;i<o;i++){for(var s=t(r[i]).parents(),a=!0,c=0,l=s.length;c<l;c++)"none"!=s[c].css("display")&&"hidden"!=s[c].css("visibility")||(a=!1);a&&("none"!=r[i].css("display")&&"hidden"!=r[i].css("visibility")&&-1!=r[i].attr("tabIndex")&&(this.tabs.push(r[i].attr("tabIndex")),this.tabObjs.push(r[i])))}return this},disableTabs:function(){this.saveTabObjs();for(var t=0;t<this.tabObjs.length;t++)this.tabObjs[t].attr("tabIndex",-1);return this},enableTabs:function(){for(var t=0;t<this.tabObjs.length;t++)this.tabObjs[t].attr("tabIndex",this.tabs[t]);return delete this.tabObjs,delete this.tabs,this.tabObjs=[],this.tabs=[],this},addButton:function(){var t=Object.extend({id:"",bgColor:"",text:"button",strong:!1,close:!0,rounded:!1,small:!1,disabled:!1,css:"",style:{},onClick:Function.empty,getButton:Function.empty},arguments[0]||{});return null==this.getOptions().buttonOptions[t.text]&&(this.getOptions().buttonOptions[t.text]=t),this},getButton:function(t){try{var e=this.getOptions();if(null!=e&&null!=t&&!"".equals(t.trim()))for(var n in e.buttonOptions){var r=e.buttonOptions[n];if(r.id==t)return r.getButton()}}catch(t){}return null},enableButton:function(t){try{var e=this.getOptions();if(null!=e&&null!=t&&!"".equals(t.trim()))for(var n in e.buttonOptions){var r=e.buttonOptions[n];r.id==t&&r.getButton().enable()}}catch(t){}return this},disableButton:function(t){try{var e=this.getOptions();if(null!=e&&null!=t&&!"".equals(t.trim()))for(var n in e.buttonOptions){var r=e.buttonOptions[n];r.id==t&&r.getButton().disable()}}catch(t){}return this},toggleButton:function(t){try{var e=this.getOptions();if(null!=e&&null!=t&&!"".equals(t.trim()))for(var n in e.buttonOptions){var r=e.buttonOptions[n];r.id==t&&(r.getButton().prop("disabled")?r.getButton().enable():r.getButton().disable())}}catch(t){}return this},showButton:function(t){try{var e=this.getOptions();if(null!=e&&null!=t&&!"".equals(t.trim()))for(var n in e.buttonOptions){var r=e.buttonOptions[n];r.id==t&&r.getButton().css({display:""})}}catch(t){}return this},hideButton:function(t){try{var e=this.getOptions();if(null!=e&&null!=t&&!"".equals(t.trim()))for(var n in e.buttonOptions){var r=e.buttonOptions[n];r.id==t&&r.getButton().css({display:"none"})}}catch(t){}return this},title:function(t){null!=this.getDialogTitle()&&this.getDialogTitle().html(t)},width:function(t){if(null==t)return this.getDialog().width();this.getOptions().width=t},height:function(t){if(null==t)return this.getDialog().height();this.getOptions().height=t},content:function(t){return null!=this.getDialog()?(this.getDialogContentBody().empty(),this.getDialogContentBody().html(t),this.bindClosable()):this.getOptions().bodyContent=t,this},element:function(e){return null!=this.getDialog()&&(this.getDialogContentBody().empty(),t(e).appendTo(this.getDialogContentBody()),this.bindClosable()),this},openURL:function(e){if(null!=this.getDialog()){var n=this.getOptions(),r=Object.extend({type:n.method,async:n.async,params:{},contentType:n.contentType,stringify:n.stringify,waiting:n.waiting,waitingSeconds:n.waitingSeconds,waitingOpacity:n.waitingOpacity,waitingBgColor:n.waitingBgColor,waitingCss:n.waitingCss},arguments[1]||{}),i=this.getDialogContentBody(),s=this;r.waiting&&this.getDialog().loading({seconds:r.waitingSeconds,reusable:!1,opacity:r.waitingOpacity,mask:r.waitingBgColor,css:r.waitingCss,zIndex:this.getOptions().zIndex}).loading("start"),t.ajax({type:r.method,url:e,async:r.async,contentType:r.contentType?r.contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:r.stringify?JSON.stringify(r.params):r.params,complete:function(){try{r.waiting&&s.getDialog().loading("stop")}catch(t){}try{s.getOptions().onShow.call(this),s.resizeBody()}catch(t){o.log(t)}},success:function(t){i.empty(),i.html(t),s.bindClosable()}})}return this},bindClosable:function(){var e=this.getDialogBody().find(".closable"),n=this.close.bind(this);return e.each((function(e,r){t(this).css({cursor:"pointer"}).unselect(),t(this).on("click",n)})),this}}),PopupDialog.TagsObj=["A","BUTTON","INPUT","SELECT","TEXTAREA","IFRAME","AREA","OBJECT"],i()}(i(),"undefined"!=typeof window?window:void 0),n.g.Confirm=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:400,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Confirm",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Function.empty,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"OK",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"Cancel",a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Function.empty,c=new PopupDialog({css:"bg-white text-black",titleCss:"bg-blue text-white",title:'<i class="fas fa-info-circle middle"></i> '.concat(n),titleBackgroundColor:"#7472f3",width:t,height:e,bodyContent:'<i class="far fa-exclamation-circle fa-2x middle text-blue mr5"></i> '.concat(r),maskColor:"#0a22ff",maskOpacity:.2,mask:!0,pin:!0,resize:!0,vcenter:!0,rounded:!0,closeable:!0,buttonClass:"button",bodyTextAlign:"center",hideOnClose:!1,showEffect:"fadein",hideEffect:"fadeout",blurTarget:".fz-wrapper",blurValue:1});c.addButton({text:o,css:"bg-blue text-white",strong:!0,close:!0,onClick:i}),c.addButton({text:s,css:"bg-gray-light text-white",close:!0,onClick:a}),c.show()},n.g.Info=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:400,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Info",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Function.empty,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"OK",s=new PopupDialog({css:"bg-white text-black",titleCss:"bg-info text-white",title:'<i class="fa-solid fa-circle-info middle text-white"></i> '.concat(n),width:t,height:e,bodyContent:'<i class="fa-regular fa-circle-info fa-2x middle text-info mr5"></i> '.concat(r),maskColor:"#e0a800",maskOpacity:.2,mask:!0,pin:!0,resize:!0,vcenter:!0,rounded:!0,closeable:!0,buttonClass:"button",bodyTextAlign:"center",hideOnClose:!1,showEffect:"bump",hideEffect:"fadeout",blurTarget:".fz-wrapper",blurValue:1});s.addButton({text:o,bgColor:"#f78939",css:"bg-info text-white",strong:!0,close:!0,onClick:i}),s.show()},n.g.Alert=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:400,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Alert",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Function.empty,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"OK",s=new PopupDialog({css:"bg-white text-black",titleCss:"bg-orange text-white",title:'<i class="fas fa-exclamation-circle middle text-white"></i> '.concat(n),width:t,height:e,bodyContent:'<i class="far fa-info-circle fa-2x middle text-orange mr5"></i> '.concat(r),maskColor:"#e0a800",maskOpacity:.2,mask:!0,pin:!0,resize:!0,vcenter:!0,rounded:!0,closeable:!0,buttonClass:"button",bodyTextAlign:"center",hideOnClose:!1,showEffect:"bump",hideEffect:"fadeout",blurTarget:".fz-wrapper",blurValue:1});s.addButton({text:o,bgColor:"#f78939",css:"bg-orange text-white",strong:!0,close:!0,onClick:i}),s.show()},n.g.Warning=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:400,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Warning",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Function.empty,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"OK",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"Close",a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Function.empty,c=new PopupDialog({css:"bg-white text-black",titleCss:"bg-light-orange-darker text-white",title:'<i class="fas fa-lightbulb-exclamation middle"></i> '.concat(n),titleBackgroundColor:"#fd7342",width:t,height:e,bodyContent:'<i class="far fa-lightbulb-exclamation fa-2x middle text-light-orange-darker mr5"></i> '.concat(r),maskColor:"#fd7342",maskOpacity:.2,mask:!0,pin:!0,resize:!0,vcenter:!0,rounded:!0,closeable:!0,buttonClass:"button",bodyTextAlign:"center",hideOnClose:!1,showEffect:"fadein",hideEffect:"fadeout",blurTarget:".fz-wrapper",blurValue:1});c.addButton({text:o,css:"bg-light-orange-darker text-white",strong:!0,close:!0,onClick:i}),c.addButton({text:s,css:"bg-gray-light text-white",close:!0,onClick:a}),c.show()},n.g.Notice=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:400,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Notice",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Function.empty,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"Close",s=new PopupDialog({css:"bg-green text-white",titleCss:"bg-green text-white",title:'<i class="fas fa-exclamation-circle middle text-white"></i> '.concat(n),width:t,height:e,bodyContent:'<i class="far fa-circle-exclamation-check fa-2x middle text-white mr5"></i> '.concat(r),maskColor:"#e0a800",maskOpacity:.2,mask:!0,pin:!0,resize:!0,vcenter:!0,rounded:!0,closeable:!0,buttonClass:"button",bodyTextAlign:"center",hideOnClose:!1,showEffect:"bump",hideEffect:"fadeout",blurTarget:".fz-wrapper",blurValue:1});s.addButton({text:o,bgColor:"#f78939",css:"bg-white text-black",strong:!0,close:!0,onClick:i}),s.show()},n.g.ContentDialog=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:400,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Confirm",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Function.empty,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"OK",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"Close",a=new PopupDialog({css:"bg-default",titleCss:"bg-blue text-white",title:n,titleBackgroundColor:"#7472f3",width:t,height:e,bodyContent:r,maskColor:"#0a22ff",maskOpacity:.2,mask:!0,pin:!0,resize:!0,vcenter:!0,rounded:!0,closeable:!0,buttonClass:"button",bodyTextAlign:"center",hideOnClose:!1,showEffect:"fadein",hideEffect:"fadeout",blurTarget:".fz-wrapper",blurValue:1});a.addButton({text:o,css:"bg-blue text-white",strong:!0,close:!0,onClick:i}),a.addButton({text:s,css:"bg-gray-light text-white",close:!0}),a.show()}},17544:function(t,e,n){"use strict";n.d(e,{b$:function(){return l},hK:function(){return d},WU:function(){return a},mY:function(){return f},Tu:function(){return u},jd:function(){return c},Uy:function(){return p},vD:function(){return h}});n(43371),n(69826),n(41539),n(31672),n(2490),n(59461),n(26833);var r=n(15671),i=n(43144),o=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";(0,r.Z)(this,t),this.enumName=e,this.enumValue=n,this.enumDescription=i,this.enumI18n=o}return(0,i.Z)(t,[{key:"name",get:function(){return this.enumName}},{key:"code",get:function(){return this.enumValue}},{key:"description",get:function(){return this.enumDescription}},{key:"i18n",get:function(){return this.enumI18n}},{key:"toString",value:function(){return this.enumValue}},{key:"valueOf",value:function(){return this.enumValue}},{key:"is",value:function(t){return!!t&&t===this.enumValue}},{key:"isNot",value:function(t){return!t||t!==this.enumValue}},{key:"equals",value:function(e){return e instanceof t&&(e.enumName===this.enumName&&e.enumValue===this.enumValue)}}]),t}(),s=o,a=Object.freeze({ADMIN:new s("관리자","AUTH_ADMIN"),USER:new s("사용자","AUTH_USER"),of:function(t){var e=Object.values(a).find((function(e){return!(e instanceof Function)&&e.enumValue===t}));return e||a.USER}}),c=Object.freeze({ALLY:new s("아군","A"),ENEMY:new s("적군","E"),of:function(t){var e=Object.values(c).find((function(e){return!(e instanceof Function)&&e.enumValue===t}));return e||c.ALLY}}),l=Object.freeze({HEADQUARTERS:new s("군 본부","H"),DIVISION:new s("사단","D"),BRIGADE:new s("여단","B"),REGIMENT:new s("연대","R"),BATTALION:new s("대대","A"),COMPANY:new s("중대","C"),PLATOON:new s("소대","P"),SQUADRON:new s("분대","S"),NAN:new s("-","X"),of:function(t){var e=Object.values(l).find((function(e){return!(e instanceof Function)&&e.enumValue===t}));return e||l.NAN}}),u=Object.freeze({FLAG:new s("국기","F"),SYMBOLOGY:new s("단대호","S"),WEAPON:new s("무기 기호","W"),ICON:new s("아이콘","I"),PATTERN:new s("패턴","P"),of:function(t){var e=Object.values(u).find((function(e){return!(e instanceof Function)&&e.enumValue===t}));return e||u.ICON}}),h=Object.freeze({INFANTRY:new s("보병","I"),ARMORED:new s("기갑","A"),ARTILLERY:new s("포병","R"),ARMY_AVIATION:new s("육군 항공","V"),MISSILE:new s("미사일","M"),AIR_FORCE:new s("공군","F"),NAVY:new s("해군","N"),RECON:new s("정찰","C"),UAV:new s("UAV","U"),SPACE:new s("우주","S"),NAN:new s("-","X"),of:function(t){var e=Object.values(h).find((function(e){return!(e instanceof Function)&&e.enumValue===t}));return e||h.NAN}}),p=Object.freeze({STOP:new s("대기","S"),MOVE:new s("이동","M"),ENGAGE:new s("교전","E"),ACTION:new s("작전중","A"),REPAIR:new s("수리","R"),INJURY:new s("부상","I"),KIA:new s("전사","K"),MIA:new s("실종","N"),NAN:new s("-","X"),of:function(t){var e=Object.values(p).find((function(e){return!(e instanceof Function)&&e.enumValue===t}));return e||p.NAN}}),f=Object.freeze({CHAT:new s("CHAT","CHAT"),COMMAND:new s("COMMAND","COMMAND"),POSITION:new s("POSITION","POSITION"),ACCEPTANCE:new s("ACCEPTANCE","ACCEPTANCE"),JOIN:new s("JOIN","JOIN"),LEAVE:new s("LEAVE","LEAVE"),PING:new s("PING","PING"),PONG:new s("PONG","PONG"),of:function(t){var e=Object.values(f).find((function(e){return!(e instanceof Function)&&e.enumValue===t}));return e||f.CHAT}}),d=Object.freeze({DIRECT:new s("직접 사격","D"),INDIRECT:new s("간접 사격","I"),of:function(t){var e=Object.values(d).find((function(e){return!(e instanceof Function)&&e.enumValue===t}));return e||d.DIRECT}}),g=Object.freeze({READY:new s("대기","R"),PROGRESS:new s("진행","P"),COMPLETED:new s("완료","C"),CANCELED:new s("취소","X"),of:function(t){var e=Object.values(g).find((function(e){return!(e instanceof Function)&&e.enumValue===t}));return e||g.READY}})},37921:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(19755),i=n.n(r),o=(n(35983),n(71002));n(41539),n(39714),n(47941),n(47042),n(19601),n(73210),n(91038),n(78783),n(21249),n(57640),n(9924),n(57327),n(88449),n(2490),n(59849),n(26699),n(40658),n(9653),n(24603),n(74916),n(15306),n(82481),n(69600),n(56977),n(92222),n(32564);!function(t,e){Object.extend=function(t,e,n){if("[object Object]"!==Object.prototype.toString.call(n)||void 0===n||n.nodeName){for(var r in e)t[r]=e[r];return t}for(var i in n)null!=e[i]&&(t[i]=e[i]);return t};try{Object.defineProperty(Function,"empty",{value:function(){},writable:!1})}catch(t){Function.empty=function(){}}e.Class={__extendMethod__:function(t,e){var n,r=(n=e,function(){this.$super=function(){return n.apply(this,arguments)}}),i=function(){delete this.$super},o=function(){r.call(this);var e=t.apply(this,arguments);return i.call(this),e};return o.valueOf=o.valueOf.bind(t),o.toString=o.toString.bind(t),o},__copyMethod__:function(t,e,n){for(var r=Object.keys(e),i=0,o=r.length;i<o;i++){var s=r[i],a=e[s];if("static"!==s){if("$super"==s)throw new Error("$super is not allowed.");"function"==typeof a&&n[s]&&(a=Class.__extendMethod__(e[s],n[s])),t.prototype[s]=a}else for(var c=Object.keys(e.static),l=e.static,u=0,h=r.length;u<h;u++){var p=c[u];t[p]=l[p]}}return t},define:function(){var t=Object,e=Array.prototype.slice.call(arguments);function n(){this.create.apply(this,arguments)}"function"==typeof e[0]&&(t=e.shift());for(var r=Object.keys(t.prototype),i=0,o=r.length;i<o;i++){var s=r[i],a=t.prototype[s];Object.isArray(a)||Object.isHash(a)?n.prototype[s]=JSON.parse(JSON.stringify(a)):n.prototype[s]=a}for(var c=0;c<e.length;c++)Class.__copyMethod__(n,e[c],t.prototype);return n.prototype.create||(n.prototype.create=Function.empty),n.prototype.constructor=n,n}},Object.extend(Object,{merge:function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];e[i]instanceof Object&&Object.assign(e[i],Object.merge(t[i],e[i]))}return Object.assign(t||{},e),t},isElement:function(t){return t&&!!t.nodeName&&1==t.nodeType},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},isDate:function(t,e){return!0===e?"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t.getTime()):"[object Date]"===Object.prototype.toString.call(t)},isHash:function(t){return"[object Object]"===Object.prototype.toString.call(t)&&void 0!==t&&!t.nodeName},isObject:function(t){return Object.isHash(t)},isFunction:function(t){return"function"==typeof t},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isBoolean:function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},isUndefined:function(t){return void 0===t},isNotNull:function(t){return!Object.isString(t)&&null!=t&&null!=t||Object.isString(t)&&!"".equals(t.trim())},isNull:function(t){return null==t||null==t||Object.isString(t)&&"".equals(t.trim())},containsKey:function(t,e){return e in t},clone:function(t,e){if(null===t||"object"!==(0,o.Z)(t))return t;var n=t.constructor();for(var r in t)t.hasOwnProperty(r)&&(n[r]=!0===e?Object.clone(t[r],e):t[r]);return n},methodize:function(t){return e=t,function(){return e};var e},stringify:function(t){var e=[];return JSON.stringify(t,(function(t,n){if("bigint"==typeof n&&n.toString(),"object"===(0,o.Z)(n)&&null!==n){if(-1!==e.indexOf(n))return;e.push(n)}return n}),2)}}),Object.extend(Array.prototype,{invoke:function(t){var e=Array.from(arguments).slice(1);return this.map((function(n){return n[t].apply(n,e)}))},compact:function(){return this.filter((function(t){return null!=t&&null!=t})).minimize()},clone:function(){return this.slice(0)},minimize:function(){for(var t=[],e=0,n=this.length;e<n;e++)t.includes(this[e])||t.push(this[e]);return t},isEmpty:function(){return!this.length}}),Math.log10||(Math.log10=function(t){return Math.log(t)*Math.LOG10E}),Object.extend(Number,{random:function(t,e){return Math.random()*(e-t)+t},randomInt:function(t,e){return parseInt(Math.random()*(e-t)+t)},randomIntInclusive:function(t,e){return parseInt(Math.random()*(e-t+1)+t)}}),Object.extend(Number.prototype,{int:function(){return parseInt(+this)||0},float:function(){return parseFloat(this)||0},radians:function(){return this*Math.PI/180},degrees:function(){return 180*this/Math.PI},seconds:function(){return 1e3*this},minutes:function(){return 1e3*this*60},hours:function(){return 1e3*this*60*60},addSeconds:function(t){return this+1e3*t},addMinutes:function(t){return this+1e3*t*60},addHours:function(t){return this+1e3*t*60*60},add:function(t){return this+t},sub:function(t){return this-t},abs:function(){return Math.abs(this)},ceil:function(){return Math.ceil(this)},floor:function(){return Math.floor(this)},round:function(){return Math.round(this)},pow:function(t){return Math.pow(this,t)},sqrt:function(){return Math.sqrt(this)},sin:function(){return Math.sin(this)},cos:function(){return Math.cos(this)},tan:function(){return Math.tan(this)},asin:function(){return Math.asin(this)},acos:function(){return Math.acos(this)},atan:function(){return Math.atan(this)},exp:function(){return Math.exp(this)},log:function(){return Math.log(this)},comma:function(){var t=String(this),e="";-1!=t.indexOf(".")&&(e=t.substring(t.indexOf(".")),t=t.substring(0,t.indexOf(".")));for(var n=new RegExp("(-?[0-9]+)([0-9]{3})");n.test(t);)t=t.replace(n,"$1,$2");return t+e},paddingDecimal:function(t){var e=String(this),n="";return-1!=e.indexOf(".")&&(n=e.substring(e.indexOf(".")+1),e=e.substring(0,e.indexOf("."))),e+"."+n.paddingRight("0",t)},padding:function(t,e){return arguments.length<2?this:(t=String(t),e=parseInt(e)||0,this.length>=e?this:t.repeat(e-String(this).length)+String(this))},paddingRight:function(t,e){return arguments.length<2?this:(t=String(t),e=parseInt(e)||0,this.length>=e?this:String(this)+t.repeat(e-String(this).length))},toBinary:function(){var t=this,e=[];if(t<0)throw new TypeError;if(0==t)return"0";for(var n=1;n<=t;n*=2){n&t?e.push("1"):e.push("0")}return e.reverse().join("")}}),Object.extend(String,{guid:function(){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}),Object.extend(String.prototype,{bytes:function(){for(var t=0,e=0,n=this.length;e<n;e++)this.charCodeAt(e)>127?t+=2:t++;return t},utf8len:function(){return encodeURIComponent(this).replace(/%../g,"x").length},int:function(){return parseInt(+this)||0},float:function(){return parseFloat(this)||0},toFixed:function(t){try{var e=Number(this);if(!isNaN(e))return e.toFixed(t)}catch(t){}return this},contains:function(t){return-1!=this.indexOf(t)},upper:function(){return this.toUpperCase()},lower:function(){return this.toLowerCase()},equals:function(t,e){return!0!==e?this==t:this===t},equalsIgnoreCase:function(t){return t&&this.toLowerCase()==(""+t).toLowerCase()},removeWhiteSpace:function(){return this.replace(/[\s\uFEFF\xA0]/g,"")},ltrim:function(){return this.replace(/^[\s\uFEFF\xA0]+/g,"")},rtrim:function(){return this.replace(/[\s\uFEFF\xA0]+$/g,"")},escapeHtml:function(){return this.replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},unescapeHtml:function(){return this.replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},xmlEscapeText:function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},innerString:function(){return this.replace(/\'/g,"\\'").replace(/\"/g,"&quot;")},newlineToBr:function(){return this.replace(/\n/g,"<br />")},camelize:function(){return this.replace(/\-(\w)/g,(function(t,e){return e.toUpperCase()}))},dasherize:function(){return this.replace(/([A-Z])/g,(function(t,e){return"-"+e.toLowerCase()}))},isEmail:function(){return/^(\S+)?@(\S+\.[a-z]+)?$/.test(this)},validEmail:function(){return/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/.test(this)},isPhone:function(){return/^(\d\d(\d)?(\d)?)+([-])?(\d\d\d(\d)?)+([-])?(\d\d\d\d)+$/.test(this)},isURL:function(){return/^(http|https):\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(([0-9]{1,5})?\/.*)?$/.test(this.trim())},isAlpha:function(){return/^[a-zA-Z]+$/.test(this)},isAlphaSpecials:function(){return/^[a-zA-Z~!@#$%^&*\(\)_\-=\+]+$/.test(this)},isAlphaDigit:function(){return/^[a-zA-Z0-9]+$/.test(this)},isAlphaDigitSpecials:function(){return/^[a-zA-Z0-9~!@#$%^&*\(\)_\-=\+]+$/.test(this)},isAlphaDigitSpace:function(){return/^[a-zA-Z0-9\s]+$/.test(this)},isAlphaDigitSpaceSpecials:function(){return/^[a-zA-Z0-9~!@#$%^&*\(\)_\-=\+\s]+$/.test(this)},isDigit:function(){return/^[0-9]+$/.test(this)},isDigitSpecials:function(){return/^[0-9~!@#$%^&*\(\)_\-=\+]+$/.test(this)},isLowerCase:function(){return/^[a-z0-9]+$/.test(this)},isLowerSpecialCase:function(){return/^[a-z0-9~!@#$%^&*\(\)_\-=\+]+$/.test(this)},isUpperCase:function(){return/^[A-Z0-9]+$/.test(this)},isUpperSpecialCase:function(){return/^[A-Z0-9~!@#$%^&*\(\)_\-=\+]+$/.test(this)},isNumber:function(){return!!/^([\-\+]?[0-9]*(\.[0-9]*)?)$/.test(this)||!isNaN(this)},isEmpty:function(){return"".equals(this.trim())},comma:function(t){if(!1===t)return this.replace(/,/g,"");var e=this.replace(/,/g,""),n="";-1!=e.indexOf(".")&&(n=e.substring(e.indexOf(".")),e=e.substring(0,e.indexOf(".")));for(var r=new RegExp("(-?[0-9]+)([0-9]{3})");r.test(e);)e=e.replace(r,"$1,$2");return e+n},toNumber:function(){return+this.trim().replace(/,/g,"")},startsWith:function(t){return!(arguments.length<1)&&(t=String(t),!(this.length<t.length)&&this.substring(0,t.length)==t)},endsWith:function(t){return!(arguments.length<1)&&(t=String(t),!(this.length<t.length)&&this.substring(this.length-t.length,this.length)==t)},padding:function(t,e){return arguments.length<2?this:(t=String(t),e=parseInt(e)||0,this.length>=e?this:t.repeat(e-this.length)+this)},paddingRight:function(t,e){return arguments.length<2?this:(t=String(t),e=parseInt(e)||0,this.length>=e?this:this+t.repeat(e-this.length))},isValidMacId:function(){return/^([a-fA-F0-9]{2}(:)){5,6}([a-fA-F0-9]{2})$/.test(this)},isValidTelNo:function(){return/^(\+)?(\d)+(([\s\-])*(\d)+)+$/.test(this)},isValidLicenseCode:function(){return/^[a-zA-Z]{3}$/.test(this)},isValidBinaryValue:function(){return/^[01]{8}$/.test(this)},binaryToDecimal:function(){for(var t=1,e=0,n=this.length-1;n>=0;n--){var r=+this.charAt(n);if(1!=r&&0!=r)throw new TypeError;e+=t*r,t*=2}return e},isKoreanPostal:function(){return/^(\d\d\d)?([-])?(\d\d\d)?$/.test(this)},isKoreanMobile:function(){return/^(010|011|016|017|018|019)+([-])?(\d\d\d(\d)?)+([-])?(\d\d\d\d)+$/.test(this)},isKoreanLandline:function(){return/^(02|031|062|053|042|051|032|052|033|055|054|061|063|064|041|043|070|080|0303)+([-])?(\d\d\d(\d)?)+([-])?(\d\d\d\d)+$/.test(this)},isKoreanPhone:function(){return/^(02|031|062|053|042|051|032|052|033|055|054|061|063|064|041|043|070|080|0303|010|011|016|017|018|019)+([-])?(\d\d\d(\d)?)+([-])?(\d\d\d\d)+$/.test(this)},makeKoreanPostal:function(){var t=this.trim();return t=(t=t.replace(/-/g,"")).replace(/^(\d\d\d)?([-])?(\d\d\d)?$/,(function(t,e,n,r,i,o){return(e?e+"-":"")+r}))},makeKoreanPhoneNo:function(){var t=this.trim();return t=(t=t.replace(/-/g,"")).replace(/^(02|031|062|053|042|051|032|052|033|055|054|061|063|064|041|043|070|0303|010|011|016|017|018|019)+([-])?(\d\d\d(\d)?)+([-])?(\d\d\d\d)+$/,"$1-$3-$6")},makeRegNo:function(){var t=this.trim();return 10==(t=t.replace(/-/g,"")).length?t.substring(0,3)+"-"+t.substring(3,5)+"-"+t.substring(5):13==t.length?t.substring(0,6)+"-"+t.substring(6):""},checkCorpNo:function(){var t=this.trim();if(!(t=t.replace(/-/g,"")).isDigit()||13!=t.bytes())return!1;for(var e=t.length,n=0,r=+t.substring(12,13),i=0,o=e-1;i<o;i++){n+=+t.charAt(i)*((i+1)%2==1?1:2)}var s=10-n%10;return 10==s&&(s=0),r==s},checkCompRegNo:function(){var t=this.trim();if(10!=(t=t.replace(/-/g,"")).bytes())return!1;if(!t.isNumber())return!1;for(var e=0,n=0;n<8;n++)e+=t.substring(n,n+1).Int()*"13713713".substring(n,n+1).Int()%10;var r=5*t.substring(8,9).Int()+"0",i=(10-(e+(r.substring(0,1).Int()+r.substring(1,2).Int()))%10)%10;return t.substring(9,10)==i},checkCorporationNo:function(){var t=this.trim();if(13!=(t=t.replace(/-/g,"")).bytes())return!1;if(!t.isNumber())return!1;for(var e=0,n=+t.substring(12,13),r=0,i=t.length-1;r<i;r++){e+=+t.substring(r,r+1)*((r+1)%2==1?1:2)}var o=10-e%10;return 10==o&&(o=0),n==o},checkResidentNo:function(){var t=this.trim();if(13!=(t=t.replace(/-/g,"")).bytes())return!1;if(!t.isNumber())return!1;var e=t.charAt(6);if(!("1".equals(e)||"2".equals(e)||"3".equals(e)||"4".equals(e)))return!1;var n=t.substring(0,2),r=t.substring(2,4),i=t.substring(4,6),o=t.substring(6,7);if("1"==o||"2"==o?n="19"+n:"3"!=o&&"4"!=o||(n="20"+n),+r<1||+r>12)return!1;var s=[31,28,31,30,31,30,31,31,30,31,30,31];if((+n%4==0&&+n%100!=0||+n%400==0)&&(s[1]=29),+i<1||+i>s[+r-1])return!1;for(var a=0,c=t.substring(0,6),l=t.substring(6,13),u=0;u<=5;u++)a+=(u%8+2)*c.substring(u,u+1).Int();for(var h=6;h<=11;h++)a+=(h%8+2)*l.substring(h-6,h-5).Int();return(11-a%11)%10==t.substring(12,13).Int()}}),Object.extend(Function.prototype,{debounce:function(){var t,e=this,n=Array.from(arguments),r=n.shift();r<1&&(r=1);var i=function(){null!=t&&(window.clearTimeout(t),t=null);var i=n.concat(Array.from(arguments));t=window.setTimeout((function(){e.apply(e,i),window.clearTimeout(t),t=null}),r)};return i.valueOf=i.valueOf.bind(e),i.toString=i.toString.bind(e),i},once:function(){var t,e=this,n=Array.from(arguments),r=!1,i=function(){if(r)return t;var i=n.concat(Array.from(arguments));return r=!0,t=e.apply(e,i),e=null,t};return i.valueOf=i.valueOf.bind(e),i.toString=i.toString.bind(e),i},timeout:function(){var t,e,n,r=this,i=Array.from(arguments),o=i.shift();return o<1?r.apply(r,i):(i.length>=1&&"function"==typeof i[0]&&(n=i.shift()),n=n||Function.empty,e=window.setTimeout((function(){var t=r.apply(r,i);return window.clearTimeout(e),n(),e=null,t}),o),(t=Object.methodize(e)).stop=function(t){try{window.clearTimeout(t())}catch(t){}}.bind(r,t),t)},interval:function(){var t,e,n,r=this,i=Array.from(arguments),o=i.shift();return i.length>=1&&"function"==typeof i[0]&&(n=i.shift()),n=n||Function.empty,o<0&&(o=0),0==o?r.apply(r,i):(e=window.setInterval((function(){var t=r.apply(r,i);return!1===t&&(window.clearInterval(e),n(),e=null),t}),o),(t=Object.methodize(e)).stop=function(t){try{window.clearInterval(t())}catch(t){}}.bind(r,t),t.exec=function(t){try{this.apply(this,t)}catch(t){}}.bind(r,i),t)},wrap:function(t){var e,n=(e=this,function(){this.$$$parentMethodStore$$$=this.$proceed,this.$proceed=function(){return e.apply(this,arguments)}}),r=function(){this.$proceed=this.$$$parentMethodStore$$$,null==this.$proceed&&delete this.$proceed,delete this.$$$parentMethodStore$$$},i=function(){n.call(this);var e=t.apply(this,arguments);return r.call(this),e};return i.valueOf=i.valueOf.bind(t),i.toString=i.toString.bind(t),i},before:function(){var t=this,e=Array.from(arguments),n=e.shift(),r=function(){return n.apply(this,e.concat(Array.from(arguments))),t.apply(this,e.concat(Array.from(arguments)))};return r.valueOf=r.valueOf.bind(t),r.toString=r.toString.bind(t),r},after:function(){var t=this,e=Array.from(arguments),n=e.shift(),r=function(){var r=t.apply(this,e.concat(Array.from(arguments)));return n.apply(this,e.concat(Array.from(arguments))),r};return r.valueOf=r.valueOf.bind(t),r.toString=r.toString.bind(t),r},around:function(){var t=this,e=Array.from(arguments),n=e.shift(),r=e.shift(),i=function(){n.apply(this,e.concat(Array.from(arguments)));var i=t.apply(this,e.concat(Array.from(arguments)));return r.apply(this,e.concat(Array.from(arguments))),i};return i.valueOf=i.valueOf.bind(t),i.toString=i.toString.bind(t),i}})}(i(),"undefined"!=typeof window?window:void 0),i(),("undefined"!=typeof window?window:void 0).Hotkey={shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},mouseKeys:{left_button:1,leftbutton:1,middle_button:2,middlebutton:2,right_button:3,rightbutton:3,button1:1,button2:2,button3:3,button4:4,button5:5,button6:6,button7:7,button8:8,button9:9,button10:10},specialKeys:{esc:27,escape:27,tab:9,space:32,return:13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,break:19,insert:45,home:36,delete:46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},bind:function(t,e,n,r,o,s){s||(s="fn-hotkey"),(t=i()(t||document)).data("fn-hotkey-shortcuts-"+s)||t.data("fn-hotkey-shortcuts-"+s,{});var a=t.data("fn-hotkey-shortcuts-"+s);if(null!=e&&null!=e||(e="keydown"),null!=n&&null!=n&&"string"==typeof n&&!"".equals(n.trim())){!0!==o&&!1!==o&&(o=!0);var c=Array.from(arguments).slice(6),l=function(e){for(var i=e.keyCode?e.keyCode:e.charCode,s=String.fromCharCode(i).toLowerCase(),a=n.split("|"),l=0;l<a.length;l++){for(var u=a[l].toLowerCase().split("+"),h=0,p=void 0,f=0;f<u.length;f++)"ctrl"==(p=u[f])||"control"==p?e.ctrlKey&&h++:"shift"==p?e.shiftKey&&h++:"alt"==p?e.altKey&&h++:p.length>1?(Hotkey.specialKeys[p]&&Hotkey.specialKeys[p]==i&&h++,Hotkey.mouseKeys[p]&&Hotkey.mouseKeys[p]==e.which&&h++):"*"==p||s==p?h++:(Hotkey.shiftNums[s]&&e.shiftKey&&(s=Hotkey.shiftNums[s])==p&&h++,Hotkey.mouseKeys[p]&&Hotkey.mouseKeys[p]==e.which&&h++);if(h==u.length&&(!1===r.apply(t,[e].concat(c))||!1===o))return e.stopPropagation(),e.preventDefault(),!1}}.bind(t);t.data("fn-hotkey-type."+s,e),a[n.replace(/(\||\+)/g,"")]=l;for(var u=e.split("|").compact(),h=0,p=u.length;h<p;h++)t.on(u[h]+"."+s,l);return l}},unbind:function(t,e,n,r){if(t=i()(t||document),r||(r="fn-hotkey"),e||(e=t.data("fn-hotkey-type."+r)),e){n&&(n=n.replace(/(\||\+)/g,"")),t.data("fn-hotkey-shortcuts-"+r)||t.data("fn-hotkey-shortcuts-"+r,{});for(var o=t.data("fn-hotkey-shortcuts-"+r),s=e.split("|").compact(),a=0,c=s.length;a<c;a++)n&&o[n]?(t.off(s[a]+"."+r,o[n]),delete o[n]):t.off(s[a]+"."+r)}}},i();n(69826),n(31672),n(59461),n(68309),n(23157),n(27852),n(32023),n(15581),n(34514),n(54747);!function(t,e){function n(){return Array.from(t('link[type="text/css"][rel="stylesheet"]').map((function(e,n){return t(n).attr("href")})))}t.fn.extend({exists:function(){return t(this).length>0},outerHTML:function(e){return e?this.before(e).remove():t("<p>").append(this.eq(0).clone()).html()},rotate:function(t){return this.each((function(){i()(this).css("transform","rotate("+t+"deg)"),i()(this).css("-ms-transform","rotate("+t+"deg)"),i()(this).css("-webkit-transform","rotate("+t+"deg)"),i()(this).css("-moz-transform","rotate("+t+"deg)"),i()(this).css("-o-transform","rotate("+t+"deg)")}))},unselect:function(){return this.each((function(){this.onselectstart=function(){return!1},this.unselectable="on",i()(this).attr("unselectable","on"),i()(this).css("-o-user-select","none"),i()(this).css("-ms-user-select","none"),i()(this).css("-moz-user-select","none"),i()(this).css("-khtml-user-select","none"),i()(this).css("-webkit-user-select","none"),i()(this).css("user-select","none")}))},deselect:function(){return this.each((function(){try{this.selectionStart=this.selectionEnd=-1}catch(t){}}))},disposeChildren:function(){return t(this).contents().remove()},removeChildren:function(){return t(this).disposeChildren()},lock:function(){t(this).each((function(){this.tagName&&"select"==this.tagName.toLowerCase()?(t(this).on("focus",t.$selectLockOnFocus),t(this).on("change",t.$selectLockOnChange),t(this).prop("readonly",!0),t(this).attr("readonly","readonly")):this.tagName&&"input"==this.tagName.toLowerCase()&&this.type&&("checkbox"==this.type.toLowerCase()||"radio"==this.type.toLowerCase())?(t(this).on("click",t.$inputLockOnChange),t(this).prop("readonly",!0),t(this).attr("readonly","readonly")):(t(this).prop("readonly",!0),t(this).attr("readonly","readonly"))}))},unlock:function(){t(this).each((function(){this.tagName&&"select"==this.tagName.toLowerCase()?(t(this).off("focus",t.$selectLockOnFocus),t(this).off("change",t.$selectLockOnChange),t(this).prop("readonly",!1),t(this).attr("readonly",null)):this.tagName&&"input"==this.tagName.toLowerCase()&&this.type&&("checkbox"==this.type.toLowerCase()||"radio"==this.type.toLowerCase())?(t(this).off("click",t.$inputLockOnChange),t(this).prop("readonly",!1),t(this).attr("readonly",null)):(t(this).prop("readonly",!1),t(this).attr("readonly",null))}))},disable:function(){t(this).each((function(){t(this).prop("disabled",!0),t(this).attr("disabled","disabled")}))},enable:function(){t(this).each((function(){t(this).prop("disabled",!1),t(this).attr("disabled",null)}))},reset:function(){t(this).each((function(){this.tagName&&"form"==this.tagName.toLowerCase()&&(this.reset(),t(this).find("input[type=file]").each((function(e,n){var r=t(n);r.replaceWith(r.val("").clone(!0))})))}))},hotkey:function(t,n,r,i,o){var s=Array.from(arguments);return this.each((function(){e.Hotkey.bind.apply(null,[this].concat(s))}))},unkey:function(t,n,r){var i=Array.from(arguments);return this.each((function(){e.Hotkey.unbind.apply(null,[this].concat(i))}))},serializeJSON:function(t){var e={};return i().map(i()(this).serializeArray(),(function(n,r){if(!0!==t||n.value)if(void 0!==e[n.name]&&null!==e[n.name]){var i=[];i.push(e[n.name]),i.push(n.value),i=i.flatten(),e[n.name]=i}else e[n.name]=n.value})),e},serializePostJSON:function(t){var e={};for(var n in i().map(i()(this).serializeArray(),(function(n,r){if(!t||n.value)if(e[n.name]){var i=[];i.push(e[n.name]),i.push(n.value),i=i.flatten(),e[n.name]=i}else e[n.name]=n.value})),e)if(Object.isArray(e[n])){var r=e[n];if(delete e[n],r&&r.length>0)for(var o=0;o<r.length;o++)e[n+"["+o+"]"]=r[o]}return e},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length)for(var n,r,i=t(this[0]);i.length&&i[0]!==document;){if(("absolute"===(n=i.css("position"))||"relative"===n||"fixed"===n)&&(r=parseInt(i.css("zIndex"),10),!isNaN(r)&&0!==r))return r;i=i.parent()}return 0},scrollHeight:function(){return this.getScrollHeight()},scrollWidth:function(){return this.getScrollWidth()},viewSize:function(){return{width:i()(this).width()||+i()(this).attr("width"),height:i()(this).height()||+i()(this).attr("height")}},offsetWidth:function(){if(!this[0])return 0;var t=this[0];return parseInt(t.offsetWidth)||0},offsetHeight:function(){if(!this[0])return 0;var t=this[0];return parseInt(t.offsetHeight)||0},getScrollHeight:function(){if(!this[0])return 0;var t=this[0];return parseInt(t.scrollHeight)||0},getScrollWidth:function(){if(!this[0])return 0;var t=this[0];return parseInt(t.scrollWidth)||0},borderTopWidth:function(){return this[0]&&+t(this[0]).css("borderTopWidth").replace(/px$/,"").replace(/pt$/,"").replace(/em$/,"")||0},borderBottomWidth:function(){return this[0]&&+t(this[0]).css("borderBottomWidth").replace(/px$/,"").replace(/pt$/,"").replace(/em$/,"")||0},borderLeftWidth:function(){return this[0]&&+t(this[0]).css("borderLeftWidth").replace(/px$/,"").replace(/pt$/,"").replace(/em$/,"")||0},borderRightWidth:function(){return this[0]&&+t(this[0]).css("borderRightWidth").replace(/px$/,"").replace(/pt$/,"").replace(/em$/,"")||0},borderTickWidth:function(){if(!this[0])return 0;var e=t(this[0]);return e.borderLeftWidth()+e.borderRightWidth()},borderTickHeight:function(){if(!this[0])return 0;var e=t(this[0]);return e.borderTopWidth()+e.borderBottomWidth()}}),t.exists=function(e){return t(e).length>0},t.$selectLockOnFocus=function(t){this.defaultIndex=this.selectedIndex},t.$selectLockOnChange=function(t){this.selectedIndex=this.defaultIndex},t.$inputLockOnChange=function(t){this.checked=!this.checked},t.serializeJSONPropertyToArray=function(){for(var t=Array.from(arguments),e=t.shift(),n=0,r=t.length;n<r;n++){var i=t[n];if(void 0!==e[i]&&!Array.isArray(e[i])){var o=[];o.push(e[i]),e[i]=o}}for(var s=0,a=t.length;s<a;s++){var c=t[s];void 0===e[c]&&(e[c]=[])}return e},t.overload=function(){var e=Array.from(arguments),n=e.shift();return n=t.extend({},n||{}),t.extend.apply(this,[n].concat(Array.from(e)))},t.move=function(e,n,r){var i="";if(null!=n&&Object.isObject(n)){for(var o in n)if(Object.isArray(n[o]))for(var s=n[o],a=0,c=s.length;a<c;a++)i+="&"+o+"="+encodeURIComponent(s[a]);else i+="&"+o+"="+encodeURIComponent(n[o]);1==(i="?"+i.substring(1)).length&&(i="")}r=null!=r&&Object.isString(r)?"".equals(r.trim())?"":"#"+r:"",document.location?t(document.location).attr("href",e+i+r):window.navigate(e+i+r)};var r=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;t.urlParse=function(t){t=t||window.location.toString();var e=r.exec(t);return e&&e.length?{valid:!0,url:t,sections:{all:e,schema:e[1],host:e[6],port:e[7],params:e[12],hash:e[13]}}:{valid:!1,url:t,sections:{all:[],schema:void 0,host:void 0,port:void 0,params:void 0,hash:void 0}}};var o=!!/msie [\w.]+/.exec(window.navigator.userAgent.toLowerCase());t.import=function(e,i){var s=r.exec(window.location.toString())[10];i||(i=Function.$empty),Object.isArray(e)||(e=Array.from(e));var a=(e=e.filter((function(t){var e=r.exec(t);return e&&e.length&&e[11]})).map((function(t){var e=r.exec(t);return t.startsWith("/")||e[1]||(t=s+t),{url:t,file:e[11]}}))).filter((function(t){return t&&t.file.trim().toLowerCase().endsWith(".js")}));if(a.length){var c=Array.from(t("script").map((function(e,n){return t(n).attr("src")})));a=a.filter((function(t){return!c.includes(t.url)}))}var l=e.filter((function(t){return t&&t.file.trim().toLowerCase().endsWith(".css")}));if(l.length){var u=n();l=l.filter((function(t){return!u.includes(t.url)}))}var h=(e=a.concat(l)).length;i=i.wrap((function(){0==--h&&$proceed()})),e.length?e.forEach((function(t){if(t.file.endsWith(".js")){var e=document.createElement("script");e.src=t.url,e.type="text/javascript",e.charset="utf-8",o?e.defer="defer":e.async=!0,o?e.onreadystatechange=function(t){4!=this.readyState&&"complete"!=this.readyState||t()}.bind(e,i):e.addEventListener("load",function(t){t()}.bind(e,i),!1),document.getElementsByTagName("head")[0].appendChild(e)}else if(t.file.endsWith(".css")){var r=document.createElement("link");r.href=t.url,r.type="text/css",r.rel="stylesheet",r.charset="utf-8",o?r.onreadystatechange=function(t){4!=this.readyState&&"complete"!=this.readyState||t()}.bind(r,i):n.addEventListener("load",function(t){t()}.bind(r,i),!1),document.getElementsByTagName("head")[0].appendChild(n)}})):i()},i()}(i(),"undefined"!=typeof window?window:void 0);n(26572);var s=n(25108);!function(t,e){var n=!1;t("head meta[name=ui_event]").length&&"true"===t("head meta[name=ui_event]").attr("content")&&(n=!0);var r={selector:"select[ui-onchange], input[ui-onchange], textarea[ui-onchange], select[\\@change], input[\\@change], textarea[\\@change]",propagation:"ui-onchange-bubble",propagation_alt:"@change-bubble",event:"onchange",command:"ui-onchange",command_alt:"@change",target:"ui-onchange-target",target_alt:"@change-target",data_attr:"ui-onchange-data",data_attr_alt:"@change-data",force:"ui-onchange-force",force_alt:"@change-force",data:"change-data",transient:"ui-onchange-transient",transient_alt:"@change-transient"},o={selector:"[ui-onclick], [\\@click]",propagation:"ui-onclick-bubble",propagation_alt:"@click-bubble",event:"onclick",command:"ui-onclick",command_alt:"@click",target:"ui-onclick-target",target_alt:"@click-target",data_attr:"ui-onclick-data",data_attr_alt:"@click-data",data:"click-data"},a={selector:"[ui-ondblclick], [\\@dblclick]",propagation:"ui-ondblclick-bubble",propagation_alt:"@dblclick-bubble",event:"ondblclick",command:"ui-ondblclick",command_alt:"@dblclick",target:"ui-ondblclick-target",target_alt:"@dblclick-target",data_attr:"ui-ondblclick-data",data_attr_alt:"@dblclick-data",data:"dblclick-data"},c={selector:"[ui-ontab], [\\@tab]",propagation:"ui-ontab-bubble",propagation_alt:"@tab-bubble",event:"ontab",command:"ui-ontab",command_alt:"@tab",target:"ui-ontab-target",target_alt:"@tab-target",data_attr:"ui-ontab-data",data_attr_alt:"@tab-data",data:"tab-data"},l={selector:"[ui-onfocus], [\\@focus]",propagation:"ui-onfocus-bubble",propagation_alt:"@focus-bubble",event:"onfocus",command:"ui-onfocus",command_alt:"@focus",target:"ui-onfocus-target",target_alt:"@focus-target",data_attr:"ui-onfocus-data",data_attr_alt:"@focus-data",data:"focus-data"},u={selector:"[ui-onblur], [\\@blur]",propagation:"ui-onblur-bubble",propagation_alt:"@blur-bubble",event:"onblur",command:"ui-onblur",command_alt:"@blur",target:"ui-onblur-target",target_alt:"@blur-target",data_attr:"ui-onblur-data",data_attr_alt:"@blur-data",data:"blur-data"};e.on_change=function(e,n,i,o,s,a){if(n=t(n),!0!==a&&(e.stopPropagation(),e.preventDefault()),!i||!n.is(":visible")||n.hasClass("disabled")||n.prop("disabled")||n.prop("readonly")||"input"===e.type&&!0===s)return!1;if(o)try{o=JSON.parse(o)}catch(t){}var c=[i,n];return void 0!==o&&null!=o?c.push(o):c.push({}),c.push(e),t(document).trigger(r.event,c),!0===a&&void 0};var h=function(e){var n=t(this);if(n.length){var i=n.attr(r.propagation);void 0!==i&&null!=i||(i=n.attr(r.propagation_alt)),!0!==i&&"true"!==i&&(e.stopPropagation(),e.preventDefault());var o=n.attr(r.force);if(void 0!==o&&null!=o||(o=n.attr(r.force_alt)),!0===o||"true"===o||n.is(":visible")&&!n.hasClass("disabled")&&!n.prop("disabled")&&!n.prop("readonly")){var s=n.attr(r.command);if(void 0!==s&&null!=s||(s=n.attr(r.command_alt)),s){var a=n.attr(r.target);void 0!==a&&null!=a||(a=n.attr(r.target_alt));var c=n.attr(r.transient);if(void 0!==c&&null!=c||(c=n.attr(r.transient_alt)),"input"!==e.type||"true"!==c){var l=n.attr(r.data_attr);if(l)try{l=JSON.parse(l)}catch(t){}if((void 0===l||null==l)&&(l=n.attr(r.data_attr_alt)))try{l=JSON.parse(l)}catch(t){}if((void 0===l||null==l)&&(l=n.data(r.data)))try{l=JSON.parse(l)}catch(t){}var u=null;if(n.is("select"))if(n.prop("multiple")){u=[],n.find("option:checked").each((function(t,e){var n=e.attr(r.data_attr);if(n)try{var i=JSON.parse(n);u.push(i)}catch(t){u.push(n)}if((void 0===n||null==n)&&(n=e.attr(r.data_attr_alt)))try{var o=JSON.parse(n);u.push(o)}catch(t){u.push(n)}if((void 0===n||null==n)&&(n=e.data(r.data)))try{var s=JSON.parse(n);u.push(s)}catch(t){u.push(n)}})),0===u.length&&(u=null)}else{var h=n.find("option:checked");if(u=h.attr(r.data_attr))try{u=JSON.parse(u)}catch(t){}if((void 0===u||null==u)&&(u=h.attr(r.data_attr_alt)))try{u=JSON.parse(u)}catch(t){}if((void 0===u||null==u)&&(u=h.data(r.data)))try{u=JSON.parse(u)}catch(t){}}var p=[s,n];return void 0!==l&&null!=l?(p.push(l),n.is("select")&&void 0!==u&&null!=u&&(p.pop(),p.push({data:l,option:u})),p.push(e)):(p.push({}),n.is("select")&&void 0!==u&&null!=u&&(p.pop(),p.push({data:{},option:u})),p.push(e)),a?t(a).trigger(r.event,p):t(document).trigger(r.event,p),(!0===i||"true"===i)&&void 0}}}}};e.on_click=function(e,n,r,i,s){if(n=t(n),!0!==s&&(e.stopPropagation(),e.preventDefault()),!r||!n.is(":visible")||n.hasClass("disabled")||n.prop("disabled")||n.hasClass("dblclick"))return!1;if(i)try{i=JSON.parse(i)}catch(t){}var a=[r,n];return void 0!==i&&null!=i?a.push(i):a.push({}),a.push(e),t(document).trigger(o.event,a),!0===s&&void 0};var p=function(e){var n=t(this);if(n.length){var r=n.attr(o.propagation);if(void 0!==r&&null!=r||(r=n.attr(o.propagation_alt)),!0!==r&&"true"!==r&&(e.stopPropagation(),e.preventDefault()),n.is(":visible")&&!n.hasClass("disabled")&&!n.prop("disabled")&&!n.hasClass("dblclick")&&!n.is(a.selector)){var i=n.attr(o.command);if(void 0!==i&&null!=i||(i=n.attr(o.command_alt)),i){var s=n.attr(o.target);void 0!==s&&null!=s||(s=n.attr(o.target_alt));var c=n.attr(o.data_attr);if(c)try{c=JSON.parse(c)}catch(t){}if((void 0===c||null==c)&&(c=n.attr(o.data_attr_alt)))try{c=JSON.parse(c)}catch(t){}if((void 0===c||null==c)&&(c=n.data(o.data)))try{c=JSON.parse(c)}catch(t){}var l=[i,n];return void 0!==c&&null!=c?l.push(c):l.push({}),l.push(e),s?t(s).trigger(o.event,l):t(document).trigger(o.event,l),(!0===r||"true"===r)&&void 0}}}};e.on_dblclick=function(e,n,r,i,o){if(n=t(n),!0!==o&&(e.stopPropagation(),e.preventDefault()),!r||!n.is(":visible")||n.hasClass("disabled")||n.prop("disabled"))return!1;if(i)try{i=JSON.parse(i)}catch(t){}var s=[r,n];return void 0!==i&&null!=i?s.push(i):s.push({}),s.push(e),t(document).trigger(a.event,s),!0===o&&void 0};var f=function(e){var n=t(this);if(n.length){var r=n.attr(a.propagation);if(void 0!==r&&null!=r||(r=n.attr(a.propagation_alt)),!0!==r&&"true"!==r&&(e.stopPropagation(),e.preventDefault()),n.is(":visible")&&!n.hasClass("disabled")&&!n.prop("disabled")){var i=n.attr(a.command);if(void 0!==i&&null!=i||(i=n.attr(a.command_alt)),i){var o=n.attr(a.target);void 0!==o&&null!=o||(o=n.attr(a.target_alt));var s=n.attr(a.data_attr);if(s)try{s=JSON.parse(s)}catch(t){}if((void 0===s||null==s)&&(s=n.attr(a.data_attr_alt)))try{s=JSON.parse(s)}catch(t){}if((void 0===s||null==s)&&(s=n.data(a.data)))try{s=JSON.parse(s)}catch(t){}var c=[i,n];return void 0!==s&&null!=s?c.push(s):c.push({}),c.push(e),o?t(o).trigger(a.event,c):t(document).trigger(a.event,c),(!0===r||"true"===r)&&void 0}}}},d=function(e){var n=t(this);if(n.length){var r=n.attr(c.propagation);if(void 0!==r&&null!=r||(r=n.attr(c.propagation_alt)),!0!==r&&"true"!==r&&(e.stopPropagation(),e.preventDefault()),!n.hasClass("disabled")&&!n.prop("disabled")){var i=n.attr(c.command);if(void 0!==i&&null!=i||(i=n.attr(c.command_alt)),i){var o=n.attr(c.target);void 0!==o&&null!=o||(o=n.attr(c.target_alt));var s=n.attr(c.data_attr);if(s)try{s=JSON.parse(s)}catch(t){}if((void 0===s||null==s)&&(s=n.attr(c.data_attr_alt)))try{s=JSON.parse(s)}catch(t){}if((void 0===s||null==s)&&(s=n.data(c.data)))try{s=JSON.parse(s)}catch(t){}n.getEvent=Object.methodize(e);var a=Math.ceil((n.index()+1)/2),l=n.closest(".fz-tabs").find(".tab-contents > .content").eq(a-1),u=[i,n,l];return void 0!==s&&null!=s?u.push(s):u.push({}),u.push(e),o?t(o).trigger(c.event,u):t(document).trigger(c.event,u),(!0===r||"true"===r)&&void 0}}}};e.on_focus=function(e,n,r,i,o){if(n=t(n),!0!==o&&(e.stopPropagation(),e.preventDefault()),!r||!n.is(":visible")||n.hasClass("disabled")||n.prop("disabled"))return!1;if(i)try{i=JSON.parse(i)}catch(t){}var s=[r,n];return void 0!==i&&null!=i?s.push(i):s.push({}),s.push(e),t(document).trigger(l.event,s),!0===o&&void 0};var g=function(e){var n=t(this);if(n.length){var r=n.attr(l.propagation);if(void 0!==r&&null!=r||(r=n.attr(l.propagation_alt)),!0!==r&&"true"!==r&&(e.stopPropagation(),e.preventDefault()),n.is(":visible")&&!n.hasClass("disabled")&&!n.prop("disabled")){var i=n.attr(l.command);if(void 0!==i&&null!=i||(i=n.attr(l.command_alt)),i){var o=n.attr(l.target);void 0!==o&&null!=o||(o=n.attr(l.target_alt));var s=n.attr(l.data_attr);if(s)try{s=JSON.parse(s)}catch(t){}if((void 0===s||null==s)&&(s=n.attr(l.data_attr_alt)))try{s=JSON.parse(s)}catch(t){}if((void 0===s||null==s)&&(s=n.data(l.data)))try{s=JSON.parse(s)}catch(t){}var a=[i,n];return void 0!==s&&null!=s?a.push(s):a.push({}),a.push(e),o?t(o).trigger(l.event,a):t(document).trigger(l.event,a),(!0===r||"true"===r)&&void 0}}}};e.on_blur=function(e,n,r,i,o){if(n=t(n),!0!==o&&(e.stopPropagation(),e.preventDefault()),!r||!n.is(":visible")||n.hasClass("disabled")||n.prop("disabled"))return!1;if(i)try{i=JSON.parse(i)}catch(t){}var s=[r,n];return void 0!==i&&null!=i?s.push(i):s.push({}),s.push(e),t(document).trigger(u.event,s),!0===o&&void 0};var m=function(e){var n=t(this);if(n.length){var r=n.attr(u.propagation);if(void 0!==r&&null!=r||(r=n.attr(u.propagation_alt)),!0!==r&&"true"!==r&&(e.stopPropagation(),e.preventDefault()),n.is(":visible")&&!n.hasClass("disabled")&&!n.prop("disabled")){var i=n.attr(u.command);if(void 0!==i&&null!=i||(i=n.attr(u.command_alt)),i){var o=n.attr(u.target);void 0!==o&&null!=o||(o=n.attr(u.target_alt));var s=n.attr(u.data_attr);if(s)try{s=JSON.parse(s)}catch(t){}if((void 0===s||null==s)&&(s=n.attr(u.data_attr_alt)))try{s=JSON.parse(s)}catch(t){}if((void 0===s||null==s)&&(s=n.data(u.data)))try{s=JSON.parse(s)}catch(t){}var a=[i,n];return void 0!==s&&null!=s?a.push(s):a.push({}),a.push(e),o?t(o).trigger(u.event,a):t(document).trigger(u.event,a),(!0===r||"true"===r)&&void 0}}}};t.registerUIEvent=function(e){t.unregisterUIEvent(e),n&&(t(e).on("input change",r.selector,h),t(e).on("click",o.selector,p),t(e).on("dblclick",a.selector,f),t(e).on("change",c.selector,d),t(e).on("focus",l.selector,g),t(e).on("blur",l.selector,m))},t.unregisterUIEvent=function(e){n&&(t(e).off("input change",r.selector,h),t(e).off("click",o.selector,p),t(e).off("dblclick",a.selector,f),t(e).off("change",c.selector,d),t(e).off("focus",l.selector,g),t(e).off("blur",l.selector,m))};var y=Array.of(c.event);n&&(y=Array.of(r.event,o.event,a.event,l.event,u.event,c.event)),t.registerUIEvent.includes=function(t){return y.includes(t)};var _=Class.define({create:function(e,r,i){if(this.router=i,this.uievent=r,this.handlers={},n){if(!t.registerUIEvent.includes(r))throw new Error("unsupported event ["+r+"]");t(e).on(r,function(t,n,r){if(this.handlers[n]){var i=Array.from(arguments).slice(2),o=Array.of(t);i.forEach((function(t){o.push(t)})),this.handlers[n].apply(r,o)}else s.warn("cannot find "+t.type+' handler on "'+e+'" command ['+n+"], registered handlers : ["+Object.keys(this.handlers)+"]");return t.stopPropagation(),t.preventDefault(),!1}.bind(this))}},route:function(t,e){return this.handlers[t]=e,this},on:function(t){return this.router.on(t)},onclick:function(){return this.router.onclick()},ondblclick:function(){return this.router.ondblclick()},onchange:function(){return this.router.onchange()},ontab:function(){return this.router.ontab()},onfocus:function(){return this.router.onfocus()},onblur:function(){return this.router.onblur()}});e.Router=Class.define({static:{__GLOBAL_ROUTERS_CACHE__:{},register:function(n){if(!e.Router.__GLOBAL_ROUTERS_CACHE__[n])return t.registerUIEvent(n),new Router(n)},unregister:function(n){e.Router.__GLOBAL_ROUTERS_CACHE__[n]&&(t.unregisterUIEvent(n),delete e.Router.__GLOBAL_ROUTERS_CACHE__[n])},watch:function(t){return e.Router.__GLOBAL_ROUTERS_CACHE__[t]?e.Router.__GLOBAL_ROUTERS_CACHE__[t]:e.Router.register(t)},onresize:function(e){Object.isFunction(e)&&(e=e.wrap((function(){return this.$proceed(),!0})),t(window).on("resize",e.debounce(50)))},ready:function(t){Object.isFunction(t)&&("loading"!==document.readyState?t.timeout(0):document.addEventListener("DOMContentLoaded",t))}},create:function(t){return this.events={},e.Router.__GLOBAL_ROUTERS_CACHE__[t]?e.Router.__GLOBAL_ROUTERS_CACHE__[t]:(this.target=t||document,e.Router.__GLOBAL_ROUTERS_CACHE__[t]=this,this)},on:function(t){return this.events[t]||(this.events[t]=new _(this.target,t,this)),this.events[t]},onclick:function(){return this.on("onclick")},ondblclick:function(){return this.on("ondblclick")},onchange:function(){return this.on("onchange")},oninput:function(){return this.on("oninput")},ontab:function(){return this.on("ontab")},onfocus:function(){return this.on("onfocus")},onblur:function(){return this.on("onblur")}}),n&&e.Router.register(document),i()}(i(),"undefined"!=typeof window?window:void 0),n.g.jQuery=n.g.$=i();var a=i()},16171:function(t,e,n){"use strict";n.d(e,{Z:function(){return l}});var r=n(15671),i=n(43144),o=n(66274),s=n(99359),a=(n(19601),n(69826),n(41539),n(31672),n(2490),n(59461),n(92222),n(56977),n(37921)),c=(n(59414),(0,s.Z)("xhr")),l=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.Z)(this,t),Object.defineProperty(this,c,{writable:!0,value:null}),this.options=Object.assign({text:"Loading...",opacity:.01,circle:!1,cancel:!1,cancelColor:null,seconds:10,mask:"#000",color:"#fff",progressColor:"#fff",zIndex:1e3,onCancel:Function.empty},n),this.options.seconds=1e3*this.options.seconds,this.options.opacity<.01&&(this.options.opacity=.01),this.$loading||(!0!==this.options.circle?this.$loading=(0,a.Z)(t.___content___()).appendTo(document.body):this.$loading=(0,a.Z)(t.___circle___()).appendTo(document.body)),this.$loading.find("mask").css({backgroundColor:this.options.mask,opacity:this.options.opacity}),this.$loading.css({zIndex:this.options.zIndex}),this.$text=this.$loading.find("span.loading"),this.$text.html(this.options.text),this.$text.css({color:this.options.color}),this.$progress=this.$loading.find(".progress"),this.$progressbar=this.$progress.find(".bar"),this.$progress_text=this.$loading.find(".text"),!0===this.options.cancel&&(this.$cancel=this.$loading.find(".cancel"),this.options.cancelColor&&this.$cancel.css({color:this.options.cancelColor}),this.$cancel.show(),this.$cancel.click((function(){e.options.onCancel()})))}return(0,i.Z)(t,[{key:"start",value:function(){return this.timer=function(){this.stop()}.bind(this).timeout(this.options.seconds),this.$loading.css({visibility:"visible"}),this}},{key:"stop",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];try{this.timer&&this.timer.stop(),this.timer=null,this.$loading&&this.$loading.css({visibility:"hidden"}),this.$progress&&(this.$progress.hide(),this.$progressbar.css({width:null}),this.$progressbar.html("")),this.$progress_text&&(this.$progress_text.hide(),this.$progress_text.html("")),t&&this.destroy()}catch(t){}}},{key:"destroy",value:function(){try{this.options&&(this.options=null),this.$text&&(this.$text=null),this.$progress&&(this.$progress=null,this.$progressbar=null),this.$loading&&this.$loading.remove(),this.$loading=null}catch(t){}}},{key:"text",set:function(t){try{this.$text&&t&&this.$text.html(t)}catch(t){}}},{key:"progress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=parseInt(e/n*100);try{this.$progress&&n?(this.$progress.show(),this.$progressbar.css({width:i+"%"}),this.$progressbar.html(i+"%"),!0===r&&(this.$progress_text.show(),this.$progress_text.css({color:this.options.progressColor}),this.$progress_text.html("".concat(t.storage(e)," of ").concat(t.storage(n))))):(this.$progress.hide(),this.$progressbar.css({width:null}),this.$progressbar.html(""),this.$progress_text.hide())}catch(t){}}},{key:"rate",value:function(){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],e=parseFloat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0);try{this.$progress&&(this.$progress.show(),this.$progressbar.css({width:e.toFixed(2)+"%"}),this.$progressbar.html(e.toFixed(2)+"%"),!0===t&&(this.$progress_text.show(),this.$progress_text.css({color:this.options.progressColor}),this.$progress_text.html("".concat(e.toFixed(2)," %"))))}catch(t){}}},{key:"xhr",set:function(t){(0,o.Z)(this,c)[c]=t}},{key:"abort",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];try{(0,o.Z)(this,c)[c]&&(0,o.Z)(this,c)[c].abort()}catch(t){}finally{this.stop(t)}}}],[{key:"show",value:function(e){var n=new t(e);return n.start(),n}},{key:"storage",value:function(t){return t/1024/1024/1024/1024>1024?(t/1024/1024/1024/1024/1024).toFixed(2)+" PB":t/1024/1024/1024>1024?(t/1024/1024/1024/1024).toFixed(2)+" TB":t/1024/1024>1024?(t/1024/1024/1024).toFixed(2)+" GB":t/1024>1024?(t/1024/1024).toFixed(2)+" MB":(t/1024).toFixed(2)+" KB"}},{key:"___content___",value:function(){return"<div class='ploading'>\n    <mask></mask>\n    <div class=\"cancel\"><i class=\"fa-solid fa-power-off\"></i></div>\n    <div class='cube-wrapper'>\n        <div class='cube-folding'>\n            <span class='leaf1'></span>\n            <span class='leaf2'></span>\n            <span class='leaf3'></span>\n            <span class='leaf4'></span>\n        </div>\n        <span class='loading' data-name='Loading'>Loading</span>\n        <div class=\"progress tiny\">\n            <div class=\"bar striped-red active\"></div>\n        </div>\n        <div class='text' data-name='progress'></div>\n    </div>\n</div>"}},{key:"___circle___",value:function(){return"<div class='ploading'>\n    <mask></mask>\n    <div class=\"cancel\"><i class=\"fa-solid fa-power-off\"></i></div>\n    <div class='cube-wrapper'>\n        <div class='circle-loading'></div>\n        <span class='loading' data-name='Loading'>Loading</span>\n        <div class=\"progress tiny\">\n            <div class=\"bar striped-red active\"></div>\n        </div>\n        <div class='text' data-name='progress'></div>\n    </div>\n</div>"}}]),t}()},54226:function(t,e,n){"use strict";var r=n(15671),i=n(43144),o=(n(73210),n(56977),n(9653),n(47042),n(41539),n(15581),n(2490),n(34514),n(54747),n(88674),n(66342),n(62962),n(23748),n(69826),n(31672),n(59461),n(19755)),s=n.n(o),a=(n(37030),function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,r.Z)(this,t),this.options=Object.merge({event:"input change",onFocus:Function.empty,onBlur:Function.empty,onChange:Function.empty},n),this.element=s()(e),this._readOption_(),!this.element.is("input"))throw TypeError("target is not <input>!");if(!this.element.is("[type=number]"))throw TypeError("target type is not number! please use [type=number]");""==this.element.val().trim()&&this.element.val(null!=this.options.defaultValue?this.options.defaultValue.toFixed(this.options.precision):""),this.options.onChange=this.options.onChange.bind(this.element),this.options.onBlur=this.options.onBlur.bind(this.element),this.options.onFocus=this.options.onFocus.bind(this.element),this._focus=this._focus_.bind(this),this._blur=this._blur_.bind(this),this._change=this._change_.bind(this),this.oldValue=this.element.val(),this.element.on("focus",this._focus),this.element.on("blur",this._blur),this.options.maxlength>0&&(this._maxlength=this._maxlength_.bind(this),this.element.on("input",this._maxlength)),this.element.on(this.options.event,this._change),this.form=this.element.closest("form")}return(0,i.Z)(t,[{key:"_readOption_",value:function(){if(this.options.strict="true"==this.element.attr("strict"),this.options.defaultValue=this.element.attr("default"),this.options.precision=this.element.attr("step"),this.options.min=this.element.attr("min"),this.options.max=this.element.attr("max"),this.options.maxlength=this.element.attr("maxlength"),!this.options.defaultValue||this.options.defaultValue.isEmpty()||isNaN(+this.options.defaultValue)?this.options.defaultValue=null:this.options.defaultValue=+this.options.defaultValue,!this.options.min||this.options.min.isEmpty()||isNaN(+this.options.min)?this.options.min=Number.MIN_VALUE:this.options.min=+this.options.min,!this.options.max||this.options.max.isEmpty()||isNaN(+this.options.max)?this.options.max=Number.MAX_VALUE:this.options.max=+this.options.max,!this.options.maxlength||this.options.maxlength.isEmpty()||isNaN(+this.options.maxlength)?this.options.maxlength=0:this.options.maxlength=+this.options.maxlength,!this.options.precision||this.options.precision.isEmpty()||isNaN(+this.options.precision)||-1==this.options.precision.indexOf("."))this.options.precision=0;else{var t=this.options.precision.substring(this.options.precision.indexOf(".")+1);t.isEmpty()||(this.options.precision=t.length)}}},{key:"_focus_",value:function(){this._set(this.element.val(),!0),this.options.onFocus()}},{key:"_blur_",value:function(){this._set(this.element.val(),!0),this.options.onBlur()}},{key:"_maxlength_",value:function(t){this.element.val(this.element.val().slice(0,this.options.maxlength))}},{key:"_change_",value:function(t){"-"!=t.originalEvent.data&&"+"!=t.originalEvent.data&&"."!=t.originalEvent.data&&this._set(this.element.val(),this.options.strict)}},{key:"_set",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t){if(null===this.options.defaultValue)return this.element.val(""),this.options.onChange(this.element,this.element.val(),this.oldValue,this.form),void(this.oldValue=this.element.val());t=this.options.defaultValue}t=new Number(t),e&&(t<this.options.min&&(t=this.options.min),t>this.options.max&&(t=this.options.max),this.element.val(t.toFixed(this.options.precision))),this.options.onChange(this.element,this.element.val(),this.oldValue,this.form),this.oldValue=this.element.val()}},{key:"lock",value:function(){this.element.lock()}},{key:"unlock",value:function(){this.element.unlock()}},{key:"disable",value:function(){this.element.disable()}},{key:"enable",value:function(){this.element.enable()}},{key:"refresh",value:function(){this._readOption_()}},{key:"min",set:function(t){t=new Number(t),isNaN(t)||(this.options.min=t)}},{key:"max",set:function(t){t=new Number(t),isNaN(t)||(this.options.max=t)}},{key:"value",get:function(){return this.element.val()},set:function(t){this._set(t)}}],[{key:"of",value:function(e){return new t(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}},{key:"init",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e?$(e).find("input[type=number]").toArray().forEach((function(e){return t.of(e,n)})):s()("input[type=number]").toArray().forEach((function(e){return t.of(e,n)}))}}]),t}());e.Z=a},35983:function(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_89__=__webpack_require__(71002),core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(32564),core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(47042),core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(92222),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(19601),core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(47941),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_object_is_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(43304),core_js_modules_es_object_is_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_object_is_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_array_from_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(91038),core_js_modules_es_array_from_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_array_from_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(78783),core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(41539),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(39714),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(9653),core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_array_of_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(26572),core_js_modules_es_array_of_js__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_array_of_js__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es_array_copy_within_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(50545),core_js_modules_es_array_copy_within_js__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es_array_copy_within_js__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_es_array_fill_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(43290),core_js_modules_es_array_fill_js__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_es_array_fill_js__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(57327),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_14__),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(69826),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_15__),core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(34553),core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(core_js_modules_es_array_find_index_js__WEBPACK_IMPORTED_MODULE_16__),core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(26699),core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_17__),core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(66992),core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_18__),core_js_modules_esnext_async_iterator_for_each_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(15581),core_js_modules_esnext_async_iterator_for_each_js__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(core_js_modules_esnext_async_iterator_for_each_js__WEBPACK_IMPORTED_MODULE_19__),core_js_modules_esnext_iterator_constructor_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(2490),core_js_modules_esnext_iterator_constructor_js__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(core_js_modules_esnext_iterator_constructor_js__WEBPACK_IMPORTED_MODULE_20__),core_js_modules_esnext_iterator_for_each_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(34514),core_js_modules_esnext_iterator_for_each_js__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(core_js_modules_esnext_iterator_for_each_js__WEBPACK_IMPORTED_MODULE_21__),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(54747),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_22__),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(21249),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_23__),core_js_modules_es_array_reduce_js__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(85827),core_js_modules_es_array_reduce_js__WEBPACK_IMPORTED_MODULE_24___default=__webpack_require__.n(core_js_modules_es_array_reduce_js__WEBPACK_IMPORTED_MODULE_24__),core_js_modules_es_array_reduce_right_js__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(96644),core_js_modules_es_array_reduce_right_js__WEBPACK_IMPORTED_MODULE_25___default=__webpack_require__.n(core_js_modules_es_array_reduce_right_js__WEBPACK_IMPORTED_MODULE_25__),core_js_modules_esnext_async_iterator_reduce_js__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(25387),core_js_modules_esnext_async_iterator_reduce_js__WEBPACK_IMPORTED_MODULE_26___default=__webpack_require__.n(core_js_modules_esnext_async_iterator_reduce_js__WEBPACK_IMPORTED_MODULE_26__),core_js_modules_esnext_iterator_reduce_js__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(72608),core_js_modules_esnext_iterator_reduce_js__WEBPACK_IMPORTED_MODULE_27___default=__webpack_require__.n(core_js_modules_esnext_iterator_reduce_js__WEBPACK_IMPORTED_MODULE_27__),core_js_modules_es_array_buffer_slice_js__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(39575),core_js_modules_es_array_buffer_slice_js__WEBPACK_IMPORTED_MODULE_28___default=__webpack_require__.n(core_js_modules_es_array_buffer_slice_js__WEBPACK_IMPORTED_MODULE_28__),core_js_modules_es_typed_array_uint8_array_js__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(82472),core_js_modules_es_typed_array_uint8_array_js__WEBPACK_IMPORTED_MODULE_29___default=__webpack_require__.n(core_js_modules_es_typed_array_uint8_array_js__WEBPACK_IMPORTED_MODULE_29__),core_js_modules_es_typed_array_copy_within_js__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(92990),core_js_modules_es_typed_array_copy_within_js__WEBPACK_IMPORTED_MODULE_30___default=__webpack_require__.n(core_js_modules_es_typed_array_copy_within_js__WEBPACK_IMPORTED_MODULE_30__),core_js_modules_es_typed_array_every_js__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(18927),core_js_modules_es_typed_array_every_js__WEBPACK_IMPORTED_MODULE_31___default=__webpack_require__.n(core_js_modules_es_typed_array_every_js__WEBPACK_IMPORTED_MODULE_31__),core_js_modules_es_typed_array_fill_js__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(33105),core_js_modules_es_typed_array_fill_js__WEBPACK_IMPORTED_MODULE_32___default=__webpack_require__.n(core_js_modules_es_typed_array_fill_js__WEBPACK_IMPORTED_MODULE_32__),core_js_modules_es_typed_array_filter_js__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(35035),core_js_modules_es_typed_array_filter_js__WEBPACK_IMPORTED_MODULE_33___default=__webpack_require__.n(core_js_modules_es_typed_array_filter_js__WEBPACK_IMPORTED_MODULE_33__),core_js_modules_es_typed_array_find_js__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(74345),core_js_modules_es_typed_array_find_js__WEBPACK_IMPORTED_MODULE_34___default=__webpack_require__.n(core_js_modules_es_typed_array_find_js__WEBPACK_IMPORTED_MODULE_34__),core_js_modules_es_typed_array_find_index_js__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(7174),core_js_modules_es_typed_array_find_index_js__WEBPACK_IMPORTED_MODULE_35___default=__webpack_require__.n(core_js_modules_es_typed_array_find_index_js__WEBPACK_IMPORTED_MODULE_35__),core_js_modules_es_typed_array_for_each_js__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(32846),core_js_modules_es_typed_array_for_each_js__WEBPACK_IMPORTED_MODULE_36___default=__webpack_require__.n(core_js_modules_es_typed_array_for_each_js__WEBPACK_IMPORTED_MODULE_36__),core_js_modules_es_typed_array_includes_js__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(44731),core_js_modules_es_typed_array_includes_js__WEBPACK_IMPORTED_MODULE_37___default=__webpack_require__.n(core_js_modules_es_typed_array_includes_js__WEBPACK_IMPORTED_MODULE_37__),core_js_modules_es_typed_array_index_of_js__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(77209),core_js_modules_es_typed_array_index_of_js__WEBPACK_IMPORTED_MODULE_38___default=__webpack_require__.n(core_js_modules_es_typed_array_index_of_js__WEBPACK_IMPORTED_MODULE_38__),core_js_modules_es_typed_array_iterator_js__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(96319),core_js_modules_es_typed_array_iterator_js__WEBPACK_IMPORTED_MODULE_39___default=__webpack_require__.n(core_js_modules_es_typed_array_iterator_js__WEBPACK_IMPORTED_MODULE_39__),core_js_modules_es_typed_array_join_js__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(58867),core_js_modules_es_typed_array_join_js__WEBPACK_IMPORTED_MODULE_40___default=__webpack_require__.n(core_js_modules_es_typed_array_join_js__WEBPACK_IMPORTED_MODULE_40__),core_js_modules_es_typed_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(37789),core_js_modules_es_typed_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_41___default=__webpack_require__.n(core_js_modules_es_typed_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_41__),core_js_modules_es_typed_array_map_js__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(33739),core_js_modules_es_typed_array_map_js__WEBPACK_IMPORTED_MODULE_42___default=__webpack_require__.n(core_js_modules_es_typed_array_map_js__WEBPACK_IMPORTED_MODULE_42__),core_js_modules_es_typed_array_reduce_js__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__(29368),core_js_modules_es_typed_array_reduce_js__WEBPACK_IMPORTED_MODULE_43___default=__webpack_require__.n(core_js_modules_es_typed_array_reduce_js__WEBPACK_IMPORTED_MODULE_43__),core_js_modules_es_typed_array_reduce_right_js__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__(14483),core_js_modules_es_typed_array_reduce_right_js__WEBPACK_IMPORTED_MODULE_44___default=__webpack_require__.n(core_js_modules_es_typed_array_reduce_right_js__WEBPACK_IMPORTED_MODULE_44__),core_js_modules_es_typed_array_reverse_js__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__(12056),core_js_modules_es_typed_array_reverse_js__WEBPACK_IMPORTED_MODULE_45___default=__webpack_require__.n(core_js_modules_es_typed_array_reverse_js__WEBPACK_IMPORTED_MODULE_45__),core_js_modules_es_typed_array_set_js__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__(3462),core_js_modules_es_typed_array_set_js__WEBPACK_IMPORTED_MODULE_46___default=__webpack_require__.n(core_js_modules_es_typed_array_set_js__WEBPACK_IMPORTED_MODULE_46__),core_js_modules_es_typed_array_slice_js__WEBPACK_IMPORTED_MODULE_47__=__webpack_require__(30678),core_js_modules_es_typed_array_slice_js__WEBPACK_IMPORTED_MODULE_47___default=__webpack_require__.n(core_js_modules_es_typed_array_slice_js__WEBPACK_IMPORTED_MODULE_47__),core_js_modules_es_typed_array_some_js__WEBPACK_IMPORTED_MODULE_48__=__webpack_require__(27462),core_js_modules_es_typed_array_some_js__WEBPACK_IMPORTED_MODULE_48___default=__webpack_require__.n(core_js_modules_es_typed_array_some_js__WEBPACK_IMPORTED_MODULE_48__),core_js_modules_es_typed_array_sort_js__WEBPACK_IMPORTED_MODULE_49__=__webpack_require__(33824),core_js_modules_es_typed_array_sort_js__WEBPACK_IMPORTED_MODULE_49___default=__webpack_require__.n(core_js_modules_es_typed_array_sort_js__WEBPACK_IMPORTED_MODULE_49__),core_js_modules_es_typed_array_subarray_js__WEBPACK_IMPORTED_MODULE_50__=__webpack_require__(55021),core_js_modules_es_typed_array_subarray_js__WEBPACK_IMPORTED_MODULE_50___default=__webpack_require__.n(core_js_modules_es_typed_array_subarray_js__WEBPACK_IMPORTED_MODULE_50__),core_js_modules_es_typed_array_to_locale_string_js__WEBPACK_IMPORTED_MODULE_51__=__webpack_require__(12974),core_js_modules_es_typed_array_to_locale_string_js__WEBPACK_IMPORTED_MODULE_51___default=__webpack_require__.n(core_js_modules_es_typed_array_to_locale_string_js__WEBPACK_IMPORTED_MODULE_51__),core_js_modules_es_typed_array_to_string_js__WEBPACK_IMPORTED_MODULE_52__=__webpack_require__(15016),core_js_modules_es_typed_array_to_string_js__WEBPACK_IMPORTED_MODULE_52___default=__webpack_require__.n(core_js_modules_es_typed_array_to_string_js__WEBPACK_IMPORTED_MODULE_52__),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_53__=__webpack_require__(69600),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_53___default=__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_53__),core_js_modules_es_number_max_safe_integer_js__WEBPACK_IMPORTED_MODULE_54__=__webpack_require__(44363),core_js_modules_es_number_max_safe_integer_js__WEBPACK_IMPORTED_MODULE_54___default=__webpack_require__.n(core_js_modules_es_number_max_safe_integer_js__WEBPACK_IMPORTED_MODULE_54__),core_js_modules_es_number_min_safe_integer_js__WEBPACK_IMPORTED_MODULE_55__=__webpack_require__(55994),core_js_modules_es_number_min_safe_integer_js__WEBPACK_IMPORTED_MODULE_55___default=__webpack_require__.n(core_js_modules_es_number_min_safe_integer_js__WEBPACK_IMPORTED_MODULE_55__),core_js_modules_es_number_is_finite_js__WEBPACK_IMPORTED_MODULE_56__=__webpack_require__(35192),core_js_modules_es_number_is_finite_js__WEBPACK_IMPORTED_MODULE_56___default=__webpack_require__.n(core_js_modules_es_number_is_finite_js__WEBPACK_IMPORTED_MODULE_56__),core_js_modules_es_number_is_integer_js__WEBPACK_IMPORTED_MODULE_57__=__webpack_require__(33161),core_js_modules_es_number_is_integer_js__WEBPACK_IMPORTED_MODULE_57___default=__webpack_require__.n(core_js_modules_es_number_is_integer_js__WEBPACK_IMPORTED_MODULE_57__),core_js_modules_es_number_is_nan_js__WEBPACK_IMPORTED_MODULE_58__=__webpack_require__(44048),core_js_modules_es_number_is_nan_js__WEBPACK_IMPORTED_MODULE_58___default=__webpack_require__.n(core_js_modules_es_number_is_nan_js__WEBPACK_IMPORTED_MODULE_58__),core_js_modules_es_number_is_safe_integer_js__WEBPACK_IMPORTED_MODULE_59__=__webpack_require__(78285),core_js_modules_es_number_is_safe_integer_js__WEBPACK_IMPORTED_MODULE_59___default=__webpack_require__.n(core_js_modules_es_number_is_safe_integer_js__WEBPACK_IMPORTED_MODULE_59__),core_js_modules_es_number_parse_float_js__WEBPACK_IMPORTED_MODULE_60__=__webpack_require__(61874),core_js_modules_es_number_parse_float_js__WEBPACK_IMPORTED_MODULE_60___default=__webpack_require__.n(core_js_modules_es_number_parse_float_js__WEBPACK_IMPORTED_MODULE_60__),core_js_modules_es_number_parse_int_js__WEBPACK_IMPORTED_MODULE_61__=__webpack_require__(9494),core_js_modules_es_number_parse_int_js__WEBPACK_IMPORTED_MODULE_61___default=__webpack_require__.n(core_js_modules_es_number_parse_int_js__WEBPACK_IMPORTED_MODULE_61__),core_js_modules_web_url_to_json_js__WEBPACK_IMPORTED_MODULE_62__=__webpack_require__(83753),core_js_modules_web_url_to_json_js__WEBPACK_IMPORTED_MODULE_62___default=__webpack_require__.n(core_js_modules_web_url_to_json_js__WEBPACK_IMPORTED_MODULE_62__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_63__=__webpack_require__(74916),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_63___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_63__),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_64__=__webpack_require__(15306),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_64___default=__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_64__),core_js_modules_esnext_async_iterator_filter_js__WEBPACK_IMPORTED_MODULE_65__=__webpack_require__(88449),core_js_modules_esnext_async_iterator_filter_js__WEBPACK_IMPORTED_MODULE_65___default=__webpack_require__.n(core_js_modules_esnext_async_iterator_filter_js__WEBPACK_IMPORTED_MODULE_65__),core_js_modules_esnext_iterator_filter_js__WEBPACK_IMPORTED_MODULE_66__=__webpack_require__(59849),core_js_modules_esnext_iterator_filter_js__WEBPACK_IMPORTED_MODULE_66___default=__webpack_require__.n(core_js_modules_esnext_iterator_filter_js__WEBPACK_IMPORTED_MODULE_66__),core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_67__=__webpack_require__(73210),core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_67___default=__webpack_require__.n(core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_67__),core_js_modules_es_string_repeat_js__WEBPACK_IMPORTED_MODULE_68__=__webpack_require__(82481),core_js_modules_es_string_repeat_js__WEBPACK_IMPORTED_MODULE_68___default=__webpack_require__.n(core_js_modules_es_string_repeat_js__WEBPACK_IMPORTED_MODULE_68__),core_js_modules_es_string_pad_start_js__WEBPACK_IMPORTED_MODULE_69__=__webpack_require__(83112),core_js_modules_es_string_pad_start_js__WEBPACK_IMPORTED_MODULE_69___default=__webpack_require__.n(core_js_modules_es_string_pad_start_js__WEBPACK_IMPORTED_MODULE_69__),core_js_modules_es_string_pad_end_js__WEBPACK_IMPORTED_MODULE_70__=__webpack_require__(66528),core_js_modules_es_string_pad_end_js__WEBPACK_IMPORTED_MODULE_70___default=__webpack_require__.n(core_js_modules_es_string_pad_end_js__WEBPACK_IMPORTED_MODULE_70__),core_js_modules_es_string_trim_start_js__WEBPACK_IMPORTED_MODULE_71__=__webpack_require__(55674),core_js_modules_es_string_trim_start_js__WEBPACK_IMPORTED_MODULE_71___default=__webpack_require__.n(core_js_modules_es_string_trim_start_js__WEBPACK_IMPORTED_MODULE_71__),core_js_modules_es_string_trim_end_js__WEBPACK_IMPORTED_MODULE_72__=__webpack_require__(48702),core_js_modules_es_string_trim_end_js__WEBPACK_IMPORTED_MODULE_72___default=__webpack_require__.n(core_js_modules_es_string_trim_end_js__WEBPACK_IMPORTED_MODULE_72__),core_js_modules_es_math_sign_js__WEBPACK_IMPORTED_MODULE_73__=__webpack_require__(52420),core_js_modules_es_math_sign_js__WEBPACK_IMPORTED_MODULE_73___default=__webpack_require__.n(core_js_modules_es_math_sign_js__WEBPACK_IMPORTED_MODULE_73__),core_js_modules_es_math_acosh_js__WEBPACK_IMPORTED_MODULE_74__=__webpack_require__(99752),core_js_modules_es_math_acosh_js__WEBPACK_IMPORTED_MODULE_74___default=__webpack_require__.n(core_js_modules_es_math_acosh_js__WEBPACK_IMPORTED_MODULE_74__),core_js_modules_es_math_asinh_js__WEBPACK_IMPORTED_MODULE_75__=__webpack_require__(82376),core_js_modules_es_math_asinh_js__WEBPACK_IMPORTED_MODULE_75___default=__webpack_require__.n(core_js_modules_es_math_asinh_js__WEBPACK_IMPORTED_MODULE_75__),core_js_modules_es_math_cbrt_js__WEBPACK_IMPORTED_MODULE_76__=__webpack_require__(23484),core_js_modules_es_math_cbrt_js__WEBPACK_IMPORTED_MODULE_76___default=__webpack_require__.n(core_js_modules_es_math_cbrt_js__WEBPACK_IMPORTED_MODULE_76__),core_js_modules_es_math_clz32_js__WEBPACK_IMPORTED_MODULE_77__=__webpack_require__(2388),core_js_modules_es_math_clz32_js__WEBPACK_IMPORTED_MODULE_77___default=__webpack_require__.n(core_js_modules_es_math_clz32_js__WEBPACK_IMPORTED_MODULE_77__),core_js_modules_es_math_cosh_js__WEBPACK_IMPORTED_MODULE_78__=__webpack_require__(88621),core_js_modules_es_math_cosh_js__WEBPACK_IMPORTED_MODULE_78___default=__webpack_require__.n(core_js_modules_es_math_cosh_js__WEBPACK_IMPORTED_MODULE_78__),core_js_modules_es_math_expm1_js__WEBPACK_IMPORTED_MODULE_79__=__webpack_require__(60403),core_js_modules_es_math_expm1_js__WEBPACK_IMPORTED_MODULE_79___default=__webpack_require__.n(core_js_modules_es_math_expm1_js__WEBPACK_IMPORTED_MODULE_79__),core_js_modules_es_math_fround_js__WEBPACK_IMPORTED_MODULE_80__=__webpack_require__(84755),core_js_modules_es_math_fround_js__WEBPACK_IMPORTED_MODULE_80___default=__webpack_require__.n(core_js_modules_es_math_fround_js__WEBPACK_IMPORTED_MODULE_80__),core_js_modules_es_math_hypot_js__WEBPACK_IMPORTED_MODULE_81__=__webpack_require__(25438),core_js_modules_es_math_hypot_js__WEBPACK_IMPORTED_MODULE_81___default=__webpack_require__.n(core_js_modules_es_math_hypot_js__WEBPACK_IMPORTED_MODULE_81__),core_js_modules_es_math_imul_js__WEBPACK_IMPORTED_MODULE_82__=__webpack_require__(90332),core_js_modules_es_math_imul_js__WEBPACK_IMPORTED_MODULE_82___default=__webpack_require__.n(core_js_modules_es_math_imul_js__WEBPACK_IMPORTED_MODULE_82__),core_js_modules_es_math_log10_js__WEBPACK_IMPORTED_MODULE_83__=__webpack_require__(40658),core_js_modules_es_math_log10_js__WEBPACK_IMPORTED_MODULE_83___default=__webpack_require__.n(core_js_modules_es_math_log10_js__WEBPACK_IMPORTED_MODULE_83__),core_js_modules_es_math_log1p_js__WEBPACK_IMPORTED_MODULE_84__=__webpack_require__(40197),core_js_modules_es_math_log1p_js__WEBPACK_IMPORTED_MODULE_84___default=__webpack_require__.n(core_js_modules_es_math_log1p_js__WEBPACK_IMPORTED_MODULE_84__),core_js_modules_es_math_log2_js__WEBPACK_IMPORTED_MODULE_85__=__webpack_require__(44914),core_js_modules_es_math_log2_js__WEBPACK_IMPORTED_MODULE_85___default=__webpack_require__.n(core_js_modules_es_math_log2_js__WEBPACK_IMPORTED_MODULE_85__),core_js_modules_es_math_sinh_js__WEBPACK_IMPORTED_MODULE_86__=__webpack_require__(60160),core_js_modules_es_math_sinh_js__WEBPACK_IMPORTED_MODULE_86___default=__webpack_require__.n(core_js_modules_es_math_sinh_js__WEBPACK_IMPORTED_MODULE_86__),core_js_modules_es_math_tanh_js__WEBPACK_IMPORTED_MODULE_87__=__webpack_require__(60970),core_js_modules_es_math_tanh_js__WEBPACK_IMPORTED_MODULE_87___default=__webpack_require__.n(core_js_modules_es_math_tanh_js__WEBPACK_IMPORTED_MODULE_87__),core_js_modules_es_math_trunc_js__WEBPACK_IMPORTED_MODULE_88__=__webpack_require__(73689),core_js_modules_es_math_trunc_js__WEBPACK_IMPORTED_MODULE_88___default=__webpack_require__.n(core_js_modules_es_math_trunc_js__WEBPACK_IMPORTED_MODULE_88__),Temp,toStr,isCallable,maxSafeInteger,toLength,toString,isArray,escMap,escFunc,escRE;if(function(t){for(var e=0,n=["ms","moz","webkit","o"],r=0;r<n.length&&!t.requestAnimationFrame;++r)t.requestAnimationFrame=t[n[r]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[n[r]+"CancelAnimationFrame"]||t[n[r]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(n,r){var i=(new Date).getTime(),o=Math.max(0,16-(i-e)),s=t.setTimeout((function(){n(i+o)}),o);return e=i+o,s}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){clearTimeout(t)})}("undefined"!=typeof window?window:void 0),"undefined"==typeof HTMLElement||HTMLElement.prototype.insertAdjacentElement||(HTMLElement.prototype.insertAdjacentElement=function(t,e){switch(t){case"beforeBegin":this.parentNode.insertBefore(e,this);break;case"afterBegin":this.insertBefore(e,this.firstChild);break;case"beforeEnd":this.appendChild(e);break;case"afterEnd":this.nextSibling?this.parentNode.insertBefore(e,this.nextSibling):this.parentNode.appendChild(e)}}),"undefined"==typeof HTMLElement||HTMLElement.prototype.insertAdjacentHTML||(HTMLElement.prototype.insertAdjacentHTML=function(t,e){var n=this.ownerDocument.createRange();n.setStartBefore(this);var r=n.createContextualFragment(e);this.insertAdjacentElement(t,r)}),"undefined"==typeof HTMLElement||HTMLElement.prototype.insertAdjacentText||(HTMLElement.prototype.insertAdjacentText=function(t,e){var n=document.createTextNode(e);this.insertAdjacentElement(t,n)}),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r?this:t,e.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(r.prototype=this.prototype),i.prototype=new r,i}),"function"!=typeof Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}),"function"!=typeof Object.create&&(Object.create=(Temp=function(){},function(t,e){if(t!==Object(t)&&null!==t)throw TypeError("Argument must be an object, or null");Temp.prototype=t||{};var n=new Temp;return Temp.prototype=null,void 0!==e&&Object.defineProperties(n,e),null===t&&(n.__proto__=null),n})),Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if("object"!==(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_89__.Z)(i)&&("function"!=typeof i||null===i))throw new TypeError("Object.keys called on non-object");var o,s,a=[];for(o in i)t.call(i,o)&&a.push(o);if(e)for(s=0;s<r;s++)t.call(i,n[s])&&a.push(n[s]);return a}}()),Object.is||(Object.is=function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}),Array.clone||(Array.clone=function(t){return Array.isArray(t)?t.slice(0):[]}),Array.from||(Array.from=(toStr=Object.prototype.toString,isCallable=function(t){return"function"==typeof t||"[object Function]"===toStr.call(t)},maxSafeInteger=Math.pow(2,53)-1,toLength=function(t){var e=function(t){var e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(e>0?1:-1)*Math.floor(Math.abs(e)):e}(t);return Math.min(Math.max(e,0),maxSafeInteger)},function(t){var e=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var n,r=arguments.length>1?arguments[1]:void 0;if(void 0!==r){if(!isCallable(r))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(n=arguments[2])}for(var i,o=toLength(e.length),s=isCallable(this)?Object(new this(o)):new Array(o),a=0;a<o;)i=e[a],s[a]=r?void 0===n?r(i,a):r.call(n,i,a):i,a+=1;return s.length=o,s})),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),Array.of||(Array.of=function(){return Array.prototype.slice.call(arguments)}),Array.prototype.copyWithin||(Array.prototype.copyWithin=function(t,e){if(null==this)throw new TypeError("this is null or not defined");var n=Object(this),r=n.length>>>0,i=t>>0,o=i<0?Math.max(r+i,0):Math.min(i,r),s=e>>0,a=s<0?Math.max(r+s,0):Math.min(s,r),c=arguments[2],l=void 0===c?r:c>>0,u=l<0?Math.max(r+l,0):Math.min(l,r),h=Math.min(u-a,r-o),p=1;for(a<o&&o<a+h&&(p=-1,a+=h-1,o+=h-1);h>0;)a in n?n[o]=n[a]:delete n[o],a+=p,o+=p,h--;return n}),Array.prototype.every||(Array.prototype.every=function(t,e){var n,r;if(null==this)throw new TypeError("this is null or not defined");var i=Object(this),o=i.length>>>0;if("function"!=typeof t)throw new TypeError;for(arguments.length>1&&(n=e),r=0;r<o;){var s=void 0;if(r in i)if(s=i[r],!t.call(n,s,r,i))return!1;r++}return!0}),Array.prototype.fill||(Array.prototype.fill=function(t){if(null==this)throw new TypeError("this is null or not defined");for(var e=Object(this),n=e.length>>>0,r=arguments[1]>>0,i=r<0?Math.max(n+r,0):Math.min(r,n),o=arguments[2],s=void 0===o?n:o>>0,a=s<0?Math.max(n+s,0):Math.min(s,n);i<a;)e[i]=t,i++;return e}),Array.prototype.filter||(Array.prototype.filter=function(t){if(null==this)throw new TypeError;var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var r=[],i=arguments.length>=2?arguments[1]:void 0,o=0;o<n;o++)if(o in e){var s=e[o];t.call(i,s,o,e)&&r.push(s)}return r}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),r=n.length>>>0,i=arguments[1],o=0;o<r;o++)if(e=n[o],t.call(i,e,o,n))return e}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t){if(null==this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),r=n.length>>>0,i=arguments[1],o=0;o<r;o++)if(e=n[o],t.call(i,e,o,n))return o;return-1},enumerable:!1,configurable:!1,writable:!1}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,r;if(null===this)throw new TypeError(" this is null or not defined");var i=Object(this),o=i.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(n=e),r=0;r<o;){var s=void 0;r in i&&(s=i[r],t.call(n,s,r,i)),r++}}),Array.prototype.includes||(Array.prototype.includes=function(t){if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");var e=Object(this),n=parseInt(e.length,10)||0;if(0===n)return!1;var r,i,o=parseInt(arguments[1],10)||0;for(o>=0?r=o:(r=n+o)<0&&(r=0);r<n;){if(t===(i=e[r])||t!=t&&i!=i)return!0;r++}return!1}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var n;if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),i=r.length>>>0;if(0===i)return-1;var o=0|e;if(o>=i)return-1;for(n=Math.max(o>=0?o:i-Math.abs(o),0);n<i;){if(n in r&&r[n]===t)return n;n++}return-1}),Array.prototype.keys||(Array.prototype.keys=function(){var t=[];return this.forEach((function(e,n){null!=e&&null!=e&&t.push(n)})),t}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(t){if(null==this)throw new TypeError;var e,n,r=Object(this),i=r.length>>>0;if(0===i)return-1;for(e=i-1,arguments.length>1&&((e=Number(arguments[1]))!=e?e=0:0!=e&&e!=1/0&&e!=-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e)))),n=e>=0?Math.min(e,i-1):i-Math.abs(e);n>=0;n--)if(n in r&&r[n]===t)return n;return-1}),Array.prototype.map||(Array.prototype.map=function(t,e){var n,r,i;if(null==this)throw new TypeError(" this is null or not defined");var o=Object(this),s=o.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(n=e),r=new Array(s),i=0;i<s;){var a=void 0,c=void 0;i in o&&(a=o[i],c=t.call(n,a,i,o),r[i]=c),i++}return r}),Array.prototype.reduce||(Array.prototype.reduce=function(t){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var e,n=Object(this),r=n.length>>>0,i=0;if(2==arguments.length)e=arguments[1];else{for(;i<r&&!(i in n);)i++;if(i>=r)throw new TypeError("Reduce of empty array with no initial value");e=n[i++]}for(;i<r;i++)i in n&&(e=t(e,n[i],i,n));return e}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(t){if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var e,n=Object(this),r=(n.length>>>0)-1;if(arguments.length>=2)e=arguments[1];else{for(;r>=0&&!(r in n);)r--;if(r<0)throw new TypeError("Reduce of empty array with no initial value");e=n[r--]}for(;r>=0;r--)r in n&&(e=t(e,n[r],r,n));return e}),function(){var t=Array.prototype.slice;try{t.call(document.documentElement)}catch(e){Array.prototype.slice=function(e,n){if(n=void 0!==n?n:this.length,"[object Array]"===Object.prototype.toString.call(this))return t.call(this,e,n);var r,i,o=[],s=this.length,a=e||0;a=a>=0?a:Math.max(0,s+a);var c="number"==typeof n?Math.min(n,s):s;if(n<0&&(c=s+n),(i=c-a)>0)if(o=new Array(i),this.charAt)for(r=0;r<i;r++)o[r]=this.charAt(a+r);else for(r=0;r<i;r++)o[r]=this[a+r];return o}}}(),Array.prototype.some||(Array.prototype.some=function(t){if(null==this)throw new TypeError("Array.prototype.some called on null or undefined");if("function"!=typeof t)throw new TypeError;for(var e=Object(this),n=e.length>>>0,r=arguments.length>=2?arguments[1]:void 0,i=0;i<n;i++)if(i in e&&t.call(r,e[i],i,e))return!0;return!1}),!Array.prototype.flatten){var _flatten=function t(e){return e.reduce((function(e,n){return e.concat(Array.isArray(n)?t(n):n)}),[])};Array.prototype.flatten=function(){if(null==this)throw new TypeError("Array.prototype.flatten called on null or undefined");return _flatten(this)}}Uint8Array&&!Uint8Array.prototype.toBase64&&(Uint8Array.prototype.toBase64=function(){var t,e,n,r=[],i=this.length;for(t=0;t<i;t+=10240)e=Math.min(10240,i-t),n=this.subarray(t,t+e),r.push(String.fromCharCode.apply(null,n));return btoa(r.join(""))}),Number.MAX_SAFE_INTEGER||(Number.MAX_SAFE_INTEGER=Math.pow(2,53)-1),Number.MIN_SAFE_INTEGER||(Number.MIN_SAFE_INTEGER=-(Math.pow(2,53)-1)),Number.isFinite||(Number.isFinite=function(t){return"number"==typeof t&&isFinite(t)}),Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),Number.isNaN||(Number.isNaN=function(t){return"number"==typeof t&&isNaN(t)}),Number.isSafeInteger||(Number.isSafeInteger=function(t){return Number.isInteger(t)&&Math.abs(t)<=Number.MAX_SAFE_INTEGER}),Number.parseFloat||(Number.parseFloat=parseFloat),Number.parseInt||(Number.parseInt=parseInt),window.JSON||(window.JSON={parse:function parse(sJSON){return eval("("+sJSON+")")},stringify:(toString=Object.prototype.toString,isArray=Array.isArray||function(t){return"[object Array]"===toString.call(t)},escMap={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},escFunc=function(t){return escMap[t]||"\\u"+(t.charCodeAt(0)+65536).toString(16).substr(1)},escRE=/[\\"\u0000-\u001F\u2028\u2029]/g,function t(e){if(null==e)return"null";if("number"==typeof e)return isFinite(e)?e.toString():"null";if("boolean"==typeof e)return e.toString();if("object"===(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_89__.Z)(e)){if("function"==typeof e.toJSON)return t(e.toJSON());if(isArray(e)){for(var n="[",r=0;r<e.length;r++)n+=(r?", ":"")+t(e[r]);return n+"]"}if("[object Object]"===toString.call(e)){var i=[];for(var o in e)e.hasOwnProperty(o)&&i.push(t(o)+": "+t(e[o]));return"{"+i.join(", ")+"}"}}return'"'+e.toString().replace(escRE,escFunc)+'"'})}),JSON.isEmpty||(JSON.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return JSON.stringify(t)===JSON.stringify({})}),Array.serializeJSONArrayToPost||(Array.serializeJSONArrayToPost=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in t)if(Object.isArray(t[n])){var r=t[n];if(e&&(r=r.filter((function(t){return void 0!==t&&!Object.isString(t)||void 0!==t&&Object.isString(t)&&""!==t.trim()}))),delete t[n],r&&r.length>0)for(var i=0;i<r.length;i++)t[n+"["+i+"]"]=r[i]}return t}),String.prototype.repeat||(String.prototype.repeat=function(t){if(null==this)throw new TypeError("can't convert "+this+" to object");var e=""+this;if((t=+t)!=t&&(t=0),t<0)throw new RangeError("repeat count must be non-negative");if(t==1/0)throw new RangeError("repeat count must be less than infinity");if(t=Math.floor(t),0==e.length||0==t)return"";if(e.length*t>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");for(var n="",r=0;r<t;r++)n+=e;return n}),String.prototype.padStart||(String.prototype.padStart=function(t,e){return t>>=0,e=String(e||" "),this.length>t?String(this):((t-=this.length)>e.length&&(e+=e.repeat(t/e.length)),e.slice(0,t)+String(this))}),String.prototype.padEnd||(String.prototype.padEnd=function(t,e){return t>>=0,e=String(e||" "),this.length>t?String(this):((t-=this.length)>e.length&&(e+=e.repeat(t/e.length)),String(this)+e.slice(0,t))}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.replace(/^[\s\uFEFF\xA0]+/g,"")}),String.prototype.trimRight||(String.prototype.trimRight=function(){return this.replace(/[\s\uFEFF\xA0]+$/g,"")}),Array.new||(Array.new=function(t){var e=[];return e.length=parseInt(t)||0,e}),Array.prototype.traverse||(Array.prototype.traverse=function(t,e){var n,r,i;if(null==this)throw new TypeError(" this is null or not defined");var o=Object(this),s=o.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(n=e),r=new Array(s),i=0;i<s;){var a,c;a=o[i],c=t.call(n,a,i,o),r[i]=c,i++}return r}),Function.prototype.times||(Function.prototype.times=function(){var t=this,e=Array.from(arguments),n=null;"function"==typeof e[e.length-1]&&(n=e.pop());var r=0;return"number"==typeof e[e.length-1]&&(r=parseInt(e.pop())||0),new Array(r).traverse((function(){var r=t.apply(t,e);if(n){var i=n(r);i&&(r=i)}return r}))}),Math.sign||(Math.sign=function(t){return(t>0)-(t<0)||+t}),Math.acosh||(Math.acosh=function(t){return Math.log(t+Math.sqrt(t*t-1))}),Math.asinh||(Math.asinh=function(t){return t===-1/0?t:Math.log(t+Math.sqrt(t*t+1))}),Math.cbrt||(Math.cbrt=function(t){return function(e){return e<0?-t(-e,1/3):t(e,1/3)}}(Math.pow)),Math.clz32||(Math.clz32=function(t,e){return function(n){var r=n>>>0;return 0===r?32:31-(t(r)/e|0)|0}}(Math.log,Math.LN2)),Math.cosh||(Math.cosh=function(t){var e=Math.exp(t);return(e+1/e)/2}),Math.expm1||(Math.expm1=function(t){return Math.exp(t)-1}),Math.fround||(Math.fround=function(t){if(!(t=Number(t)))return t;var e=t<0?-1:1;e<0&&(t=-t);var n=Math.floor(Math.log(t)/Math.LN2),r=Math.pow(2,Math.max(-126,Math.min(n,127))),i=n<-127?0:1,o=Math.round(8388608*(i-t/r));return o<=-8388608?e*(1/0):e*r*(i-o/8388608)}),Math.hypot||(Math.hypot=function(t,e){for(var n=0,r=0,i=0;i<arguments.length;i+=1){var o=Math.abs(Number(arguments[i]));o>n&&(r*=n/o*(n/o),n=o),r+=0===o&&0===n?0:o/n*(o/n)}return n===1/0?1/0:n*Math.sqrt(r)}),Math.imul||(Math.imul=function(t,e){var n=(4194303&t)*(e|=0);return 4290772992&t&&(n+=(4290772992&t)*e|0),0|n}),Math.log10||(Math.log10=function(t){return Math.log(t)*Math.LOG10E}),Math.log1p||(Math.log1p=function(t){return Math.log(1+t)}),Math.log2||(Math.log2=function(t){return Math.log(t)*Math.LOG2E}),Math.sinh||(Math.sinh=function(t){var e=Math.exp(t);return(e-1/e)/2}),Math.tanh||(Math.tanh=function(t){var e=Math.exp(+t),n=Math.exp(-t);return e==1/0?1:n==1/0?-1:(e-n)/(e+n)}),Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)}),BigInt.prototype.toJSON=function(){return this.toString()}},24057:function(t,e,n){"use strict";n.d(e,{Z:function(){return l}});var r=n(15671),i=n(43144),o=n(66274),s=n(99359),a=(n(69826),n(41539),n(31672),n(2490),n(59461),n(19601),n(37921)),c=(n(59690),(0,s.Z)("opened")),l=function(){function t(){(0,r.Z)(this,t)}return(0,i.Z)(t,null,[{key:"init",value:function(e){var n=(0,a.Z)("pslide");return n.length||(n=(0,a.Z)("<pslide>\n  <mask></mask>\n  <container-right>\n    <header></header>\n    <content></content>\n    <footer></footer>\n  </container-right>\n  <container-left>\n    <header></header>\n    <content></content>\n    <footer></footer>\n  </container-left>\n</pslide>").appendTo(document.body),e||n.find("mask").on("click",function(){t.hide()}.bind(n))),n}},{key:"show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.assign({title:null,footer:null,titleCss:null,footerCss:null,css:null,left:!1,hideMask:!1,mask:"#000",opacity:.5,width:"50%",zIndex:100,bgColor:"#37404a",onContent:Function.empty,onShow:Function.empty,onHide:Function.empty},n),i=t.init(r.hideMask);i.removeAttr("class"),i.removeAttr("style"),i.css({zIndex:r.zIndex}),i.data("options",r);var s=null;(s=r.left?i.find("container-left"):i.find("container-right")).removeAttr("class"),s.removeAttr("style"),s.css({width:r.width,backgroundColor:r.bgColor});var a=s.find("header");a.removeAttr("class"),a.removeAttr("style"),a.empty(),a.hide(),r.title&&(a.html(r.title),r.titleCss&&Object.isHash(r.titleCss)?a.css(r.titleCss):r.titleCss&&Object.isString(r.titleCss)&&a.addClass(r.titleCss),a.show());var l=s.find("footer");l.removeAttr("class"),l.removeAttr("style"),l.empty(),l.hide(),r.footer&&(l.html(r.footer),r.footerCss&&Object.isHash(r.footerCss)?l.css(r.footerCss):r.footerCss&&Object.isString(r.footerCss)&&l.addClass(r.footerCss),l.show());var u=s.find("content");u.removeAttr("class"),u.removeAttr("style"),u.empty(),r.css&&Object.isHash(r.css)?u.css(r.css):r.css&&Object.isString(r.css)&&u.addClass(r.css),i.find("mask").removeAttr("style"),i.find("mask").removeAttr("class"),i.find("mask").css({backgroundColor:r.mask,opacity:r.opacity,pointerEvents:"initial"}),u.html(e),r.hideMask&&(i.find("mask").hide(),i.find("mask").css({pointerEvents:"none"})),r.left?i.addClass("visible-left"):i.addClass("visible-right"),(0,o.Z)(t,c)[c]=!0,Object.isFunction(r.onContent)&&r&&r.onContent&&r.onContent.call(this,u),function(t,e){e&&e.onShow&&e.onShow.call(this,t)}.bind(i,u,r).timeout(600),i.find(".closable").on("click",function(){t.hide()}.bind(i))}},{key:"content",value:function(t){(0,a.Z)("pslide").find("content").html(t)}},{key:"hide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(0,a.Z)("pslide");if(n.length){(0,o.Z)(t,c)[c]=!1,n.css({display:null}),e&&n.css({display:"none"}),n.removeClass("visible-left"),n.removeClass("visible-right");var r=n.data("options");(function(t){t&&t.onHide&&t.onHide.call(this,this.find("content"))}).bind(n,r).timeout(600),n.find(".closable").off("click")}}},{key:"isOpened",value:function(){return(0,o.Z)(t,c)[c]}}]),t}();Object.defineProperty(l,c,{writable:!0,value:!1}),l.init()},31891:function(t,e,n){"use strict";function r(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function i(t){return t instanceof r(t).Element||t instanceof Element}function o(t){return t instanceof r(t).HTMLElement||t instanceof HTMLElement}function s(t){return"undefined"!=typeof ShadowRoot&&(t instanceof r(t).ShadowRoot||t instanceof ShadowRoot)}n.d(e,{Z:function(){return pe}});var a=Math.max,c=Math.min,l=Math.round;function u(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}function h(){return!/^((?!chrome|android).)*safari/i.test(u())}function p(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var s=t.getBoundingClientRect(),a=1,c=1;e&&o(t)&&(a=t.offsetWidth>0&&l(s.width)/t.offsetWidth||1,c=t.offsetHeight>0&&l(s.height)/t.offsetHeight||1);var u=(i(t)?r(t):window).visualViewport,p=!h()&&n,f=(s.left+(p&&u?u.offsetLeft:0))/a,d=(s.top+(p&&u?u.offsetTop:0))/c,g=s.width/a,m=s.height/c;return{width:g,height:m,top:d,right:f+g,bottom:d+m,left:f,x:f,y:d}}function f(t){var e=r(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function d(t){return t?(t.nodeName||"").toLowerCase():null}function g(t){return((i(t)?t.ownerDocument:t.document)||window.document).documentElement}function m(t){return p(g(t)).left+f(t).scrollLeft}function y(t){return r(t).getComputedStyle(t)}function _(t){var e=y(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function v(t,e,n){void 0===n&&(n=!1);var i=o(e),s=o(e)&&function(t){var e=t.getBoundingClientRect(),n=l(e.width)/t.offsetWidth||1,r=l(e.height)/t.offsetHeight||1;return 1!==n||1!==r}(e),a=g(e),c=p(t,s,n),u={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(i||!i&&!n)&&(("body"!==d(e)||_(a))&&(u=function(t){return t!==r(t)&&o(t)?{scrollLeft:(e=t).scrollLeft,scrollTop:e.scrollTop}:f(t);var e}(e)),o(e)?((h=p(e,!0)).x+=e.clientLeft,h.y+=e.clientTop):a&&(h.x=m(a))),{x:c.left+u.scrollLeft-h.x,y:c.top+u.scrollTop-h.y,width:c.width,height:c.height}}function x(t){var e=p(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function b(t){return"html"===d(t)?t:t.assignedSlot||t.parentNode||(s(t)?t.host:null)||g(t)}function w(t){return["html","body","#document"].indexOf(d(t))>=0?t.ownerDocument.body:o(t)&&_(t)?t:w(b(t))}function E(t,e){var n;void 0===e&&(e=[]);var i=w(t),o=i===(null==(n=t.ownerDocument)?void 0:n.body),s=r(i),a=o?[s].concat(s.visualViewport||[],_(i)?i:[]):i,c=e.concat(a);return o?c:c.concat(E(b(a)))}function T(t){return["table","td","th"].indexOf(d(t))>=0}function S(t){return o(t)&&"fixed"!==y(t).position?t.offsetParent:null}function k(t){for(var e=r(t),n=S(t);n&&T(n)&&"static"===y(n).position;)n=S(n);return n&&("html"===d(n)||"body"===d(n)&&"static"===y(n).position)?e:n||function(t){var e=/firefox/i.test(u());if(/Trident/i.test(u())&&o(t)&&"fixed"===y(t).position)return null;var n=b(t);for(s(n)&&(n=n.host);o(n)&&["html","body"].indexOf(d(n))<0;){var r=y(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||e&&"filter"===r.willChange||e&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(t)||e}var A="top",M="bottom",I="right",C="left",O="auto",P=[A,M,I,C],L="start",D="end",R="clippingParents",N="viewport",j="popper",z="reference",B=P.reduce((function(t,e){return t.concat([e+"-"+L,e+"-"+D])}),[]),F=[].concat(P,[O]).reduce((function(t,e){return t.concat([e,e+"-"+L,e+"-"+D])}),[]),U=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function V(t){var e=new Map,n=new Set,r=[];function i(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!n.has(t)){var r=e.get(t);r&&i(r)}})),r.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||i(t)})),r}var q={placement:"bottom",modifiers:[],strategy:"absolute"};function W(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function G(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,r=void 0===n?[]:n,o=e.defaultOptions,s=void 0===o?q:o;return function(t,e,n){void 0===n&&(n=s);var o,a,c={placement:"bottom",orderedModifiers:[],options:Object.assign({},q,s),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},l=[],u=!1,h={state:c,setOptions:function(n){var o="function"==typeof n?n(c.options):n;p(),c.options=Object.assign({},s,c.options,o),c.scrollParents={reference:i(t)?E(t):t.contextElement?E(t.contextElement):[],popper:E(e)};var a,u,f=function(t){var e=V(t);return U.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}((a=[].concat(r,c.options.modifiers),u=a.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{}),Object.keys(u).map((function(t){return u[t]}))));return c.orderedModifiers=f.filter((function(t){return t.enabled})),c.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,r=void 0===n?{}:n,i=t.effect;if("function"==typeof i){var o=i({state:c,name:e,instance:h,options:r}),s=function(){};l.push(o||s)}})),h.update()},forceUpdate:function(){if(!u){var t=c.elements,e=t.reference,n=t.popper;if(W(e,n)){c.rects={reference:v(e,k(n),"fixed"===c.options.strategy),popper:x(n)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach((function(t){return c.modifiersData[t.name]=Object.assign({},t.data)}));for(var r=0;r<c.orderedModifiers.length;r++)if(!0!==c.reset){var i=c.orderedModifiers[r],o=i.fn,s=i.options,a=void 0===s?{}:s,l=i.name;"function"==typeof o&&(c=o({state:c,options:a,name:l,instance:h})||c)}else c.reset=!1,r=-1}}},update:(o=function(){return new Promise((function(t){h.forceUpdate(),t(c)}))},function(){return a||(a=new Promise((function(t){Promise.resolve().then((function(){a=void 0,t(o())}))}))),a}),destroy:function(){p(),u=!0}};if(!W(t,e))return h;function p(){l.forEach((function(t){return t()})),l=[]}return h.setOptions(n).then((function(t){!u&&n.onFirstUpdate&&n.onFirstUpdate(t)})),h}}var $={passive:!0};function H(t){return t.split("-")[0]}function Z(t){return t.split("-")[1]}function Y(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function X(t){var e,n=t.reference,r=t.element,i=t.placement,o=i?H(i):null,s=i?Z(i):null,a=n.x+n.width/2-r.width/2,c=n.y+n.height/2-r.height/2;switch(o){case A:e={x:a,y:n.y-r.height};break;case M:e={x:a,y:n.y+n.height};break;case I:e={x:n.x+n.width,y:c};break;case C:e={x:n.x-r.width,y:c};break;default:e={x:n.x,y:n.y}}var l=o?Y(o):null;if(null!=l){var u="y"===l?"height":"width";switch(s){case L:e[l]=e[l]-(n[u]/2-r[u]/2);break;case D:e[l]=e[l]+(n[u]/2-r[u]/2)}}return e}var K={top:"auto",right:"auto",bottom:"auto",left:"auto"};function J(t){var e,n=t.popper,i=t.popperRect,o=t.placement,s=t.variation,a=t.offsets,c=t.position,u=t.gpuAcceleration,h=t.adaptive,p=t.roundOffsets,f=t.isFixed,d=a.x,m=void 0===d?0:d,_=a.y,v=void 0===_?0:_,x="function"==typeof p?p({x:m,y:v}):{x:m,y:v};m=x.x,v=x.y;var b=a.hasOwnProperty("x"),w=a.hasOwnProperty("y"),E=C,T=A,S=window;if(h){var O=k(n),P="clientHeight",L="clientWidth";if(O===r(n)&&"static"!==y(O=g(n)).position&&"absolute"===c&&(P="scrollHeight",L="scrollWidth"),o===A||(o===C||o===I)&&s===D)T=M,v-=(f&&O===S&&S.visualViewport?S.visualViewport.height:O[P])-i.height,v*=u?1:-1;if(o===C||(o===A||o===M)&&s===D)E=I,m-=(f&&O===S&&S.visualViewport?S.visualViewport.width:O[L])-i.width,m*=u?1:-1}var R,N=Object.assign({position:c},h&&K),j=!0===p?function(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:l(n*i)/i||0,y:l(r*i)/i||0}}({x:m,y:v},r(n)):{x:m,y:v};return m=j.x,v=j.y,u?Object.assign({},N,((R={})[T]=w?"0":"",R[E]=b?"0":"",R.transform=(S.devicePixelRatio||1)<=1?"translate("+m+"px, "+v+"px)":"translate3d("+m+"px, "+v+"px, 0)",R)):Object.assign({},N,((e={})[T]=w?v+"px":"",e[E]=b?m+"px":"",e.transform="",e))}var Q={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},r=e.attributes[t]||{},i=e.elements[t];o(i)&&d(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(t){var e=r[t];!1===e?i.removeAttribute(t):i.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var r=e.elements[t],i=e.attributes[t]||{},s=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce((function(t,e){return t[e]="",t}),{});o(r)&&d(r)&&(Object.assign(r.style,s),Object.keys(i).forEach((function(t){r.removeAttribute(t)})))}))}},requires:["computeStyles"]};var tt={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.options,r=t.name,i=n.offset,o=void 0===i?[0,0]:i,s=F.reduce((function(t,n){return t[n]=function(t,e,n){var r=H(t),i=[C,A].indexOf(r)>=0?-1:1,o="function"==typeof n?n(Object.assign({},e,{placement:t})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[C,I].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}(n,e.rects,o),t}),{}),a=s[e.placement],c=a.x,l=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=l),e.modifiersData[r]=s}},et={left:"right",right:"left",bottom:"top",top:"bottom"};function nt(t){return t.replace(/left|right|bottom|top/g,(function(t){return et[t]}))}var rt={start:"end",end:"start"};function it(t){return t.replace(/start|end/g,(function(t){return rt[t]}))}function ot(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&s(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function st(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function at(t,e,n){return e===N?st(function(t,e){var n=r(t),i=g(t),o=n.visualViewport,s=i.clientWidth,a=i.clientHeight,c=0,l=0;if(o){s=o.width,a=o.height;var u=h();(u||!u&&"fixed"===e)&&(c=o.offsetLeft,l=o.offsetTop)}return{width:s,height:a,x:c+m(t),y:l}}(t,n)):i(e)?function(t,e){var n=p(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(e,n):st(function(t){var e,n=g(t),r=f(t),i=null==(e=t.ownerDocument)?void 0:e.body,o=a(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=a(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),c=-r.scrollLeft+m(t),l=-r.scrollTop;return"rtl"===y(i||n).direction&&(c+=a(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:c,y:l}}(g(t)))}function ct(t,e,n,r){var s="clippingParents"===e?function(t){var e=E(b(t)),n=["absolute","fixed"].indexOf(y(t).position)>=0&&o(t)?k(t):t;return i(n)?e.filter((function(t){return i(t)&&ot(t,n)&&"body"!==d(t)})):[]}(t):[].concat(e),l=[].concat(s,[n]),u=l[0],h=l.reduce((function(e,n){var i=at(t,n,r);return e.top=a(i.top,e.top),e.right=c(i.right,e.right),e.bottom=c(i.bottom,e.bottom),e.left=a(i.left,e.left),e}),at(t,u,r));return h.width=h.right-h.left,h.height=h.bottom-h.top,h.x=h.left,h.y=h.top,h}function lt(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function ut(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}function ht(t,e){void 0===e&&(e={});var n=e,r=n.placement,o=void 0===r?t.placement:r,s=n.strategy,a=void 0===s?t.strategy:s,c=n.boundary,l=void 0===c?R:c,u=n.rootBoundary,h=void 0===u?N:u,f=n.elementContext,d=void 0===f?j:f,m=n.altBoundary,y=void 0!==m&&m,_=n.padding,v=void 0===_?0:_,x=lt("number"!=typeof v?v:ut(v,P)),b=d===j?z:j,w=t.rects.popper,E=t.elements[y?b:d],T=ct(i(E)?E:E.contextElement||g(t.elements.popper),l,h,a),S=p(t.elements.reference),k=X({reference:S,element:w,strategy:"absolute",placement:o}),C=st(Object.assign({},w,k)),O=d===j?C:S,L={top:T.top-O.top+x.top,bottom:O.bottom-T.bottom+x.bottom,left:T.left-O.left+x.left,right:O.right-T.right+x.right},D=t.modifiersData.offset;if(d===j&&D){var B=D[o];Object.keys(L).forEach((function(t){var e=[I,M].indexOf(t)>=0?1:-1,n=[A,M].indexOf(t)>=0?"y":"x";L[t]+=B[n]*e}))}return L}function pt(t,e,n){return a(t,c(e,n))}var ft={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,o=void 0===i||i,s=n.altAxis,l=void 0!==s&&s,u=n.boundary,h=n.rootBoundary,p=n.altBoundary,f=n.padding,d=n.tether,g=void 0===d||d,m=n.tetherOffset,y=void 0===m?0:m,_=ht(e,{boundary:u,rootBoundary:h,padding:f,altBoundary:p}),v=H(e.placement),b=Z(e.placement),w=!b,E=Y(v),T="x"===E?"y":"x",S=e.modifiersData.popperOffsets,O=e.rects.reference,P=e.rects.popper,D="function"==typeof y?y(Object.assign({},e.rects,{placement:e.placement})):y,R="number"==typeof D?{mainAxis:D,altAxis:D}:Object.assign({mainAxis:0,altAxis:0},D),N=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,j={x:0,y:0};if(S){if(o){var z,B="y"===E?A:C,F="y"===E?M:I,U="y"===E?"height":"width",V=S[E],q=V+_[B],W=V-_[F],G=g?-P[U]/2:0,$=b===L?O[U]:P[U],X=b===L?-P[U]:-O[U],K=e.elements.arrow,J=g&&K?x(K):{width:0,height:0},Q=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},tt=Q[B],et=Q[F],nt=pt(0,O[U],J[U]),rt=w?O[U]/2-G-nt-tt-R.mainAxis:$-nt-tt-R.mainAxis,it=w?-O[U]/2+G+nt+et+R.mainAxis:X+nt+et+R.mainAxis,ot=e.elements.arrow&&k(e.elements.arrow),st=ot?"y"===E?ot.clientTop||0:ot.clientLeft||0:0,at=null!=(z=null==N?void 0:N[E])?z:0,ct=V+it-at,lt=pt(g?c(q,V+rt-at-st):q,V,g?a(W,ct):W);S[E]=lt,j[E]=lt-V}if(l){var ut,ft="x"===E?A:C,dt="x"===E?M:I,gt=S[T],mt="y"===T?"height":"width",yt=gt+_[ft],_t=gt-_[dt],vt=-1!==[A,C].indexOf(v),xt=null!=(ut=null==N?void 0:N[T])?ut:0,bt=vt?yt:gt-O[mt]-P[mt]-xt+R.altAxis,wt=vt?gt+O[mt]+P[mt]-xt-R.altAxis:_t,Et=g&&vt?function(t,e,n){var r=pt(t,e,n);return r>n?n:r}(bt,gt,wt):pt(g?bt:yt,gt,g?wt:_t);S[T]=Et,j[T]=Et-gt}e.modifiersData[r]=j}},requiresIfExists:["offset"]};var dt={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,r=t.name,i=t.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=H(n.placement),c=Y(a),l=[C,I].indexOf(a)>=0?"height":"width";if(o&&s){var u=function(t,e){return lt("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:ut(t,P))}(i.padding,n),h=x(o),p="y"===c?A:C,f="y"===c?M:I,d=n.rects.reference[l]+n.rects.reference[c]-s[c]-n.rects.popper[l],g=s[c]-n.rects.reference[c],m=k(o),y=m?"y"===c?m.clientHeight||0:m.clientWidth||0:0,_=d/2-g/2,v=u[p],b=y-h[l]-u[f],w=y/2-h[l]/2+_,E=pt(v,w,b),T=c;n.modifiersData[r]=((e={})[T]=E,e.centerOffset=E-w,e)}},effect:function(t){var e=t.state,n=t.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=e.elements.popper.querySelector(r)))&&ot(e.elements.popper,r)&&(e.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function gt(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function mt(t){return[A,I,M,C].some((function(e){return t[e]>=0}))}var yt=G({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,i=t.options,o=i.scroll,s=void 0===o||o,a=i.resize,c=void 0===a||a,l=r(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&u.forEach((function(t){t.addEventListener("scroll",n.update,$)})),c&&l.addEventListener("resize",n.update,$),function(){s&&u.forEach((function(t){t.removeEventListener("scroll",n.update,$)})),c&&l.removeEventListener("resize",n.update,$)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=X({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,s=void 0===o||o,a=n.roundOffsets,c=void 0===a||a,l={placement:H(e.placement),variation:Z(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,J(Object.assign({},l,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:c})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,J(Object.assign({},l,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}},Q,tt,{name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0===s||s,c=n.fallbackPlacements,l=n.padding,u=n.boundary,h=n.rootBoundary,p=n.altBoundary,f=n.flipVariations,d=void 0===f||f,g=n.allowedAutoPlacements,m=e.options.placement,y=H(m),_=c||(y===m||!d?[nt(m)]:function(t){if(H(t)===O)return[];var e=nt(t);return[it(t),e,it(e)]}(m)),v=[m].concat(_).reduce((function(t,n){return t.concat(H(n)===O?function(t,e){void 0===e&&(e={});var n=e,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,c=n.allowedAutoPlacements,l=void 0===c?F:c,u=Z(r),h=u?a?B:B.filter((function(t){return Z(t)===u})):P,p=h.filter((function(t){return l.indexOf(t)>=0}));0===p.length&&(p=h);var f=p.reduce((function(e,n){return e[n]=ht(t,{placement:n,boundary:i,rootBoundary:o,padding:s})[H(n)],e}),{});return Object.keys(f).sort((function(t,e){return f[t]-f[e]}))}(e,{placement:n,boundary:u,rootBoundary:h,padding:l,flipVariations:d,allowedAutoPlacements:g}):n)}),[]),x=e.rects.reference,b=e.rects.popper,w=new Map,E=!0,T=v[0],S=0;S<v.length;S++){var k=v[S],D=H(k),R=Z(k)===L,N=[A,M].indexOf(D)>=0,j=N?"width":"height",z=ht(e,{placement:k,boundary:u,rootBoundary:h,altBoundary:p,padding:l}),U=N?R?I:C:R?M:A;x[j]>b[j]&&(U=nt(U));var V=nt(U),q=[];if(o&&q.push(z[D]<=0),a&&q.push(z[U]<=0,z[V]<=0),q.every((function(t){return t}))){T=k,E=!1;break}w.set(k,q)}if(E)for(var W=function(t){var e=v.find((function(e){var n=w.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return T=e,"break"},G=d?3:1;G>0;G--){if("break"===W(G))break}e.placement!==T&&(e.modifiersData[r]._skip=!0,e.placement=T,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},ft,dt,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,s=ht(e,{elementContext:"reference"}),a=ht(e,{altBoundary:!0}),c=gt(s,r),l=gt(a,i,o),u=mt(c),h=mt(l);e.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:l,isReferenceHidden:u,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}}]}),_t=(n(25108),"tippy-content"),vt="tippy-backdrop",xt="tippy-arrow",bt="tippy-svg-arrow",wt={passive:!0,capture:!0},Et=function(){return document.body};function Tt(t,e,n){if(Array.isArray(t)){var r=t[e];return null==r?Array.isArray(n)?n[e]:n:r}return t}function St(t,e){var n={}.toString.call(t);return 0===n.indexOf("[object")&&n.indexOf(e+"]")>-1}function kt(t,e){return"function"==typeof t?t.apply(void 0,e):t}function At(t,e){return 0===e?t:function(r){clearTimeout(n),n=setTimeout((function(){t(r)}),e)};var n}function Mt(t){return[].concat(t)}function It(t,e){-1===t.indexOf(e)&&t.push(e)}function Ct(t){return t.split("-")[0]}function Ot(t){return[].slice.call(t)}function Pt(t){return Object.keys(t).reduce((function(e,n){return void 0!==t[n]&&(e[n]=t[n]),e}),{})}function Lt(){return document.createElement("div")}function Dt(t){return["Element","Fragment"].some((function(e){return St(t,e)}))}function Rt(t){return St(t,"MouseEvent")}function Nt(t){return!(!t||!t._tippy||t._tippy.reference!==t)}function jt(t){return Dt(t)?[t]:function(t){return St(t,"NodeList")}(t)?Ot(t):Array.isArray(t)?t:Ot(document.querySelectorAll(t))}function zt(t,e){t.forEach((function(t){t&&(t.style.transitionDuration=e+"ms")}))}function Bt(t,e){t.forEach((function(t){t&&t.setAttribute("data-state",e)}))}function Ft(t){var e,n=Mt(t)[0];return null!=n&&null!=(e=n.ownerDocument)&&e.body?n.ownerDocument:document}function Ut(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(e){t[r](e,n)}))}function Vt(t,e){for(var n=e;n;){var r;if(t.contains(n))return!0;n=null==n.getRootNode||null==(r=n.getRootNode())?void 0:r.host}return!1}var qt={isTouch:!1},Wt=0;function Gt(){qt.isTouch||(qt.isTouch=!0,window.performance&&document.addEventListener("mousemove",$t))}function $t(){var t=performance.now();t-Wt<20&&(qt.isTouch=!1,document.removeEventListener("mousemove",$t)),Wt=t}function Ht(){var t=document.activeElement;if(Nt(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}var Zt=!!("undefined"!=typeof window&&"undefined"!=typeof document)&&!!window.msCrypto;var Yt={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Xt=Object.assign({appendTo:Et,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},Yt,{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),Kt=Object.keys(Xt);function Jt(t){var e=(t.plugins||[]).reduce((function(e,n){var r,i=n.name,o=n.defaultValue;i&&(e[i]=void 0!==t[i]?t[i]:null!=(r=Xt[i])?r:o);return e}),{});return Object.assign({},t,e)}function Qt(t,e){var n=Object.assign({},e,{content:kt(e.content,[t])},e.ignoreAttributes?{}:function(t,e){return(e?Object.keys(Jt(Object.assign({},Xt,{plugins:e}))):Kt).reduce((function(e,n){var r=(t.getAttribute("data-tippy-"+n)||"").trim();if(!r)return e;if("content"===n)e[n]=r;else try{e[n]=JSON.parse(r)}catch(t){e[n]=r}return e}),{})}(t,e.plugins));return n.aria=Object.assign({},Xt.aria,n.aria),n.aria={expanded:"auto"===n.aria.expanded?e.interactive:n.aria.expanded,content:"auto"===n.aria.content?e.interactive?null:"describedby":n.aria.content},n}var te=function(){return"innerHTML"};function ee(t,e){t[te()]=e}function ne(t){var e=Lt();return!0===t?e.className=xt:(e.className=bt,Dt(t)?e.appendChild(t):ee(e,t)),e}function re(t,e){Dt(e.content)?(ee(t,""),t.appendChild(e.content)):"function"!=typeof e.content&&(e.allowHTML?ee(t,e.content):t.textContent=e.content)}function ie(t){var e=t.firstElementChild,n=Ot(e.children);return{box:e,content:n.find((function(t){return t.classList.contains(_t)})),arrow:n.find((function(t){return t.classList.contains(xt)||t.classList.contains(bt)})),backdrop:n.find((function(t){return t.classList.contains(vt)}))}}function oe(t){var e=Lt(),n=Lt();n.className="tippy-box",n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=Lt();function i(n,r){var i=ie(e),o=i.box,s=i.content,a=i.arrow;r.theme?o.setAttribute("data-theme",r.theme):o.removeAttribute("data-theme"),"string"==typeof r.animation?o.setAttribute("data-animation",r.animation):o.removeAttribute("data-animation"),r.inertia?o.setAttribute("data-inertia",""):o.removeAttribute("data-inertia"),o.style.maxWidth="number"==typeof r.maxWidth?r.maxWidth+"px":r.maxWidth,r.role?o.setAttribute("role",r.role):o.removeAttribute("role"),n.content===r.content&&n.allowHTML===r.allowHTML||re(s,t.props),r.arrow?a?n.arrow!==r.arrow&&(o.removeChild(a),o.appendChild(ne(r.arrow))):o.appendChild(ne(r.arrow)):a&&o.removeChild(a)}return r.className=_t,r.setAttribute("data-state","hidden"),re(r,t.props),e.appendChild(n),n.appendChild(r),i(t.props,t.props),{popper:e,onUpdate:i}}oe.$$tippy=!0;var se=1,ae=[],ce=[];function le(t,e){var n,r,i,o,s,a,c,l,u=Qt(t,Object.assign({},Xt,Jt(Pt(e)))),h=!1,p=!1,f=!1,d=!1,g=[],m=At(H,u.interactiveDebounce),y=se++,_=(l=u.plugins).filter((function(t,e){return l.indexOf(t)===e})),v={id:y,reference:t,popper:Lt(),popperInstance:null,props:u,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:_,clearDelayTimeouts:function(){clearTimeout(n),clearTimeout(r),cancelAnimationFrame(i)},setProps:function(e){0;if(v.state.isDestroyed)return;L("onBeforeUpdate",[v,e]),G();var n=v.props,r=Qt(t,Object.assign({},n,Pt(e),{ignoreAttributes:!0}));v.props=r,W(),n.interactiveDebounce!==r.interactiveDebounce&&(N(),m=At(H,r.interactiveDebounce));n.triggerTarget&&!r.triggerTarget?Mt(n.triggerTarget).forEach((function(t){t.removeAttribute("aria-expanded")})):r.triggerTarget&&t.removeAttribute("aria-expanded");R(),P(),w&&w(n,r);v.popperInstance&&(K(),Q().forEach((function(t){requestAnimationFrame(t._tippy.popperInstance.forceUpdate)})));L("onAfterUpdate",[v,e])},setContent:function(t){v.setProps({content:t})},show:function(){0;var t=v.state.isVisible,e=v.state.isDestroyed,n=!v.state.isEnabled,r=qt.isTouch&&!v.props.touch,i=Tt(v.props.duration,0,Xt.duration);if(t||e||n||r)return;if(M().hasAttribute("disabled"))return;if(L("onShow",[v],!1),!1===v.props.onShow(v))return;v.state.isVisible=!0,A()&&(b.style.visibility="visible");P(),F(),v.state.isMounted||(b.style.transition="none");if(A()){var o=C();zt([o.box,o.content],0)}a=function(){var t;if(v.state.isVisible&&!d){if(d=!0,b.offsetHeight,b.style.transition=v.props.moveTransition,A()&&v.props.animation){var e=C(),n=e.box,r=e.content;zt([n,r],i),Bt([n,r],"visible")}D(),R(),It(ce,v),null==(t=v.popperInstance)||t.forceUpdate(),L("onMount",[v]),v.props.animation&&A()&&function(t,e){V(t,e)}(i,(function(){v.state.isShown=!0,L("onShown",[v])}))}},function(){var t,e=v.props.appendTo,n=M();t=v.props.interactive&&e===Et||"parent"===e?n.parentNode:kt(e,[n]);t.contains(b)||t.appendChild(b);v.state.isMounted=!0,K(),!1}()},hide:function(){0;var t=!v.state.isVisible,e=v.state.isDestroyed,n=!v.state.isEnabled,r=Tt(v.props.duration,1,Xt.duration);if(t||e||n)return;if(L("onHide",[v],!1),!1===v.props.onHide(v))return;v.state.isVisible=!1,v.state.isShown=!1,d=!1,h=!1,A()&&(b.style.visibility="hidden");if(N(),U(),P(!0),A()){var i=C(),o=i.box,s=i.content;v.props.animation&&(zt([o,s],r),Bt([o,s],"hidden"))}D(),R(),v.props.animation?A()&&function(t,e){V(t,(function(){!v.state.isVisible&&b.parentNode&&b.parentNode.contains(b)&&e()}))}(r,v.unmount):v.unmount()},hideWithInteractivity:function(t){0;I().addEventListener("mousemove",m),It(ae,m),m(t)},enable:function(){v.state.isEnabled=!0},disable:function(){v.hide(),v.state.isEnabled=!1},unmount:function(){0;v.state.isVisible&&v.hide();if(!v.state.isMounted)return;J(),Q().forEach((function(t){t._tippy.unmount()})),b.parentNode&&b.parentNode.removeChild(b);ce=ce.filter((function(t){return t!==v})),v.state.isMounted=!1,L("onHidden",[v])},destroy:function(){0;if(v.state.isDestroyed)return;v.clearDelayTimeouts(),v.unmount(),G(),delete t._tippy,v.state.isDestroyed=!0,L("onDestroy",[v])}};if(!u.render)return v;var x=u.render(v),b=x.popper,w=x.onUpdate;b.setAttribute("data-tippy-root",""),b.id="tippy-"+v.id,v.popper=b,t._tippy=v,b._tippy=v;var E=_.map((function(t){return t.fn(v)})),T=t.hasAttribute("aria-expanded");return W(),R(),P(),L("onCreate",[v]),u.showOnCreate&&tt(),b.addEventListener("mouseenter",(function(){v.props.interactive&&v.state.isVisible&&v.clearDelayTimeouts()})),b.addEventListener("mouseleave",(function(){v.props.interactive&&v.props.trigger.indexOf("mouseenter")>=0&&I().addEventListener("mousemove",m)})),v;function S(){var t=v.props.touch;return Array.isArray(t)?t:[t,0]}function k(){return"hold"===S()[0]}function A(){var t;return!(null==(t=v.props.render)||!t.$$tippy)}function M(){return c||t}function I(){var t=M().parentNode;return t?Ft(t):document}function C(){return ie(b)}function O(t){return v.state.isMounted&&!v.state.isVisible||qt.isTouch||o&&"focus"===o.type?0:Tt(v.props.delay,t?0:1,Xt.delay)}function P(t){void 0===t&&(t=!1),b.style.pointerEvents=v.props.interactive&&!t?"":"none",b.style.zIndex=""+v.props.zIndex}function L(t,e,n){var r;(void 0===n&&(n=!0),E.forEach((function(n){n[t]&&n[t].apply(n,e)})),n)&&(r=v.props)[t].apply(r,e)}function D(){var e=v.props.aria;if(e.content){var n="aria-"+e.content,r=b.id;Mt(v.props.triggerTarget||t).forEach((function(t){var e=t.getAttribute(n);if(v.state.isVisible)t.setAttribute(n,e?e+" "+r:r);else{var i=e&&e.replace(r,"").trim();i?t.setAttribute(n,i):t.removeAttribute(n)}}))}}function R(){!T&&v.props.aria.expanded&&Mt(v.props.triggerTarget||t).forEach((function(t){v.props.interactive?t.setAttribute("aria-expanded",v.state.isVisible&&t===M()?"true":"false"):t.removeAttribute("aria-expanded")}))}function N(){I().removeEventListener("mousemove",m),ae=ae.filter((function(t){return t!==m}))}function j(e){if(!qt.isTouch||!f&&"mousedown"!==e.type){var n=e.composedPath&&e.composedPath()[0]||e.target;if(!v.props.interactive||!Vt(b,n)){if(Mt(v.props.triggerTarget||t).some((function(t){return Vt(t,n)}))){if(qt.isTouch)return;if(v.state.isVisible&&v.props.trigger.indexOf("click")>=0)return}else L("onClickOutside",[v,e]);!0===v.props.hideOnClick&&(v.clearDelayTimeouts(),v.hide(),p=!0,setTimeout((function(){p=!1})),v.state.isMounted||U())}}}function z(){f=!0}function B(){f=!1}function F(){var t=I();t.addEventListener("mousedown",j,!0),t.addEventListener("touchend",j,wt),t.addEventListener("touchstart",B,wt),t.addEventListener("touchmove",z,wt)}function U(){var t=I();t.removeEventListener("mousedown",j,!0),t.removeEventListener("touchend",j,wt),t.removeEventListener("touchstart",B,wt),t.removeEventListener("touchmove",z,wt)}function V(t,e){var n=C().box;function r(t){t.target===n&&(Ut(n,"remove",r),e())}if(0===t)return e();Ut(n,"remove",s),Ut(n,"add",r),s=r}function q(e,n,r){void 0===r&&(r=!1),Mt(v.props.triggerTarget||t).forEach((function(t){t.addEventListener(e,n,r),g.push({node:t,eventType:e,handler:n,options:r})}))}function W(){var t;k()&&(q("touchstart",$,{passive:!0}),q("touchend",Z,{passive:!0})),(t=v.props.trigger,t.split(/\s+/).filter(Boolean)).forEach((function(t){if("manual"!==t)switch(q(t,$),t){case"mouseenter":q("mouseleave",Z);break;case"focus":q(Zt?"focusout":"blur",Y);break;case"focusin":q("focusout",Y)}}))}function G(){g.forEach((function(t){var e=t.node,n=t.eventType,r=t.handler,i=t.options;e.removeEventListener(n,r,i)})),g=[]}function $(t){var e,n=!1;if(v.state.isEnabled&&!X(t)&&!p){var r="focus"===(null==(e=o)?void 0:e.type);o=t,c=t.currentTarget,R(),!v.state.isVisible&&Rt(t)&&ae.forEach((function(e){return e(t)})),"click"===t.type&&(v.props.trigger.indexOf("mouseenter")<0||h)&&!1!==v.props.hideOnClick&&v.state.isVisible?n=!0:tt(t),"click"===t.type&&(h=!n),n&&!r&&et(t)}}function H(t){var e=t.target,n=M().contains(e)||b.contains(e);if("mousemove"!==t.type||!n){var r=Q().concat(b).map((function(t){var e,n=null==(e=t._tippy.popperInstance)?void 0:e.state;return n?{popperRect:t.getBoundingClientRect(),popperState:n,props:u}:null})).filter(Boolean);(function(t,e){var n=e.clientX,r=e.clientY;return t.every((function(t){var e=t.popperRect,i=t.popperState,o=t.props.interactiveBorder,s=Ct(i.placement),a=i.modifiersData.offset;if(!a)return!0;var c="bottom"===s?a.top.y:0,l="top"===s?a.bottom.y:0,u="right"===s?a.left.x:0,h="left"===s?a.right.x:0,p=e.top-r+c>o,f=r-e.bottom-l>o,d=e.left-n+u>o,g=n-e.right-h>o;return p||f||d||g}))})(r,t)&&(N(),et(t))}}function Z(t){X(t)||v.props.trigger.indexOf("click")>=0&&h||(v.props.interactive?v.hideWithInteractivity(t):et(t))}function Y(t){v.props.trigger.indexOf("focusin")<0&&t.target!==M()||v.props.interactive&&t.relatedTarget&&b.contains(t.relatedTarget)||et(t)}function X(t){return!!qt.isTouch&&k()!==t.type.indexOf("touch")>=0}function K(){J();var e=v.props,n=e.popperOptions,r=e.placement,i=e.offset,o=e.getReferenceClientRect,s=e.moveTransition,c=A()?ie(b).arrow:null,l=o?{getBoundingClientRect:o,contextElement:o.contextElement||M()}:t,u={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(t){var e=t.state;if(A()){var n=C().box;["placement","reference-hidden","escaped"].forEach((function(t){"placement"===t?n.setAttribute("data-placement",e.placement):e.attributes.popper["data-popper-"+t]?n.setAttribute("data-"+t,""):n.removeAttribute("data-"+t)})),e.attributes.popper={}}}},h=[{name:"offset",options:{offset:i}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!s}},u];A()&&c&&h.push({name:"arrow",options:{element:c,padding:3}}),h.push.apply(h,(null==n?void 0:n.modifiers)||[]),v.popperInstance=yt(l,b,Object.assign({},n,{placement:r,onFirstUpdate:a,modifiers:h}))}function J(){v.popperInstance&&(v.popperInstance.destroy(),v.popperInstance=null)}function Q(){return Ot(b.querySelectorAll("[data-tippy-root]"))}function tt(t){v.clearDelayTimeouts(),t&&L("onTrigger",[v,t]),F();var e=O(!0),r=S(),i=r[0],o=r[1];qt.isTouch&&"hold"===i&&o&&(e=o),e?n=setTimeout((function(){v.show()}),e):v.show()}function et(t){if(v.clearDelayTimeouts(),L("onUntrigger",[v,t]),v.state.isVisible){if(!(v.props.trigger.indexOf("mouseenter")>=0&&v.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(t.type)>=0&&h)){var e=O(!1);e?r=setTimeout((function(){v.state.isVisible&&v.hide()}),e):i=requestAnimationFrame((function(){v.hide()}))}}else U()}}function ue(t,e){void 0===e&&(e={});var n=Xt.plugins.concat(e.plugins||[]);document.addEventListener("touchstart",Gt,wt),window.addEventListener("blur",Ht);var r=Object.assign({},e,{plugins:n}),i=jt(t).reduce((function(t,e){var n=e&&le(e,r);return n&&t.push(n),t}),[]);return Dt(t)?i[0]:i}ue.defaultProps=Xt,ue.setDefaultProps=function(t){Object.keys(t).forEach((function(e){Xt[e]=t[e]}))},ue.currentInput=qt;Object.assign({},Q,{effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow)}});ue.setDefaultProps({render:oe});var he=ue,pe=(n(60432),n(49964),he)},79083:function(t,e,n){"use strict";n(43371),n(26699),n(32023),n(69826),n(41539),n(31672),n(2490),n(59461),n(56977),n(74916),n(4723),n(68309),n(69600),n(21249),n(57640),n(9924);var r=n(77566),i=n.n(r),o=n(30381),s=n.n(o),a=n(37921),c=n(25108);function l(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let u={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};function h(t){u=t}const p=/[&<>"']/,f=new RegExp(p.source,"g"),d=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,g=new RegExp(d.source,"g"),m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},y=t=>m[t];function _(t,e){if(e){if(p.test(t))return t.replace(f,y)}else if(d.test(t))return t.replace(g,y);return t}const v=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function x(t){return t.replace(v,((t,e)=>"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""))}const b=/(^|[^\[])\^/g;function w(t,e){t="string"==typeof t?t:t.source,e=e||"";const n={replace:(e,r)=>(r=(r=r.source||r).replace(b,"$1"),t=t.replace(e,r),n),getRegex:()=>new RegExp(t,e)};return n}const E=/[^\w:]/g,T=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function S(t,e,n){if(t){let t;try{t=decodeURIComponent(x(n)).replace(E,"").toLowerCase()}catch(t){return null}if(0===t.indexOf("javascript:")||0===t.indexOf("vbscript:")||0===t.indexOf("data:"))return null}e&&!T.test(n)&&(n=function(t,e){k[" "+t]||(A.test(t)?k[" "+t]=t+"/":k[" "+t]=P(t,"/",!0));t=k[" "+t];const n=-1===t.indexOf(":");return"//"===e.substring(0,2)?n?e:t.replace(M,"$1")+e:"/"===e.charAt(0)?n?e:t.replace(I,"$1")+e:t+e}(e,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(t){return null}return n}const k={},A=/^[^:]+:\/*[^/]*$/,M=/^([^:]+:)[\s\S]*$/,I=/^([^:]+:\/*[^/]*)[\s\S]*$/;const C={exec:function(){}};function O(t,e){const n=t.replace(/\|/g,((t,e,n)=>{let r=!1,i=e;for(;--i>=0&&"\\"===n[i];)r=!r;return r?"|":" |"})),r=n.split(/ \|/);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function P(t,e,n){const r=t.length;if(0===r)return"";let i=0;for(;i<r;){const o=t.charAt(r-i-1);if(o!==e||n){if(o===e||!n)break;i++}else i++}return t.slice(0,r-i)}function L(t,e,n,r){const i=e.href,o=e.title?_(e.title):null,s=t[1].replace(/\\([\[\]])/g,"$1");if("!"!==t[0].charAt(0)){r.state.inLink=!0;const t={type:"link",raw:n,href:i,title:o,text:s,tokens:r.inlineTokens(s)};return r.state.inLink=!1,t}return{type:"image",raw:n,href:i,title:o,text:_(s)}}class D{constructor(t){this.options=t||u}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const t=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:P(t,"\n")}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const t=e[0],n=function(t,e){const n=t.match(/^(\s+)(?:```)/);if(null===n)return e;const r=n[1];return e.split("\n").map((t=>{const e=t.match(/^\s+/);if(null===e)return t;const[n]=e;return n.length>=r.length?t.slice(r.length):t})).join("\n")}(t,e[3]||"");return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline._escapes,"$1"):e[2],text:n}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let t=e[2].trim();if(/#$/.test(t)){const e=P(t,"#");this.options.pedantic?t=e.trim():e&&!/ $/.test(e)||(t=e.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:e[0]}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){const t=e[0].replace(/^ *>[ \t]?/gm,""),n=this.lexer.state.top;this.lexer.state.top=!0;const r=this.lexer.blockTokens(t);return this.lexer.state.top=n,{type:"blockquote",raw:e[0],tokens:r,text:t}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n,r,i,o,s,a,c,l,u,h,p,f,d=e[1].trim();const g=d.length>1,m={type:"list",raw:"",ordered:g,start:g?+d.slice(0,-1):"",loose:!1,items:[]};d=g?`\\d{1,9}\\${d.slice(-1)}`:`\\${d}`,this.options.pedantic&&(d=g?d:"[*+-]");const y=new RegExp(`^( {0,3}${d})((?:[\t ][^\\n]*)?(?:\\n|$))`);for(;t&&(f=!1,e=y.exec(t))&&!this.rules.block.hr.test(t);){if(n=e[0],t=t.substring(n.length),l=e[2].split("\n",1)[0].replace(/^\t+/,(t=>" ".repeat(3*t.length))),u=t.split("\n",1)[0],this.options.pedantic?(o=2,p=l.trimLeft()):(o=e[2].search(/[^ ]/),o=o>4?1:o,p=l.slice(o),o+=e[1].length),a=!1,!l&&/^ *$/.test(u)&&(n+=u+"\n",t=t.substring(u.length+1),f=!0),!f){const e=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),r=new RegExp(`^ {0,${Math.min(3,o-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),i=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:\`\`\`|~~~)`),s=new RegExp(`^ {0,${Math.min(3,o-1)}}#`);for(;t&&(h=t.split("\n",1)[0],u=h,this.options.pedantic&&(u=u.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!i.test(u))&&!s.test(u)&&!e.test(u)&&!r.test(t);){if(u.search(/[^ ]/)>=o||!u.trim())p+="\n"+u.slice(o);else{if(a)break;if(l.search(/[^ ]/)>=4)break;if(i.test(l))break;if(s.test(l))break;if(r.test(l))break;p+="\n"+u}a||u.trim()||(a=!0),n+=h+"\n",t=t.substring(h.length+1),l=u.slice(o)}}m.loose||(c?m.loose=!0:/\n *\n *$/.test(n)&&(c=!0)),this.options.gfm&&(r=/^\[[ xX]\] /.exec(p),r&&(i="[ ] "!==r[0],p=p.replace(/^\[[ xX]\] +/,""))),m.items.push({type:"list_item",raw:n,task:!!r,checked:i,loose:!1,text:p}),m.raw+=n}m.items[m.items.length-1].raw=n.trimRight(),m.items[m.items.length-1].text=p.trimRight(),m.raw=m.raw.trimRight();const _=m.items.length;for(s=0;s<_;s++)if(this.lexer.state.top=!1,m.items[s].tokens=this.lexer.blockTokens(m.items[s].text,[]),!m.loose){const t=m.items[s].tokens.filter((t=>"space"===t.type)),e=t.length>0&&t.some((t=>/\n.*\n/.test(t.raw)));m.loose=e}if(m.loose)for(s=0;s<_;s++)m.items[s].loose=!0;return m}}html(t){const e=this.rules.block.html.exec(t);if(e){const t={type:"html",block:!0,raw:e[0],pre:!this.options.sanitizer&&("pre"===e[1]||"script"===e[1]||"style"===e[1]),text:e[0]};if(this.options.sanitize){const n=this.options.sanitizer?this.options.sanitizer(e[0]):_(e[0]);t.type="paragraph",t.text=n,t.tokens=this.lexer.inline(n)}return t}}def(t){const e=this.rules.block.def.exec(t);if(e){const t=e[1].toLowerCase().replace(/\s+/g," "),n=e[2]?e[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",r=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline._escapes,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:n,title:r}}}table(t){const e=this.rules.block.table.exec(t);if(e){const t={type:"table",header:O(e[1]).map((t=>({text:t}))),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(t.header.length===t.align.length){t.raw=e[0];let n,r,i,o,s=t.align.length;for(n=0;n<s;n++)/^ *-+: *$/.test(t.align[n])?t.align[n]="right":/^ *:-+: *$/.test(t.align[n])?t.align[n]="center":/^ *:-+ *$/.test(t.align[n])?t.align[n]="left":t.align[n]=null;for(s=t.rows.length,n=0;n<s;n++)t.rows[n]=O(t.rows[n],t.header.length).map((t=>({text:t})));for(s=t.header.length,r=0;r<s;r++)t.header[r].tokens=this.lexer.inline(t.header[r].text);for(s=t.rows.length,r=0;r<s;r++)for(o=t.rows[r],i=0;i<o.length;i++)o[i].tokens=this.lexer.inline(o[i].text);return t}}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:"="===e[2].charAt(0)?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const t="\n"===e[1].charAt(e[1].length-1)?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:_(e[1])}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(e[0]):_(e[0]):e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const t=e[2].trim();if(!this.options.pedantic&&/^</.test(t)){if(!/>$/.test(t))return;const e=P(t.slice(0,-1),"\\");if((t.length-e.length)%2==0)return}else{const t=function(t,e){if(-1===t.indexOf(e[1]))return-1;const n=t.length;let r=0,i=0;for(;i<n;i++)if("\\"===t[i])i++;else if(t[i]===e[0])r++;else if(t[i]===e[1]&&(r--,r<0))return i;return-1}(e[2],"()");if(t>-1){const n=(0===e[0].indexOf("!")?5:4)+e[1].length+t;e[2]=e[2].substring(0,t),e[0]=e[0].substring(0,n).trim(),e[3]=""}}let n=e[2],r="";if(this.options.pedantic){const t=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);t&&(n=t[1],r=t[3])}else r=e[3]?e[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(n=this.options.pedantic&&!/>$/.test(t)?n.slice(1):n.slice(1,-1)),L(e,{href:n?n.replace(this.rules.inline._escapes,"$1"):n,title:r?r.replace(this.rules.inline._escapes,"$1"):r},e[0],this.lexer)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){let t=(n[2]||n[1]).replace(/\s+/g," ");if(t=e[t.toLowerCase()],!t){const t=n[0].charAt(0);return{type:"text",raw:t,text:t}}return L(n,t,n[0],this.lexer)}}emStrong(t,e,n=""){let r=this.rules.inline.emStrong.lDelim.exec(t);if(!r)return;if(r[3]&&n.match(/[\p{L}\p{N}]/u))return;if(!(r[1]||r[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const n=r[0].length-1;let i,o,s=n,a=0;const c="*"===r[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(c.lastIndex=0,e=e.slice(-1*t.length+n);null!=(r=c.exec(e));){if(i=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!i)continue;if(o=i.length,r[3]||r[4]){s+=o;continue}if((r[5]||r[6])&&n%3&&!((n+o)%3)){a+=o;continue}if(s-=o,s>0)continue;o=Math.min(o,o+s+a);const e=t.slice(0,n+r.index+o+1);if(Math.min(n,o)%2){const t=e.slice(1,-1);return{type:"em",raw:e,text:t,tokens:this.lexer.inlineTokens(t)}}const c=e.slice(2,-2);return{type:"strong",raw:e,text:c,tokens:this.lexer.inlineTokens(c)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let t=e[2].replace(/\n/g," ");const n=/[^ ]/.test(t),r=/^ /.test(t)&&/ $/.test(t);return n&&r&&(t=t.substring(1,t.length-1)),t=_(t,!0),{type:"codespan",raw:e[0],text:t}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t,e){const n=this.rules.inline.autolink.exec(t);if(n){let t,r;return"@"===n[2]?(t=_(this.options.mangle?e(n[1]):n[1]),r="mailto:"+t):(t=_(n[1]),r=t),{type:"link",raw:n[0],text:t,href:r,tokens:[{type:"text",raw:t,text:t}]}}}url(t,e){let n;if(n=this.rules.inline.url.exec(t)){let t,r;if("@"===n[2])t=_(this.options.mangle?e(n[0]):n[0]),r="mailto:"+t;else{let e;do{e=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(e!==n[0]);t=_(n[0]),r="www."===n[1]?"http://"+n[0]:n[0]}return{type:"link",raw:n[0],text:t,href:r,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(t,e){const n=this.rules.inline.text.exec(t);if(n){let t;return t=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):_(n[0]):n[0]:_(this.options.smartypants?e(n[0]):n[0]),{type:"text",raw:n[0],text:t}}}}const R={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:C,lheading:/^((?:(?!^bull ).|\n(?!\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};R.def=w(R.def).replace("label",R._label).replace("title",R._title).getRegex(),R.bullet=/(?:[*+-]|\d{1,9}[.)])/,R.listItemStart=w(/^( *)(bull) */).replace("bull",R.bullet).getRegex(),R.list=w(R.list).replace(/bull/g,R.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+R.def.source+")").getRegex(),R._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",R._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,R.html=w(R.html,"i").replace("comment",R._comment).replace("tag",R._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),R.lheading=w(R.lheading).replace(/bull/g,R.bullet).getRegex(),R.paragraph=w(R._paragraph).replace("hr",R.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",R._tag).getRegex(),R.blockquote=w(R.blockquote).replace("paragraph",R.paragraph).getRegex(),R.normal={...R},R.gfm={...R.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"},R.gfm.table=w(R.gfm.table).replace("hr",R.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",R._tag).getRegex(),R.gfm.paragraph=w(R._paragraph).replace("hr",R.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",R.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",R._tag).getRegex(),R.pedantic={...R.normal,html:w("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",R._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:C,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:w(R.normal._paragraph).replace("hr",R.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",R.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const N={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:C,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,rDelimAst:/^[^_*]*?__[^_*]*?\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\*)[punct](\*+)(?=[\s]|$)|[^punct\s](\*+)(?!\*)(?=[punct\s]|$)|(?!\*)[punct\s](\*+)(?=[^punct\s])|[\s](\*+)(?!\*)(?=[punct])|(?!\*)[punct](\*+)(?!\*)(?=[punct])|[^punct\s](\*+)(?=[^punct\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\s]|$)|[^punct\s](_+)(?!_)(?=[punct\s]|$)|(?!_)[punct\s](_+)(?=[^punct\s])|[\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:C,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^((?![*_])[\spunctuation])/};function j(t){return t.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function z(t){let e,n,r="";const i=t.length;for(e=0;e<i;e++)n=t.charCodeAt(e),Math.random()>.5&&(n="x"+n.toString(16)),r+="&#"+n+";";return r}N._punctuation="\\p{P}$+<=>`^|~",N.punctuation=w(N.punctuation,"u").replace(/punctuation/g,N._punctuation).getRegex(),N.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,N.anyPunctuation=/\\[punct]/g,N._escapes=/\\([punct])/g,N._comment=w(R._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),N.emStrong.lDelim=w(N.emStrong.lDelim,"u").replace(/punct/g,N._punctuation).getRegex(),N.emStrong.rDelimAst=w(N.emStrong.rDelimAst,"gu").replace(/punct/g,N._punctuation).getRegex(),N.emStrong.rDelimUnd=w(N.emStrong.rDelimUnd,"gu").replace(/punct/g,N._punctuation).getRegex(),N.anyPunctuation=w(N.anyPunctuation,"gu").replace(/punct/g,N._punctuation).getRegex(),N._escapes=w(N._escapes,"gu").replace(/punct/g,N._punctuation).getRegex(),N._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,N._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,N.autolink=w(N.autolink).replace("scheme",N._scheme).replace("email",N._email).getRegex(),N._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,N.tag=w(N.tag).replace("comment",N._comment).replace("attribute",N._attribute).getRegex(),N._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,N._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,N._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,N.link=w(N.link).replace("label",N._label).replace("href",N._href).replace("title",N._title).getRegex(),N.reflink=w(N.reflink).replace("label",N._label).replace("ref",R._label).getRegex(),N.nolink=w(N.nolink).replace("ref",R._label).getRegex(),N.reflinkSearch=w(N.reflinkSearch,"g").replace("reflink",N.reflink).replace("nolink",N.nolink).getRegex(),N.normal={...N},N.pedantic={...N.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:w(/^!?\[(label)\]\((.*?)\)/).replace("label",N._label).getRegex(),reflink:w(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",N._label).getRegex()},N.gfm={...N.normal,escape:w(N.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},N.gfm.url=w(N.gfm.url,"i").replace("email",N.gfm._extended_email).getRegex(),N.breaks={...N.gfm,br:w(N.br).replace("{2,}","*").getRegex(),text:w(N.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class B{constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||u,this.options.tokenizer=this.options.tokenizer||new D,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const e={block:R.normal,inline:N.normal};this.options.pedantic?(e.block=R.pedantic,e.inline=N.pedantic):this.options.gfm&&(e.block=R.gfm,this.options.breaks?e.inline=N.breaks:e.inline=N.gfm),this.tokenizer.rules=e}static get rules(){return{block:R,inline:N}}static lex(t,e){return new B(e).lex(t)}static lexInline(t,e){return new B(e).inlineTokens(t)}lex(t){let e;for(t=t.replace(/\r\n|\r/g,"\n"),this.blockTokens(t,this.tokens);e=this.inlineQueue.shift();)this.inlineTokens(e.src,e.tokens);return this.tokens}blockTokens(t,e=[]){let n,r,i,o;for(t=this.options.pedantic?t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t.replace(/^( *)(\t+)/gm,((t,e,n)=>e+"    ".repeat(n.length)));t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((r=>!!(n=r.call({lexer:this},t,e))&&(t=t.substring(n.raw.length),e.push(n),!0)))))if(n=this.tokenizer.space(t))t=t.substring(n.raw.length),1===n.raw.length&&e.length>0?e[e.length-1].raw+="\n":e.push(n);else if(n=this.tokenizer.code(t))t=t.substring(n.raw.length),r=e[e.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?e.push(n):(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);else if(n=this.tokenizer.fences(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.heading(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.hr(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.blockquote(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.list(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.html(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.def(t))t=t.substring(n.raw.length),r=e[e.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title}):(r.raw+="\n"+n.raw,r.text+="\n"+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);else if(n=this.tokenizer.table(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.lheading(t))t=t.substring(n.raw.length),e.push(n);else{if(i=t,this.options.extensions&&this.options.extensions.startBlock){let e=1/0;const n=t.slice(1);let r;this.options.extensions.startBlock.forEach((function(t){r=t.call({lexer:this},n),"number"==typeof r&&r>=0&&(e=Math.min(e,r))})),e<1/0&&e>=0&&(i=t.substring(0,e+1))}if(this.state.top&&(n=this.tokenizer.paragraph(i)))r=e[e.length-1],o&&"paragraph"===r.type?(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):e.push(n),o=i.length!==t.length,t=t.substring(n.raw.length);else if(n=this.tokenizer.text(t))t=t.substring(n.raw.length),r=e[e.length-1],r&&"text"===r.type?(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):e.push(n);else if(t){const e="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){c.error(e);break}throw new Error(e)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){let n,r,i,o,s,a,l=t;if(this.tokens.links){const t=Object.keys(this.tokens.links);if(t.length>0)for(;null!=(o=this.tokenizer.rules.inline.reflinkSearch.exec(l));)t.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(o=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(o=this.tokenizer.rules.inline.anyPunctuation.exec(l));)l=l.slice(0,o.index)+"++"+l.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(s||(a=""),s=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((r=>!!(n=r.call({lexer:this},t,e))&&(t=t.substring(n.raw.length),e.push(n),!0)))))if(n=this.tokenizer.escape(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.tag(t))t=t.substring(n.raw.length),r=e[e.length-1],r&&"text"===n.type&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):e.push(n);else if(n=this.tokenizer.link(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.reflink(t,this.tokens.links))t=t.substring(n.raw.length),r=e[e.length-1],r&&"text"===n.type&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):e.push(n);else if(n=this.tokenizer.emStrong(t,l,a))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.codespan(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.br(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.del(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.autolink(t,z))t=t.substring(n.raw.length),e.push(n);else if(this.state.inLink||!(n=this.tokenizer.url(t,z))){if(i=t,this.options.extensions&&this.options.extensions.startInline){let e=1/0;const n=t.slice(1);let r;this.options.extensions.startInline.forEach((function(t){r=t.call({lexer:this},n),"number"==typeof r&&r>=0&&(e=Math.min(e,r))})),e<1/0&&e>=0&&(i=t.substring(0,e+1))}if(n=this.tokenizer.inlineText(i,j))t=t.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(a=n.raw.slice(-1)),s=!0,r=e[e.length-1],r&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):e.push(n);else if(t){const e="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){c.error(e);break}throw new Error(e)}}else t=t.substring(n.raw.length),e.push(n);return e}}class F{constructor(t){this.options=t||u}code(t,e,n){const r=(e||"").match(/\S*/)[0];if(this.options.highlight){const e=this.options.highlight(t,r);null!=e&&e!==t&&(n=!0,t=e)}return t=t.replace(/\n$/,"")+"\n",r?'<pre><code class="'+this.options.langPrefix+_(r)+'">'+(n?t:_(t,!0))+"</code></pre>\n":"<pre><code>"+(n?t:_(t,!0))+"</code></pre>\n"}blockquote(t){return`<blockquote>\n${t}</blockquote>\n`}html(t,e){return t}heading(t,e,n,r){if(this.options.headerIds){return`<h${e} id="${this.options.headerPrefix+r.slug(n)}">${t}</h${e}>\n`}return`<h${e}>${t}</h${e}>\n`}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(t,e,n){const r=e?"ol":"ul";return"<"+r+(e&&1!==n?' start="'+n+'"':"")+">\n"+t+"</"+r+">\n"}listitem(t){return`<li>${t}</li>\n`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(t){return`<p>${t}</p>\n`}table(t,e){return e&&(e=`<tbody>${e}</tbody>`),"<table>\n<thead>\n"+t+"</thead>\n"+e+"</table>\n"}tablerow(t){return`<tr>\n${t}</tr>\n`}tablecell(t,e){const n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>\n`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(t){return`<del>${t}</del>`}link(t,e,n){if(null===(t=S(this.options.sanitize,this.options.baseUrl,t)))return n;let r='<a href="'+t+'"';return e&&(r+=' title="'+e+'"'),r+=">"+n+"</a>",r}image(t,e,n){if(null===(t=S(this.options.sanitize,this.options.baseUrl,t)))return n;let r=`<img src="${t}" alt="${n}"`;return e&&(r+=` title="${e}"`),r+=this.options.xhtml?"/>":">",r}text(t){return t}}class U{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,e,n){return""+n}image(t,e,n){return""+n}br(){return""}}class V{constructor(){this.seen={}}serialize(t){return t.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(t,e){let n=t,r=0;if(this.seen.hasOwnProperty(n)){r=this.seen[t];do{r++,n=t+"-"+r}while(this.seen.hasOwnProperty(n))}return e||(this.seen[t]=r,this.seen[n]=0),n}slug(t,e={}){const n=this.serialize(t);return this.getNextSafeSlug(n,e.dryrun)}}class q{constructor(t){this.options=t||u,this.options.renderer=this.options.renderer||new F,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new U,this.slugger=new V}static parse(t,e){return new q(e).parse(t)}static parseInline(t,e){return new q(e).parseInline(t)}parse(t,e=!0){let n,r,i,o,s,a,l,u,h,p,f,d,g,m,y,_,v,b,w,E="";const T=t.length;for(n=0;n<T;n++)if(p=t[n],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[p.type]&&(w=this.options.extensions.renderers[p.type].call({parser:this},p),!1!==w||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(p.type)))E+=w||"";else switch(p.type){case"space":continue;case"hr":E+=this.renderer.hr();continue;case"heading":E+=this.renderer.heading(this.parseInline(p.tokens),p.depth,x(this.parseInline(p.tokens,this.textRenderer)),this.slugger);continue;case"code":E+=this.renderer.code(p.text,p.lang,p.escaped);continue;case"table":for(u="",l="",o=p.header.length,r=0;r<o;r++)l+=this.renderer.tablecell(this.parseInline(p.header[r].tokens),{header:!0,align:p.align[r]});for(u+=this.renderer.tablerow(l),h="",o=p.rows.length,r=0;r<o;r++){for(a=p.rows[r],l="",s=a.length,i=0;i<s;i++)l+=this.renderer.tablecell(this.parseInline(a[i].tokens),{header:!1,align:p.align[i]});h+=this.renderer.tablerow(l)}E+=this.renderer.table(u,h);continue;case"blockquote":h=this.parse(p.tokens),E+=this.renderer.blockquote(h);continue;case"list":for(f=p.ordered,d=p.start,g=p.loose,o=p.items.length,h="",r=0;r<o;r++)y=p.items[r],_=y.checked,v=y.task,m="",y.task&&(b=this.renderer.checkbox(_),g?y.tokens.length>0&&"paragraph"===y.tokens[0].type?(y.tokens[0].text=b+" "+y.tokens[0].text,y.tokens[0].tokens&&y.tokens[0].tokens.length>0&&"text"===y.tokens[0].tokens[0].type&&(y.tokens[0].tokens[0].text=b+" "+y.tokens[0].tokens[0].text)):y.tokens.unshift({type:"text",text:b}):m+=b),m+=this.parse(y.tokens,g),h+=this.renderer.listitem(m,v,_);E+=this.renderer.list(h,f,d);continue;case"html":E+=this.renderer.html(p.text,p.block);continue;case"paragraph":E+=this.renderer.paragraph(this.parseInline(p.tokens));continue;case"text":for(h=p.tokens?this.parseInline(p.tokens):p.text;n+1<T&&"text"===t[n+1].type;)p=t[++n],h+="\n"+(p.tokens?this.parseInline(p.tokens):p.text);E+=e?this.renderer.paragraph(h):h;continue;default:{const t='Token with "'+p.type+'" type was not found.';if(this.options.silent)return void c.error(t);throw new Error(t)}}return E}parseInline(t,e){e=e||this.renderer;let n,r,i,o="";const s=t.length;for(n=0;n<s;n++)if(r=t[n],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]&&(i=this.options.extensions.renderers[r.type].call({parser:this},r),!1!==i||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)))o+=i||"";else switch(r.type){case"escape":case"text":o+=e.text(r.text);break;case"html":o+=e.html(r.text);break;case"link":o+=e.link(r.href,r.title,this.parseInline(r.tokens,e));break;case"image":o+=e.image(r.href,r.title,r.text);break;case"strong":o+=e.strong(this.parseInline(r.tokens,e));break;case"em":o+=e.em(this.parseInline(r.tokens,e));break;case"codespan":o+=e.codespan(r.text);break;case"br":o+=e.br();break;case"del":o+=e.del(this.parseInline(r.tokens,e));break;default:{const t='Token with "'+r.type+'" type was not found.';if(this.options.silent)return void c.error(t);throw new Error(t)}}return o}}class W{constructor(t){this.options=t||u}static passThroughHooks=new Set(["preprocess","postprocess"]);preprocess(t){return t}postprocess(t){return t}}const G=new class{defaults={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};options=this.setOptions;parse=this.#t(B.lex,q.parse);parseInline=this.#t(B.lexInline,q.parseInline);Parser=q;parser=q.parse;Renderer=F;TextRenderer=U;Lexer=B;lexer=B.lex;Tokenizer=D;Slugger=V;Hooks=W;constructor(...t){this.use(...t)}walkTokens(t,e){let n=[];for(const r of t)switch(n=n.concat(e.call(this,r)),r.type){case"table":for(const t of r.header)n=n.concat(this.walkTokens(t.tokens,e));for(const t of r.rows)for(const r of t)n=n.concat(this.walkTokens(r.tokens,e));break;case"list":n=n.concat(this.walkTokens(r.items,e));break;default:this.defaults.extensions&&this.defaults.extensions.childTokens&&this.defaults.extensions.childTokens[r.type]?this.defaults.extensions.childTokens[r.type].forEach((t=>{n=n.concat(this.walkTokens(r[t],e))})):r.tokens&&(n=n.concat(this.walkTokens(r.tokens,e)))}return n}use(...t){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach((t=>{const n={...t};if(n.async=this.defaults.async||n.async||!1,t.extensions&&(t.extensions.forEach((t=>{if(!t.name)throw new Error("extension name required");if(t.renderer){const n=e.renderers[t.name];e.renderers[t.name]=n?function(...e){let r=t.renderer.apply(this,e);return!1===r&&(r=n.apply(this,e)),r}:t.renderer}if(t.tokenizer){if(!t.level||"block"!==t.level&&"inline"!==t.level)throw new Error("extension level must be 'block' or 'inline'");e[t.level]?e[t.level].unshift(t.tokenizer):e[t.level]=[t.tokenizer],t.start&&("block"===t.level?e.startBlock?e.startBlock.push(t.start):e.startBlock=[t.start]:"inline"===t.level&&(e.startInline?e.startInline.push(t.start):e.startInline=[t.start]))}t.childTokens&&(e.childTokens[t.name]=t.childTokens)})),n.extensions=e),t.renderer){const e=this.defaults.renderer||new F(this.defaults);for(const n in t.renderer){const r=e[n];e[n]=(...i)=>{let o=t.renderer[n].apply(e,i);return!1===o&&(o=r.apply(e,i)),o}}n.renderer=e}if(t.tokenizer){const e=this.defaults.tokenizer||new D(this.defaults);for(const n in t.tokenizer){const r=e[n];e[n]=(...i)=>{let o=t.tokenizer[n].apply(e,i);return!1===o&&(o=r.apply(e,i)),o}}n.tokenizer=e}if(t.hooks){const e=this.defaults.hooks||new W;for(const n in t.hooks){const r=e[n];W.passThroughHooks.has(n)?e[n]=i=>{if(this.defaults.async)return Promise.resolve(t.hooks[n].call(e,i)).then((t=>r.call(e,t)));const o=t.hooks[n].call(e,i);return r.call(e,o)}:e[n]=(...i)=>{let o=t.hooks[n].apply(e,i);return!1===o&&(o=r.apply(e,i)),o}}n.hooks=e}if(t.walkTokens){const e=this.defaults.walkTokens;n.walkTokens=function(n){let r=[];return r.push(t.walkTokens.call(this,n)),e&&(r=r.concat(e.call(this,n))),r}}this.defaults={...this.defaults,...n}})),this}setOptions(t){return this.defaults={...this.defaults,...t},this}#t(t,e){return(n,r,i)=>{"function"==typeof r&&(i=r,r=null);const o={...r};r={...this.defaults,...o};const s=this.#e(r.silent,r.async,i);if(null==n)return s(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof n)return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(function(t,e){t&&!t.silent&&(e&&c.warn("marked(): callback is deprecated since version 5.0.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/using_pro#async"),(t.sanitize||t.sanitizer)&&c.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options"),(t.highlight||"language-"!==t.langPrefix)&&c.warn("marked(): highlight and langPrefix parameters are deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-highlight."),t.mangle&&c.warn("marked(): mangle parameter is enabled by default, but is deprecated since version 5.0.0, and will be removed in the future. To clear this warning, install https://www.npmjs.com/package/marked-mangle, or disable by setting `{mangle: false}`."),t.baseUrl&&c.warn("marked(): baseUrl parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-base-url."),t.smartypants&&c.warn("marked(): smartypants parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-smartypants."),t.xhtml&&c.warn("marked(): xhtml parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-xhtml."),(t.headerIds||t.headerPrefix)&&c.warn("marked(): headerIds and headerPrefix parameters enabled by default, but are deprecated since version 5.0.0, and will be removed in the future. To clear this warning, install  https://www.npmjs.com/package/marked-gfm-heading-id, or disable by setting `{headerIds: false}`."))}(r,i),r.hooks&&(r.hooks.options=r),i){const o=r.highlight;let a;try{r.hooks&&(n=r.hooks.preprocess(n)),a=t(n,r)}catch(t){return s(t)}const c=t=>{let n;if(!t)try{r.walkTokens&&this.walkTokens(a,r.walkTokens),n=e(a,r),r.hooks&&(n=r.hooks.postprocess(n))}catch(e){t=e}return r.highlight=o,t?s(t):i(null,n)};if(!o||o.length<3)return c();if(delete r.highlight,!a.length)return c();let l=0;return this.walkTokens(a,(t=>{"code"===t.type&&(l++,setTimeout((()=>{o(t.text,t.lang,((e,n)=>{if(e)return c(e);null!=n&&n!==t.text&&(t.text=n,t.escaped=!0),l--,0===l&&c()}))}),0))})),void(0===l&&c())}if(r.async)return Promise.resolve(r.hooks?r.hooks.preprocess(n):n).then((e=>t(e,r))).then((t=>r.walkTokens?Promise.all(this.walkTokens(t,r.walkTokens)).then((()=>t)):t)).then((t=>e(t,r))).then((t=>r.hooks?r.hooks.postprocess(t):t)).catch(s);try{r.hooks&&(n=r.hooks.preprocess(n));const i=t(n,r);r.walkTokens&&this.walkTokens(i,r.walkTokens);let o=e(i,r);return r.hooks&&(o=r.hooks.postprocess(o)),o}catch(t){return s(t)}}}#e(t,e,n){return r=>{if(r.message+="\nPlease report this to https://github.com/markedjs/marked.",t){const t="<p>An error occurred:</p><pre>"+_(r.message+"",!0)+"</pre>";return e?Promise.resolve(t):n?void n(null,t):t}if(e)return Promise.reject(r);if(!n)throw r;n(r)}}}(u);function $(t,e,n){return G.parse(t,e,n)}$.options=$.setOptions=function(t){return G.setOptions(t),$.defaults=G.defaults,h($.defaults),$},$.getDefaults=l,$.defaults=u,$.use=function(...t){return G.use(...t),$.defaults=G.defaults,h($.defaults),$},$.walkTokens=function(t,e){return G.walkTokens(t,e)},$.parseInline=G.parseInline,$.Parser=q,$.parser=q.parse,$.Renderer=F,$.TextRenderer=U,$.Lexer=B,$.lexer=B.lex,$.Tokenizer=D,$.Slugger=V,$.Hooks=W,$.parse=$;$.options,$.setOptions,$.use,$.walkTokens,$.parseInline;class H extends Error{}class Z extends H{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class Y extends H{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class X extends H{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class K extends H{}class J extends H{constructor(t){super(`Invalid unit ${t}`)}}class Q extends H{}class tt extends H{constructor(){super("Zone is an abstract class")}}const et="numeric",nt="short",rt="long",it={year:et,month:et,day:et},ot={year:et,month:nt,day:et},st={year:et,month:nt,day:et,weekday:nt},at={year:et,month:rt,day:et},ct={year:et,month:rt,day:et,weekday:rt},lt={hour:et,minute:et},ut={hour:et,minute:et,second:et},ht={hour:et,minute:et,second:et,timeZoneName:nt},pt={hour:et,minute:et,second:et,timeZoneName:rt},ft={hour:et,minute:et,hourCycle:"h23"},dt={hour:et,minute:et,second:et,hourCycle:"h23"},gt={hour:et,minute:et,second:et,hourCycle:"h23",timeZoneName:nt},mt={hour:et,minute:et,second:et,hourCycle:"h23",timeZoneName:rt},yt={year:et,month:et,day:et,hour:et,minute:et},_t={year:et,month:et,day:et,hour:et,minute:et,second:et},vt={year:et,month:nt,day:et,hour:et,minute:et},xt={year:et,month:nt,day:et,hour:et,minute:et,second:et},bt={year:et,month:nt,day:et,weekday:nt,hour:et,minute:et},wt={year:et,month:rt,day:et,hour:et,minute:et,timeZoneName:nt},Et={year:et,month:rt,day:et,hour:et,minute:et,second:et,timeZoneName:nt},Tt={year:et,month:rt,day:et,weekday:rt,hour:et,minute:et,timeZoneName:rt},St={year:et,month:rt,day:et,weekday:rt,hour:et,minute:et,second:et,timeZoneName:rt};class kt{get type(){throw new tt}get name(){throw new tt}get ianaName(){return this.name}get isUniversal(){throw new tt}offsetName(t,e){throw new tt}formatOffset(t,e){throw new tt}offset(t){throw new tt}equals(t){throw new tt}get isValid(){throw new tt}}let At=null;class Mt extends kt{static get instance(){return null===At&&(At=new Mt),At}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:e,locale:n}){return xe(t,e,n)}formatOffset(t,e){return Te(this.offset(t),e)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return"system"===t.type}get isValid(){return!0}}let It={};const Ct={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let Ot={};class Pt extends kt{static create(t){return Ot[t]||(Ot[t]=new Pt(t)),Ot[t]}static resetCache(){Ot={},It={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch(t){return!1}}constructor(t){super(),this.zoneName=t,this.valid=Pt.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:e,locale:n}){return xe(t,e,n,this.name)}formatOffset(t,e){return Te(this.offset(t),e)}offset(t){const e=new Date(t);if(isNaN(e))return NaN;const n=(r=this.name,It[r]||(It[r]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:r,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),It[r]);var r;let[i,o,s,a,c,l,u]=n.formatToParts?function(t,e){const n=t.formatToParts(e),r=[];for(let t=0;t<n.length;t++){const{type:e,value:i}=n[t],o=Ct[e];"era"===e?r[o]=i:ne(o)||(r[o]=parseInt(i,10))}return r}(n,e):function(t,e){const n=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,i,o,s,a,c,l,u]=r;return[s,i,o,a,c,l,u]}(n,e);"BC"===a&&(i=1-Math.abs(i));let h=+e;const p=h%1e3;return h-=p>=0?p:1e3+p,(ye({year:i,month:o,day:s,hour:24===c?0:c,minute:l,second:u,millisecond:0})-h)/6e4}equals(t){return"iana"===t.type&&t.name===this.name}get isValid(){return this.valid}}let Lt={};let Dt={};function Rt(t,e={}){const n=JSON.stringify([t,e]);let r=Dt[n];return r||(r=new Intl.DateTimeFormat(t,e),Dt[n]=r),r}let Nt={};let jt={};let zt=null;function Bt(t,e,n,r){const i=t.listingMode();return"error"===i?null:"en"===i?n(e):r(e)}class Ft{constructor(t,e,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:r,floor:i,...o}=n;if(!e||Object.keys(o).length>0){const e={useGrouping:!1,...n};n.padTo>0&&(e.minimumIntegerDigits=n.padTo),this.inf=function(t,e={}){const n=JSON.stringify([t,e]);let r=Nt[n];return r||(r=new Intl.NumberFormat(t,e),Nt[n]=r),r}(t,e)}}format(t){if(this.inf){const e=this.floor?Math.floor(t):t;return this.inf.format(e)}return le(this.floor?Math.floor(t):fe(t,3),this.padTo)}}class Ut{constructor(t,e,n){let r;if(this.opts=n,this.originalZone=void 0,this.opts.timeZone)this.dt=t;else if("fixed"===t.zone.type){const e=t.offset/60*-1,n=e>=0?`Etc/GMT+${e}`:`Etc/GMT${e}`;0!==t.offset&&Pt.create(n).valid?(r=n,this.dt=t):(r="UTC",this.dt=0===t.offset?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else"system"===t.zone.type?this.dt=t:"iana"===t.zone.type?(this.dt=t,r=t.zone.name):(r="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const i={...this.opts};i.timeZone=i.timeZone||r,this.dtf=Rt(e,i)}format(){return this.originalZone?this.formatToParts().map((({value:t})=>t)).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map((t=>{if("timeZoneName"===t.type){const e=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...t,value:e}}return t})):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class Vt{constructor(t,e,n){this.opts={style:"long",...n},!e&&oe()&&(this.rtf=function(t,e={}){const{base:n,...r}=e,i=JSON.stringify([t,r]);let o=jt[i];return o||(o=new Intl.RelativeTimeFormat(t,e),jt[i]=o),o}(t,n))}format(t,e){return this.rtf?this.rtf.format(t,e):function(t,e,n="always",r=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},o=-1===["hours","minutes","seconds"].indexOf(t);if("auto"===n&&o){const n="days"===t;switch(e){case 1:return n?"tomorrow":`next ${i[t][0]}`;case-1:return n?"yesterday":`last ${i[t][0]}`;case 0:return n?"today":`this ${i[t][0]}`}}const s=Object.is(e,-0)||e<0,a=Math.abs(e),c=1===a,l=i[t],u=r?c?l[1]:l[2]||l[1]:c?i[t][0]:t;return s?`${a} ${u} ago`:`in ${a} ${u}`}(e,t,this.opts.numeric,"long"!==this.opts.style)}formatToParts(t,e){return this.rtf?this.rtf.formatToParts(t,e):[]}}class qt{static fromOpts(t){return qt.create(t.locale,t.numberingSystem,t.outputCalendar,t.defaultToEN)}static create(t,e,n,r=!1){const i=t||ee.defaultLocale,o=i||(r?"en-US":zt||(zt=(new Intl.DateTimeFormat).resolvedOptions().locale,zt)),s=e||ee.defaultNumberingSystem,a=n||ee.defaultOutputCalendar;return new qt(o,s,a,i)}static resetCache(){zt=null,Dt={},Nt={},jt={}}static fromObject({locale:t,numberingSystem:e,outputCalendar:n}={}){return qt.create(t,e,n)}constructor(t,e,n,r){const[i,o,s]=function(t){const e=t.indexOf("-x-");-1!==e&&(t=t.substring(0,e));const n=t.indexOf("-u-");if(-1===n)return[t];{let e,r;try{e=Rt(t).resolvedOptions(),r=t}catch(i){const o=t.substring(0,n);e=Rt(o).resolvedOptions(),r=o}const{numberingSystem:i,calendar:o}=e;return[r,i,o]}}(t);this.locale=i,this.numberingSystem=e||o||null,this.outputCalendar=n||s||null,this.intl=function(t,e,n){return n||e?(t.includes("-u-")||(t+="-u"),n&&(t+=`-ca-${n}`),e&&(t+=`-nu-${e}`),t):t}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=r,this.fastNumbersCached=null}get fastNumbers(){var t;return null==this.fastNumbersCached&&(this.fastNumbersCached=(!(t=this).numberingSystem||"latn"===t.numberingSystem)&&("latn"===t.numberingSystem||!t.locale||t.locale.startsWith("en")||"latn"===new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),e=!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar);return t&&e?"en":"intl"}clone(t){return t&&0!==Object.getOwnPropertyNames(t).length?qt.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,t.defaultToEN||!1):this}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,e=!1){return Bt(this,t,Ie,(()=>{const n=e?{month:t,day:"numeric"}:{month:t},r=e?"format":"standalone";return this.monthsCache[r][t]||(this.monthsCache[r][t]=function(t){const e=[];for(let n=1;n<=12;n++){const r=Hr.utc(2009,n,1);e.push(t(r))}return e}((t=>this.extract(t,n,"month")))),this.monthsCache[r][t]}))}weekdays(t,e=!1){return Bt(this,t,Le,(()=>{const n=e?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},r=e?"format":"standalone";return this.weekdaysCache[r][t]||(this.weekdaysCache[r][t]=function(t){const e=[];for(let n=1;n<=7;n++){const r=Hr.utc(2016,11,13+n);e.push(t(r))}return e}((t=>this.extract(t,n,"weekday")))),this.weekdaysCache[r][t]}))}meridiems(){return Bt(this,void 0,(()=>De),(()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Hr.utc(2016,11,13,9),Hr.utc(2016,11,13,19)].map((e=>this.extract(e,t,"dayperiod")))}return this.meridiemCache}))}eras(t){return Bt(this,t,ze,(()=>{const e={era:t};return this.eraCache[t]||(this.eraCache[t]=[Hr.utc(-40,1,1),Hr.utc(2017,1,1)].map((t=>this.extract(t,e,"era")))),this.eraCache[t]}))}extract(t,e,n){const r=this.dtFormatter(t,e).formatToParts().find((t=>t.type.toLowerCase()===n));return r?r.value:null}numberFormatter(t={}){return new Ft(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,e={}){return new Ut(t,this.intl,e)}relFormatter(t={}){return new Vt(this.intl,this.isEnglish(),t)}listFormatter(t={}){return function(t,e={}){const n=JSON.stringify([t,e]);let r=Lt[n];return r||(r=new Intl.ListFormat(t,e),Lt[n]=r),r}(this.intl,t)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}}let Wt=null;class Gt extends kt{static get utcInstance(){return null===Wt&&(Wt=new Gt(0)),Wt}static instance(t){return 0===t?Gt.utcInstance:new Gt(t)}static parseSpecifier(t){if(t){const e=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(e)return new Gt(be(e[1],e[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${Te(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${Te(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,e){return Te(this.fixed,e)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return"fixed"===t.type&&t.fixed===this.fixed}get isValid(){return!0}}class $t extends kt{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Ht(t,e){if(ne(t)||null===t)return e;if(t instanceof kt)return t;if("string"==typeof t){const n=t.toLowerCase();return"default"===n?e:"local"===n||"system"===n?Mt.instance:"utc"===n||"gmt"===n?Gt.utcInstance:Gt.parseSpecifier(n)||Pt.create(t)}return re(t)?Gt.instance(t):"object"==typeof t&&"offset"in t&&"function"==typeof t.offset?t:new $t(t)}let Zt,Yt=()=>Date.now(),Xt="system",Kt=null,Jt=null,Qt=null,te=60;class ee{static get now(){return Yt}static set now(t){Yt=t}static set defaultZone(t){Xt=t}static get defaultZone(){return Ht(Xt,Mt.instance)}static get defaultLocale(){return Kt}static set defaultLocale(t){Kt=t}static get defaultNumberingSystem(){return Jt}static set defaultNumberingSystem(t){Jt=t}static get defaultOutputCalendar(){return Qt}static set defaultOutputCalendar(t){Qt=t}static get twoDigitCutoffYear(){return te}static set twoDigitCutoffYear(t){te=t%100}static get throwOnInvalid(){return Zt}static set throwOnInvalid(t){Zt=t}static resetCaches(){qt.resetCache(),Pt.resetCache()}}function ne(t){return void 0===t}function re(t){return"number"==typeof t}function ie(t){return"number"==typeof t&&t%1==0}function oe(){try{return"undefined"!=typeof Intl&&!!Intl.RelativeTimeFormat}catch(t){return!1}}function se(t,e,n){if(0!==t.length)return t.reduce(((t,r)=>{const i=[e(r),r];return t&&n(t[0],i[0])===t[0]?t:i}),null)[1]}function ae(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ce(t,e,n){return ie(t)&&t>=e&&t<=n}function le(t,e=2){let n;return n=t<0?"-"+(""+-t).padStart(e,"0"):(""+t).padStart(e,"0"),n}function ue(t){return ne(t)||null===t||""===t?void 0:parseInt(t,10)}function he(t){return ne(t)||null===t||""===t?void 0:parseFloat(t)}function pe(t){if(!ne(t)&&null!==t&&""!==t){const e=1e3*parseFloat("0."+t);return Math.floor(e)}}function fe(t,e,n=!1){const r=10**e;return(n?Math.trunc:Math.round)(t*r)/r}function de(t){return t%4==0&&(t%100!=0||t%400==0)}function ge(t){return de(t)?366:365}function me(t,e){const n=function(t,e){return t-e*Math.floor(t/e)}(e-1,12)+1;return 2===n?de(t+(e-n)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function ye(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function _e(t){const e=(t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400))%7,n=t-1,r=(n+Math.floor(n/4)-Math.floor(n/100)+Math.floor(n/400))%7;return 4===e||3===r?53:52}function ve(t){return t>99?t:t>ee.twoDigitCutoffYear?1900+t:2e3+t}function xe(t,e,n,r=null){const i=new Date(t),o={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(o.timeZone=r);const s={timeZoneName:e,...o},a=new Intl.DateTimeFormat(n,s).formatToParts(i).find((t=>"timezonename"===t.type.toLowerCase()));return a?a.value:null}function be(t,e){let n=parseInt(t,10);Number.isNaN(n)&&(n=0);const r=parseInt(e,10)||0;return 60*n+(n<0||Object.is(n,-0)?-r:r)}function we(t){const e=Number(t);if("boolean"==typeof t||""===t||Number.isNaN(e))throw new Q(`Invalid unit value ${t}`);return e}function Ee(t,e){const n={};for(const r in t)if(ae(t,r)){const i=t[r];if(null==i)continue;n[e(r)]=we(i)}return n}function Te(t,e){const n=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),i=t>=0?"+":"-";switch(e){case"short":return`${i}${le(n,2)}:${le(r,2)}`;case"narrow":return`${i}${n}${r>0?`:${r}`:""}`;case"techie":return`${i}${le(n,2)}${le(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Se(t){return function(t,e){return e.reduce(((e,n)=>(e[n]=t[n],e)),{})}(t,["hour","minute","second","millisecond"])}const ke=["January","February","March","April","May","June","July","August","September","October","November","December"],Ae=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Me=["J","F","M","A","M","J","J","A","S","O","N","D"];function Ie(t){switch(t){case"narrow":return[...Me];case"short":return[...Ae];case"long":return[...ke];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Ce=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Oe=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Pe=["M","T","W","T","F","S","S"];function Le(t){switch(t){case"narrow":return[...Pe];case"short":return[...Oe];case"long":return[...Ce];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const De=["AM","PM"],Re=["Before Christ","Anno Domini"],Ne=["BC","AD"],je=["B","A"];function ze(t){switch(t){case"narrow":return[...je];case"short":return[...Ne];case"long":return[...Re];default:return null}}function Be(t,e){let n="";for(const r of t)r.literal?n+=r.val:n+=e(r.val);return n}const Fe={D:it,DD:ot,DDD:at,DDDD:ct,t:lt,tt:ut,ttt:ht,tttt:pt,T:ft,TT:dt,TTT:gt,TTTT:mt,f:yt,ff:vt,fff:wt,ffff:Tt,F:_t,FF:xt,FFF:Et,FFFF:St};class Ue{static create(t,e={}){return new Ue(t,e)}static parseFormat(t){let e=null,n="",r=!1;const i=[];for(let o=0;o<t.length;o++){const s=t.charAt(o);"'"===s?(n.length>0&&i.push({literal:r||/^\s+$/.test(n),val:n}),e=null,n="",r=!r):r||s===e?n+=s:(n.length>0&&i.push({literal:/^\s+$/.test(n),val:n}),n=s,e=s)}return n.length>0&&i.push({literal:r||/^\s+$/.test(n),val:n}),i}static macroTokenToFormatOpts(t){return Fe[t]}constructor(t,e){this.opts=e,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,e){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(t,{...this.opts,...e}).format()}dtFormatter(t,e={}){return this.loc.dtFormatter(t,{...this.opts,...e})}formatDateTime(t,e){return this.dtFormatter(t,e).format()}formatDateTimeParts(t,e){return this.dtFormatter(t,e).formatToParts()}formatInterval(t,e){return this.dtFormatter(t.start,e).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,e){return this.dtFormatter(t,e).resolvedOptions()}num(t,e=0){if(this.opts.forceSimple)return le(t,e);const n={...this.opts};return e>0&&(n.padTo=e),this.loc.numberFormatter(n).format(t)}formatDateTimeFromString(t,e){const n="en"===this.loc.listingMode(),r=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,i=(e,n)=>this.loc.extract(t,e,n),o=e=>t.isOffsetFixed&&0===t.offset&&e.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,e.format):"",s=()=>n?function(t){return De[t.hour<12?0:1]}(t):i({hour:"numeric",hourCycle:"h12"},"dayperiod"),a=(e,r)=>n?function(t,e){return Ie(e)[t.month-1]}(t,e):i(r?{month:e}:{month:e,day:"numeric"},"month"),c=(e,r)=>n?function(t,e){return Le(e)[t.weekday-1]}(t,e):i(r?{weekday:e}:{weekday:e,month:"long",day:"numeric"},"weekday"),l=e=>{const n=Ue.macroTokenToFormatOpts(e);return n?this.formatWithSystemDefault(t,n):e},u=e=>n?function(t,e){return ze(e)[t.year<0?0:1]}(t,e):i({era:e},"era");return Be(Ue.parseFormat(e),(e=>{switch(e){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12==0?12:t.hour%12);case"hh":return this.num(t.hour%12==0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return s();case"d":return r?i({day:"numeric"},"day"):this.num(t.day);case"dd":return r?i({day:"2-digit"},"day"):this.num(t.day,2);case"c":case"E":return this.num(t.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return r?i({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return r?i({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return a("short",!0);case"LLLL":return a("long",!0);case"LLLLL":return a("narrow",!0);case"M":return r?i({month:"numeric"},"month"):this.num(t.month);case"MM":return r?i({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return a("short",!1);case"MMMM":return a("long",!1);case"MMMMM":return a("narrow",!1);case"y":return r?i({year:"numeric"},"year"):this.num(t.year);case"yy":return r?i({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return r?i({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return r?i({year:"numeric"},"year"):this.num(t.year,6);case"G":return u("short");case"GG":return u("long");case"GGGGG":return u("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return l(e)}}))}formatDurationFromString(t,e){const n=t=>{switch(t[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},r=Ue.parseFormat(e),i=r.reduce(((t,{literal:e,val:n})=>e?t:t.concat(n)),[]);return Be(r,(t=>e=>{const r=n(e);return r?this.num(t.get(r),e.length):e})(t.shiftTo(...i.map(n).filter((t=>t)))))}}class Ve{constructor(t,e){this.reason=t,this.explanation=e}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const qe=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function We(...t){const e=t.reduce(((t,e)=>t+e.source),"");return RegExp(`^${e}$`)}function Ge(...t){return e=>t.reduce((([t,n,r],i)=>{const[o,s,a]=i(e,r);return[{...t,...o},s||n,a]}),[{},null,1]).slice(0,2)}function $e(t,...e){if(null==t)return[null,null];for(const[n,r]of e){const e=n.exec(t);if(e)return r(e)}return[null,null]}function He(...t){return(e,n)=>{const r={};let i;for(i=0;i<t.length;i++)r[t[i]]=ue(e[n+i]);return[r,null,n+i]}}const Ze=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Ye=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Xe=RegExp(`${Ye.source}${`(?:${Ze.source}?(?:\\[(${qe.source})\\])?)?`}`),Ke=RegExp(`(?:T${Xe.source})?`),Je=He("weekYear","weekNumber","weekDay"),Qe=He("year","ordinal"),tn=RegExp(`${Ye.source} ?(?:${Ze.source}|(${qe.source}))?`),en=RegExp(`(?: ${tn.source})?`);function nn(t,e,n){const r=t[e];return ne(r)?n:ue(r)}function rn(t,e){return[{hours:nn(t,e,0),minutes:nn(t,e+1,0),seconds:nn(t,e+2,0),milliseconds:pe(t[e+3])},null,e+4]}function on(t,e){const n=!t[e]&&!t[e+1],r=be(t[e+1],t[e+2]);return[{},n?null:Gt.instance(r),e+3]}function sn(t,e){return[{},t[e]?Pt.create(t[e]):null,e+1]}const an=RegExp(`^T?${Ye.source}$`),cn=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function ln(t){const[e,n,r,i,o,s,a,c,l]=t,u="-"===e[0],h=c&&"-"===c[0],p=(t,e=!1)=>void 0!==t&&(e||t&&u)?-t:t;return[{years:p(he(n)),months:p(he(r)),weeks:p(he(i)),days:p(he(o)),hours:p(he(s)),minutes:p(he(a)),seconds:p(he(c),"-0"===c),milliseconds:p(pe(l),h)}]}const un={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function hn(t,e,n,r,i,o,s){const a={year:2===e.length?ve(ue(e)):ue(e),month:Ae.indexOf(n)+1,day:ue(r),hour:ue(i),minute:ue(o)};return s&&(a.second=ue(s)),t&&(a.weekday=t.length>3?Ce.indexOf(t)+1:Oe.indexOf(t)+1),a}const pn=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function fn(t){const[,e,n,r,i,o,s,a,c,l,u,h]=t,p=hn(e,i,r,n,o,s,a);let f;return f=c?un[c]:l?0:be(u,h),[p,new Gt(f)]}const dn=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,gn=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,mn=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function yn(t){const[,e,n,r,i,o,s,a]=t;return[hn(e,i,r,n,o,s,a),Gt.utcInstance]}function _n(t){const[,e,n,r,i,o,s,a]=t;return[hn(e,a,n,r,i,o,s),Gt.utcInstance]}const vn=We(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Ke),xn=We(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Ke),bn=We(/(\d{4})-?(\d{3})/,Ke),wn=We(Xe),En=Ge((function(t,e){return[{year:nn(t,e),month:nn(t,e+1,1),day:nn(t,e+2,1)},null,e+3]}),rn,on,sn),Tn=Ge(Je,rn,on,sn),Sn=Ge(Qe,rn,on,sn),kn=Ge(rn,on,sn);const An=Ge(rn);const Mn=We(/(\d{4})-(\d\d)-(\d\d)/,en),In=We(tn),Cn=Ge(rn,on,sn);const On="Invalid Duration",Pn={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},Ln={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6},...Pn},Dn=365.2425,Rn=30.436875,Nn={years:{quarters:4,months:12,weeks:52.1775,days:Dn,hours:8765.82,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:4.3481250000000005,days:Rn,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746e3},...Pn},jn=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],zn=jn.slice(0).reverse();function Bn(t,e,n=!1){const r={values:n?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new Vn(r)}function Fn(t,e){let n=e.milliseconds??0;for(const r of zn.slice(1))e[r]&&(n+=e[r]*t[r].milliseconds);return n}function Un(t,e){const n=Fn(t,e)<0?-1:1;jn.reduceRight(((r,i)=>{if(ne(e[i]))return r;if(r){const o=e[r]*n,s=t[i][r],a=Math.floor(o/s);e[i]+=a*n,e[r]-=a*s*n}return i}),null),jn.reduce(((n,r)=>{if(ne(e[r]))return n;if(n){const i=e[n]%1;e[n]-=i,e[r]+=i*t[n][r]}return r}),null)}class Vn{constructor(t){const e="longterm"===t.conversionAccuracy||!1;let n=e?Nn:Ln;t.matrix&&(n=t.matrix),this.values=t.values,this.loc=t.loc||qt.create(),this.conversionAccuracy=e?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(t,e){return Vn.fromObject({milliseconds:t},e)}static fromObject(t,e={}){if(null==t||"object"!=typeof t)throw new Q("Duration.fromObject: argument expected to be an object, got "+(null===t?"null":typeof t));return new Vn({values:Ee(t,Vn.normalizeUnit),loc:qt.fromObject(e),conversionAccuracy:e.conversionAccuracy,matrix:e.matrix})}static fromDurationLike(t){if(re(t))return Vn.fromMillis(t);if(Vn.isDuration(t))return t;if("object"==typeof t)return Vn.fromObject(t);throw new Q(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,e){const[n]=function(t){return $e(t,[cn,ln])}(t);return n?Vn.fromObject(n,e):Vn.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,e){const[n]=function(t){return $e(t,[an,An])}(t);return n?Vn.fromObject(n,e):Vn.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,e=null){if(!t)throw new Q("need to specify a reason the Duration is invalid");const n=t instanceof Ve?t:new Ve(t,e);if(ee.throwOnInvalid)throw new X(n);return new Vn({invalid:n})}static normalizeUnit(t){const e={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t?t.toLowerCase():t];if(!e)throw new J(t);return e}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,e={}){const n={...e,floor:!1!==e.round&&!1!==e.floor};return this.isValid?Ue.create(this.loc,n).formatDurationFromString(this,t):On}toHuman(t={}){if(!this.isValid)return On;const e=jn.map((e=>{const n=this.values[e];return ne(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:e.slice(0,-1)}).format(n)})).filter((t=>t));return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(e)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return 0!==this.years&&(t+=this.years+"Y"),0===this.months&&0===this.quarters||(t+=this.months+3*this.quarters+"M"),0!==this.weeks&&(t+=this.weeks+"W"),0!==this.days&&(t+=this.days+"D"),0===this.hours&&0===this.minutes&&0===this.seconds&&0===this.milliseconds||(t+="T"),0!==this.hours&&(t+=this.hours+"H"),0!==this.minutes&&(t+=this.minutes+"M"),0===this.seconds&&0===this.milliseconds||(t+=fe(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===t&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const e=this.toMillis();if(e<0||e>=864e5)return null;t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1};return Hr.fromMillis(e,{zone:"UTC"}).toISOTime(t)}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.isValid?Fn(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const e=Vn.fromDurationLike(t),n={};for(const t of jn)(ae(e.values,t)||ae(this.values,t))&&(n[t]=e.get(t)+this.get(t));return Bn(this,{values:n},!0)}minus(t){if(!this.isValid)return this;const e=Vn.fromDurationLike(t);return this.plus(e.negate())}mapUnits(t){if(!this.isValid)return this;const e={};for(const n of Object.keys(this.values))e[n]=we(t(this.values[n],n));return Bn(this,{values:e},!0)}get(t){return this[Vn.normalizeUnit(t)]}set(t){if(!this.isValid)return this;return Bn(this,{values:{...this.values,...Ee(t,Vn.normalizeUnit)}})}reconfigure({locale:t,numberingSystem:e,conversionAccuracy:n,matrix:r}={}){return Bn(this,{loc:this.loc.clone({locale:t,numberingSystem:e}),matrix:r,conversionAccuracy:n})}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return Un(this.matrix,t),Bn(this,{values:t},!0)}rescale(){if(!this.isValid)return this;return Bn(this,{values:function(t){const e={};for(const[n,r]of Object.entries(t))0!==r&&(e[n]=r);return e}(this.normalize().shiftToAll().toObject())},!0)}shiftTo(...t){if(!this.isValid)return this;if(0===t.length)return this;t=t.map((t=>Vn.normalizeUnit(t)));const e={},n={},r=this.toObject();let i;for(const o of jn)if(t.indexOf(o)>=0){i=o;let t=0;for(const e in n)t+=this.matrix[e][o]*n[e],n[e]=0;re(r[o])&&(t+=r[o]);const s=Math.trunc(t);e[o]=s,n[o]=(1e3*t-1e3*s)/1e3}else re(r[o])&&(n[o]=r[o]);for(const t in n)0!==n[t]&&(e[i]+=t===i?n[t]:n[t]/this.matrix[i][t]);return Un(this.matrix,e),Bn(this,{values:e},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const e of Object.keys(this.values))t[e]=0===this.values[e]?0:-this.values[e];return Bn(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid)return!1;if(!this.loc.equals(t.loc))return!1;for(const r of jn)if(e=this.values[r],n=t.values[r],!(void 0===e||0===e?void 0===n||0===n:e===n))return!1;var e,n;return!0}}const qn="Invalid Interval";class Wn{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,e=null){if(!t)throw new Q("need to specify a reason the Interval is invalid");const n=t instanceof Ve?t:new Ve(t,e);if(ee.throwOnInvalid)throw new Y(n);return new Wn({invalid:n})}static fromDateTimes(t,e){const n=Zr(t),r=Zr(e),i=function(t,e){return t&&t.isValid?e&&e.isValid?e<t?Wn.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null:Wn.invalid("missing or invalid end"):Wn.invalid("missing or invalid start")}(n,r);return null==i?new Wn({start:n,end:r}):i}static after(t,e){const n=Vn.fromDurationLike(e),r=Zr(t);return Wn.fromDateTimes(r,r.plus(n))}static before(t,e){const n=Vn.fromDurationLike(e),r=Zr(t);return Wn.fromDateTimes(r.minus(n),r)}static fromISO(t,e){const[n,r]=(t||"").split("/",2);if(n&&r){let t,i,o,s;try{t=Hr.fromISO(n,e),i=t.isValid}catch(r){i=!1}try{o=Hr.fromISO(r,e),s=o.isValid}catch(r){s=!1}if(i&&s)return Wn.fromDateTimes(t,o);if(i){const n=Vn.fromISO(r,e);if(n.isValid)return Wn.after(t,n)}else if(s){const t=Vn.fromISO(n,e);if(t.isValid)return Wn.before(o,t)}}return Wn.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds"){if(!this.isValid)return NaN;const e=this.start.startOf(t),n=this.end.startOf(t);return Math.floor(n.diff(e,t).get(t))+(n.valueOf()!==this.end.valueOf())}hasSame(t){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,t))}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return!!this.isValid&&this.s>t}isBefore(t){return!!this.isValid&&this.e<=t}contains(t){return!!this.isValid&&(this.s<=t&&this.e>t)}set({start:t,end:e}={}){return this.isValid?Wn.fromDateTimes(t||this.s,e||this.e):this}splitAt(...t){if(!this.isValid)return[];const e=t.map(Zr).filter((t=>this.contains(t))).sort(),n=[];let{s:r}=this,i=0;for(;r<this.e;){const t=e[i]||this.e,o=+t>+this.e?this.e:t;n.push(Wn.fromDateTimes(r,o)),r=o,i+=1}return n}splitBy(t){const e=Vn.fromDurationLike(t);if(!this.isValid||!e.isValid||0===e.as("milliseconds"))return[];let n,{s:r}=this,i=1;const o=[];for(;r<this.e;){const t=this.start.plus(e.mapUnits((t=>t*i)));n=+t>+this.e?this.e:t,o.push(Wn.fromDateTimes(r,n)),r=n,i+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return!!this.isValid&&+this.e==+t.s}abutsEnd(t){return!!this.isValid&&+t.e==+this.s}engulfs(t){return!!this.isValid&&(this.s<=t.s&&this.e>=t.e)}equals(t){return!(!this.isValid||!t.isValid)&&(this.s.equals(t.s)&&this.e.equals(t.e))}intersection(t){if(!this.isValid)return this;const e=this.s>t.s?this.s:t.s,n=this.e<t.e?this.e:t.e;return e>=n?null:Wn.fromDateTimes(e,n)}union(t){if(!this.isValid)return this;const e=this.s<t.s?this.s:t.s,n=this.e>t.e?this.e:t.e;return Wn.fromDateTimes(e,n)}static merge(t){const[e,n]=t.sort(((t,e)=>t.s-e.s)).reduce((([t,e],n)=>e?e.overlaps(n)||e.abutsStart(n)?[t,e.union(n)]:[t.concat([e]),n]:[t,n]),[[],null]);return n&&e.push(n),e}static xor(t){let e=null,n=0;const r=[],i=t.map((t=>[{time:t.s,type:"s"},{time:t.e,type:"e"}])),o=Array.prototype.concat(...i).sort(((t,e)=>t.time-e.time));for(const t of o)n+="s"===t.type?1:-1,1===n?e=t.time:(e&&+e!=+t.time&&r.push(Wn.fromDateTimes(e,t.time)),e=null);return Wn.merge(r)}difference(...t){return Wn.xor([this].concat(t)).map((t=>this.intersection(t))).filter((t=>t&&!t.isEmpty()))}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:qn}toLocaleString(t=it,e={}){return this.isValid?Ue.create(this.s.loc.clone(e),t).formatInterval(this):qn}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:qn}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:qn}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:qn}toFormat(t,{separator:e=" – "}={}){return this.isValid?`${this.s.toFormat(t)}${e}${this.e.toFormat(t)}`:qn}toDuration(t,e){return this.isValid?this.e.diff(this.s,t,e):Vn.invalid(this.invalidReason)}mapEndpoints(t){return Wn.fromDateTimes(t(this.s),t(this.e))}}class Gn{static hasDST(t=ee.defaultZone){const e=Hr.now().setZone(t).set({month:12});return!t.isUniversal&&e.offset!==e.set({month:6}).offset}static isValidIANAZone(t){return Pt.isValidZone(t)}static normalizeZone(t){return Ht(t,ee.defaultZone)}static months(t="long",{locale:e=null,numberingSystem:n=null,locObj:r=null,outputCalendar:i="gregory"}={}){return(r||qt.create(e,n,i)).months(t)}static monthsFormat(t="long",{locale:e=null,numberingSystem:n=null,locObj:r=null,outputCalendar:i="gregory"}={}){return(r||qt.create(e,n,i)).months(t,!0)}static weekdays(t="long",{locale:e=null,numberingSystem:n=null,locObj:r=null}={}){return(r||qt.create(e,n,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:e=null,numberingSystem:n=null,locObj:r=null}={}){return(r||qt.create(e,n,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return qt.create(t).meridiems()}static eras(t="short",{locale:e=null}={}){return qt.create(e,null,"gregory").eras(t)}static features(){return{relative:oe()}}}function $n(t,e){const n=t=>t.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=n(e)-n(t);return Math.floor(Vn.fromMillis(r).as("days"))}function Hn(t,e,n,r){let[i,o,s,a]=function(t,e,n){const r=[["years",(t,e)=>e.year-t.year],["quarters",(t,e)=>e.quarter-t.quarter+4*(e.year-t.year)],["months",(t,e)=>e.month-t.month+12*(e.year-t.year)],["weeks",(t,e)=>{const n=$n(t,e);return(n-n%7)/7}],["days",$n]],i={},o=t;let s,a;for(const[c,l]of r)n.indexOf(c)>=0&&(s=c,i[c]=l(t,e),a=o.plus(i),a>e?(i[c]--,(t=o.plus(i))>e&&(a=t,i[c]--,t=o.plus(i))):t=a);return[t,i,a,s]}(t,e,n);const c=e-i,l=n.filter((t=>["hours","minutes","seconds","milliseconds"].indexOf(t)>=0));0===l.length&&(s<e&&(s=i.plus({[a]:1})),s!==i&&(o[a]=(o[a]||0)+c/(s-i)));const u=Vn.fromObject(o,r);return l.length>0?Vn.fromMillis(c,r).shiftTo(...l).plus(u):u}const Zn={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},Yn={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Xn=Zn.hanidec.replace(/[\[|\]]/g,"").split("");function Kn({numberingSystem:t},e=""){return new RegExp(`${Zn[t||"latn"]}${e}`)}const Jn="missing Intl.DateTimeFormat.formatToParts support";function Qn(t,e=(t=>t)){return{regex:t,deser:([t])=>e(function(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);if(-1!==t[n].search(Zn.hanidec))e+=Xn.indexOf(t[n]);else for(const t in Yn){const[n,i]=Yn[t];r>=n&&r<=i&&(e+=r-n)}}return parseInt(e,10)}return e}(t))}}const tr=`[ ${String.fromCharCode(160)}]`,er=new RegExp(tr,"g");function nr(t){return t.replace(/\./g,"\\.?").replace(er,tr)}function rr(t){return t.replace(/\./g,"").replace(er," ").toLowerCase()}function ir(t,e){return null===t?null:{regex:RegExp(t.map(nr).join("|")),deser:([n])=>t.findIndex((t=>rr(n)===rr(t)))+e}}function or(t,e){return{regex:t,deser:([,t,e])=>be(t,e),groups:e}}function sr(t){return{regex:t,deser:([t])=>t}}const ar={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let cr=null;function lr(t,e){return Array.prototype.concat(...t.map((t=>function(t,e){if(t.literal)return t;const n=hr(Ue.macroTokenToFormatOpts(t.val),e);return null==n||n.includes(void 0)?t:n}(t,e))))}function ur(t,e,n){const r=lr(Ue.parseFormat(n),t),i=r.map((e=>function(t,e){const n=Kn(e),r=Kn(e,"{2}"),i=Kn(e,"{3}"),o=Kn(e,"{4}"),s=Kn(e,"{6}"),a=Kn(e,"{1,2}"),c=Kn(e,"{1,3}"),l=Kn(e,"{1,6}"),u=Kn(e,"{1,9}"),h=Kn(e,"{2,4}"),p=Kn(e,"{4,6}"),f=t=>{return{regex:RegExp((e=t.val,e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"))),deser:([t])=>t,literal:!0};var e},d=(d=>{if(t.literal)return f(d);switch(d.val){case"G":return ir(e.eras("short"),0);case"GG":return ir(e.eras("long"),0);case"y":return Qn(l);case"yy":case"kk":return Qn(h,ve);case"yyyy":case"kkkk":return Qn(o);case"yyyyy":return Qn(p);case"yyyyyy":return Qn(s);case"M":case"L":case"d":case"H":case"h":case"m":case"q":case"s":case"W":return Qn(a);case"MM":case"LL":case"dd":case"HH":case"hh":case"mm":case"qq":case"ss":case"WW":return Qn(r);case"MMM":return ir(e.months("short",!0),1);case"MMMM":return ir(e.months("long",!0),1);case"LLL":return ir(e.months("short",!1),1);case"LLLL":return ir(e.months("long",!1),1);case"o":case"S":return Qn(c);case"ooo":case"SSS":return Qn(i);case"u":return sr(u);case"uu":return sr(a);case"uuu":case"E":case"c":return Qn(n);case"a":return ir(e.meridiems(),0);case"EEE":return ir(e.weekdays("short",!1),1);case"EEEE":return ir(e.weekdays("long",!1),1);case"ccc":return ir(e.weekdays("short",!0),1);case"cccc":return ir(e.weekdays("long",!0),1);case"Z":case"ZZ":return or(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return or(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return sr(/[a-z_+-/]{1,256}?/i);case" ":return sr(/[^\S\n\r]/);default:return f(d)}})(t)||{invalidReason:Jn};return d.token=t,d}(e,t))),o=i.find((t=>t.invalidReason));if(o)return{input:e,tokens:r,invalidReason:o.invalidReason};{const[t,n]=function(t){return[`^${t.map((t=>t.regex)).reduce(((t,e)=>`${t}(${e.source})`),"")}$`,t]}(i),o=RegExp(t,"i"),[s,a]=function(t,e,n){const r=t.match(e);if(r){const t={};let e=1;for(const i in n)if(ae(n,i)){const o=n[i],s=o.groups?o.groups+1:1;!o.literal&&o.token&&(t[o.token.val[0]]=o.deser(r.slice(e,e+s))),e+=s}return[r,t]}return[r,{}]}(e,o,n),[c,l,u]=a?function(t){let e,n=null;return ne(t.z)||(n=Pt.create(t.z)),ne(t.Z)||(n||(n=new Gt(t.Z)),e=t.Z),ne(t.q)||(t.M=3*(t.q-1)+1),ne(t.h)||(t.h<12&&1===t.a?t.h+=12:12===t.h&&0===t.a&&(t.h=0)),0===t.G&&t.y&&(t.y=-t.y),ne(t.u)||(t.S=pe(t.u)),[Object.keys(t).reduce(((e,n)=>{const r=(t=>{switch(t){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}})(n);return r&&(e[r]=t[n]),e}),{}),n,e]}(a):[null,null,void 0];if(ae(a,"a")&&ae(a,"H"))throw new K("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:r,regex:o,rawMatches:s,matches:a,result:c,zone:l,specificOffset:u}}}function hr(t,e){if(!t)return null;const n=Ue.create(e,t).dtFormatter((cr||(cr=Hr.fromMillis(1555555555555)),cr)),r=n.formatToParts(),i=n.resolvedOptions();return r.map((e=>function(t,e,n){const{type:r,value:i}=t;if("literal"===r){const t=/^\s+$/.test(i);return{literal:!t,val:t?" ":i}}const o=e[r];let s=r;"hour"===r&&(s=null!=e.hour12?e.hour12?"hour12":"hour24":null!=e.hourCycle?"h11"===e.hourCycle||"h12"===e.hourCycle?"hour12":"hour24":n.hour12?"hour12":"hour24");let a=ar[s];if("object"==typeof a&&(a=a[o]),a)return{literal:!1,val:a}}(e,t,i)))}const pr=[0,31,59,90,120,151,181,212,243,273,304,334],fr=[0,31,60,91,121,152,182,213,244,274,305,335];function dr(t,e){return new Ve("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function gr(t,e,n){const r=new Date(Date.UTC(t,e-1,n));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const i=r.getUTCDay();return 0===i?7:i}function mr(t,e,n){return n+(de(t)?fr:pr)[e-1]}function yr(t,e){const n=de(t)?fr:pr,r=n.findIndex((t=>t<e));return{month:r+1,day:e-n[r]}}function _r(t){const{year:e,month:n,day:r}=t,i=mr(e,n,r),o=gr(e,n,r);let s,a=Math.floor((i-o+10)/7);return a<1?(s=e-1,a=_e(s)):a>_e(e)?(s=e+1,a=1):s=e,{weekYear:s,weekNumber:a,weekday:o,...Se(t)}}function vr(t){const{weekYear:e,weekNumber:n,weekday:r}=t,i=gr(e,1,4),o=ge(e);let s,a=7*n+r-i-3;a<1?(s=e-1,a+=ge(s)):a>o?(s=e+1,a-=ge(e)):s=e;const{month:c,day:l}=yr(s,a);return{year:s,month:c,day:l,...Se(t)}}function xr(t){const{year:e,month:n,day:r}=t;return{year:e,ordinal:mr(e,n,r),...Se(t)}}function br(t){const{year:e,ordinal:n}=t,{month:r,day:i}=yr(e,n);return{year:e,month:r,day:i,...Se(t)}}function wr(t){const e=ie(t.year),n=ce(t.month,1,12),r=ce(t.day,1,me(t.year,t.month));return e?n?!r&&dr("day",t.day):dr("month",t.month):dr("year",t.year)}function Er(t){const{hour:e,minute:n,second:r,millisecond:i}=t,o=ce(e,0,23)||24===e&&0===n&&0===r&&0===i,s=ce(n,0,59),a=ce(r,0,59),c=ce(i,0,999);return o?s?a?!c&&dr("millisecond",i):dr("second",r):dr("minute",n):dr("hour",e)}const Tr="Invalid DateTime",Sr=864e13;function kr(t){return new Ve("unsupported zone",`the zone "${t.name}" is not supported`)}function Ar(t){return null===t.weekData&&(t.weekData=_r(t.c)),t.weekData}function Mr(t,e){const n={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new Hr({...n,...e,old:n})}function Ir(t,e,n){let r=t-60*e*1e3;const i=n.offset(r);if(e===i)return[r,e];r-=60*(i-e)*1e3;const o=n.offset(r);return i===o?[r,i]:[t-60*Math.min(i,o)*1e3,Math.max(i,o)]}function Cr(t,e){const n=new Date(t+=60*e*1e3);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function Or(t,e,n){return Ir(ye(t),e,n)}function Pr(t,e){const n=t.o,r=t.c.year+Math.trunc(e.years),i=t.c.month+Math.trunc(e.months)+3*Math.trunc(e.quarters),o={...t.c,year:r,month:i,day:Math.min(t.c.day,me(r,i))+Math.trunc(e.days)+7*Math.trunc(e.weeks)},s=Vn.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=ye(o);let[c,l]=Ir(a,n,t.zone);return 0!==s&&(c+=s,l=t.zone.offset(c)),{ts:c,o:l}}function Lr(t,e,n,r,i,o){const{setZone:s,zone:a}=n;if(t&&0!==Object.keys(t).length||e){const r=e||a,i=Hr.fromObject(t,{...n,zone:r,specificOffset:o});return s?i:i.setZone(a)}return Hr.invalid(new Ve("unparsable",`the input "${i}" can't be parsed as ${r}`))}function Dr(t,e,n=!0){return t.isValid?Ue.create(qt.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(t,e):null}function Rr(t,e){const n=t.c.year>9999||t.c.year<0;let r="";return n&&t.c.year>=0&&(r+="+"),r+=le(t.c.year,n?6:4),e?(r+="-",r+=le(t.c.month),r+="-",r+=le(t.c.day)):(r+=le(t.c.month),r+=le(t.c.day)),r}function Nr(t,e,n,r,i,o){let s=le(t.c.hour);return e?(s+=":",s+=le(t.c.minute),0===t.c.millisecond&&0===t.c.second&&n||(s+=":")):s+=le(t.c.minute),0===t.c.millisecond&&0===t.c.second&&n||(s+=le(t.c.second),0===t.c.millisecond&&r||(s+=".",s+=le(t.c.millisecond,3))),i&&(t.isOffsetFixed&&0===t.offset&&!o?s+="Z":t.o<0?(s+="-",s+=le(Math.trunc(-t.o/60)),s+=":",s+=le(Math.trunc(-t.o%60))):(s+="+",s+=le(Math.trunc(t.o/60)),s+=":",s+=le(Math.trunc(t.o%60)))),o&&(s+="["+t.zone.ianaName+"]"),s}const jr={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},zr={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Br={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Fr=["year","month","day","hour","minute","second","millisecond"],Ur=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Vr=["year","ordinal","hour","minute","second","millisecond"];function qr(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new J(t);return e}function Wr(t,e){const n=Ht(e.zone,ee.defaultZone),r=qt.fromObject(e),i=ee.now();let o,s;if(ne(t.year))o=i;else{for(const e of Fr)ne(t[e])&&(t[e]=jr[e]);const e=wr(t)||Er(t);if(e)return Hr.invalid(e);const r=n.offset(i);[o,s]=Or(t,r,n)}return new Hr({ts:o,zone:n,loc:r,o:s})}function Gr(t,e,n){const r=!!ne(n.round)||n.round,i=(t,i)=>{t=fe(t,r||n.calendary?0:2,!0);return e.loc.clone(n).relFormatter(n).format(t,i)},o=r=>n.calendary?e.hasSame(t,r)?0:e.startOf(r).diff(t.startOf(r),r).get(r):e.diff(t,r).get(r);if(n.unit)return i(o(n.unit),n.unit);for(const t of n.units){const e=o(t);if(Math.abs(e)>=1)return i(e,t)}return i(t>e?-0:0,n.units[n.units.length-1])}function $r(t){let e,n={};return t.length>0&&"object"==typeof t[t.length-1]?(n=t[t.length-1],e=Array.from(t).slice(0,t.length-1)):e=Array.from(t),[n,e]}class Hr{constructor(t){const e=t.zone||ee.defaultZone;let n=t.invalid||(Number.isNaN(t.ts)?new Ve("invalid input"):null)||(e.isValid?null:kr(e));this.ts=ne(t.ts)?ee.now():t.ts;let r=null,i=null;if(!n){if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(e))[r,i]=[t.old.c,t.old.o];else{const t=e.offset(this.ts);r=Cr(this.ts,t),n=Number.isNaN(r.year)?new Ve("invalid input"):null,r=n?null:r,i=n?null:t}}this._zone=e,this.loc=t.loc||qt.create(),this.invalid=n,this.weekData=null,this.c=r,this.o=i,this.isLuxonDateTime=!0}static now(){return new Hr({})}static local(){const[t,e]=$r(arguments),[n,r,i,o,s,a,c]=e;return Wr({year:n,month:r,day:i,hour:o,minute:s,second:a,millisecond:c},t)}static utc(){const[t,e]=$r(arguments),[n,r,i,o,s,a,c]=e;return t.zone=Gt.utcInstance,Wr({year:n,month:r,day:i,hour:o,minute:s,second:a,millisecond:c},t)}static fromJSDate(t,e={}){const n=(r=t,"[object Date]"===Object.prototype.toString.call(r)?t.valueOf():NaN);var r;if(Number.isNaN(n))return Hr.invalid("invalid input");const i=Ht(e.zone,ee.defaultZone);return i.isValid?new Hr({ts:n,zone:i,loc:qt.fromObject(e)}):Hr.invalid(kr(i))}static fromMillis(t,e={}){if(re(t))return t<-Sr||t>Sr?Hr.invalid("Timestamp out of range"):new Hr({ts:t,zone:Ht(e.zone,ee.defaultZone),loc:qt.fromObject(e)});throw new Q(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,e={}){if(re(t))return new Hr({ts:1e3*t,zone:Ht(e.zone,ee.defaultZone),loc:qt.fromObject(e)});throw new Q("fromSeconds requires a numerical input")}static fromObject(t,e={}){t=t||{};const n=Ht(e.zone,ee.defaultZone);if(!n.isValid)return Hr.invalid(kr(n));const r=ee.now(),i=ne(e.specificOffset)?n.offset(r):e.specificOffset,o=Ee(t,qr),s=!ne(o.ordinal),a=!ne(o.year),c=!ne(o.month)||!ne(o.day),l=a||c,u=o.weekYear||o.weekNumber,h=qt.fromObject(e);if((l||s)&&u)throw new K("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&s)throw new K("Can't mix ordinal dates with month/day");const p=u||o.weekday&&!l;let f,d,g=Cr(r,i);p?(f=Ur,d=zr,g=_r(g)):s?(f=Vr,d=Br,g=xr(g)):(f=Fr,d=jr);let m=!1;for(const t of f){ne(o[t])?o[t]=m?d[t]:g[t]:m=!0}const y=p?function(t){const e=ie(t.weekYear),n=ce(t.weekNumber,1,_e(t.weekYear)),r=ce(t.weekday,1,7);return e?n?!r&&dr("weekday",t.weekday):dr("week",t.week):dr("weekYear",t.weekYear)}(o):s?function(t){const e=ie(t.year),n=ce(t.ordinal,1,ge(t.year));return e?!n&&dr("ordinal",t.ordinal):dr("year",t.year)}(o):wr(o),_=y||Er(o);if(_)return Hr.invalid(_);const v=p?vr(o):s?br(o):o,[x,b]=Or(v,i,n),w=new Hr({ts:x,zone:n,o:b,loc:h});return o.weekday&&l&&t.weekday!==w.weekday?Hr.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${w.toISO()}`):w}static fromISO(t,e={}){const[n,r]=function(t){return $e(t,[vn,En],[xn,Tn],[bn,Sn],[wn,kn])}(t);return Lr(n,r,e,"ISO 8601",t)}static fromRFC2822(t,e={}){const[n,r]=function(t){return $e(function(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(t),[pn,fn])}(t);return Lr(n,r,e,"RFC 2822",t)}static fromHTTP(t,e={}){const[n,r]=function(t){return $e(t,[dn,yn],[gn,yn],[mn,_n])}(t);return Lr(n,r,e,"HTTP",e)}static fromFormat(t,e,n={}){if(ne(t)||ne(e))throw new Q("fromFormat requires an input string and a format");const{locale:r=null,numberingSystem:i=null}=n,o=qt.fromOpts({locale:r,numberingSystem:i,defaultToEN:!0}),[s,a,c,l]=function(t,e,n){const{result:r,zone:i,specificOffset:o,invalidReason:s}=ur(t,e,n);return[r,i,o,s]}(o,t,e);return l?Hr.invalid(l):Lr(s,a,n,`format ${e}`,t,c)}static fromString(t,e,n={}){return Hr.fromFormat(t,e,n)}static fromSQL(t,e={}){const[n,r]=function(t){return $e(t,[Mn,En],[In,Cn])}(t);return Lr(n,r,e,"SQL",t)}static invalid(t,e=null){if(!t)throw new Q("need to specify a reason the DateTime is invalid");const n=t instanceof Ve?t:new Ve(t,e);if(ee.throwOnInvalid)throw new Z(n);return new Hr({invalid:n})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,e={}){const n=hr(t,qt.fromObject(e));return n?n.map((t=>t?t.val:null)).join(""):null}static expandFormat(t,e={}){return lr(Ue.parseFormat(t),qt.fromObject(e)).map((t=>t.val)).join("")}get(t){return this[t]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Ar(this).weekYear:NaN}get weekNumber(){return this.isValid?Ar(this).weekNumber:NaN}get weekday(){return this.isValid?Ar(this).weekday:NaN}get ordinal(){return this.isValid?xr(this.c).ordinal:NaN}get monthShort(){return this.isValid?Gn.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Gn.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Gn.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Gn.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return!this.isOffsetFixed&&(this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset)}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,e=6e4,n=ye(this.c),r=this.zone.offset(n-t),i=this.zone.offset(n+t),o=this.zone.offset(n-r*e),s=this.zone.offset(n-i*e);if(o===s)return[this];const a=n-o*e,c=n-s*e,l=Cr(a,o),u=Cr(c,s);return l.hour===u.hour&&l.minute===u.minute&&l.second===u.second&&l.millisecond===u.millisecond?[Mr(this,{ts:a}),Mr(this,{ts:c})]:[this]}get isInLeapYear(){return de(this.year)}get daysInMonth(){return me(this.year,this.month)}get daysInYear(){return this.isValid?ge(this.year):NaN}get weeksInWeekYear(){return this.isValid?_e(this.weekYear):NaN}resolvedLocaleOptions(t={}){const{locale:e,numberingSystem:n,calendar:r}=Ue.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:e,numberingSystem:n,outputCalendar:r}}toUTC(t=0,e={}){return this.setZone(Gt.instance(t),e)}toLocal(){return this.setZone(ee.defaultZone)}setZone(t,{keepLocalTime:e=!1,keepCalendarTime:n=!1}={}){if((t=Ht(t,ee.defaultZone)).equals(this.zone))return this;if(t.isValid){let r=this.ts;if(e||n){const e=t.offset(this.ts),n=this.toObject();[r]=Or(n,e,t)}return Mr(this,{ts:r,zone:t})}return Hr.invalid(kr(t))}reconfigure({locale:t,numberingSystem:e,outputCalendar:n}={}){return Mr(this,{loc:this.loc.clone({locale:t,numberingSystem:e,outputCalendar:n})})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const e=Ee(t,qr),n=!ne(e.weekYear)||!ne(e.weekNumber)||!ne(e.weekday),r=!ne(e.ordinal),i=!ne(e.year),o=!ne(e.month)||!ne(e.day),s=i||o,a=e.weekYear||e.weekNumber;if((s||r)&&a)throw new K("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(o&&r)throw new K("Can't mix ordinal dates with month/day");let c;n?c=vr({..._r(this.c),...e}):ne(e.ordinal)?(c={...this.toObject(),...e},ne(e.day)&&(c.day=Math.min(me(c.year,c.month),c.day))):c=br({...xr(this.c),...e});const[l,u]=Or(c,this.o,this.zone);return Mr(this,{ts:l,o:u})}plus(t){if(!this.isValid)return this;return Mr(this,Pr(this,Vn.fromDurationLike(t)))}minus(t){if(!this.isValid)return this;return Mr(this,Pr(this,Vn.fromDurationLike(t).negate()))}startOf(t){if(!this.isValid)return this;const e={},n=Vn.normalizeUnit(t);switch(n){case"years":e.month=1;case"quarters":case"months":e.day=1;case"weeks":case"days":e.hour=0;case"hours":e.minute=0;case"minutes":e.second=0;case"seconds":e.millisecond=0}if("weeks"===n&&(e.weekday=1),"quarters"===n){const t=Math.ceil(this.month/3);e.month=3*(t-1)+1}return this.set(e)}endOf(t){return this.isValid?this.plus({[t]:1}).startOf(t).minus(1):this}toFormat(t,e={}){return this.isValid?Ue.create(this.loc.redefaultToEN(e)).formatDateTimeFromString(this,t):Tr}toLocaleString(t=it,e={}){return this.isValid?Ue.create(this.loc.clone(e),t).formatDateTime(this):Tr}toLocaleParts(t={}){return this.isValid?Ue.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:e=!1,suppressMilliseconds:n=!1,includeOffset:r=!0,extendedZone:i=!1}={}){if(!this.isValid)return null;const o="extended"===t;let s=Rr(this,o);return s+="T",s+=Nr(this,o,e,n,r,i),s}toISODate({format:t="extended"}={}){return this.isValid?Rr(this,"extended"===t):null}toISOWeekDate(){return Dr(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:e=!1,includeOffset:n=!0,includePrefix:r=!1,extendedZone:i=!1,format:o="extended"}={}){if(!this.isValid)return null;return(r?"T":"")+Nr(this,"extended"===o,e,t,n,i)}toRFC2822(){return Dr(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Dr(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Rr(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:e=!1,includeOffsetSpace:n=!0}={}){let r="HH:mm:ss.SSS";return(e||t)&&(n&&(r+=" "),e?r+="z":t&&(r+="ZZ")),Dr(this,r,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():Tr}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const e={...this.c};return t.includeConfig&&(e.outputCalendar=this.outputCalendar,e.numberingSystem=this.loc.numberingSystem,e.locale=this.loc.locale),e}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,e="milliseconds",n={}){if(!this.isValid||!t.isValid)return Vn.invalid("created by diffing an invalid DateTime");const r={locale:this.locale,numberingSystem:this.numberingSystem,...n},i=(a=e,Array.isArray(a)?a:[a]).map(Vn.normalizeUnit),o=t.valueOf()>this.valueOf(),s=Hn(o?this:t,o?t:this,i,r);var a;return o?s.negate():s}diffNow(t="milliseconds",e={}){return this.diff(Hr.now(),t,e)}until(t){return this.isValid?Wn.fromDateTimes(this,t):this}hasSame(t,e){if(!this.isValid)return!1;const n=t.valueOf(),r=this.setZone(t.zone,{keepLocalTime:!0});return r.startOf(e)<=n&&n<=r.endOf(e)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const e=t.base||Hr.fromObject({},{zone:this.zone}),n=t.padding?this<e?-t.padding:t.padding:0;let r=["years","months","days","hours","minutes","seconds"],i=t.unit;return Array.isArray(t.unit)&&(r=t.unit,i=void 0),Gr(e,this.plus(n),{...t,numeric:"always",units:r,unit:i})}toRelativeCalendar(t={}){return this.isValid?Gr(t.base||Hr.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(Hr.isDateTime))throw new Q("min requires all arguments be DateTimes");return se(t,(t=>t.valueOf()),Math.min)}static max(...t){if(!t.every(Hr.isDateTime))throw new Q("max requires all arguments be DateTimes");return se(t,(t=>t.valueOf()),Math.max)}static fromFormatExplain(t,e,n={}){const{locale:r=null,numberingSystem:i=null}=n;return ur(qt.fromOpts({locale:r,numberingSystem:i,defaultToEN:!0}),t,e)}static fromStringExplain(t,e,n={}){return Hr.fromFormatExplain(t,e,n)}static get DATE_SHORT(){return it}static get DATE_MED(){return ot}static get DATE_MED_WITH_WEEKDAY(){return st}static get DATE_FULL(){return at}static get DATE_HUGE(){return ct}static get TIME_SIMPLE(){return lt}static get TIME_WITH_SECONDS(){return ut}static get TIME_WITH_SHORT_OFFSET(){return ht}static get TIME_WITH_LONG_OFFSET(){return pt}static get TIME_24_SIMPLE(){return ft}static get TIME_24_WITH_SECONDS(){return dt}static get TIME_24_WITH_SHORT_OFFSET(){return gt}static get TIME_24_WITH_LONG_OFFSET(){return mt}static get DATETIME_SHORT(){return yt}static get DATETIME_SHORT_WITH_SECONDS(){return _t}static get DATETIME_MED(){return vt}static get DATETIME_MED_WITH_SECONDS(){return xt}static get DATETIME_MED_WITH_WEEKDAY(){return bt}static get DATETIME_FULL(){return wt}static get DATETIME_FULL_WITH_SECONDS(){return Et}static get DATETIME_HUGE(){return Tt}static get DATETIME_HUGE_WITH_SECONDS(){return St}}function Zr(t){if(Hr.isDateTime(t))return t;if(t&&t.valueOf&&re(t.valueOf()))return Hr.fromJSDate(t);if(t&&"object"==typeof t)return Hr.fromObject(t);throw new Q(`Unknown datetime argument: ${t}, of type ${typeof t}`)}var Yr=n(17544),Xr=n(96486),Kr=n.n(Xr),Jr=Object.freeze(1024),Qr=Object.freeze(1024*Jr),ti=Object.freeze(1024*Qr),ei=Object.freeze(1024*ti),ni="";(0,a.Z)("head meta[name=ctx]").length&&(ni=(0,a.Z)("head meta[name=ctx]").attr("content")?(0,a.Z)("head meta[name=ctx]").attr("content"):""),ni=Object.freeze(ni),i().extendFunction("ctx",(function(t){return ni})),i().extendFunction("localdate",(function(t){return t?s()(t).format("YYYY-MM-DD"):""})),i().extendFunction("datemin",(function(t){return t?s()(t).format("YYYY-MM-DD HH:mm"):""})),i().extendFunction("datesec",(function(t){return t?s()(t).format("YYYY-MM-DD HH:mm:ss"):""})),i().extendFunction("stringify",(function(t){return t?JSON.stringify(t).escapeHtml():"{}"})),i().extendFunction("duration",(function(t,e){if(t&&e){var n=Hr.fromISO(e).diff(Hr.fromISO(t),["days","hours","minutes","seconds"]);return((n=(n=n.toMillis())<0?-n:n)/1e3).int().toHumanize()}return"-"})),i().extendFunction("pick",(function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Kr().pick(t,n)})),i().extendFunction("omit",(function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Kr().omit(t,n)})),i().extendFunction("interval",(function(t){return t?t.toInterval():""})),i().extendFunction("contains",(function(t,e){return!!t&&t.includes(e)})),i().extendFunction("containsAuthority",(function(t,e){return!!t&&!!t.find((function(t){return t.code===e}))})),i().extendFunction("toFixed",(function(t,e){if(t){var n=parseFloat(t);return Object.isNumber(n)?n.toFixed(e):void 0}})),i().extendFilter("newline2br",(function(t){return t?(""+t).newlineToBr():""})),i().extendFilter("localdate",(function(t){return t?s()(t).format("YYYY-MM-DD"):""})),i().extendFilter("datemin",(function(t){return t?s()(t).format("YYYY-MM-DD HH:mm"):""})),i().extendFilter("datesec",(function(t){return t?s()(t).format("YYYY-MM-DD HH:mm:ss"):""})),i().extendFilter("stringify",(function(t){return t?JSON.stringify(t).escapeHtml():"{}"})),i().extendFilter("unix_timestamp",(function(t){return t?s()(1e3*t).fromNow():""})),i().extendFilter("fileSize",(function(t){return t?t>=Jr&&t<Qr?Math.ceil(t/Jr*100)/100+" KB":t>=Qr&&t<ti?Math.ceil(t/Qr*100)/100+" MB":t>=ti&&t<ei?Math.ceil(t/ti*100)/100+" GB":t>=ei?Math.ceil(t/ei*100)/100+" TB":t+" B":""})),i().extendFilter("telNo",(function(t){if(t){var e=t.match(/^(02|031|062|053|042|051|032|052|033|055|054|061|063|064|041|043|070|080|0303|010|011|012|013|016|017|018|019)([-])?(\d\d\d(\d)?)+([-])?(\d\d\d\d)+$/);if(e)return e[1]+"-"+e[3]+"-"+e[6]}})),i().extendFilter("markdown",(function(t){return t?$.parse(t):""})),i().extendFilter("peerType",(function(t){return t?Yr.jd.of(t).name:""})),i().extendFilter("armyType",(function(t){return t?Yr.b$.of(t).name:""})),i().extendFilter("iconType",(function(t){return t?Yr.Tu.of(t).name:""})),i().extendFilter("weaponType",(function(t){return t?Yr.vD.of(t).name:""})),i().extendFilter("unitWeaponStatus",(function(t){return t?Yr.Uy.of(t).name:""})),i().extendFilter("sumAmmoNames",(function(t){return t&&t.ammos?t.ammos.map((function(t){return t.ammo.name})).join(", "):""})),i().extendFunction("authorities",(function(t){return t?t.map((function(t){return Yr.WU.of(t.code).name})).join(", "):""})),i().extendFilter("interval",(function(t){return t?t.toInterval():""}))},79742:function(t,e){"use strict";e.byteLength=function(t){var e=a(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,o=a(t),s=o[0],c=o[1],l=new i(function(t,e,n){return 3*(e+n)/4-n}(0,s,c)),u=0,h=c>0?s-4:s;for(n=0;n<h;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],l[u++]=e>>16&255,l[u++]=e>>8&255,l[u++]=255&e;2===c&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,l[u++]=255&e);1===c&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,l[u++]=e>>8&255,l[u++]=255&e);return l},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o=[],s=16383,a=0,l=r-i;a<l;a+=s)o.push(c(t,a,a+s>l?l:a+s));1===i?(e=t[r-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)n[s]=o[s],r[o.charCodeAt(s)]=s;function a(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,r){for(var i,o,s=[],a=e;a<r;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},48764:function(t,e,n){"use strict";var r=n(25108);const i=n(79742),o=n(80645),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.lW=l,e.h2=50;const a=2147483647;function c(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,l.prototype),e}function l(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return p(t)}return u(t,e,n)}function u(t,e,n){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!l.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const n=0|m(t,e);let r=c(n);const i=r.write(t,e);i!==n&&(r=r.slice(0,i));return r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(X(t,Uint8Array)){const e=new Uint8Array(t);return d(e.buffer,e.byteOffset,e.byteLength)}return f(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(X(t,ArrayBuffer)||t&&X(t.buffer,ArrayBuffer))return d(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(X(t,SharedArrayBuffer)||t&&X(t.buffer,SharedArrayBuffer)))return d(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return l.from(r,e,n);const i=function(t){if(l.isBuffer(t)){const e=0|g(t.length),n=c(e);return 0===n.length||t.copy(n,0,0,e),n}if(void 0!==t.length)return"number"!=typeof t.length||K(t.length)?c(0):f(t);if("Buffer"===t.type&&Array.isArray(t.data))return f(t.data)}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return l.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function p(t){return h(t),c(t<0?0:0|g(t))}function f(t){const e=t.length<0?0:0|g(t.length),n=c(e);for(let r=0;r<e;r+=1)n[r]=255&t[r];return n}function d(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,l.prototype),r}function g(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function m(t,e){if(l.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||X(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return H(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Z(t).length;default:if(i)return r?-1:H(t).length;e=(""+e).toLowerCase(),i=!0}}function y(t,e,n){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return O(this,e,n);case"utf8":case"utf-8":return A(this,e,n);case"ascii":return I(this,e,n);case"latin1":case"binary":return C(this,e,n);case"base64":return k(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function _(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function v(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),K(n=+n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=l.from(e,r)),l.isBuffer(e))return 0===e.length?-1:x(t,e,n,r,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):x(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function x(t,e,n,r,i){let o,s=1,a=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,c/=2,n/=2}function l(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){let r=-1;for(o=n;o<a;o++)if(l(t,o)===l(e,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===c)return r*s}else-1!==r&&(o-=o-r),r=-1}else for(n+c>a&&(n=a-c),o=n;o>=0;o--){let n=!0;for(let r=0;r<c;r++)if(l(t,o+r)!==l(e,r)){n=!1;break}if(n)return o}return-1}function b(t,e,n,r){n=Number(n)||0;const i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;const o=e.length;let s;for(r>o/2&&(r=o/2),s=0;s<r;++s){const r=parseInt(e.substr(2*s,2),16);if(K(r))return s;t[n+s]=r}return s}function w(t,e,n,r){return Y(H(e,t.length-n),t,n,r)}function E(t,e,n,r){return Y(function(t){const e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function T(t,e,n,r){return Y(Z(e),t,n,r)}function S(t,e,n,r){return Y(function(t,e){let n,r,i;const o=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function k(t,e,n){return 0===e&&n===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,n))}function A(t,e,n){n=Math.min(t.length,n);const r=[];let i=e;for(;i<n;){const e=t[i];let o=null,s=e>239?4:e>223?3:e>191?2:1;if(i+s<=n){let n,r,a,c;switch(s){case 1:e<128&&(o=e);break;case 2:n=t[i+1],128==(192&n)&&(c=(31&e)<<6|63&n,c>127&&(o=c));break;case 3:n=t[i+1],r=t[i+2],128==(192&n)&&128==(192&r)&&(c=(15&e)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:n=t[i+1],r=t[i+2],a=t[i+3],128==(192&n)&&128==(192&r)&&128==(192&a)&&(c=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&a,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=s}return function(t){const e=t.length;if(e<=M)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=M));return n}(r)}l.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),l.TYPED_ARRAY_SUPPORT||void 0===r||"function"!=typeof r.error||r.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(t,e,n){return u(t,e,n)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(t,e,n){return function(t,e,n){return h(t),t<=0?c(t):void 0!==e?"string"==typeof n?c(t).fill(e,n):c(t).fill(e):c(t)}(t,e,n)},l.allocUnsafe=function(t){return p(t)},l.allocUnsafeSlow=function(t){return p(t)},l.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==l.prototype},l.compare=function(t,e){if(X(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),X(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,r=e.length;for(let i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);let n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;const r=l.allocUnsafe(e);let i=0;for(n=0;n<t.length;++n){let e=t[n];if(X(e,Uint8Array))i+e.length>r.length?(l.isBuffer(e)||(e=l.from(e)),e.copy(r,i)):Uint8Array.prototype.set.call(r,e,i);else{if(!l.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,i)}i+=e.length}return r},l.byteLength=m,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)_(this,e,e+1);return this},l.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)_(this,e,e+3),_(this,e+1,e+2);return this},l.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)_(this,e,e+7),_(this,e+1,e+6),_(this,e+2,e+5),_(this,e+3,e+4);return this},l.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?A(this,0,t):y.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){let t="";const n=e.h2;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},s&&(l.prototype[s]=l.prototype.inspect),l.prototype.compare=function(t,e,n,r,i){if(X(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;let o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0);const a=Math.min(o,s),c=this.slice(r,i),u=t.slice(e,n);for(let t=0;t<a;++t)if(c[t]!==u[t]){o=c[t],s=u[t];break}return o<s?-1:s<o?1:0},l.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},l.prototype.indexOf=function(t,e,n){return v(this,t,e,n,!0)},l.prototype.lastIndexOf=function(t,e,n){return v(this,t,e,n,!1)},l.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let o=!1;for(;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":case"latin1":case"binary":return E(this,t,e,n);case"base64":return T(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const M=4096;function I(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function C(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function O(t,e,n){const r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=e;r<n;++r)i+=J[t[r]];return i}function P(t,e,n){const r=t.slice(e,n);let i="";for(let t=0;t<r.length-1;t+=2)i+=String.fromCharCode(r[t]+256*r[t+1]);return i}function L(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function D(t,e,n,r,i,o){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function R(t,e,n,r,i){q(e,r,i,t,n,7);let o=Number(e&BigInt(4294967295));t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,n}function N(t,e,n,r,i){q(e,r,i,t,n,7);let o=Number(e&BigInt(4294967295));t[n+7]=o,o>>=8,t[n+6]=o,o>>=8,t[n+5]=o,o>>=8,t[n+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=s,s>>=8,t[n+2]=s,s>>=8,t[n+1]=s,s>>=8,t[n]=s,n+8}function j(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function z(t,e,n,r,i){return e=+e,n>>>=0,i||j(t,0,n,4),o.write(t,e,n,r,23,4),n+4}function B(t,e,n,r,i){return e=+e,n>>>=0,i||j(t,0,n,8),o.write(t,e,n,r,52,8),n+8}l.prototype.slice=function(t,e){const n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,l.prototype),r},l.prototype.readUintLE=l.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||L(t,e,this.length);let r=this[t],i=1,o=0;for(;++o<e&&(i*=256);)r+=this[t+o]*i;return r},l.prototype.readUintBE=l.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||L(t,e,this.length);let r=this[t+--e],i=1;for(;e>0&&(i*=256);)r+=this[t+--e]*i;return r},l.prototype.readUint8=l.prototype.readUInt8=function(t,e){return t>>>=0,e||L(t,1,this.length),this[t]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(t,e){return t>>>=0,e||L(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(t,e){return t>>>=0,e||L(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(t,e){return t>>>=0,e||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(t,e){return t>>>=0,e||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readBigUInt64LE=Q((function(t){W(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||G(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))})),l.prototype.readBigUInt64BE=Q((function(t){W(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||G(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),l.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||L(t,e,this.length);let r=this[t],i=1,o=0;for(;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},l.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||L(t,e,this.length);let r=e,i=1,o=this[t+--r];for(;r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},l.prototype.readInt8=function(t,e){return t>>>=0,e||L(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){t>>>=0,e||L(t,2,this.length);const n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(t,e){t>>>=0,e||L(t,2,this.length);const n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(t,e){return t>>>=0,e||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return t>>>=0,e||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readBigInt64LE=Q((function(t){W(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||G(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),l.prototype.readBigInt64BE=Q((function(t){W(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||G(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+n)})),l.prototype.readFloatLE=function(t,e){return t>>>=0,e||L(t,4,this.length),o.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return t>>>=0,e||L(t,4,this.length),o.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return t>>>=0,e||L(t,8,this.length),o.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return t>>>=0,e||L(t,8,this.length),o.read(this,t,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){D(this,t,e,n,Math.pow(2,8*n)-1,0)}let i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){D(this,t,e,n,Math.pow(2,8*n)-1,0)}let i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},l.prototype.writeUint8=l.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,1,255,0),this[e]=255&t,e+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},l.prototype.writeBigUInt64LE=Q((function(t,e=0){return R(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeBigUInt64BE=Q((function(t,e=0){return N(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);D(this,t,e,n,r-1,-r)}let i=0,o=1,s=0;for(this[e]=255&t;++i<n&&(o*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+n},l.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);D(this,t,e,n,r-1,-r)}let i=n-1,o=1,s=0;for(this[e+i]=255&t;--i>=0&&(o*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+n},l.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},l.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},l.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},l.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},l.prototype.writeBigInt64LE=Q((function(t,e=0){return R(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeBigInt64BE=Q((function(t,e=0){return N(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeFloatLE=function(t,e,n){return z(this,t,e,!0,n)},l.prototype.writeFloatBE=function(t,e,n){return z(this,t,e,!1,n)},l.prototype.writeDoubleLE=function(t,e,n){return B(this,t,e,!0,n)},l.prototype.writeDoubleBE=function(t,e,n){return B(this,t,e,!1,n)},l.prototype.copy=function(t,e,n,r){if(!l.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);const i=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),i},l.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;let i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{const o=l.isBuffer(t)?t:l.from(t,r),s=o.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<n-e;++i)this[i+e]=o[i%s]}return this};const F={};function U(t,e,n){F[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function V(t){let e="",n=t.length;const r="-"===t[0]?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function q(t,e,n,r,i,o){if(t>n||t<e){const r="bigint"==typeof e?"n":"";let i;throw i=o>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(o+1)}${r}`:`>= -(2${r} ** ${8*(o+1)-1}${r}) and < 2 ** ${8*(o+1)-1}${r}`:`>= ${e}${r} and <= ${n}${r}`,new F.ERR_OUT_OF_RANGE("value",i,t)}!function(t,e,n){W(e,"offset"),void 0!==t[e]&&void 0!==t[e+n]||G(e,t.length-(n+1))}(r,i,o)}function W(t,e){if("number"!=typeof t)throw new F.ERR_INVALID_ARG_TYPE(e,"number",t)}function G(t,e,n){if(Math.floor(t)!==t)throw W(t,n),new F.ERR_OUT_OF_RANGE(n||"offset","an integer",t);if(e<0)throw new F.ERR_BUFFER_OUT_OF_BOUNDS;throw new F.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${e}`,t)}U("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),U("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),U("ERR_OUT_OF_RANGE",(function(t,e,n){let r=`The value of "${t}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=V(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=V(i)),i+="n"),r+=` It must be ${e}. Received ${i}`,r}),RangeError);const $=/[^+/0-9A-Za-z-_]/g;function H(t,e){let n;e=e||1/0;const r=t.length;let i=null;const o=[];for(let s=0;s<r;++s){if(n=t.charCodeAt(s),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Z(t){return i.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace($,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function Y(t,e,n,r){let i;for(i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function X(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function K(t){return t!=t}const J=function(){const t="0123456789abcdef",e=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)e[r+i]=t[n]+t[i]}return e}();function Q(t){return"undefined"==typeof BigInt?tt:t}function tt(){throw new Error("BigInt not supported")}},21924:function(t,e,n){"use strict";var r=n(40210),i=n(55559),o=i(r("String.prototype.indexOf"));t.exports=function(t,e){var n=r(t,!!e);return"function"==typeof n&&o(t,".prototype.")>-1?i(n):n}},55559:function(t,e,n){"use strict";var r=n(58612),i=n(40210),o=i("%Function.prototype.apply%"),s=i("%Function.prototype.call%"),a=i("%Reflect.apply%",!0)||r.call(s,o),c=i("%Object.getOwnPropertyDescriptor%",!0),l=i("%Object.defineProperty%",!0),u=i("%Math.max%");if(l)try{l({},"a",{value:1})}catch(t){l=null}t.exports=function(t){var e=a(r,s,arguments);c&&l&&(c(e,"length").configurable&&l(e,"length",{value:1+u(0,t.length-(arguments.length-1))}));return e};var h=function(){return a(r,o,arguments)};l?l(t.exports,"apply",{value:h}):t.exports.apply=h},8874:function(t){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},19818:function(t,e,n){var r=n(8874),i=n(86851),o=Object.hasOwnProperty,s=Object.create(null);for(var a in r)o.call(r,a)&&(s[r[a]]=a);var c=t.exports={to:{},get:{}};function l(t,e,n){return Math.min(Math.max(e,t),n)}function u(t){var e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}c.get=function(t){var e,n;switch(t.substring(0,3).toLowerCase()){case"hsl":e=c.get.hsl(t),n="hsl";break;case"hwb":e=c.get.hwb(t),n="hwb";break;default:e=c.get.rgb(t),n="rgb"}return e?{model:n,value:e}:null},c.get.rgb=function(t){if(!t)return null;var e,n,i,s=[0,0,0,1];if(e=t.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(i=e[2],e=e[1],n=0;n<3;n++){var a=2*n;s[n]=parseInt(e.slice(a,a+2),16)}i&&(s[3]=parseInt(i,16)/255)}else if(e=t.match(/^#([a-f0-9]{3,4})$/i)){for(i=(e=e[1])[3],n=0;n<3;n++)s[n]=parseInt(e[n]+e[n],16);i&&(s[3]=parseInt(i+i,16)/255)}else if(e=t.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(n=0;n<3;n++)s[n]=parseInt(e[n+1],0);e[4]&&(e[5]?s[3]=.01*parseFloat(e[4]):s[3]=parseFloat(e[4]))}else{if(!(e=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(e=t.match(/^(\w+)$/))?"transparent"===e[1]?[0,0,0,0]:o.call(r,e[1])?((s=r[e[1]])[3]=1,s):null:null;for(n=0;n<3;n++)s[n]=Math.round(2.55*parseFloat(e[n+1]));e[4]&&(e[5]?s[3]=.01*parseFloat(e[4]):s[3]=parseFloat(e[4]))}for(n=0;n<3;n++)s[n]=l(s[n],0,255);return s[3]=l(s[3],0,1),s},c.get.hsl=function(t){if(!t)return null;var e=t.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(e){var n=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,l(parseFloat(e[2]),0,100),l(parseFloat(e[3]),0,100),l(isNaN(n)?1:n,0,1)]}return null},c.get.hwb=function(t){if(!t)return null;var e=t.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(e){var n=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,l(parseFloat(e[2]),0,100),l(parseFloat(e[3]),0,100),l(isNaN(n)?1:n,0,1)]}return null},c.to.hex=function(){var t=i(arguments);return"#"+u(t[0])+u(t[1])+u(t[2])+(t[3]<1?u(Math.round(255*t[3])):"")},c.to.rgb=function(){var t=i(arguments);return t.length<4||1===t[3]?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},c.to.rgb.percent=function(){var t=i(arguments),e=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),r=Math.round(t[2]/255*100);return t.length<4||1===t[3]?"rgb("+e+"%, "+n+"%, "+r+"%)":"rgba("+e+"%, "+n+"%, "+r+"%, "+t[3]+")"},c.to.hsl=function(){var t=i(arguments);return t.length<4||1===t[3]?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},c.to.hwb=function(){var t=i(arguments),e="";return t.length>=4&&1!==t[3]&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"},c.to.keyword=function(t){return s[t.slice(0,3)]}},6767:function(t,e,n){const r=n(19818),i=n(80978),o=["keyword","gray","hex"],s={};for(const t of Object.keys(i))s[[...i[t].labels].sort().join("")]=t;const a={};function c(t,e){if(!(this instanceof c))return new c(t,e);if(e&&e in o&&(e=null),e&&!(e in i))throw new Error("Unknown model: "+e);let n,l;if(null==t)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof c)this.model=t.model,this.color=[...t.color],this.valpha=t.valpha;else if("string"==typeof t){const e=r.get(t);if(null===e)throw new Error("Unable to parse color from string: "+t);this.model=e.model,l=i[this.model].channels,this.color=e.value.slice(0,l),this.valpha="number"==typeof e.value[l]?e.value[l]:1}else if(t.length>0){this.model=e||"rgb",l=i[this.model].channels;const n=Array.prototype.slice.call(t,0,l);this.color=p(n,l),this.valpha="number"==typeof t[l]?t[l]:1}else if("number"==typeof t)this.model="rgb",this.color=[t>>16&255,t>>8&255,255&t],this.valpha=1;else{this.valpha=1;const e=Object.keys(t);"alpha"in t&&(e.splice(e.indexOf("alpha"),1),this.valpha="number"==typeof t.alpha?t.alpha:0);const r=e.sort().join("");if(!(r in s))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=s[r];const{labels:o}=i[this.model],a=[];for(n=0;n<o.length;n++)a.push(t[o[n]]);this.color=p(a)}if(a[this.model])for(l=i[this.model].channels,n=0;n<l;n++){const t=a[this.model][n];t&&(this.color[n]=t(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}c.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(t){let e=this.model in r.to?this:this.rgb();e=e.round("number"==typeof t?t:1);const n=1===e.valpha?e.color:[...e.color,this.valpha];return r.to[e.model](n)},percentString(t){const e=this.rgb().round("number"==typeof t?t:1),n=1===e.valpha?e.color:[...e.color,this.valpha];return r.to.rgb.percent(n)},array(){return 1===this.valpha?[...this.color]:[...this.color,this.valpha]},object(){const t={},{channels:e}=i[this.model],{labels:n}=i[this.model];for(let r=0;r<e;r++)t[n[r]]=this.color[r];return 1!==this.valpha&&(t.alpha=this.valpha),t},unitArray(){const t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,1!==this.valpha&&t.push(this.valpha),t},unitObject(){const t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,1!==this.valpha&&(t.alpha=this.valpha),t},round(t){return t=Math.max(t||0,0),new c([...this.color.map(l(t)),this.valpha],this.model)},alpha(t){return void 0!==t?new c([...this.color,Math.max(0,Math.min(1,t))],this.model):this.valpha},red:u("rgb",0,h(255)),green:u("rgb",1,h(255)),blue:u("rgb",2,h(255)),hue:u(["hsl","hsv","hsl","hwb","hcg"],0,(t=>(t%360+360)%360)),saturationl:u("hsl",1,h(100)),lightness:u("hsl",2,h(100)),saturationv:u("hsv",1,h(100)),value:u("hsv",2,h(100)),chroma:u("hcg",1,h(100)),gray:u("hcg",2,h(100)),white:u("hwb",1,h(100)),wblack:u("hwb",2,h(100)),cyan:u("cmyk",0,h(100)),magenta:u("cmyk",1,h(100)),yellow:u("cmyk",2,h(100)),black:u("cmyk",3,h(100)),x:u("xyz",0,h(95.047)),y:u("xyz",1,h(100)),z:u("xyz",2,h(108.833)),l:u("lab",0,h(100)),a:u("lab",1),b:u("lab",2),keyword(t){return void 0!==t?new c(t):i[this.model].keyword(this.color)},hex(t){return void 0!==t?new c(t):r.to.hex(this.rgb().round().color)},hexa(t){if(void 0!==t)return new c(t);const e=this.rgb().round().color;let n=Math.round(255*this.valpha).toString(16).toUpperCase();return 1===n.length&&(n="0"+n),r.to.hex(e)+n},rgbNumber(){const t=this.rgb().color;return(255&t[0])<<16|(255&t[1])<<8|255&t[2]},luminosity(){const t=this.rgb().color,e=[];for(const[n,r]of t.entries()){const t=r/255;e[n]=t<=.04045?t/12.92:((t+.055)/1.055)**2.4}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(t){const e=this.luminosity(),n=t.luminosity();return e>n?(e+.05)/(n+.05):(n+.05)/(e+.05)},level(t){const e=this.contrast(t);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){const t=this.rgb().color;return(2126*t[0]+7152*t[1]+722*t[2])/1e4<128},isLight(){return!this.isDark()},negate(){const t=this.rgb();for(let e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten(t){const e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken(t){const e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate(t){const e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate(t){const e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten(t){const e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken(t){const e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale(){const t=this.rgb().color,e=.3*t[0]+.59*t[1]+.11*t[2];return c.rgb(e,e,e)},fade(t){return this.alpha(this.valpha-this.valpha*t)},opaquer(t){return this.alpha(this.valpha+this.valpha*t)},rotate(t){const e=this.hsl();let n=e.color[0];return n=(n+t)%360,n=n<0?360+n:n,e.color[0]=n,e},mix(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);const n=t.rgb(),r=this.rgb(),i=void 0===e?.5:e,o=2*i-1,s=n.alpha()-r.alpha(),a=((o*s==-1?o:(o+s)/(1+o*s))+1)/2,l=1-a;return c.rgb(a*n.red()+l*r.red(),a*n.green()+l*r.green(),a*n.blue()+l*r.blue(),n.alpha()*i+r.alpha()*(1-i))}};for(const t of Object.keys(i)){if(o.includes(t))continue;const{channels:e}=i[t];c.prototype[t]=function(...e){return this.model===t?new c(this):e.length>0?new c(e,t):new c([...(n=i[this.model][t].raw(this.color),Array.isArray(n)?n:[n]),this.valpha],t);var n},c[t]=function(...n){let r=n[0];return"number"==typeof r&&(r=p(n,e)),new c(r,t)}}function l(t){return function(e){return function(t,e){return Number(t.toFixed(e))}(e,t)}}function u(t,e,n){t=Array.isArray(t)?t:[t];for(const r of t)(a[r]||(a[r]=[]))[e]=n;return t=t[0],function(r){let i;return void 0!==r?(n&&(r=n(r)),i=this[t](),i.color[e]=r,i):(i=this[t]().color[e],n&&(i=n(i)),i)}}function h(t){return function(e){return Math.max(0,Math.min(t,e))}}function p(t,e){for(let n=0;n<e;n++)"number"!=typeof t[n]&&(t[n]=0);return t}t.exports=c},12956:function(t,e,n){const r=n(58900),i={};for(const t of Object.keys(r))i[r[t]]=t;const o={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};t.exports=o;for(const t of Object.keys(o)){if(!("channels"in o[t]))throw new Error("missing channels property: "+t);if(!("labels"in o[t]))throw new Error("missing channel labels property: "+t);if(o[t].labels.length!==o[t].channels)throw new Error("channel and label counts mismatch: "+t);const{channels:e,labels:n}=o[t];delete o[t].channels,delete o[t].labels,Object.defineProperty(o[t],"channels",{value:e}),Object.defineProperty(o[t],"labels",{value:n})}o.rgb.hsl=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=o-i;let a,c;o===i?a=0:e===o?a=(n-r)/s:n===o?a=2+(r-e)/s:r===o&&(a=4+(e-n)/s),a=Math.min(60*a,360),a<0&&(a+=360);const l=(i+o)/2;return c=o===i?0:l<=.5?s/(o+i):s/(2-o-i),[a,100*c,100*l]},o.rgb.hsv=function(t){let e,n,r,i,o;const s=t[0]/255,a=t[1]/255,c=t[2]/255,l=Math.max(s,a,c),u=l-Math.min(s,a,c),h=function(t){return(l-t)/6/u+.5};return 0===u?(i=0,o=0):(o=u/l,e=h(s),n=h(a),r=h(c),s===l?i=r-n:a===l?i=1/3+e-r:c===l&&(i=2/3+n-e),i<0?i+=1:i>1&&(i-=1)),[360*i,100*o,100*l]},o.rgb.hwb=function(t){const e=t[0],n=t[1];let r=t[2];const i=o.rgb.hsl(t)[0],s=1/255*Math.min(e,Math.min(n,r));return r=1-1/255*Math.max(e,Math.max(n,r)),[i,100*s,100*r]},o.rgb.cmyk=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,i=Math.min(1-e,1-n,1-r);return[100*((1-e-i)/(1-i)||0),100*((1-n-i)/(1-i)||0),100*((1-r-i)/(1-i)||0),100*i]},o.rgb.keyword=function(t){const e=i[t];if(e)return e;let n,o=1/0;for(const e of Object.keys(r)){const i=r[e],c=(a=i,((s=t)[0]-a[0])**2+(s[1]-a[1])**2+(s[2]-a[2])**2);c<o&&(o=c,n=e)}var s,a;return n},o.keyword.rgb=function(t){return r[t]},o.rgb.xyz=function(t){let e=t[0]/255,n=t[1]/255,r=t[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92;return[100*(.4124*e+.3576*n+.1805*r),100*(.2126*e+.7152*n+.0722*r),100*(.0193*e+.1192*n+.9505*r)]},o.rgb.lab=function(t){const e=o.rgb.xyz(t);let n=e[0],r=e[1],i=e[2];n/=95.047,r/=100,i/=108.883,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;return[116*r-16,500*(n-r),200*(r-i)]},o.hsl.rgb=function(t){const e=t[0]/360,n=t[1]/100,r=t[2]/100;let i,o,s;if(0===n)return s=255*r,[s,s,s];i=r<.5?r*(1+n):r+n-r*n;const a=2*r-i,c=[0,0,0];for(let t=0;t<3;t++)o=e+1/3*-(t-1),o<0&&o++,o>1&&o--,s=6*o<1?a+6*(i-a)*o:2*o<1?i:3*o<2?a+(i-a)*(2/3-o)*6:a,c[t]=255*s;return c},o.hsl.hsv=function(t){const e=t[0];let n=t[1]/100,r=t[2]/100,i=n;const o=Math.max(r,.01);r*=2,n*=r<=1?r:2-r,i*=o<=1?o:2-o;return[e,100*(0===r?2*i/(o+i):2*n/(r+n)),100*((r+n)/2)]},o.hsv.rgb=function(t){const e=t[0]/60,n=t[1]/100;let r=t[2]/100;const i=Math.floor(e)%6,o=e-Math.floor(e),s=255*r*(1-n),a=255*r*(1-n*o),c=255*r*(1-n*(1-o));switch(r*=255,i){case 0:return[r,c,s];case 1:return[a,r,s];case 2:return[s,r,c];case 3:return[s,a,r];case 4:return[c,s,r];case 5:return[r,s,a]}},o.hsv.hsl=function(t){const e=t[0],n=t[1]/100,r=t[2]/100,i=Math.max(r,.01);let o,s;s=(2-n)*r;const a=(2-n)*i;return o=n*i,o/=a<=1?a:2-a,o=o||0,s/=2,[e,100*o,100*s]},o.hwb.rgb=function(t){const e=t[0]/360;let n=t[1]/100,r=t[2]/100;const i=n+r;let o;i>1&&(n/=i,r/=i);const s=Math.floor(6*e),a=1-r;o=6*e-s,0!=(1&s)&&(o=1-o);const c=n+o*(a-n);let l,u,h;switch(s){default:case 6:case 0:l=a,u=c,h=n;break;case 1:l=c,u=a,h=n;break;case 2:l=n,u=a,h=c;break;case 3:l=n,u=c,h=a;break;case 4:l=c,u=n,h=a;break;case 5:l=a,u=n,h=c}return[255*l,255*u,255*h]},o.cmyk.rgb=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100,i=t[3]/100;return[255*(1-Math.min(1,e*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i))]},o.xyz.rgb=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100;let i,o,s;return i=3.2406*e+-1.5372*n+-.4986*r,o=-.9689*e+1.8758*n+.0415*r,s=.0557*e+-.204*n+1.057*r,i=i>.0031308?1.055*i**(1/2.4)-.055:12.92*i,o=o>.0031308?1.055*o**(1/2.4)-.055:12.92*o,s=s>.0031308?1.055*s**(1/2.4)-.055:12.92*s,i=Math.min(Math.max(0,i),1),o=Math.min(Math.max(0,o),1),s=Math.min(Math.max(0,s),1),[255*i,255*o,255*s]},o.xyz.lab=function(t){let e=t[0],n=t[1],r=t[2];e/=95.047,n/=100,r/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116;return[116*n-16,500*(e-n),200*(n-r)]},o.lab.xyz=function(t){let e,n,r;n=(t[0]+16)/116,e=t[1]/500+n,r=n-t[2]/200;const i=n**3,o=e**3,s=r**3;return n=i>.008856?i:(n-16/116)/7.787,e=o>.008856?o:(e-16/116)/7.787,r=s>.008856?s:(r-16/116)/7.787,e*=95.047,n*=100,r*=108.883,[e,n,r]},o.lab.lch=function(t){const e=t[0],n=t[1],r=t[2];let i;i=360*Math.atan2(r,n)/2/Math.PI,i<0&&(i+=360);return[e,Math.sqrt(n*n+r*r),i]},o.lch.lab=function(t){const e=t[0],n=t[1],r=t[2]/360*2*Math.PI;return[e,n*Math.cos(r),n*Math.sin(r)]},o.rgb.ansi16=function(t,e=null){const[n,r,i]=t;let s=null===e?o.rgb.hsv(t)[2]:e;if(s=Math.round(s/50),0===s)return 30;let a=30+(Math.round(i/255)<<2|Math.round(r/255)<<1|Math.round(n/255));return 2===s&&(a+=60),a},o.hsv.ansi16=function(t){return o.rgb.ansi16(o.hsv.rgb(t),t[2])},o.rgb.ansi256=function(t){const e=t[0],n=t[1],r=t[2];if(e===n&&n===r)return e<8?16:e>248?231:Math.round((e-8)/247*24)+232;return 16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},o.ansi16.rgb=function(t){let e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const n=.5*(1+~~(t>50));return[(1&e)*n*255,(e>>1&1)*n*255,(e>>2&1)*n*255]},o.ansi256.rgb=function(t){if(t>=232){const e=10*(t-232)+8;return[e,e,e]}let e;t-=16;return[Math.floor(t/36)/5*255,Math.floor((e=t%36)/6)/5*255,e%6/5*255]},o.rgb.hex=function(t){const e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},o.hex.rgb=function(t){const e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let n=e[0];3===e[0].length&&(n=n.split("").map((t=>t+t)).join(""));const r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},o.rgb.hcg=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,i=Math.max(Math.max(e,n),r),o=Math.min(Math.min(e,n),r),s=i-o;let a,c;return a=s<1?o/(1-s):0,c=s<=0?0:i===e?(n-r)/s%6:i===n?2+(r-e)/s:4+(e-n)/s,c/=6,c%=1,[360*c,100*s,100*a]},o.hsl.hcg=function(t){const e=t[1]/100,n=t[2]/100,r=n<.5?2*e*n:2*e*(1-n);let i=0;return r<1&&(i=(n-.5*r)/(1-r)),[t[0],100*r,100*i]},o.hsv.hcg=function(t){const e=t[1]/100,n=t[2]/100,r=e*n;let i=0;return r<1&&(i=(n-r)/(1-r)),[t[0],100*r,100*i]},o.hcg.rgb=function(t){const e=t[0]/360,n=t[1]/100,r=t[2]/100;if(0===n)return[255*r,255*r,255*r];const i=[0,0,0],o=e%1*6,s=o%1,a=1-s;let c=0;switch(Math.floor(o)){case 0:i[0]=1,i[1]=s,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=s;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=s,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return c=(1-n)*r,[255*(n*i[0]+c),255*(n*i[1]+c),255*(n*i[2]+c)]},o.hcg.hsv=function(t){const e=t[1]/100,n=e+t[2]/100*(1-e);let r=0;return n>0&&(r=e/n),[t[0],100*r,100*n]},o.hcg.hsl=function(t){const e=t[1]/100,n=t[2]/100*(1-e)+.5*e;let r=0;return n>0&&n<.5?r=e/(2*n):n>=.5&&n<1&&(r=e/(2*(1-n))),[t[0],100*r,100*n]},o.hcg.hwb=function(t){const e=t[1]/100,n=e+t[2]/100*(1-e);return[t[0],100*(n-e),100*(1-n)]},o.hwb.hcg=function(t){const e=t[1]/100,n=1-t[2]/100,r=n-e;let i=0;return r<1&&(i=(n-r)/(1-r)),[t[0],100*r,100*i]},o.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},o.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},o.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},o.gray.hsl=function(t){return[0,0,t[0]]},o.gray.hsv=o.gray.hsl,o.gray.hwb=function(t){return[0,100,t[0]]},o.gray.cmyk=function(t){return[0,0,0,t[0]]},o.gray.lab=function(t){return[t[0],0,0]},o.gray.hex=function(t){const e=255&Math.round(t[0]/100*255),n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(n.length)+n},o.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}},80978:function(t,e,n){const r=n(12956),i=n(87774),o={};Object.keys(r).forEach((t=>{o[t]={},Object.defineProperty(o[t],"channels",{value:r[t].channels}),Object.defineProperty(o[t],"labels",{value:r[t].labels});const e=i(t);Object.keys(e).forEach((n=>{const r=e[n];o[t][n]=function(t){const e=function(...e){const n=e[0];if(null==n)return n;n.length>1&&(e=n);const r=t(e);if("object"==typeof r)for(let t=r.length,e=0;e<t;e++)r[e]=Math.round(r[e]);return r};return"conversion"in t&&(e.conversion=t.conversion),e}(r),o[t][n].raw=function(t){const e=function(...e){const n=e[0];return null==n?n:(n.length>1&&(e=n),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}(r)}))})),t.exports=o},87774:function(t,e,n){const r=n(12956);function i(t){const e=function(){const t={},e=Object.keys(r);for(let n=e.length,r=0;r<n;r++)t[e[r]]={distance:-1,parent:null};return t}(),n=[t];for(e[t].distance=0;n.length;){const t=n.pop(),i=Object.keys(r[t]);for(let r=i.length,o=0;o<r;o++){const r=i[o],s=e[r];-1===s.distance&&(s.distance=e[t].distance+1,s.parent=t,n.unshift(r))}}return e}function o(t,e){return function(n){return e(t(n))}}function s(t,e){const n=[e[t].parent,t];let i=r[e[t].parent][t],s=e[t].parent;for(;e[s].parent;)n.unshift(e[s].parent),i=o(r[e[s].parent][s],i),s=e[s].parent;return i.conversion=n,i}t.exports=function(t){const e=i(t),n={},r=Object.keys(e);for(let t=r.length,i=0;i<t;i++){const t=r[i];null!==e[t].parent&&(n[t]=s(t,e))}return n}},58900:function(t){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},72273:function(t,e,n){"use strict";var r=n(81662),i=n(43842),o=n(26960),s=n(88639).orient2d;function a(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;var i=function(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],s=0;s<t.length;s++){var a=t[s];a[0]<e[0]&&(e=a),a[0]>r[0]&&(r=a),a[1]<n[1]&&(n=a),a[1]>i[1]&&(i=a)}var c=[e,n,r,i],l=c.slice();for(s=0;s<t.length;s++)o(t[s],c)||l.push(t[s]);return function(t){t.sort(v);for(var e=[],n=0;n<t.length;n++){for(;e.length>=2&&f(e[e.length-2],e[e.length-1],t[n])<=0;)e.pop();e.push(t[n])}for(var r=[],i=t.length-1;i>=0;i--){for(;r.length>=2&&f(r[r.length-2],r[r.length-1],t[i])<=0;)r.pop();r.push(t[i])}return r.pop(),e.pop(),e.concat(r)}(l)}(t),s=new r(16);s.toBBox=function(t){return{minX:t[0],minY:t[1],maxX:t[0],maxY:t[1]}},s.compareMinX=function(t,e){return t[0]-e[0]},s.compareMinY=function(t,e){return t[1]-e[1]},s.load(t);for(var a,l=[],u=0;u<i.length;u++){var h=i[u];s.remove(h),a=g(h,a),l.push(a)}var p=new r(16);for(u=0;u<l.length;u++)p.insert(d(l[u]));for(var y=e*e,_=n*n;l.length;){var x=l.shift(),b=x.p,w=x.next.p,E=m(b,w);if(!(E<_)){var T=E/y;(h=c(s,x.prev.p,b,w,x.next.next.p,T,p))&&Math.min(m(h,b),m(h,w))<=T&&(l.push(x),l.push(g(h,x)),s.remove(h),p.remove(x),p.insert(d(x)),p.insert(d(x.next)))}}x=a;var S=[];do{S.push(x.p),x=x.next}while(x!==a);return S.push(x.p),S}function c(t,e,n,r,o,s,a){for(var c=new i([],l),h=t.data;h;){for(var f=0;f<h.children.length;f++){var d=h.children[f],g=h.leaf?y(d,n,r):u(n,r,d);g>s||c.push({node:d,dist:g})}for(;c.length&&!c.peek().node.children;){var m=c.pop(),_=m.node,v=y(_,e,n),x=y(_,r,o);if(m.dist<v&&m.dist<x&&p(n,_,a)&&p(r,_,a))return _}(h=c.pop())&&(h=h.node)}return null}function l(t,e){return t.dist-e.dist}function u(t,e,n){if(h(t,n)||h(e,n))return 0;var r=_(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=_(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=_(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var s=_(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===s?0:Math.min(r,i,o,s)}function h(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function p(t,e,n){for(var r,i,o,s,a=Math.min(t[0],e[0]),c=Math.min(t[1],e[1]),l=Math.max(t[0],e[0]),u=Math.max(t[1],e[1]),h=n.search({minX:a,minY:c,maxX:l,maxY:u}),p=0;p<h.length;p++)if(r=h[p].p,i=h[p].next.p,o=t,r!==(s=e)&&i!==o&&f(r,i,o)>0!=f(r,i,s)>0&&f(o,s,r)>0!=f(o,s,i)>0)return!1;return!0}function f(t,e,n){return s(t[0],t[1],e[0],e[1],n[0],n[1])}function d(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function g(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function m(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function y(t,e,n){var r=e[0],i=e[1],o=n[0]-r,s=n[1]-i;if(0!==o||0!==s){var a=((t[0]-r)*o+(t[1]-i)*s)/(o*o+s*s);a>1?(r=n[0],i=n[1]):a>0&&(r+=o*a,i+=s*a)}return(o=t[0]-r)*o+(s=t[1]-i)*s}function _(t,e,n,r,i,o,s,a){var c,l,u,h,p=n-t,f=r-e,d=s-i,g=a-o,m=t-i,y=e-o,_=p*p+f*f,v=p*d+f*g,x=d*d+g*g,b=p*m+f*y,w=d*m+g*y,E=_*x-v*v,T=E,S=E;0===E?(l=0,T=1,h=w,S=x):(h=_*w-v*b,(l=v*w-x*b)<0?(l=0,h=w,S=x):l>T&&(l=T,h=w+v,S=x)),h<0?(h=0,-b<0?l=0:-b>_?l=T:(l=-b,T=_)):h>S&&(h=S,-b+v<0?l=0:-b+v>_?l=T:(l=-b+v,T=_));var k=(1-(u=0===h?0:h/S))*i+u*s-((1-(c=0===l?0:l/T))*t+c*n),A=(1-u)*o+u*a-((1-c)*e+c*r);return k*k+A*A}function v(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}i.default&&(i=i.default),t.exports=a,t.exports.default=a},81662:function(t){t.exports=function(){"use strict";function t(t,r,i,o,s){!function t(n,r,i,o,s){for(;o>i;){if(o-i>600){var a=o-i+1,c=r-i+1,l=Math.log(a),u=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*u*(a-u)/a)*(c-a/2<0?-1:1);t(n,r,Math.max(i,Math.floor(r-c*u/a+h)),Math.min(o,Math.floor(r+(a-c)*u/a+h)),s)}var p=n[r],f=i,d=o;for(e(n,i,r),s(n[o],p)>0&&e(n,i,o);f<d;){for(e(n,f,d),f++,d--;s(n[f],p)<0;)f++;for(;s(n[d],p)>0;)d--}0===s(n[i],p)?e(n,i,d):e(n,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}(t,r,i||0,o||t.length-1,s||n)}function e(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function n(t,e){return t<e?-1:t>e?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function o(t,e){s(t,0,t.children.length,e,t)}function s(t,e,n,r,i){i||(i=d(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<n;o++){var s=t.children[o];a(i,t.leaf?r(s):s)}return i}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function c(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function u(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(e,n,r,i,o){for(var s=[n,r];s.length;)if(!((r=s.pop())-(n=s.pop())<=i)){var a=n+Math.ceil((r-n)/i/2)*i;t(e,a,n,r,o),s.push(n,a,a,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var e=this.data,n=[];if(!f(t,e))return n;for(var r=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var s=e.children[o],a=e.leaf?r(s):s;f(t,a)&&(e.leaf?n.push(s):p(t,a)?this._all(s,n):i.push(s))}e=i.pop()}return n},r.prototype.collides=function(t){var e=this.data;if(!f(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var i=e.children[r],o=e.leaf?this.toBBox(i):i;if(f(t,o)){if(e.leaf||p(t,o))return!0;n.push(i)}}e=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=d([]),this},r.prototype.remove=function(t,e){if(!t)return this;for(var n,r,o,s=this.data,a=this.toBBox(t),c=[],l=[];s||c.length;){if(s||(s=c.pop(),r=c[c.length-1],n=l.pop(),o=!0),s.leaf){var u=i(t,s.children,e);if(-1!==u)return s.children.splice(u,1),c.push(s),this._condense(c),this}o||s.leaf||!p(s,a)?r?(n++,s=r.children[n],o=!1):s=null:(c.push(s),l.push(n),n=0,r=s,s=s.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,e){return t.minX-e.minX},r.prototype.compareMinY=function(t,e){return t.minY-e.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},r.prototype._build=function(t,e,n,r){var i,s=n-e+1,a=this._maxEntries;if(s<=a)return o(i=d(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,r-1))),(i=d([])).leaf=!1,i.height=r;var c=Math.ceil(s/a),l=c*Math.ceil(Math.sqrt(a));g(t,e,n,l,this.compareMinX);for(var u=e;u<=n;u+=l){var h=Math.min(u+l-1,n);g(t,u,h,c,this.compareMinY);for(var p=u;p<=h;p+=c){var f=Math.min(p+c-1,h);i.children.push(this._build(t,p,f,r-1))}}return o(i,this.toBBox),i},r.prototype._chooseSubtree=function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var i=1/0,o=1/0,s=void 0,a=0;a<e.children.length;a++){var c=e.children[a],l=u(c),h=(p=t,f=c,(Math.max(f.maxX,p.maxX)-Math.min(f.minX,p.minX))*(Math.max(f.maxY,p.maxY)-Math.min(f.minY,p.minY))-l);h<o?(o=h,i=l<i?l:i,s=c):h===o&&l<i&&(i=l,s=c)}e=s||e.children[0]}var p,f;return e},r.prototype._insert=function(t,e,n){var r=n?t:this.toBBox(t),i=[],o=this._chooseSubtree(r,this.data,e,i);for(o.children.push(t),a(o,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},r.prototype._split=function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var s=this._chooseSplitIndex(n,i,r),a=d(n.children.splice(s,n.children.length-s));a.height=n.height,a.leaf=n.leaf,o(n,this.toBBox),o(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},r.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,e,n){for(var r,i,o,a,c,l,h,p=1/0,f=1/0,d=e;d<=n-e;d++){var g=s(t,0,d,this.toBBox),m=s(t,d,n,this.toBBox),y=(i=g,o=m,a=void 0,c=void 0,l=void 0,h=void 0,a=Math.max(i.minX,o.minX),c=Math.max(i.minY,o.minY),l=Math.min(i.maxX,o.maxX),h=Math.min(i.maxY,o.maxY),Math.max(0,l-a)*Math.max(0,h-c)),_=u(g)+u(m);y<p?(p=y,r=d,f=_<f?_:f):y===p&&_<f&&(f=_,r=d)}return r||n-e},r.prototype._chooseSplitAxis=function(t,e,n){var r=t.leaf?this.compareMinX:c,i=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,o=s(t,0,e,i),c=s(t,n-e,n,i),l=h(o)+h(c),u=e;u<n-e;u++){var p=t.children[u];a(o,t.leaf?i(p):p),l+=h(o)}for(var f=n-e-1;f>=e;f--){var d=t.children[f];a(c,t.leaf?i(d):d),l+=h(c)}return l},r.prototype._adjustParentBBoxes=function(t,e,n){for(var r=n;r>=0;r--)a(e[r],t)},r.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},r}()},25108:function(t,e,n){var r=n(89539),i=n(69282);function o(){return(new Date).getTime()}var s,a=Array.prototype.slice,c={};s=void 0!==n.g&&n.g.console?n.g.console:"undefined"!=typeof window&&window.console?window.console:{};for(var l=[[function(){},"log"],[function(){s.log.apply(s,arguments)},"info"],[function(){s.log.apply(s,arguments)},"warn"],[function(){s.warn.apply(s,arguments)},"error"],[function(t){c[t]=o()},"time"],[function(t){var e=c[t];if(!e)throw new Error("No such label: "+t);delete c[t];var n=o()-e;s.log(t+": "+n+"ms")},"timeEnd"],[function(){var t=new Error;t.name="Trace",t.message=r.format.apply(null,arguments),s.error(t.stack)},"trace"],[function(t){s.log(r.inspect(t)+"\n")},"dir"],[function(t){if(!t){var e=a.call(arguments,1);i.ok(!1,r.format.apply(null,e))}},"assert"]],u=0;u<l.length;u++){var h=l[u],p=h[0],f=h[1];s[f]||(s[f]=p)}t.exports=s},19662:function(t,e,n){"use strict";var r=n(60614),i=n(66330),o=TypeError;t.exports=function(t){if(r(t))return t;throw new o(i(t)+" is not a function")}},39483:function(t,e,n){"use strict";var r=n(4411),i=n(66330),o=TypeError;t.exports=function(t){if(r(t))return t;throw new o(i(t)+" is not a constructor")}},40027:function(t,e,n){"use strict";var r=n(75706).has;t.exports=function(t){return r(t),t}},96077:function(t,e,n){"use strict";var r=n(60614),i=String,o=TypeError;t.exports=function(t){if("object"==typeof t||r(t))return t;throw new o("Can't set "+i(t)+" as a prototype")}},88999:function(t,e,n){"use strict";var r=n(79405).has;t.exports=function(t){return r(t),t}},51223:function(t,e,n){"use strict";var r=n(5112),i=n(70030),o=n(3070).f,s=r("unscopables"),a=Array.prototype;void 0===a[s]&&o(a,s,{configurable:!0,value:i(null)}),t.exports=function(t){a[s][t]=!0}},31530:function(t,e,n){"use strict";var r=n(28710).charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},25787:function(t,e,n){"use strict";var r=n(47976),i=TypeError;t.exports=function(t,e){if(r(e,t))return t;throw new i("Incorrect invocation")}},19670:function(t,e,n){"use strict";var r=n(70111),i=String,o=TypeError;t.exports=function(t){if(r(t))return t;throw new o(i(t)+" is not an object")}},23013:function(t){"use strict";t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},7556:function(t,e,n){"use strict";var r=n(47293);t.exports=r((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}}))},90260:function(t,e,n){"use strict";var r,i,o,s=n(23013),a=n(19781),c=n(17854),l=n(60614),u=n(70111),h=n(92597),p=n(70648),f=n(66330),d=n(68880),g=n(98052),m=n(47045),y=n(47976),_=n(79518),v=n(27674),x=n(5112),b=n(69711),w=n(29909),E=w.enforce,T=w.get,S=c.Int8Array,k=S&&S.prototype,A=c.Uint8ClampedArray,M=A&&A.prototype,I=S&&_(S),C=k&&_(k),O=Object.prototype,P=c.TypeError,L=x("toStringTag"),D=b("TYPED_ARRAY_TAG"),R="TypedArrayConstructor",N=s&&!!v&&"Opera"!==p(c.opera),j=!1,z={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},B={BigInt64Array:8,BigUint64Array:8},F=function(t){var e=_(t);if(u(e)){var n=T(e);return n&&h(n,R)?n[R]:F(e)}},U=function(t){if(!u(t))return!1;var e=p(t);return h(z,e)||h(B,e)};for(r in z)(o=(i=c[r])&&i.prototype)?E(o)[R]=i:N=!1;for(r in B)(o=(i=c[r])&&i.prototype)&&(E(o)[R]=i);if((!N||!l(I)||I===Function.prototype)&&(I=function(){throw new P("Incorrect invocation")},N))for(r in z)c[r]&&v(c[r],I);if((!N||!C||C===O)&&(C=I.prototype,N))for(r in z)c[r]&&v(c[r].prototype,C);if(N&&_(M)!==C&&v(M,C),a&&!h(C,L))for(r in j=!0,m(C,L,{configurable:!0,get:function(){return u(this)?this[D]:void 0}}),z)c[r]&&d(c[r],D,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:N,TYPED_ARRAY_TAG:j&&D,aTypedArray:function(t){if(U(t))return t;throw new P("Target is not a typed array")},aTypedArrayConstructor:function(t){if(l(t)&&(!v||y(I,t)))return t;throw new P(f(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,n,r){if(a){if(n)for(var i in z){var o=c[i];if(o&&h(o.prototype,t))try{delete o.prototype[t]}catch(n){try{o.prototype[t]=e}catch(t){}}}C[t]&&!n||g(C,t,n?e:N&&k[t]||e,r)}},exportTypedArrayStaticMethod:function(t,e,n){var r,i;if(a){if(v){if(n)for(r in z)if((i=c[r])&&h(i,t))try{delete i[t]}catch(t){}if(I[t]&&!n)return;try{return g(I,t,n?e:N&&I[t]||e)}catch(t){}}for(r in z)!(i=c[r])||i[t]&&!n||g(i,t,e)}},getTypedArrayConstructor:F,isView:function(t){if(!u(t))return!1;var e=p(t);return"DataView"===e||h(z,e)||h(B,e)},isTypedArray:U,TypedArray:I,TypedArrayPrototype:C}},13331:function(t,e,n){"use strict";var r=n(17854),i=n(1702),o=n(19781),s=n(23013),a=n(76530),c=n(68880),l=n(47045),u=n(89190),h=n(47293),p=n(25787),f=n(19303),d=n(17466),g=n(57067),m=n(26130),y=n(11179),_=n(79518),v=n(27674),x=n(8006).f,b=n(21285),w=n(41589),E=n(58003),T=n(29909),S=a.PROPER,k=a.CONFIGURABLE,A="ArrayBuffer",M="DataView",I="prototype",C="Wrong index",O=T.getterFor(A),P=T.getterFor(M),L=T.set,D=r[A],R=D,N=R&&R[I],j=r[M],z=j&&j[I],B=Object.prototype,F=r.Array,U=r.RangeError,V=i(b),q=i([].reverse),W=y.pack,G=y.unpack,$=function(t){return[255&t]},H=function(t){return[255&t,t>>8&255]},Z=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},Y=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},X=function(t){return W(m(t),23,4)},K=function(t){return W(t,52,8)},J=function(t,e,n){l(t[I],e,{configurable:!0,get:function(){return n(this)[e]}})},Q=function(t,e,n,r){var i=P(t),o=g(n),s=!!r;if(o+e>i.byteLength)throw new U(C);var a=i.bytes,c=o+i.byteOffset,l=w(a,c,c+e);return s?l:q(l)},tt=function(t,e,n,r,i,o){var s=P(t),a=g(n),c=r(+i),l=!!o;if(a+e>s.byteLength)throw new U(C);for(var u=s.bytes,h=a+s.byteOffset,p=0;p<e;p++)u[h+p]=c[l?p:e-p-1]};if(s){var et=S&&D.name!==A;if(h((function(){D(1)}))&&h((function(){new D(-1)}))&&!h((function(){return new D,new D(1.5),new D(NaN),1!==D.length||et&&!k})))et&&k&&c(D,"name",A);else{(R=function(t){return p(this,N),new D(g(t))})[I]=N;for(var nt,rt=x(D),it=0;rt.length>it;)(nt=rt[it++])in R||c(R,nt,D[nt]);N.constructor=R}v&&_(z)!==B&&v(z,B);var ot=new j(new R(2)),st=i(z.setInt8);ot.setInt8(0,2147483648),ot.setInt8(1,2147483649),!ot.getInt8(0)&&ot.getInt8(1)||u(z,{setInt8:function(t,e){st(this,t,e<<24>>24)},setUint8:function(t,e){st(this,t,e<<24>>24)}},{unsafe:!0})}else N=(R=function(t){p(this,N);var e=g(t);L(this,{type:A,bytes:V(F(e),0),byteLength:e}),o||(this.byteLength=e,this.detached=!1)})[I],z=(j=function(t,e,n){p(this,z),p(t,N);var r=O(t),i=r.byteLength,s=f(e);if(s<0||s>i)throw new U("Wrong offset");if(s+(n=void 0===n?i-s:d(n))>i)throw new U("Wrong length");L(this,{type:M,buffer:t,byteLength:n,byteOffset:s,bytes:r.bytes}),o||(this.buffer=t,this.byteLength=n,this.byteOffset=s)})[I],o&&(J(R,"byteLength",O),J(j,"buffer",P),J(j,"byteLength",P),J(j,"byteOffset",P)),u(z,{getInt8:function(t){return Q(this,1,t)[0]<<24>>24},getUint8:function(t){return Q(this,1,t)[0]},getInt16:function(t){var e=Q(this,2,t,arguments.length>1&&arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=Q(this,2,t,arguments.length>1&&arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return Y(Q(this,4,t,arguments.length>1&&arguments[1]))},getUint32:function(t){return Y(Q(this,4,t,arguments.length>1&&arguments[1]))>>>0},getFloat32:function(t){return G(Q(this,4,t,arguments.length>1&&arguments[1]),23)},getFloat64:function(t){return G(Q(this,8,t,arguments.length>1&&arguments[1]),52)},setInt8:function(t,e){tt(this,1,t,$,e)},setUint8:function(t,e){tt(this,1,t,$,e)},setInt16:function(t,e){tt(this,2,t,H,e,arguments.length>2&&arguments[2])},setUint16:function(t,e){tt(this,2,t,H,e,arguments.length>2&&arguments[2])},setInt32:function(t,e){tt(this,4,t,Z,e,arguments.length>2&&arguments[2])},setUint32:function(t,e){tt(this,4,t,Z,e,arguments.length>2&&arguments[2])},setFloat32:function(t,e){tt(this,4,t,X,e,arguments.length>2&&arguments[2])},setFloat64:function(t,e){tt(this,8,t,K,e,arguments.length>2&&arguments[2])}});E(R,A),E(j,M),t.exports={ArrayBuffer:R,DataView:j}},1048:function(t,e,n){"use strict";var r=n(47908),i=n(51400),o=n(26244),s=n(85117),a=Math.min;t.exports=[].copyWithin||function(t,e){var n=r(this),c=o(n),l=i(t,c),u=i(e,c),h=arguments.length>2?arguments[2]:void 0,p=a((void 0===h?c:i(h,c))-u,c-l),f=1;for(u<l&&l<u+p&&(f=-1,u+=p-1,l+=p-1);p-- >0;)u in n?n[l]=n[u]:s(n,l),l+=f,u+=f;return n}},21285:function(t,e,n){"use strict";var r=n(47908),i=n(51400),o=n(26244);t.exports=function(t){for(var e=r(this),n=o(e),s=arguments.length,a=i(s>1?arguments[1]:void 0,n),c=s>2?arguments[2]:void 0,l=void 0===c?n:i(c,n);l>a;)e[a++]=t;return e}},18533:function(t,e,n){"use strict";var r=n(42092).forEach,i=n(9341)("forEach");t.exports=i?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},97745:function(t,e,n){"use strict";var r=n(26244);t.exports=function(t,e){for(var n=0,i=r(e),o=new t(i);i>n;)o[n]=e[n++];return o}},48457:function(t,e,n){"use strict";var r=n(49974),i=n(46916),o=n(47908),s=n(53411),a=n(97659),c=n(4411),l=n(26244),u=n(86135),h=n(18554),p=n(71246),f=Array;t.exports=function(t){var e=o(t),n=c(this),d=arguments.length,g=d>1?arguments[1]:void 0,m=void 0!==g;m&&(g=r(g,d>2?arguments[2]:void 0));var y,_,v,x,b,w,E=p(e),T=0;if(!E||this===f&&a(E))for(y=l(e),_=n?new this(y):f(y);y>T;T++)w=m?g(e[T],T):e[T],u(_,T,w);else for(b=(x=h(e,E)).next,_=n?new this:[];!(v=i(b,x)).done;T++)w=m?s(x,g,[v.value,T],!0):v.value,u(_,T,w);return _.length=T,_}},41318:function(t,e,n){"use strict";var r=n(45656),i=n(51400),o=n(26244),s=function(t){return function(e,n,s){var a,c=r(e),l=o(c),u=i(s,l);if(t&&n!=n){for(;l>u;)if((a=c[u++])!=a)return!0}else for(;l>u;u++)if((t||u in c)&&c[u]===n)return t||u||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},42092:function(t,e,n){"use strict";var r=n(49974),i=n(1702),o=n(68361),s=n(47908),a=n(26244),c=n(65417),l=i([].push),u=function(t){var e=1===t,n=2===t,i=3===t,u=4===t,h=6===t,p=7===t,f=5===t||h;return function(d,g,m,y){for(var _,v,x=s(d),b=o(x),w=r(g,m),E=a(b),T=0,S=y||c,k=e?S(d,E):n||p?S(d,0):void 0;E>T;T++)if((f||T in b)&&(v=w(_=b[T],T,x),t))if(e)k[T]=v;else if(v)switch(t){case 3:return!0;case 5:return _;case 6:return T;case 2:l(k,_)}else switch(t){case 4:return!1;case 7:l(k,_)}return h?-1:i||u?u:k}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},86583:function(t,e,n){"use strict";var r=n(22104),i=n(45656),o=n(19303),s=n(26244),a=n(9341),c=Math.min,l=[].lastIndexOf,u=!!l&&1/[1].lastIndexOf(1,-0)<0,h=a("lastIndexOf"),p=u||!h;t.exports=p?function(t){if(u)return r(l,this,arguments)||0;var e=i(this),n=s(e),a=n-1;for(arguments.length>1&&(a=c(a,o(arguments[1]))),a<0&&(a=n+a);a>=0;a--)if(a in e&&e[a]===t)return a||0;return-1}:l},81194:function(t,e,n){"use strict";var r=n(47293),i=n(5112),o=n(7392),s=i("species");t.exports=function(t){return o>=51||!r((function(){var e=[];return(e.constructor={})[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},9341:function(t,e,n){"use strict";var r=n(47293);t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){return 1},1)}))}},53671:function(t,e,n){"use strict";var r=n(19662),i=n(47908),o=n(68361),s=n(26244),a=TypeError,c=function(t){return function(e,n,c,l){r(n);var u=i(e),h=o(u),p=s(u),f=t?p-1:0,d=t?-1:1;if(c<2)for(;;){if(f in h){l=h[f],f+=d;break}if(f+=d,t?f<0:p<=f)throw new a("Reduce of empty array with no initial value")}for(;t?f>=0:p>f;f+=d)f in h&&(l=n(l,h[f],f,u));return l}};t.exports={left:c(!1),right:c(!0)}},41589:function(t,e,n){"use strict";var r=n(51400),i=n(26244),o=n(86135),s=Array,a=Math.max;t.exports=function(t,e,n){for(var c=i(t),l=r(e,c),u=r(void 0===n?c:n,c),h=s(a(u-l,0)),p=0;l<u;l++,p++)o(h,p,t[l]);return h.length=p,h}},50206:function(t,e,n){"use strict";var r=n(1702);t.exports=r([].slice)},94362:function(t,e,n){"use strict";var r=n(41589),i=Math.floor,o=function(t,e){var n=t.length,c=i(n/2);return n<8?s(t,e):a(t,o(r(t,0,c),e),o(r(t,c),e),e)},s=function(t,e){for(var n,r,i=t.length,o=1;o<i;){for(r=o,n=t[o];r&&e(t[r-1],n)>0;)t[r]=t[--r];r!==o++&&(t[r]=n)}return t},a=function(t,e,n,r){for(var i=e.length,o=n.length,s=0,a=0;s<i||a<o;)t[s+a]=s<i&&a<o?r(e[s],n[a])<=0?e[s++]:n[a++]:s<i?e[s++]:n[a++];return t};t.exports=o},77475:function(t,e,n){"use strict";var r=n(43157),i=n(4411),o=n(70111),s=n(5112)("species"),a=Array;t.exports=function(t){var e;return r(t)&&(e=t.constructor,(i(e)&&(e===a||r(e.prototype))||o(e)&&null===(e=e[s]))&&(e=void 0)),void 0===e?a:e}},65417:function(t,e,n){"use strict";var r=n(77475);t.exports=function(t,e){return new(r(t))(0===e?0:e)}},21753:function(t,e,n){"use strict";var r=n(46916),i=n(35005),o=n(58173);t.exports=function(t,e,n,s){try{var a=o(t,"return");if(a)return i("Promise").resolve(r(a,t)).then((function(){e(n)}),(function(t){s(t)}))}catch(t){return s(t)}e(n)}},45348:function(t,e,n){"use strict";var r=n(46916),i=n(12534),o=n(19670),s=n(70030),a=n(68880),c=n(89190),l=n(5112),u=n(29909),h=n(35005),p=n(58173),f=n(66462),d=n(76178),g=n(99212),m=h("Promise"),y=l("toStringTag"),_="AsyncIteratorHelper",v="WrapForValidAsyncIterator",x=u.set,b=function(t){var e=!t,n=u.getterFor(t?v:_),a=function(t){var r=i((function(){return n(t)})),o=r.error,s=r.value;return o||e&&s.done?{exit:!0,value:o?m.reject(s):m.resolve(d(void 0,!0))}:{exit:!1,value:s}};return c(s(f),{next:function(){var t=a(this),e=t.value;if(t.exit)return e;var n=i((function(){return o(e.nextHandler(m))})),r=n.error,s=n.value;return r&&(e.done=!0),r?m.reject(s):m.resolve(s)},return:function(){var e=a(this),n=e.value;if(e.exit)return n;n.done=!0;var s,c,l=n.iterator,u=i((function(){if(n.inner)try{g(n.inner.iterator,"normal")}catch(t){return g(l,"throw",t)}return p(l,"return")}));return s=c=u.value,u.error?m.reject(c):void 0===s?m.resolve(d(void 0,!0)):(c=(u=i((function(){return r(s,l)}))).value,u.error?m.reject(c):t?m.resolve(c):m.resolve(c).then((function(t){return o(t),d(void 0,!0)})))}})},w=b(!0),E=b(!1);a(E,y,"Async Iterator Helper"),t.exports=function(t,e){var n=function(n,r){r?(r.iterator=n.iterator,r.next=n.next):r=n,r.type=e?v:_,r.nextHandler=t,r.counter=0,r.done=!1,x(this,r)};return n.prototype=e?w:E,n}},12269:function(t,e,n){"use strict";var r=n(46916),i=n(19662),o=n(19670),s=n(70111),a=n(7207),c=n(35005),l=n(24942),u=n(21753),h=function(t){var e=0===t,n=1===t,h=2===t,p=3===t;return function(t,f,d){o(t);var g=void 0!==f;!g&&e||i(f);var m=l(t),y=c("Promise"),_=m.iterator,v=m.next,x=0;return new y((function(t,i){var c=function(t){u(_,i,t,i)},l=function(){try{if(g)try{a(x)}catch(t){c(t)}y.resolve(o(r(v,_))).then((function(r){try{if(o(r).done)e?(d.length=x,t(d)):t(!p&&(h||void 0));else{var a=r.value;try{if(g){var m=f(a,x),v=function(r){if(n)l();else if(h)r?l():u(_,t,!1,i);else if(e)try{d[x++]=r,l()}catch(t){c(t)}else r?u(_,t,p||a,i):l()};s(m)?y.resolve(m).then(v,c):v(m)}else d[x++]=a,l()}catch(t){c(t)}}}catch(t){i(t)}}),i)}catch(t){i(t)}};l()}))}};t.exports={toArray:h(0),forEach:h(1),every:h(2),some:h(3),find:h(4)}},13232:function(t,e,n){"use strict";var r=n(46916),i=n(19662),o=n(19670),s=n(70111),a=n(24942),c=n(45348),l=n(76178),u=n(21753),h=c((function(t){var e=this,n=e.iterator,i=e.mapper;return new t((function(a,c){var h=function(t){e.done=!0,c(t)},p=function(t){u(n,h,t,h)};t.resolve(o(r(e.next,n))).then((function(n){try{if(o(n).done)e.done=!0,a(l(void 0,!0));else{var r=n.value;try{var c=i(r,e.counter++),u=function(t){a(l(t,!1))};s(c)?t.resolve(c).then(u,p):u(c)}catch(t){p(t)}}}catch(t){h(t)}}),h)}))}));t.exports=function(t){return o(this),i(t),new h(a(this),{mapper:t})}},66462:function(t,e,n){"use strict";var r,i,o=n(17854),s=n(5465),a=n(60614),c=n(70030),l=n(79518),u=n(98052),h=n(5112),p=n(31913),f="USE_FUNCTION_CONSTRUCTOR",d=h("asyncIterator"),g=o.AsyncIterator,m=s.AsyncIteratorPrototype;if(m)r=m;else if(a(g))r=g.prototype;else if(s[f]||o[f])try{i=l(l(l(Function("return async function*(){}()")()))),l(i)===Object.prototype&&(r=i)}catch(t){}r?p&&(r=c(r)):r={},a(r[d])||u(r,d,(function(){return this})),t.exports=r},53411:function(t,e,n){"use strict";var r=n(19670),i=n(99212);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(e){i(t,"throw",e)}}},17072:function(t,e,n){"use strict";var r=n(5112)("iterator"),i=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){i=!0}};s[r]=function(){return this},Array.from(s,(function(){throw 2}))}catch(t){}t.exports=function(t,e){try{if(!e&&!i)return!1}catch(t){return!1}var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},t(o)}catch(t){}return n}},84326:function(t,e,n){"use strict";var r=n(1702),i=r({}.toString),o=r("".slice);t.exports=function(t){return o(i(t),8,-1)}},70648:function(t,e,n){"use strict";var r=n(51694),i=n(60614),o=n(84326),s=n(5112)("toStringTag"),a=Object,c="Arguments"===o(function(){return arguments}());t.exports=r?o:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=a(t),s))?n:c?o(e):"Object"===(r=o(e))&&i(e.callee)?"Arguments":r}},95631:function(t,e,n){"use strict";var r=n(70030),i=n(47045),o=n(89190),s=n(49974),a=n(25787),c=n(68554),l=n(20408),u=n(51656),h=n(76178),p=n(96340),f=n(19781),d=n(62423).fastKey,g=n(29909),m=g.set,y=g.getterFor;t.exports={getConstructor:function(t,e,n,u){var h=t((function(t,i){a(t,p),m(t,{type:e,index:r(null),first:void 0,last:void 0,size:0}),f||(t.size=0),c(i)||l(i,t[u],{that:t,AS_ENTRIES:n})})),p=h.prototype,g=y(e),_=function(t,e,n){var r,i,o=g(t),s=v(t,e);return s?s.value=n:(o.last=s={index:i=d(e,!0),key:e,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=s),r&&(r.next=s),f?o.size++:t.size++,"F"!==i&&(o.index[i]=s)),t},v=function(t,e){var n,r=g(t),i=d(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key===e)return n};return o(p,{clear:function(){for(var t=g(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,f?t.size=0:this.size=0},delete:function(t){var e=this,n=g(e),r=v(e,t);if(r){var i=r.next,o=r.previous;delete n.index[r.index],r.removed=!0,o&&(o.next=i),i&&(i.previous=o),n.first===r&&(n.first=i),n.last===r&&(n.last=o),f?n.size--:e.size--}return!!r},forEach:function(t){for(var e,n=g(this),r=s(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!v(this,t)}}),o(p,n?{get:function(t){var e=v(this,t);return e&&e.value},set:function(t,e){return _(this,0===t?0:t,e)}}:{add:function(t){return _(this,t=0===t?0:t,t)}}),f&&i(p,"size",{configurable:!0,get:function(){return g(this).size}}),h},setStrong:function(t,e,n){var r=e+" Iterator",i=y(e),o=y(r);u(t,e,(function(t,e){m(this,{type:r,target:t,state:i(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?h("keys"===e?n.key:"values"===e?n.value:[n.key,n.value],!1):(t.target=void 0,h(void 0,!0))}),n?"entries":"values",!n,!0),p(e)}}},77710:function(t,e,n){"use strict";var r=n(82109),i=n(17854),o=n(1702),s=n(54705),a=n(98052),c=n(62423),l=n(20408),u=n(25787),h=n(60614),p=n(68554),f=n(70111),d=n(47293),g=n(17072),m=n(58003),y=n(79587);t.exports=function(t,e,n){var _=-1!==t.indexOf("Map"),v=-1!==t.indexOf("Weak"),x=_?"set":"add",b=i[t],w=b&&b.prototype,E=b,T={},S=function(t){var e=o(w[t]);a(w,t,"add"===t?function(t){return e(this,0===t?0:t),this}:"delete"===t?function(t){return!(v&&!f(t))&&e(this,0===t?0:t)}:"get"===t?function(t){return v&&!f(t)?void 0:e(this,0===t?0:t)}:"has"===t?function(t){return!(v&&!f(t))&&e(this,0===t?0:t)}:function(t,n){return e(this,0===t?0:t,n),this})};if(s(t,!h(b)||!(v||w.forEach&&!d((function(){(new b).entries().next()})))))E=n.getConstructor(e,t,_,x),c.enable();else if(s(t,!0)){var k=new E,A=k[x](v?{}:-0,1)!==k,M=d((function(){k.has(1)})),I=g((function(t){new b(t)})),C=!v&&d((function(){for(var t=new b,e=5;e--;)t[x](e,e);return!t.has(-0)}));I||((E=e((function(t,e){u(t,w);var n=y(new b,t,E);return p(e)||l(e,n[x],{that:n,AS_ENTRIES:_}),n}))).prototype=w,w.constructor=E),(M||C)&&(S("delete"),S("has"),_&&S("get")),(C||A)&&S(x),v&&w.clear&&delete w.clear}return T[t]=E,r({global:!0,constructor:!0,forced:E!==b},T),m(E,t),v||n.setStrong(E,t,_),E}},99920:function(t,e,n){"use strict";var r=n(92597),i=n(53887),o=n(31236),s=n(3070);t.exports=function(t,e,n){for(var a=i(e),c=s.f,l=o.f,u=0;u<a.length;u++){var h=a[u];r(t,h)||n&&r(n,h)||c(t,h,l(e,h))}}},84964:function(t,e,n){"use strict";var r=n(5112)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,"/./"[t](e)}catch(t){}}return!1}},49920:function(t,e,n){"use strict";var r=n(47293);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},14230:function(t,e,n){"use strict";var r=n(1702),i=n(84488),o=n(41340),s=/"/g,a=r("".replace);t.exports=function(t,e,n,r){var c=o(i(t)),l="<"+e;return""!==n&&(l+=" "+n+'="'+a(o(r),s,"&quot;")+'"'),l+">"+c+"</"+e+">"}},76178:function(t){"use strict";t.exports=function(t,e){return{value:t,done:e}}},68880:function(t,e,n){"use strict";var r=n(19781),i=n(3070),o=n(79114);t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},79114:function(t){"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},86135:function(t,e,n){"use strict";var r=n(34948),i=n(3070),o=n(79114);t.exports=function(t,e,n){var s=r(e);s in t?i.f(t,s,o(0,n)):t[s]=n}},47045:function(t,e,n){"use strict";var r=n(56339),i=n(3070);t.exports=function(t,e,n){return n.get&&r(n.get,e,{getter:!0}),n.set&&r(n.set,e,{setter:!0}),i.f(t,e,n)}},98052:function(t,e,n){"use strict";var r=n(60614),i=n(3070),o=n(56339),s=n(13072);t.exports=function(t,e,n,a){a||(a={});var c=a.enumerable,l=void 0!==a.name?a.name:e;if(r(n)&&o(n,l,a),a.global)c?t[e]=n:s(e,n);else{try{a.unsafe?t[e]&&(c=!0):delete t[e]}catch(t){}c?t[e]=n:i.f(t,e,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},89190:function(t,e,n){"use strict";var r=n(98052);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},13072:function(t,e,n){"use strict";var r=n(17854),i=Object.defineProperty;t.exports=function(t,e){try{i(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},85117:function(t,e,n){"use strict";var r=n(66330),i=TypeError;t.exports=function(t,e){if(!delete t[e])throw new i("Cannot delete property "+r(e)+" of "+r(t))}},19781:function(t,e,n){"use strict";var r=n(47293);t.exports=!r((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:function(t){"use strict";var e="object"==typeof document&&document.all,n=void 0===e&&void 0!==e;t.exports={all:e,IS_HTMLDDA:n}},80317:function(t,e,n){"use strict";var r=n(17854),i=n(70111),o=r.document,s=i(o)&&i(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},7207:function(t){"use strict";var e=TypeError;t.exports=function(t){if(t>9007199254740991)throw e("Maximum allowed index exceeded");return t}},48324:function(t){"use strict";t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},98509:function(t,e,n){"use strict";var r=n(80317)("span").classList,i=r&&r.constructor&&r.constructor.prototype;t.exports=i===Object.prototype?void 0:i},68886:function(t,e,n){"use strict";var r=n(88113).match(/firefox\/(\d+)/i);t.exports=!!r&&+r[1]},7871:function(t,e,n){"use strict";var r=n(83823),i=n(35268);t.exports=!r&&!i&&"object"==typeof window&&"object"==typeof document},89363:function(t){"use strict";t.exports="function"==typeof Bun&&Bun&&"string"==typeof Bun.version},83823:function(t){"use strict";t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},30256:function(t,e,n){"use strict";var r=n(88113);t.exports=/MSIE|Trident/.test(r)},71528:function(t,e,n){"use strict";var r=n(88113);t.exports=/ipad|iphone|ipod/i.test(r)&&"undefined"!=typeof Pebble},6833:function(t,e,n){"use strict";var r=n(88113);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},35268:function(t,e,n){"use strict";var r=n(17854),i=n(84326);t.exports="process"===i(r.process)},71036:function(t,e,n){"use strict";var r=n(88113);t.exports=/web0s(?!.*chrome)/i.test(r)},88113:function(t){"use strict";t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7392:function(t,e,n){"use strict";var r,i,o=n(17854),s=n(88113),a=o.process,c=o.Deno,l=a&&a.versions||c&&c.version,u=l&&l.v8;u&&(i=(r=u.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&s&&(!(r=s.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/))&&(i=+r[1]),t.exports=i},98008:function(t,e,n){"use strict";var r=n(88113).match(/AppleWebKit\/(\d+)\./);t.exports=!!r&&+r[1]},80748:function(t){"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},82109:function(t,e,n){"use strict";var r=n(17854),i=n(31236).f,o=n(68880),s=n(98052),a=n(13072),c=n(99920),l=n(54705);t.exports=function(t,e){var n,u,h,p,f,d=t.target,g=t.global,m=t.stat;if(n=g?r:m?r[d]||a(d,{}):(r[d]||{}).prototype)for(u in e){if(p=e[u],h=t.dontCallGetSet?(f=i(n,u))&&f.value:n[u],!l(g?u:d+(m?".":"#")+u,t.forced)&&void 0!==h){if(typeof p==typeof h)continue;c(p,h)}(t.sham||h&&h.sham)&&o(p,"sham",!0),s(n,u,p,t)}}},47293:function(t){"use strict";t.exports=function(t){try{return!!t()}catch(t){return!0}}},27007:function(t,e,n){"use strict";n(74916);var r=n(21470),i=n(98052),o=n(22261),s=n(47293),a=n(5112),c=n(68880),l=a("species"),u=RegExp.prototype;t.exports=function(t,e,n,h){var p=a(t),f=!s((function(){var e={};return e[p]=function(){return 7},7!==""[t](e)})),d=f&&!s((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[l]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return e=!0,null},n[p](""),!e}));if(!f||!d||n){var g=r(/./[p]),m=e(p,""[t],(function(t,e,n,i,s){var a=r(t),c=e.exec;return c===o||c===u.exec?f&&!s?{done:!0,value:g(e,n,i)}:{done:!0,value:a(n,e,i)}:{done:!1}}));i(String.prototype,t,m[0]),i(u,p,m[1])}h&&c(u[p],"sham",!0)}},76677:function(t,e,n){"use strict";var r=n(47293);t.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},22104:function(t,e,n){"use strict";var r=n(34374),i=Function.prototype,o=i.apply,s=i.call;t.exports="object"==typeof Reflect&&Reflect.apply||(r?s.bind(o):function(){return s.apply(o,arguments)})},49974:function(t,e,n){"use strict";var r=n(21470),i=n(19662),o=n(34374),s=r(r.bind);t.exports=function(t,e){return i(t),void 0===e?t:o?s(t,e):function(){return t.apply(e,arguments)}}},34374:function(t,e,n){"use strict";var r=n(47293);t.exports=!r((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},46916:function(t,e,n){"use strict";var r=n(34374),i=Function.prototype.call;t.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},76530:function(t,e,n){"use strict";var r=n(19781),i=n(92597),o=Function.prototype,s=r&&Object.getOwnPropertyDescriptor,a=i(o,"name"),c=a&&"something"===function(){}.name,l=a&&(!r||r&&s(o,"name").configurable);t.exports={EXISTS:a,PROPER:c,CONFIGURABLE:l}},75668:function(t,e,n){"use strict";var r=n(1702),i=n(19662);t.exports=function(t,e,n){try{return r(i(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(t){}}},21470:function(t,e,n){"use strict";var r=n(84326),i=n(1702);t.exports=function(t){if("Function"===r(t))return i(t)}},1702:function(t,e,n){"use strict";var r=n(34374),i=Function.prototype,o=i.call,s=r&&i.bind.bind(o,o);t.exports=r?s:function(t){return function(){return o.apply(t,arguments)}}},35005:function(t,e,n){"use strict";var r=n(17854),i=n(60614);t.exports=function(t,e){return arguments.length<2?(n=r[t],i(n)?n:void 0):r[t]&&r[t][e];var n}},24942:function(t){"use strict";t.exports=function(t){return{iterator:t,next:t.next,done:!1}}},71246:function(t,e,n){"use strict";var r=n(70648),i=n(58173),o=n(68554),s=n(97497),a=n(5112)("iterator");t.exports=function(t){if(!o(t))return i(t,a)||i(t,"@@iterator")||s[r(t)]}},18554:function(t,e,n){"use strict";var r=n(46916),i=n(19662),o=n(19670),s=n(66330),a=n(71246),c=TypeError;t.exports=function(t,e){var n=arguments.length<2?a(t):e;if(i(n))return o(r(n,t));throw new c(s(t)+" is not iterable")}},58173:function(t,e,n){"use strict";var r=n(19662),i=n(68554);t.exports=function(t,e){var n=t[e];return i(n)?void 0:r(n)}},738:function(t,e,n){"use strict";var r=n(19662),i=n(19670),o=n(46916),s=n(19303),a=n(24942),c="Invalid size",l=RangeError,u=TypeError,h=Math.max,p=function(t,e,n,r){this.set=t,this.size=e,this.has=n,this.keys=r};p.prototype={getIterator:function(){return a(i(o(this.keys,this.set)))},includes:function(t){return o(this.has,this.set,t)}},t.exports=function(t){i(t);var e=+t.size;if(e!=e)throw new u(c);var n=s(e);if(n<0)throw new l(c);return new p(t,h(n,0),r(t.has),r(t.keys))}},10647:function(t,e,n){"use strict";var r=n(1702),i=n(47908),o=Math.floor,s=r("".charAt),a=r("".replace),c=r("".slice),l=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,u=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,n,r,h,p){var f=n+t.length,d=r.length,g=u;return void 0!==h&&(h=i(h),g=l),a(p,g,(function(i,a){var l;switch(s(a,0)){case"$":return"$";case"&":return t;case"`":return c(e,0,n);case"'":return c(e,f);case"<":l=h[c(a,1,-1)];break;default:var u=+a;if(0===u)return i;if(u>d){var p=o(u/10);return 0===p?i:p<=d?void 0===r[p-1]?s(a,1):r[p-1]+s(a,1):i}l=r[u-1]}return void 0===l?"":l}))}},17854:function(t,e,n){"use strict";var r=function(t){return t&&t.Math===Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||this||Function("return this")()},92597:function(t,e,n){"use strict";var r=n(1702),i=n(47908),o=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return o(i(t),e)}},3501:function(t){"use strict";t.exports={}},842:function(t,e,n){"use strict";var r=n(25108);t.exports=function(t,e){try{1===arguments.length?r.error(t):r.error(t,e)}catch(t){}}},60490:function(t,e,n){"use strict";var r=n(35005);t.exports=r("document","documentElement")},64664:function(t,e,n){"use strict";var r=n(19781),i=n(47293),o=n(80317);t.exports=!r&&!i((function(){return 7!==Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},11179:function(t){"use strict";var e=Array,n=Math.abs,r=Math.pow,i=Math.floor,o=Math.log,s=Math.LN2;t.exports={pack:function(t,a,c){var l,u,h,p=e(c),f=8*c-a-1,d=(1<<f)-1,g=d>>1,m=23===a?r(2,-24)-r(2,-77):0,y=t<0||0===t&&1/t<0?1:0,_=0;for((t=n(t))!=t||t===1/0?(u=t!=t?1:0,l=d):(l=i(o(t)/s),t*(h=r(2,-l))<1&&(l--,h*=2),(t+=l+g>=1?m/h:m*r(2,1-g))*h>=2&&(l++,h/=2),l+g>=d?(u=0,l=d):l+g>=1?(u=(t*h-1)*r(2,a),l+=g):(u=t*r(2,g-1)*r(2,a),l=0));a>=8;)p[_++]=255&u,u/=256,a-=8;for(l=l<<a|u,f+=a;f>0;)p[_++]=255&l,l/=256,f-=8;return p[--_]|=128*y,p},unpack:function(t,e){var n,i=t.length,o=8*i-e-1,s=(1<<o)-1,a=s>>1,c=o-7,l=i-1,u=t[l--],h=127&u;for(u>>=7;c>0;)h=256*h+t[l--],c-=8;for(n=h&(1<<-c)-1,h>>=-c,c+=e;c>0;)n=256*n+t[l--],c-=8;if(0===h)h=1-a;else{if(h===s)return n?NaN:u?-1/0:1/0;n+=r(2,e),h-=a}return(u?-1:1)*n*r(2,h-e)}}},68361:function(t,e,n){"use strict";var r=n(1702),i=n(47293),o=n(84326),s=Object,a=r("".split);t.exports=i((function(){return!s("z").propertyIsEnumerable(0)}))?function(t){return"String"===o(t)?a(t,""):s(t)}:s},79587:function(t,e,n){"use strict";var r=n(60614),i=n(70111),o=n(27674);t.exports=function(t,e,n){var s,a;return o&&r(s=e.constructor)&&s!==n&&i(a=s.prototype)&&a!==n.prototype&&o(t,a),t}},42788:function(t,e,n){"use strict";var r=n(1702),i=n(60614),o=n(5465),s=r(Function.toString);i(o.inspectSource)||(o.inspectSource=function(t){return s(t)}),t.exports=o.inspectSource},62423:function(t,e,n){"use strict";var r=n(82109),i=n(1702),o=n(3501),s=n(70111),a=n(92597),c=n(3070).f,l=n(8006),u=n(1156),h=n(52050),p=n(69711),f=n(76677),d=!1,g=p("meta"),m=0,y=function(t){c(t,g,{value:{objectID:"O"+m++,weakData:{}}})},_=t.exports={enable:function(){_.enable=function(){},d=!0;var t=l.f,e=i([].splice),n={};n[g]=1,t(n).length&&(l.f=function(n){for(var r=t(n),i=0,o=r.length;i<o;i++)if(r[i]===g){e(r,i,1);break}return r},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:u.f}))},fastKey:function(t,e){if(!s(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,g)){if(!h(t))return"F";if(!e)return"E";y(t)}return t[g].objectID},getWeakData:function(t,e){if(!a(t,g)){if(!h(t))return!0;if(!e)return!1;y(t)}return t[g].weakData},onFreeze:function(t){return f&&d&&h(t)&&!a(t,g)&&y(t),t}};o[g]=!0},29909:function(t,e,n){"use strict";var r,i,o,s=n(94811),a=n(17854),c=n(70111),l=n(68880),u=n(92597),h=n(5465),p=n(6200),f=n(3501),d="Object already initialized",g=a.TypeError,m=a.WeakMap;if(s||h.state){var y=h.state||(h.state=new m);y.get=y.get,y.has=y.has,y.set=y.set,r=function(t,e){if(y.has(t))throw new g(d);return e.facade=t,y.set(t,e),e},i=function(t){return y.get(t)||{}},o=function(t){return y.has(t)}}else{var _=p("state");f[_]=!0,r=function(t,e){if(u(t,_))throw new g(d);return e.facade=t,l(t,_,e),e},i=function(t){return u(t,_)?t[_]:{}},o=function(t){return u(t,_)}}t.exports={set:r,get:i,has:o,enforce:function(t){return o(t)?i(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!c(e)||(n=i(e)).type!==t)throw new g("Incompatible receiver, "+t+" required");return n}}}},97659:function(t,e,n){"use strict";var r=n(5112),i=n(97497),o=r("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||s[o]===t)}},43157:function(t,e,n){"use strict";var r=n(84326);t.exports=Array.isArray||function(t){return"Array"===r(t)}},44067:function(t,e,n){"use strict";var r=n(70648);t.exports=function(t){var e=r(t);return"BigInt64Array"===e||"BigUint64Array"===e}},60614:function(t,e,n){"use strict";var r=n(4154),i=r.all;t.exports=r.IS_HTMLDDA?function(t){return"function"==typeof t||t===i}:function(t){return"function"==typeof t}},4411:function(t,e,n){"use strict";var r=n(1702),i=n(47293),o=n(60614),s=n(70648),a=n(35005),c=n(42788),l=function(){},u=[],h=a("Reflect","construct"),p=/^\s*(?:class|function)\b/,f=r(p.exec),d=!p.test(l),g=function(t){if(!o(t))return!1;try{return h(l,u,t),!0}catch(t){return!1}},m=function(t){if(!o(t))return!1;switch(s(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!f(p,c(t))}catch(t){return!0}};m.sham=!0,t.exports=!h||i((function(){var t;return g(g.call)||!g(Object)||!g((function(){t=!0}))||t}))?m:g},54705:function(t,e,n){"use strict";var r=n(47293),i=n(60614),o=/#|\.prototype\./,s=function(t,e){var n=c[a(t)];return n===u||n!==l&&(i(e)?r(e):!!e)},a=s.normalize=function(t){return String(t).replace(o,".").toLowerCase()},c=s.data={},l=s.NATIVE="N",u=s.POLYFILL="P";t.exports=s},55988:function(t,e,n){"use strict";var r=n(70111),i=Math.floor;t.exports=Number.isInteger||function(t){return!r(t)&&isFinite(t)&&i(t)===t}},25615:function(t,e,n){"use strict";var r=n(70648),i=n(92597),o=n(68554),s=n(5112),a=n(97497),c=s("iterator"),l=Object;t.exports=function(t){if(o(t))return!1;var e=l(t);return void 0!==e[c]||"@@iterator"in e||i(a,r(e))}},68554:function(t){"use strict";t.exports=function(t){return null==t}},70111:function(t,e,n){"use strict";var r=n(60614),i=n(4154),o=i.all;t.exports=i.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:r(t)||t===o}:function(t){return"object"==typeof t?null!==t:r(t)}},31913:function(t){"use strict";t.exports=!1},47850:function(t,e,n){"use strict";var r=n(70111),i=n(84326),o=n(5112)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"===i(t))}},52190:function(t,e,n){"use strict";var r=n(35005),i=n(60614),o=n(47976),s=n(43307),a=Object;t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return i(e)&&o(e.prototype,a(t))}},6333:function(t,e,n){"use strict";var r=n(46916);t.exports=function(t,e,n){for(var i,o,s=n?t:t.iterator,a=t.next;!(i=r(a,s)).done;)if(void 0!==(o=e(i.value)))return o}},20408:function(t,e,n){"use strict";var r=n(49974),i=n(46916),o=n(19670),s=n(66330),a=n(97659),c=n(26244),l=n(47976),u=n(18554),h=n(71246),p=n(99212),f=TypeError,d=function(t,e){this.stopped=t,this.result=e},g=d.prototype;t.exports=function(t,e,n){var m,y,_,v,x,b,w,E=n&&n.that,T=!(!n||!n.AS_ENTRIES),S=!(!n||!n.IS_RECORD),k=!(!n||!n.IS_ITERATOR),A=!(!n||!n.INTERRUPTED),M=r(e,E),I=function(t){return m&&p(m,"normal",t),new d(!0,t)},C=function(t){return T?(o(t),A?M(t[0],t[1],I):M(t[0],t[1])):A?M(t,I):M(t)};if(S)m=t.iterator;else if(k)m=t;else{if(!(y=h(t)))throw new f(s(t)+" is not iterable");if(a(y)){for(_=0,v=c(t);v>_;_++)if((x=C(t[_]))&&l(g,x))return x;return new d(!1)}m=u(t,y)}for(b=S?t.next:m.next;!(w=i(b,m)).done;){try{x=C(w.value)}catch(t){p(m,"throw",t)}if("object"==typeof x&&x&&l(g,x))return x}return new d(!1)}},99212:function(t,e,n){"use strict";var r=n(46916),i=n(19670),o=n(58173);t.exports=function(t,e,n){var s,a;i(t);try{if(!(s=o(t,"return"))){if("throw"===e)throw n;return n}s=r(s,t)}catch(t){a=!0,s=t}if("throw"===e)throw n;if(a)throw s;return i(s),n}},63061:function(t,e,n){"use strict";var r=n(13383).IteratorPrototype,i=n(70030),o=n(79114),s=n(58003),a=n(97497),c=function(){return this};t.exports=function(t,e,n,l){var u=e+" Iterator";return t.prototype=i(r,{next:o(+!l,n)}),s(t,u,!1,!0),a[u]=c,t}},54956:function(t,e,n){"use strict";var r=n(46916),i=n(70030),o=n(68880),s=n(89190),a=n(5112),c=n(29909),l=n(58173),u=n(13383).IteratorPrototype,h=n(76178),p=n(99212),f=a("toStringTag"),d="IteratorHelper",g="WrapForValidIterator",m=c.set,y=function(t){var e=c.getterFor(t?g:d);return s(i(u),{next:function(){var n=e(this);if(t)return n.nextHandler();try{var r=n.done?void 0:n.nextHandler();return h(r,n.done)}catch(t){throw n.done=!0,t}},return:function(){var n=e(this),i=n.iterator;if(n.done=!0,t){var o=l(i,"return");return o?r(o,i):h(void 0,!0)}if(n.inner)try{p(n.inner.iterator,"normal")}catch(t){return p(i,"throw",t)}return p(i,"normal"),h(void 0,!0)}})},_=y(!0),v=y(!1);o(v,f,"Iterator Helper"),t.exports=function(t,e){var n=function(n,r){r?(r.iterator=n.iterator,r.next=n.next):r=n,r.type=e?g:d,r.nextHandler=t,r.counter=0,r.done=!1,m(this,r)};return n.prototype=e?_:v,n}},51656:function(t,e,n){"use strict";var r=n(82109),i=n(46916),o=n(31913),s=n(76530),a=n(60614),c=n(63061),l=n(79518),u=n(27674),h=n(58003),p=n(68880),f=n(98052),d=n(5112),g=n(97497),m=n(13383),y=s.PROPER,_=s.CONFIGURABLE,v=m.IteratorPrototype,x=m.BUGGY_SAFARI_ITERATORS,b=d("iterator"),w="keys",E="values",T="entries",S=function(){return this};t.exports=function(t,e,n,s,d,m,k){c(n,e,s);var A,M,I,C=function(t){if(t===d&&R)return R;if(!x&&t&&t in L)return L[t];switch(t){case w:case E:case T:return function(){return new n(this,t)}}return function(){return new n(this)}},O=e+" Iterator",P=!1,L=t.prototype,D=L[b]||L["@@iterator"]||d&&L[d],R=!x&&D||C(d),N="Array"===e&&L.entries||D;if(N&&(A=l(N.call(new t)))!==Object.prototype&&A.next&&(o||l(A)===v||(u?u(A,v):a(A[b])||f(A,b,S)),h(A,O,!0,!0),o&&(g[O]=S)),y&&d===E&&D&&D.name!==E&&(!o&&_?p(L,"name",E):(P=!0,R=function(){return i(D,this)})),d)if(M={values:C(E),keys:m?R:C(w),entries:C(T)},k)for(I in M)(x||P||!(I in L))&&f(L,I,M[I]);else r({target:e,proto:!0,forced:x||P},M);return o&&!k||L[b]===R||f(L,b,R,{name:d}),g[e]=R,M}},20487:function(t,e,n){"use strict";var r=n(46916),i=n(19662),o=n(19670),s=n(24942),a=n(54956),c=n(53411),l=a((function(){var t=this.iterator,e=o(r(this.next,t));if(!(this.done=!!e.done))return c(t,this.mapper,[e.value,this.counter++],!0)}));t.exports=function(t){return o(this),i(t),new l(s(this),{mapper:t})}},13383:function(t,e,n){"use strict";var r,i,o,s=n(47293),a=n(60614),c=n(70111),l=n(70030),u=n(79518),h=n(98052),p=n(5112),f=n(31913),d=p("iterator"),g=!1;[].keys&&("next"in(o=[].keys())?(i=u(u(o)))!==Object.prototype&&(r=i):g=!0),!c(r)||s((function(){var t={};return r[d].call(t)!==t}))?r={}:f&&(r=l(r)),a(r[d])||h(r,d,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:g}},97497:function(t){"use strict";t.exports={}},26244:function(t,e,n){"use strict";var r=n(17466);t.exports=function(t){return r(t.length)}},56339:function(t,e,n){"use strict";var r=n(1702),i=n(47293),o=n(60614),s=n(92597),a=n(19781),c=n(76530).CONFIGURABLE,l=n(42788),u=n(29909),h=u.enforce,p=u.get,f=String,d=Object.defineProperty,g=r("".slice),m=r("".replace),y=r([].join),_=a&&!i((function(){return 8!==d((function(){}),"length",{value:8}).length})),v=String(String).split("String"),x=t.exports=function(t,e,n){"Symbol("===g(f(e),0,7)&&(e="["+m(f(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!s(t,"name")||c&&t.name!==e)&&(a?d(t,"name",{value:e,configurable:!0}):t.name=e),_&&n&&s(n,"arity")&&t.length!==n.arity&&d(t,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?a&&d(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var r=h(t);return s(r,"source")||(r.source=y(v,"string"==typeof e?e:"")),t};Function.prototype.toString=x((function(){return o(this)&&p(this).source||l(this)}),"toString")},75706:function(t,e,n){"use strict";var r=n(1702),i=Map.prototype;t.exports={Map,set:r(i.set),get:r(i.get),has:r(i.has),remove:r(i.delete),proto:i}},14995:function(t,e,n){"use strict";var r=n(1702),i=n(6333),o=n(75706),s=o.Map,a=o.proto,c=r(a.forEach),l=r(a.entries),u=l(new s).next;t.exports=function(t,e,n){return n?i({iterator:l(t),next:u},(function(t){return e(t[1],t[0])})):c(t,e)}},66736:function(t){"use strict";var e=Math.expm1,n=Math.exp;t.exports=!e||e(10)>22025.465794806718||e(10)<22025.465794806718||-2e-17!==e(-2e-17)?function(t){var e=+t;return 0===e?e:e>-1e-6&&e<1e-6?e+e*e/2:n(e)-1}:e},53731:function(t,e,n){"use strict";var r=n(64310),i=Math.abs,o=2220446049250313e-31,s=1/o;t.exports=function(t,e,n,a){var c=+t,l=i(c),u=r(c);if(l<a)return u*function(t){return t+s-s}(l/a/e)*a*e;var h=(1+e/o)*l,p=h-(h-l);return p>n||p!=p?u*(1/0):u*p}},26130:function(t,e,n){"use strict";var r=n(53731);t.exports=Math.fround||function(t){return r(t,1.1920928955078125e-7,34028234663852886e22,11754943508222875e-54)}},20403:function(t){"use strict";var e=Math.log,n=Math.LOG10E;t.exports=Math.log10||function(t){return e(t)*n}},26513:function(t){"use strict";var e=Math.log;t.exports=Math.log1p||function(t){var n=+t;return n>-1e-8&&n<1e-8?n-n*n/2:e(1+n)}},64310:function(t){"use strict";t.exports=Math.sign||function(t){var e=+t;return 0===e||e!=e?e:e<0?-1:1}},74758:function(t){"use strict";var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var r=+t;return(r>0?n:e)(r)}},95948:function(t,e,n){"use strict";var r,i,o,s,a,c=n(17854),l=n(49974),u=n(31236).f,h=n(20261).set,p=n(18572),f=n(6833),d=n(71528),g=n(71036),m=n(35268),y=c.MutationObserver||c.WebKitMutationObserver,_=c.document,v=c.process,x=c.Promise,b=u(c,"queueMicrotask"),w=b&&b.value;if(!w){var E=new p,T=function(){var t,e;for(m&&(t=v.domain)&&t.exit();e=E.get();)try{e()}catch(t){throw E.head&&r(),t}t&&t.enter()};f||m||g||!y||!_?!d&&x&&x.resolve?((s=x.resolve(void 0)).constructor=x,a=l(s.then,s),r=function(){a(T)}):m?r=function(){v.nextTick(T)}:(h=l(h,c),r=function(){h(T)}):(i=!0,o=_.createTextNode(""),new y(T).observe(o,{characterData:!0}),r=function(){o.data=i=!i}),w=function(t){E.head||r(),E.add(t)}}t.exports=w},78523:function(t,e,n){"use strict";var r=n(19662),i=TypeError,o=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw new i("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new o(t)}},3929:function(t,e,n){"use strict";var r=n(47850),i=TypeError;t.exports=function(t){if(r(t))throw new i("The method doesn't accept regular expressions");return t}},77023:function(t,e,n){"use strict";var r=n(17854).isFinite;t.exports=Number.isFinite||function(t){return"number"==typeof t&&r(t)}},2814:function(t,e,n){"use strict";var r=n(17854),i=n(47293),o=n(1702),s=n(41340),a=n(53111).trim,c=n(81361),l=o("".charAt),u=r.parseFloat,h=r.Symbol,p=h&&h.iterator,f=1/u(c+"-0")!=-1/0||p&&!i((function(){u(Object(p))}));t.exports=f?function(t){var e=a(s(t)),n=u(e);return 0===n&&"-"===l(e,0)?-0:n}:u},83009:function(t,e,n){"use strict";var r=n(17854),i=n(47293),o=n(1702),s=n(41340),a=n(53111).trim,c=n(81361),l=r.parseInt,u=r.Symbol,h=u&&u.iterator,p=/^[+-]?0x/i,f=o(p.exec),d=8!==l(c+"08")||22!==l(c+"0x16")||h&&!i((function(){l(Object(h))}));t.exports=d?function(t,e){var n=a(s(t));return l(n,e>>>0||(f(p,n)?16:10))}:l},21574:function(t,e,n){"use strict";var r=n(19781),i=n(1702),o=n(46916),s=n(47293),a=n(81956),c=n(25181),l=n(55296),u=n(47908),h=n(68361),p=Object.assign,f=Object.defineProperty,d=i([].concat);t.exports=!p||s((function(){if(r&&1!==p({b:1},p(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol("assign detection"),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach((function(t){e[t]=t})),7!==p({},t)[n]||a(p({},e)).join("")!==i}))?function(t,e){for(var n=u(t),i=arguments.length,s=1,p=c.f,f=l.f;i>s;)for(var g,m=h(arguments[s++]),y=p?d(a(m),p(m)):a(m),_=y.length,v=0;_>v;)g=y[v++],r&&!o(f,m,g)||(n[g]=m[g]);return n}:p},70030:function(t,e,n){"use strict";var r,i=n(19670),o=n(36048),s=n(80748),a=n(3501),c=n(60490),l=n(80317),u=n(6200),h="prototype",p="script",f=u("IE_PROTO"),d=function(){},g=function(t){return"<"+p+">"+t+"</"+p+">"},m=function(t){t.write(g("")),t.close();var e=t.parentWindow.Object;return t=null,e},y=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}var t,e,n;y="undefined"!=typeof document?document.domain&&r?m(r):(e=l("iframe"),n="java"+p+":",e.style.display="none",c.appendChild(e),e.src=String(n),(t=e.contentWindow.document).open(),t.write(g("document.F=Object")),t.close(),t.F):m(r);for(var i=s.length;i--;)delete y[h][s[i]];return y()};a[f]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(d[h]=i(t),n=new d,d[h]=null,n[f]=t):n=y(),void 0===e?n:o.f(n,e)}},36048:function(t,e,n){"use strict";var r=n(19781),i=n(3353),o=n(3070),s=n(19670),a=n(45656),c=n(81956);e.f=r&&!i?Object.defineProperties:function(t,e){s(t);for(var n,r=a(e),i=c(e),l=i.length,u=0;l>u;)o.f(t,n=i[u++],r[n]);return t}},3070:function(t,e,n){"use strict";var r=n(19781),i=n(64664),o=n(3353),s=n(19670),a=n(34948),c=TypeError,l=Object.defineProperty,u=Object.getOwnPropertyDescriptor,h="enumerable",p="configurable",f="writable";e.f=r?o?function(t,e,n){if(s(t),e=a(e),s(n),"function"==typeof t&&"prototype"===e&&"value"in n&&f in n&&!n[f]){var r=u(t,e);r&&r[f]&&(t[e]=n.value,n={configurable:p in n?n[p]:r[p],enumerable:h in n?n[h]:r[h],writable:!1})}return l(t,e,n)}:l:function(t,e,n){if(s(t),e=a(e),s(n),i)try{return l(t,e,n)}catch(t){}if("get"in n||"set"in n)throw new c("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},31236:function(t,e,n){"use strict";var r=n(19781),i=n(46916),o=n(55296),s=n(79114),a=n(45656),c=n(34948),l=n(92597),u=n(64664),h=Object.getOwnPropertyDescriptor;e.f=r?h:function(t,e){if(t=a(t),e=c(e),u)try{return h(t,e)}catch(t){}if(l(t,e))return s(!i(o.f,t,e),t[e])}},1156:function(t,e,n){"use strict";var r=n(84326),i=n(45656),o=n(8006).f,s=n(41589),a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"Window"===r(t)?function(t){try{return o(t)}catch(t){return s(a)}}(t):o(i(t))}},8006:function(t,e,n){"use strict";var r=n(16324),i=n(80748).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},25181:function(t,e){"use strict";e.f=Object.getOwnPropertySymbols},79518:function(t,e,n){"use strict";var r=n(92597),i=n(60614),o=n(47908),s=n(6200),a=n(49920),c=s("IE_PROTO"),l=Object,u=l.prototype;t.exports=a?l.getPrototypeOf:function(t){var e=o(t);if(r(e,c))return e[c];var n=e.constructor;return i(n)&&e instanceof n?n.prototype:e instanceof l?u:null}},52050:function(t,e,n){"use strict";var r=n(47293),i=n(70111),o=n(84326),s=n(7556),a=Object.isExtensible,c=r((function(){a(1)}));t.exports=c||s?function(t){return!!i(t)&&((!s||"ArrayBuffer"!==o(t))&&(!a||a(t)))}:a},47976:function(t,e,n){"use strict";var r=n(1702);t.exports=r({}.isPrototypeOf)},16324:function(t,e,n){"use strict";var r=n(1702),i=n(92597),o=n(45656),s=n(41318).indexOf,a=n(3501),c=r([].push);t.exports=function(t,e){var n,r=o(t),l=0,u=[];for(n in r)!i(a,n)&&i(r,n)&&c(u,n);for(;e.length>l;)i(r,n=e[l++])&&(~s(u,n)||c(u,n));return u}},81956:function(t,e,n){"use strict";var r=n(16324),i=n(80748);t.exports=Object.keys||function(t){return r(t,i)}},55296:function(t,e){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);e.f=i?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},27674:function(t,e,n){"use strict";var r=n(75668),i=n(19670),o=n(96077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=r(Object.prototype,"__proto__","set"))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return i(n),o(r),e?t(n,r):n.__proto__=r,n}}():void 0)},44699:function(t,e,n){"use strict";var r=n(19781),i=n(47293),o=n(1702),s=n(79518),a=n(81956),c=n(45656),l=o(n(55296).f),u=o([].push),h=r&&i((function(){var t=Object.create(null);return t[2]=2,!l(t,2)})),p=function(t){return function(e){for(var n,i=c(e),o=a(i),p=h&&null===s(i),f=o.length,d=0,g=[];f>d;)n=o[d++],r&&!(p?n in i:l(i,n))||u(g,t?[n,i[n]]:i[n]);return g}};t.exports={entries:p(!0),values:p(!1)}},90288:function(t,e,n){"use strict";var r=n(51694),i=n(70648);t.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},92140:function(t,e,n){"use strict";var r=n(46916),i=n(60614),o=n(70111),s=TypeError;t.exports=function(t,e){var n,a;if("string"===e&&i(n=t.toString)&&!o(a=r(n,t)))return a;if(i(n=t.valueOf)&&!o(a=r(n,t)))return a;if("string"!==e&&i(n=t.toString)&&!o(a=r(n,t)))return a;throw new s("Can't convert object to primitive value")}},53887:function(t,e,n){"use strict";var r=n(35005),i=n(1702),o=n(8006),s=n(25181),a=n(19670),c=i([].concat);t.exports=r("Reflect","ownKeys")||function(t){var e=o.f(a(t)),n=s.f;return n?c(e,n(t)):e}},40857:function(t,e,n){"use strict";var r=n(17854);t.exports=r},12534:function(t){"use strict";t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},63702:function(t,e,n){"use strict";var r=n(17854),i=n(2492),o=n(60614),s=n(54705),a=n(42788),c=n(5112),l=n(7871),u=n(83823),h=n(31913),p=n(7392),f=i&&i.prototype,d=c("species"),g=!1,m=o(r.PromiseRejectionEvent),y=s("Promise",(function(){var t=a(i),e=t!==String(i);if(!e&&66===p)return!0;if(h&&(!f.catch||!f.finally))return!0;if(!p||p<51||!/native code/.test(t)){var n=new i((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))};if((n.constructor={})[d]=r,!(g=n.then((function(){}))instanceof r))return!0}return!e&&(l||u)&&!m}));t.exports={CONSTRUCTOR:y,REJECTION_EVENT:m,SUBCLASSING:g}},2492:function(t,e,n){"use strict";var r=n(17854);t.exports=r.Promise},69478:function(t,e,n){"use strict";var r=n(19670),i=n(70111),o=n(78523);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},80612:function(t,e,n){"use strict";var r=n(2492),i=n(17072),o=n(63702).CONSTRUCTOR;t.exports=o||!i((function(t){r.all(t).then(void 0,(function(){}))}))},2626:function(t,e,n){"use strict";var r=n(3070).f;t.exports=function(t,e,n){n in t||r(t,n,{configurable:!0,get:function(){return e[n]},set:function(t){e[n]=t}})}},18572:function(t){"use strict";var e=function(){this.head=null,this.tail=null};e.prototype={add:function(t){var e={item:t,next:null},n=this.tail;n?n.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}},t.exports=e},97651:function(t,e,n){"use strict";var r=n(46916),i=n(19670),o=n(60614),s=n(84326),a=n(22261),c=TypeError;t.exports=function(t,e){var n=t.exec;if(o(n)){var l=r(n,t,e);return null!==l&&i(l),l}if("RegExp"===s(t))return r(a,t,e);throw new c("RegExp#exec called on incompatible receiver")}},22261:function(t,e,n){"use strict";var r,i,o=n(46916),s=n(1702),a=n(41340),c=n(67066),l=n(52999),u=n(72309),h=n(70030),p=n(29909).get,f=n(9441),d=n(38173),g=u("native-string-replace",String.prototype.replace),m=RegExp.prototype.exec,y=m,_=s("".charAt),v=s("".indexOf),x=s("".replace),b=s("".slice),w=(i=/b*/g,o(m,r=/a/,"a"),o(m,i,"a"),0!==r.lastIndex||0!==i.lastIndex),E=l.BROKEN_CARET,T=void 0!==/()??/.exec("")[1];(w||T||E||f||d)&&(y=function(t){var e,n,r,i,s,l,u,f=this,d=p(f),S=a(t),k=d.raw;if(k)return k.lastIndex=f.lastIndex,e=o(y,k,S),f.lastIndex=k.lastIndex,e;var A=d.groups,M=E&&f.sticky,I=o(c,f),C=f.source,O=0,P=S;if(M&&(I=x(I,"y",""),-1===v(I,"g")&&(I+="g"),P=b(S,f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==_(S,f.lastIndex-1))&&(C="(?: "+C+")",P=" "+P,O++),n=new RegExp("^(?:"+C+")",I)),T&&(n=new RegExp("^"+C+"$(?!\\s)",I)),w&&(r=f.lastIndex),i=o(m,M?n:f,P),M?i?(i.input=b(i.input,O),i[0]=b(i[0],O),i.index=f.lastIndex,f.lastIndex+=i[0].length):f.lastIndex=0:w&&i&&(f.lastIndex=f.global?i.index+i[0].length:r),T&&i&&i.length>1&&o(g,i[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(i[s]=void 0)})),i&&A)for(i.groups=l=h(null),s=0;s<A.length;s++)l[(u=A[s])[0]]=i[u[1]];return i}),t.exports=y},67066:function(t,e,n){"use strict";var r=n(19670);t.exports=function(){var t=r(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},34706:function(t,e,n){"use strict";var r=n(46916),i=n(92597),o=n(47976),s=n(67066),a=RegExp.prototype;t.exports=function(t){var e=t.flags;return void 0!==e||"flags"in a||i(t,"flags")||!o(a,t)?e:r(s,t)}},52999:function(t,e,n){"use strict";var r=n(47293),i=n(17854).RegExp,o=r((function(){var t=i("a","y");return t.lastIndex=2,null!==t.exec("abcd")})),s=o||r((function(){return!i("a","y").sticky})),a=o||r((function(){var t=i("^r","gy");return t.lastIndex=2,null!==t.exec("str")}));t.exports={BROKEN_CARET:a,MISSED_STICKY:s,UNSUPPORTED_Y:o}},9441:function(t,e,n){"use strict";var r=n(47293),i=n(17854).RegExp;t.exports=r((function(){var t=i(".","s");return!(t.dotAll&&t.test("\n")&&"s"===t.flags)}))},38173:function(t,e,n){"use strict";var r=n(47293),i=n(17854).RegExp;t.exports=r((function(){var t=i("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},84488:function(t,e,n){"use strict";var r=n(68554),i=TypeError;t.exports=function(t){if(r(t))throw new i("Can't call method on "+t);return t}},46465:function(t){"use strict";t.exports=function(t,e){return t===e||t!=t&&e!=e}},81150:function(t){"use strict";t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},17152:function(t,e,n){"use strict";var r,i=n(17854),o=n(22104),s=n(60614),a=n(89363),c=n(88113),l=n(50206),u=n(48053),h=i.Function,p=/MSIE .\./.test(c)||a&&((r=i.Bun.version.split(".")).length<3||"0"===r[0]&&(r[1]<3||"3"===r[1]&&"0"===r[2]));t.exports=function(t,e){var n=e?2:1;return p?function(r,i){var a=u(arguments.length,1)>n,c=s(r)?r:h(r),p=a?l(arguments,n):[],f=a?function(){o(c,this,p)}:c;return e?t(f,i):t(f)}:t}},26283:function(t,e,n){"use strict";var r=n(79405),i=n(87758),o=r.Set,s=r.add;t.exports=function(t){var e=new o;return i(t,(function(t){s(e,t)})),e}},37075:function(t,e,n){"use strict";var r=n(88999),i=n(79405),o=n(26283),s=n(1043),a=n(738),c=n(87758),l=n(6333),u=i.has,h=i.remove;t.exports=function(t){var e=r(this),n=a(t),i=o(e);return s(e)<=n.size?c(e,(function(t){n.includes(t)&&h(i,t)})):l(n.getIterator(),(function(t){u(e,t)&&h(i,t)})),i}},79405:function(t,e,n){"use strict";var r=n(1702),i=Set.prototype;t.exports={Set,add:r(i.add),has:r(i.has),remove:r(i.delete),proto:i}},81920:function(t,e,n){"use strict";var r=n(88999),i=n(79405),o=n(1043),s=n(738),a=n(87758),c=n(6333),l=i.Set,u=i.add,h=i.has;t.exports=function(t){var e=r(this),n=s(t),i=new l;return o(e)>n.size?c(n.getIterator(),(function(t){h(e,t)&&u(i,t)})):a(e,(function(t){n.includes(t)&&u(i,t)})),i}},78239:function(t,e,n){"use strict";var r=n(88999),i=n(79405).has,o=n(1043),s=n(738),a=n(87758),c=n(6333),l=n(99212);t.exports=function(t){var e=r(this),n=s(t);if(o(e)<=n.size)return!1!==a(e,(function(t){if(n.includes(t))return!1}),!0);var u=n.getIterator();return!1!==c(u,(function(t){if(i(e,t))return l(u,"normal",!1)}))}},49180:function(t,e,n){"use strict";var r=n(88999),i=n(1043),o=n(87758),s=n(738);t.exports=function(t){var e=r(this),n=s(t);return!(i(e)>n.size)&&!1!==o(e,(function(t){if(!n.includes(t))return!1}),!0)}},10107:function(t,e,n){"use strict";var r=n(88999),i=n(79405).has,o=n(1043),s=n(738),a=n(6333),c=n(99212);t.exports=function(t){var e=r(this),n=s(t);if(o(e)<n.size)return!1;var l=n.getIterator();return!1!==a(l,(function(t){if(!i(e,t))return c(l,"normal",!1)}))}},87758:function(t,e,n){"use strict";var r=n(1702),i=n(6333),o=n(79405),s=o.Set,a=o.proto,c=r(a.forEach),l=r(a.keys),u=l(new s).next;t.exports=function(t,e,n){return n?i({iterator:l(t),next:u},e):c(t,e)}},1043:function(t,e,n){"use strict";var r=n(75668),i=n(79405);t.exports=r(i.proto,"size","get")||function(t){return t.size}},96340:function(t,e,n){"use strict";var r=n(35005),i=n(47045),o=n(5112),s=n(19781),a=o("species");t.exports=function(t){var e=r(t);s&&e&&!e[a]&&i(e,a,{configurable:!0,get:function(){return this}})}},98506:function(t,e,n){"use strict";var r=n(88999),i=n(79405),o=n(26283),s=n(738),a=n(6333),c=i.add,l=i.has,u=i.remove;t.exports=function(t){var e=r(this),n=s(t).getIterator(),i=o(e);return a(n,(function(t){l(e,t)?u(i,t):c(i,t)})),i}},58003:function(t,e,n){"use strict";var r=n(3070).f,i=n(92597),o=n(5112)("toStringTag");t.exports=function(t,e,n){t&&!n&&(t=t.prototype),t&&!i(t,o)&&r(t,o,{configurable:!0,value:e})}},39391:function(t,e,n){"use strict";var r=n(88999),i=n(79405).add,o=n(26283),s=n(738),a=n(6333);t.exports=function(t){var e=r(this),n=s(t).getIterator(),c=o(e);return a(n,(function(t){i(c,t)})),c}},6200:function(t,e,n){"use strict";var r=n(72309),i=n(69711),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},5465:function(t,e,n){"use strict";var r=n(17854),i=n(13072),o="__core-js_shared__",s=r[o]||i(o,{});t.exports=s},72309:function(t,e,n){"use strict";var r=n(31913),i=n(5465);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.33.0",mode:r?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.0/LICENSE",source:"https://github.com/zloirock/core-js"})},36707:function(t,e,n){"use strict";var r=n(19670),i=n(39483),o=n(68554),s=n(5112)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||o(n=r(a)[s])?e:i(n)}},43429:function(t,e,n){"use strict";var r=n(47293);t.exports=function(t){return r((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},28710:function(t,e,n){"use strict";var r=n(1702),i=n(19303),o=n(41340),s=n(84488),a=r("".charAt),c=r("".charCodeAt),l=r("".slice),u=function(t){return function(e,n){var r,u,h=o(s(e)),p=i(n),f=h.length;return p<0||p>=f?t?"":void 0:(r=c(h,p))<55296||r>56319||p+1===f||(u=c(h,p+1))<56320||u>57343?t?a(h,p):r:t?l(h,p,p+2):u-56320+(r-55296<<10)+65536}};t.exports={codeAt:u(!1),charAt:u(!0)}},54986:function(t,e,n){"use strict";var r=n(88113);t.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(r)},76650:function(t,e,n){"use strict";var r=n(1702),i=n(17466),o=n(41340),s=n(38415),a=n(84488),c=r(s),l=r("".slice),u=Math.ceil,h=function(t){return function(e,n,r){var s,h,p=o(a(e)),f=i(n),d=p.length,g=void 0===r?" ":o(r);return f<=d||""===g?p:((h=c(g,u((s=f-d)/g.length))).length>s&&(h=l(h,0,s)),t?p+h:h+p)}};t.exports={start:h(!1),end:h(!0)}},38415:function(t,e,n){"use strict";var r=n(19303),i=n(41340),o=n(84488),s=RangeError;t.exports=function(t){var e=i(o(this)),n="",a=r(t);if(a<0||a===1/0)throw new s("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(e+=e))1&a&&(n+=e);return n}},10365:function(t,e,n){"use strict";var r=n(53111).end,i=n(76091);t.exports=i("trimEnd")?function(){return r(this)}:"".trimEnd},76091:function(t,e,n){"use strict";var r=n(76530).PROPER,i=n(47293),o=n(81361);t.exports=function(t){return i((function(){return!!o[t]()||"​᠎"!=="​᠎"[t]()||r&&o[t].name!==t}))}},33217:function(t,e,n){"use strict";var r=n(53111).start,i=n(76091);t.exports=i("trimStart")?function(){return r(this)}:"".trimStart},53111:function(t,e,n){"use strict";var r=n(1702),i=n(84488),o=n(41340),s=n(81361),a=r("".replace),c=RegExp("^["+s+"]+"),l=RegExp("(^|[^"+s+"])["+s+"]+$"),u=function(t){return function(e){var n=o(i(e));return 1&t&&(n=a(n,c,"")),2&t&&(n=a(n,l,"$1")),n}};t.exports={start:u(1),end:u(2),trim:u(3)}},36293:function(t,e,n){"use strict";var r=n(7392),i=n(47293),o=n(17854).String;t.exports=!!Object.getOwnPropertySymbols&&!i((function(){var t=Symbol("symbol detection");return!o(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},20261:function(t,e,n){"use strict";var r,i,o,s,a=n(17854),c=n(22104),l=n(49974),u=n(60614),h=n(92597),p=n(47293),f=n(60490),d=n(50206),g=n(80317),m=n(48053),y=n(6833),_=n(35268),v=a.setImmediate,x=a.clearImmediate,b=a.process,w=a.Dispatch,E=a.Function,T=a.MessageChannel,S=a.String,k=0,A={},M="onreadystatechange";p((function(){r=a.location}));var I=function(t){if(h(A,t)){var e=A[t];delete A[t],e()}},C=function(t){return function(){I(t)}},O=function(t){I(t.data)},P=function(t){a.postMessage(S(t),r.protocol+"//"+r.host)};v&&x||(v=function(t){m(arguments.length,1);var e=u(t)?t:E(t),n=d(arguments,1);return A[++k]=function(){c(e,void 0,n)},i(k),k},x=function(t){delete A[t]},_?i=function(t){b.nextTick(C(t))}:w&&w.now?i=function(t){w.now(C(t))}:T&&!y?(s=(o=new T).port2,o.port1.onmessage=O,i=l(s.postMessage,s)):a.addEventListener&&u(a.postMessage)&&!a.importScripts&&r&&"file:"!==r.protocol&&!p(P)?(i=P,a.addEventListener("message",O,!1)):i=M in g("script")?function(t){f.appendChild(g("script"))[M]=function(){f.removeChild(this),I(t)}}:function(t){setTimeout(C(t),0)}),t.exports={set:v,clear:x}},50863:function(t,e,n){"use strict";var r=n(1702);t.exports=r(1..valueOf)},51400:function(t,e,n){"use strict";var r=n(19303),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},64599:function(t,e,n){"use strict";var r=n(57593),i=TypeError;t.exports=function(t){var e=r(t,"number");if("number"==typeof e)throw new i("Can't convert number to bigint");return BigInt(e)}},57067:function(t,e,n){"use strict";var r=n(19303),i=n(17466),o=RangeError;t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw new o("Wrong length or index");return n}},45656:function(t,e,n){"use strict";var r=n(68361),i=n(84488);t.exports=function(t){return r(i(t))}},19303:function(t,e,n){"use strict";var r=n(74758);t.exports=function(t){var e=+t;return e!=e||0===e?0:r(e)}},17466:function(t,e,n){"use strict";var r=n(19303),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},47908:function(t,e,n){"use strict";var r=n(84488),i=Object;t.exports=function(t){return i(r(t))}},84590:function(t,e,n){"use strict";var r=n(73002),i=RangeError;t.exports=function(t,e){var n=r(t);if(n%e)throw new i("Wrong offset");return n}},73002:function(t,e,n){"use strict";var r=n(19303),i=RangeError;t.exports=function(t){var e=r(t);if(e<0)throw new i("The argument can't be less than 0");return e}},57593:function(t,e,n){"use strict";var r=n(46916),i=n(70111),o=n(52190),s=n(58173),a=n(92140),c=n(5112),l=TypeError,u=c("toPrimitive");t.exports=function(t,e){if(!i(t)||o(t))return t;var n,c=s(t,u);if(c){if(void 0===e&&(e="default"),n=r(c,t,e),!i(n)||o(n))return n;throw new l("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},34948:function(t,e,n){"use strict";var r=n(57593),i=n(52190);t.exports=function(t){var e=r(t,"string");return i(e)?e:e+""}},45965:function(t,e,n){"use strict";var r=n(35005),i=n(60614),o=n(25615),s=n(70111),a=r("Set");t.exports=function(t){return function(t){return s(t)&&"number"==typeof t.size&&i(t.has)&&i(t.keys)}(t)?t:o(t)?new a(t):t}},51694:function(t,e,n){"use strict";var r={};r[n(5112)("toStringTag")]="z",t.exports="[object z]"===String(r)},41340:function(t,e,n){"use strict";var r=n(70648),i=String;t.exports=function(t){if("Symbol"===r(t))throw new TypeError("Cannot convert a Symbol value to a string");return i(t)}},67892:function(t){"use strict";var e=Math.round;t.exports=function(t){var n=e(t);return n<0?0:n>255?255:255&n}},66330:function(t){"use strict";var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},19843:function(t,e,n){"use strict";var r=n(82109),i=n(17854),o=n(46916),s=n(19781),a=n(63832),c=n(90260),l=n(13331),u=n(25787),h=n(79114),p=n(68880),f=n(55988),d=n(17466),g=n(57067),m=n(84590),y=n(67892),_=n(34948),v=n(92597),x=n(70648),b=n(70111),w=n(52190),E=n(70030),T=n(47976),S=n(27674),k=n(8006).f,A=n(97321),M=n(42092).forEach,I=n(96340),C=n(47045),O=n(3070),P=n(31236),L=n(29909),D=n(79587),R=L.get,N=L.set,j=L.enforce,z=O.f,B=P.f,F=i.RangeError,U=l.ArrayBuffer,V=U.prototype,q=l.DataView,W=c.NATIVE_ARRAY_BUFFER_VIEWS,G=c.TYPED_ARRAY_TAG,$=c.TypedArray,H=c.TypedArrayPrototype,Z=c.aTypedArrayConstructor,Y=c.isTypedArray,X="BYTES_PER_ELEMENT",K="Wrong length",J=function(t,e){Z(t);for(var n=0,r=e.length,i=new t(r);r>n;)i[n]=e[n++];return i},Q=function(t,e){C(t,e,{configurable:!0,get:function(){return R(this)[e]}})},tt=function(t){var e;return T(V,t)||"ArrayBuffer"===(e=x(t))||"SharedArrayBuffer"===e},et=function(t,e){return Y(t)&&!w(e)&&e in t&&f(+e)&&e>=0},nt=function(t,e){return e=_(e),et(t,e)?h(2,t[e]):B(t,e)},rt=function(t,e,n){return e=_(e),!(et(t,e)&&b(n)&&v(n,"value"))||v(n,"get")||v(n,"set")||n.configurable||v(n,"writable")&&!n.writable||v(n,"enumerable")&&!n.enumerable?z(t,e,n):(t[e]=n.value,t)};s?(W||(P.f=nt,O.f=rt,Q(H,"buffer"),Q(H,"byteOffset"),Q(H,"byteLength"),Q(H,"length")),r({target:"Object",stat:!0,forced:!W},{getOwnPropertyDescriptor:nt,defineProperty:rt}),t.exports=function(t,e,n){var s=t.match(/\d+/)[0]/8,c=t+(n?"Clamped":"")+"Array",l="get"+t,h="set"+t,f=i[c],_=f,v=_&&_.prototype,x={},w=function(t,e){z(t,e,{get:function(){return function(t,e){var n=R(t);return n.view[l](e*s+n.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,r){var i=R(t);i.view[h](e*s+i.byteOffset,n?y(r):r,!0)}(this,e,t)},enumerable:!0})};W?a&&(_=e((function(t,e,n,r){return u(t,v),D(b(e)?tt(e)?void 0!==r?new f(e,m(n,s),r):void 0!==n?new f(e,m(n,s)):new f(e):Y(e)?J(_,e):o(A,_,e):new f(g(e)),t,_)})),S&&S(_,$),M(k(f),(function(t){t in _||p(_,t,f[t])})),_.prototype=v):(_=e((function(t,e,n,r){u(t,v);var i,a,c,l=0,h=0;if(b(e)){if(!tt(e))return Y(e)?J(_,e):o(A,_,e);i=e,h=m(n,s);var p=e.byteLength;if(void 0===r){if(p%s)throw new F(K);if((a=p-h)<0)throw new F(K)}else if((a=d(r)*s)+h>p)throw new F(K);c=a/s}else c=g(e),i=new U(a=c*s);for(N(t,{buffer:i,byteOffset:h,byteLength:a,length:c,view:new q(i)});l<c;)w(t,l++)})),S&&S(_,$),v=_.prototype=E(H)),v.constructor!==_&&p(v,"constructor",_),j(v).TypedArrayConstructor=_,G&&p(v,G,c);var T=_!==f;x[c]=_,r({global:!0,constructor:!0,forced:T,sham:!W},x),X in _||p(_,X,s),X in v||p(v,X,s),I(c)}):t.exports=function(){}},63832:function(t,e,n){"use strict";var r=n(17854),i=n(47293),o=n(17072),s=n(90260).NATIVE_ARRAY_BUFFER_VIEWS,a=r.ArrayBuffer,c=r.Int8Array;t.exports=!s||!i((function(){c(1)}))||!i((function(){new c(-1)}))||!o((function(t){new c,new c(null),new c(1.5),new c(t)}),!0)||i((function(){return 1!==new c(new a(2),1,void 0).length}))},43074:function(t,e,n){"use strict";var r=n(97745),i=n(66304);t.exports=function(t,e){return r(i(t),e)}},97321:function(t,e,n){"use strict";var r=n(49974),i=n(46916),o=n(39483),s=n(47908),a=n(26244),c=n(18554),l=n(71246),u=n(97659),h=n(44067),p=n(90260).aTypedArrayConstructor,f=n(64599);t.exports=function(t){var e,n,d,g,m,y,_,v,x=o(this),b=s(t),w=arguments.length,E=w>1?arguments[1]:void 0,T=void 0!==E,S=l(b);if(S&&!u(S))for(v=(_=c(b,S)).next,b=[];!(y=i(v,_)).done;)b.push(y.value);for(T&&w>2&&(E=r(E,arguments[2])),n=a(b),d=new(p(x))(n),g=h(d),e=0;n>e;e++)m=T?E(b[e],e):b[e],d[e]=g?f(m):+m;return d}},66304:function(t,e,n){"use strict";var r=n(90260),i=n(36707),o=r.aTypedArrayConstructor,s=r.getTypedArrayConstructor;t.exports=function(t){return o(i(t,s(t)))}},69711:function(t,e,n){"use strict";var r=n(1702),i=0,o=Math.random(),s=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++i+o,36)}},43307:function(t,e,n){"use strict";var r=n(36293);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(t,e,n){"use strict";var r=n(19781),i=n(47293);t.exports=r&&i((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},48053:function(t){"use strict";var e=TypeError;t.exports=function(t,n){if(t<n)throw new e("Not enough arguments");return t}},94811:function(t,e,n){"use strict";var r=n(17854),i=n(60614),o=r.WeakMap;t.exports=i(o)&&/native code/.test(String(o))},5112:function(t,e,n){"use strict";var r=n(17854),i=n(72309),o=n(92597),s=n(69711),a=n(36293),c=n(43307),l=r.Symbol,u=i("wks"),h=c?l.for||l:l&&l.withoutSetter||s;t.exports=function(t){return o(u,t)||(u[t]=a&&o(l,t)?l[t]:h("Symbol."+t)),u[t]}},81361:function(t){"use strict";t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},39575:function(t,e,n){"use strict";var r=n(82109),i=n(21470),o=n(47293),s=n(13331),a=n(19670),c=n(51400),l=n(17466),u=n(36707),h=s.ArrayBuffer,p=s.DataView,f=p.prototype,d=i(h.prototype.slice),g=i(f.getUint8),m=i(f.setUint8);r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:o((function(){return!new h(2).slice(1,void 0).byteLength}))},{slice:function(t,e){if(d&&void 0===e)return d(a(this),t);for(var n=a(this).byteLength,r=c(t,n),i=c(void 0===e?n:e,n),o=new(u(this,h))(l(i-r)),s=new p(this),f=new p(o),y=0;r<i;)m(f,y++,g(s,r++));return o}})},92222:function(t,e,n){"use strict";var r=n(82109),i=n(47293),o=n(43157),s=n(70111),a=n(47908),c=n(26244),l=n(7207),u=n(86135),h=n(65417),p=n(81194),f=n(5112),d=n(7392),g=f("isConcatSpreadable"),m=d>=51||!i((function(){var t=[];return t[g]=!1,t.concat()[0]!==t})),y=function(t){if(!s(t))return!1;var e=t[g];return void 0!==e?!!e:o(t)};r({target:"Array",proto:!0,arity:1,forced:!m||!p("concat")},{concat:function(t){var e,n,r,i,o,s=a(this),p=h(s,0),f=0;for(e=-1,r=arguments.length;e<r;e++)if(y(o=-1===e?s:arguments[e]))for(i=c(o),l(f+i),n=0;n<i;n++,f++)n in o&&u(p,f,o[n]);else l(f+1),u(p,f++,o);return p.length=f,p}})},50545:function(t,e,n){"use strict";var r=n(82109),i=n(1048),o=n(51223);r({target:"Array",proto:!0},{copyWithin:i}),o("copyWithin")},43290:function(t,e,n){"use strict";var r=n(82109),i=n(21285),o=n(51223);r({target:"Array",proto:!0},{fill:i}),o("fill")},57327:function(t,e,n){"use strict";var r=n(82109),i=n(42092).filter;r({target:"Array",proto:!0,forced:!n(81194)("filter")},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},34553:function(t,e,n){"use strict";var r=n(82109),i=n(42092).findIndex,o=n(51223),s="findIndex",a=!0;s in[]&&Array(1)[s]((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o(s)},69826:function(t,e,n){"use strict";var r=n(82109),i=n(42092).find,o=n(51223),s="find",a=!0;s in[]&&Array(1)[s]((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o(s)},91038:function(t,e,n){"use strict";var r=n(82109),i=n(48457);r({target:"Array",stat:!0,forced:!n(17072)((function(t){Array.from(t)}))},{from:i})},26699:function(t,e,n){"use strict";var r=n(82109),i=n(41318).includes,o=n(47293),s=n(51223);r({target:"Array",proto:!0,forced:o((function(){return!Array(1).includes()}))},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),s("includes")},66992:function(t,e,n){"use strict";var r=n(45656),i=n(51223),o=n(97497),s=n(29909),a=n(3070).f,c=n(51656),l=n(76178),u=n(31913),h=n(19781),p="Array Iterator",f=s.set,d=s.getterFor(p);t.exports=c(Array,"Array",(function(t,e){f(this,{type:p,target:r(t),index:0,kind:e})}),(function(){var t=d(this),e=t.target,n=t.kind,r=t.index++;if(!e||r>=e.length)return t.target=void 0,l(void 0,!0);switch(n){case"keys":return l(r,!1);case"values":return l(e[r],!1)}return l([r,e[r]],!1)}),"values");var g=o.Arguments=o.Array;if(i("keys"),i("values"),i("entries"),!u&&h&&"values"!==g.name)try{a(g,"name",{value:"values"})}catch(t){}},69600:function(t,e,n){"use strict";var r=n(82109),i=n(1702),o=n(68361),s=n(45656),a=n(9341),c=i([].join);r({target:"Array",proto:!0,forced:o!==Object||!a("join",",")},{join:function(t){return c(s(this),void 0===t?",":t)}})},21249:function(t,e,n){"use strict";var r=n(82109),i=n(42092).map;r({target:"Array",proto:!0,forced:!n(81194)("map")},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},26572:function(t,e,n){"use strict";var r=n(82109),i=n(47293),o=n(4411),s=n(86135),a=Array;r({target:"Array",stat:!0,forced:i((function(){function t(){}return!(a.of.call(t)instanceof t)}))},{of:function(){for(var t=0,e=arguments.length,n=new(o(this)?this:a)(e);e>t;)s(n,t,arguments[t++]);return n.length=e,n}})},96644:function(t,e,n){"use strict";var r=n(82109),i=n(53671).right,o=n(9341),s=n(7392);r({target:"Array",proto:!0,forced:!n(35268)&&s>79&&s<83||!o("reduceRight")},{reduceRight:function(t){return i(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},85827:function(t,e,n){"use strict";var r=n(82109),i=n(53671).left,o=n(9341),s=n(7392);r({target:"Array",proto:!0,forced:!n(35268)&&s>79&&s<83||!o("reduce")},{reduce:function(t){var e=arguments.length;return i(this,t,e,e>1?arguments[1]:void 0)}})},47042:function(t,e,n){"use strict";var r=n(82109),i=n(43157),o=n(4411),s=n(70111),a=n(51400),c=n(26244),l=n(45656),u=n(86135),h=n(5112),p=n(81194),f=n(50206),d=p("slice"),g=h("species"),m=Array,y=Math.max;r({target:"Array",proto:!0,forced:!d},{slice:function(t,e){var n,r,h,p=l(this),d=c(p),_=a(t,d),v=a(void 0===e?d:e,d);if(i(p)&&(n=p.constructor,(o(n)&&(n===m||i(n.prototype))||s(n)&&null===(n=n[g]))&&(n=void 0),n===m||void 0===n))return f(p,_,v);for(r=new(void 0===n?m:n)(y(v-_,0)),h=0;_<v;_++,h++)_ in p&&u(r,h,p[_]);return r.length=h,r}})},68309:function(t,e,n){"use strict";var r=n(19781),i=n(76530).EXISTS,o=n(1702),s=n(47045),a=Function.prototype,c=o(a.toString),l=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=o(l.exec);r&&!i&&s(a,"name",{configurable:!0,get:function(){try{return u(l,c(this))[1]}catch(t){return""}}})},69098:function(t,e,n){"use strict";n(77710)("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),n(95631))},51532:function(t,e,n){"use strict";n(69098)},99752:function(t,e,n){"use strict";var r=n(82109),i=n(26513),o=Math.acosh,s=Math.log,a=Math.sqrt,c=Math.LN2;r({target:"Math",stat:!0,forced:!o||710!==Math.floor(o(Number.MAX_VALUE))||o(1/0)!==1/0},{acosh:function(t){var e=+t;return e<1?NaN:e>94906265.62425156?s(e)+c:i(e-1+a(e-1)*a(e+1))}})},82376:function(t,e,n){"use strict";var r=n(82109),i=Math.asinh,o=Math.log,s=Math.sqrt;r({target:"Math",stat:!0,forced:!(i&&1/i(0)>0)},{asinh:function t(e){var n=+e;return isFinite(n)&&0!==n?n<0?-t(-n):o(n+s(n*n+1)):n}})},23484:function(t,e,n){"use strict";var r=n(82109),i=n(64310),o=Math.abs,s=Math.pow;r({target:"Math",stat:!0},{cbrt:function(t){var e=+t;return i(e)*s(o(e),1/3)}})},2388:function(t,e,n){"use strict";var r=n(82109),i=Math.floor,o=Math.log,s=Math.LOG2E;r({target:"Math",stat:!0},{clz32:function(t){var e=t>>>0;return e?31-i(o(e+.5)*s):32}})},88621:function(t,e,n){"use strict";var r=n(82109),i=n(66736),o=Math.cosh,s=Math.abs,a=Math.E;r({target:"Math",stat:!0,forced:!o||o(710)===1/0},{cosh:function(t){var e=i(s(t)-1)+1;return(e+1/(e*a*a))*(a/2)}})},60403:function(t,e,n){"use strict";var r=n(82109),i=n(66736);r({target:"Math",stat:!0,forced:i!==Math.expm1},{expm1:i})},84755:function(t,e,n){"use strict";n(82109)({target:"Math",stat:!0},{fround:n(26130)})},25438:function(t,e,n){"use strict";var r=n(82109),i=Math.hypot,o=Math.abs,s=Math.sqrt;r({target:"Math",stat:!0,arity:2,forced:!!i&&i(1/0,NaN)!==1/0},{hypot:function(t,e){for(var n,r,i=0,a=0,c=arguments.length,l=0;a<c;)l<(n=o(arguments[a++]))?(i=i*(r=l/n)*r+1,l=n):i+=n>0?(r=n/l)*r:n;return l===1/0?1/0:l*s(i)}})},90332:function(t,e,n){"use strict";var r=n(82109),i=n(47293),o=Math.imul;r({target:"Math",stat:!0,forced:i((function(){return-5!==o(4294967295,5)||2!==o.length}))},{imul:function(t,e){var n=65535,r=+t,i=+e,o=n&r,s=n&i;return 0|o*s+((n&r>>>16)*s+o*(n&i>>>16)<<16>>>0)}})},40658:function(t,e,n){"use strict";n(82109)({target:"Math",stat:!0},{log10:n(20403)})},40197:function(t,e,n){"use strict";n(82109)({target:"Math",stat:!0},{log1p:n(26513)})},44914:function(t,e,n){"use strict";var r=n(82109),i=Math.log,o=Math.LN2;r({target:"Math",stat:!0},{log2:function(t){return i(t)/o}})},52420:function(t,e,n){"use strict";n(82109)({target:"Math",stat:!0},{sign:n(64310)})},60160:function(t,e,n){"use strict";var r=n(82109),i=n(47293),o=n(66736),s=Math.abs,a=Math.exp,c=Math.E;r({target:"Math",stat:!0,forced:i((function(){return-2e-17!==Math.sinh(-2e-17)}))},{sinh:function(t){var e=+t;return s(e)<1?(o(e)-o(-e))/2:(a(e-1)-a(-e-1))*(c/2)}})},60970:function(t,e,n){"use strict";var r=n(82109),i=n(66736),o=Math.exp;r({target:"Math",stat:!0},{tanh:function(t){var e=+t,n=i(e),r=i(-e);return n===1/0?1:r===1/0?-1:(n-r)/(o(e)+o(-e))}})},73689:function(t,e,n){"use strict";n(82109)({target:"Math",stat:!0},{trunc:n(74758)})},9653:function(t,e,n){"use strict";var r=n(82109),i=n(31913),o=n(19781),s=n(17854),a=n(40857),c=n(1702),l=n(54705),u=n(92597),h=n(79587),p=n(47976),f=n(52190),d=n(57593),g=n(47293),m=n(8006).f,y=n(31236).f,_=n(3070).f,v=n(50863),x=n(53111).trim,b="Number",w=s[b],E=a[b],T=w.prototype,S=s.TypeError,k=c("".slice),A=c("".charCodeAt),M=function(t){var e,n,r,i,o,s,a,c,l=d(t,"number");if(f(l))throw new S("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=x(l),43===(e=A(l,0))||45===e){if(88===(n=A(l,2))||120===n)return NaN}else if(48===e){switch(A(l,1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+l}for(s=(o=k(l,2)).length,a=0;a<s;a++)if((c=A(o,a))<48||c>i)return NaN;return parseInt(o,r)}return+l},I=l(b,!w(" 0o1")||!w("0b1")||w("+0x1")),C=function(t){var e,n=arguments.length<1?0:w(function(t){var e=d(t,"number");return"bigint"==typeof e?e:M(e)}(t));return p(T,e=this)&&g((function(){v(e)}))?h(Object(n),this,C):n};C.prototype=T,I&&!i&&(T.constructor=C),r({global:!0,constructor:!0,wrap:!0,forced:I},{Number:C});var O=function(t,e){for(var n,r=o?m(e):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),i=0;r.length>i;i++)u(e,n=r[i])&&!u(t,n)&&_(t,n,y(e,n))};i&&E&&O(a[b],E),(I||i)&&O(a[b],w)},35192:function(t,e,n){"use strict";n(82109)({target:"Number",stat:!0},{isFinite:n(77023)})},33161:function(t,e,n){"use strict";n(82109)({target:"Number",stat:!0},{isInteger:n(55988)})},44048:function(t,e,n){"use strict";n(82109)({target:"Number",stat:!0},{isNaN:function(t){return t!=t}})},78285:function(t,e,n){"use strict";var r=n(82109),i=n(55988),o=Math.abs;r({target:"Number",stat:!0},{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},44363:function(t,e,n){"use strict";n(82109)({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})},55994:function(t,e,n){"use strict";n(82109)({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MIN_SAFE_INTEGER:-9007199254740991})},61874:function(t,e,n){"use strict";var r=n(82109),i=n(2814);r({target:"Number",stat:!0,forced:Number.parseFloat!==i},{parseFloat:i})},9494:function(t,e,n){"use strict";var r=n(82109),i=n(83009);r({target:"Number",stat:!0,forced:Number.parseInt!==i},{parseInt:i})},56977:function(t,e,n){"use strict";var r=n(82109),i=n(1702),o=n(19303),s=n(50863),a=n(38415),c=n(47293),l=RangeError,u=String,h=Math.floor,p=i(a),f=i("".slice),d=i(1..toFixed),g=function(t,e,n){return 0===e?n:e%2==1?g(t,e-1,n*t):g(t*t,e/2,n)},m=function(t,e,n){for(var r=-1,i=n;++r<6;)i+=e*t[r],t[r]=i%1e7,i=h(i/1e7)},y=function(t,e){for(var n=6,r=0;--n>=0;)r+=t[n],t[n]=h(r/e),r=r%e*1e7},_=function(t){for(var e=6,n="";--e>=0;)if(""!==n||0===e||0!==t[e]){var r=u(t[e]);n=""===n?r:n+p("0",7-r.length)+r}return n};r({target:"Number",proto:!0,forced:c((function(){return"0.000"!==d(8e-5,3)||"1"!==d(.9,0)||"1.25"!==d(1.255,2)||"1000000000000000128"!==d(0xde0b6b3a7640080,0)}))||!c((function(){d({})}))},{toFixed:function(t){var e,n,r,i,a=s(this),c=o(t),h=[0,0,0,0,0,0],d="",v="0";if(c<0||c>20)throw new l("Incorrect fraction digits");if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return u(a);if(a<0&&(d="-",a=-a),a>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(a*g(2,69,1))-69)<0?a*g(2,-e,1):a/g(2,e,1),n*=4503599627370496,(e=52-e)>0){for(m(h,0,n),r=c;r>=7;)m(h,1e7,0),r-=7;for(m(h,g(10,r,1),0),r=e-1;r>=23;)y(h,1<<23),r-=23;y(h,1<<r),m(h,1,1),y(h,2),v=_(h)}else m(h,0,n),m(h,1<<-e,0),v=_(h)+p("0",c);return v=c>0?d+((i=v.length)<=c?"0."+p("0",c-i)+v:f(v,0,i-c)+"."+f(v,i-c)):d+v}})},19601:function(t,e,n){"use strict";var r=n(82109),i=n(21574);r({target:"Object",stat:!0,arity:2,forced:Object.assign!==i},{assign:i})},43371:function(t,e,n){"use strict";var r=n(82109),i=n(76677),o=n(47293),s=n(70111),a=n(62423).onFreeze,c=Object.freeze;r({target:"Object",stat:!0,forced:o((function(){c(1)})),sham:!i},{freeze:function(t){return c&&s(t)?c(a(t)):t}})},43304:function(t,e,n){"use strict";n(82109)({target:"Object",stat:!0},{is:n(81150)})},47941:function(t,e,n){"use strict";var r=n(82109),i=n(47908),o=n(81956);r({target:"Object",stat:!0,forced:n(47293)((function(){o(1)}))},{keys:function(t){return o(i(t))}})},41539:function(t,e,n){"use strict";var r=n(51694),i=n(98052),o=n(90288);r||i(Object.prototype,"toString",o,{unsafe:!0})},26833:function(t,e,n){"use strict";var r=n(82109),i=n(44699).values;r({target:"Object",stat:!0},{values:function(t){return i(t)}})},70821:function(t,e,n){"use strict";var r=n(82109),i=n(46916),o=n(19662),s=n(78523),a=n(12534),c=n(20408);r({target:"Promise",stat:!0,forced:n(80612)},{all:function(t){var e=this,n=s.f(e),r=n.resolve,l=n.reject,u=a((function(){var n=o(e.resolve),s=[],a=0,u=1;c(t,(function(t){var o=a++,c=!1;u++,i(n,e,t).then((function(t){c||(c=!0,s[o]=t,--u||r(s))}),l)})),--u||r(s)}));return u.error&&l(u.value),n.promise}})},94164:function(t,e,n){"use strict";var r=n(82109),i=n(31913),o=n(63702).CONSTRUCTOR,s=n(2492),a=n(35005),c=n(60614),l=n(98052),u=s&&s.prototype;if(r({target:"Promise",proto:!0,forced:o,real:!0},{catch:function(t){return this.then(void 0,t)}}),!i&&c(s)){var h=a("Promise").prototype.catch;u.catch!==h&&l(u,"catch",h,{unsafe:!0})}},43401:function(t,e,n){"use strict";var r,i,o,s=n(82109),a=n(31913),c=n(35268),l=n(17854),u=n(46916),h=n(98052),p=n(27674),f=n(58003),d=n(96340),g=n(19662),m=n(60614),y=n(70111),_=n(25787),v=n(36707),x=n(20261).set,b=n(95948),w=n(842),E=n(12534),T=n(18572),S=n(29909),k=n(2492),A=n(63702),M=n(78523),I="Promise",C=A.CONSTRUCTOR,O=A.REJECTION_EVENT,P=A.SUBCLASSING,L=S.getterFor(I),D=S.set,R=k&&k.prototype,N=k,j=R,z=l.TypeError,B=l.document,F=l.process,U=M.f,V=U,q=!!(B&&B.createEvent&&l.dispatchEvent),W="unhandledrejection",G=function(t){var e;return!(!y(t)||!m(e=t.then))&&e},$=function(t,e){var n,r,i,o=e.value,s=1===e.state,a=s?t.ok:t.fail,c=t.resolve,l=t.reject,h=t.domain;try{a?(s||(2===e.rejection&&K(e),e.rejection=1),!0===a?n=o:(h&&h.enter(),n=a(o),h&&(h.exit(),i=!0)),n===t.promise?l(new z("Promise-chain cycle")):(r=G(n))?u(r,n,c,l):c(n)):l(o)}catch(t){h&&!i&&h.exit(),l(t)}},H=function(t,e){t.notified||(t.notified=!0,b((function(){for(var n,r=t.reactions;n=r.get();)$(n,t);t.notified=!1,e&&!t.rejection&&Y(t)})))},Z=function(t,e,n){var r,i;q?((r=B.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),l.dispatchEvent(r)):r={promise:e,reason:n},!O&&(i=l["on"+t])?i(r):t===W&&w("Unhandled promise rejection",n)},Y=function(t){u(x,l,(function(){var e,n=t.facade,r=t.value;if(X(t)&&(e=E((function(){c?F.emit("unhandledRejection",r,n):Z(W,n,r)})),t.rejection=c||X(t)?2:1,e.error))throw e.value}))},X=function(t){return 1!==t.rejection&&!t.parent},K=function(t){u(x,l,(function(){var e=t.facade;c?F.emit("rejectionHandled",e):Z("rejectionhandled",e,t.value)}))},J=function(t,e,n){return function(r){t(e,r,n)}},Q=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,H(t,!0))},tt=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw new z("Promise can't be resolved itself");var r=G(e);r?b((function(){var n={done:!1};try{u(r,e,J(tt,n,t),J(Q,n,t))}catch(e){Q(n,e,t)}})):(t.value=e,t.state=1,H(t,!1))}catch(e){Q({done:!1},e,t)}}};if(C&&(j=(N=function(t){_(this,j),g(t),u(r,this);var e=L(this);try{t(J(tt,e),J(Q,e))}catch(t){Q(e,t)}}).prototype,(r=function(t){D(this,{type:I,done:!1,notified:!1,parent:!1,reactions:new T,rejection:!1,state:0,value:void 0})}).prototype=h(j,"then",(function(t,e){var n=L(this),r=U(v(this,N));return n.parent=!0,r.ok=!m(t)||t,r.fail=m(e)&&e,r.domain=c?F.domain:void 0,0===n.state?n.reactions.add(r):b((function(){$(r,n)})),r.promise})),i=function(){var t=new r,e=L(t);this.promise=t,this.resolve=J(tt,e),this.reject=J(Q,e)},M.f=U=function(t){return t===N||undefined===t?new i(t):V(t)},!a&&m(k)&&R!==Object.prototype)){o=R.then,P||h(R,"then",(function(t,e){var n=this;return new N((function(t,e){u(o,n,t,e)})).then(t,e)}),{unsafe:!0});try{delete R.constructor}catch(t){}p&&p(R,j)}s({global:!0,constructor:!0,wrap:!0,forced:C},{Promise:N}),f(N,I,!1,!0),d(I)},88674:function(t,e,n){"use strict";n(43401),n(70821),n(94164),n(6027),n(60683),n(96294)},6027:function(t,e,n){"use strict";var r=n(82109),i=n(46916),o=n(19662),s=n(78523),a=n(12534),c=n(20408);r({target:"Promise",stat:!0,forced:n(80612)},{race:function(t){var e=this,n=s.f(e),r=n.reject,l=a((function(){var s=o(e.resolve);c(t,(function(t){i(s,e,t).then(n.resolve,r)}))}));return l.error&&r(l.value),n.promise}})},60683:function(t,e,n){"use strict";var r=n(82109),i=n(46916),o=n(78523);r({target:"Promise",stat:!0,forced:n(63702).CONSTRUCTOR},{reject:function(t){var e=o.f(this);return i(e.reject,void 0,t),e.promise}})},96294:function(t,e,n){"use strict";var r=n(82109),i=n(35005),o=n(31913),s=n(2492),a=n(63702).CONSTRUCTOR,c=n(69478),l=i("Promise"),u=o&&!a;r({target:"Promise",stat:!0,forced:o||a},{resolve:function(t){return c(u&&this===l?s:this,t)}})},24603:function(t,e,n){"use strict";var r=n(19781),i=n(17854),o=n(1702),s=n(54705),a=n(79587),c=n(68880),l=n(8006).f,u=n(47976),h=n(47850),p=n(41340),f=n(34706),d=n(52999),g=n(2626),m=n(98052),y=n(47293),_=n(92597),v=n(29909).enforce,x=n(96340),b=n(5112),w=n(9441),E=n(38173),T=b("match"),S=i.RegExp,k=S.prototype,A=i.SyntaxError,M=o(k.exec),I=o("".charAt),C=o("".replace),O=o("".indexOf),P=o("".slice),L=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,D=/a/g,R=/a/g,N=new S(D)!==D,j=d.MISSED_STICKY,z=d.UNSUPPORTED_Y,B=r&&(!N||j||w||E||y((function(){return R[T]=!1,S(D)!==D||S(R)===R||"/a/i"!==String(S(D,"i"))})));if(s("RegExp",B)){for(var F=function(t,e){var n,r,i,o,s,l,d=u(k,this),g=h(t),m=void 0===e,y=[],x=t;if(!d&&g&&m&&t.constructor===F)return t;if((g||u(k,t))&&(t=t.source,m&&(e=f(x))),t=void 0===t?"":p(t),e=void 0===e?"":p(e),x=t,w&&"dotAll"in D&&(r=!!e&&O(e,"s")>-1)&&(e=C(e,/s/g,"")),n=e,j&&"sticky"in D&&(i=!!e&&O(e,"y")>-1)&&z&&(e=C(e,/y/g,"")),E&&(o=function(t){for(var e,n=t.length,r=0,i="",o=[],s={},a=!1,c=!1,l=0,u="";r<=n;r++){if("\\"===(e=I(t,r)))e+=I(t,++r);else if("]"===e)a=!1;else if(!a)switch(!0){case"["===e:a=!0;break;case"("===e:M(L,P(t,r+1))&&(r+=2,c=!0),i+=e,l++;continue;case">"===e&&c:if(""===u||_(s,u))throw new A("Invalid capture group name");s[u]=!0,o[o.length]=[u,l],c=!1,u="";continue}c?u+=e:i+=e}return[i,o]}(t),t=o[0],y=o[1]),s=a(S(t,e),d?this:k,F),(r||i||y.length)&&(l=v(s),r&&(l.dotAll=!0,l.raw=F(function(t){for(var e,n=t.length,r=0,i="",o=!1;r<=n;r++)"\\"!==(e=I(t,r))?o||"."!==e?("["===e?o=!0:"]"===e&&(o=!1),i+=e):i+="[\\s\\S]":i+=e+I(t,++r);return i}(t),n)),i&&(l.sticky=!0),y.length&&(l.groups=y)),t!==x)try{c(s,"source",""===x?"(?:)":x)}catch(t){}return s},U=l(S),V=0;U.length>V;)g(F,S,U[V++]);k.constructor=F,F.prototype=k,m(i,"RegExp",F,{constructor:!0})}x("RegExp")},74916:function(t,e,n){"use strict";var r=n(82109),i=n(22261);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},39714:function(t,e,n){"use strict";var r=n(76530).PROPER,i=n(98052),o=n(19670),s=n(41340),a=n(47293),c=n(34706),l="toString",u=RegExp.prototype[l],h=a((function(){return"/a/b"!==u.call({source:"a",flags:"b"})})),p=r&&u.name!==l;(h||p)&&i(RegExp.prototype,l,(function(){var t=o(this);return"/"+s(t.source)+"/"+s(c(t))}),{unsafe:!0})},37227:function(t,e,n){"use strict";n(77710)("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),n(95631))},70189:function(t,e,n){"use strict";n(37227)},15218:function(t,e,n){"use strict";var r=n(82109),i=n(14230);r({target:"String",proto:!0,forced:n(43429)("anchor")},{anchor:function(t){return i(this,"a","name",t)}})},27852:function(t,e,n){"use strict";var r,i=n(82109),o=n(21470),s=n(31236).f,a=n(17466),c=n(41340),l=n(3929),u=n(84488),h=n(84964),p=n(31913),f=o("".endsWith),d=o("".slice),g=Math.min,m=h("endsWith");i({target:"String",proto:!0,forced:!!(p||m||(r=s(String.prototype,"endsWith"),!r||r.writable))&&!m},{endsWith:function(t){var e=c(u(this));l(t);var n=arguments.length>1?arguments[1]:void 0,r=e.length,i=void 0===n?r:g(a(n),r),o=c(t);return f?f(e,o,i):d(e,i-o.length,i)===o}})},29253:function(t,e,n){"use strict";var r=n(82109),i=n(14230);r({target:"String",proto:!0,forced:n(43429)("fixed")},{fixed:function(){return i(this,"tt","","")}})},32023:function(t,e,n){"use strict";var r=n(82109),i=n(1702),o=n(3929),s=n(84488),a=n(41340),c=n(84964),l=i("".indexOf);r({target:"String",proto:!0,forced:!c("includes")},{includes:function(t){return!!~l(a(s(this)),a(o(t)),arguments.length>1?arguments[1]:void 0)}})},78783:function(t,e,n){"use strict";var r=n(28710).charAt,i=n(41340),o=n(29909),s=n(51656),a=n(76178),c="String Iterator",l=o.set,u=o.getterFor(c);s(String,"String",(function(t){l(this,{type:c,string:i(t),index:0})}),(function(){var t,e=u(this),n=e.string,i=e.index;return i>=n.length?a(void 0,!0):(t=r(n,i),e.index+=t.length,a(t,!1))}))},4723:function(t,e,n){"use strict";var r=n(46916),i=n(27007),o=n(19670),s=n(68554),a=n(17466),c=n(41340),l=n(84488),u=n(58173),h=n(31530),p=n(97651);i("match",(function(t,e,n){return[function(e){var n=l(this),i=s(e)?void 0:u(e,t);return i?r(i,e,n):new RegExp(e)[t](c(n))},function(t){var r=o(this),i=c(t),s=n(e,r,i);if(s.done)return s.value;if(!r.global)return p(r,i);var l=r.unicode;r.lastIndex=0;for(var u,f=[],d=0;null!==(u=p(r,i));){var g=c(u[0]);f[d]=g,""===g&&(r.lastIndex=h(i,a(r.lastIndex),l)),d++}return 0===d?null:f}]}))},66528:function(t,e,n){"use strict";var r=n(82109),i=n(76650).end;r({target:"String",proto:!0,forced:n(54986)},{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},83112:function(t,e,n){"use strict";var r=n(82109),i=n(76650).start;r({target:"String",proto:!0,forced:n(54986)},{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},82481:function(t,e,n){"use strict";n(82109)({target:"String",proto:!0},{repeat:n(38415)})},15306:function(t,e,n){"use strict";var r=n(22104),i=n(46916),o=n(1702),s=n(27007),a=n(47293),c=n(19670),l=n(60614),u=n(68554),h=n(19303),p=n(17466),f=n(41340),d=n(84488),g=n(31530),m=n(58173),y=n(10647),_=n(97651),v=n(5112)("replace"),x=Math.max,b=Math.min,w=o([].concat),E=o([].push),T=o("".indexOf),S=o("".slice),k="$0"==="a".replace(/./,"$0"),A=!!/./[v]&&""===/./[v]("a","$0");s("replace",(function(t,e,n){var o=A?"$":"$0";return[function(t,n){var r=d(this),o=u(t)?void 0:m(t,v);return o?i(o,t,r,n):i(e,f(r),t,n)},function(t,i){var s=c(this),a=f(t);if("string"==typeof i&&-1===T(i,o)&&-1===T(i,"$<")){var u=n(e,s,a,i);if(u.done)return u.value}var d=l(i);d||(i=f(i));var m,v=s.global;v&&(m=s.unicode,s.lastIndex=0);for(var k,A=[];null!==(k=_(s,a))&&(E(A,k),v);){""===f(k[0])&&(s.lastIndex=g(a,p(s.lastIndex),m))}for(var M,I="",C=0,O=0;O<A.length;O++){for(var P,L=f((k=A[O])[0]),D=x(b(h(k.index),a.length),0),R=[],N=1;N<k.length;N++)E(R,void 0===(M=k[N])?M:String(M));var j=k.groups;if(d){var z=w([L],R,D,a);void 0!==j&&E(z,j),P=f(r(i,void 0,z))}else P=y(L,a,D,R,j,i);D>=C&&(I+=S(a,C,D)+P,C=D+L.length)}return I+S(a,C)}]}),!!a((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!k||A)},37268:function(t,e,n){"use strict";var r=n(82109),i=n(14230);r({target:"String",proto:!0,forced:n(43429)("small")},{small:function(){return i(this,"small","","")}})},23157:function(t,e,n){"use strict";var r,i=n(82109),o=n(21470),s=n(31236).f,a=n(17466),c=n(41340),l=n(3929),u=n(84488),h=n(84964),p=n(31913),f=o("".startsWith),d=o("".slice),g=Math.min,m=h("startsWith");i({target:"String",proto:!0,forced:!!(p||m||(r=s(String.prototype,"startsWith"),!r||r.writable))&&!m},{startsWith:function(t){var e=c(u(this));l(t);var n=a(g(arguments.length>1?arguments[1]:void 0,e.length)),r=c(t);return f?f(e,r,n):d(e,n,n+r.length)===r}})},48702:function(t,e,n){"use strict";n(83462);var r=n(82109),i=n(10365);r({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==i},{trimEnd:i})},99967:function(t,e,n){"use strict";var r=n(82109),i=n(33217);r({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==i},{trimLeft:i})},83462:function(t,e,n){"use strict";var r=n(82109),i=n(10365);r({target:"String",proto:!0,name:"trimEnd",forced:"".trimRight!==i},{trimRight:i})},55674:function(t,e,n){"use strict";n(99967);var r=n(82109),i=n(33217);r({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==i},{trimStart:i})},73210:function(t,e,n){"use strict";var r=n(82109),i=n(53111).trim;r({target:"String",proto:!0,forced:n(76091)("trim")},{trim:function(){return i(this)}})},92990:function(t,e,n){"use strict";var r=n(1702),i=n(90260),o=r(n(1048)),s=i.aTypedArray;(0,i.exportTypedArrayMethod)("copyWithin",(function(t,e){return o(s(this),t,e,arguments.length>2?arguments[2]:void 0)}))},18927:function(t,e,n){"use strict";var r=n(90260),i=n(42092).every,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},33105:function(t,e,n){"use strict";var r=n(90260),i=n(21285),o=n(64599),s=n(70648),a=n(46916),c=n(1702),l=n(47293),u=r.aTypedArray,h=r.exportTypedArrayMethod,p=c("".slice);h("fill",(function(t){var e=arguments.length;u(this);var n="Big"===p(s(this),0,3)?o(t):+t;return a(i,this,n,e>1?arguments[1]:void 0,e>2?arguments[2]:void 0)}),l((function(){var t=0;return new Int8Array(2).fill({valueOf:function(){return t++}}),1!==t})))},35035:function(t,e,n){"use strict";var r=n(90260),i=n(42092).filter,o=n(43074),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("filter",(function(t){var e=i(s(this),t,arguments.length>1?arguments[1]:void 0);return o(this,e)}))},7174:function(t,e,n){"use strict";var r=n(90260),i=n(42092).findIndex,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},74345:function(t,e,n){"use strict";var r=n(90260),i=n(42092).find,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},32846:function(t,e,n){"use strict";var r=n(90260),i=n(42092).forEach,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",(function(t){i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},44731:function(t,e,n){"use strict";var r=n(90260),i=n(41318).includes,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},77209:function(t,e,n){"use strict";var r=n(90260),i=n(41318).indexOf,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},96319:function(t,e,n){"use strict";var r=n(17854),i=n(47293),o=n(1702),s=n(90260),a=n(66992),c=n(5112)("iterator"),l=r.Uint8Array,u=o(a.values),h=o(a.keys),p=o(a.entries),f=s.aTypedArray,d=s.exportTypedArrayMethod,g=l&&l.prototype,m=!i((function(){g[c].call([1])})),y=!!g&&g.values&&g[c]===g.values&&"values"===g.values.name,_=function(){return u(f(this))};d("entries",(function(){return p(f(this))}),m),d("keys",(function(){return h(f(this))}),m),d("values",_,m||!y,{name:"values"}),d(c,_,m||!y,{name:"values"})},58867:function(t,e,n){"use strict";var r=n(90260),i=n(1702),o=r.aTypedArray,s=r.exportTypedArrayMethod,a=i([].join);s("join",(function(t){return a(o(this),t)}))},37789:function(t,e,n){"use strict";var r=n(90260),i=n(22104),o=n(86583),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",(function(t){var e=arguments.length;return i(o,s(this),e>1?[t,arguments[1]]:[t])}))},33739:function(t,e,n){"use strict";var r=n(90260),i=n(42092).map,o=n(66304),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("map",(function(t){return i(s(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(o(t))(e)}))}))},14483:function(t,e,n){"use strict";var r=n(90260),i=n(53671).right,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",(function(t){var e=arguments.length;return i(o(this),t,e,e>1?arguments[1]:void 0)}))},29368:function(t,e,n){"use strict";var r=n(90260),i=n(53671).left,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",(function(t){var e=arguments.length;return i(o(this),t,e,e>1?arguments[1]:void 0)}))},12056:function(t,e,n){"use strict";var r=n(90260),i=r.aTypedArray,o=r.exportTypedArrayMethod,s=Math.floor;o("reverse",(function(){for(var t,e=this,n=i(e).length,r=s(n/2),o=0;o<r;)t=e[o],e[o++]=e[--n],e[n]=t;return e}))},3462:function(t,e,n){"use strict";var r=n(17854),i=n(46916),o=n(90260),s=n(26244),a=n(84590),c=n(47908),l=n(47293),u=r.RangeError,h=r.Int8Array,p=h&&h.prototype,f=p&&p.set,d=o.aTypedArray,g=o.exportTypedArrayMethod,m=!l((function(){var t=new Uint8ClampedArray(2);return i(f,t,{length:1,0:3},1),3!==t[1]})),y=m&&o.NATIVE_ARRAY_BUFFER_VIEWS&&l((function(){var t=new h(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));g("set",(function(t){d(this);var e=a(arguments.length>1?arguments[1]:void 0,1),n=c(t);if(m)return i(f,this,n,e);var r=this.length,o=s(n),l=0;if(o+e>r)throw new u("Wrong length");for(;l<o;)this[e+l]=n[l++]}),!m||y)},30678:function(t,e,n){"use strict";var r=n(90260),i=n(66304),o=n(47293),s=n(50206),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("slice",(function(t,e){for(var n=s(a(this),t,e),r=i(this),o=0,c=n.length,l=new r(c);c>o;)l[o]=n[o++];return l}),o((function(){new Int8Array(1).slice()})))},27462:function(t,e,n){"use strict";var r=n(90260),i=n(42092).some,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},33824:function(t,e,n){"use strict";var r=n(17854),i=n(21470),o=n(47293),s=n(19662),a=n(94362),c=n(90260),l=n(68886),u=n(30256),h=n(7392),p=n(98008),f=c.aTypedArray,d=c.exportTypedArrayMethod,g=r.Uint16Array,m=g&&i(g.prototype.sort),y=!(!m||o((function(){m(new g(2),null)}))&&o((function(){m(new g(2),{})}))),_=!!m&&!o((function(){if(h)return h<74;if(l)return l<67;if(u)return!0;if(p)return p<602;var t,e,n=new g(516),r=Array(516);for(t=0;t<516;t++)e=t%4,n[t]=515-t,r[t]=t-2*e+3;for(m(n,(function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(n[t]!==r[t])return!0}));d("sort",(function(t){return void 0!==t&&s(t),_?m(this,t):a(f(this),function(t){return function(e,n){return void 0!==t?+t(e,n)||0:n!=n?-1:e!=e?1:0===e&&0===n?1/e>0&&1/n<0?1:-1:e>n}}(t))}),!_||y)},55021:function(t,e,n){"use strict";var r=n(90260),i=n(17466),o=n(51400),s=n(66304),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("subarray",(function(t,e){var n=a(this),r=n.length,c=o(t,r);return new(s(n))(n.buffer,n.byteOffset+c*n.BYTES_PER_ELEMENT,i((void 0===e?r:o(e,r))-c))}))},12974:function(t,e,n){"use strict";var r=n(17854),i=n(22104),o=n(90260),s=n(47293),a=n(50206),c=r.Int8Array,l=o.aTypedArray,u=o.exportTypedArrayMethod,h=[].toLocaleString,p=!!c&&s((function(){h.call(new c(1))}));u("toLocaleString",(function(){return i(h,p?a(l(this)):l(this),a(arguments))}),s((function(){return[1,2].toLocaleString()!==new c([1,2]).toLocaleString()}))||!s((function(){c.prototype.toLocaleString.call([1,2])})))},15016:function(t,e,n){"use strict";var r=n(90260).exportTypedArrayMethod,i=n(47293),o=n(17854),s=n(1702),a=o.Uint8Array,c=a&&a.prototype||{},l=[].toString,u=s([].join);i((function(){l.call({})}))&&(l=function(){return u(this)});var h=c.toString!==l;r("toString",l,h)},82472:function(t,e,n){"use strict";n(19843)("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},66342:function(t,e,n){"use strict";var r=n(82109),i=n(25787),o=n(79518),s=n(68880),a=n(92597),c=n(5112),l=n(66462),u=n(31913),h=c("toStringTag"),p=TypeError,f=function(){if(i(this,l),o(this)===l)throw new p("Abstract class AsyncIterator not directly constructable")};f.prototype=l,a(l,h)||s(l,h,"AsyncIterator"),!u&&a(l,"constructor")&&l.constructor!==Object||s(l,"constructor",f),r({global:!0,constructor:!0,forced:u},{AsyncIterator:f})},88449:function(t,e,n){"use strict";var r=n(82109),i=n(46916),o=n(19662),s=n(19670),a=n(70111),c=n(24942),l=n(45348),u=n(76178),h=n(21753),p=n(31913),f=l((function(t){var e=this,n=e.iterator,r=e.predicate;return new t((function(o,c){var l=function(t){e.done=!0,c(t)},p=function(t){h(n,l,t,l)},f=function(){try{t.resolve(s(i(e.next,n))).then((function(n){try{if(s(n).done)e.done=!0,o(u(void 0,!0));else{var i=n.value;try{var c=r(i,e.counter++),h=function(t){t?o(u(i,!1)):f()};a(c)?t.resolve(c).then(h,p):h(c)}catch(t){p(t)}}}catch(t){l(t)}}),l)}catch(t){l(t)}};f()}))}));r({target:"AsyncIterator",proto:!0,real:!0,forced:p},{filter:function(t){return s(this),o(t),new f(c(this),{predicate:t})}})},31672:function(t,e,n){"use strict";var r=n(82109),i=n(12269).find;r({target:"AsyncIterator",proto:!0,real:!0},{find:function(t){return i(this,t)}})},15581:function(t,e,n){"use strict";var r=n(82109),i=n(12269).forEach;r({target:"AsyncIterator",proto:!0,real:!0},{forEach:function(t){return i(this,t)}})},57640:function(t,e,n){"use strict";var r=n(82109),i=n(13232);r({target:"AsyncIterator",proto:!0,real:!0,forced:n(31913)},{map:i})},25387:function(t,e,n){"use strict";var r=n(82109),i=n(46916),o=n(19662),s=n(19670),a=n(70111),c=n(35005),l=n(24942),u=n(21753),h=c("Promise"),p=TypeError;r({target:"AsyncIterator",proto:!0,real:!0},{reduce:function(t){s(this),o(t);var e=l(this),n=e.iterator,r=e.next,c=arguments.length<2,f=c?void 0:arguments[1],d=0;return new h((function(e,o){var l=function(t){u(n,o,t,o)},g=function(){try{h.resolve(s(i(r,n))).then((function(n){try{if(s(n).done)c?o(new p("Reduce of empty iterator with no initial value")):e(f);else{var r=n.value;if(c)c=!1,f=r,g();else try{var i=t(f,r,d),u=function(t){f=t,g()};a(i)?h.resolve(i).then(u,l):u(i)}catch(t){l(t)}}d++}catch(t){o(t)}}),o)}catch(t){o(t)}};g()}))}})},62962:function(t,e,n){"use strict";var r=n(82109),i=n(12269).toArray;r({target:"AsyncIterator",proto:!0,real:!0},{toArray:function(){return i(this,void 0,[])}})},2490:function(t,e,n){"use strict";var r=n(82109),i=n(17854),o=n(25787),s=n(60614),a=n(79518),c=n(68880),l=n(47293),u=n(92597),h=n(5112),p=n(13383).IteratorPrototype,f=n(31913),d=h("toStringTag"),g=TypeError,m=i.Iterator,y=f||!s(m)||m.prototype!==p||!l((function(){m({})})),_=function(){if(o(this,p),a(this)===p)throw new g("Abstract class Iterator not directly constructable")};u(p,d)||c(p,d,"Iterator"),!y&&u(p,"constructor")&&p.constructor!==Object||c(p,"constructor",_),_.prototype=p,r({global:!0,constructor:!0,forced:y},{Iterator:_})},59849:function(t,e,n){"use strict";var r=n(82109),i=n(46916),o=n(19662),s=n(19670),a=n(24942),c=n(54956),l=n(53411),u=n(31913),h=c((function(){for(var t,e,n=this.iterator,r=this.predicate,o=this.next;;){if(t=s(i(o,n)),this.done=!!t.done)return;if(e=t.value,l(n,r,[e,this.counter++],!0))return e}}));r({target:"Iterator",proto:!0,real:!0,forced:u},{filter:function(t){return s(this),o(t),new h(a(this),{predicate:t})}})},59461:function(t,e,n){"use strict";var r=n(82109),i=n(20408),o=n(19662),s=n(19670),a=n(24942);r({target:"Iterator",proto:!0,real:!0},{find:function(t){s(this),o(t);var e=a(this),n=0;return i(e,(function(e,r){if(t(e,n++))return r(e)}),{IS_RECORD:!0,INTERRUPTED:!0}).result}})},34514:function(t,e,n){"use strict";var r=n(82109),i=n(20408),o=n(19662),s=n(19670),a=n(24942);r({target:"Iterator",proto:!0,real:!0},{forEach:function(t){s(this),o(t);var e=a(this),n=0;i(e,(function(e){t(e,n++)}),{IS_RECORD:!0})}})},9924:function(t,e,n){"use strict";var r=n(82109),i=n(20487);r({target:"Iterator",proto:!0,real:!0,forced:n(31913)},{map:i})},72608:function(t,e,n){"use strict";var r=n(82109),i=n(20408),o=n(19662),s=n(19670),a=n(24942),c=TypeError;r({target:"Iterator",proto:!0,real:!0},{reduce:function(t){s(this),o(t);var e=a(this),n=arguments.length<2,r=n?void 0:arguments[1],l=0;if(i(e,(function(e){n?(n=!1,r=e):r=t(r,e,l),l++}),{IS_RECORD:!0}),n)throw new c("Reduce of empty iterator with no initial value");return r}})},23748:function(t,e,n){"use strict";var r=n(82109),i=n(19670),o=n(20408),s=n(24942),a=[].push;r({target:"Iterator",proto:!0,real:!0},{toArray:function(){var t=[];return o(s(i(this)),a,{that:t,IS_RECORD:!0}),t}})},10072:function(t,e,n){"use strict";var r=n(82109),i=n(40027),o=n(75706).remove;r({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t,e=i(this),n=!0,r=0,s=arguments.length;r<s;r++)t=o(e,arguments[r]),n=n&&t;return!!n}})},99137:function(t,e,n){"use strict";var r=n(82109),i=n(49974),o=n(40027),s=n(14995);r({target:"Map",proto:!0,real:!0,forced:!0},{every:function(t){var e=o(this),n=i(t,arguments.length>1?arguments[1]:void 0);return!1!==s(e,(function(t,r){if(!n(t,r,e))return!1}),!0)}})},71957:function(t,e,n){"use strict";var r=n(82109),i=n(49974),o=n(40027),s=n(75706),a=n(14995),c=s.Map,l=s.set;r({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(t){var e=o(this),n=i(t,arguments.length>1?arguments[1]:void 0),r=new c;return a(e,(function(t,i){n(t,i,e)&&l(r,i,t)})),r}})},103:function(t,e,n){"use strict";var r=n(82109),i=n(49974),o=n(40027),s=n(14995);r({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(t){var e=o(this),n=i(t,arguments.length>1?arguments[1]:void 0),r=s(e,(function(t,r){if(n(t,r,e))return{key:r}}),!0);return r&&r.key}})},96306:function(t,e,n){"use strict";var r=n(82109),i=n(49974),o=n(40027),s=n(14995);r({target:"Map",proto:!0,real:!0,forced:!0},{find:function(t){var e=o(this),n=i(t,arguments.length>1?arguments[1]:void 0),r=s(e,(function(t,r){if(n(t,r,e))return{value:t}}),!0);return r&&r.value}})},74592:function(t,e,n){"use strict";var r=n(82109),i=n(46465),o=n(40027),s=n(14995);r({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(t){return!0===s(o(this),(function(e){if(i(e,t))return!0}),!0)}})},58276:function(t,e,n){"use strict";var r=n(82109),i=n(40027),o=n(14995);r({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(t){var e=o(i(this),(function(e,n){if(e===t)return{key:n}}),!0);return e&&e.key}})},35082:function(t,e,n){"use strict";var r=n(82109),i=n(49974),o=n(40027),s=n(75706),a=n(14995),c=s.Map,l=s.set;r({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(t){var e=o(this),n=i(t,arguments.length>1?arguments[1]:void 0),r=new c;return a(e,(function(t,i){l(r,n(t,i,e),t)})),r}})},12813:function(t,e,n){"use strict";var r=n(82109),i=n(49974),o=n(40027),s=n(75706),a=n(14995),c=s.Map,l=s.set;r({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(t){var e=o(this),n=i(t,arguments.length>1?arguments[1]:void 0),r=new c;return a(e,(function(t,i){l(r,i,n(t,i,e))})),r}})},18222:function(t,e,n){"use strict";var r=n(82109),i=n(40027),o=n(20408),s=n(75706).set;r({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(t){for(var e=i(this),n=arguments.length,r=0;r<n;)o(arguments[r++],(function(t,n){s(e,t,n)}),{AS_ENTRIES:!0});return e}})},38563:function(t,e,n){"use strict";var r=n(82109),i=n(19662),o=n(40027),s=n(14995),a=TypeError;r({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(t){var e=o(this),n=arguments.length<2,r=n?void 0:arguments[1];if(i(t),s(e,(function(i,o){n?(n=!1,r=i):r=t(r,i,o,e)})),n)throw new a("Reduce of empty map with no initial value");return r}})},50336:function(t,e,n){"use strict";var r=n(82109),i=n(49974),o=n(40027),s=n(14995);r({target:"Map",proto:!0,real:!0,forced:!0},{some:function(t){var e=o(this),n=i(t,arguments.length>1?arguments[1]:void 0);return!0===s(e,(function(t,r){if(n(t,r,e))return!0}),!0)}})},7512:function(t,e,n){"use strict";var r=n(82109),i=n(19662),o=n(40027),s=n(75706),a=TypeError,c=s.get,l=s.has,u=s.set;r({target:"Map",proto:!0,real:!0,forced:!0},{update:function(t,e){var n=o(this),r=arguments.length;i(e);var s=l(n,t);if(!s&&r<3)throw new a("Updating absent value");var h=s?c(n,t):i(r>2?arguments[2]:void 0)(t,n);return u(n,t,e(h,t,n)),n}})},88921:function(t,e,n){"use strict";var r=n(82109),i=n(88999),o=n(79405).add;r({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=i(this),e=0,n=arguments.length;e<n;e++)o(t,arguments[e]);return t}})},96248:function(t,e,n){"use strict";var r=n(82109),i=n(88999),o=n(79405).remove;r({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t,e=i(this),n=!0,r=0,s=arguments.length;r<s;r++)t=o(e,arguments[r]),n=n&&t;return!!n}})},13599:function(t,e,n){"use strict";var r=n(82109),i=n(46916),o=n(45965),s=n(37075);r({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(t){return i(s,this,o(t))}})},11477:function(t,e,n){"use strict";var r=n(82109),i=n(49974),o=n(88999),s=n(87758);r({target:"Set",proto:!0,real:!0,forced:!0},{every:function(t){var e=o(this),n=i(t,arguments.length>1?arguments[1]:void 0);return!1!==s(e,(function(t){if(!n(t,t,e))return!1}),!0)}})},64362:function(t,e,n){"use strict";var r=n(82109),i=n(49974),o=n(88999),s=n(79405),a=n(87758),c=s.Set,l=s.add;r({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(t){var e=o(this),n=i(t,arguments.length>1?arguments[1]:void 0),r=new c;return a(e,(function(t){n(t,t,e)&&l(r,t)})),r}})},15389:function(t,e,n){"use strict";var r=n(82109),i=n(49974),o=n(88999),s=n(87758);r({target:"Set",proto:!0,real:!0,forced:!0},{find:function(t){var e=o(this),n=i(t,arguments.length>1?arguments[1]:void 0),r=s(e,(function(t){if(n(t,t,e))return{value:t}}),!0);return r&&r.value}})},90401:function(t,e,n){"use strict";var r=n(82109),i=n(46916),o=n(45965),s=n(81920);r({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(t){return i(s,this,o(t))}})},45164:function(t,e,n){"use strict";var r=n(82109),i=n(46916),o=n(45965),s=n(78239);r({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(t){return i(s,this,o(t))}})},91238:function(t,e,n){"use strict";var r=n(82109),i=n(46916),o=n(45965),s=n(49180);r({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(t){return i(s,this,o(t))}})},54837:function(t,e,n){"use strict";var r=n(82109),i=n(46916),o=n(45965),s=n(10107);r({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(t){return i(s,this,o(t))}})},87485:function(t,e,n){"use strict";var r=n(82109),i=n(1702),o=n(88999),s=n(87758),a=n(41340),c=i([].join),l=i([].push);r({target:"Set",proto:!0,real:!0,forced:!0},{join:function(t){var e=o(this),n=void 0===t?",":a(t),r=[];return s(e,(function(t){l(r,t)})),c(r,n)}})},56767:function(t,e,n){"use strict";var r=n(82109),i=n(49974),o=n(88999),s=n(79405),a=n(87758),c=s.Set,l=s.add;r({target:"Set",proto:!0,real:!0,forced:!0},{map:function(t){var e=o(this),n=i(t,arguments.length>1?arguments[1]:void 0),r=new c;return a(e,(function(t){l(r,n(t,t,e))})),r}})},76651:function(t,e,n){"use strict";var r=n(82109),i=n(19662),o=n(88999),s=n(87758),a=TypeError;r({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(t){var e=o(this),n=arguments.length<2,r=n?void 0:arguments[1];if(i(t),s(e,(function(i){n?(n=!1,r=i):r=t(r,i,i,e)})),n)throw new a("Reduce of empty set with no initial value");return r}})},61437:function(t,e,n){"use strict";var r=n(82109),i=n(49974),o=n(88999),s=n(87758);r({target:"Set",proto:!0,real:!0,forced:!0},{some:function(t){var e=o(this),n=i(t,arguments.length>1?arguments[1]:void 0);return!0===s(e,(function(t){if(n(t,t,e))return!0}),!0)}})},35285:function(t,e,n){"use strict";var r=n(82109),i=n(46916),o=n(45965),s=n(98506);r({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(t){return i(s,this,o(t))}})},39865:function(t,e,n){"use strict";var r=n(82109),i=n(46916),o=n(45965),s=n(39391);r({target:"Set",proto:!0,real:!0,forced:!0},{union:function(t){return i(s,this,o(t))}})},54747:function(t,e,n){"use strict";var r=n(17854),i=n(48324),o=n(98509),s=n(18533),a=n(68880),c=function(t){if(t&&t.forEach!==s)try{a(t,"forEach",s)}catch(e){t.forEach=s}};for(var l in i)i[l]&&c(r[l]&&r[l].prototype);c(o)},33948:function(t,e,n){"use strict";var r=n(17854),i=n(48324),o=n(98509),s=n(66992),a=n(68880),c=n(5112),l=c("iterator"),u=c("toStringTag"),h=s.values,p=function(t,e){if(t){if(t[l]!==h)try{a(t,l,h)}catch(e){t[l]=h}if(t[u]||a(t,u,e),i[e])for(var n in s)if(t[n]!==s[n])try{a(t,n,s[n])}catch(e){t[n]=s[n]}}};for(var f in i)p(r[f]&&r[f].prototype,f);p(o,"DOMTokenList")},96815:function(t,e,n){"use strict";var r=n(82109),i=n(17854),o=n(17152)(i.setInterval,!0);r({global:!0,bind:!0,forced:i.setInterval!==o},{setInterval:o})},88417:function(t,e,n){"use strict";var r=n(82109),i=n(17854),o=n(17152)(i.setTimeout,!0);r({global:!0,bind:!0,forced:i.setTimeout!==o},{setTimeout:o})},32564:function(t,e,n){"use strict";n(96815),n(88417)},83753:function(t,e,n){"use strict";var r=n(82109),i=n(46916);r({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return i(URL.prototype.toString,this)}})},14286:function(t,e,n){"use strict";n.r(e);var r=n(8081),i=n.n(r),o=n(23645),s=n.n(o)()(i());s.push([t.id,".tippy-box[data-animation=scale][data-placement^=top]{transform-origin:bottom}.tippy-box[data-animation=scale][data-placement^=bottom]{transform-origin:top}.tippy-box[data-animation=scale][data-placement^=left]{transform-origin:right}.tippy-box[data-animation=scale][data-placement^=right]{transform-origin:left}.tippy-box[data-animation=scale][data-state=hidden]{transform:scale(.5);opacity:0}",""]),e.default=s},34660:function(t,e,n){"use strict";n.r(e);var r=n(8081),i=n.n(r),o=n(23645),s=n.n(o)()(i());s.push([t.id,'.tippy-box[data-animation=fade][data-state=hidden]{opacity:0}[data-tippy-root]{max-width:calc(100vw - 10px)}.tippy-box{position:relative;background-color:#333;color:#fff;border-radius:4px;font-size:14px;line-height:1.4;white-space:normal;outline:0;transition-property:transform,visibility,opacity}.tippy-box[data-placement^=top]>.tippy-arrow{bottom:0}.tippy-box[data-placement^=top]>.tippy-arrow:before{bottom:-7px;left:0;border-width:8px 8px 0;border-top-color:initial;transform-origin:center top}.tippy-box[data-placement^=bottom]>.tippy-arrow{top:0}.tippy-box[data-placement^=bottom]>.tippy-arrow:before{top:-7px;left:0;border-width:0 8px 8px;border-bottom-color:initial;transform-origin:center bottom}.tippy-box[data-placement^=left]>.tippy-arrow{right:0}.tippy-box[data-placement^=left]>.tippy-arrow:before{border-width:8px 0 8px 8px;border-left-color:initial;right:-7px;transform-origin:center left}.tippy-box[data-placement^=right]>.tippy-arrow{left:0}.tippy-box[data-placement^=right]>.tippy-arrow:before{left:-7px;border-width:8px 8px 8px 0;border-right-color:initial;transform-origin:center right}.tippy-box[data-inertia][data-state=visible]{transition-timing-function:cubic-bezier(.54,1.5,.38,1.11)}.tippy-arrow{width:16px;height:16px;color:#333}.tippy-arrow:before{content:"";position:absolute;border-color:transparent;border-style:solid}.tippy-content{position:relative;padding:5px 9px;z-index:1}',""]),e.default=s},26607:function(t,e,n){"use strict";n.r(e);var r=n(8081),i=n.n(r),o=n(23645),s=n.n(o)()(i());s.push([t.id,"input[type='number']::-webkit-inner-spin-button,\ninput[type='number']::-webkit-outer-spin-button {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n}\n\ninput[type='number'] {\n  -moz-appearance: textfield;\n}\n",""]),e.default=s},86646:function(t,e,n){"use strict";n.r(e);var r=n(8081),i=n.n(r),o=n(23645),s=n.n(o),a=n(61667),c=n.n(a),l=new URL(n(24397),n.b),u=s()(i()),h=c()(l);u.push([t.id,'div.popup-dialog{position:fixed;background:#fff;z-index:2000;top:0;left:0;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}div.popup-dialog i.middle{vertical-align:middle}div.popup-dialog.rounded{border-radius:5px}div.popup-dialog.shadow{-webkit-box-shadow:0 2px 10px 5px rgba(0,0,0,.5);box-shadow:0 2px 10px 5px rgba(0,0,0,.5)}div.popup-dialog>div.dialog-title{height:40px;line-height:39px;padding:0 20px 0 10px;font-size:14px;letter-spacing:1px;font-weight:bold;text-shadow:1px 1px 1px rgba(0,0,0,.2);cursor:move;overflow:hidden}div.popup-dialog>div.dialog-title.dialog-title-focus:not(.no-focus){background:rgba(0,0,0,.1)}div.popup-dialog>div.dialog-body{margin:5px;padding:0;overflow:auto;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}div.popup-dialog>div.dialog-close{position:absolute;top:12px;right:12px;width:16px;height:16px}div.popup-dialog>div.dialog-close::after{position:absolute;top:-2px;left:0;cursor:pointer;font-family:"Font Awesome 5 Pro";content:"";font-size:14px;font-style:normal;font-weight:600;padding:0;margin:0}div.popup-dialog>div.dialog-resizer{position:absolute;bottom:1px;right:1px;width:9px;height:9px;background:rgba(0,0,0,0) url('+h+") no-repeat center center;cursor:se-resize}div.popup-dialog>div.dialog-buttons{margin:0;padding-top:5px;height:40px;line-height:22px;text-align:center;overflow:hidden}div.popup-dialog>div.dialog-buttons.big{height:50px}div.popup-dialog>div.dialog-buttons>button:not(.block){margin:0 .355rem}div.popup-dialog.bump{-webkit-animation:do-bump .35s ease;animation:do-bump .35s ease}div.popup-dialog.fadeout{-webkit-animation:do-fadeout .2s linear;animation:do-fadeout .2s linear}div.popup-dialog.fadein{-webkit-animation:do-fadein .2s ease;animation:do-fadein .2s ease}div.popup-dialog.zoomin{-webkit-animation:do-zoomin .2s ease;animation:do-zoomin .2s ease}@-webkit-keyframes do-bump{0%{-webkit-transform:scale(1.2, 1.2);transform:scale(1.2, 1.2);opacity:.7}50%{-webkit-transform:scale(0.9, 0.9);transform:scale(0.9, 0.9);opacity:.9}100%{-webkit-transform:scale(1, 1);transform:scale(1, 1);opacity:1}}@keyframes do-bump{0%{-webkit-transform:scale(1.2, 1.2);transform:scale(1.2, 1.2);opacity:.7}50%{-webkit-transform:scale(0.9, 0.9);transform:scale(0.9, 0.9);opacity:.9}100%{-webkit-transform:scale(1, 1);transform:scale(1, 1);opacity:1}}@-webkit-keyframes do-zoomin{0%{-webkit-transform:scale(1.5, 1.5);transform:scale(1.5, 1.5);opacity:.1}100%{-webkit-transform:scale(1, 1);transform:scale(1, 1);opacity:1}}@keyframes do-zoomin{0%{-webkit-transform:scale(1.5, 1.5);transform:scale(1.5, 1.5);opacity:.1}100%{-webkit-transform:scale(1, 1);transform:scale(1, 1);opacity:1}}@-webkit-keyframes do-fadein{0%{-webkit-transform:scale(0.5, 0.5);transform:scale(0.5, 0.5);opacity:.1}100%{-webkit-transform:scale(1, 1);transform:scale(1, 1);opacity:1}}@keyframes do-fadein{0%{-webkit-transform:scale(0.5, 0.5);transform:scale(0.5, 0.5);opacity:.1}100%{-webkit-transform:scale(1, 1);transform:scale(1, 1);opacity:1}}@-webkit-keyframes do-fadeout{0%{-webkit-transform:scale(1, 1);transform:scale(1, 1);opacity:1}100%{-webkit-transform:scale(0.5, 0.5);transform:scale(0.5, 0.5);opacity:.1}}@keyframes do-fadeout{0%{-webkit-transform:scale(1, 1);transform:scale(1, 1);opacity:1}100%{-webkit-transform:scale(0.5, 0.5);transform:scale(0.5, 0.5);opacity:.1}}",""]),e.default=u},89650:function(t,e,n){"use strict";n.r(e);var r=n(8081),i=n.n(r),o=n(23645),s=n.n(o)()(i());s.push([t.id,'div.ploading{position:fixed;top:0;left:0;width:100%;height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;visibility:hidden;overflow:hidden;line-height:normal;line-height:initial}div.ploading mask{z-index:0;position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.01)}div.ploading .cancel{position:absolute;top:10px;right:10px;color:#fa1a1a;cursor:pointer;font-weight:900;display:none}div.ploading .cube-folding{width:50px;height:50px;display:inline-block;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);font-size:0}div.ploading .cube-folding span{position:relative;width:25px;height:25px;-webkit-transform:scale(1.1);-ms-transform:scale(1.1);transform:scale(1.1);display:inline-block}div.ploading .cube-folding span::before{content:"";background-color:#fd5d93;position:absolute;left:0;top:0;display:block;width:25px;height:25px;-webkit-transform-origin:100% 100%;-ms-transform-origin:100% 100%;transform-origin:100% 100%;-webkit-animation:folding 2.5s infinite linear both;animation:folding 2.5s infinite linear both}div.ploading .cube-folding .leaf2{-webkit-transform:rotateZ(90deg) scale(1.1);-ms-transform:rotate(90deg) scale(1.1);transform:rotateZ(90deg) scale(1.1)}div.ploading .cube-folding .leaf2::before{-webkit-animation-delay:.3s;animation-delay:.3s;background-color:#1d8cf8}div.ploading .cube-folding .leaf3{-webkit-transform:rotateZ(270deg) scale(1.1);-ms-transform:rotate(270deg) scale(1.1);transform:rotateZ(270deg) scale(1.1)}div.ploading .cube-folding .leaf3::before{-webkit-animation-delay:.9s;animation-delay:.9s;background-color:#00bf9a}div.ploading .cube-folding .leaf4{-webkit-transform:rotateZ(180deg) scale(1.1);-ms-transform:rotate(180deg) scale(1.1);transform:rotateZ(180deg) scale(1.1)}div.ploading .cube-folding .leaf4::before{-webkit-animation-delay:.6s;animation-delay:.6s;background-color:#ff8d72}div.ploading .circle-loading{width:50px;height:70px;display:inline-block}div.ploading .circle-loading:before{content:"";background-color:rgba(0,0,0,0);border:5px solid rgba(0,183,229,.9);opacity:.9;border-right:5px solid rgba(0,0,0,0);border-left:5px solid rgba(0,0,0,0);border-radius:50px;-webkit-box-shadow:0 0 35px #2187e7;box-shadow:0 0 35px #2187e7;width:50px;height:50px;-webkit-animation:spinPulse 1s infinite linear;animation:spinPulse 1s infinite linear;margin:-25px 0 0 -25px;position:absolute;top:50%;left:50%}div.ploading .circle-loading:after{content:"";background-color:rgba(0,0,0,0);border:5px solid rgba(0,183,229,.9);opacity:.9;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-radius:50px;-webkit-box-shadow:0 0 15px #2187e7;box-shadow:0 0 15px #2187e7;width:30px;height:30px;-webkit-animation:spinoffPulse 1s infinite linear;animation:spinoffPulse 1s infinite linear;margin:-15px 0 0 -15px;position:absolute;top:50%;left:50%}div.ploading .cube-wrapper{position:fixed;width:100px;width:100%;height:100px;text-align:center}div.ploading .cube-wrapper .loading{font-size:12px;letter-spacing:.1em;display:block;color:#fff;position:relative;top:25px;white-space:nowrap;-webkit-animation:text .5s ease infinite alternate;animation:text .5s ease infinite alternate}div.ploading .cube-wrapper .progress{width:300px;margin:0 auto;top:40px;display:none}div.ploading .cube-wrapper .text{color:#fff;position:relative;margin:0 auto;width:300px;top:45px;display:none}@-webkit-keyframes folding{0%,10%{-webkit-transform:perspective(140px) rotateX(-180deg);transform:perspective(140px) rotateX(-180deg);opacity:0}25%,75%{-webkit-transform:perspective(140px) rotateX(0deg);transform:perspective(140px) rotateX(0deg);opacity:1}90%,100%{-webkit-transform:perspective(140px) rotateY(180deg);transform:perspective(140px) rotateY(180deg);opacity:0}}@keyframes folding{0%,10%{-webkit-transform:perspective(140px) rotateX(-180deg);transform:perspective(140px) rotateX(-180deg);opacity:0}25%,75%{-webkit-transform:perspective(140px) rotateX(0deg);transform:perspective(140px) rotateX(0deg);opacity:1}90%,100%{-webkit-transform:perspective(140px) rotateY(180deg);transform:perspective(140px) rotateY(180deg);opacity:0}}@-webkit-keyframes text{100%{top:35px}}@keyframes text{100%{top:35px}}@-webkit-keyframes spinPulse{0%{-webkit-transform:rotate(160deg);transform:rotate(160deg);opacity:0;-webkit-box-shadow:0 0 1px #2187e7;box-shadow:0 0 1px #2187e7}50%{-webkit-transform:rotate(145deg);transform:rotate(145deg);opacity:1}100%{-webkit-transform:rotate(-320deg);transform:rotate(-320deg);opacity:0}}@keyframes spinPulse{0%{-webkit-transform:rotate(160deg);transform:rotate(160deg);opacity:0;-webkit-box-shadow:0 0 1px #2187e7;box-shadow:0 0 1px #2187e7}50%{-webkit-transform:rotate(145deg);transform:rotate(145deg);opacity:1}100%{-webkit-transform:rotate(-320deg);transform:rotate(-320deg);opacity:0}}@-webkit-keyframes spinoffPulse{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spinoffPulse{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}div.cloading{position:fixed;top:0;left:0;width:100%;height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;visibility:hidden;line-height:normal;line-height:initial}div.cloading mask{z-index:0;position:fixed;top:0;left:0;width:100%;height:100%;opacity:.1;background-color:#000}div.cloading .cancel{position:absolute;top:10px;right:10px;color:#fa1a1a;cursor:pointer;font-weight:900;display:none}div.cloading .spin-wrapper{text-align:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}div.cloading .spin-wrapper .spin-frame{height:100px;width:100%;overflow:visible;-webkit-box-flex:1;-ms-flex:1;flex:1;-webkit-animation:spin 5s linear infinite;animation:spin 5s linear infinite}div.cloading .spin-wrapper .spin-frame .disc{position:absolute;top:0;left:0;right:0;bottom:0;width:10px;height:100px;margin:auto}div.cloading .spin-wrapper .spin-frame .disc:before{content:"";position:absolute;width:20px;height:20px;border-radius:100%}div.cloading .spin-wrapper .loading{font-size:12px;letter-spacing:.1em;display:block;color:#fff;position:relative;top:20px;white-space:nowrap;-webkit-animation:text .5s ease infinite alternate;animation:text .5s ease infinite alternate}div.cloading .spin-wrapper .progress{width:300px;margin:0 auto;top:40px;display:none}div.cloading .spin-wrapper .text{color:#fff;position:relative;margin:0 auto;width:300px;top:45px;display:none}@-webkit-keyframes spin{100%{-webkit-transform:rotate(-360deg);transform:rotate(-360deg)}}@keyframes spin{100%{-webkit-transform:rotate(-360deg);transform:rotate(-360deg)}}div.cloading .disc:not(ul):nth-child(1),div.cloading .disc:not(li):nth-child(1){-webkit-transform:rotate(40deg);-ms-transform:rotate(40deg);transform:rotate(40deg)}div.cloading .disc:not(ul):nth-child(1):before,div.cloading .disc:not(li):nth-child(1):before{background:#f0a;-webkit-animation:anima 1s linear .1s infinite;animation:anima 1s linear .1s infinite}@-webkit-keyframes anima{50%{background:rgba(0,0,0,0)}}@keyframes anima{50%{background:rgba(0,0,0,0)}}div.cloading .disc:not(ul):nth-child(2),div.cloading .disc:not(li):nth-child(2){-webkit-transform:rotate(80deg);-ms-transform:rotate(80deg);transform:rotate(80deg)}div.cloading .disc:not(ul):nth-child(2):before,div.cloading .disc:not(li):nth-child(2):before{background:#a0f;-webkit-animation:anima 1s linear .2s infinite;animation:anima 1s linear .2s infinite}@keyframes anima{50%{background:rgba(0,0,0,0)}}div.cloading .disc:not(ul):nth-child(3),div.cloading .disc:not(li):nth-child(3){-webkit-transform:rotate(120deg);-ms-transform:rotate(120deg);transform:rotate(120deg)}div.cloading .disc:not(ul):nth-child(3):before,div.cloading .disc:not(li):nth-child(3):before{background:blue;-webkit-animation:anima 1s linear .3s infinite;animation:anima 1s linear .3s infinite}@keyframes anima{50%{background:rgba(0,0,0,0)}}div.cloading .disc:not(ul):nth-child(4),div.cloading .disc:not(li):nth-child(4){-webkit-transform:rotate(160deg);-ms-transform:rotate(160deg);transform:rotate(160deg)}div.cloading .disc:not(ul):nth-child(4):before,div.cloading .disc:not(li):nth-child(4):before{background:#0af;-webkit-animation:anima 1s linear .4s infinite;animation:anima 1s linear .4s infinite}@keyframes anima{50%{background:rgba(0,0,0,0)}}div.cloading .disc:not(ul):nth-child(5),div.cloading .disc:not(li):nth-child(5){-webkit-transform:rotate(200deg);-ms-transform:rotate(200deg);transform:rotate(200deg)}div.cloading .disc:not(ul):nth-child(5):before,div.cloading .disc:not(li):nth-child(5):before{background:#0fa;-webkit-animation:anima 1s linear .5s infinite;animation:anima 1s linear .5s infinite}@keyframes anima{50%{background:rgba(0,0,0,0)}}div.cloading .disc:not(ul):nth-child(6),div.cloading .disc:not(li):nth-child(6){-webkit-transform:rotate(240deg);-ms-transform:rotate(240deg);transform:rotate(240deg)}div.cloading .disc:not(ul):nth-child(6):before,div.cloading .disc:not(li):nth-child(6):before{background:lime;-webkit-animation:anima 1s linear .6s infinite;animation:anima 1s linear .6s infinite}@keyframes anima{50%{background:rgba(0,0,0,0)}}div.cloading .disc:not(ul):nth-child(7),div.cloading .disc:not(li):nth-child(7){-webkit-transform:rotate(280deg);-ms-transform:rotate(280deg);transform:rotate(280deg)}div.cloading .disc:not(ul):nth-child(7):before,div.cloading .disc:not(li):nth-child(7):before{background:#af0;-webkit-animation:anima 1s linear .7s infinite;animation:anima 1s linear .7s infinite}@keyframes anima{50%{background:rgba(0,0,0,0)}}div.cloading .disc:not(ul):nth-child(8),div.cloading .disc:not(li):nth-child(8){-webkit-transform:rotate(320deg);-ms-transform:rotate(320deg);transform:rotate(320deg)}div.cloading .disc:not(ul):nth-child(8):before,div.cloading .disc:not(li):nth-child(8):before{background:#fa0;-webkit-animation:anima 1s linear .8s infinite;animation:anima 1s linear .8s infinite}@keyframes anima{50%{background:rgba(0,0,0,0)}}div.cloading .disc:not(ul):nth-child(9),div.cloading .disc:not(li):nth-child(9){-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg)}div.cloading .disc:not(ul):nth-child(9):before,div.cloading .disc:not(li):nth-child(9):before{background:red;-webkit-animation:anima 1s linear .9s infinite;animation:anima 1s linear .9s infinite}@keyframes anima{50%{background:rgba(0,0,0,0)}}',""]),e.default=s},73397:function(t,e,n){"use strict";n.r(e);var r=n(8081),i=n.n(r),o=n(23645),s=n.n(o)()(i());s.push([t.id,"div.pslide,pslide{position:fixed;top:0;left:0;width:100%;height:100%;z-index:10;display:-webkit-box;display:-ms-flexbox;display:flex;visibility:hidden;-webkit-transition:visibility 0s .6s;transition:visibility 0s .6s;pointer-events:none}div.pslide>*,pslide>*{pointer-events:initial}div.pslide .closable,pslide .closable{cursor:pointer}div.pslide>mask,div.pslide>.mask,pslide>mask,pslide>.mask{z-index:0;position:fixed;top:0;left:0;width:100%;height:100%;opacity:.5;background-color:#000}div.pslide>container-right,div.pslide>.container-right,pslide>container-right,pslide>.container-right{z-index:10;position:fixed;top:0;right:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:50%;overflow:hidden;height:100%;-webkit-transition:-webkit-transform .3s .3s;transition:-webkit-transform .3s .3s;transition:transform .3s .3s;transition:transform .3s .3s, -webkit-transform .3s .3s;-webkit-transform:translate3d(100%, 0, 0);transform:translate3d(100%, 0, 0)}div.pslide>container-right.shadow,div.pslide>.container-right.shadow,pslide>container-right.shadow,pslide>.container-right.shadow{-webkit-box-shadow:none;box-shadow:none}div.pslide>container-right>header,div.pslide>container-right>footer,div.pslide>container-right>.header,div.pslide>container-right>.footer,div.pslide>.container-right>header,div.pslide>.container-right>footer,div.pslide>.container-right>.header,div.pslide>.container-right>.footer,pslide>container-right>header,pslide>container-right>footer,pslide>container-right>.header,pslide>container-right>.footer,pslide>.container-right>header,pslide>.container-right>footer,pslide>.container-right>.header,pslide>.container-right>.footer{overflow:hidden;padding:16px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}div.pslide>container-right>header,div.pslide>container-right>.header,div.pslide>.container-right>header,div.pslide>.container-right>.header,pslide>container-right>header,pslide>container-right>.header,pslide>.container-right>header,pslide>.container-right>.header{border-bottom:1px solid rgba(0,0,0,.1)}div.pslide>container-right>footer,div.pslide>container-right>.footer,div.pslide>.container-right>footer,div.pslide>.container-right>.footer,pslide>container-right>footer,pslide>container-right>.footer,pslide>.container-right>footer,pslide>.container-right>.footer{border-top:1px solid rgba(0,0,0,.1)}div.pslide>container-right>content,div.pslide>container-right>.content,div.pslide>.container-right>content,div.pslide>.container-right>.content,pslide>container-right>content,pslide>container-right>.content,pslide>.container-right>content,pslide>.container-right>.content{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;overflow:auto;padding:20px;height:100%}div.pslide>container-left,div.pslide>.container-left,pslide>container-left,pslide>.container-left{z-index:10;position:fixed;top:0;left:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:50%;overflow:hidden;height:100%;-webkit-transition:-webkit-transform .3s .3s;transition:-webkit-transform .3s .3s;transition:transform .3s .3s;transition:transform .3s .3s, -webkit-transform .3s .3s;-webkit-transform:translate3d(-100%, 0, 0);transform:translate3d(-100%, 0, 0)}div.pslide>container-left.shadow,div.pslide>.container-left.shadow,pslide>container-left.shadow,pslide>.container-left.shadow{-webkit-box-shadow:none;box-shadow:none}div.pslide>container-left>header,div.pslide>container-left>footer,div.pslide>container-left>.header,div.pslide>container-left>.footer,div.pslide>.container-left>header,div.pslide>.container-left>footer,div.pslide>.container-left>.header,div.pslide>.container-left>.footer,pslide>container-left>header,pslide>container-left>footer,pslide>container-left>.header,pslide>container-left>.footer,pslide>.container-left>header,pslide>.container-left>footer,pslide>.container-left>.header,pslide>.container-left>.footer{overflow:hidden;padding:16px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}div.pslide>container-left>content,div.pslide>container-left>.content,div.pslide>.container-left>content,div.pslide>.container-left>.content,pslide>container-left>content,pslide>container-left>.content,pslide>.container-left>content,pslide>.container-left>.content{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;overflow:auto;padding:20px;height:100%}div.pslide.visible,pslide.visible{visibility:visible;-webkit-transition:visibility 0s 0s;transition:visibility 0s 0s}div.pslide.visible container-right,div.pslide.visible container-left,div.pslide.visible .container-right,div.pslide.visible .container-left,pslide.visible container-right,pslide.visible container-left,pslide.visible .container-right,pslide.visible .container-left{-webkit-transform:translate3d(0, 0, 0) !important;transform:translate3d(0, 0, 0) !important}div.pslide.visible container-right,div.pslide.visible container-left,div.pslide.visible .container-right,div.pslide.visible .container-left,pslide.visible container-right,pslide.visible container-left,pslide.visible .container-right,pslide.visible .container-left{-webkit-transition-delay:0s;transition-delay:0s}div.pslide.visible-right,pslide.visible-right{visibility:visible;-webkit-transition:visibility 0s 0s;transition:visibility 0s 0s}div.pslide.visible-right container-right,div.pslide.visible-right .container-right,pslide.visible-right container-right,pslide.visible-right .container-right{-webkit-transform:translate3d(0, 0, 0) !important;transform:translate3d(0, 0, 0) !important}div.pslide.visible-right container-right,div.pslide.visible-right .container-right,pslide.visible-right container-right,pslide.visible-right .container-right{-webkit-transition-delay:0s;transition-delay:0s}div.pslide.visible-left,pslide.visible-left{visibility:visible;-webkit-transition:visibility 0s 0s;transition:visibility 0s 0s}div.pslide.visible-left container-left,div.pslide.visible-left .container-left,pslide.visible-left container-left,pslide.visible-left .container-left{-webkit-transform:translate3d(0, 0, 0) !important;transform:translate3d(0, 0, 0) !important}div.pslide.visible-left container-left,div.pslide.visible-left .container-left,pslide.visible-left container-left,pslide.visible-left .container-left{-webkit-transition-delay:0s;transition-delay:0s}",""]),e.default=s},23645:function(t){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,i,o){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(r)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(s[c]=!0)}for(var l=0;l<t.length;l++){var u=[].concat(t[l]);r&&s[u[0]]||(void 0!==o&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=o),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),e.push(u))}},e}},61667:function(t){"use strict";t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},8081:function(t){"use strict";t.exports=function(t){return t[1]}},14792:function(t,e,n){"use strict";var r=Array.prototype;r.slice,r.map},91077:function(t,e,n){"use strict";function r(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}n.d(e,{Z:function(){return r}})},44355:function(t,e,n){"use strict";var r=n(91077),i=(0,n(29173).Z)(r.Z);i.right,i.left},29173:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(91077);function i(t){var e;return 1===t.length&&(e=t,t=function(t,n){return(0,r.Z)(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}},902:function(t,e,n){"use strict";n(14792),n(44355),n(67614)},80091:function(t,e,n){"use strict";n.d(e,{TS:function(){return r.Z}});n(44355),n(902),n(54081);var r=n(83502);n(67614)},83502:function(t,e,n){"use strict";function r(t){for(var e,n,r,i=t.length,o=-1,s=0;++o<i;)s+=t[o].length;for(n=new Array(s);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--s]=r[e];return n}n.d(e,{Z:function(){return r}})},54081:function(t,e,n){"use strict";n(14792)},67614:function(t,e,n){"use strict";Math.sqrt(50),Math.sqrt(10),Math.sqrt(2)},27140:function(t,e,n){"use strict";n.d(e,{aM:function(){return r.Z}});n(59859),n(75797),n(88911),n(34881),n(63920),n(2655),n(52091),n(86876),n(44536),n(32174),n(35545),n(33487),n(60261),n(84699);var r=n(58271);n(72051),n(14970),n(75053),n(11261),n(40916),n(93437),n(4308),n(23007),n(38839),n(50435),n(30378),n(17421),n(51613),n(23311),n(20071)},18227:function(t,e,n){"use strict";function r(){return new i}function i(){this.reset()}n.d(e,{Z:function(){return r}}),i.prototype={constructor:i,reset:function(){this.s=this.t=0},add:function(t){s(o,t,this.t),s(this,o.s,this.s),this.s?this.t+=o.t:this.s=o.t},valueOf:function(){return this.s}};var o=new i;function s(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}},59859:function(t,e,n){"use strict";n.d(e,{L9:function(){return h},gL:function(){return f}});var r,i,o,s,a,c=n(18227),l=n(55350),u=n(11344),h=(n(23311),(0,c.Z)()),p=(0,c.Z)(),f={point:u.Z,lineStart:u.Z,lineEnd:u.Z,polygonStart:function(){h.reset(),f.lineStart=d,f.lineEnd=g},polygonEnd:function(){var t=+h;p.add(t<0?l.BZ+t:t),this.lineStart=this.lineEnd=this.point=u.Z},sphere:function(){p.add(l.BZ)}};function d(){f.point=m}function g(){y(r,i)}function m(t,e){f.point=y,r=t,i=e,t*=l.uR,e*=l.uR,o=t,s=(0,l.mC)(e=e/2+l.pu),a=(0,l.O$)(e)}function y(t,e){t*=l.uR,e=(e*=l.uR)/2+l.pu;var n=t-o,r=n>=0?1:-1,i=r*n,c=(0,l.mC)(e),u=(0,l.O$)(e),p=a*u,f=s*c+p*(0,l.mC)(i),d=p*r*(0,l.O$)(i);h.add((0,l.fv)(d,f)),o=t,s=c,a=u}},75797:function(t,e,n){"use strict";var r=n(18227);n(59859),n(51593),n(55350),n(23311),(0,r.Z)()},51593:function(t,e,n){"use strict";n.d(e,{Og:function(){return o},T:function(){return l},T5:function(){return a},Y1:function(){return i},iJ:function(){return u},j9:function(){return s},s0:function(){return c}});var r=n(55350);function i(t){return[(0,r.fv)(t[1],t[0]),(0,r.ZR)(t[2])]}function o(t){var e=t[0],n=t[1],i=(0,r.mC)(n);return[i*(0,r.mC)(e),i*(0,r.O$)(e),(0,r.O$)(n)]}function s(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function a(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function c(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function l(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function u(t){var e=(0,r._b)(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}},88911:function(t,e,n){"use strict";var r,i,o,s,a,c,l,u,h,p=n(55350),f=n(11344),d=(n(23311),{sphere:f.Z,point:g,lineStart:y,lineEnd:x,polygonStart:function(){d.lineStart=b,d.lineEnd=w},polygonEnd:function(){d.lineStart=y,d.lineEnd=x}});function g(t,e){t*=p.uR,e*=p.uR;var n=(0,p.mC)(e);m(n*(0,p.mC)(t),n*(0,p.O$)(t),(0,p.O$)(e))}function m(t,e,n){++r,i+=(t-i)/r,o+=(e-o)/r,s+=(n-s)/r}function y(){d.point=_}function _(t,e){t*=p.uR,e*=p.uR;var n=(0,p.mC)(e);l=n*(0,p.mC)(t),u=n*(0,p.O$)(t),h=(0,p.O$)(e),d.point=v,m(l,u,h)}function v(t,e){t*=p.uR,e*=p.uR;var n=(0,p.mC)(e),r=n*(0,p.mC)(t),i=n*(0,p.O$)(t),o=(0,p.O$)(e),s=(0,p.fv)((0,p._b)((s=u*o-h*i)*s+(s=h*r-l*o)*s+(s=l*i-u*r)*s),l*r+u*i+h*o);s,s*(l+(l=r)),s*(u+(u=i)),s*(h+(h=o)),m(l,u,h)}function x(){d.point=g}function b(){d.point=E}function w(){T(a,c),d.point=g}function E(t,e){a=t,c=e,t*=p.uR,e*=p.uR,d.point=T;var n=(0,p.mC)(e);l=n*(0,p.mC)(t),u=n*(0,p.O$)(t),h=(0,p.O$)(e),m(l,u,h)}function T(t,e){t*=p.uR,e*=p.uR;var n=(0,p.mC)(e),r=n*(0,p.mC)(t),i=n*(0,p.O$)(t),o=(0,p.O$)(e),s=u*o-h*i,a=h*r-l*o,c=l*i-u*r,f=(0,p._b)(s*s+a*a+c*c),d=(0,p.ZR)(f),g=f&&-d/f;g*s,g*a,g*c,d,d*(l+(l=r)),d*(u+(u=i)),d*(h+(h=o)),m(l,u,h)}},34881:function(t,e,n){"use strict";n.d(e,{m:function(){return o}});var r=n(51593),i=n(55350);n(51613);function o(t,e,n,o,a,c){if(n){var l=(0,i.mC)(e),u=(0,i.O$)(e),h=o*n;null==a?(a=e+o*i.BZ,c=e-h/2):(a=s(l,a),c=s(l,c),(o>0?a<c:a>c)&&(a+=o*i.BZ));for(var p,f=a;o>0?f>c:f<c;f-=h)p=(0,r.Y1)([l,-u*(0,i.mC)(f),-u*(0,i.O$)(f)]),t.point(p[0],p[1])}}function s(t,e){(e=(0,r.Og)(e))[0]-=t,(0,r.iJ)(e);var n=(0,i.Kh)(-e[1]);return((-e[2]<0?-n:n)+i.BZ-i.Ho)%i.BZ}},54969:function(t,e,n){"use strict";var r=n(91778),i=n(55350);e.Z=(0,r.Z)((function(){return!0}),(function(t){var e,n=NaN,r=NaN,o=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(s,a){var c=s>0?i.pi:-i.pi,l=(0,i.Wn)(s-n);(0,i.Wn)(l-i.pi)<i.Ho?(t.point(n,r=(r+a)/2>0?i.ou:-i.ou),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(c,r),t.point(s,r),e=0):o!==c&&l>=i.pi&&((0,i.Wn)(n-o)<i.Ho&&(n-=o*i.Ho),(0,i.Wn)(s-c)<i.Ho&&(s-=c*i.Ho),r=function(t,e,n,r){var o,s,a=(0,i.O$)(t-n);return(0,i.Wn)(a)>i.Ho?(0,i.z4)(((0,i.O$)(e)*(s=(0,i.mC)(r))*(0,i.O$)(n)-(0,i.O$)(r)*(o=(0,i.mC)(e))*(0,i.O$)(t))/(o*s*a)):(e+r)/2}(n,r,s,a),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(c,r),e=0),t.point(n=s,r=a),o=c},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var o;if(null==t)o=n*i.ou,r.point(-i.pi,o),r.point(0,o),r.point(i.pi,o),r.point(i.pi,0),r.point(i.pi,-o),r.point(0,-o),r.point(-i.pi,-o),r.point(-i.pi,0),r.point(-i.pi,o);else if((0,i.Wn)(t[0]-e[0])>i.Ho){var s=t[0]<e[0]?i.pi:-i.pi;o=n*s/2,r.point(-s,o),r.point(0,o),r.point(s,o)}else r.point(e[0],e[1])}),[-i.pi,-i.ou])},38627:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(11344);function i(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:r.Z,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}},43880:function(t,e,n){"use strict";n.d(e,{Z:function(){return c}});var r=n(51593),i=n(34881),o=n(55350),s=n(55228),a=n(91778);function c(t,e){var n=(0,o.mC)(t),c=n>0,l=(0,o.Wn)(n)>o.Ho;function u(t,e){return(0,o.mC)(t)*(0,o.mC)(e)>n}function h(t,e,i){var s=(0,r.Og)(t),a=(0,r.Og)(e),c=[1,0,0],l=(0,r.T5)(s,a),u=(0,r.j9)(l,l),h=l[0],p=u-h*h;if(!p)return!i&&t;var f=n*u/p,d=-n*h/p,g=(0,r.T5)(c,l),m=(0,r.T)(c,f),y=(0,r.T)(l,d);(0,r.s0)(m,y);var _=g,v=(0,r.j9)(m,_),x=(0,r.j9)(_,_),b=v*v-x*((0,r.j9)(m,m)-1);if(!(b<0)){var w=(0,o._b)(b),E=(0,r.T)(_,(-v-w)/x);if((0,r.s0)(E,m),E=(0,r.Y1)(E),!i)return E;var T,S=t[0],k=e[0],A=t[1],M=e[1];k<S&&(T=S,S=k,k=T);var I=k-S,C=(0,o.Wn)(I-o.pi)<o.Ho;if(!C&&M<A&&(T=A,A=M,M=T),C||I<o.Ho?C?A+M>0^E[1]<((0,o.Wn)(E[0]-S)<o.Ho?A:M):A<=E[1]&&E[1]<=M:I>o.pi^(S<=E[0]&&E[0]<=k)){var O=(0,r.T)(_,(-v+w)/x);return(0,r.s0)(O,m),[E,(0,r.Y1)(O)]}}}function p(e,n){var r=c?t:o.pi-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}return(0,a.Z)(u,(function(t){var e,n,r,i,a;return{lineStart:function(){i=r=!1,a=1},point:function(f,d){var g,m=[f,d],y=u(f,d),_=c?y?0:p(f,d):y?p(f+(f<0?o.pi:-o.pi),d):0;if(!e&&(i=r=y)&&t.lineStart(),y!==r&&(!(g=h(e,m))||(0,s.Z)(e,g)||(0,s.Z)(m,g))&&(m[0]+=o.Ho,m[1]+=o.Ho,y=u(m[0],m[1])),y!==r)a=0,y?(t.lineStart(),g=h(m,e),t.point(g[0],g[1])):(g=h(e,m),t.point(g[0],g[1]),t.lineEnd()),e=g;else if(l&&e&&c^y){var v;_&n||!(v=h(m,e,!0))||(a=0,c?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!y||e&&(0,s.Z)(e,m)||t.point(m[0],m[1]),e=m,r=y,n=_},lineEnd:function(){r&&t.lineEnd(),e=null},clean:function(){return a|(i&&r)<<1}}}),(function(n,r,o,s){(0,i.m)(s,t,e,o,n,r)}),c?[0,-t]:[-o.pi,t-o.pi])}},63920:function(t,e,n){"use strict";n.d(e,{H:function(){return u}});var r=n(55350),i=n(38627),o=n(21738),s=n(6803),a=n(80091),c=1e9,l=-c;function u(t,e,n,u){function h(r,i){return t<=r&&r<=n&&e<=i&&i<=u}function p(r,i,o,s){var a=0,c=0;if(null==r||(a=f(r,o))!==(c=f(i,o))||g(r,i)<0^o>0)do{s.point(0===a||3===a?t:n,a>1?u:e)}while((a=(a+o+4)%4)!==c);else s.point(i[0],i[1])}function f(i,o){return(0,r.Wn)(i[0]-t)<r.Ho?o>0?0:3:(0,r.Wn)(i[0]-n)<r.Ho?o>0?2:1:(0,r.Wn)(i[1]-e)<r.Ho?o>0?1:0:o>0?3:2}function d(t,e){return g(t.x,e.x)}function g(t,e){var n=f(t,1),r=f(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(r){var f,g,m,y,_,v,x,b,w,E,T,S=r,k=(0,i.Z)(),A={point:M,lineStart:function(){A.point=I,g&&g.push(m=[]);E=!0,w=!1,x=b=NaN},lineEnd:function(){f&&(I(y,_),v&&w&&k.rejoin(),f.push(k.result()));A.point=M,w&&S.lineEnd()},polygonStart:function(){S=k,f=[],g=[],T=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,r=g.length;n<r;++n)for(var i,o,s=g[n],a=1,c=s.length,l=s[0],h=l[0],p=l[1];a<c;++a)i=h,o=p,h=(l=s[a])[0],p=l[1],o<=u?p>u&&(h-i)*(u-o)>(p-o)*(t-i)&&++e:p<=u&&(h-i)*(u-o)<(p-o)*(t-i)&&--e;return e}(),n=T&&e,i=(f=(0,a.TS)(f)).length;(n||i)&&(r.polygonStart(),n&&(r.lineStart(),p(null,null,1,r),r.lineEnd()),i&&(0,s.Z)(f,d,e,p,r),r.polygonEnd());S=r,f=g=m=null}};function M(t,e){h(t,e)&&S.point(t,e)}function I(r,i){var s=h(r,i);if(g&&m.push([r,i]),E)y=r,_=i,v=s,E=!1,s&&(S.lineStart(),S.point(r,i));else if(s&&w)S.point(r,i);else{var a=[x=Math.max(l,Math.min(c,x)),b=Math.max(l,Math.min(c,b))],p=[r=Math.max(l,Math.min(c,r)),i=Math.max(l,Math.min(c,i))];(0,o.Z)(a,p,t,e,n,u)?(w||(S.lineStart(),S.point(a[0],a[1])),S.point(p[0],p[1]),s||S.lineEnd(),T=!1):s&&(S.lineStart(),S.point(r,i),T=!1)}x=r,b=i,w=s}return A}}},91778:function(t,e,n){"use strict";n.d(e,{Z:function(){return c}});var r=n(38627),i=n(6803),o=n(55350),s=n(62629),a=n(80091);function c(t,e,n,o){return function(c,h){var p,f,d,g=e(h),m=c.invert(o[0],o[1]),y=(0,r.Z)(),_=e(y),v=!1,x={point:b,lineStart:E,lineEnd:T,polygonStart:function(){x.point=S,x.lineStart=k,x.lineEnd=A,f=[],p=[]},polygonEnd:function(){x.point=b,x.lineStart=E,x.lineEnd=T,f=(0,a.TS)(f);var t=(0,s.Z)(p,m);f.length?(v||(h.polygonStart(),v=!0),(0,i.Z)(f,u,t,n,h)):t&&(v||(h.polygonStart(),v=!0),h.lineStart(),n(null,null,1,h),h.lineEnd()),v&&(h.polygonEnd(),v=!1),f=p=null},sphere:function(){h.polygonStart(),h.lineStart(),n(null,null,1,h),h.lineEnd(),h.polygonEnd()}};function b(e,n){var r=c(e,n);t(e=r[0],n=r[1])&&h.point(e,n)}function w(t,e){var n=c(t,e);g.point(n[0],n[1])}function E(){x.point=w,g.lineStart()}function T(){x.point=b,g.lineEnd()}function S(t,e){d.push([t,e]);var n=c(t,e);_.point(n[0],n[1])}function k(){_.lineStart(),d=[]}function A(){S(d[0][0],d[0][1]),_.lineEnd();var t,e,n,r,i=_.clean(),o=y.result(),s=o.length;if(d.pop(),p.push(d),d=null,s)if(1&i){if((e=(n=o[0]).length-1)>0){for(v||(h.polygonStart(),v=!0),h.lineStart(),t=0;t<e;++t)h.point((r=n[t])[0],r[1]);h.lineEnd()}}else s>1&&2&i&&o.push(o.pop().concat(o.shift())),f.push(o.filter(l))}return x}}function l(t){return t.length>1}function u(t,e){return((t=t.x)[0]<0?t[1]-o.ou-o.Ho:o.ou-t[1])-((e=e.x)[0]<0?e[1]-o.ou-o.Ho:o.ou-e[1])}},21738:function(t,e,n){"use strict";function r(t,e,n,r,i,o){var s,a=t[0],c=t[1],l=0,u=1,h=e[0]-a,p=e[1]-c;if(s=n-a,h||!(s>0)){if(s/=h,h<0){if(s<l)return;s<u&&(u=s)}else if(h>0){if(s>u)return;s>l&&(l=s)}if(s=i-a,h||!(s<0)){if(s/=h,h<0){if(s>u)return;s>l&&(l=s)}else if(h>0){if(s<l)return;s<u&&(u=s)}if(s=r-c,p||!(s>0)){if(s/=p,p<0){if(s<l)return;s<u&&(u=s)}else if(p>0){if(s>u)return;s>l&&(l=s)}if(s=o-c,p||!(s<0)){if(s/=p,p<0){if(s>u)return;s>l&&(l=s)}else if(p>0){if(s<l)return;s<u&&(u=s)}return l>0&&(t[0]=a+l*h,t[1]=c+l*p),u<1&&(e[0]=a+u*h,e[1]=c+u*p),!0}}}}}n.d(e,{Z:function(){return r}})},6803:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(55228);function i(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function o(t,e,n,o,a){var c,l,u=[],h=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,o=t[0],s=t[e];if((0,r.Z)(o,s)){for(a.lineStart(),c=0;c<e;++c)a.point((o=t[c])[0],o[1]);a.lineEnd()}else u.push(n=new i(o,t,null,!0)),h.push(n.o=new i(o,null,n,!1)),u.push(n=new i(s,t,null,!1)),h.push(n.o=new i(s,null,n,!0))}})),u.length){for(h.sort(e),s(u),s(h),c=0,l=h.length;c<l;++c)h[c].e=n=!n;for(var p,f,d=u[0];;){for(var g=d,m=!0;g.v;)if((g=g.n)===d)return;p=g.z,a.lineStart();do{if(g.v=g.o.v=!0,g.e){if(m)for(c=0,l=p.length;c<l;++c)a.point((f=p[c])[0],f[1]);else o(g.x,g.n.x,1,a);g=g.n}else{if(m)for(p=g.p.z,c=p.length-1;c>=0;--c)a.point((f=p[c])[0],f[1]);else o(g.x,g.p.x,-1,a);g=g.p}p=(g=g.o).z,m=!m}while(!g.v);a.lineEnd()}}}function s(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}},44079:function(t,e,n){"use strict";function r(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}n.d(e,{Z:function(){return r}})},2655:function(t,e,n){"use strict";n(62629),n(52091),n(55350)},52091:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r=n(32174),i=[null,null],o={type:"LineString",coordinates:i};function s(t,e){return i[0]=t,i[1]=e,(0,r.Z)(o)}},86876:function(t,e,n){"use strict";n(80091),n(55350)},67423:function(t,e,n){"use strict";function r(t){return t}n.d(e,{Z:function(){return r}})},44536:function(t,e,n){"use strict";n(55350)},32174:function(t,e,n){"use strict";n.d(e,{Z:function(){return g}});var r,i,o,s=n(18227),a=n(55350),c=n(11344),l=n(23311),u=(0,s.Z)(),h={sphere:c.Z,point:c.Z,lineStart:function(){h.point=f,h.lineEnd=p},lineEnd:c.Z,polygonStart:c.Z,polygonEnd:c.Z};function p(){h.point=h.lineEnd=c.Z}function f(t,e){t*=a.uR,e*=a.uR,r=t,i=(0,a.O$)(e),o=(0,a.mC)(e),h.point=d}function d(t,e){t*=a.uR,e*=a.uR;var n=(0,a.O$)(e),s=(0,a.mC)(e),c=(0,a.Wn)(t-r),l=(0,a.mC)(c),h=s*(0,a.O$)(c),p=o*n-i*s*l,f=i*n+o*s*l;u.add((0,a.fv)((0,a._b)(h*h+p*p),f)),r=t,i=n,o=s}function g(t){return u.reset(),(0,l.Z)(t,h),+u}},55350:function(t,e,n){"use strict";n.d(e,{BZ:function(){return a},Ho:function(){return r},Kh:function(){return v},O$:function(){return m},OR:function(){return _},Qq:function(){return d},RW:function(){return c},Wn:function(){return u},ZR:function(){return x},_b:function(){return y},cM:function(){return g},fv:function(){return p},mC:function(){return f},ou:function(){return o},pi:function(){return i},pu:function(){return s},uR:function(){return l},z4:function(){return h}});var r=1e-6,i=Math.PI,o=i/2,s=i/4,a=2*i,c=180/i,l=i/180,u=Math.abs,h=Math.atan,p=Math.atan2,f=Math.cos,d=(Math.ceil,Math.exp),g=(Math.floor,Math.log),m=(Math.pow,Math.sin),y=(Math.sign,Math.sqrt),_=Math.tan;function v(t){return t>1?0:t<-1?i:Math.acos(t)}function x(t){return t>1?o:t<-1?-o:Math.asin(t)}},11344:function(t,e,n){"use strict";function r(){}n.d(e,{Z:function(){return r}})},20611:function(t,e,n){"use strict";var r,i,o,s,a=n(18227),c=n(55350),l=n(11344),u=(0,a.Z)(),h=(0,a.Z)(),p={point:l.Z,lineStart:l.Z,lineEnd:l.Z,polygonStart:function(){p.lineStart=f,p.lineEnd=m},polygonEnd:function(){p.lineStart=p.lineEnd=p.point=l.Z,u.add((0,c.Wn)(h)),h.reset()},result:function(){var t=u/2;return u.reset(),t}};function f(){p.point=d}function d(t,e){p.point=g,r=o=t,i=s=e}function g(t,e){h.add(s*t-o*e),o=t,s=e}function m(){g(r,i)}},3310:function(t,e,n){"use strict";var r=n(11344),i=1/0,o=i,s=-i,a=s,c={point:function(t,e){t<i&&(i=t);t>s&&(s=t);e<o&&(o=e);e>a&&(a=e)},lineStart:r.Z,lineEnd:r.Z,polygonStart:r.Z,polygonEnd:r.Z,result:function(){var t=[[i,o],[s,a]];return s=a=-(o=i=1/0),t}};e.Z=c},15191:function(t,e,n){"use strict";n(55350)},81557:function(t,e,n){"use strict";n(55350);n(11344).Z},35545:function(t,e,n){"use strict";n(23311),n(20611),n(3310),n(15191),n(81557),n(89272),n(78957)},89272:function(t,e,n){"use strict";var r,i,o,s,a,c=n(18227),l=n(55350),u=n(11344),h=(0,c.Z)(),p={point:u.Z,lineStart:function(){p.point=f},lineEnd:function(){r&&d(i,o),p.point=u.Z},polygonStart:function(){r=!0},polygonEnd:function(){r=null},result:function(){var t=+h;return h.reset(),t}};function f(t,e){p.point=d,i=s=t,o=a=e}function d(t,e){s-=t,a-=e,h.add((0,l._b)(s*s+a*a)),s=t,a=e}},78957:function(t,e,n){"use strict";function r(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}r(4.5)},55228:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(55350);function i(t,e){return(0,r.Wn)(t[0]-e[0])<r.Ho&&(0,r.Wn)(t[1]-e[1])<r.Ho}},62629:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(18227),i=n(51593),o=n(55350),s=(0,r.Z)();function a(t,e){var n=e[0],r=e[1],a=[(0,o.O$)(n),-(0,o.mC)(n),0],c=0,l=0;s.reset();for(var u=0,h=t.length;u<h;++u)if(f=(p=t[u]).length)for(var p,f,d=p[f-1],g=d[0],m=d[1]/2+o.pu,y=(0,o.O$)(m),_=(0,o.mC)(m),v=0;v<f;++v,g=b,y=E,_=T,d=x){var x=p[v],b=x[0],w=x[1]/2+o.pu,E=(0,o.O$)(w),T=(0,o.mC)(w),S=b-g,k=S>=0?1:-1,A=k*S,M=A>o.pi,I=y*E;if(s.add((0,o.fv)(I*k*(0,o.O$)(A),_*T+I*(0,o.mC)(A))),c+=M?S+k*o.BZ:S,M^g>=n^b>=n){var C=(0,i.T5)((0,i.Og)(d),(0,i.Og)(x));(0,i.iJ)(C);var O=(0,i.T5)(a,C);(0,i.iJ)(O);var P=(M^S>=0?-1:1)*(0,o.ZR)(O[2]);(r>P||r===P&&(C[0]||C[1]))&&(l+=M^S>=0?1:-1)}}return(c<-o.Ho||c<o.Ho&&s<-o.Ho)^1&l}},33487:function(t,e,n){"use strict";n(14970)},60261:function(t,e,n){"use strict";n(55350),n(33487),n(14970),n(83776)},93824:function(t,e,n){"use strict";n.d(e,{O:function(){return o},W:function(){return i}});var r=n(55350);function i(t){return function(e,n){var i=(0,r.mC)(e),o=(0,r.mC)(n),s=t(i*o);return[s*o*(0,r.O$)(e),s*(0,r.O$)(n)]}}function o(t){return function(e,n){var i=(0,r._b)(e*e+n*n),o=t(i),s=(0,r.O$)(o),a=(0,r.mC)(o);return[(0,r.fv)(e*s,i*a),(0,r.ZR)(i&&n*s/i)]}}},84699:function(t,e,n){"use strict";var r=n(55350),i=n(93824),o=(n(4308),(0,i.W)((function(t){return(0,r._b)(2/(1+t))})));o.invert=(0,i.O)((function(t){return 2*(0,r.ZR)(t/2)}))},58271:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(55350),i=n(93824),o=n(4308),s=(0,i.W)((function(t){return(t=(0,r.Kh)(t))&&t/(0,r.O$)(t)}));function a(){return(0,o.Z)(s).scale(79.4188).clipAngle(179.999)}s.invert=(0,i.O)((function(t){return t}))},53388:function(t,e,n){"use strict";n(55350),n(4308)},72051:function(t,e,n){"use strict";n(55350),n(53388),n(23007)},14970:function(t,e,n){"use strict";n(55350),n(53388),n(75968)},75053:function(t,e,n){"use strict";n(55350),n(53388),n(11261)},75968:function(t,e,n){"use strict";n(55350)},11261:function(t,e,n){"use strict";n(4308);function r(t,e){return[t,e]}r.invert=r},83776:function(t,e,n){"use strict";n.d(e,{m:function(){return s},q:function(){return o}});var r=n(23311),i=n(3310);function o(t,e,n){var o=e[1][0]-e[0][0],s=e[1][1]-e[0][1],a=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=a&&t.clipExtent(null),(0,r.Z)(n,t.stream(i.Z));var c=i.Z.result(),l=Math.min(o/(c[1][0]-c[0][0]),s/(c[1][1]-c[0][1])),u=+e[0][0]+(o-l*(c[1][0]+c[0][0]))/2,h=+e[0][1]+(s-l*(c[1][1]+c[0][1]))/2;return null!=a&&t.clipExtent(a),t.scale(150*l).translate([u,h])}function s(t,e,n){return o(t,[[0,0],e],n)}},40916:function(t,e,n){"use strict";var r=n(55350),i=n(93824);n(4308);function o(t,e){var n=(0,r.mC)(e),i=(0,r.mC)(t)*n;return[n*(0,r.O$)(t)/i,(0,r.O$)(e)/i]}o.invert=(0,i.O)(r.z4)},93437:function(t,e,n){"use strict";n(63920),n(20071),n(83776)},4308:function(t,e,n){"use strict";n.d(e,{Z:function(){return d}});var r=n(54969),i=n(43880),o=n(63920),s=n(44079),a=n(67423),c=n(55350),l=n(51613),u=n(20071),h=n(83776),p=n(2271),f=(0,u.l)({point:function(t,e){this.stream.point(t*c.uR,e*c.uR)}});function d(t){return function(t){var e,n,u,d,g,m,y,_,v,x,b=150,w=480,E=250,T=0,S=0,k=0,A=0,M=0,I=null,C=r.Z,O=null,P=a.Z,L=.5,D=(0,p.Z)(j,L);function R(t){return[(t=g(t[0]*c.uR,t[1]*c.uR))[0]*b+n,u-t[1]*b]}function N(t){return(t=g.invert((t[0]-n)/b,(u-t[1])/b))&&[t[0]*c.RW,t[1]*c.RW]}function j(t,r){return[(t=e(t,r))[0]*b+n,u-t[1]*b]}function z(){g=(0,s.Z)(d=(0,l.I)(k,A,M),e);var t=e(T,S);return n=w-t[0]*b,u=E+t[1]*b,B()}function B(){return v=x=null,R}return R.stream=function(t){return v&&x===t?v:v=f(C(d,D(P(x=t))))},R.clipAngle=function(t){return arguments.length?(C=+t?(0,i.Z)(I=t*c.uR,6*c.uR):(I=null,r.Z),B()):I*c.RW},R.clipExtent=function(t){return arguments.length?(P=null==t?(O=m=y=_=null,a.Z):(0,o.H)(O=+t[0][0],m=+t[0][1],y=+t[1][0],_=+t[1][1]),B()):null==O?null:[[O,m],[y,_]]},R.scale=function(t){return arguments.length?(b=+t,z()):b},R.translate=function(t){return arguments.length?(w=+t[0],E=+t[1],z()):[w,E]},R.center=function(t){return arguments.length?(T=t[0]%360*c.uR,S=t[1]%360*c.uR,z()):[T*c.RW,S*c.RW]},R.rotate=function(t){return arguments.length?(k=t[0]%360*c.uR,A=t[1]%360*c.uR,M=t.length>2?t[2]%360*c.uR:0,z()):[k*c.RW,A*c.RW,M*c.RW]},R.precision=function(t){return arguments.length?(D=(0,p.Z)(j,L=t*t),B()):(0,c._b)(L)},R.fitExtent=function(t,e){return(0,h.q)(R,t,e)},R.fitSize=function(t,e){return(0,h.m)(R,t,e)},function(){return e=t.apply(this,arguments),R.invert=e.invert&&N,z()}}((function(){return t}))()}},23007:function(t,e,n){"use strict";var r=n(55350);n(51613),n(4308);function i(t,e){return[t,(0,r.cM)((0,r.OR)((r.ou+e)/2))]}i.invert=function(t,e){return[t,2*(0,r.z4)((0,r.Qq)(e))-r.ou]}},38839:function(t,e,n){"use strict";n(4308);var r=n(55350);function i(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}i.invert=function(t,e){var n,i=e,o=25;do{var s=i*i,a=s*s;i-=n=(i*(1.007226+s*(.015085+a*(.028874*s-.044475-.005916*a)))-e)/(1.007226+s*(.045255+a*(.259866*s-.311325-.005916*11*a)))}while((0,r.Wn)(n)>r.Ho&&--o>0);return[t/(.8707+(s=i*i)*(s*(s*s*s*(.003971-.001529*s)-.013791)-.131979)),i]}},50435:function(t,e,n){"use strict";var r=n(55350),i=n(93824);n(4308);function o(t,e){return[(0,r.mC)(e)*(0,r.O$)(t),(0,r.O$)(e)]}o.invert=(0,i.O)(r.ZR)},2271:function(t,e,n){"use strict";n.d(e,{Z:function(){return c}});var r=n(51593),i=n(55350),o=n(20071),s=16,a=(0,i.mC)(30*i.uR);function c(t,e){return+e?function(t,e){function n(r,o,s,c,l,u,h,p,f,d,g,m,y,_){var v=h-r,x=p-o,b=v*v+x*x;if(b>4*e&&y--){var w=c+d,E=l+g,T=u+m,S=(0,i._b)(w*w+E*E+T*T),k=(0,i.ZR)(T/=S),A=(0,i.Wn)((0,i.Wn)(T)-1)<i.Ho||(0,i.Wn)(s-f)<i.Ho?(s+f)/2:(0,i.fv)(E,w),M=t(A,k),I=M[0],C=M[1],O=I-r,P=C-o,L=x*O-v*P;(L*L/b>e||(0,i.Wn)((v*O+x*P)/b-.5)>.3||c*d+l*g+u*m<a)&&(n(r,o,s,c,l,u,I,C,A,w/=S,E/=S,T,y,_),_.point(I,C),n(I,C,A,w,E,T,h,p,f,d,g,m,y,_))}}return function(e){var i,o,a,c,l,u,h,p,f,d,g,m,y={point:_,lineStart:v,lineEnd:b,polygonStart:function(){e.polygonStart(),y.lineStart=w},polygonEnd:function(){e.polygonEnd(),y.lineStart=v}};function _(n,r){n=t(n,r),e.point(n[0],n[1])}function v(){p=NaN,y.point=x,e.lineStart()}function x(i,o){var a=(0,r.Og)([i,o]),c=t(i,o);n(p,f,h,d,g,m,p=c[0],f=c[1],h=i,d=a[0],g=a[1],m=a[2],s,e),e.point(p,f)}function b(){y.point=_,e.lineEnd()}function w(){v(),y.point=E,y.lineEnd=T}function E(t,e){x(i=t,e),o=p,a=f,c=d,l=g,u=m,y.point=x}function T(){n(p,f,h,d,g,m,o,a,i,c,l,u,s,e),y.lineEnd=b,b()}return y}}(t,e):function(t){return(0,o.l)({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}},30378:function(t,e,n){"use strict";var r=n(55350),i=n(93824);n(4308);function o(t,e){var n=(0,r.mC)(e),i=1+(0,r.mC)(t)*n;return[n*(0,r.O$)(t)/i,(0,r.O$)(e)/i]}o.invert=(0,i.O)((function(t){return 2*(0,r.z4)(t)}))},17421:function(t,e,n){"use strict";var r=n(55350);n(23007);function i(t,e){return[(0,r.cM)((0,r.OR)((r.ou+e)/2)),-t]}i.invert=function(t,e){return[-e,2*(0,r.z4)((0,r.Qq)(t))-r.ou]}},51613:function(t,e,n){"use strict";n.d(e,{I:function(){return s}});var r=n(44079),i=n(55350);function o(t,e){return[t>i.pi?t-i.BZ:t<-i.pi?t+i.BZ:t,e]}function s(t,e,n){return(t%=i.BZ)?e||n?(0,r.Z)(c(t),l(e,n)):c(t):e||n?l(e,n):o}function a(t){return function(e,n){return[(e+=t)>i.pi?e-i.BZ:e<-i.pi?e+i.BZ:e,n]}}function c(t){var e=a(t);return e.invert=a(-t),e}function l(t,e){var n=(0,i.mC)(t),r=(0,i.O$)(t),o=(0,i.mC)(e),s=(0,i.O$)(e);function a(t,e){var a=(0,i.mC)(e),c=(0,i.mC)(t)*a,l=(0,i.O$)(t)*a,u=(0,i.O$)(e),h=u*n+c*r;return[(0,i.fv)(l*o-h*s,c*n-u*r),(0,i.ZR)(h*o+l*s)]}return a.invert=function(t,e){var a=(0,i.mC)(e),c=(0,i.mC)(t)*a,l=(0,i.O$)(t)*a,u=(0,i.O$)(e),h=u*o-l*s;return[(0,i.fv)(l*o+u*s,c*n+h*r),(0,i.ZR)(h*n-c*r)]},a}o.invert=o},23311:function(t,e,n){"use strict";function r(t,e){t&&o.hasOwnProperty(t.type)&&o[t.type](t,e)}n.d(e,{Z:function(){return c}});var i={Feature:function(t,e){r(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,o=n.length;++i<o;)r(n[i].geometry,e)}},o={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){s(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)s(n[r],e,0)},Polygon:function(t,e){a(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)a(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,o=n.length;++i<o;)r(n[i],e)}};function s(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function a(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)s(t[n],e,1);e.polygonEnd()}function c(t,e){t&&i.hasOwnProperty(t.type)?i[t.type](t,e):r(t,e)}},20071:function(t,e,n){"use strict";function r(t){return function(e){var n=new i;for(var r in t)n[r]=t[r];return n.stream=e,n}}function i(){}n.d(e,{l:function(){return r}}),i.prototype={constructor:i,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},97423:function(t,e,n){"use strict";n(71122)},76629:function(t,e,n){"use strict";n.d(e,{T:function(){return p},W:function(){return f}});var r=n(31791),i=n(22012),o=n(38473),s=n(20364),a=n(62119),c=[];function l(){(0,r.q)(this),this.edge=this.site=this.circle=null}function u(t){var e=c.pop()||new l;return e.site=t,e}function h(t){(0,o.No)(t),a.U9.remove(t),c.push(t),(0,r.q)(t)}function p(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],c=t.P,l=t.N,u=[t];h(t);for(var p=c;p.circle&&Math.abs(n-p.circle.x)<a.Ho&&Math.abs(r-p.circle.cy)<a.Ho;)c=p.P,u.unshift(p),h(p),p=c;u.unshift(p),(0,o.No)(p);for(var f=l;f.circle&&Math.abs(n-f.circle.x)<a.Ho&&Math.abs(r-f.circle.cy)<a.Ho;)l=f.N,u.push(f),h(f),f=l;u.push(f),(0,o.No)(f);var d,g=u.length;for(d=1;d<g;++d)f=u[d],p=u[d-1],(0,s.FK)(f.edge,p.site,f.site,i);p=u[0],(f=u[g-1]).edge=(0,s.jN)(p.site,f.site,null,i),(0,o.Z6)(p),(0,o.Z6)(f)}function f(t){for(var e,n,r,c,l=t[0],h=t[1],p=a.U9._;p;)if((r=d(p,h)-l)>a.Ho)p=p.L;else{if(!((c=l-g(p,h))>a.Ho)){r>-a.Ho?(e=p.P,n=p):c>-a.Ho?(e=p,n=p.N):e=n=p;break}if(!p.R){e=p;break}p=p.R}(0,i.kE)(t);var f=u(t);if(a.U9.insert(e,f),e||n){if(e===n)return(0,o.No)(e),n=u(e.site),a.U9.insert(f,n),f.edge=n.edge=(0,s.jN)(e.site,f.site),(0,o.Z6)(e),void(0,o.Z6)(n);if(n){(0,o.No)(e),(0,o.No)(n);var m=e.site,y=m[0],_=m[1],v=t[0]-y,x=t[1]-_,b=n.site,w=b[0]-y,E=b[1]-_,T=2*(v*E-x*w),S=v*v+x*x,k=w*w+E*E,A=[(E*S-x*k)/T+y,(v*k-w*S)/T+_];(0,s.FK)(n.edge,m,b,A),f.edge=(0,s.jN)(m,t,null,A),n.edge=(0,s.jN)(t,b,null,A),(0,o.Z6)(e),(0,o.Z6)(n)}else f.edge=(0,s.jN)(e.site,f.site)}}function d(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var s=t.P;if(!s)return-1/0;var a=(n=s.site)[0],c=n[1],l=c-e;if(!l)return a;var u=a-r,h=1/o-1/l,p=u/l;return h?(-p+Math.sqrt(p*p-2*h*(u*u/(-2*l)-c+l/2+i-o/2)))/h+r:(r+a)/2}function g(t,e){var n=t.N;if(n)return d(n,e);var r=t.site;return r[1]===e?r[0]:1/0}},22012:function(t,e,n){"use strict";n.d(e,{A1:function(){return l},BO:function(){return a},iu:function(){return u},kE:function(){return o}});var r=n(20364),i=n(62119);function o(t){return i.gF[t.index]={site:t,halfedges:[]}}function s(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function a(t,e){return e[+(e.left!==t.site)]}function c(t,e){return e[+(e.left===t.site)]}function l(){for(var t,e,n,r,o=0,a=i.gF.length;o<a;++o)if((t=i.gF[o])&&(r=(e=t.halfedges).length)){var c=new Array(r),l=new Array(r);for(n=0;n<r;++n)c[n]=n,l[n]=s(t,i.$Y[e[n]]);for(c.sort((function(t,e){return l[e]-l[t]})),n=0;n<r;++n)l[n]=e[c[n]];for(n=0;n<r;++n)e[n]=l[n]}}function u(t,e,n,o){var s,l,u,h,p,f,d,g,m,y,_,v,x=i.gF.length,b=!0;for(s=0;s<x;++s)if(l=i.gF[s]){for(u=l.site,h=(p=l.halfedges).length;h--;)i.$Y[p[h]]||p.splice(h,1);for(h=0,f=p.length;h<f;)_=(y=c(l,i.$Y[p[h]]))[0],v=y[1],g=(d=a(l,i.$Y[p[++h%f]]))[0],m=d[1],(Math.abs(_-g)>i.Ho||Math.abs(v-m)>i.Ho)&&(p.splice(h,0,i.$Y.push((0,r.UV)(u,y,Math.abs(_-t)<i.Ho&&o-v>i.Ho?[t,Math.abs(g-t)<i.Ho?m:o]:Math.abs(v-o)<i.Ho&&n-_>i.Ho?[Math.abs(m-o)<i.Ho?g:n,o]:Math.abs(_-n)<i.Ho&&v-e>i.Ho?[n,Math.abs(g-n)<i.Ho?m:e]:Math.abs(v-e)<i.Ho&&_-t>i.Ho?[Math.abs(m-e)<i.Ho?g:t,e]:null))-1),++f);f&&(b=!1)}if(b){var w,E,T,S=1/0;for(s=0,b=null;s<x;++s)(l=i.gF[s])&&(T=(w=(u=l.site)[0]-t)*w+(E=u[1]-e)*E)<S&&(S=T,b=l);if(b){var k=[t,e],A=[t,o],M=[n,o],I=[n,e];b.halfedges.push(i.$Y.push((0,r.UV)(u=b.site,k,A))-1,i.$Y.push((0,r.UV)(u,A,M))-1,i.$Y.push((0,r.UV)(u,M,I))-1,i.$Y.push((0,r.UV)(u,I,k))-1)}}for(s=0;s<x;++s)(l=i.gF[s])&&(l.halfedges.length||delete i.gF[s])}},38473:function(t,e,n){"use strict";n.d(e,{No:function(){return l},Z6:function(){return c},pk:function(){return r}});var r,i=n(31791),o=n(62119),s=[];function a(){(0,i.q)(this),this.x=this.y=this.arc=this.site=this.cy=null}function c(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,c=t.site,l=n.site;if(i!==l){var u=c[0],h=c[1],p=i[0]-u,f=i[1]-h,d=l[0]-u,g=l[1]-h,m=2*(p*g-f*d);if(!(m>=-o.aW)){var y=p*p+f*f,_=d*d+g*g,v=(g*y-f*_)/m,x=(p*_-d*y)/m,b=s.pop()||new a;b.arc=t,b.site=c,b.x=v+u,b.y=(b.cy=x+h)+Math.sqrt(v*v+x*x),t.circle=b;for(var w=null,E=o.bf._;E;)if(b.y<E.y||b.y===E.y&&b.x<=E.x){if(!E.L){w=E.P;break}E=E.L}else{if(!E.R){w=E;break}E=E.R}o.bf.insert(w,b),w||(r=b)}}}}function l(t){var e=t.circle;e&&(e.P||(r=e.N),o.bf.remove(e),s.push(e),(0,i.q)(e),t.circle=null)}},62119:function(t,e,n){"use strict";n.d(e,{$Y:function(){return s},Ho:function(){return p},U9:function(){return r},aW:function(){return f},bf:function(){return o},gF:function(){return i}});var r,i,o,s,a=n(76629),c=n(22012),l=n(38473),u=n(20364),h=n(31791),p=1e-6,f=1e-12;function d(t,e){return e[1]-t[1]||e[0]-t[0]}function g(t,e){var n,p,f,g=t.sort(d).pop();for(s=[],i=new Array(t.length),r=new h.Z,o=new h.Z;;)if(f=l.pk,g&&(!f||g[1]<f.y||g[1]===f.y&&g[0]<f.x))g[0]===n&&g[1]===p||((0,a.W)(g),n=g[0],p=g[1]),g=t.pop();else{if(!f)break;(0,a.T)(f.arc)}if((0,c.A1)(),e){var m=+e[0][0],y=+e[0][1],_=+e[1][0],v=+e[1][1];(0,u.zb)(m,y,_,v),(0,c.iu)(m,y,_,v)}this.edges=s,this.cells=i,r=o=s=i=null}g.prototype={constructor:g,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return(0,c.BO)(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(o=(i=n.halfedges).length)for(var i,o,s,a,c,l,u=n.site,h=-1,p=e[i[o-1]],f=p.left===u?p.right:p.left;++h<o;)s=f,f=(p=e[i[h]]).left===u?p.right:p.left,s&&f&&r<s.index&&r<f.index&&(c=s,l=f,((a=u)[0]-l[0])*(c[1]-a[1])-(a[0]-c[0])*(l[1]-a[1])<0)&&t.push([u.data,s.data,f.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var r,i,o=this,s=o._found||0,a=o.cells.length;!(i=o.cells[s]);)if(++s>=a)return null;var c=t-i.site[0],l=e-i.site[1],u=c*c+l*l;do{i=o.cells[r=s],s=null,i.halfedges.forEach((function(n){var r=o.edges[n],a=r.left;if(a!==i.site&&a||(a=r.right)){var c=t-a[0],l=e-a[1],h=c*c+l*l;h<u&&(u=h,s=a.index)}}))}while(null!==s);return o._found=r,null==n||u<=n*n?i.site:null}}},20364:function(t,e,n){"use strict";n.d(e,{FK:function(){return s},UV:function(){return o},jN:function(){return i},zb:function(){return l}});var r=n(62119);function i(t,e,n,i){var o=[null,null],a=r.$Y.push(o)-1;return o.left=t,o.right=e,n&&s(o,t,e,n),i&&s(o,e,t,i),r.gF[t.index].halfedges.push(a),r.gF[e.index].halfedges.push(a),o}function o(t,e,n){var r=[e,n];return r.left=t,r}function s(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function a(t,e,n,r,i){var o,s=t[0],a=t[1],c=s[0],l=s[1],u=0,h=1,p=a[0]-c,f=a[1]-l;if(o=e-c,p||!(o>0)){if(o/=p,p<0){if(o<u)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>u&&(u=o)}if(o=r-c,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>u&&(u=o)}else if(p>0){if(o<u)return;o<h&&(h=o)}if(o=n-l,f||!(o>0)){if(o/=f,f<0){if(o<u)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>u&&(u=o)}if(o=i-l,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>u&&(u=o)}else if(f>0){if(o<u)return;o<h&&(h=o)}return!(u>0||h<1)||(u>0&&(t[0]=[c+u*p,l+u*f]),h<1&&(t[1]=[c+h*p,l+h*f]),!0)}}}}}function c(t,e,n,r,i){var o=t[1];if(o)return!0;var s,a,c=t[0],l=t.left,u=t.right,h=l[0],p=l[1],f=u[0],d=u[1],g=(h+f)/2,m=(p+d)/2;if(d===p){if(g<e||g>=r)return;if(h>f){if(c){if(c[1]>=i)return}else c=[g,n];o=[g,i]}else{if(c){if(c[1]<n)return}else c=[g,i];o=[g,n]}}else if(a=m-(s=(h-f)/(d-p))*g,s<-1||s>1)if(h>f){if(c){if(c[1]>=i)return}else c=[(n-a)/s,n];o=[(i-a)/s,i]}else{if(c){if(c[1]<n)return}else c=[(i-a)/s,i];o=[(n-a)/s,n]}else if(p<d){if(c){if(c[0]>=r)return}else c=[e,s*e+a];o=[r,s*r+a]}else{if(c){if(c[0]<e)return}else c=[r,s*r+a];o=[e,s*e+a]}return t[0]=c,t[1]=o,!0}function l(t,e,n,i){for(var o,s=r.$Y.length;s--;)c(o=r.$Y[s],t,e,n,i)&&a(o,t,e,n,i)&&(Math.abs(o[0][0]-o[1][0])>r.Ho||Math.abs(o[0][1]-o[1][1])>r.Ho)||delete r.$Y[s]}},31791:function(t,e,n){"use strict";function r(){this._=null}function i(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function o(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function s(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function a(t){for(;t.L;)t=t.L;return t}n.d(e,{q:function(){return i}}),r.prototype={constructor:r,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=a(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(o(this,n),n=(t=n).U),n.C=!1,r.C=!0,s(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(s(this,n),n=(t=n).U),n.C=!1,r.C=!0,o(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,c=t.L,l=t.R;if(n=c?l?a(l):c:l,i?i.L===t?i.L=n:i.R=n:this._=n,c&&l?(r=n.C,n.C=t.C,n.L=c,c.U=n,n!==l?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=l,l.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,o(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,s(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,o(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,s(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,o(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,s(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},e.Z=r},71122:function(t,e,n){"use strict";n(62119)},10251:function(t,e,n){var r=n(82215),i=n(82584),o=n(20609),s=n(98420),a=n(2847),c=n(18923),l=Date.prototype.getTime;function u(t,e,n){var f=n||{};return!!(f.strict?o(t,e):t===e)||(!t||!e||"object"!=typeof t&&"object"!=typeof e?f.strict?o(t,e):t==e:function(t,e,n){var o,f;if(typeof t!=typeof e)return!1;if(h(t)||h(e))return!1;if(t.prototype!==e.prototype)return!1;if(i(t)!==i(e))return!1;var d=s(t),g=s(e);if(d!==g)return!1;if(d||g)return t.source===e.source&&a(t)===a(e);if(c(t)&&c(e))return l.call(t)===l.call(e);var m=p(t),y=p(e);if(m!==y)return!1;if(m||y){if(t.length!==e.length)return!1;for(o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}if(typeof t!=typeof e)return!1;try{var _=r(t),v=r(e)}catch(t){return!1}if(_.length!==v.length)return!1;for(_.sort(),v.sort(),o=_.length-1;o>=0;o--)if(_[o]!=v[o])return!1;for(o=_.length-1;o>=0;o--)if(!u(t[f=_[o]],e[f],n))return!1;return!0}(t,e,f))}function h(t){return null==t}function p(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0]))}t.exports=u},12296:function(t,e,n){"use strict";var r=n(31044)(),i=n(40210),o=r&&i("%Object.defineProperty%",!0),s=i("%SyntaxError%"),a=i("%TypeError%"),c=n(27296);t.exports=function(t,e,n){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new a("`obj` must be an object or a function`");if("string"!=typeof e&&"symbol"!=typeof e)throw new a("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new a("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new a("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new a("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new a("`loose`, if provided, must be a boolean");var r=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,l=arguments.length>5?arguments[5]:null,u=arguments.length>6&&arguments[6],h=!!c&&c(t,e);if(o)o(t,e,{configurable:null===l&&h?h.configurable:!l,enumerable:null===r&&h?h.enumerable:!r,value:n,writable:null===i&&h?h.writable:!i});else{if(!u&&(r||i||l))throw new s("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");t[e]=n}}},4289:function(t,e,n){"use strict";var r=n(82215),i="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),o=Object.prototype.toString,s=Array.prototype.concat,a=n(12296),c=n(31044)(),l=function(t,e,n,r){if(e in t)if(!0===r){if(t[e]===n)return}else if("function"!=typeof(i=r)||"[object Function]"!==o.call(i)||!r())return;var i;c?a(t,e,n,!0):a(t,e,n)},u=function(t,e){var n=arguments.length>2?arguments[2]:{},o=r(e);i&&(o=s.call(o,Object.getOwnPropertySymbols(e)));for(var a=0;a<o.length;a+=1)l(t,o[a],e[o[a]],n[o[a]])};u.supportsDescriptors=!!c,t.exports=u},68317:function(t){function e(t,e,n,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,r)}e.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var s=this.clusters.length;this.clusters.push([]),this._addToCluster(i,s),this._expandCluster(s,o)}}return this.clusters},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(1!==this._visited[r]){this._visited[r]=1;var i=this._regionQuery(r);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[r]&&this._addToCluster(r,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++){this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n)}return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)},63781:function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var s=new Array(u),a=0,c=0;c<u;c++)s[c]=0;for(var l=0;l<n;l++){var u=this.dataset[l].length;if(o===this.assignments[l]){for(c=0;c<u;c++)s[c]+=this.dataset[l][c];a++}}if(a>0){for(c=0;c<u;c++)s[c]/=a;this.centroids[o]=s}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,r=0;r<n;r++)(t=this.argmin(this.dataset[r],this.centroids,this.distance))!=this.assignments[r]&&(this.assignments[r]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var r,i=Number.MAX_VALUE,o=0,s=e.length,a=0;a<s;a++)(r=n(t,e[a]))<i&&(i=r,o=a);return o},e.prototype.distance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)},t.exports&&(t.exports=e)},73763:function(t,e,n){if(t.exports)var r=n(57985);function i(t,e,n,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,r)}i.prototype.run=function(t,e,n,i){this._init(t,e,n,i);for(var o=0,s=this.dataset.length;o<s;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var a=this.clusters.length-1;this._orderedList.push(o);var c=new r(null,null,"asc"),l=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,l,c),this._expandCluster(a,c))}return this.clusters},i.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var r=this._orderedList[e],i=this._reachability[r];t.push([r,i])}return t},i.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},i.prototype._updateQueue=function(t,e,n){var r=this;this._coreDistance=this._distanceToCore(t),e.forEach((function(e){if(void 0===r._processed[e]){var i=r.distance(r.dataset[t],r.dataset[e]),o=Math.max(r._coreDistance,i);void 0===r._reachability[e]?(r._reachability[e]=o,n.insert(e,o)):o<r._reachability[e]&&(r._reachability[e]=o,n.remove(e),n.insert(e,o))}}))},i.prototype._expandCluster=function(t,e){for(var n=e.getElements(),r=0,i=n.length;r<i;r++){var o=n[r];if(void 0===this._processed[o]){var s=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,s,e),this._expandCluster(t,e))}}},i.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++){if(this._regionQuery(t,n).length>=this.minPts)return n}},i.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],r=0,i=this.dataset.length;r<i;r++)this.distance(this.dataset[t],this.dataset[r])<e&&n.push(r);return n},i.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=i)},57985:function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,r=n;r--;){var i=this._priorities[r];"desc"===this._sorting?e>i&&(n=r):e<i&&(n=r)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;){if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.insert(t[r],e[r])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)},52606:function(t,e,n){t.exports&&(t.exports={DBSCAN:n(68317),KMEANS:n(63781),OPTICS:n(73763),PriorityQueue:n(57985)})},9187:function(t){"use strict";function e(t,e,r){r=r||2;var o,s,a,c,h,p,d,g=e&&e.length,m=g?e[0]*r:t.length,y=n(t,0,m,r,!0),_=[];if(!y||y.next===y.prev)return _;if(g&&(y=function(t,e,r,i){var o,s,a,c=[];for(o=0,s=e.length;o<s;o++)(a=n(t,e[o]*i,o<s-1?e[o+1]*i:t.length,i,!1))===a.next&&(a.steiner=!0),c.push(f(a));for(c.sort(l),o=0;o<c.length;o++)r=u(c[o],r);return r}(t,e,y,r)),t.length>80*r){o=a=t[0],s=c=t[1];for(var v=r;v<m;v+=r)(h=t[v])<o&&(o=h),(p=t[v+1])<s&&(s=p),h>a&&(a=h),p>c&&(c=p);d=0!==(d=Math.max(a-o,c-s))?32767/d:0}return i(y,_,r,o,s,d,0),_}function n(t,e,n,r,i){var o,s;if(i===k(t,e,n,r)>0)for(o=e;o<n;o+=r)s=E(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=E(o,t[o],t[o+1],s);return s&&y(s,s.next)&&(T(s),s=s.next),s}function r(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!y(r,r.next)&&0!==m(r.prev,r,r.next))r=r.next;else{if(T(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function i(t,e,n,l,u,h,f){if(t){!f&&h&&function(t,e,n,r){var i=t;do{0===i.z&&(i.z=p(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,s,a,c,l=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<l&&(a++,r=r.nextZ);e++);for(c=l;a>0||c>0&&r;)0!==a&&(0===c||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,c--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(s>1)}(i)}(t,l,u,h);for(var d,g,m=t;t.prev!==t.next;)if(d=t.prev,g=t.next,h?s(t,l,u,h):o(t))e.push(d.i/n|0),e.push(t.i/n|0),e.push(g.i/n|0),T(t),t=g.next,m=g.next;else if((t=g)===m){f?1===f?i(t=a(r(t),e,n),e,n,l,u,h,2):2===f&&c(t,e,n,l,u,h):i(r(t),e,n,l,u,h,1);break}}}function o(t){var e=t.prev,n=t,r=t.next;if(m(e,n,r)>=0)return!1;for(var i=e.x,o=n.x,s=r.x,a=e.y,c=n.y,l=r.y,u=i<o?i<s?i:s:o<s?o:s,h=a<c?a<l?a:l:c<l?c:l,p=i>o?i>s?i:s:o>s?o:s,f=a>c?a>l?a:l:c>l?c:l,g=r.next;g!==e;){if(g.x>=u&&g.x<=p&&g.y>=h&&g.y<=f&&d(i,a,o,c,s,l,g.x,g.y)&&m(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function s(t,e,n,r){var i=t.prev,o=t,s=t.next;if(m(i,o,s)>=0)return!1;for(var a=i.x,c=o.x,l=s.x,u=i.y,h=o.y,f=s.y,g=a<c?a<l?a:l:c<l?c:l,y=u<h?u<f?u:f:h<f?h:f,_=a>c?a>l?a:l:c>l?c:l,v=u>h?u>f?u:f:h>f?h:f,x=p(g,y,e,n,r),b=p(_,v,e,n,r),w=t.prevZ,E=t.nextZ;w&&w.z>=x&&E&&E.z<=b;){if(w.x>=g&&w.x<=_&&w.y>=y&&w.y<=v&&w!==i&&w!==s&&d(a,u,c,h,l,f,w.x,w.y)&&m(w.prev,w,w.next)>=0)return!1;if(w=w.prevZ,E.x>=g&&E.x<=_&&E.y>=y&&E.y<=v&&E!==i&&E!==s&&d(a,u,c,h,l,f,E.x,E.y)&&m(E.prev,E,E.next)>=0)return!1;E=E.nextZ}for(;w&&w.z>=x;){if(w.x>=g&&w.x<=_&&w.y>=y&&w.y<=v&&w!==i&&w!==s&&d(a,u,c,h,l,f,w.x,w.y)&&m(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;E&&E.z<=b;){if(E.x>=g&&E.x<=_&&E.y>=y&&E.y<=v&&E!==i&&E!==s&&d(a,u,c,h,l,f,E.x,E.y)&&m(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function a(t,e,n){var i=t;do{var o=i.prev,s=i.next.next;!y(o,s)&&_(o,i,i.next,s)&&b(o,s)&&b(s,o)&&(e.push(o.i/n|0),e.push(i.i/n|0),e.push(s.i/n|0),T(i),T(i.next),i=t=s),i=i.next}while(i!==t);return r(i)}function c(t,e,n,o,s,a){var c=t;do{for(var l=c.next.next;l!==c.prev;){if(c.i!==l.i&&g(c,l)){var u=w(c,l);return c=r(c,c.next),u=r(u,u.next),i(c,e,n,o,s,a,0),void i(u,e,n,o,s,a,0)}l=l.next}c=c.next}while(c!==t)}function l(t,e){return t.x-e.x}function u(t,e){var n=function(t,e){var n,r=e,i=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s&&(s=a,n=r.x<r.next.x?r:r.next,a===i))return n}r=r.next}while(r!==e);if(!n)return null;var c,l=n,u=n.x,p=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=u&&i!==r.x&&d(o<p?i:s,o,u,p,o<p?s:i,o,r.x,r.y)&&(c=Math.abs(o-r.y)/(i-r.x),b(r,t)&&(c<f||c===f&&(r.x>n.x||r.x===n.x&&h(n,r)))&&(n=r,f=c)),r=r.next}while(r!==l);return n}(t,e);if(!n)return e;var i=w(n,t);return r(i,i.next),r(n,n.next)}function h(t,e){return m(t.prev,t,e.prev)<0&&m(e.next,t,t.next)<0}function p(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function f(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function d(t,e,n,r,i,o,s,a){return(i-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(r-a)>=(n-s)*(e-a)&&(n-s)*(o-a)>=(i-s)*(r-a)}function g(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&_(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(b(t,e)&&b(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(m(t.prev,t,e.prev)||m(t,e.prev,e))||y(t,e)&&m(t.prev,t,t.next)>0&&m(e.prev,e,e.next)>0)}function m(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function y(t,e){return t.x===e.x&&t.y===e.y}function _(t,e,n,r){var i=x(m(t,e,n)),o=x(m(t,e,r)),s=x(m(n,r,t)),a=x(m(n,r,e));return i!==o&&s!==a||(!(0!==i||!v(t,n,e))||(!(0!==o||!v(t,r,e))||(!(0!==s||!v(n,t,r))||!(0!==a||!v(n,e,r)))))}function v(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function x(t){return t>0?1:t<0?-1:0}function b(t,e){return m(t.prev,t,t.next)<0?m(t,e,t.next)>=0&&m(t,t.prev,e)>=0:m(t,e,t.prev)<0||m(t,t.next,e)<0}function w(t,e){var n=new S(t.i,t.x,t.y),r=new S(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function E(t,e,n,r){var i=new S(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function T(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function S(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function k(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}t.exports=e,t.exports.default=e,e.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,s=Math.abs(k(t,0,o,n));if(i)for(var a=0,c=e.length;a<c;a++){var l=e[a]*n,u=a<c-1?e[a+1]*n:t.length;s-=Math.abs(k(t,l,u,n))}var h=0;for(a=0;a<r.length;a+=3){var p=r[a]*n,f=r[a+1]*n,d=r[a+2]*n;h+=Math.abs((t[p]-t[d])*(t[f+1]-t[p+1])-(t[p]-t[f])*(t[d+1]-t[p+1]))}return 0===s&&0===h?0:Math.abs((h-s)/s)},e.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}},17187:function(t,e,n){"use strict";var r,i=n(25108),o="object"==typeof Reflect?Reflect:null,s=o&&"function"==typeof o.apply?o.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function c(){c.init.call(this)}t.exports=c,t.exports.once=function(t,e){return new Promise((function(n,r){function i(n){t.removeListener(e,o),r(n)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}_(t,e,o,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&_(t,"error",e,n)}(t,i,{once:!0})}))},c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var l=10;function u(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function h(t){return void 0===t._maxListeners?c.defaultMaxListeners:t._maxListeners}function p(t,e,n,r){var o,s,a,c;if(u(n),void 0===(s=t._events)?(s=t._events=Object.create(null),t._eventsCount=0):(void 0!==s.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),a=s[e]),void 0===a)a=s[e]=n,++t._eventsCount;else if("function"==typeof a?a=s[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(o=h(t))>0&&a.length>o&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=a.length,c=l,i&&i.warn&&i.warn(c)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=f.bind(r);return i.listener=n,r.wrapFn=i,i}function g(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):y(i,i.length)}function m(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function y(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function _(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){r.once&&t.removeEventListener(e,i),n(o)}))}}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");l=t}}),c.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},c.prototype.getMaxListeners=function(){return h(this)},c.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[t];if(void 0===c)return!1;if("function"==typeof c)s(c,this,e);else{var l=c.length,u=y(c,l);for(n=0;n<l;++n)s(u[n],this,e)}return!0},c.prototype.addListener=function(t,e){return p(this,t,e,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(t,e){return p(this,t,e,!0)},c.prototype.once=function(t,e){return u(e),this.on(t,d(this,t,e)),this},c.prototype.prependOnceListener=function(t,e){return u(e),this.prependListener(t,d(this,t,e)),this},c.prototype.removeListener=function(t,e){var n,r,i,o,s;if(u(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,s||e)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},c.prototype.listeners=function(t){return g(this,t,!0)},c.prototype.rawListeners=function(t){return g(this,t,!1)},c.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):m.call(t,e)},c.prototype.listenerCount=m,c.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},94029:function(t,e,n){"use strict";var r=n(95320),i=Object.prototype.toString,o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){if(!r(e))throw new TypeError("iterator must be a function");var s;arguments.length>=3&&(s=n),"[object Array]"===i.call(t)?function(t,e,n){for(var r=0,i=t.length;r<i;r++)o.call(t,r)&&(null==n?e(t[r],r,t):e.call(n,t[r],r,t))}(t,e,s):"string"==typeof t?function(t,e,n){for(var r=0,i=t.length;r<i;r++)null==n?e(t.charAt(r),r,t):e.call(n,t.charAt(r),r,t)}(t,e,s):function(t,e,n){for(var r in t)o.call(t,r)&&(null==n?e(t[r],r,t):e.call(n,t[r],r,t))}(t,e,s)}},17648:function(t){"use strict";var e=Array.prototype.slice,n=Object.prototype.toString;t.exports=function(t){var r=this;if("function"!=typeof r||"[object Function]"!==n.call(r))throw new TypeError("Function.prototype.bind called on incompatible "+r);for(var i,o=e.call(arguments,1),s=Math.max(0,r.length-o.length),a=[],c=0;c<s;c++)a.push("$"+c);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof i){var n=r.apply(this,o.concat(e.call(arguments)));return Object(n)===n?n:this}return r.apply(t,o.concat(e.call(arguments)))})),r.prototype){var l=function(){};l.prototype=r.prototype,i.prototype=new l,l.prototype=null}return i}},58612:function(t,e,n){"use strict";var r=n(17648);t.exports=Function.prototype.bind||r},25972:function(t){"use strict";var e=function(){return"string"==typeof function(){}.name},n=Object.getOwnPropertyDescriptor;if(n)try{n([],"length")}catch(t){n=null}e.functionsHaveConfigurableNames=function(){if(!e()||!n)return!1;var t=n((function(){}),"name");return!!t&&!!t.configurable};var r=Function.prototype.bind;e.boundFunctionsHaveNames=function(){return e()&&"function"==typeof r&&""!==function(){}.bind().name},t.exports=e},29657:function(t,e,n){var r=n(10251),i=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:a};function o(t){return t.coordinates.map((function(e){return{type:t.type.replace("Multi",""),coordinates:e}}))}function s(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function a(t,e){return r(t,e,{strict:!0})}i.prototype.compare=function(t,e){if(t.type!==e.type||!s(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,r=o(t),i=o(e);return r.every((function(t){return this.some((function(e){return n.compare(t,e)}))}),i)}}return!1},i.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},i.prototype.compareLine=function(t,e,n,r){if(!s(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!r||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var a=this.compareCoord(i[n],o[n]);return this.direction||a?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},i.prototype.fixStartIndex=function(t,e){for(var n,r=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){r=i;break}return r>=0&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n},i.prototype.comparePath=function(t,e){var n=this;return t.every((function(t,e){return n.compareCoord(t,this[e])}),e)},i.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length),i=this;return n.every((function(t){return this.some((function(e){return i.compareLine(t,e,1,!0)}))}),r)}return!1},i.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},i.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},i.prototype.removePseudo=function(t){return t},t.exports=i},51787:function(t,e,n){var r=n(24056),i=n(84102),o=n(31540),s=n(9705).Z,a=o.featureEach,c=(o.coordEach,i.polygon,i.featureCollection);function l(t){var e=new r(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:s(t),r.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:s(t),e.push(t)})):a(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:s(t),e.push(t)})),r.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:s(t),r.prototype.remove.call(this,t,e)},e.clear=function(){return r.prototype.clear.call(this)},e.search=function(t){var e=r.prototype.search.call(this,this.toBBox(t));return c(e)},e.collides=function(t){return r.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=r.prototype.all.call(this);return c(t)},e.toJSON=function(){return r.prototype.toJSON.call(this)},e.fromJSON=function(t){return r.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=s(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=s(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}t.exports=l,t.exports.default=l},24056:function(t){t.exports=function(){"use strict";function t(t,r,i,o,s){!function t(n,r,i,o,s){for(;o>i;){if(o-i>600){var a=o-i+1,c=r-i+1,l=Math.log(a),u=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*u*(a-u)/a)*(c-a/2<0?-1:1);t(n,r,Math.max(i,Math.floor(r-c*u/a+h)),Math.min(o,Math.floor(r+(a-c)*u/a+h)),s)}var p=n[r],f=i,d=o;for(e(n,i,r),s(n[o],p)>0&&e(n,i,o);f<d;){for(e(n,f,d),f++,d--;s(n[f],p)<0;)f++;for(;s(n[d],p)>0;)d--}0===s(n[i],p)?e(n,i,d):e(n,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}(t,r,i||0,o||t.length-1,s||n)}function e(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function n(t,e){return t<e?-1:t>e?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function o(t,e){s(t,0,t.children.length,e,t)}function s(t,e,n,r,i){i||(i=d(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<n;o++){var s=t.children[o];a(i,t.leaf?r(s):s)}return i}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function c(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function u(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(e,n,r,i,o){for(var s=[n,r];s.length;)if(!((r=s.pop())-(n=s.pop())<=i)){var a=n+Math.ceil((r-n)/i/2)*i;t(e,a,n,r,o),s.push(n,a,a,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var e=this.data,n=[];if(!f(t,e))return n;for(var r=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var s=e.children[o],a=e.leaf?r(s):s;f(t,a)&&(e.leaf?n.push(s):p(t,a)?this._all(s,n):i.push(s))}e=i.pop()}return n},r.prototype.collides=function(t){var e=this.data;if(!f(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var i=e.children[r],o=e.leaf?this.toBBox(i):i;if(f(t,o)){if(e.leaf||p(t,o))return!0;n.push(i)}}e=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=d([]),this},r.prototype.remove=function(t,e){if(!t)return this;for(var n,r,o,s=this.data,a=this.toBBox(t),c=[],l=[];s||c.length;){if(s||(s=c.pop(),r=c[c.length-1],n=l.pop(),o=!0),s.leaf){var u=i(t,s.children,e);if(-1!==u)return s.children.splice(u,1),c.push(s),this._condense(c),this}o||s.leaf||!p(s,a)?r?(n++,s=r.children[n],o=!1):s=null:(c.push(s),l.push(n),n=0,r=s,s=s.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,e){return t.minX-e.minX},r.prototype.compareMinY=function(t,e){return t.minY-e.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},r.prototype._build=function(t,e,n,r){var i,s=n-e+1,a=this._maxEntries;if(s<=a)return o(i=d(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,r-1))),(i=d([])).leaf=!1,i.height=r;var c=Math.ceil(s/a),l=c*Math.ceil(Math.sqrt(a));g(t,e,n,l,this.compareMinX);for(var u=e;u<=n;u+=l){var h=Math.min(u+l-1,n);g(t,u,h,c,this.compareMinY);for(var p=u;p<=h;p+=c){var f=Math.min(p+c-1,h);i.children.push(this._build(t,p,f,r-1))}}return o(i,this.toBBox),i},r.prototype._chooseSubtree=function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var i=1/0,o=1/0,s=void 0,a=0;a<e.children.length;a++){var c=e.children[a],l=u(c),h=(p=t,f=c,(Math.max(f.maxX,p.maxX)-Math.min(f.minX,p.minX))*(Math.max(f.maxY,p.maxY)-Math.min(f.minY,p.minY))-l);h<o?(o=h,i=l<i?l:i,s=c):h===o&&l<i&&(i=l,s=c)}e=s||e.children[0]}var p,f;return e},r.prototype._insert=function(t,e,n){var r=n?t:this.toBBox(t),i=[],o=this._chooseSubtree(r,this.data,e,i);for(o.children.push(t),a(o,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},r.prototype._split=function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var s=this._chooseSplitIndex(n,i,r),a=d(n.children.splice(s,n.children.length-s));a.height=n.height,a.leaf=n.leaf,o(n,this.toBBox),o(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},r.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,e,n){for(var r,i,o,a,c,l,h,p=1/0,f=1/0,d=e;d<=n-e;d++){var g=s(t,0,d,this.toBBox),m=s(t,d,n,this.toBBox),y=(i=g,o=m,a=void 0,c=void 0,l=void 0,h=void 0,a=Math.max(i.minX,o.minX),c=Math.max(i.minY,o.minY),l=Math.min(i.maxX,o.maxX),h=Math.min(i.maxY,o.maxY),Math.max(0,l-a)*Math.max(0,h-c)),_=u(g)+u(m);y<p?(p=y,r=d,f=_<f?_:f):y===p&&_<f&&(f=_,r=d)}return r||n-e},r.prototype._chooseSplitAxis=function(t,e,n){var r=t.leaf?this.compareMinX:c,i=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,o=s(t,0,e,i),c=s(t,n-e,n,i),l=h(o)+h(c),u=e;u<n-e;u++){var p=t.children[u];a(o,t.leaf?i(p):p),l+=h(o)}for(var f=n-e-1;f>=e;f--){var d=t.children[f];a(c,t.leaf?i(d):d),l+=h(c)}return l},r.prototype._adjustParentBBoxes=function(t,e,n){for(var r=n;r>=0;r--)a(e[r],t)},r.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},r}()},68384:function(t,e,n){var r,i,o=n(34155),s=n(17187).EventEmitter,a=n(35717),c=n(6265)("geolocation"),l=0,u=new s;function h(){s.call(this),this.watching=!1;var t=this;this.changeHandler=function(e){t.emit("change",e)}}u.setMaxListeners(0),t.exports=e=u,e.options={},e.getCurrentPosition=function(t){if(l)if(r)c("get current location - cache hit"),o.nextTick((function(){t(null,r)}));else{function n(e){u.removeListener("error",i),t(null,e)}function i(e){u.removeListener("change",n),t(e)}c("get current location - cache fetching"),u.once("change",n),u.once("error",i)}else c("get current location - cache miss"),navigator.geolocation.getCurrentPosition((function(e){t(null,e)}),(function(e){t(e)}),e.options)},e.createWatcher=function(t){var e=new h;return t&&e.on("change",t),e.start(),e},a(h,s),e.Watcher=h,h.prototype.start=function(){this.watching||(this.watching=!0,l++,c("start watcher"),u.on("change",this.changeHandler),1===l&&(c("start geolocation watch position"),i=navigator.geolocation.watchPosition((function(t){r=t,u.emit("change",t)}),(function(t){u.emit("error",t)}),this.options)))},h.prototype.stop=function(){this.watching&&(this.watching=!1,l--,u.removeListener("change",this.changeHandler),l||(c("clear geolocation watch"),navigator.geolocation.clearWatch(i)))}},6265:function(t,e,n){var r=n(25108);function i(t){return i.enabled(t)?function(e){var n;e=(n=e)instanceof Error?n.stack||n.message:n;var o=new Date,s=o-(i[t]||o);i[t]=o,e=t+" "+e+" +"+i.humanize(s),window.console&&r.log&&Function.prototype.apply.call(r.log,r,arguments)}:function(){}}t.exports=i,i.names=[],i.skips=[],i.enable=function(t){try{localStorage.debug=t}catch(t){}for(var e=(t||"").split(/[\s,]+/),n=e.length,r=0;r<n;r++)"-"===(t=e[r].replace("*",".*?"))[0]?i.skips.push(new RegExp("^"+t.substr(1)+"$")):i.names.push(new RegExp("^"+t+"$"))},i.disable=function(){i.enable("")},i.humanize=function(t){var e=6e4,n=60*e;return t>=n?(t/n).toFixed(1)+"h":t>=e?(t/e).toFixed(1)+"m":t>=1e3?(t/1e3|0)+"s":t+"ms"},i.enabled=function(t){for(var e=0,n=i.skips.length;e<n;e++)if(i.skips[e].test(t))return!1;for(e=0,n=i.names.length;e<n;e++)if(i.names[e].test(t))return!0;return!1};try{window.localStorage&&i.enable(localStorage.debug)}catch(t){}},40210:function(t,e,n){"use strict";var r,i=SyntaxError,o=Function,s=TypeError,a=function(t){try{return o('"use strict"; return ('+t+").constructor;")()}catch(t){}},c=Object.getOwnPropertyDescriptor;if(c)try{c({},"")}catch(t){c=null}var l=function(){throw new s},u=c?function(){try{return l}catch(t){try{return c(arguments,"callee").get}catch(t){return l}}}():l,h=n(41405)(),p=n(28185)(),f=Object.getPrototypeOf||(p?function(t){return t.__proto__}:null),d={},g="undefined"!=typeof Uint8Array&&f?f(Uint8Array):r,m={"%AggregateError%":"undefined"==typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":h&&f?f([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":d,"%AsyncGenerator%":d,"%AsyncGeneratorFunction%":d,"%AsyncIteratorPrototype%":d,"%Atomics%":"undefined"==typeof Atomics?r:Atomics,"%BigInt%":"undefined"==typeof BigInt?r:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?r:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":d,"%Int8Array%":"undefined"==typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h&&f?f(f([][Symbol.iterator]())):r,"%JSON%":"object"==typeof JSON?JSON:r,"%Map%":"undefined"==typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&h&&f?f((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?r:Promise,"%Proxy%":"undefined"==typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&h&&f?f((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h&&f?f(""[Symbol.iterator]()):r,"%Symbol%":h?Symbol:r,"%SyntaxError%":i,"%ThrowTypeError%":u,"%TypedArray%":g,"%TypeError%":s,"%Uint8Array%":"undefined"==typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?r:WeakSet};if(f)try{null.error}catch(t){var y=f(f(t));m["%Error.prototype%"]=y}var _=function t(e){var n;if("%AsyncFunction%"===e)n=a("async function () {}");else if("%GeneratorFunction%"===e)n=a("function* () {}");else if("%AsyncGeneratorFunction%"===e)n=a("async function* () {}");else if("%AsyncGenerator%"===e){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===e){var i=t("%AsyncGenerator%");i&&f&&(n=f(i.prototype))}return m[e]=n,n},v={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},x=n(58612),b=n(17642),w=x.call(Function.call,Array.prototype.concat),E=x.call(Function.apply,Array.prototype.splice),T=x.call(Function.call,String.prototype.replace),S=x.call(Function.call,String.prototype.slice),k=x.call(Function.call,RegExp.prototype.exec),A=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,M=/\\(\\)?/g,I=function(t,e){var n,r=t;if(b(v,r)&&(r="%"+(n=v[r])[0]+"%"),b(m,r)){var o=m[r];if(o===d&&(o=_(r)),void 0===o&&!e)throw new s("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:o}}throw new i("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new s('"allowMissing" argument must be a boolean');if(null===k(/^%?[^%]*%?$/,t))throw new i("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(t){var e=S(t,0,1),n=S(t,-1);if("%"===e&&"%"!==n)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==e)throw new i("invalid intrinsic syntax, expected opening `%`");var r=[];return T(t,A,(function(t,e,n,i){r[r.length]=n?T(i,M,"$1"):e||t})),r}(t),r=n.length>0?n[0]:"",o=I("%"+r+"%",e),a=o.name,l=o.value,u=!1,h=o.alias;h&&(r=h[0],E(n,w([0,1],h)));for(var p=1,f=!0;p<n.length;p+=1){var d=n[p],g=S(d,0,1),y=S(d,-1);if(('"'===g||"'"===g||"`"===g||'"'===y||"'"===y||"`"===y)&&g!==y)throw new i("property names with quotes must have matching quotes");if("constructor"!==d&&f||(u=!0),b(m,a="%"+(r+="."+d)+"%"))l=m[a];else if(null!=l){if(!(d in l)){if(!e)throw new s("base intrinsic for "+t+" exists, but the property is not available.");return}if(c&&p+1>=n.length){var _=c(l,d);l=(f=!!_)&&"get"in _&&!("originalValue"in _.get)?_.get:l[d]}else f=b(l,d),l=l[d];f&&!u&&(m[a]=l)}}return l}},27296:function(t,e,n){"use strict";var r=n(40210)("%Object.getOwnPropertyDescriptor%",!0);if(r)try{r([],"length")}catch(t){r=null}t.exports=r},50840:function(t,e,n){var r;!function(i,o,s,a){"use strict";var c,l=["","webkit","Moz","MS","ms","o"],u=o.createElement("div"),h="function",p=Math.round,f=Math.abs,d=Date.now;function g(t,e,n){return setTimeout(w(t,n),e)}function m(t,e,n){return!!Array.isArray(t)&&(y(t,n[e],n),!0)}function y(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==a)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function _(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),t.apply(this,arguments)}}c="function"!=typeof Object.assign?function(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==a&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var v=_((function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&t[r[i]]===a)&&(t[r[i]]=e[r[i]]),i++;return t}),"extend","Use `assign`."),x=_((function(t,e){return v(t,e,!0)}),"merge","Use `assign`.");function b(t,e,n){var r,i=e.prototype;(r=t.prototype=Object.create(i)).constructor=t,r._super=i,n&&c(r,n)}function w(t,e){return function(){return t.apply(e,arguments)}}function E(t,e){return typeof t==h?t.apply(e&&e[0]||a,e):t}function T(t,e){return t===a?e:t}function S(t,e,n){y(I(e),(function(e){t.addEventListener(e,n,!1)}))}function k(t,e,n){y(I(e),(function(e){t.removeEventListener(e,n,!1)}))}function A(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function M(t,e){return t.indexOf(e)>-1}function I(t){return t.trim().split(/\s+/g)}function C(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function O(t){return Array.prototype.slice.call(t,0)}function P(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var s=e?t[o][e]:t[o];C(i,s)<0&&r.push(t[o]),i[o]=s,o++}return n&&(r=e?r.sort((function(t,n){return t[e]>n[e]})):r.sort()),r}function L(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),o=0;o<l.length;){if((r=(n=l[o])?n+i:e)in t)return r;o++}return a}var D=1;function R(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||i}var N="ontouchstart"in i,j=L(i,"PointerEvent")!==a,z=N&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),B="touch",F="mouse",U=25,V=1,q=4,W=8,G=1,$=2,H=4,Z=8,Y=16,X=$|H,K=Z|Y,J=X|K,Q=["x","y"],tt=["clientX","clientY"];function et(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){E(t.options.enable,[t])&&n.handler(e)},this.init()}function nt(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=e&V&&r-i==0,s=e&(q|W)&&r-i==0;n.isFirst=!!o,n.isFinal=!!s,o&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=rt(e));i>1&&!n.firstMultiple?n.firstMultiple=rt(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,s=n.firstMultiple,c=s?s.center:o.center,l=e.center=it(r);e.timeStamp=d(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=ct(c,l),e.distance=at(c,l),function(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};e.eventType!==V&&o.eventType!==q||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y});e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}(n,e),e.offsetDirection=st(e.deltaX,e.deltaY);var u=ot(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=f(u.x)>f(u.y)?u.x:u.y,e.scale=s?(h=s.pointers,p=r,at(p[0],p[1],tt)/at(h[0],h[1],tt)):1,e.rotation=s?function(t,e){return ct(e[1],e[0],tt)+ct(t[1],t[0],tt)}(s.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,r,i,o,s=t.lastInterval||e,c=e.timeStamp-s.timeStamp;if(e.eventType!=W&&(c>U||s.velocity===a)){var l=e.deltaX-s.deltaX,u=e.deltaY-s.deltaY,h=ot(c,l,u);r=h.x,i=h.y,n=f(h.x)>f(h.y)?h.x:h.y,o=st(l,u),t.lastInterval=e}else n=s.velocity,r=s.velocityX,i=s.velocityY,o=s.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}(n,e);var h,p;var g=t.element;A(e.srcEvent.target,g)&&(g=e.srcEvent.target);e.target=g}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function rt(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:p(t.pointers[n].clientX),clientY:p(t.pointers[n].clientY)},n++;return{timeStamp:d(),pointers:e,center:it(e),deltaX:t.deltaX,deltaY:t.deltaY}}function it(t){var e=t.length;if(1===e)return{x:p(t[0].clientX),y:p(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:p(n/e),y:p(r/e)}}function ot(t,e,n){return{x:e/t||0,y:n/t||0}}function st(t,e){return t===e?G:f(t)>=f(e)?t<0?$:H:e<0?Z:Y}function at(t,e,n){n||(n=Q);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function ct(t,e,n){n||(n=Q);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}et.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(R(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&k(this.element,this.evEl,this.domHandler),this.evTarget&&k(this.target,this.evTarget,this.domHandler),this.evWin&&k(R(this.element),this.evWin,this.domHandler)}};var lt={mousedown:V,mousemove:2,mouseup:q},ut="mousedown",ht="mousemove mouseup";function pt(){this.evEl=ut,this.evWin=ht,this.pressed=!1,et.apply(this,arguments)}b(pt,et,{handler:function(t){var e=lt[t.type];e&V&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=q),this.pressed&&(e&q&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:F,srcEvent:t}))}});var ft={pointerdown:V,pointermove:2,pointerup:q,pointercancel:W,pointerout:W},dt={2:B,3:"pen",4:F,5:"kinect"},gt="pointerdown",mt="pointermove pointerup pointercancel";function yt(){this.evEl=gt,this.evWin=mt,et.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(gt="MSPointerDown",mt="MSPointerMove MSPointerUp MSPointerCancel"),b(yt,et,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=ft[r],o=dt[t.pointerType]||t.pointerType,s=o==B,a=C(e,t.pointerId,"pointerId");i&V&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):i&(q|W)&&(n=!0),a<0||(e[a]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(a,1))}});var _t={touchstart:V,touchmove:2,touchend:q,touchcancel:W};function vt(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,et.apply(this,arguments)}function xt(t,e){var n=O(t.touches),r=O(t.changedTouches);return e&(q|W)&&(n=P(n.concat(r),"identifier",!0)),[n,r]}b(vt,et,{handler:function(t){var e=_t[t.type];if(e===V&&(this.started=!0),this.started){var n=xt.call(this,t,e);e&(q|W)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:B,srcEvent:t})}}});var bt={touchstart:V,touchmove:2,touchend:q,touchcancel:W},wt="touchstart touchmove touchend touchcancel";function Et(){this.evTarget=wt,this.targetIds={},et.apply(this,arguments)}function Tt(t,e){var n=O(t.touches),r=this.targetIds;if(e&(2|V)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,s=O(t.changedTouches),a=[],c=this.target;if(o=n.filter((function(t){return A(t.target,c)})),e===V)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<s.length;)r[s[i].identifier]&&a.push(s[i]),e&(q|W)&&delete r[s[i].identifier],i++;return a.length?[P(o.concat(a),"identifier",!0),a]:void 0}b(Et,et,{handler:function(t){var e=bt[t.type],n=Tt.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:B,srcEvent:t})}});var St=2500;function kt(){et.apply(this,arguments);var t=w(this.handler,this);this.touch=new Et(this.manager,t),this.mouse=new pt(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function At(t,e){t&V?(this.primaryTouch=e.changedPointers[0].identifier,Mt.call(this,e)):t&(q|W)&&Mt.call(this,e)}function Mt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)}),St)}}function It(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),s=Math.abs(n-i.y);if(o<=25&&s<=25)return!0}return!1}b(kt,et,{handler:function(t,e,n){var r=n.pointerType==B,i=n.pointerType==F;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)At.call(this,e,n);else if(i&&It.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ct=L(u.style,"touchAction"),Ot=Ct!==a,Pt="compute",Lt="auto",Dt="manipulation",Rt="none",Nt="pan-x",jt="pan-y",zt=function(){if(!Ot)return!1;var t={},e=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){t[n]=!e||i.CSS.supports("touch-action",n)})),t}();function Bt(t,e){this.manager=t,this.set(e)}Bt.prototype={set:function(t){t==Pt&&(t=this.compute()),Ot&&this.manager.element.style&&zt[t]&&(this.manager.element.style[Ct]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return y(this.manager.recognizers,(function(e){E(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(M(t,Rt))return Rt;var e=M(t,Nt),n=M(t,jt);if(e&&n)return Rt;if(e||n)return e?Nt:jt;if(M(t,Dt))return Dt;return Lt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,i=M(r,Rt)&&!zt[Rt],o=M(r,jt)&&!zt[jt],s=M(r,Nt)&&!zt[Nt];if(i){var a=1===t.pointers.length,c=t.distance<2,l=t.deltaTime<250;if(a&&c&&l)return}if(!s||!o)return i||o&&n&X||s&&n&K?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Ft=1,Ut=32;function Vt(t){this.options=c({},this.defaults,t||{}),this.id=D++,this.manager=null,this.options.enable=T(this.options.enable,!0),this.state=Ft,this.simultaneous={},this.requireFail=[]}function qt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function Wt(t){return t==Y?"down":t==Z?"up":t==$?"left":t==H?"right":""}function Gt(t,e){var n=e.manager;return n?n.get(t):t}function $t(){Vt.apply(this,arguments)}function Ht(){$t.apply(this,arguments),this.pX=null,this.pY=null}function Zt(){$t.apply(this,arguments)}function Yt(){Vt.apply(this,arguments),this._timer=null,this._input=null}function Xt(){$t.apply(this,arguments)}function Kt(){$t.apply(this,arguments)}function Jt(){Vt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Qt(t,e){return(e=e||{}).recognizers=T(e.recognizers,Qt.defaults.preset),new te(t,e)}Vt.prototype={defaults:{},set:function(t){return c(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(m(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Gt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return m(t,"dropRecognizeWith",this)||(t=Gt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(m(t,"requireFailure",this))return this;var e=this.requireFail;return-1===C(e,t=Gt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(m(t,"dropRequireFailure",this))return this;t=Gt(t,this);var e=C(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<8&&r(e.options.event+qt(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=8&&r(e.options.event+qt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=Ut},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(Ut|Ft)))return!1;t++}return!0},recognize:function(t){var e=c({},t);if(!E(this.options.enable,[this,e]))return this.reset(),void(this.state=Ut);56&this.state&&(this.state=Ft),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},b($t,Vt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=6&e,i=this.attrTest(t);return r&&(n&W||!i)?16|e:r||i?n&q?8|e:2&e?4|e:2:Ut}}),b(Ht,$t,{defaults:{event:"pan",threshold:10,pointers:1,direction:J},getTouchAction:function(){var t=this.options.direction,e=[];return t&X&&e.push(jt),t&K&&e.push(Nt),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,s=t.deltaY;return i&e.direction||(e.direction&X?(i=0===o?G:o<0?$:H,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===s?G:s<0?Z:Y,n=s!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return $t.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Wt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),b(Zt,$t,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Rt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),b(Yt,Vt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Lt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||t.eventType&(q|W)&&!i)this.reset();else if(t.eventType&V)this.reset(),this._timer=g((function(){this.state=8,this.tryEmit()}),e.time,this);else if(t.eventType&q)return 8;return Ut},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&t.eventType&q?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=d(),this.manager.emit(this.options.event,this._input)))}}),b(Xt,$t,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Rt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),b(Kt,$t,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:X|K,pointers:1},getTouchAction:function(){return Ht.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(X|K)?e=t.overallVelocity:n&X?e=t.overallVelocityX:n&K&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&f(e)>this.options.velocity&&t.eventType&q},emit:function(t){var e=Wt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),b(Jt,Vt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Dt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),t.eventType&V&&0===this.count)return this.failTimeout();if(r&&i&&n){if(t.eventType!=q)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||at(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&o?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=g((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return Ut},failTimeout:function(){return this._timer=g((function(){this.state=Ut}),this.options.interval,this),Ut},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Qt.VERSION="2.0.7",Qt.defaults={domEvents:!1,touchAction:Pt,enable:!0,inputTarget:null,inputClass:null,preset:[[Xt,{enable:!1}],[Zt,{enable:!1},["rotate"]],[Kt,{direction:X}],[Ht,{direction:X},["swipe"]],[Jt],[Jt,{event:"doubletap",taps:2},["tap"]],[Yt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function te(t,e){var n;this.options=c({},Qt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(j?yt:z?Et:N?kt:pt))(n,nt),this.touchAction=new Bt(this,this.options.touchAction),ee(this,!0),y(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function ee(t,e){var n,r=t.element;r.style&&(y(t.options.cssProps,(function(i,o){n=L(r.style,o),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}te.prototype={set:function(t){return c(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var r=this.recognizers,i=e.curRecognizer;(!i||i&&8&i.state)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&14&n.state&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof Vt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(m(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(m(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=C(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==a&&e!==a){var n=this.handlers;return y(I(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(t!==a){var n=this.handlers;return y(I(t),(function(t){e?n[t]&&n[t].splice(C(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&ee(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},c(Qt,{INPUT_START:V,INPUT_MOVE:2,INPUT_END:q,INPUT_CANCEL:W,STATE_POSSIBLE:Ft,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Ut,DIRECTION_NONE:G,DIRECTION_LEFT:$,DIRECTION_RIGHT:H,DIRECTION_UP:Z,DIRECTION_DOWN:Y,DIRECTION_HORIZONTAL:X,DIRECTION_VERTICAL:K,DIRECTION_ALL:J,Manager:te,Input:et,TouchAction:Bt,TouchInput:Et,MouseInput:pt,PointerEventInput:yt,TouchMouseInput:kt,SingleTouchInput:vt,Recognizer:Vt,AttrRecognizer:$t,Tap:Jt,Pan:Ht,Swipe:Kt,Pinch:Zt,Rotate:Xt,Press:Yt,on:S,off:k,each:y,merge:x,extend:v,assign:c,inherit:b,bindFn:w,prefixed:L}),(void 0!==i?i:"undefined"!=typeof self?self:{}).Hammer=Qt,(r=function(){return Qt}.call(e,n,e,t))===a||(t.exports=r)}(window,document)},31044:function(t,e,n){"use strict";var r=n(40210)("%Object.defineProperty%",!0),i=function(){if(r)try{return r({},"a",{value:1}),!0}catch(t){return!1}return!1};i.hasArrayLengthDefineBug=function(){if(!i())return null;try{return 1!==r([],"length",{value:1}).length}catch(t){return!0}},t.exports=i},28185:function(t){"use strict";var e={foo:{}},n=Object;t.exports=function(){return{__proto__:e}.foo===e.foo&&!({__proto__:null}instanceof n)}},41405:function(t,e,n){"use strict";var r="undefined"!=typeof Symbol&&Symbol,i=n(55419);t.exports=function(){return"function"==typeof r&&("function"==typeof Symbol&&("symbol"==typeof r("foo")&&("symbol"==typeof Symbol("bar")&&i())))}},55419:function(t){"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),n=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var r=Object.getOwnPropertySymbols(t);if(1!==r.length||r[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(t,e);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},96410:function(t,e,n){"use strict";var r=n(55419);t.exports=function(){return r()&&!!Symbol.toStringTag}},17642:function(t){"use strict";var e={}.hasOwnProperty,n=Function.prototype.call;t.exports=n.bind?n.bind(e):function(t,r){return n.call(e,t,r)}},80645:function(t,e){e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,l=c>>1,u=-7,h=n?i-1:0,p=n?-1:1,f=t[e+h];for(h+=p,o=f&(1<<-u)-1,f>>=-u,u+=a;u>0;o=256*o+t[e+h],h+=p,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=r;u>0;s=256*s+t[e+h],h+=p,u-=8);if(0===o)o=1-l;else{if(o===c)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),o-=l}return(f?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,c,l=8*o-i-1,u=(1<<l)-1,h=u>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),(e+=s+h>=1?p/c:p*Math.pow(2,1-h))*c>=2&&(s++,c/=2),s+h>=u?(a=0,s=u):s+h>=1?(a=(e*c-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[n+f]=255&a,f+=d,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;t[n+f]=255&s,f+=d,s/=256,l-=8);t[n+f-d]|=128*g}},35717:function(t){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},82584:function(t,e,n){"use strict";var r=n(96410)(),i=n(21924)("Object.prototype.toString"),o=function(t){return!(r&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===i(t)},s=function(t){return!!o(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==i(t)&&"[object Function]"===i(t.callee)},a=function(){return o(arguments)}();o.isLegacyArguments=s,t.exports=a?o:s},95320:function(t){"use strict";var e,n,r=Function.prototype.toString,i="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof i&&"function"==typeof Object.defineProperty)try{e=Object.defineProperty({},"length",{get:function(){throw n}}),n={},i((function(){throw 42}),null,e)}catch(t){t!==n&&(i=null)}else i=null;var o=/^\s*class\b/,s=function(t){try{var e=r.call(t);return o.test(e)}catch(t){return!1}},a=function(t){try{return!s(t)&&(r.call(t),!0)}catch(t){return!1}},c=Object.prototype.toString,l="function"==typeof Symbol&&!!Symbol.toStringTag,u=!(0 in[,]),h=function(){return!1};if("object"==typeof document){var p=document.all;c.call(p)===c.call(document.all)&&(h=function(t){if((u||!t)&&(void 0===t||"object"==typeof t))try{var e=c.call(t);return("[object HTMLAllCollection]"===e||"[object HTML document.all class]"===e||"[object HTMLCollection]"===e||"[object Object]"===e)&&null==t("")}catch(t){}return!1})}t.exports=i?function(t){if(h(t))return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;try{i(t,null,e)}catch(t){if(t!==n)return!1}return!s(t)&&a(t)}:function(t){if(h(t))return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if(l)return a(t);if(s(t))return!1;var e=c.call(t);return!("[object Function]"!==e&&"[object GeneratorFunction]"!==e&&!/^\[object HTML/.test(e))&&a(t)}},18923:function(t,e,n){"use strict";var r=Date.prototype.getDay,i=Object.prototype.toString,o=n(96410)();t.exports=function(t){return"object"==typeof t&&null!==t&&(o?function(t){try{return r.call(t),!0}catch(t){return!1}}(t):"[object Date]"===i.call(t))}},48662:function(t,e,n){"use strict";var r,i=Object.prototype.toString,o=Function.prototype.toString,s=/^\s*(?:function)?\*/,a=n(96410)(),c=Object.getPrototypeOf;t.exports=function(t){if("function"!=typeof t)return!1;if(s.test(o.call(t)))return!0;if(!a)return"[object GeneratorFunction]"===i.call(t);if(!c)return!1;if(void 0===r){var e=function(){if(!a)return!1;try{return Function("return function*() {}")()}catch(t){}}();r=!!e&&c(e)}return c(t)===r}},98611:function(t){"use strict";t.exports=function(t){return t!=t}},20360:function(t,e,n){"use strict";var r=n(55559),i=n(4289),o=n(98611),s=n(29415),a=n(23194),c=r(s(),Number);i(c,{getPolyfill:s,implementation:o,shim:a}),t.exports=c},29415:function(t,e,n){"use strict";var r=n(98611);t.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:r}},23194:function(t,e,n){"use strict";var r=n(4289),i=n(29415);t.exports=function(){var t=i();return r(Number,{isNaN:t},{isNaN:function(){return Number.isNaN!==t}}),t}},98420:function(t,e,n){"use strict";var r,i,o,s,a=n(21924),c=n(96410)();if(c){r=a("Object.prototype.hasOwnProperty"),i=a("RegExp.prototype.exec"),o={};var l=function(){throw o};s={toString:l,valueOf:l},"symbol"==typeof Symbol.toPrimitive&&(s[Symbol.toPrimitive]=l)}var u=a("Object.prototype.toString"),h=Object.getOwnPropertyDescriptor;t.exports=c?function(t){if(!t||"object"!=typeof t)return!1;var e=h(t,"lastIndex");if(!(e&&r(e,"value")))return!1;try{i(t,s)}catch(t){return t===o}}:function(t){return!(!t||"object"!=typeof t&&"function"!=typeof t)&&"[object RegExp]"===u(t)}},85692:function(t,e,n){"use strict";var r=n(86430);t.exports=function(t){return!!r(t)}},19755:function(t,e){var n;!function(e,n){"use strict";"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,(function(r,i){"use strict";var o=[],s=Object.getPrototypeOf,a=o.slice,c=o.flat?function(t){return o.flat.call(t)}:function(t){return o.concat.apply([],t)},l=o.push,u=o.indexOf,h={},p=h.toString,f=h.hasOwnProperty,d=f.toString,g=d.call(Object),m={},y=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},_=function(t){return null!=t&&t===t.window},v=r.document,x={type:!0,src:!0,nonce:!0,noModule:!0};function b(t,e,n){var r,i,o=(n=n||v).createElement("script");if(o.text=t,e)for(r in x)(i=e[r]||e.getAttribute&&e.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?h[p.call(t)]||"object":typeof t}var E="3.7.1",T=/HTML$/i,S=function(t,e){return new S.fn.init(t,e)};function k(t){var e=!!t&&"length"in t&&t.length,n=w(t);return!y(t)&&!_(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function A(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}S.fn=S.prototype={jquery:E,constructor:S,length:0,toArray:function(){return a.call(this)},get:function(t){return null==t?a.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=S.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return S.each(this,t)},map:function(t){return this.pushStack(S.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(S.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:o.sort,splice:o.splice},S.extend=S.fn.extend=function(){var t,e,n,r,i,o,s=arguments[0]||{},a=1,c=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[a]||{},a++),"object"==typeof s||y(s)||(s={}),a===c&&(s=this,a--);a<c;a++)if(null!=(t=arguments[a]))for(e in t)r=t[e],"__proto__"!==e&&s!==r&&(l&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=s[e],o=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,s[e]=S.extend(l,o,r)):void 0!==r&&(s[e]=r));return s},S.extend({expando:"jQuery"+(E+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==p.call(t))&&(!(e=s(t))||"function"==typeof(n=f.call(e,"constructor")&&e.constructor)&&d.call(n)===g)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){b(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,r=0;if(k(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},text:function(t){var e,n="",r=0,i=t.nodeType;if(!i)for(;e=t[r++];)n+=S.text(e);return 1===i||11===i?t.textContent:9===i?t.documentElement.textContent:3===i||4===i?t.nodeValue:n},makeArray:function(t,e){var n=e||[];return null!=t&&(k(Object(t))?S.merge(n,"string"==typeof t?[t]:t):l.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:u.call(e,t,n)},isXMLDoc:function(t){var e=t&&t.namespaceURI,n=t&&(t.ownerDocument||t).documentElement;return!T.test(e||n&&n.nodeName||"HTML")},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,o=t.length,s=!n;i<o;i++)!e(t[i],i)!==s&&r.push(t[i]);return r},map:function(t,e,n){var r,i,o=0,s=[];if(k(t))for(r=t.length;o<r;o++)null!=(i=e(t[o],o,n))&&s.push(i);else for(o in t)null!=(i=e(t[o],o,n))&&s.push(i);return c(s)},guid:1,support:m}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=o[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){h["[object "+e+"]"]=e.toLowerCase()}));var M=o.pop,I=o.sort,C=o.splice,O="[\\x20\\t\\r\\n\\f]",P=new RegExp("^"+O+"+|((?:^|[^\\\\])(?:\\\\.)*)"+O+"+$","g");S.contains=function(t,e){var n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(t.contains?t.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))};var L=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function D(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t}S.escapeSelector=function(t){return(t+"").replace(L,D)};var R=v,N=l;!function(){var t,e,n,i,s,c,l,h,p,d,g=N,y=S.expando,_=0,v=0,x=tt(),b=tt(),w=tt(),E=tt(),T=function(t,e){return t===e&&(s=!0),0},k="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="(?:\\\\[\\da-fA-F]{1,6}"+O+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",D="\\["+O+"*("+L+")(?:"+O+"*([*^$|!~]?=)"+O+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+O+"*\\]",j=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+D+")*)|.*)\\)|)",z=new RegExp(O+"+","g"),B=new RegExp("^"+O+"*,"+O+"*"),F=new RegExp("^"+O+"*([>+~]|"+O+")"+O+"*"),U=new RegExp(O+"|>"),V=new RegExp(j),q=new RegExp("^"+L+"$"),W={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+D),PSEUDO:new RegExp("^"+j),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+O+"*(even|odd|(([+-]|)(\\d*)n|)"+O+"*(?:([+-]|)"+O+"*(\\d+)|))"+O+"*\\)|)","i"),bool:new RegExp("^(?:"+k+")$","i"),needsContext:new RegExp("^"+O+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+O+"*((?:-\\d)?\\d*)"+O+"*\\)|)(?=[^-]|$)","i")},G=/^(?:input|select|textarea|button)$/i,$=/^h\d$/i,H=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Z=/[+~]/,Y=new RegExp("\\\\[\\da-fA-F]{1,6}"+O+"?|\\\\([^\\r\\n\\f])","g"),X=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},K=function(){ct()},J=pt((function(t){return!0===t.disabled&&A(t,"fieldset")}),{dir:"parentNode",next:"legend"});try{g.apply(o=a.call(R.childNodes),R.childNodes),o[R.childNodes.length].nodeType}catch(t){g={apply:function(t,e){N.apply(t,a.call(e))},call:function(t){N.apply(t,a.call(arguments,1))}}}function Q(t,e,n,r){var i,o,s,a,l,u,f,d=e&&e.ownerDocument,_=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==_&&9!==_&&11!==_)return n;if(!r&&(ct(e),e=e||c,h)){if(11!==_&&(l=H.exec(t)))if(i=l[1]){if(9===_){if(!(s=e.getElementById(i)))return n;if(s.id===i)return g.call(n,s),n}else if(d&&(s=d.getElementById(i))&&Q.contains(e,s)&&s.id===i)return g.call(n,s),n}else{if(l[2])return g.apply(n,e.getElementsByTagName(t)),n;if((i=l[3])&&e.getElementsByClassName)return g.apply(n,e.getElementsByClassName(i)),n}if(!(E[t+" "]||p&&p.test(t))){if(f=t,d=e,1===_&&(U.test(t)||F.test(t))){for((d=Z.test(t)&&at(e.parentNode)||e)==e&&m.scope||((a=e.getAttribute("id"))?a=S.escapeSelector(a):e.setAttribute("id",a=y)),o=(u=ut(t)).length;o--;)u[o]=(a?"#"+a:":scope")+" "+ht(u[o]);f=u.join(",")}try{return g.apply(n,d.querySelectorAll(f)),n}catch(e){E(t,!0)}finally{a===y&&e.removeAttribute("id")}}}return _t(t.replace(P,"$1"),e,n,r)}function tt(){var t=[];return function n(r,i){return t.push(r+" ")>e.cacheLength&&delete n[t.shift()],n[r+" "]=i}}function et(t){return t[y]=!0,t}function nt(t){var e=c.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function rt(t){return function(e){return A(e,"input")&&e.type===t}}function it(t){return function(e){return(A(e,"input")||A(e,"button"))&&e.type===t}}function ot(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&J(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function st(t){return et((function(e){return e=+e,et((function(n,r){for(var i,o=t([],n.length,e),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))}))}))}function at(t){return t&&void 0!==t.getElementsByTagName&&t}function ct(t){var n,r=t?t.ownerDocument||t:R;return r!=c&&9===r.nodeType&&r.documentElement?(l=(c=r).documentElement,h=!S.isXMLDoc(c),d=l.matches||l.webkitMatchesSelector||l.msMatchesSelector,l.msMatchesSelector&&R!=c&&(n=c.defaultView)&&n.top!==n&&n.addEventListener("unload",K),m.getById=nt((function(t){return l.appendChild(t).id=S.expando,!c.getElementsByName||!c.getElementsByName(S.expando).length})),m.disconnectedMatch=nt((function(t){return d.call(t,"*")})),m.scope=nt((function(){return c.querySelectorAll(":scope")})),m.cssHas=nt((function(){try{return c.querySelector(":has(*,:jqfake)"),!1}catch(t){return!0}})),m.getById?(e.filter.ID=function(t){var e=t.replace(Y,X);return function(t){return t.getAttribute("id")===e}},e.find.ID=function(t,e){if(void 0!==e.getElementById&&h){var n=e.getElementById(t);return n?[n]:[]}}):(e.filter.ID=function(t){var e=t.replace(Y,X);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},e.find.ID=function(t,e){if(void 0!==e.getElementById&&h){var n,r,i,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(i=e.getElementsByName(t),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),e.find.TAG=function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):e.querySelectorAll(t)},e.find.CLASS=function(t,e){if(void 0!==e.getElementsByClassName&&h)return e.getElementsByClassName(t)},p=[],nt((function(t){var e;l.appendChild(t).innerHTML="<a id='"+y+"' href='' disabled='disabled'></a><select id='"+y+"-\r\\' disabled='disabled'><option selected=''></option></select>",t.querySelectorAll("[selected]").length||p.push("\\["+O+"*(?:value|"+k+")"),t.querySelectorAll("[id~="+y+"-]").length||p.push("~="),t.querySelectorAll("a#"+y+"+*").length||p.push(".#.+[+~]"),t.querySelectorAll(":checked").length||p.push(":checked"),(e=c.createElement("input")).setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),l.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&p.push(":enabled",":disabled"),(e=c.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||p.push("\\["+O+"*name"+O+"*="+O+"*(?:''|\"\")")})),m.cssHas||p.push(":has"),p=p.length&&new RegExp(p.join("|")),T=function(t,e){if(t===e)return s=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!m.sortDetached&&e.compareDocumentPosition(t)===n?t===c||t.ownerDocument==R&&Q.contains(R,t)?-1:e===c||e.ownerDocument==R&&Q.contains(R,e)?1:i?u.call(i,t)-u.call(i,e):0:4&n?-1:1)},c):c}for(t in Q.matches=function(t,e){return Q(t,null,null,e)},Q.matchesSelector=function(t,e){if(ct(t),h&&!E[e+" "]&&(!p||!p.test(e)))try{var n=d.call(t,e);if(n||m.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){E(e,!0)}return Q(e,c,null,[t]).length>0},Q.contains=function(t,e){return(t.ownerDocument||t)!=c&&ct(t),S.contains(t,e)},Q.attr=function(t,n){(t.ownerDocument||t)!=c&&ct(t);var r=e.attrHandle[n.toLowerCase()],i=r&&f.call(e.attrHandle,n.toLowerCase())?r(t,n,!h):void 0;return void 0!==i?i:t.getAttribute(n)},Q.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},S.uniqueSort=function(t){var e,n=[],r=0,o=0;if(s=!m.sortStable,i=!m.sortStable&&a.call(t,0),I.call(t,T),s){for(;e=t[o++];)e===t[o]&&(r=n.push(o));for(;r--;)C.call(t,n[r],1)}return i=null,t},S.fn.uniqueSort=function(){return this.pushStack(S.uniqueSort(a.apply(this)))},e=S.expr={cacheLength:50,createPseudo:et,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Y,X),t[3]=(t[3]||t[4]||t[5]||"").replace(Y,X),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||Q.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&Q.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return W.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&V.test(n)&&(e=ut(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Y,X).toLowerCase();return"*"===t?function(){return!0}:function(t){return A(t,e)}},CLASS:function(t){var e=x[t+" "];return e||(e=new RegExp("(^|"+O+")"+t+"("+O+"|$)"))&&x(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(r){var i=Q.attr(r,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&i.indexOf(n)>-1:"$="===e?n&&i.slice(-n.length)===n:"~="===e?(" "+i.replace(z," ")+" ").indexOf(n)>-1:"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,c){var l,u,h,p,f,d=o!==s?"nextSibling":"previousSibling",g=e.parentNode,m=a&&e.nodeName.toLowerCase(),v=!c&&!a,x=!1;if(g){if(o){for(;d;){for(h=e;h=h[d];)if(a?A(h,m):1===h.nodeType)return!1;f=d="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?g.firstChild:g.lastChild],s&&v){for(x=(p=(l=(u=g[y]||(g[y]={}))[t]||[])[0]===_&&l[1])&&l[2],h=p&&g.childNodes[p];h=++p&&h&&h[d]||(x=p=0)||f.pop();)if(1===h.nodeType&&++x&&h===e){u[t]=[_,p,x];break}}else if(v&&(x=p=(l=(u=e[y]||(e[y]={}))[t]||[])[0]===_&&l[1]),!1===x)for(;(h=++p&&h&&h[d]||(x=p=0)||f.pop())&&(!(a?A(h,m):1===h.nodeType)||!++x||(v&&((u=h[y]||(h[y]={}))[t]=[_,x]),h!==e)););return(x-=i)===r||x%r==0&&x/r>=0}}},PSEUDO:function(t,n){var r,i=e.pseudos[t]||e.setFilters[t.toLowerCase()]||Q.error("unsupported pseudo: "+t);return i[y]?i(n):i.length>1?(r=[t,t,"",n],e.setFilters.hasOwnProperty(t.toLowerCase())?et((function(t,e){for(var r,o=i(t,n),s=o.length;s--;)t[r=u.call(t,o[s])]=!(e[r]=o[s])})):function(t){return i(t,0,r)}):i}},pseudos:{not:et((function(t){var e=[],n=[],r=yt(t.replace(P,"$1"));return r[y]?et((function(t,e,n,i){for(var o,s=r(t,null,i,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))})):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}})),has:et((function(t){return function(e){return Q(t,e).length>0}})),contains:et((function(t){return t=t.replace(Y,X),function(e){return(e.textContent||S.text(e)).indexOf(t)>-1}})),lang:et((function(t){return q.test(t||"")||Q.error("unsupported lang: "+t),t=t.replace(Y,X).toLowerCase(),function(e){var n;do{if(n=h?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(t){var e=r.location&&r.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===l},focus:function(t){return t===function(){try{return c.activeElement}catch(t){}}()&&c.hasFocus()&&!!(t.type||t.href||~t.tabIndex)},enabled:ot(!1),disabled:ot(!0),checked:function(t){return A(t,"input")&&!!t.checked||A(t,"option")&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!e.pseudos.empty(t)},header:function(t){return $.test(t.nodeName)},input:function(t){return G.test(t.nodeName)},button:function(t){return A(t,"input")&&"button"===t.type||A(t,"button")},text:function(t){var e;return A(t,"input")&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:st((function(){return[0]})),last:st((function(t,e){return[e-1]})),eq:st((function(t,e,n){return[n<0?n+e:n]})),even:st((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:st((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:st((function(t,e,n){var r;for(r=n<0?n+e:n>e?e:n;--r>=0;)t.push(r);return t})),gt:st((function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t}))}},e.pseudos.nth=e.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})e.pseudos[t]=rt(t);for(t in{submit:!0,reset:!0})e.pseudos[t]=it(t);function lt(){}function ut(t,n){var r,i,o,s,a,c,l,u=b[t+" "];if(u)return n?0:u.slice(0);for(a=t,c=[],l=e.preFilter;a;){for(s in r&&!(i=B.exec(a))||(i&&(a=a.slice(i[0].length)||a),c.push(o=[])),r=!1,(i=F.exec(a))&&(r=i.shift(),o.push({value:r,type:i[0].replace(P," ")}),a=a.slice(r.length)),e.filter)!(i=W[s].exec(a))||l[s]&&!(i=l[s](i))||(r=i.shift(),o.push({value:r,type:s,matches:i}),a=a.slice(r.length));if(!r)break}return n?a.length:a?Q.error(t):b(t,c).slice(0)}function ht(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function pt(t,e,n){var r=e.dir,i=e.next,o=i||r,s=n&&"parentNode"===o,a=v++;return e.first?function(e,n,i){for(;e=e[r];)if(1===e.nodeType||s)return t(e,n,i);return!1}:function(e,n,c){var l,u,h=[_,a];if(c){for(;e=e[r];)if((1===e.nodeType||s)&&t(e,n,c))return!0}else for(;e=e[r];)if(1===e.nodeType||s)if(u=e[y]||(e[y]={}),i&&A(e,i))e=e[r]||e;else{if((l=u[o])&&l[0]===_&&l[1]===a)return h[2]=l[2];if(u[o]=h,h[2]=t(e,n,c))return!0}return!1}}function ft(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function dt(t,e,n,r,i){for(var o,s=[],a=0,c=t.length,l=null!=e;a<c;a++)(o=t[a])&&(n&&!n(o,r,i)||(s.push(o),l&&e.push(a)));return s}function gt(t,e,n,r,i,o){return r&&!r[y]&&(r=gt(r)),i&&!i[y]&&(i=gt(i,o)),et((function(o,s,a,c){var l,h,p,f,d=[],m=[],y=s.length,_=o||function(t,e,n){for(var r=0,i=e.length;r<i;r++)Q(t,e[r],n);return n}(e||"*",a.nodeType?[a]:a,[]),v=!t||!o&&e?_:dt(_,d,t,a,c);if(n?n(v,f=i||(o?t:y||r)?[]:s,a,c):f=v,r)for(l=dt(f,m),r(l,[],a,c),h=l.length;h--;)(p=l[h])&&(f[m[h]]=!(v[m[h]]=p));if(o){if(i||t){if(i){for(l=[],h=f.length;h--;)(p=f[h])&&l.push(v[h]=p);i(null,f=[],l,c)}for(h=f.length;h--;)(p=f[h])&&(l=i?u.call(o,p):d[h])>-1&&(o[l]=!(s[l]=p))}}else f=dt(f===s?f.splice(y,f.length):f),i?i(null,s,f,c):g.apply(s,f)}))}function mt(t){for(var r,i,o,s=t.length,a=e.relative[t[0].type],c=a||e.relative[" "],l=a?1:0,h=pt((function(t){return t===r}),c,!0),p=pt((function(t){return u.call(r,t)>-1}),c,!0),f=[function(t,e,i){var o=!a&&(i||e!=n)||((r=e).nodeType?h(t,e,i):p(t,e,i));return r=null,o}];l<s;l++)if(i=e.relative[t[l].type])f=[pt(ft(f),i)];else{if((i=e.filter[t[l].type].apply(null,t[l].matches))[y]){for(o=++l;o<s&&!e.relative[t[o].type];o++);return gt(l>1&&ft(f),l>1&&ht(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(P,"$1"),i,l<o&&mt(t.slice(l,o)),o<s&&mt(t=t.slice(o)),o<s&&ht(t))}f.push(i)}return ft(f)}function yt(t,r){var i,o=[],s=[],a=w[t+" "];if(!a){for(r||(r=ut(t)),i=r.length;i--;)(a=mt(r[i]))[y]?o.push(a):s.push(a);a=w(t,function(t,r){var i=r.length>0,o=t.length>0,s=function(s,a,l,u,p){var f,d,m,y=0,v="0",x=s&&[],b=[],w=n,E=s||o&&e.find.TAG("*",p),T=_+=null==w?1:Math.random()||.1,k=E.length;for(p&&(n=a==c||a||p);v!==k&&null!=(f=E[v]);v++){if(o&&f){for(d=0,a||f.ownerDocument==c||(ct(f),l=!h);m=t[d++];)if(m(f,a||c,l)){g.call(u,f);break}p&&(_=T)}i&&((f=!m&&f)&&y--,s&&x.push(f))}if(y+=v,i&&v!==y){for(d=0;m=r[d++];)m(x,b,a,l);if(s){if(y>0)for(;v--;)x[v]||b[v]||(b[v]=M.call(u));b=dt(b)}g.apply(u,b),p&&!s&&b.length>0&&y+r.length>1&&S.uniqueSort(u)}return p&&(_=T,n=w),x};return i?et(s):s}(s,o)),a.selector=t}return a}function _t(t,n,r,i){var o,s,a,c,l,u="function"==typeof t&&t,p=!i&&ut(t=u.selector||t);if(r=r||[],1===p.length){if((s=p[0]=p[0].slice(0)).length>2&&"ID"===(a=s[0]).type&&9===n.nodeType&&h&&e.relative[s[1].type]){if(!(n=(e.find.ID(a.matches[0].replace(Y,X),n)||[])[0]))return r;u&&(n=n.parentNode),t=t.slice(s.shift().value.length)}for(o=W.needsContext.test(t)?0:s.length;o--&&(a=s[o],!e.relative[c=a.type]);)if((l=e.find[c])&&(i=l(a.matches[0].replace(Y,X),Z.test(s[0].type)&&at(n.parentNode)||n))){if(s.splice(o,1),!(t=i.length&&ht(s)))return g.apply(r,i),r;break}}return(u||yt(t,p))(i,n,!h,r,!n||Z.test(t)&&at(n.parentNode)||n),r}lt.prototype=e.filters=e.pseudos,e.setFilters=new lt,m.sortStable=y.split("").sort(T).join("")===y,ct(),m.sortDetached=nt((function(t){return 1&t.compareDocumentPosition(c.createElement("fieldset"))})),S.find=Q,S.expr[":"]=S.expr.pseudos,S.unique=S.uniqueSort,Q.compile=yt,Q.select=_t,Q.setDocument=ct,Q.tokenize=ut,Q.escape=S.escapeSelector,Q.getText=S.text,Q.isXML=S.isXMLDoc,Q.selectors=S.expr,Q.support=S.support,Q.uniqueSort=S.uniqueSort}();var j=function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&S(t).is(n))break;r.push(t)}return r},z=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},B=S.expr.match.needsContext,F=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function U(t,e,n){return y(e)?S.grep(t,(function(t,r){return!!e.call(t,r,t)!==n})):e.nodeType?S.grep(t,(function(t){return t===e!==n})):"string"!=typeof e?S.grep(t,(function(t){return u.call(e,t)>-1!==n})):S.filter(e,t,n)}S.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?S.find.matchesSelector(r,t)?[r]:[]:S.find.matches(t,S.grep(e,(function(t){return 1===t.nodeType})))},S.fn.extend({find:function(t){var e,n,r=this.length,i=this;if("string"!=typeof t)return this.pushStack(S(t).filter((function(){for(e=0;e<r;e++)if(S.contains(i[e],this))return!0})));for(n=this.pushStack([]),e=0;e<r;e++)S.find(t,i[e],n);return r>1?S.uniqueSort(n):n},filter:function(t){return this.pushStack(U(this,t||[],!1))},not:function(t){return this.pushStack(U(this,t||[],!0))},is:function(t){return!!U(this,"string"==typeof t&&B.test(t)?S(t):t||[],!1).length}});var V,q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(t,e,n){var r,i;if(!t)return this;if(n=n||V,"string"==typeof t){if(!(r="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:q.exec(t))||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(e=e instanceof S?e[0]:e,S.merge(this,S.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:v,!0)),F.test(r[1])&&S.isPlainObject(e))for(r in e)y(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return(i=v.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):y(t)?void 0!==n.ready?n.ready(t):t(S):S.makeArray(t,this)}).prototype=S.fn,V=S(v);var W=/^(?:parents|prev(?:Until|All))/,G={children:!0,contents:!0,next:!0,prev:!0};function $(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}S.fn.extend({has:function(t){var e=S(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(S.contains(this,e[t]))return!0}))},closest:function(t,e){var n,r=0,i=this.length,o=[],s="string"!=typeof t&&S(t);if(!B.test(t))for(;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&S.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?S.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?u.call(S(t),this[0]):u.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),S.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return j(t,"parentNode")},parentsUntil:function(t,e,n){return j(t,"parentNode",n)},next:function(t){return $(t,"nextSibling")},prev:function(t){return $(t,"previousSibling")},nextAll:function(t){return j(t,"nextSibling")},prevAll:function(t){return j(t,"previousSibling")},nextUntil:function(t,e,n){return j(t,"nextSibling",n)},prevUntil:function(t,e,n){return j(t,"previousSibling",n)},siblings:function(t){return z((t.parentNode||{}).firstChild,t)},children:function(t){return z(t.firstChild)},contents:function(t){return null!=t.contentDocument&&s(t.contentDocument)?t.contentDocument:(A(t,"template")&&(t=t.content||t),S.merge([],t.childNodes))}},(function(t,e){S.fn[t]=function(n,r){var i=S.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=S.filter(r,i)),this.length>1&&(G[t]||S.uniqueSort(i),W.test(t)&&i.reverse()),this.pushStack(i)}}));var H=/[^\x20\t\r\n\f]+/g;function Z(t){return t}function Y(t){throw t}function X(t,e,n,r){var i;try{t&&y(i=t.promise)?i.call(t).done(e).fail(n):t&&y(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(r))}catch(t){n.apply(void 0,[t])}}S.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return S.each(t.match(H)||[],(function(t,n){e[n]=!0})),e}(t):S.extend({},t);var e,n,r,i,o=[],s=[],a=-1,c=function(){for(i=i||t.once,r=e=!0;s.length;a=-1)for(n=s.shift();++a<o.length;)!1===o[a].apply(n[0],n[1])&&t.stopOnFalse&&(a=o.length,n=!1);t.memory||(n=!1),e=!1,i&&(o=n?[]:"")},l={add:function(){return o&&(n&&!e&&(a=o.length-1,s.push(n)),function e(n){S.each(n,(function(n,r){y(r)?t.unique&&l.has(r)||o.push(r):r&&r.length&&"string"!==w(r)&&e(r)}))}(arguments),n&&!e&&c()),this},remove:function(){return S.each(arguments,(function(t,e){for(var n;(n=S.inArray(e,o,n))>-1;)o.splice(n,1),n<=a&&a--})),this},has:function(t){return t?S.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=s=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=s=[],n||e||(o=n=""),this},locked:function(){return!!i},fireWith:function(t,n){return i||(n=[t,(n=n||[]).slice?n.slice():n],s.push(n),e||c()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},S.extend({Deferred:function(t){var e=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return i.then(null,t)},pipe:function(){var t=arguments;return S.Deferred((function(n){S.each(e,(function(e,r){var i=y(t[r[4]])&&t[r[4]];o[r[1]]((function(){var t=i&&i.apply(this,arguments);t&&y(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[t]:arguments)}))})),t=null})).promise()},then:function(t,n,i){var o=0;function s(t,e,n,i){return function(){var a=this,c=arguments,l=function(){var r,l;if(!(t<o)){if((r=n.apply(a,c))===e.promise())throw new TypeError("Thenable self-resolution");l=r&&("object"==typeof r||"function"==typeof r)&&r.then,y(l)?i?l.call(r,s(o,e,Z,i),s(o,e,Y,i)):(o++,l.call(r,s(o,e,Z,i),s(o,e,Y,i),s(o,e,Z,e.notifyWith))):(n!==Z&&(a=void 0,c=[r]),(i||e.resolveWith)(a,c))}},u=i?l:function(){try{l()}catch(r){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(r,u.error),t+1>=o&&(n!==Y&&(a=void 0,c=[r]),e.rejectWith(a,c))}};t?u():(S.Deferred.getErrorHook?u.error=S.Deferred.getErrorHook():S.Deferred.getStackHook&&(u.error=S.Deferred.getStackHook()),r.setTimeout(u))}}return S.Deferred((function(r){e[0][3].add(s(0,r,y(i)?i:Z,r.notifyWith)),e[1][3].add(s(0,r,y(t)?t:Z)),e[2][3].add(s(0,r,y(n)?n:Y))})).promise()},promise:function(t){return null!=t?S.extend(t,i):i}},o={};return S.each(e,(function(t,r){var s=r[2],a=r[5];i[r[1]]=s.add,a&&s.add((function(){n=a}),e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),s.add(r[3].fire),o[r[0]]=function(){return o[r[0]+"With"](this===o?void 0:this,arguments),this},o[r[0]+"With"]=s.fireWith})),i.promise(o),t&&t.call(o,o),o},when:function(t){var e=arguments.length,n=e,r=Array(n),i=a.call(arguments),o=S.Deferred(),s=function(t){return function(n){r[t]=this,i[t]=arguments.length>1?a.call(arguments):n,--e||o.resolveWith(r,i)}};if(e<=1&&(X(t,o.done(s(n)).resolve,o.reject,!e),"pending"===o.state()||y(i[n]&&i[n].then)))return o.then();for(;n--;)X(i[n],s(n),o.reject);return o.promise()}});var K=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(t,e){r.console&&r.console.warn&&t&&K.test(t.name)&&r.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},S.readyException=function(t){r.setTimeout((function(){throw t}))};var J=S.Deferred();function Q(){v.removeEventListener("DOMContentLoaded",Q),r.removeEventListener("load",Q),S.ready()}S.fn.ready=function(t){return J.then(t).catch((function(t){S.readyException(t)})),this},S.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--S.readyWait:S.isReady)||(S.isReady=!0,!0!==t&&--S.readyWait>0||J.resolveWith(v,[S]))}}),S.ready.then=J.then,"complete"===v.readyState||"loading"!==v.readyState&&!v.documentElement.doScroll?r.setTimeout(S.ready):(v.addEventListener("DOMContentLoaded",Q),r.addEventListener("load",Q));var tt=function(t,e,n,r,i,o,s){var a=0,c=t.length,l=null==n;if("object"===w(n))for(a in i=!0,n)tt(t,e,a,n[a],!0,o,s);else if(void 0!==r&&(i=!0,y(r)||(s=!0),l&&(s?(e.call(t,r),e=null):(l=e,e=function(t,e,n){return l.call(S(t),n)})),e))for(;a<c;a++)e(t[a],n,s?r:r.call(t[a],a,e(t[a],n)));return i?t:l?e.call(t):c?e(t[0],n):o},et=/^-ms-/,nt=/-([a-z])/g;function rt(t,e){return e.toUpperCase()}function it(t){return t.replace(et,"ms-").replace(nt,rt)}var ot=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function st(){this.expando=S.expando+st.uid++}st.uid=1,st.prototype={cache:function(t){var e=t[this.expando];return e||(e={},ot(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"==typeof e)i[it(e)]=n;else for(r in e)i[it(r)]=e[r];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][it(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r=t[this.expando];if(void 0!==r){if(void 0!==e){n=(e=Array.isArray(e)?e.map(it):(e=it(e))in r?[e]:e.match(H)||[]).length;for(;n--;)delete r[e[n]]}(void 0===e||S.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!S.isEmptyObject(e)}};var at=new st,ct=new st,lt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ut=/[A-Z]/g;function ht(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(ut,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:lt.test(t)?JSON.parse(t):t)}(n)}catch(t){}ct.set(t,e,n)}else n=void 0;return n}S.extend({hasData:function(t){return ct.hasData(t)||at.hasData(t)},data:function(t,e,n){return ct.access(t,e,n)},removeData:function(t,e){ct.remove(t,e)},_data:function(t,e,n){return at.access(t,e,n)},_removeData:function(t,e){at.remove(t,e)}}),S.fn.extend({data:function(t,e){var n,r,i,o=this[0],s=o&&o.attributes;if(void 0===t){if(this.length&&(i=ct.get(o),1===o.nodeType&&!at.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&0===(r=s[n].name).indexOf("data-")&&(r=it(r.slice(5)),ht(o,r,i[r]));at.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each((function(){ct.set(this,t)})):tt(this,(function(e){var n;if(o&&void 0===e)return void 0!==(n=ct.get(o,t))||void 0!==(n=ht(o,t))?n:void 0;this.each((function(){ct.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){ct.remove(this,t)}))}}),S.extend({queue:function(t,e,n){var r;if(t)return e=(e||"fx")+"queue",r=at.get(t,e),n&&(!r||Array.isArray(n)?r=at.access(t,e,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){e=e||"fx";var n=S.queue(t,e),r=n.length,i=n.shift(),o=S._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,(function(){S.dequeue(t,e)}),o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return at.get(t,n)||at.access(t,n,{empty:S.Callbacks("once memory").add((function(){at.remove(t,[e+"queue",n])}))})}}),S.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?S.queue(this[0],t):void 0===e?this:this.each((function(){var n=S.queue(this,t,e);S._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&S.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){S.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=S.Deferred(),o=this,s=this.length,a=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(n=at.get(o[s],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(e)}});var pt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ft=new RegExp("^(?:([+-])=|)("+pt+")([a-z%]*)$","i"),dt=["Top","Right","Bottom","Left"],gt=v.documentElement,mt=function(t){return S.contains(t.ownerDocument,t)},yt={composed:!0};gt.getRootNode&&(mt=function(t){return S.contains(t.ownerDocument,t)||t.getRootNode(yt)===t.ownerDocument});var _t=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&mt(t)&&"none"===S.css(t,"display")};function vt(t,e,n,r){var i,o,s=20,a=r?function(){return r.cur()}:function(){return S.css(t,e,"")},c=a(),l=n&&n[3]||(S.cssNumber[e]?"":"px"),u=t.nodeType&&(S.cssNumber[e]||"px"!==l&&+c)&&ft.exec(S.css(t,e));if(u&&u[3]!==l){for(c/=2,l=l||u[3],u=+c||1;s--;)S.style(t,e,u+l),(1-o)*(1-(o=a()/c||.5))<=0&&(s=0),u/=o;u*=2,S.style(t,e,u+l),n=n||[]}return n&&(u=+u||+c||0,i=n[1]?u+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=u,r.end=i)),i}var xt={};function bt(t){var e,n=t.ownerDocument,r=t.nodeName,i=xt[r];return i||(e=n.body.appendChild(n.createElement(r)),i=S.css(e,"display"),e.parentNode.removeChild(e),"none"===i&&(i="block"),xt[r]=i,i)}function wt(t,e){for(var n,r,i=[],o=0,s=t.length;o<s;o++)(r=t[o]).style&&(n=r.style.display,e?("none"===n&&(i[o]=at.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&_t(r)&&(i[o]=bt(r))):"none"!==n&&(i[o]="none",at.set(r,"display",n)));for(o=0;o<s;o++)null!=i[o]&&(t[o].style.display=i[o]);return t}S.fn.extend({show:function(){return wt(this,!0)},hide:function(){return wt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){_t(this)?S(this).show():S(this).hide()}))}});var Et,Tt,St=/^(?:checkbox|radio)$/i,kt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,At=/^$|^module$|\/(?:java|ecma)script/i;Et=v.createDocumentFragment().appendChild(v.createElement("div")),(Tt=v.createElement("input")).setAttribute("type","radio"),Tt.setAttribute("checked","checked"),Tt.setAttribute("name","t"),Et.appendChild(Tt),m.checkClone=Et.cloneNode(!0).cloneNode(!0).lastChild.checked,Et.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!Et.cloneNode(!0).lastChild.defaultValue,Et.innerHTML="<option></option>",m.option=!!Et.lastChild;var Mt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function It(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&A(t,e)?S.merge([t],n):n}function Ct(t,e){for(var n=0,r=t.length;n<r;n++)at.set(t[n],"globalEval",!e||at.get(e[n],"globalEval"))}Mt.tbody=Mt.tfoot=Mt.colgroup=Mt.caption=Mt.thead,Mt.th=Mt.td,m.option||(Mt.optgroup=Mt.option=[1,"<select multiple='multiple'>","</select>"]);var Ot=/<|&#?\w+;/;function Pt(t,e,n,r,i){for(var o,s,a,c,l,u,h=e.createDocumentFragment(),p=[],f=0,d=t.length;f<d;f++)if((o=t[f])||0===o)if("object"===w(o))S.merge(p,o.nodeType?[o]:o);else if(Ot.test(o)){for(s=s||h.appendChild(e.createElement("div")),a=(kt.exec(o)||["",""])[1].toLowerCase(),c=Mt[a]||Mt._default,s.innerHTML=c[1]+S.htmlPrefilter(o)+c[2],u=c[0];u--;)s=s.lastChild;S.merge(p,s.childNodes),(s=h.firstChild).textContent=""}else p.push(e.createTextNode(o));for(h.textContent="",f=0;o=p[f++];)if(r&&S.inArray(o,r)>-1)i&&i.push(o);else if(l=mt(o),s=It(h.appendChild(o),"script"),l&&Ct(s),n)for(u=0;o=s[u++];)At.test(o.type||"")&&n.push(o);return h}var Lt=/^([^.]*)(?:\.(.+)|)/;function Dt(){return!0}function Rt(){return!1}function Nt(t,e,n,r,i,o){var s,a;if("object"==typeof e){for(a in"string"!=typeof n&&(r=r||n,n=void 0),e)Nt(t,a,n,r,e[a],o);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Rt;else if(!i)return t;return 1===o&&(s=i,i=function(t){return S().off(t),s.apply(this,arguments)},i.guid=s.guid||(s.guid=S.guid++)),t.each((function(){S.event.add(this,e,i,r,n)}))}function jt(t,e,n){n?(at.set(t,e,!1),S.event.add(t,e,{namespace:!1,handler:function(t){var n,r=at.get(this,e);if(1&t.isTrigger&&this[e]){if(r)(S.event.special[e]||{}).delegateType&&t.stopPropagation();else if(r=a.call(arguments),at.set(this,e,r),this[e](),n=at.get(this,e),at.set(this,e,!1),r!==n)return t.stopImmediatePropagation(),t.preventDefault(),n}else r&&(at.set(this,e,S.event.trigger(r[0],r.slice(1),this)),t.stopPropagation(),t.isImmediatePropagationStopped=Dt)}})):void 0===at.get(t,e)&&S.event.add(t,e,Dt)}S.event={global:{},add:function(t,e,n,r,i){var o,s,a,c,l,u,h,p,f,d,g,m=at.get(t);if(ot(t))for(n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(gt,i),n.guid||(n.guid=S.guid++),(c=m.events)||(c=m.events=Object.create(null)),(s=m.handle)||(s=m.handle=function(e){return void 0!==S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(H)||[""]).length;l--;)f=g=(a=Lt.exec(e[l])||[])[1],d=(a[2]||"").split(".").sort(),f&&(h=S.event.special[f]||{},f=(i?h.delegateType:h.bindType)||f,h=S.event.special[f]||{},u=S.extend({type:f,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:d.join(".")},o),(p=c[f])||((p=c[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,r,d,s)||t.addEventListener&&t.addEventListener(f,s)),h.add&&(h.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,u):p.push(u),S.event.global[f]=!0)},remove:function(t,e,n,r,i){var o,s,a,c,l,u,h,p,f,d,g,m=at.hasData(t)&&at.get(t);if(m&&(c=m.events)){for(l=(e=(e||"").match(H)||[""]).length;l--;)if(f=g=(a=Lt.exec(e[l])||[])[1],d=(a[2]||"").split(".").sort(),f){for(h=S.event.special[f]||{},p=c[f=(r?h.delegateType:h.bindType)||f]||[],a=a[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=p.length;o--;)u=p[o],!i&&g!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||r&&r!==u.selector&&("**"!==r||!u.selector)||(p.splice(o,1),u.selector&&p.delegateCount--,h.remove&&h.remove.call(t,u));s&&!p.length&&(h.teardown&&!1!==h.teardown.call(t,d,m.handle)||S.removeEvent(t,f,m.handle),delete c[f])}else for(f in c)S.event.remove(t,f+e[l],n,r,!0);S.isEmptyObject(c)&&at.remove(t,"handle events")}},dispatch:function(t){var e,n,r,i,o,s,a=new Array(arguments.length),c=S.event.fix(t),l=(at.get(this,"events")||Object.create(null))[c.type]||[],u=S.event.special[c.type]||{};for(a[0]=c,e=1;e<arguments.length;e++)a[e]=arguments[e];if(c.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,c)){for(s=S.event.handlers.call(this,c,l),e=0;(i=s[e++])&&!c.isPropagationStopped();)for(c.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!1!==o.namespace&&!c.rnamespace.test(o.namespace)||(c.handleObj=o,c.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a))&&!1===(c.result=r)&&(c.preventDefault(),c.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,c),c.result}},handlers:function(t,e){var n,r,i,o,s,a=[],c=e.delegateCount,l=t.target;if(c&&l.nodeType&&!("click"===t.type&&t.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==t.type||!0!==l.disabled)){for(o=[],s={},n=0;n<c;n++)void 0===s[i=(r=e[n]).selector+" "]&&(s[i]=r.needsContext?S(i,this).index(l)>-1:S.find(i,this,null,[l]).length),s[i]&&o.push(r);o.length&&a.push({elem:l,handlers:o})}return l=this,c<e.length&&a.push({elem:l,handlers:e.slice(c)}),a},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:y(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[S.expando]?t:new S.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return St.test(e.type)&&e.click&&A(e,"input")&&jt(e,"click",!0),!1},trigger:function(t){var e=this||t;return St.test(e.type)&&e.click&&A(e,"input")&&jt(e,"click"),!0},_default:function(t){var e=t.target;return St.test(e.type)&&e.click&&A(e,"input")&&at.get(e,"click")||A(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},S.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},S.Event=function(t,e){if(!(this instanceof S.Event))return new S.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Dt:Rt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&S.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Rt,isPropagationStopped:Rt,isImmediatePropagationStopped:Rt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Dt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Dt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Dt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},(function(t,e){function n(t){if(v.documentMode){var n=at.get(this,"handle"),r=S.event.fix(t);r.type="focusin"===t.type?"focus":"blur",r.isSimulated=!0,n(t),r.target===r.currentTarget&&n(r)}else S.event.simulate(e,t.target,S.event.fix(t))}S.event.special[t]={setup:function(){var r;if(jt(this,t,!0),!v.documentMode)return!1;(r=at.get(this,e))||this.addEventListener(e,n),at.set(this,e,(r||0)+1)},trigger:function(){return jt(this,t),!0},teardown:function(){var t;if(!v.documentMode)return!1;(t=at.get(this,e)-1)?at.set(this,e,t):(this.removeEventListener(e,n),at.remove(this,e))},_default:function(e){return at.get(e.target,t)},delegateType:e},S.event.special[e]={setup:function(){var r=this.ownerDocument||this.document||this,i=v.documentMode?this:r,o=at.get(i,e);o||(v.documentMode?this.addEventListener(e,n):r.addEventListener(t,n,!0)),at.set(i,e,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=v.documentMode?this:r,o=at.get(i,e)-1;o?at.set(i,e,o):(v.documentMode?this.removeEventListener(e,n):r.removeEventListener(t,n,!0),at.remove(i,e))}}})),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){S.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=t.relatedTarget,i=t.handleObj;return r&&(r===this||S.contains(this,r))||(t.type=i.origType,n=i.handler.apply(this,arguments),t.type=e),n}}})),S.fn.extend({on:function(t,e,n,r){return Nt(this,t,e,n,r)},one:function(t,e,n,r){return Nt(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,S(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=Rt),this.each((function(){S.event.remove(this,t,n,e)}))}});var zt=/<script|<style|<link/i,Bt=/checked\s*(?:[^=]|=\s*.checked.)/i,Ft=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ut(t,e){return A(t,"table")&&A(11!==e.nodeType?e:e.firstChild,"tr")&&S(t).children("tbody")[0]||t}function Vt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function qt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Wt(t,e){var n,r,i,o,s,a;if(1===e.nodeType){if(at.hasData(t)&&(a=at.get(t).events))for(i in at.remove(e,"handle events"),a)for(n=0,r=a[i].length;n<r;n++)S.event.add(e,i,a[i][n]);ct.hasData(t)&&(o=ct.access(t),s=S.extend({},o),ct.set(e,s))}}function Gt(t,e){var n=e.nodeName.toLowerCase();"input"===n&&St.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function $t(t,e,n,r){e=c(e);var i,o,s,a,l,u,h=0,p=t.length,f=p-1,d=e[0],g=y(d);if(g||p>1&&"string"==typeof d&&!m.checkClone&&Bt.test(d))return t.each((function(i){var o=t.eq(i);g&&(e[0]=d.call(this,i,o.html())),$t(o,e,n,r)}));if(p&&(o=(i=Pt(e,t[0].ownerDocument,!1,t,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(a=(s=S.map(It(i,"script"),Vt)).length;h<p;h++)l=i,h!==f&&(l=S.clone(l,!0,!0),a&&S.merge(s,It(l,"script"))),n.call(t[h],l,h);if(a)for(u=s[s.length-1].ownerDocument,S.map(s,qt),h=0;h<a;h++)l=s[h],At.test(l.type||"")&&!at.access(l,"globalEval")&&S.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?S._evalUrl&&!l.noModule&&S._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},u):b(l.textContent.replace(Ft,""),l,u))}return t}function Ht(t,e,n){for(var r,i=e?S.filter(e,t):t,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(It(r)),r.parentNode&&(n&&mt(r)&&Ct(It(r,"script")),r.parentNode.removeChild(r));return t}S.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var r,i,o,s,a=t.cloneNode(!0),c=mt(t);if(!(m.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||S.isXMLDoc(t)))for(s=It(a),r=0,i=(o=It(t)).length;r<i;r++)Gt(o[r],s[r]);if(e)if(n)for(o=o||It(t),s=s||It(a),r=0,i=o.length;r<i;r++)Wt(o[r],s[r]);else Wt(t,a);return(s=It(a,"script")).length>0&&Ct(s,!c&&It(t,"script")),a},cleanData:function(t){for(var e,n,r,i=S.event.special,o=0;void 0!==(n=t[o]);o++)if(ot(n)){if(e=n[at.expando]){if(e.events)for(r in e.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,e.handle);n[at.expando]=void 0}n[ct.expando]&&(n[ct.expando]=void 0)}}}),S.fn.extend({detach:function(t){return Ht(this,t,!0)},remove:function(t){return Ht(this,t)},text:function(t){return tt(this,(function(t){return void 0===t?S.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return $t(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ut(this,t).appendChild(t)}))},prepend:function(){return $t(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Ut(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return $t(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return $t(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(S.cleanData(It(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return S.clone(this,t,e)}))},html:function(t){return tt(this,(function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!zt.test(t)&&!Mt[(kt.exec(t)||["",""])[1].toLowerCase()]){t=S.htmlPrefilter(t);try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(S.cleanData(It(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return $t(this,arguments,(function(e){var n=this.parentNode;S.inArray(this,t)<0&&(S.cleanData(It(this)),n&&n.replaceChild(e,this))}),t)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){S.fn[t]=function(t){for(var n,r=[],i=S(t),o=i.length-1,s=0;s<=o;s++)n=s===o?this:this.clone(!0),S(i[s])[e](n),l.apply(r,n.get());return this.pushStack(r)}}));var Zt=new RegExp("^("+pt+")(?!px)[a-z%]+$","i"),Yt=/^--/,Xt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=r),e.getComputedStyle(t)},Kt=function(t,e,n){var r,i,o={};for(i in e)o[i]=t.style[i],t.style[i]=e[i];for(i in r=n.call(t),e)t.style[i]=o[i];return r},Jt=new RegExp(dt.join("|"),"i");function Qt(t,e,n){var r,i,o,s,a=Yt.test(e),c=t.style;return(n=n||Xt(t))&&(s=n.getPropertyValue(e)||n[e],a&&s&&(s=s.replace(P,"$1")||void 0),""!==s||mt(t)||(s=S.style(t,e)),!m.pixelBoxStyles()&&Zt.test(s)&&Jt.test(e)&&(r=c.width,i=c.minWidth,o=c.maxWidth,c.minWidth=c.maxWidth=c.width=s,s=n.width,c.width=r,c.minWidth=i,c.maxWidth=o)),void 0!==s?s+"":s}function te(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(u){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",gt.appendChild(l).appendChild(u);var t=r.getComputedStyle(u);n="1%"!==t.top,c=12===e(t.marginLeft),u.style.right="60%",s=36===e(t.right),i=36===e(t.width),u.style.position="absolute",o=12===e(u.offsetWidth/3),gt.removeChild(l),u=null}}function e(t){return Math.round(parseFloat(t))}var n,i,o,s,a,c,l=v.createElement("div"),u=v.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===u.style.backgroundClip,S.extend(m,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),c},scrollboxSize:function(){return t(),o},reliableTrDimensions:function(){var t,e,n,i;return null==a&&(t=v.createElement("table"),e=v.createElement("tr"),n=v.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="box-sizing:content-box;border:1px solid",e.style.height="1px",n.style.height="9px",n.style.display="block",gt.appendChild(t).appendChild(e).appendChild(n),i=r.getComputedStyle(e),a=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===e.offsetHeight,gt.removeChild(t)),a}}))}();var ee=["Webkit","Moz","ms"],ne=v.createElement("div").style,re={};function ie(t){var e=S.cssProps[t]||re[t];return e||(t in ne?t:re[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=ee.length;n--;)if((t=ee[n]+e)in ne)return t}(t)||t)}var oe=/^(none|table(?!-c[ea]).+)/,se={position:"absolute",visibility:"hidden",display:"block"},ae={letterSpacing:"0",fontWeight:"400"};function ce(t,e,n){var r=ft.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function le(t,e,n,r,i,o){var s="width"===e?1:0,a=0,c=0,l=0;if(n===(r?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(l+=S.css(t,n+dt[s],!0,i)),r?("content"===n&&(c-=S.css(t,"padding"+dt[s],!0,i)),"margin"!==n&&(c-=S.css(t,"border"+dt[s]+"Width",!0,i))):(c+=S.css(t,"padding"+dt[s],!0,i),"padding"!==n?c+=S.css(t,"border"+dt[s]+"Width",!0,i):a+=S.css(t,"border"+dt[s]+"Width",!0,i));return!r&&o>=0&&(c+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-c-a-.5))||0),c+l}function ue(t,e,n){var r=Xt(t),i=(!m.boxSizingReliable()||n)&&"border-box"===S.css(t,"boxSizing",!1,r),o=i,s=Qt(t,e,r),a="offset"+e[0].toUpperCase()+e.slice(1);if(Zt.test(s)){if(!n)return s;s="auto"}return(!m.boxSizingReliable()&&i||!m.reliableTrDimensions()&&A(t,"tr")||"auto"===s||!parseFloat(s)&&"inline"===S.css(t,"display",!1,r))&&t.getClientRects().length&&(i="border-box"===S.css(t,"boxSizing",!1,r),(o=a in t)&&(s=t[a])),(s=parseFloat(s)||0)+le(t,e,n||(i?"border":"content"),o,r,s)+"px"}function he(t,e,n,r,i){return new he.prototype.init(t,e,n,r,i)}S.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Qt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,s,a=it(e),c=Yt.test(e),l=t.style;if(c||(e=ie(a)),s=S.cssHooks[e]||S.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(i=s.get(t,!1,r))?i:l[e];"string"===(o=typeof n)&&(i=ft.exec(n))&&i[1]&&(n=vt(t,e,i),o="number"),null!=n&&n==n&&("number"!==o||c||(n+=i&&i[3]||(S.cssNumber[a]?"":"px")),m.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,r))||(c?l.setProperty(e,n):l[e]=n))}},css:function(t,e,n,r){var i,o,s,a=it(e);return Yt.test(e)||(e=ie(a)),(s=S.cssHooks[e]||S.cssHooks[a])&&"get"in s&&(i=s.get(t,!0,n)),void 0===i&&(i=Qt(t,e,r)),"normal"===i&&e in ae&&(i=ae[e]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each(["height","width"],(function(t,e){S.cssHooks[e]={get:function(t,n,r){if(n)return!oe.test(S.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ue(t,e,r):Kt(t,se,(function(){return ue(t,e,r)}))},set:function(t,n,r){var i,o=Xt(t),s=!m.scrollboxSize()&&"absolute"===o.position,a=(s||r)&&"border-box"===S.css(t,"boxSizing",!1,o),c=r?le(t,e,r,a,o):0;return a&&s&&(c-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-le(t,e,"border",!1,o)-.5)),c&&(i=ft.exec(n))&&"px"!==(i[3]||"px")&&(t.style[e]=n,n=S.css(t,e)),ce(0,n,c)}}})),S.cssHooks.marginLeft=te(m.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Qt(t,"marginLeft"))||t.getBoundingClientRect().left-Kt(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),S.each({margin:"",padding:"",border:"Width"},(function(t,e){S.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[t+dt[r]+e]=o[r]||o[r-2]||o[0];return i}},"margin"!==t&&(S.cssHooks[t+e].set=ce)})),S.fn.extend({css:function(t,e){return tt(this,(function(t,e,n){var r,i,o={},s=0;if(Array.isArray(e)){for(r=Xt(t),i=e.length;s<i;s++)o[e[s]]=S.css(t,e[s],!1,r);return o}return void 0!==n?S.style(t,e,n):S.css(t,e)}),t,e,arguments.length>1)}}),S.Tween=he,he.prototype={constructor:he,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||S.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?"":"px")},cur:function(){var t=he.propHooks[this.prop];return t&&t.get?t.get(this):he.propHooks._default.get(this)},run:function(t){var e,n=he.propHooks[this.prop];return this.options.duration?this.pos=e=S.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):he.propHooks._default.set(this),this}},he.prototype.init.prototype=he.prototype,he.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=S.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){S.fx.step[t.prop]?S.fx.step[t.prop](t):1!==t.elem.nodeType||!S.cssHooks[t.prop]&&null==t.elem.style[ie(t.prop)]?t.elem[t.prop]=t.now:S.style(t.elem,t.prop,t.now+t.unit)}}},he.propHooks.scrollTop=he.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},S.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},S.fx=he.prototype.init,S.fx.step={};var pe,fe,de=/^(?:toggle|show|hide)$/,ge=/queueHooks$/;function me(){fe&&(!1===v.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(me):r.setTimeout(me,S.fx.interval),S.fx.tick())}function ye(){return r.setTimeout((function(){pe=void 0})),pe=Date.now()}function _e(t,e){var n,r=0,i={height:t};for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=dt[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function ve(t,e,n){for(var r,i=(xe.tweeners[e]||[]).concat(xe.tweeners["*"]),o=0,s=i.length;o<s;o++)if(r=i[o].call(n,e,t))return r}function xe(t,e,n){var r,i,o=0,s=xe.prefilters.length,a=S.Deferred().always((function(){delete c.elem})),c=function(){if(i)return!1;for(var e=pe||ye(),n=Math.max(0,l.startTime+l.duration-e),r=1-(n/l.duration||0),o=0,s=l.tweens.length;o<s;o++)l.tweens[o].run(r);return a.notifyWith(t,[l,r,n]),r<1&&s?n:(s||a.notifyWith(t,[l,1,0]),a.resolveWith(t,[l]),!1)},l=a.promise({elem:t,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},n),originalProperties:e,originalOptions:n,startTime:pe||ye(),duration:n.duration,tweens:[],createTween:function(e,n){var r=S.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(r),r},stop:function(e){var n=0,r=e?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return e?(a.notifyWith(t,[l,1,0]),a.resolveWith(t,[l,e])):a.rejectWith(t,[l,e]),this}}),u=l.props;for(!function(t,e){var n,r,i,o,s;for(n in t)if(i=e[r=it(n)],o=t[n],Array.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),(s=S.cssHooks[r])&&"expand"in s)for(n in o=s.expand(o),delete t[r],o)n in t||(t[n]=o[n],e[n]=i);else e[r]=i}(u,l.opts.specialEasing);o<s;o++)if(r=xe.prefilters[o].call(l,t,u,l.opts))return y(r.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return S.map(u,ve,l),y(l.opts.start)&&l.opts.start.call(t,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(c,{elem:t,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(xe,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return vt(n.elem,t,ft.exec(e),n),n}]},tweener:function(t,e){y(t)?(e=t,t=["*"]):t=t.match(H);for(var n,r=0,i=t.length;r<i;r++)n=t[r],xe.tweeners[n]=xe.tweeners[n]||[],xe.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var r,i,o,s,a,c,l,u,h="width"in e||"height"in e,p=this,f={},d=t.style,g=t.nodeType&&_t(t),m=at.get(t,"fxshow");for(r in n.queue||(null==(s=S._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,p.always((function(){p.always((function(){s.unqueued--,S.queue(t,"fx").length||s.empty.fire()}))}))),e)if(i=e[r],de.test(i)){if(delete e[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;g=!0}f[r]=m&&m[r]||S.style(t,r)}if((c=!S.isEmptyObject(e))||!S.isEmptyObject(f))for(r in h&&1===t.nodeType&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],null==(l=m&&m.display)&&(l=at.get(t,"display")),"none"===(u=S.css(t,"display"))&&(l?u=l:(wt([t],!0),l=t.style.display||l,u=S.css(t,"display"),wt([t]))),("inline"===u||"inline-block"===u&&null!=l)&&"none"===S.css(t,"float")&&(c||(p.done((function(){d.display=l})),null==l&&(u=d.display,l="none"===u?"":u)),d.display="inline-block")),n.overflow&&(d.overflow="hidden",p.always((function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}))),c=!1,f)c||(m?"hidden"in m&&(g=m.hidden):m=at.access(t,"fxshow",{display:l}),o&&(m.hidden=!g),g&&wt([t],!0),p.done((function(){for(r in g||wt([t]),at.remove(t,"fxshow"),f)S.style(t,r,f[r])}))),c=ve(g?m[r]:0,r,p),r in m||(m[r]=c.start,g&&(c.end=c.start,c.start=0))}],prefilter:function(t,e){e?xe.prefilters.unshift(t):xe.prefilters.push(t)}}),S.speed=function(t,e,n){var r=t&&"object"==typeof t?S.extend({},t):{complete:n||!n&&e||y(t)&&t,duration:t,easing:n&&e||e&&!y(e)&&e};return S.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){y(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(t,e,n,r){return this.filter(_t).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=S.isEmptyObject(t),o=S.speed(e,n,r),s=function(){var e=xe(this,S.extend({},t),o);(i||at.get(this,"finish"))&&e.stop(!0)};return s.finish=s,i||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,i=null!=t&&t+"queueHooks",o=S.timers,s=at.get(this);if(i)s[i]&&s[i].stop&&r(s[i]);else for(i in s)s[i]&&s[i].stop&&ge.test(i)&&r(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));!e&&n||S.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=at.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=S.timers,s=r?r.length:0;for(n.finish=!0,S.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<s;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish}))}}),S.each(["toggle","show","hide"],(function(t,e){var n=S.fn[e];S.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(_e(e,!0),t,r,i)}})),S.each({slideDown:_e("show"),slideUp:_e("hide"),slideToggle:_e("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){S.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}})),S.timers=[],S.fx.tick=function(){var t,e=0,n=S.timers;for(pe=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||S.fx.stop(),pe=void 0},S.fx.timer=function(t){S.timers.push(t),S.fx.start()},S.fx.interval=13,S.fx.start=function(){fe||(fe=!0,me())},S.fx.stop=function(){fe=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(t,e){return t=S.fx&&S.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,n){var i=r.setTimeout(e,t);n.stop=function(){r.clearTimeout(i)}}))},function(){var t=v.createElement("input"),e=v.createElement("select").appendChild(v.createElement("option"));t.type="checkbox",m.checkOn=""!==t.value,m.optSelected=e.selected,(t=v.createElement("input")).value="t",t.type="radio",m.radioValue="t"===t.value}();var be,we=S.expr.attrHandle;S.fn.extend({attr:function(t,e){return tt(this,S.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){S.removeAttr(this,t)}))}}),S.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?S.prop(t,e,n):(1===o&&S.isXMLDoc(t)||(i=S.attrHooks[e.toLowerCase()]||(S.expr.match.bool.test(e)?be:void 0)),void 0!==n?null===n?void S.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=S.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!m.radioValue&&"radio"===e&&A(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r=0,i=e&&e.match(H);if(i&&1===t.nodeType)for(;n=i[r++];)t.removeAttribute(n)}}),be={set:function(t,e,n){return!1===e?S.removeAttr(t,n):t.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=we[e]||S.find.attr;we[e]=function(t,e,r){var i,o,s=e.toLowerCase();return r||(o=we[s],we[s]=i,i=null!=n(t,e,r)?s:null,we[s]=o),i}}));var Ee=/^(?:input|select|textarea|button)$/i,Te=/^(?:a|area)$/i;function Se(t){return(t.match(H)||[]).join(" ")}function ke(t){return t.getAttribute&&t.getAttribute("class")||""}function Ae(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(H)||[]}S.fn.extend({prop:function(t,e){return tt(this,S.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[S.propFix[t]||t]}))}}),S.extend({prop:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(t)||(e=S.propFix[e]||e,i=S.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=S.find.attr(t,"tabindex");return e?parseInt(e,10):Ee.test(t.nodeName)||Te.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(S.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){S.propFix[this.toLowerCase()]=this})),S.fn.extend({addClass:function(t){var e,n,r,i,o,s;return y(t)?this.each((function(e){S(this).addClass(t.call(this,e,ke(this)))})):(e=Ae(t)).length?this.each((function(){if(r=ke(this),n=1===this.nodeType&&" "+Se(r)+" "){for(o=0;o<e.length;o++)i=e[o],n.indexOf(" "+i+" ")<0&&(n+=i+" ");s=Se(n),r!==s&&this.setAttribute("class",s)}})):this},removeClass:function(t){var e,n,r,i,o,s;return y(t)?this.each((function(e){S(this).removeClass(t.call(this,e,ke(this)))})):arguments.length?(e=Ae(t)).length?this.each((function(){if(r=ke(this),n=1===this.nodeType&&" "+Se(r)+" "){for(o=0;o<e.length;o++)for(i=e[o];n.indexOf(" "+i+" ")>-1;)n=n.replace(" "+i+" "," ");s=Se(n),r!==s&&this.setAttribute("class",s)}})):this:this.attr("class","")},toggleClass:function(t,e){var n,r,i,o,s=typeof t,a="string"===s||Array.isArray(t);return y(t)?this.each((function(n){S(this).toggleClass(t.call(this,n,ke(this),e),e)})):"boolean"==typeof e&&a?e?this.addClass(t):this.removeClass(t):(n=Ae(t),this.each((function(){if(a)for(o=S(this),i=0;i<n.length;i++)r=n[i],o.hasClass(r)?o.removeClass(r):o.addClass(r);else void 0!==t&&"boolean"!==s||((r=ke(this))&&at.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===t?"":at.get(this,"__className__")||""))})))},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&(" "+Se(ke(n))+" ").indexOf(e)>-1)return!0;return!1}});var Me=/\r/g;S.fn.extend({val:function(t){var e,n,r,i=this[0];return arguments.length?(r=y(t),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?t.call(this,n,S(this).val()):t)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=S.map(i,(function(t){return null==t?"":t+""}))),(e=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))}))):i?(e=S.valHooks[i.type]||S.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(Me,""):null==n?"":n:void 0}}),S.extend({valHooks:{option:{get:function(t){var e=S.find.attr(t,"value");return null!=e?e:Se(S.text(t))}},select:{get:function(t){var e,n,r,i=t.options,o=t.selectedIndex,s="select-one"===t.type,a=s?null:[],c=s?o+1:i.length;for(r=o<0?c:s?o:0;r<c;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(e=S(n).val(),s)return e;a.push(e)}return a},set:function(t,e){for(var n,r,i=t.options,o=S.makeArray(e),s=i.length;s--;)((r=i[s]).selected=S.inArray(S.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],(function(){S.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=S.inArray(S(t).val(),e)>-1}},m.checkOn||(S.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}));var Ie=r.location,Ce={guid:Date.now()},Oe=/\?/;S.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{e=(new r.DOMParser).parseFromString(t,"text/xml")}catch(t){}return n=e&&e.getElementsByTagName("parsererror")[0],e&&!n||S.error("Invalid XML: "+(n?S.map(n.childNodes,(function(t){return t.textContent})).join("\n"):t)),e};var Pe=/^(?:focusinfocus|focusoutblur)$/,Le=function(t){t.stopPropagation()};S.extend(S.event,{trigger:function(t,e,n,i){var o,s,a,c,l,u,h,p,d=[n||v],g=f.call(t,"type")?t.type:t,m=f.call(t,"namespace")?t.namespace.split("."):[];if(s=p=a=n=n||v,3!==n.nodeType&&8!==n.nodeType&&!Pe.test(g+S.event.triggered)&&(g.indexOf(".")>-1&&(m=g.split("."),g=m.shift(),m.sort()),l=g.indexOf(":")<0&&"on"+g,(t=t[S.expando]?t:new S.Event(g,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=m.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:S.makeArray(e,[t]),h=S.event.special[g]||{},i||!h.trigger||!1!==h.trigger.apply(n,e))){if(!i&&!h.noBubble&&!_(n)){for(c=h.delegateType||g,Pe.test(c+g)||(s=s.parentNode);s;s=s.parentNode)d.push(s),a=s;a===(n.ownerDocument||v)&&d.push(a.defaultView||a.parentWindow||r)}for(o=0;(s=d[o++])&&!t.isPropagationStopped();)p=s,t.type=o>1?c:h.bindType||g,(u=(at.get(s,"events")||Object.create(null))[t.type]&&at.get(s,"handle"))&&u.apply(s,e),(u=l&&s[l])&&u.apply&&ot(s)&&(t.result=u.apply(s,e),!1===t.result&&t.preventDefault());return t.type=g,i||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(d.pop(),e)||!ot(n)||l&&y(n[g])&&!_(n)&&((a=n[l])&&(n[l]=null),S.event.triggered=g,t.isPropagationStopped()&&p.addEventListener(g,Le),n[g](),t.isPropagationStopped()&&p.removeEventListener(g,Le),S.event.triggered=void 0,a&&(n[l]=a)),t.result}},simulate:function(t,e,n){var r=S.extend(new S.Event,n,{type:t,isSimulated:!0});S.event.trigger(r,null,e)}}),S.fn.extend({trigger:function(t,e){return this.each((function(){S.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return S.event.trigger(t,e,n,!0)}});var De=/\[\]$/,Re=/\r?\n/g,Ne=/^(?:submit|button|image|reset|file)$/i,je=/^(?:input|select|textarea|keygen)/i;function ze(t,e,n,r){var i;if(Array.isArray(e))S.each(e,(function(e,i){n||De.test(t)?r(t,i):ze(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,r)}));else if(n||"object"!==w(e))r(t,e);else for(i in e)ze(t+"["+i+"]",e[i],n,r)}S.param=function(t,e){var n,r=[],i=function(t,e){var n=y(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!S.isPlainObject(t))S.each(t,(function(){i(this.name,this.value)}));else for(n in t)ze(n,t[n],e,i);return r.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=S.prop(this,"elements");return t?S.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!S(this).is(":disabled")&&je.test(this.nodeName)&&!Ne.test(t)&&(this.checked||!St.test(t))})).map((function(t,e){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,(function(t){return{name:e.name,value:t.replace(Re,"\r\n")}})):{name:e.name,value:n.replace(Re,"\r\n")}})).get()}});var Be=/%20/g,Fe=/#.*$/,Ue=/([?&])_=[^&]*/,Ve=/^(.*?):[ \t]*([^\r\n]*)$/gm,qe=/^(?:GET|HEAD)$/,We=/^\/\//,Ge={},$e={},He="*/".concat("*"),Ze=v.createElement("a");function Ye(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(H)||[];if(y(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function Xe(t,e,n,r){var i={},o=t===$e;function s(a){var c;return i[a]=!0,S.each(t[a]||[],(function(t,a){var l=a(e,n,r);return"string"!=typeof l||o||i[l]?o?!(c=l):void 0:(e.dataTypes.unshift(l),s(l),!1)})),c}return s(e.dataTypes[0])||!i["*"]&&s("*")}function Ke(t,e){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&S.extend(!0,t,r),t}Ze.href=Ie.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ie.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ie.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":He,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ke(Ke(t,S.ajaxSettings),e):Ke(S.ajaxSettings,t)},ajaxPrefilter:Ye(Ge),ajaxTransport:Ye($e),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,i,o,s,a,c,l,u,h,p,f=S.ajaxSetup({},e),d=f.context||f,g=f.context&&(d.nodeType||d.jquery)?S(d):S.event,m=S.Deferred(),y=S.Callbacks("once memory"),_=f.statusCode||{},x={},b={},w="canceled",E={readyState:0,getResponseHeader:function(t){var e;if(l){if(!s)for(s={};e=Ve.exec(o);)s[e[1].toLowerCase()+" "]=(s[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=s[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return l?o:null},setRequestHeader:function(t,e){return null==l&&(t=b[t.toLowerCase()]=b[t.toLowerCase()]||t,x[t]=e),this},overrideMimeType:function(t){return null==l&&(f.mimeType=t),this},statusCode:function(t){var e;if(t)if(l)E.always(t[E.status]);else for(e in t)_[e]=[_[e],t[e]];return this},abort:function(t){var e=t||w;return n&&n.abort(e),T(0,e),this}};if(m.promise(E),f.url=((t||f.url||Ie.href)+"").replace(We,Ie.protocol+"//"),f.type=e.method||e.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(H)||[""],null==f.crossDomain){c=v.createElement("a");try{c.href=f.url,c.href=c.href,f.crossDomain=Ze.protocol+"//"+Ze.host!=c.protocol+"//"+c.host}catch(t){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=S.param(f.data,f.traditional)),Xe(Ge,f,e,E),l)return E;for(h in(u=S.event&&f.global)&&0==S.active++&&S.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!qe.test(f.type),i=f.url.replace(Fe,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Be,"+")):(p=f.url.slice(i.length),f.data&&(f.processData||"string"==typeof f.data)&&(i+=(Oe.test(i)?"&":"?")+f.data,delete f.data),!1===f.cache&&(i=i.replace(Ue,"$1"),p=(Oe.test(i)?"&":"?")+"_="+Ce.guid+++p),f.url=i+p),f.ifModified&&(S.lastModified[i]&&E.setRequestHeader("If-Modified-Since",S.lastModified[i]),S.etag[i]&&E.setRequestHeader("If-None-Match",S.etag[i])),(f.data&&f.hasContent&&!1!==f.contentType||e.contentType)&&E.setRequestHeader("Content-Type",f.contentType),E.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+He+"; q=0.01":""):f.accepts["*"]),f.headers)E.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(!1===f.beforeSend.call(d,E,f)||l))return E.abort();if(w="abort",y.add(f.complete),E.done(f.success),E.fail(f.error),n=Xe($e,f,e,E)){if(E.readyState=1,u&&g.trigger("ajaxSend",[E,f]),l)return E;f.async&&f.timeout>0&&(a=r.setTimeout((function(){E.abort("timeout")}),f.timeout));try{l=!1,n.send(x,T)}catch(t){if(l)throw t;T(-1,t)}}else T(-1,"No Transport");function T(t,e,s,c){var h,p,v,x,b,w=e;l||(l=!0,a&&r.clearTimeout(a),n=void 0,o=c||"",E.readyState=t>0?4:0,h=t>=200&&t<300||304===t,s&&(x=function(t,e,n){for(var r,i,o,s,a=t.contents,c=t.dataTypes;"*"===c[0];)c.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){c.unshift(i);break}if(c[0]in n)o=c[0];else{for(i in n){if(!c[0]||t.converters[i+" "+c[0]]){o=i;break}s||(s=i)}o=o||s}if(o)return o!==c[0]&&c.unshift(o),n[o]}(f,E,s)),!h&&S.inArray("script",f.dataTypes)>-1&&S.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),x=function(t,e,n,r){var i,o,s,a,c,l={},u=t.dataTypes.slice();if(u[1])for(s in t.converters)l[s.toLowerCase()]=t.converters[s];for(o=u.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!c&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),c=o,o=u.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(!(s=l[c+" "+o]||l["* "+o]))for(i in l)if((a=i.split(" "))[1]===o&&(s=l[c+" "+a[0]]||l["* "+a[0]])){!0===s?s=l[i]:!0!==l[i]&&(o=a[0],u.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+c+" to "+o}}}return{state:"success",data:e}}(f,x,E,h),h?(f.ifModified&&((b=E.getResponseHeader("Last-Modified"))&&(S.lastModified[i]=b),(b=E.getResponseHeader("etag"))&&(S.etag[i]=b)),204===t||"HEAD"===f.type?w="nocontent":304===t?w="notmodified":(w=x.state,p=x.data,h=!(v=x.error))):(v=w,!t&&w||(w="error",t<0&&(t=0))),E.status=t,E.statusText=(e||w)+"",h?m.resolveWith(d,[p,w,E]):m.rejectWith(d,[E,w,v]),E.statusCode(_),_=void 0,u&&g.trigger(h?"ajaxSuccess":"ajaxError",[E,f,h?p:v]),y.fireWith(d,[E,w]),u&&(g.trigger("ajaxComplete",[E,f]),--S.active||S.event.trigger("ajaxStop")))}return E},getJSON:function(t,e,n){return S.get(t,e,n,"json")},getScript:function(t,e){return S.get(t,void 0,e,"script")}}),S.each(["get","post"],(function(t,e){S[e]=function(t,n,r,i){return y(n)&&(i=i||r,r=n,n=void 0),S.ajax(S.extend({url:t,type:e,dataType:i,data:n,success:r},S.isPlainObject(t)&&t))}})),S.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),S._evalUrl=function(t,e,n){return S.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){S.globalEval(t,e,n)}})},S.fn.extend({wrapAll:function(t){var e;return this[0]&&(y(t)&&(t=t.call(this[0])),e=S(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return y(t)?this.each((function(e){S(this).wrapInner(t.call(this,e))})):this.each((function(){var e=S(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=y(t);return this.each((function(n){S(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){S(this).replaceWith(this.childNodes)})),this}}),S.expr.pseudos.hidden=function(t){return!S.expr.pseudos.visible(t)},S.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(t){}};var Je={0:200,1223:204},Qe=S.ajaxSettings.xhr();m.cors=!!Qe&&"withCredentials"in Qe,m.ajax=Qe=!!Qe,S.ajaxTransport((function(t){var e,n;if(m.cors||Qe&&!t.crossDomain)return{send:function(i,o){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];for(s in t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)a.setRequestHeader(s,i[s]);e=function(t){return function(){e&&(e=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Je[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),n=a.onerror=a.ontimeout=e("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&r.setTimeout((function(){e&&n()}))},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}})),S.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return S.globalEval(t),t}}}),S.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),S.ajaxTransport("script",(function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(r,i){e=S("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),v.head.appendChild(e[0])},abort:function(){n&&n()}}}));var tn,en=[],nn=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=en.pop()||S.expando+"_"+Ce.guid++;return this[t]=!0,t}}),S.ajaxPrefilter("json jsonp",(function(t,e,n){var i,o,s,a=!1!==t.jsonp&&(nn.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&nn.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=y(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(nn,"$1"+i):!1!==t.jsonp&&(t.url+=(Oe.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return s||S.error(i+" was not called"),s[0]},t.dataTypes[0]="json",o=r[i],r[i]=function(){s=arguments},n.always((function(){void 0===o?S(r).removeProp(i):r[i]=o,t[i]&&(t.jsonpCallback=e.jsonpCallback,en.push(i)),s&&y(o)&&o(s[0]),s=o=void 0})),"script"})),m.createHTMLDocument=((tn=v.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===tn.childNodes.length),S.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(m.createHTMLDocument?((r=(e=v.implementation.createHTMLDocument("")).createElement("base")).href=v.location.href,e.head.appendChild(r)):e=v),o=!n&&[],(i=F.exec(t))?[e.createElement(i[1])]:(i=Pt([t],e,o),o&&o.length&&S(o).remove(),S.merge([],i.childNodes)));var r,i,o},S.fn.load=function(t,e,n){var r,i,o,s=this,a=t.indexOf(" ");return a>-1&&(r=Se(t.slice(a)),t=t.slice(0,a)),y(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),s.length>0&&S.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done((function(t){o=arguments,s.html(r?S("<div>").append(S.parseHTML(t)).find(r):t)})).always(n&&function(t,e){s.each((function(){n.apply(this,o||[t.responseText,e,t])}))}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,(function(e){return t===e.elem})).length},S.offset={setOffset:function(t,e,n){var r,i,o,s,a,c,l=S.css(t,"position"),u=S(t),h={};"static"===l&&(t.style.position="relative"),a=u.offset(),o=S.css(t,"top"),c=S.css(t,"left"),("absolute"===l||"fixed"===l)&&(o+c).indexOf("auto")>-1?(s=(r=u.position()).top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(c)||0),y(e)&&(e=e.call(t,n,S.extend({},a))),null!=e.top&&(h.top=e.top-a.top+s),null!=e.left&&(h.left=e.left-a.left+i),"using"in e?e.using.call(t,h):u.css(h)}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){S.offset.setOffset(this,t,e)}));var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,r=this[0],i={top:0,left:0};if("fixed"===S.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),n=r.ownerDocument,t=r.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===S.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&((i=S(t).offset()).top+=S.css(t,"borderTopWidth",!0),i.left+=S.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-S.css(r,"marginTop",!0),left:e.left-i.left-S.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===S.css(t,"position");)t=t.offsetParent;return t||gt}))}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;S.fn[t]=function(r){return tt(this,(function(t,r,i){var o;if(_(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===i)return o?o[e]:t[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):t[r]=i}),t,r,arguments.length)}})),S.each(["top","left"],(function(t,e){S.cssHooks[e]=te(m.pixelPosition,(function(t,n){if(n)return n=Qt(t,e),Zt.test(n)?S(t).position()[e]+"px":n}))})),S.each({Height:"height",Width:"width"},(function(t,e){S.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,r){S.fn[r]=function(i,o){var s=arguments.length&&(n||"boolean"!=typeof i),a=n||(!0===i||!0===o?"margin":"border");return tt(this,(function(e,n,i){var o;return _(e)?0===r.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?S.css(e,n,a):S.style(e,n,i,a)}),e,s?i:void 0,s)}}))})),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){S.fn[e]=function(t){return this.on(e,t)}})),S.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.on("mouseenter",t).on("mouseleave",e||t)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){S.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}));var rn=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;S.proxy=function(t,e){var n,r,i;if("string"==typeof e&&(n=t[e],e=t,t=n),y(t))return r=a.call(arguments,2),i=function(){return t.apply(e||this,r.concat(a.call(arguments)))},i.guid=t.guid=t.guid||S.guid++,i},S.holdReady=function(t){t?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=A,S.isFunction=y,S.isWindow=_,S.camelCase=it,S.type=w,S.now=Date.now,S.isNumeric=function(t){var e=S.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},S.trim=function(t){return null==t?"":(t+"").replace(rn,"$1")},void 0===(n=function(){return S}.apply(e,[]))||(t.exports=n);var on=r.jQuery,sn=r.$;return S.noConflict=function(t){return r.$===S&&(r.$=sn),t&&r.jQuery===S&&(r.jQuery=on),S},void 0===i&&(r.jQuery=r.$=S),S}))},69483:function(t,e,n){var r=n(25108);t.exports=function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};e[s][0].call(l.exports,(function(t){var n=e[s][1][t];return i(n||t)}),l,l.exports,t,e,n,r)}return n[s].exports}for(var o=void 0,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,r){(function(t){"use strict";var n,r,i=t.MutationObserver||t.WebKitMutationObserver;if(i){var o=0,s=new i(u),a=t.document.createTextNode("");s.observe(a,{characterData:!0}),n=function(){a.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){u(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(u,0)};else{var c=new t.MessageChannel;c.port1.onmessage=u,n=function(){c.port2.postMessage(0)}}var l=[];function u(){var t,e;r=!0;for(var n=l.length;n;){for(e=l,l=[],t=-1;++t<n;)e[t]();n=l.length}r=!1}function h(t){1!==l.push(t)||r||n()}e.exports=h}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){"use strict";var r=t(1);function i(){}var o={},s=["REJECTED"],a=["FULFILLED"],c=["PENDING"];function l(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,t!==i&&f(this,t)}function u(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(t,e,n){r((function(){var r;try{r=e(n)}catch(e){return o.reject(t,e)}r===t?o.reject(t,new TypeError("Cannot resolve promise with itself")):o.resolve(t,r)}))}function p(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function f(t,e){var n=!1;function r(e){n||(n=!0,o.reject(t,e))}function i(e){n||(n=!0,o.resolve(t,e))}function s(){e(i,r)}var a=d(s);"error"===a.status&&r(a.value)}function d(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}function g(t){return t instanceof this?t:o.resolve(new this(i),t)}function m(t){var e=new this(i);return o.reject(e,t)}function y(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var s=new Array(n),a=0,c=-1,l=new this(i);++c<n;)u(t[c],c);return l;function u(t,i){function c(t){s[i]=t,++a!==n||r||(r=!0,o.resolve(l,s))}e.resolve(t).then(c,(function(t){r||(r=!0,o.reject(l,t))}))}}function _(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var s=-1,a=new this(i);++s<n;)c(t[s]);return a;function c(t){e.resolve(t).then((function(t){r||(r=!0,o.resolve(a,t))}),(function(t){r||(r=!0,o.reject(a,t))}))}}e.exports=l,l.prototype.catch=function(t){return this.then(null,t)},l.prototype.then=function(t,e){if("function"!=typeof t&&this.state===a||"function"!=typeof e&&this.state===s)return this;var n=new this.constructor(i);return this.state!==c?h(n,this.state===a?t:e,this.outcome):this.queue.push(new u(n,t,e)),n},u.prototype.callFulfilled=function(t){o.resolve(this.promise,t)},u.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)},u.prototype.callRejected=function(t){o.reject(this.promise,t)},u.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)},o.resolve=function(t,e){var n=d(p,e);if("error"===n.status)return o.reject(t,n.value);var r=n.value;if(r)f(t,r);else{t.state=a,t.outcome=e;for(var i=-1,s=t.queue.length;++i<s;)t.queue[i].callFulfilled(e)}return t},o.reject=function(t,e){t.state=s,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},l.resolve=g,l.reject=m,l.all=y,l.race=_},{1:1}],3:[function(t,e,r){(function(e){"use strict";"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){return}}var a=s();function c(){try{if(!a||!a.open)return!1;var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}}function l(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(i){if("TypeError"!==i.name)throw i;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<t.length;r+=1)n.append(t[r]);return n.getBlob(e.type)}}"undefined"==typeof Promise&&t(3);var u=Promise;function h(t,e){e&&t.then((function(t){e(null,t)}),(function(t){e(t)}))}function p(t,e,n){"function"==typeof e&&t.then(e),"function"==typeof n&&t.catch(n)}function f(t){return"string"!=typeof t&&(r.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function d(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",m=void 0,y={},_=Object.prototype.toString,v="readonly",x="readwrite";function b(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),i=0;i<e;i++)r[i]=t.charCodeAt(i);return n}function w(t){return new u((function(e){var n=t.transaction(g,x),r=l([""]);n.objectStore(g).put(r,"key"),n.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},n.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);e(n||!t||parseInt(t[1],10)>=43)}})).catch((function(){return!1}))}function E(t){return"boolean"==typeof m?u.resolve(m):w(t).then((function(t){return m=t}))}function T(t){var e=y[t.name],n={};n.promise=new u((function(t,e){n.resolve=t,n.reject=e})),e.deferredOperations.push(n),e.dbReady?e.dbReady=e.dbReady.then((function(){return n.promise})):e.dbReady=n.promise}function S(t){var e=y[t.name].deferredOperations.pop();if(e)return e.resolve(),e.promise}function k(t,e){var n=y[t.name].deferredOperations.pop();if(n)return n.reject(e),n.promise}function A(t,e){return new u((function(n,i){if(y[t.name]=y[t.name]||j(),t.db){if(!e)return n(t.db);T(t),t.db.close()}var o=[t.name];e&&o.push(t.version);var s=a.open.apply(a,o);e&&(s.onupgradeneeded=function(e){var n=s.result;try{n.createObjectStore(t.storeName),e.oldVersion<=1&&n.createObjectStore(g)}catch(n){if("ConstraintError"!==n.name)throw n;r.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),s.onerror=function(t){t.preventDefault(),i(s.error)},s.onsuccess=function(){var e=s.result;e.onversionchange=function(t){t.target.close()},n(e),S(t)}}))}function M(t){return A(t,!1)}function I(t){return A(t,!0)}function C(t,e){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),i=t.version<t.db.version,o=t.version>t.db.version;if(i&&(t.version!==e&&r.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),o||n){if(n){var s=t.db.version+1;s>t.version&&(t.version=s)}return!0}return!1}function O(t){return new u((function(e,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");e({__local_forage_encoded_blob:!0,data:r,type:t.type})},r.readAsBinaryString(t)}))}function P(t){return l([b(atob(t.data))],{type:t.type})}function L(t){return t&&t.__local_forage_encoded_blob}function D(t){var e=this,n=e._initReady().then((function(){var t=y[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady}));return p(n,t,t),n}function R(t){T(t);for(var e=y[t.name],n=e.forages,r=0;r<n.length;r++){var i=n[r];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return t.db=null,M(t).then((function(e){return t.db=e,C(t)?I(t):e})).then((function(r){t.db=e.db=r;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=r})).catch((function(e){throw k(t,e),e}))}function N(t,e,n,r){void 0===r&&(r=1);try{var i=t.db.transaction(t.storeName,e);n(null,i)}catch(i){if(r>0&&(!t.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return u.resolve().then((function(){if(!t.db||"NotFoundError"===i.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),I(t)})).then((function(){return R(t).then((function(){N(t,e,n,r-1)}))})).catch(n);n(i)}}function j(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function z(t){var e=this,n={db:null};if(t)for(var r in t)n[r]=t[r];var i=y[n.name];i||(i=j(),y[n.name]=i),i.forages.push(e),e._initReady||(e._initReady=e.ready,e.ready=D);var o=[];function s(){return u.resolve()}for(var a=0;a<i.forages.length;a++){var c=i.forages[a];c!==e&&o.push(c._initReady().catch(s))}var l=i.forages.slice(0);return u.all(o).then((function(){return n.db=i.db,M(n)})).then((function(t){return n.db=t,C(n,e._defaultConfig.version)?I(n):t})).then((function(t){n.db=i.db=t,e._dbInfo=n;for(var r=0;r<l.length;r++){var o=l[r];o!==e&&(o._dbInfo.db=n.db,o._dbInfo.version=n.version)}}))}function B(t,e){var n=this;t=f(t);var r=new u((function(e,r){n.ready().then((function(){N(n._dbInfo,v,(function(i,o){if(i)return r(i);try{var s=o.objectStore(n._dbInfo.storeName).get(t);s.onsuccess=function(){var t=s.result;void 0===t&&(t=null),L(t)&&(t=P(t)),e(t)},s.onerror=function(){r(s.error)}}catch(t){r(t)}}))})).catch(r)}));return h(r,e),r}function F(t,e){var n=this,r=new u((function(e,r){n.ready().then((function(){N(n._dbInfo,v,(function(i,o){if(i)return r(i);try{var s=o.objectStore(n._dbInfo.storeName).openCursor(),a=1;s.onsuccess=function(){var n=s.result;if(n){var r=n.value;L(r)&&(r=P(r));var i=t(r,n.key,a++);void 0!==i?e(i):n.continue()}else e()},s.onerror=function(){r(s.error)}}catch(t){r(t)}}))})).catch(r)}));return h(r,e),r}function U(t,e,n){var r=this;t=f(t);var i=new u((function(n,i){var o;r.ready().then((function(){return o=r._dbInfo,"[object Blob]"===_.call(e)?E(o.db).then((function(t){return t?e:O(e)})):e})).then((function(e){N(r._dbInfo,x,(function(o,s){if(o)return i(o);try{var a=s.objectStore(r._dbInfo.storeName);null===e&&(e=void 0);var c=a.put(e,t);s.oncomplete=function(){void 0===e&&(e=null),n(e)},s.onabort=s.onerror=function(){var t=c.error?c.error:c.transaction.error;i(t)}}catch(t){i(t)}}))})).catch(i)}));return h(i,n),i}function V(t,e){var n=this;t=f(t);var r=new u((function(e,r){n.ready().then((function(){N(n._dbInfo,x,(function(i,o){if(i)return r(i);try{var s=o.objectStore(n._dbInfo.storeName).delete(t);o.oncomplete=function(){e()},o.onerror=function(){r(s.error)},o.onabort=function(){var t=s.error?s.error:s.transaction.error;r(t)}}catch(t){r(t)}}))})).catch(r)}));return h(r,e),r}function q(t){var e=this,n=new u((function(t,n){e.ready().then((function(){N(e._dbInfo,x,(function(r,i){if(r)return n(r);try{var o=i.objectStore(e._dbInfo.storeName).clear();i.oncomplete=function(){t()},i.onabort=i.onerror=function(){var t=o.error?o.error:o.transaction.error;n(t)}}catch(t){n(t)}}))})).catch(n)}));return h(n,t),n}function W(t){var e=this,n=new u((function(t,n){e.ready().then((function(){N(e._dbInfo,v,(function(r,i){if(r)return n(r);try{var o=i.objectStore(e._dbInfo.storeName).count();o.onsuccess=function(){t(o.result)},o.onerror=function(){n(o.error)}}catch(t){n(t)}}))})).catch(n)}));return h(n,t),n}function G(t,e){var n=this,r=new u((function(e,r){t<0?e(null):n.ready().then((function(){N(n._dbInfo,v,(function(i,o){if(i)return r(i);try{var s=o.objectStore(n._dbInfo.storeName),a=!1,c=s.openKeyCursor();c.onsuccess=function(){var n=c.result;n?0===t||a?e(n.key):(a=!0,n.advance(t)):e(null)},c.onerror=function(){r(c.error)}}catch(t){r(t)}}))})).catch(r)}));return h(r,e),r}function $(t){var e=this,n=new u((function(t,n){e.ready().then((function(){N(e._dbInfo,v,(function(r,i){if(r)return n(r);try{var o=i.objectStore(e._dbInfo.storeName).openKeyCursor(),s=[];o.onsuccess=function(){var e=o.result;e?(s.push(e.key),e.continue()):t(s)},o.onerror=function(){n(o.error)}}catch(t){n(t)}}))})).catch(n)}));return h(n,t),n}function H(t,e){e=d.apply(this,arguments);var n=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var i,o=this;if(t.name){var s=t.name===n.name&&o._dbInfo.db?u.resolve(o._dbInfo.db):M(t).then((function(e){var n=y[t.name],r=n.forages;n.db=e;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=e;return e}));i=t.storeName?s.then((function(e){if(e.objectStoreNames.contains(t.storeName)){var n=e.version+1;T(t);var r=y[t.name],i=r.forages;e.close();for(var o=0;o<i.length;o++){var s=i[o];s._dbInfo.db=null,s._dbInfo.version=n}var c=new u((function(e,r){var i=a.open(t.name,n);i.onerror=function(t){i.result.close(),r(t)},i.onupgradeneeded=function(){i.result.deleteObjectStore(t.storeName)},i.onsuccess=function(){var t=i.result;t.close(),e(t)}}));return c.then((function(t){r.db=t;for(var e=0;e<i.length;e++){var n=i[e];n._dbInfo.db=t,S(n._dbInfo)}})).catch((function(e){throw(k(t,e)||u.resolve()).catch((function(){})),e}))}})):s.then((function(e){T(t);var n=y[t.name],i=n.forages;e.close();for(var o=0;o<i.length;o++)i[o]._dbInfo.db=null;var s=new u((function(e,n){var i=a.deleteDatabase(t.name);i.onerror=function(){var t=i.result;t&&t.close(),n(i.error)},i.onblocked=function(){r.warn('dropInstance blocked for database "'+t.name+'" until all open connections are closed')},i.onsuccess=function(){var t=i.result;t&&t.close(),e(t)}}));return s.then((function(t){n.db=t;for(var e=0;e<i.length;e++)S(i[e]._dbInfo)})).catch((function(e){throw(k(t,e)||u.resolve()).catch((function(){})),e}))}))}else i=u.reject("Invalid arguments");return h(i,e),i}var Z={_driver:"asyncStorage",_initStorage:z,_support:c(),iterate:F,getItem:B,setItem:U,removeItem:V,clear:q,length:W,key:G,keys:$,dropInstance:H};function Y(){return"function"==typeof openDatabase}var X="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",K="~~local_forage_type~",J=/^~~local_forage_type~([^~]+)~/,Q="__lfsc__:",tt=Q.length,et="arbf",nt="blob",rt="si08",it="ui08",ot="uic8",st="si16",at="si32",ct="ur16",lt="ui32",ut="fl32",ht="fl64",pt=tt+et.length,ft=Object.prototype.toString;function dt(t){var e,n,r,i,o,s=.75*t.length,a=t.length,c=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var l=new ArrayBuffer(s),u=new Uint8Array(l);for(e=0;e<a;e+=4)n=X.indexOf(t[e]),r=X.indexOf(t[e+1]),i=X.indexOf(t[e+2]),o=X.indexOf(t[e+3]),u[c++]=n<<2|r>>4,u[c++]=(15&r)<<4|i>>2,u[c++]=(3&i)<<6|63&o;return l}function gt(t){var e,n=new Uint8Array(t),r="";for(e=0;e<n.length;e+=3)r+=X[n[e]>>2],r+=X[(3&n[e])<<4|n[e+1]>>4],r+=X[(15&n[e+1])<<2|n[e+2]>>6],r+=X[63&n[e+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}function mt(t,e){var n="";if(t&&(n=ft.call(t)),t&&("[object ArrayBuffer]"===n||t.buffer&&"[object ArrayBuffer]"===ft.call(t.buffer))){var i,o=Q;t instanceof ArrayBuffer?(i=t,o+=et):(i=t.buffer,"[object Int8Array]"===n?o+=rt:"[object Uint8Array]"===n?o+=it:"[object Uint8ClampedArray]"===n?o+=ot:"[object Int16Array]"===n?o+=st:"[object Uint16Array]"===n?o+=ct:"[object Int32Array]"===n?o+=at:"[object Uint32Array]"===n?o+=lt:"[object Float32Array]"===n?o+=ut:"[object Float64Array]"===n?o+=ht:e(new Error("Failed to get type for BinaryArray"))),e(o+gt(i))}else if("[object Blob]"===n){var s=new FileReader;s.onload=function(){var n=K+t.type+"~"+gt(this.result);e(Q+nt+n)},s.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(n){r.error("Couldn't convert value into a JSON string: ",t),e(null,n)}}function yt(t){if(t.substring(0,tt)!==Q)return JSON.parse(t);var e,n=t.substring(pt),r=t.substring(tt,pt);if(r===nt&&J.test(n)){var i=n.match(J);e=i[1],n=n.substring(i[0].length)}var o=dt(n);switch(r){case et:return o;case nt:return l([o],{type:e});case rt:return new Int8Array(o);case it:return new Uint8Array(o);case ot:return new Uint8ClampedArray(o);case st:return new Int16Array(o);case ct:return new Uint16Array(o);case at:return new Int32Array(o);case lt:return new Uint32Array(o);case ut:return new Float32Array(o);case ht:return new Float64Array(o);default:throw new Error("Unkown type: "+r)}}var _t={serialize:mt,deserialize:yt,stringToBuffer:dt,bufferToString:gt};function vt(t,e,n,r){t.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function xt(t){var e=this,n={db:null};if(t)for(var r in t)n[r]="string"!=typeof t[r]?t[r].toString():t[r];var i=new u((function(t,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(t){return r(t)}n.db.transaction((function(i){vt(i,n,(function(){e._dbInfo=n,t()}),(function(t,e){r(e)}))}),r)}));return n.serializer=_t,i}function bt(t,e,n,r,i,o){t.executeSql(n,r,i,(function(t,s){s.code===s.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[e.storeName],(function(t,a){a.rows.length?o(t,s):vt(t,e,(function(){t.executeSql(n,r,i,o)}),o)}),o):o(t,s)}),o)}function wt(t,e){var n=this;t=f(t);var r=new u((function(e,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){bt(n,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[t],(function(t,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=i.serializer.deserialize(r)),e(r)}),(function(t,e){r(e)}))}))})).catch(r)}));return h(r,e),r}function Et(t,e){var n=this,r=new u((function(e,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){bt(n,i,"SELECT * FROM "+i.storeName,[],(function(n,r){for(var o=r.rows,s=o.length,a=0;a<s;a++){var c=o.item(a),l=c.value;if(l&&(l=i.serializer.deserialize(l)),void 0!==(l=t(l,c.key,a+1)))return void e(l)}e()}),(function(t,e){r(e)}))}))})).catch(r)}));return h(r,e),r}function Tt(t,e,n,r){var i=this;t=f(t);var o=new u((function(o,s){i.ready().then((function(){void 0===e&&(e=null);var a=e,c=i._dbInfo;c.serializer.serialize(e,(function(e,l){l?s(l):c.db.transaction((function(n){bt(n,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[t,e],(function(){o(a)}),(function(t,e){s(e)}))}),(function(e){if(e.code===e.QUOTA_ERR){if(r>0)return void o(Tt.apply(i,[t,a,n,r-1]));s(e)}}))}))})).catch(s)}));return h(o,n),o}function St(t,e,n){return Tt.apply(this,[t,e,n,1])}function kt(t,e){var n=this;t=f(t);var r=new u((function(e,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){bt(n,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[t],(function(){e()}),(function(t,e){r(e)}))}))})).catch(r)}));return h(r,e),r}function At(t){var e=this,n=new u((function(t,n){e.ready().then((function(){var r=e._dbInfo;r.db.transaction((function(e){bt(e,r,"DELETE FROM "+r.storeName,[],(function(){t()}),(function(t,e){n(e)}))}))})).catch(n)}));return h(n,t),n}function Mt(t){var e=this,n=new u((function(t,n){e.ready().then((function(){var r=e._dbInfo;r.db.transaction((function(e){bt(e,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(e,n){var r=n.rows.item(0).c;t(r)}),(function(t,e){n(e)}))}))})).catch(n)}));return h(n,t),n}function It(t,e){var n=this,r=new u((function(e,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){bt(n,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[t+1],(function(t,n){var r=n.rows.length?n.rows.item(0).key:null;e(r)}),(function(t,e){r(e)}))}))})).catch(r)}));return h(r,e),r}function Ct(t){var e=this,n=new u((function(t,n){e.ready().then((function(){var r=e._dbInfo;r.db.transaction((function(e){bt(e,r,"SELECT key FROM "+r.storeName,[],(function(e,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key);t(r)}),(function(t,e){n(e)}))}))})).catch(n)}));return h(n,t),n}function Ot(t){return new u((function(e,n){t.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var i=[],o=0;o<r.rows.length;o++)i.push(r.rows.item(o).name);e({db:t,storeNames:i})}),(function(t,e){n(e)}))}),(function(t){n(t)}))}))}function Pt(t,e){e=d.apply(this,arguments);var n=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var r,i=this;return h(r=t.name?new u((function(e){var r;r=t.name===n.name?i._dbInfo.db:openDatabase(t.name,"","",0),t.storeName?e({db:r,storeNames:[t.storeName]}):e(Ot(r))})).then((function(t){return new u((function(e,n){t.db.transaction((function(r){function i(t){return new u((function(e,n){r.executeSql("DROP TABLE IF EXISTS "+t,[],(function(){e()}),(function(t,e){n(e)}))}))}for(var o=[],s=0,a=t.storeNames.length;s<a;s++)o.push(i(t.storeNames[s]));u.all(o).then((function(){e()})).catch((function(t){n(t)}))}),(function(t){n(t)}))}))})):u.reject("Invalid arguments"),e),r}var Lt={_driver:"webSQLStorage",_initStorage:xt,_support:Y(),iterate:Et,getItem:wt,setItem:St,removeItem:kt,clear:At,length:Mt,key:It,keys:Ct,dropInstance:Pt};function Dt(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}function Rt(t,e){var n=t.name+"/";return t.storeName!==e.storeName&&(n+=t.storeName+"/"),n}function Nt(){var t="_localforage_support_test";try{return localStorage.setItem(t,!0),localStorage.removeItem(t),!1}catch(t){return!0}}function jt(){return!Nt()||localStorage.length>0}function zt(t){var e=this,n={};if(t)for(var r in t)n[r]=t[r];return n.keyPrefix=Rt(t,e._defaultConfig),jt()?(e._dbInfo=n,n.serializer=_t,u.resolve()):u.reject()}function Bt(t){var e=this,n=e.ready().then((function(){for(var t=e._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(t)&&localStorage.removeItem(r)}}));return h(n,t),n}function Ft(t,e){var n=this;t=f(t);var r=n.ready().then((function(){var e=n._dbInfo,r=localStorage.getItem(e.keyPrefix+t);return r&&(r=e.serializer.deserialize(r)),r}));return h(r,e),r}function Ut(t,e){var n=this,r=n.ready().then((function(){for(var e=n._dbInfo,r=e.keyPrefix,i=r.length,o=localStorage.length,s=1,a=0;a<o;a++){var c=localStorage.key(a);if(0===c.indexOf(r)){var l=localStorage.getItem(c);if(l&&(l=e.serializer.deserialize(l)),void 0!==(l=t(l,c.substring(i),s++)))return l}}}));return h(r,e),r}function Vt(t,e){var n=this,r=n.ready().then((function(){var e,r=n._dbInfo;try{e=localStorage.key(t)}catch(t){e=null}return e&&(e=e.substring(r.keyPrefix.length)),e}));return h(r,e),r}function qt(t){var e=this,n=e.ready().then((function(){for(var t=e._dbInfo,n=localStorage.length,r=[],i=0;i<n;i++){var o=localStorage.key(i);0===o.indexOf(t.keyPrefix)&&r.push(o.substring(t.keyPrefix.length))}return r}));return h(n,t),n}function Wt(t){var e=this.keys().then((function(t){return t.length}));return h(e,t),e}function Gt(t,e){var n=this;t=f(t);var r=n.ready().then((function(){var e=n._dbInfo;localStorage.removeItem(e.keyPrefix+t)}));return h(r,e),r}function $t(t,e,n){var r=this;t=f(t);var i=r.ready().then((function(){void 0===e&&(e=null);var n=e;return new u((function(i,o){var s=r._dbInfo;s.serializer.serialize(e,(function(e,r){if(r)o(r);else try{localStorage.setItem(s.keyPrefix+t,e),i(n)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||o(t),o(t)}}))}))}));return h(i,n),i}function Ht(t,e){if(e=d.apply(this,arguments),!(t="function"!=typeof t&&t||{}).name){var n=this.config();t.name=t.name||n.name,t.storeName=t.storeName||n.storeName}var r,i=this;return r=t.name?new u((function(e){t.storeName?e(Rt(t,i._defaultConfig)):e(t.name+"/")})).then((function(t){for(var e=localStorage.length-1;e>=0;e--){var n=localStorage.key(e);0===n.indexOf(t)&&localStorage.removeItem(n)}})):u.reject("Invalid arguments"),h(r,e),r}var Zt={_driver:"localStorageWrapper",_initStorage:zt,_support:Dt(),iterate:Ut,getItem:Ft,setItem:$t,removeItem:Gt,clear:Bt,length:Wt,key:Vt,keys:qt,dropInstance:Ht},Yt=function(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)},Xt=function(t,e){for(var n=t.length,r=0;r<n;){if(Yt(t[r],e))return!0;r++}return!1},Kt=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},Jt={},Qt={},te={INDEXEDDB:Z,WEBSQL:Lt,LOCALSTORAGE:Zt},ee=[te.INDEXEDDB._driver,te.WEBSQL._driver,te.LOCALSTORAGE._driver],ne=["dropInstance"],re=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ne),ie={description:"",driver:ee.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function oe(t,e){t[e]=function(){var n=arguments;return t.ready().then((function(){return t[e].apply(t,n)}))}}function se(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var n in e)e.hasOwnProperty(n)&&(Kt(e[n])?arguments[0][n]=e[n].slice():arguments[0][n]=e[n])}return arguments[0]}var ae=function(){function t(e){for(var n in o(this,t),te)if(te.hasOwnProperty(n)){var r=te[n],i=r._driver;this[n]=i,Jt[i]||this.defineDriver(r)}this._defaultConfig=se({},ie),this._config=se({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return t.prototype.config=function(t){if("object"===(void 0===t?"undefined":i(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!=typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t)||!t.driver||this.setDriver(this._config.driver)}return"string"==typeof t?this._config[t]:this._config},t.prototype.defineDriver=function(t,e,n){var i=new u((function(e,n){try{var i=t._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver)return void n(o);for(var s=re.concat("_initStorage"),a=0,c=s.length;a<c;a++){var l=s[a];if((!Xt(ne,l)||t[l])&&"function"!=typeof t[l])return void n(o)}var p=function(){for(var e=function(t){return function(){var e=new Error("Method "+t+" is not implemented by the current driver"),n=u.reject(e);return h(n,arguments[arguments.length-1]),n}},n=0,r=ne.length;n<r;n++){var i=ne[n];t[i]||(t[i]=e(i))}};p();var f=function(n){Jt[i]&&r.info("Redefining LocalForage driver: "+i),Jt[i]=t,Qt[i]=n,e()};"_support"in t?t._support&&"function"==typeof t._support?t._support().then(f,n):f(!!t._support):f(!0)}catch(t){n(t)}}));return p(i,e,n),i},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(t,e,n){var r=Jt[t]?u.resolve(Jt[t]):u.reject(new Error("Driver not found."));return p(r,e,n),r},t.prototype.getSerializer=function(t){var e=u.resolve(_t);return p(e,t),e},t.prototype.ready=function(t){var e=this,n=e._driverSet.then((function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready}));return p(n,t,t),n},t.prototype.setDriver=function(t,e,n){var r=this;Kt(t)||(t=[t]);var i=this._getSupportedDrivers(t);function o(){r._config.driver=r.driver()}function s(t){return r._extend(t),o(),r._ready=r._initStorage(r._config),r._ready}function a(t){return function(){var e=0;function n(){for(;e<t.length;){var i=t[e];return e++,r._dbInfo=null,r._ready=null,r.getDriver(i).then(s).catch(n)}o();var a=new Error("No available storage method found.");return r._driverSet=u.reject(a),r._driverSet}return n()}}var c=null!==this._driverSet?this._driverSet.catch((function(){return u.resolve()})):u.resolve();return this._driverSet=c.then((function(){var t=i[0];return r._dbInfo=null,r._ready=null,r.getDriver(t).then((function(t){r._driver=t._driver,o(),r._wrapLibraryMethodsWithReady(),r._initDriver=a(i)}))})).catch((function(){o();var t=new Error("No available storage method found.");return r._driverSet=u.reject(t),r._driverSet})),p(this._driverSet,e,n),this._driverSet},t.prototype.supports=function(t){return!!Qt[t]},t.prototype._extend=function(t){se(this,t)},t.prototype._getSupportedDrivers=function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];this.supports(i)&&e.push(i)}return e},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,e=re.length;t<e;t++)oe(this,re[t])},t.prototype.createInstance=function(e){return new t(e)},t}(),ce=new ae;e.exports=ce},{3:3}]},{},[4])(4)},46521:function(t){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t){switch(void 0===t?"undefined":e(t)){case"boolean":return t?"1":"";case"string":return t;case"number":return isNaN(t)?"NAN":isFinite(t)?t+"":(t<0?"-":"")+"INF";case"undefined":return"";case"object":return Array.isArray(t)?"Array":null!==t?"Object":"";default:throw new Error("Unsupported value type")}}},45892:function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t){switch(void 0===t?"undefined":r(t)){case"number":return t;case"string":return parseFloat(t)||0;default:return n(69791)(t)}}},69791:function(t){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t){switch(void 0===t?"undefined":e(t)){case"number":return isNaN(t)||!isFinite(t)?0:t<0?Math.ceil(t):Math.floor(t);case"string":return parseInt(t,10)||0;default:return+!!t}}},25190:function(t){"use strict";t.exports=function(t,e){var n=void 0,r=void 0,i=["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur","January","February","March","April","May","June","July","August","September","October","November","December"],o=/\\?(.?)/gi,s=function(t,e){return r[t]?r[t]():e},a=function(t,e){for(t=String(t);t.length<e;)t="0"+t;return t};r={d:function(){return a(r.j(),2)},D:function(){return r.l().slice(0,3)},j:function(){return n.getDate()},l:function(){return i[r.w()]+"day"},N:function(){return r.w()||7},S:function(){var t=r.j(),e=t%10;return e<=3&&1===parseInt(t%100/10,10)&&(e=0),["st","nd","rd"][e-1]||"th"},w:function(){return n.getDay()},z:function(){var t=new Date(r.Y(),r.n()-1,r.j()),e=new Date(r.Y(),0,1);return Math.round((t-e)/864e5)},W:function(){var t=new Date(r.Y(),r.n()-1,r.j()-r.N()+3),e=new Date(t.getFullYear(),0,4);return a(1+Math.round((t-e)/864e5/7),2)},F:function(){return i[6+r.n()]},m:function(){return a(r.n(),2)},M:function(){return r.F().slice(0,3)},n:function(){return n.getMonth()+1},t:function(){return new Date(r.Y(),r.n(),0).getDate()},L:function(){var t=r.Y();return t%4==0&t%100!=0|t%400==0},o:function(){var t=r.n(),e=r.W();return r.Y()+(12===t&&e<9?1:1===t&&e>9?-1:0)},Y:function(){return n.getFullYear()},y:function(){return r.Y().toString().slice(-2)},a:function(){return n.getHours()>11?"pm":"am"},A:function(){return r.a().toUpperCase()},B:function(){var t=3600*n.getUTCHours(),e=60*n.getUTCMinutes(),r=n.getUTCSeconds();return a(Math.floor((t+e+r+3600)/86.4)%1e3,3)},g:function(){return r.G()%12||12},G:function(){return n.getHours()},h:function(){return a(r.g(),2)},H:function(){return a(r.G(),2)},i:function(){return a(n.getMinutes(),2)},s:function(){return a(n.getSeconds(),2)},u:function(){return a(1e3*n.getMilliseconds(),6)},e:function(){throw new Error("Not supported (see source code of date() for timezone on how to add support)")},I:function(){return new Date(r.Y(),0)-Date.UTC(r.Y(),0)!=new Date(r.Y(),6)-Date.UTC(r.Y(),6)?1:0},O:function(){var t=n.getTimezoneOffset(),e=Math.abs(t);return(t>0?"-":"+")+a(100*Math.floor(e/60)+e%60,4)},P:function(){var t=r.O();return t.substr(0,3)+":"+t.substr(3,2)},T:function(){return"UTC"},Z:function(){return 60*-n.getTimezoneOffset()},c:function(){return"Y-m-d\\TH:i:sP".replace(o,s)},r:function(){return"D, d M Y H:i:s O".replace(o,s)},U:function(){return n/1e3|0}};return function(t,e){return n=void 0===e?new Date:e instanceof Date?new Date(e):new Date(1e3*e),t.replace(o,s)}(t,e)}},27195:function(t){"use strict";var e="[ \\t]+",n="[ \\t]*",r="(?:([ap])\\.?m\\.?([\\t ]|$))",i="(2[0-4]|[01]?[0-9])",o="([01][0-9]|2[0-4])",s="(0?[1-9]|1[0-2])",a="([0-5]?[0-9])",c="([0-5][0-9])",l="(60|[0-5]?[0-9])",u="(60|[0-5][0-9])",h="(?:\\.([0-9]+))",p="sunday|monday|tuesday|wednesday|thursday|friday|saturday",f="sun|mon|tue|wed|thu|fri|sat",d=p+"|"+f+"|weekdays?",g="first|second|third|fourth|fifth|sixth|seventh|eighth?|ninth|tenth|eleventh|twelfth",m="next|last|previous|this",y="(?:second|sec|minute|min|hour|day|fortnight|forthnight|month|year)s?|weeks|"+d,_="([0-9]{1,4})",v="([0-9]{4})",x="(1[0-2]|0?[0-9])",b="(0[0-9]|1[0-2])",w="(?:(3[01]|[0-2]?[0-9])(?:st|nd|rd|th)?)",E="(0[0-9]|[1-2][0-9]|3[01])",T="january|february|march|april|may|june|july|august|september|october|november|december",S="jan|feb|mar|apr|may|jun|jul|aug|sept?|oct|nov|dec",k="("+T+"|"+S+"|i[vx]|vi{0,3}|xi{0,2}|i{1,3})",A="((?:GMT)?([+-])"+i+":?"+a+"?)",M=k+"[ .\\t-]*"+w+"[,.stndrh\\t ]*";function I(t,e){switch(e=e&&e.toLowerCase()){case"a":t+=12===t?-12:0;break;case"p":t+=12!==t?12:0}return t}function C(t){var e=+t;return t.length<4&&e<100&&(e+=e<70?2e3:1900),e}function O(t){return{jan:0,january:0,i:0,feb:1,february:1,ii:1,mar:2,march:2,iii:2,apr:3,april:3,iv:3,may:4,v:4,jun:5,june:5,vi:5,jul:6,july:6,vii:6,aug:7,august:7,viii:7,sep:8,sept:8,september:8,ix:8,oct:9,october:9,x:9,nov:10,november:10,xi:10,dec:11,december:11,xii:11}[t.toLowerCase()]}function P(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{mon:1,monday:1,tue:2,tuesday:2,wed:3,wednesday:3,thu:4,thursday:4,fri:5,friday:5,sat:6,saturday:6,sun:0,sunday:0}[t.toLowerCase()]||e}function L(t,e){if(!(t=t&&t.match(/(?:GMT)?([+-])(\d+)(:?)(\d{0,2})/i)))return e;var n="-"===t[1]?-1:1,r=+t[2],i=+t[4];return t[4]||t[3]||(i=Math.floor(r%100),r=Math.floor(r/100)),n*(60*r+i)*60}var D={acdt:37800,acst:34200,addt:-7200,adt:-10800,aedt:39600,aest:36e3,ahdt:-32400,ahst:-36e3,akdt:-28800,akst:-32400,amt:-13840,apt:-10800,ast:-14400,awdt:32400,awst:28800,awt:-10800,bdst:7200,bdt:-36e3,bmt:-14309,bst:3600,cast:34200,cat:7200,cddt:-14400,cdt:-18e3,cemt:10800,cest:7200,cet:3600,cmt:-15408,cpt:-18e3,cst:-21600,cwt:-18e3,chst:36e3,dmt:-1521,eat:10800,eddt:-10800,edt:-14400,eest:10800,eet:7200,emt:-26248,ept:-14400,est:-18e3,ewt:-14400,ffmt:-14660,fmt:-4056,gdt:39600,gmt:0,gst:36e3,hdt:-34200,hkst:32400,hkt:28800,hmt:-19776,hpt:-34200,hst:-36e3,hwt:-34200,iddt:14400,idt:10800,imt:25025,ist:7200,jdt:36e3,jmt:8440,jst:32400,kdt:36e3,kmt:5736,kst:30600,lst:9394,mddt:-18e3,mdst:16279,mdt:-21600,mest:7200,met:3600,mmt:9017,mpt:-21600,msd:14400,msk:10800,mst:-25200,mwt:-21600,nddt:-5400,ndt:-9052,npt:-9e3,nst:-12600,nwt:-9e3,nzdt:46800,nzmt:41400,nzst:43200,pddt:-21600,pdt:-25200,pkst:21600,pkt:18e3,plmt:25590,pmt:-13236,ppmt:-17340,ppt:-25200,pst:-28800,pwt:-25200,qmt:-18840,rmt:5794,sast:7200,sdmt:-16800,sjmt:-20173,smt:-13884,sst:-39600,tbmt:10751,tmt:12344,uct:0,utc:0,wast:7200,wat:3600,wemt:7200,west:3600,wet:0,wib:25200,wita:28800,wit:32400,wmt:5040,yddt:-25200,ydt:-28800,ypt:-28800,yst:-32400,ywt:-28800,a:3600,b:7200,c:10800,d:14400,e:18e3,f:21600,g:25200,h:28800,i:32400,k:36e3,l:39600,m:43200,n:-3600,o:-7200,p:-10800,q:-14400,r:-18e3,s:-21600,t:-25200,u:-28800,v:-32400,w:-36e3,x:-39600,y:-43200,z:0},R={yesterday:{regex:/^yesterday/i,name:"yesterday",callback:function(){return this.rd-=1,this.resetTime()}},now:{regex:/^now/i,name:"now"},noon:{regex:/^noon/i,name:"noon",callback:function(){return this.resetTime()&&this.time(12,0,0,0)}},midnightOrToday:{regex:/^(midnight|today)/i,name:"midnight | today",callback:function(){return this.resetTime()}},tomorrow:{regex:/^tomorrow/i,name:"tomorrow",callback:function(){return this.rd+=1,this.resetTime()}},timestamp:{regex:/^@(-?\d+)/i,name:"timestamp",callback:function(t,e){return this.rs+=+e,this.y=1970,this.m=0,this.d=1,this.dates=0,this.resetTime()&&this.zone(0)}},firstOrLastDay:{regex:/^(first|last) day of/i,name:"firstdayof | lastdayof",callback:function(t,e){"first"===e.toLowerCase()?this.firstOrLastDayOfMonth=1:this.firstOrLastDayOfMonth=-1}},backOrFrontOf:{regex:RegExp("^(back|front) of "+i+n+r+"?","i"),name:"backof | frontof",callback:function(t,e,n,r){var i=+n,o=15;return"back"===e.toLowerCase()||(i-=1,o=45),i=I(i,r),this.resetTime()&&this.time(i,o,0,0)}},weekdayOf:{regex:RegExp("^("+g+"|"+m+")"+e+"("+p+"|"+f+")"+e+"of","i"),name:"weekdayof"},mssqltime:{regex:RegExp("^"+s+":"+c+":"+u+"[:.]([0-9]+)"+r,"i"),name:"mssqltime",callback:function(t,e,n,r,i,o){return this.time(I(+e,o),+n,+r,+i.substr(0,3))}},timeLong12:{regex:RegExp("^"+s+"[:.]"+a+"[:.]"+u+n+r,"i"),name:"timelong12",callback:function(t,e,n,r,i){return this.time(I(+e,i),+n,+r,0)}},timeShort12:{regex:RegExp("^"+s+"[:.]"+c+n+r,"i"),name:"timeshort12",callback:function(t,e,n,r){return this.time(I(+e,r),+n,0,0)}},timeTiny12:{regex:RegExp("^"+s+n+r,"i"),name:"timetiny12",callback:function(t,e,n){return this.time(I(+e,n),0,0,0)}},soap:{regex:RegExp("^"+v+"-"+b+"-"+E+"T"+o+":"+c+":"+u+h+A+"?","i"),name:"soap",callback:function(t,e,n,r,i,o,s,a,c){return this.ymd(+e,n-1,+r)&&this.time(+i,+o,+s,+a.substr(0,3))&&this.zone(L(c))}},wddx:{regex:RegExp("^"+v+"-"+x+"-"+w+"T"+i+":"+a+":"+l),name:"wddx",callback:function(t,e,n,r,i,o,s){return this.ymd(+e,n-1,+r)&&this.time(+i,+o,+s,0)}},exif:{regex:RegExp("^"+v+":"+b+":"+E+" "+o+":"+c+":"+u,"i"),name:"exif",callback:function(t,e,n,r,i,o,s){return this.ymd(+e,n-1,+r)&&this.time(+i,+o,+s,0)}},xmlRpc:{regex:RegExp("^"+v+b+E+"T"+i+":"+c+":"+u),name:"xmlrpc",callback:function(t,e,n,r,i,o,s){return this.ymd(+e,n-1,+r)&&this.time(+i,+o,+s,0)}},xmlRpcNoColon:{regex:RegExp("^"+v+b+E+"[Tt]"+i+c+u),name:"xmlrpcnocolon",callback:function(t,e,n,r,i,o,s){return this.ymd(+e,n-1,+r)&&this.time(+i,+o,+s,0)}},clf:{regex:RegExp("^"+w+"/("+S+")/"+v+":"+o+":"+c+":"+u+e+A,"i"),name:"clf",callback:function(t,e,n,r,i,o,s,a){return this.ymd(+r,O(n),+e)&&this.time(+i,+o,+s,0)&&this.zone(L(a))}},iso8601long:{regex:RegExp("^t?"+i+"[:.]"+a+"[:.]"+l+h,"i"),name:"iso8601long",callback:function(t,e,n,r,i){return this.time(+e,+n,+r,+i.substr(0,3))}},dateTextual:{regex:RegExp("^"+k+"[ .\\t-]*"+w+"[,.stndrh\\t ]+"+_,"i"),name:"datetextual",callback:function(t,e,n,r){return this.ymd(C(r),O(e),+n)}},pointedDate4:{regex:RegExp("^"+w+"[.\\t-]"+x+"[.-]"+v),name:"pointeddate4",callback:function(t,e,n,r){return this.ymd(+r,n-1,+e)}},pointedDate2:{regex:RegExp("^"+w+"[.\\t]"+x+"\\.([0-9]{2})"),name:"pointeddate2",callback:function(t,e,n,r){return this.ymd(C(r),n-1,+e)}},timeLong24:{regex:RegExp("^t?"+i+"[:.]"+a+"[:.]"+l),name:"timelong24",callback:function(t,e,n,r){return this.time(+e,+n,+r,0)}},dateNoColon:{regex:RegExp("^"+v+b+E),name:"datenocolon",callback:function(t,e,n,r){return this.ymd(+e,n-1,+r)}},pgydotd:{regex:RegExp("^"+v+"\\.?(00[1-9]|0[1-9][0-9]|[12][0-9][0-9]|3[0-5][0-9]|36[0-6])"),name:"pgydotd",callback:function(t,e,n){return this.ymd(+e,0,+n)}},timeShort24:{regex:RegExp("^t?"+i+"[:.]"+a,"i"),name:"timeshort24",callback:function(t,e,n){return this.time(+e,+n,0,0)}},iso8601noColon:{regex:RegExp("^t?"+o+c+u,"i"),name:"iso8601nocolon",callback:function(t,e,n,r){return this.time(+e,+n,+r,0)}},iso8601dateSlash:{regex:RegExp("^"+v+"/"+b+"/"+E+"/"),name:"iso8601dateslash",callback:function(t,e,n,r){return this.ymd(+e,n-1,+r)}},dateSlash:{regex:RegExp("^"+v+"/"+x+"/"+w),name:"dateslash",callback:function(t,e,n,r){return this.ymd(+e,n-1,+r)}},american:{regex:RegExp("^"+x+"/"+w+"/"+_),name:"american",callback:function(t,e,n,r){return this.ymd(C(r),e-1,+n)}},americanShort:{regex:RegExp("^"+x+"/"+w),name:"americanshort",callback:function(t,e,n){return this.ymd(this.y,e-1,+n)}},gnuDateShortOrIso8601date2:{regex:RegExp("^"+_+"-"+x+"-"+w),name:"gnudateshort | iso8601date2",callback:function(t,e,n,r){return this.ymd(C(e),n-1,+r)}},iso8601date4:{regex:RegExp("^([+-]?[0-9]{4})-"+b+"-"+E),name:"iso8601date4",callback:function(t,e,n,r){return this.ymd(+e,n-1,+r)}},gnuNoColon:{regex:RegExp("^t?"+o+c,"i"),name:"gnunocolon",callback:function(t,e,n){switch(this.times){case 0:return this.time(+e,+n,0,this.f);case 1:return this.y=100*e+ +n,this.times++,!0;default:return!1}}},gnuDateShorter:{regex:RegExp("^"+v+"-"+x),name:"gnudateshorter",callback:function(t,e,n){return this.ymd(+e,n-1,1)}},pgTextReverse:{regex:RegExp("^(\\d{3,4}|[4-9]\\d|3[2-9])-("+S+")-"+E,"i"),name:"pgtextreverse",callback:function(t,e,n,r){return this.ymd(C(e),O(n),+r)}},dateFull:{regex:RegExp("^"+w+"[ \\t.-]*"+k+"[ \\t.-]*"+_,"i"),name:"datefull",callback:function(t,e,n,r){return this.ymd(C(r),O(n),+e)}},dateNoDay:{regex:RegExp("^"+k+"[ .\\t-]*"+v,"i"),name:"datenoday",callback:function(t,e,n){return this.ymd(+n,O(e),1)}},dateNoDayRev:{regex:RegExp("^"+v+"[ .\\t-]*"+k,"i"),name:"datenodayrev",callback:function(t,e,n){return this.ymd(+e,O(n),1)}},pgTextShort:{regex:RegExp("^("+S+")-"+E+"-"+_,"i"),name:"pgtextshort",callback:function(t,e,n,r){return this.ymd(C(r),O(e),+n)}},dateNoYear:{regex:RegExp("^"+M,"i"),name:"datenoyear",callback:function(t,e,n){return this.ymd(this.y,O(e),+n)}},dateNoYearRev:{regex:RegExp("^"+w+"[ .\\t-]*"+k,"i"),name:"datenoyearrev",callback:function(t,e,n){return this.ymd(this.y,O(n),+e)}},isoWeekDay:{regex:RegExp("^"+v+"-?W(0[1-9]|[1-4][0-9]|5[0-3])(?:-?([0-7]))?"),name:"isoweekday | isoweek",callback:function(t,e,n,r){if(r=r?+r:1,!this.ymd(+e,0,1))return!1;var i=new Date(this.y,this.m,this.d).getDay();i=0-(i>4?i-7:i),this.rd+=i+7*(n-1)+r}},relativeText:{regex:RegExp("^("+g+"|"+m+")"+e+"("+y+")","i"),name:"relativetext",callback:function(t,e,n){var r,i={amount:{last:-1,previous:-1,this:0,first:1,next:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eight:8,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12}[r=e.toLowerCase()],behavior:{this:1}[r]||0},o=i.amount;switch(n.toLowerCase()){case"sec":case"secs":case"second":case"seconds":this.rs+=o;break;case"min":case"mins":case"minute":case"minutes":this.ri+=o;break;case"hour":case"hours":this.rh+=o;break;case"day":case"days":this.rd+=o;break;case"fortnight":case"fortnights":case"forthnight":case"forthnights":this.rd+=14*o;break;case"week":case"weeks":this.rd+=7*o;break;case"month":case"months":this.rm+=o;break;case"year":case"years":this.ry+=o;break;case"mon":case"monday":case"tue":case"tuesday":case"wed":case"wednesday":case"thu":case"thursday":case"fri":case"friday":case"sat":case"saturday":case"sun":case"sunday":this.resetTime(),this.weekday=P(n,7),this.weekdayBehavior=1,this.rd+=7*(o>0?o-1:o)}}},relative:{regex:RegExp("^([+-]*)[ \\t]*(\\d+)"+n+"("+y+"|week)","i"),name:"relative",callback:function(t,e,n,r){var i=e.replace(/[^-]/g,"").length,o=+n*Math.pow(-1,i);switch(r.toLowerCase()){case"sec":case"secs":case"second":case"seconds":this.rs+=o;break;case"min":case"mins":case"minute":case"minutes":this.ri+=o;break;case"hour":case"hours":this.rh+=o;break;case"day":case"days":this.rd+=o;break;case"fortnight":case"fortnights":case"forthnight":case"forthnights":this.rd+=14*o;break;case"week":case"weeks":this.rd+=7*o;break;case"month":case"months":this.rm+=o;break;case"year":case"years":this.ry+=o;break;case"mon":case"monday":case"tue":case"tuesday":case"wed":case"wednesday":case"thu":case"thursday":case"fri":case"friday":case"sat":case"saturday":case"sun":case"sunday":this.resetTime(),this.weekday=P(r,7),this.weekdayBehavior=1,this.rd+=7*(o>0?o-1:o)}}},dayText:{regex:RegExp("^("+d+")","i"),name:"daytext",callback:function(t,e){this.resetTime(),this.weekday=P(e,0),2!==this.weekdayBehavior&&(this.weekdayBehavior=1)}},relativeTextWeek:{regex:RegExp("^("+m+")"+e+"week","i"),name:"relativetextweek",callback:function(t,e){switch(this.weekdayBehavior=2,e.toLowerCase()){case"this":this.rd+=0;break;case"next":this.rd+=7;break;case"last":case"previous":this.rd-=7}isNaN(this.weekday)&&(this.weekday=1)}},monthFullOrMonthAbbr:{regex:RegExp("^("+T+"|"+S+")","i"),name:"monthfull | monthabbr",callback:function(t,e){return this.ymd(this.y,O(e),this.d)}},tzCorrection:{regex:RegExp("^"+A,"i"),name:"tzcorrection",callback:function(t){return this.zone(L(t))}},tzAbbr:{regex:RegExp("^\\(?([a-zA-Z]{1,6})\\)?"),name:"tzabbr",callback:function(t,e){var n=D[e.toLowerCase()];return!isNaN(n)&&this.zone(n)}},ago:{regex:/^ago/i,name:"ago",callback:function(){this.ry=-this.ry,this.rm=-this.rm,this.rd=-this.rd,this.rh=-this.rh,this.ri=-this.ri,this.rs=-this.rs,this.rf=-this.rf}},year4:{regex:RegExp("^"+v),name:"year4",callback:function(t,e){return this.y=+e,!0}},whitespace:{regex:/^[ .,\t]+/,name:"whitespace"},dateShortWithTimeLong:{regex:RegExp("^"+M+"t?"+i+"[:.]"+a+"[:.]"+l,"i"),name:"dateshortwithtimelong",callback:function(t,e,n,r,i,o){return this.ymd(this.y,O(e),+n)&&this.time(+r,+i,+o,0)}},dateShortWithTimeLong12:{regex:RegExp("^"+M+s+"[:.]"+a+"[:.]"+u+n+r,"i"),name:"dateshortwithtimelong12",callback:function(t,e,n,r,i,o,s){return this.ymd(this.y,O(e),+n)&&this.time(I(+r,s),+i,+o,0)}},dateShortWithTimeShort:{regex:RegExp("^"+M+"t?"+i+"[:.]"+a,"i"),name:"dateshortwithtimeshort",callback:function(t,e,n,r,i){return this.ymd(this.y,O(e),+n)&&this.time(+r,+i,0,0)}},dateShortWithTimeShort12:{regex:RegExp("^"+M+s+"[:.]"+c+n+r,"i"),name:"dateshortwithtimeshort12",callback:function(t,e,n,r,i,o){return this.ymd(this.y,O(e),+n)&&this.time(I(+r,o),+i,0,0)}}},N={y:NaN,m:NaN,d:NaN,h:NaN,i:NaN,s:NaN,f:NaN,ry:0,rm:0,rd:0,rh:0,ri:0,rs:0,rf:0,weekday:NaN,weekdayBehavior:0,firstOrLastDayOfMonth:0,z:NaN,dates:0,times:0,zones:0,ymd:function(t,e,n){return!(this.dates>0)&&(this.dates++,this.y=t,this.m=e,this.d=n,!0)},time:function(t,e,n,r){return!(this.times>0)&&(this.times++,this.h=t,this.i=e,this.s=n,this.f=r,!0)},resetTime:function(){return this.h=0,this.i=0,this.s=0,this.f=0,this.times=0,!0},zone:function(t){return this.zones<=1&&(this.zones++,this.z=t,!0)},toDate:function(t){switch(this.dates&&!this.times&&(this.h=this.i=this.s=this.f=0),isNaN(this.y)&&(this.y=t.getFullYear()),isNaN(this.m)&&(this.m=t.getMonth()),isNaN(this.d)&&(this.d=t.getDate()),isNaN(this.h)&&(this.h=t.getHours()),isNaN(this.i)&&(this.i=t.getMinutes()),isNaN(this.s)&&(this.s=t.getSeconds()),isNaN(this.f)&&(this.f=t.getMilliseconds()),this.firstOrLastDayOfMonth){case 1:this.d=1;break;case-1:this.d=0,this.m+=1}if(!isNaN(this.weekday)){var e=new Date(t.getTime());e.setFullYear(this.y,this.m,this.d),e.setHours(this.h,this.i,this.s,this.f);var n=e.getDay();if(2===this.weekdayBehavior)0===n&&0!==this.weekday&&(this.weekday=-6),0===this.weekday&&0!==n&&(this.weekday=7),this.d-=n,this.d+=this.weekday;else{var r=this.weekday-n;(this.rd<0&&r<0||this.rd>=0&&r<=-this.weekdayBehavior)&&(r+=7),this.weekday>=0?this.d+=r:this.d-=7-(Math.abs(this.weekday)-n),this.weekday=NaN}}this.y+=this.ry,this.m+=this.rm,this.d+=this.rd,this.h+=this.rh,this.i+=this.ri,this.s+=this.rs,this.f+=this.rf,this.ry=this.rm=this.rd=0,this.rh=this.ri=this.rs=this.rf=0;var i=new Date(t.getTime());switch(i.setFullYear(this.y,this.m,this.d),i.setHours(this.h,this.i,this.s,this.f),this.firstOrLastDayOfMonth){case 1:i.setDate(1);break;case-1:i.setMonth(i.getMonth()+1,0)}return isNaN(this.z)||i.getTimezoneOffset()===this.z||(i.setUTCFullYear(i.getFullYear(),i.getMonth(),i.getDate()),i.setUTCHours(i.getHours(),i.getMinutes(),i.getSeconds()-this.z,i.getMilliseconds())),i}};t.exports=function(t,e){null==e&&(e=Math.floor(Date.now()/1e3));for(var n=[R.yesterday,R.now,R.noon,R.midnightOrToday,R.tomorrow,R.timestamp,R.firstOrLastDay,R.backOrFrontOf,R.timeTiny12,R.timeShort12,R.timeLong12,R.mssqltime,R.timeShort24,R.timeLong24,R.iso8601long,R.gnuNoColon,R.iso8601noColon,R.americanShort,R.american,R.iso8601date4,R.iso8601dateSlash,R.dateSlash,R.gnuDateShortOrIso8601date2,R.gnuDateShorter,R.dateFull,R.pointedDate4,R.pointedDate2,R.dateNoDay,R.dateNoDayRev,R.dateTextual,R.dateNoYear,R.dateNoYearRev,R.dateNoColon,R.xmlRpc,R.xmlRpcNoColon,R.soap,R.wddx,R.exif,R.pgydotd,R.isoWeekDay,R.pgTextShort,R.pgTextReverse,R.clf,R.year4,R.ago,R.dayText,R.relativeTextWeek,R.relativeText,R.monthFullOrMonthAbbr,R.tzCorrection,R.tzAbbr,R.dateShortWithTimeShort12,R.dateShortWithTimeLong12,R.dateShortWithTimeShort,R.dateShortWithTimeLong,R.relative,R.whitespace],r=Object.create(N);t.length;){for(var i=null,o=null,s=0,a=n.length;s<a;s++){var c=n[s],l=t.match(c.regex);l&&(!i||l[0].length>i[0].length)&&(i=l,o=c)}if(!o||o.callback&&!1===o.callback.apply(r,i))return!1;t=t.substr(i[0].length),o=null,i=null}return Math.floor(r.toDate(new Date(1e3*e))/1e3)}},14673:function(t){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(){var t,n=void 0,r=void 0,i=0,o=arguments,s=o.length,a=function(t){if("[object Array]"===Object.prototype.toString.call(t))return t;var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e},c=function t(n,r){var i=0,o=0,s=0,c=0,l=0;if(n===r)return 0;if("object"===(void 0===n?"undefined":e(n))){if("object"===(void 0===r?"undefined":e(r))){if(n=a(n),r=a(r),l=n.length,(c=r.length)>l)return 1;if(c<l)return-1;for(i=0,o=l;i<o;++i){if(1===(s=t(n[i],r[i])))return 1;if(-1===s)return-1}return 0}return-1}return"object"===(void 0===r?"undefined":e(r))?1:isNaN(r)&&!isNaN(n)?0===n?0:n<0?1:-1:isNaN(n)&&!isNaN(r)?0===r?0:r>0?1:-1:r===n?0:r>n?1:-1};if(0===s)throw new Error("At least one value should be passed to max()");if(1===s){if("object"!==e(o[0]))throw new Error("Wrong parameter count for max()");if(0===(n=a(o[0])).length)throw new Error("Array must contain at least one element for max()")}else n=o;for(r=n[0],i=1,t=n.length;i<t;++i)1===c(r,n[i])&&(r=n[i]);return r}},91004:function(t){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(){var t,n=void 0,r=void 0,i=0,o=arguments,s=o.length,a=function(t){if("[object Array]"===Object.prototype.toString.call(t))return t;var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e},c=function t(n,r){var i=0,o=0,s=0,c=0,l=0;if(n===r)return 0;if("object"===(void 0===n?"undefined":e(n))){if("object"===(void 0===r?"undefined":e(r))){if(n=a(n),r=a(r),l=n.length,(c=r.length)>l)return 1;if(c<l)return-1;for(i=0,o=l;i<o;++i){if(1===(s=t(n[i],r[i])))return 1;if(-1===s)return-1}return 0}return-1}return"object"===(void 0===r?"undefined":e(r))?1:isNaN(r)&&!isNaN(n)?0===n?0:n<0?1:-1:isNaN(n)&&!isNaN(r)?0===r?0:r>0?1:-1:r===n?0:r>n?1:-1};if(0===s)throw new Error("At least one value should be passed to min()");if(1===s){if("object"!==e(o[0]))throw new Error("Wrong parameter count for min()");if(0===(n=a(o[0])).length)throw new Error("Array must contain at least one element for min()")}else n=o;for(r=n[0],i=1,t=n.length;i<t;++i)-1===c(r,n[i])&&(r=n[i]);return r}},718:function(t,e,n){"use strict";function r(t,e){var n=Math.floor(Math.abs(t)+.5);return("PHP_ROUND_HALF_DOWN"===e&&t===n-.5||"PHP_ROUND_HALF_EVEN"===e&&t===.5+2*Math.floor(n/2)||"PHP_ROUND_HALF_ODD"===e&&t===.5+2*Math.floor(n/2)-1)&&(n-=1),t<0?-n:n}t.exports=function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"PHP_ROUND_HALF_UP",s=n(45892),a=n(69791);if(t=s(t),i=a(i),e=Math.pow(10,i),isNaN(t)||!isFinite(t))return t;if(Math.trunc(t)===t&&i>=0)return t;var c=14-Math.floor(Math.log10(Math.abs(t)));return c>i&&c-15<i?(t=r(t*Math.pow(10,c),o),t/=Math.pow(10,Math.abs(i-c))):t*=e,(t=r(t,o))/e}},28296:function(t){"use strict";t.exports=function(){var t=arguments,e=0,n=t[e++],r=function(t,e,n,r){n||(n=" ");var i=t.length>=e?"":new Array(1+e-t.length>>>0).join(n);return r?t+i:i+t},i=function(t,e,n,i,o){var s=i-t.length;return s>0&&(t=n||"0"!==o?r(t,i,o,n):[t.slice(0,e.length),r("",s,"0",!0),t.slice(e.length)].join("")),t},o=function(t,e,n,o,s,a){return t=r((t>>>0).toString(e),s||0,"0",!1),i(t,"",n,o,a)},s=function(t,e,n,r,o){return null!=r&&(t=t.slice(0,r)),i(t,"",e,n,o)};try{return n.replace(/%%|%(?:(\d+)\$)?((?:[-+#0 ]|'[\s\S])*)(\d+)?(?:\.(\d*))?([\s\S])/g,(function(n,a,c,l,u,h){var p=void 0,f=void 0,d=void 0,g=void 0,m=void 0;if("%%"===n)return"%";var y,_=" ",v=!1,x="",b=void 0;for(b=0,y=c.length;b<y;b++)switch(c.charAt(b)){case" ":case"0":_=c.charAt(b);break;case"+":x="+";break;case"-":v=!0;break;case"'":b+1<y&&(_=c.charAt(b+1),b++)}if(l=l?+l:0,!isFinite(l))throw new Error("Width must be finite");if(u=u?+u:"d"===h?0:"fFeE".indexOf(h)>-1?6:void 0,a&&0==+a)throw new Error("Argument number must be greater than zero");if(a&&+a>=t.length)throw new Error("Too few arguments");switch(m=a?t[+a]:t[e++],h){case"%":return"%";case"s":return s(m+"",v,l,u,_);case"c":return s(String.fromCharCode(+m),v,l,u,_);case"b":return o(m,2,v,l,u,_);case"o":return o(m,8,v,l,u,_);case"x":return o(m,16,v,l,u,_);case"X":return o(m,16,v,l,u,_).toUpperCase();case"u":return o(m,10,v,l,u,_);case"i":case"d":return p=+m||0,m=(f=(p=Math.round(p-p%1))<0?"-":x)+r(String(Math.abs(p)),u,"0",!1),v&&"0"===_&&(_=" "),i(m,f,v,l,_);case"e":case"E":case"f":case"F":case"g":case"G":return f=(p=+m)<0?"-":x,d=["toExponential","toFixed","toPrecision"]["efg".indexOf(h.toLowerCase())],g=["toString","toUpperCase"]["eEfFgG".indexOf(h)%2],m=f+Math.abs(p)[d](u),i(m,f,v,l,_)[g]();default:return""}}))}catch(t){return!1}}},64359:function(t,e,n){"use strict";t.exports=function(t,e){var r=n(46521);e=(((e||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var i=/<\/?([a-z0-9]*)\b[^>]*>?/gi,o=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,s=r(t);for(s="<"===s.substring(s.length-1)?s.substring(0,s.length-1):s;;){var a=s;if(s=a.replace(o,"").replace(i,(function(t,n){return e.indexOf("<"+n.toLowerCase()+">")>-1?t:""})),a===s)return s}}},19436:function(t,e,n){"use strict";t.exports=function(t,e){return n(28296).apply(this,[t].concat(e))}},45315:function(t){"use strict";t.exports=function(t){return!1!==t&&(0!==t&&0!==t&&(""!==t&&"0"!==t&&((!Array.isArray(t)||0!==t.length)&&null!=t)))}},96486:function(t,e,n){var r;t=n.nmd(t),function(){var i,o="Expected a function",s="__lodash_hash_undefined__",a="__lodash_placeholder__",c=16,l=32,u=64,h=128,p=256,f=1/0,d=9007199254740991,g=NaN,m=4294967295,y=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",c],["flip",512],["partial",l],["partialRight",u],["rearg",p]],_="[object Arguments]",v="[object Array]",x="[object Boolean]",b="[object Date]",w="[object Error]",E="[object Function]",T="[object GeneratorFunction]",S="[object Map]",k="[object Number]",A="[object Object]",M="[object Promise]",I="[object RegExp]",C="[object Set]",O="[object String]",P="[object Symbol]",L="[object WeakMap]",D="[object ArrayBuffer]",R="[object DataView]",N="[object Float32Array]",j="[object Float64Array]",z="[object Int8Array]",B="[object Int16Array]",F="[object Int32Array]",U="[object Uint8Array]",V="[object Uint8ClampedArray]",q="[object Uint16Array]",W="[object Uint32Array]",G=/\b__p \+= '';/g,$=/\b(__p \+=) '' \+/g,H=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Z=/&(?:amp|lt|gt|quot|#39);/g,Y=/[&<>"']/g,X=RegExp(Z.source),K=RegExp(Y.source),J=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,tt=/<%=([\s\S]+?)%>/g,et=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nt=/^\w*$/,rt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,it=/[\\^$.*+?()[\]{}|]/g,ot=RegExp(it.source),st=/^\s+/,at=/\s/,ct=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,lt=/\{\n\/\* \[wrapped with (.+)\] \*/,ut=/,? & /,ht=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,pt=/[()=,{}\[\]\/\s]/,ft=/\\(\\)?/g,dt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,gt=/\w*$/,mt=/^[-+]0x[0-9a-f]+$/i,yt=/^0b[01]+$/i,_t=/^\[object .+?Constructor\]$/,vt=/^0o[0-7]+$/i,xt=/^(?:0|[1-9]\d*)$/,bt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,wt=/($^)/,Et=/['\n\r\u2028\u2029\\]/g,Tt="\\ud800-\\udfff",St="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",kt="\\u2700-\\u27bf",At="a-z\\xdf-\\xf6\\xf8-\\xff",Mt="A-Z\\xc0-\\xd6\\xd8-\\xde",It="\\ufe0e\\ufe0f",Ct="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ot="['’]",Pt="["+Tt+"]",Lt="["+Ct+"]",Dt="["+St+"]",Rt="\\d+",Nt="["+kt+"]",jt="["+At+"]",zt="[^"+Tt+Ct+Rt+kt+At+Mt+"]",Bt="\\ud83c[\\udffb-\\udfff]",Ft="[^"+Tt+"]",Ut="(?:\\ud83c[\\udde6-\\uddff]){2}",Vt="[\\ud800-\\udbff][\\udc00-\\udfff]",qt="["+Mt+"]",Wt="\\u200d",Gt="(?:"+jt+"|"+zt+")",$t="(?:"+qt+"|"+zt+")",Ht="(?:['’](?:d|ll|m|re|s|t|ve))?",Zt="(?:['’](?:D|LL|M|RE|S|T|VE))?",Yt="(?:"+Dt+"|"+Bt+")"+"?",Xt="["+It+"]?",Kt=Xt+Yt+("(?:"+Wt+"(?:"+[Ft,Ut,Vt].join("|")+")"+Xt+Yt+")*"),Jt="(?:"+[Nt,Ut,Vt].join("|")+")"+Kt,Qt="(?:"+[Ft+Dt+"?",Dt,Ut,Vt,Pt].join("|")+")",te=RegExp(Ot,"g"),ee=RegExp(Dt,"g"),ne=RegExp(Bt+"(?="+Bt+")|"+Qt+Kt,"g"),re=RegExp([qt+"?"+jt+"+"+Ht+"(?="+[Lt,qt,"$"].join("|")+")",$t+"+"+Zt+"(?="+[Lt,qt+Gt,"$"].join("|")+")",qt+"?"+Gt+"+"+Ht,qt+"+"+Zt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Rt,Jt].join("|"),"g"),ie=RegExp("["+Wt+Tt+St+It+"]"),oe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,se=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ae=-1,ce={};ce[N]=ce[j]=ce[z]=ce[B]=ce[F]=ce[U]=ce[V]=ce[q]=ce[W]=!0,ce[_]=ce[v]=ce[D]=ce[x]=ce[R]=ce[b]=ce[w]=ce[E]=ce[S]=ce[k]=ce[A]=ce[I]=ce[C]=ce[O]=ce[L]=!1;var le={};le[_]=le[v]=le[D]=le[R]=le[x]=le[b]=le[N]=le[j]=le[z]=le[B]=le[F]=le[S]=le[k]=le[A]=le[I]=le[C]=le[O]=le[P]=le[U]=le[V]=le[q]=le[W]=!0,le[w]=le[E]=le[L]=!1;var ue={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},he=parseFloat,pe=parseInt,fe="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,de="object"==typeof self&&self&&self.Object===Object&&self,ge=fe||de||Function("return this")(),me=e&&!e.nodeType&&e,ye=me&&t&&!t.nodeType&&t,_e=ye&&ye.exports===me,ve=_e&&fe.process,xe=function(){try{var t=ye&&ye.require&&ye.require("util").types;return t||ve&&ve.binding&&ve.binding("util")}catch(t){}}(),be=xe&&xe.isArrayBuffer,we=xe&&xe.isDate,Ee=xe&&xe.isMap,Te=xe&&xe.isRegExp,Se=xe&&xe.isSet,ke=xe&&xe.isTypedArray;function Ae(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Me(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var s=t[i];e(r,s,n(s),t)}return r}function Ie(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Ce(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Oe(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Pe(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}function Le(t,e){return!!(null==t?0:t.length)&&qe(t,e,0)>-1}function De(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Re(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Ne(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function je(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function ze(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Be(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Fe=He("length");function Ue(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function Ve(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function qe(t,e,n){return e==e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Ve(t,Ge,n)}function We(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function Ge(t){return t!=t}function $e(t,e){var n=null==t?0:t.length;return n?Xe(t,e)/n:g}function He(t){return function(e){return null==e?i:e[t]}}function Ze(t){return function(e){return null==t?i:t[e]}}function Ye(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function Xe(t,e){for(var n,r=-1,o=t.length;++r<o;){var s=e(t[r]);s!==i&&(n=n===i?s:n+s)}return n}function Ke(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Je(t){return t?t.slice(0,mn(t)+1).replace(st,""):t}function Qe(t){return function(e){return t(e)}}function tn(t,e){return Re(e,(function(e){return t[e]}))}function en(t,e){return t.has(e)}function nn(t,e){for(var n=-1,r=t.length;++n<r&&qe(e,t[n],0)>-1;);return n}function rn(t,e){for(var n=t.length;n--&&qe(e,t[n],0)>-1;);return n}var on=Ze({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),sn=Ze({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function an(t){return"\\"+ue[t]}function cn(t){return ie.test(t)}function ln(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function un(t,e){return function(n){return t(e(n))}}function hn(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n];s!==e&&s!==a||(t[n]=a,o[i++]=n)}return o}function pn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function fn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function dn(t){return cn(t)?function(t){var e=ne.lastIndex=0;for(;ne.test(t);)++e;return e}(t):Fe(t)}function gn(t){return cn(t)?function(t){return t.match(ne)||[]}(t):function(t){return t.split("")}(t)}function mn(t){for(var e=t.length;e--&&at.test(t.charAt(e)););return e}var yn=Ze({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var _n=function t(e){var n,r=(e=null==e?ge:_n.defaults(ge.Object(),e,_n.pick(ge,se))).Array,at=e.Date,Tt=e.Error,St=e.Function,kt=e.Math,At=e.Object,Mt=e.RegExp,It=e.String,Ct=e.TypeError,Ot=r.prototype,Pt=St.prototype,Lt=At.prototype,Dt=e["__core-js_shared__"],Rt=Pt.toString,Nt=Lt.hasOwnProperty,jt=0,zt=(n=/[^.]+$/.exec(Dt&&Dt.keys&&Dt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Bt=Lt.toString,Ft=Rt.call(At),Ut=ge._,Vt=Mt("^"+Rt.call(Nt).replace(it,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qt=_e?e.Buffer:i,Wt=e.Symbol,Gt=e.Uint8Array,$t=qt?qt.allocUnsafe:i,Ht=un(At.getPrototypeOf,At),Zt=At.create,Yt=Lt.propertyIsEnumerable,Xt=Ot.splice,Kt=Wt?Wt.isConcatSpreadable:i,Jt=Wt?Wt.iterator:i,Qt=Wt?Wt.toStringTag:i,ne=function(){try{var t=po(At,"defineProperty");return t({},"",{}),t}catch(t){}}(),ie=e.clearTimeout!==ge.clearTimeout&&e.clearTimeout,ue=at&&at.now!==ge.Date.now&&at.now,fe=e.setTimeout!==ge.setTimeout&&e.setTimeout,de=kt.ceil,me=kt.floor,ye=At.getOwnPropertySymbols,ve=qt?qt.isBuffer:i,xe=e.isFinite,Fe=Ot.join,Ze=un(At.keys,At),vn=kt.max,xn=kt.min,bn=at.now,wn=e.parseInt,En=kt.random,Tn=Ot.reverse,Sn=po(e,"DataView"),kn=po(e,"Map"),An=po(e,"Promise"),Mn=po(e,"Set"),In=po(e,"WeakMap"),Cn=po(At,"create"),On=In&&new In,Pn={},Ln=Bo(Sn),Dn=Bo(kn),Rn=Bo(An),Nn=Bo(Mn),jn=Bo(In),zn=Wt?Wt.prototype:i,Bn=zn?zn.valueOf:i,Fn=zn?zn.toString:i;function Un(t){if(na(t)&&!Gs(t)&&!(t instanceof Gn)){if(t instanceof Wn)return t;if(Nt.call(t,"__wrapped__"))return Fo(t)}return new Wn(t)}var Vn=function(){function t(){}return function(e){if(!ea(e))return{};if(Zt)return Zt(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function qn(){}function Wn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function Gn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=m,this.__views__=[]}function $n(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Hn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Zn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Yn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Zn;++e<n;)this.add(t[e])}function Xn(t){var e=this.__data__=new Hn(t);this.size=e.size}function Kn(t,e){var n=Gs(t),r=!n&&Ws(t),i=!n&&!r&&Ys(t),o=!n&&!r&&!i&&ua(t),s=n||r||i||o,a=s?Ke(t.length,It):[],c=a.length;for(var l in t)!e&&!Nt.call(t,l)||s&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||xo(l,c))||a.push(l);return a}function Jn(t){var e=t.length;return e?t[Yr(0,e-1)]:i}function Qn(t,e){return No(Ci(t),cr(e,0,t.length))}function tr(t){return No(Ci(t))}function er(t,e,n){(n!==i&&!Us(t[e],n)||n===i&&!(e in t))&&sr(t,e,n)}function nr(t,e,n){var r=t[e];Nt.call(t,e)&&Us(r,n)&&(n!==i||e in t)||sr(t,e,n)}function rr(t,e){for(var n=t.length;n--;)if(Us(t[n][0],e))return n;return-1}function ir(t,e,n,r){return fr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function or(t,e){return t&&Oi(e,Pa(e),t)}function sr(t,e,n){"__proto__"==e&&ne?ne(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ar(t,e){for(var n=-1,o=e.length,s=r(o),a=null==t;++n<o;)s[n]=a?i:Aa(t,e[n]);return s}function cr(t,e,n){return t==t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function lr(t,e,n,r,o,s){var a,c=1&e,l=2&e,u=4&e;if(n&&(a=o?n(t,r,o,s):n(t)),a!==i)return a;if(!ea(t))return t;var h=Gs(t);if(h){if(a=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&Nt.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!c)return Ci(t,a)}else{var p=mo(t),f=p==E||p==T;if(Ys(t))return Ti(t,c);if(p==A||p==_||f&&!o){if(a=l||f?{}:_o(t),!c)return l?function(t,e){return Oi(t,go(t),e)}(t,function(t,e){return t&&Oi(e,La(e),t)}(a,t)):function(t,e){return Oi(t,fo(t),e)}(t,or(a,t))}else{if(!le[p])return o?t:{};a=function(t,e,n){var r=t.constructor;switch(e){case D:return Si(t);case x:case b:return new r(+t);case R:return function(t,e){var n=e?Si(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case N:case j:case z:case B:case F:case U:case V:case q:case W:return ki(t,n);case S:return new r;case k:case O:return new r(t);case I:return function(t){var e=new t.constructor(t.source,gt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case C:return new r;case P:return i=t,Bn?At(Bn.call(i)):{}}var i}(t,p,c)}}s||(s=new Xn);var d=s.get(t);if(d)return d;s.set(t,a),aa(t)?t.forEach((function(r){a.add(lr(r,e,n,r,t,s))})):ra(t)&&t.forEach((function(r,i){a.set(i,lr(r,e,n,i,t,s))}));var g=h?i:(u?l?oo:io:l?La:Pa)(t);return Ie(g||t,(function(r,i){g&&(r=t[i=r]),nr(a,i,lr(r,e,n,i,t,s))})),a}function ur(t,e,n){var r=n.length;if(null==t)return!r;for(t=At(t);r--;){var o=n[r],s=e[o],a=t[o];if(a===i&&!(o in t)||!s(a))return!1}return!0}function hr(t,e,n){if("function"!=typeof t)throw new Ct(o);return Po((function(){t.apply(i,n)}),e)}function pr(t,e,n,r){var i=-1,o=Le,s=!0,a=t.length,c=[],l=e.length;if(!a)return c;n&&(e=Re(e,Qe(n))),r?(o=De,s=!1):e.length>=200&&(o=en,s=!1,e=new Yn(e));t:for(;++i<a;){var u=t[i],h=null==n?u:n(u);if(u=r||0!==u?u:0,s&&h==h){for(var p=l;p--;)if(e[p]===h)continue t;c.push(u)}else o(e,h,r)||c.push(u)}return c}Un.templateSettings={escape:J,evaluate:Q,interpolate:tt,variable:"",imports:{_:Un}},Un.prototype=qn.prototype,Un.prototype.constructor=Un,Wn.prototype=Vn(qn.prototype),Wn.prototype.constructor=Wn,Gn.prototype=Vn(qn.prototype),Gn.prototype.constructor=Gn,$n.prototype.clear=function(){this.__data__=Cn?Cn(null):{},this.size=0},$n.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},$n.prototype.get=function(t){var e=this.__data__;if(Cn){var n=e[t];return n===s?i:n}return Nt.call(e,t)?e[t]:i},$n.prototype.has=function(t){var e=this.__data__;return Cn?e[t]!==i:Nt.call(e,t)},$n.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Cn&&e===i?s:e,this},Hn.prototype.clear=function(){this.__data__=[],this.size=0},Hn.prototype.delete=function(t){var e=this.__data__,n=rr(e,t);return!(n<0)&&(n==e.length-1?e.pop():Xt.call(e,n,1),--this.size,!0)},Hn.prototype.get=function(t){var e=this.__data__,n=rr(e,t);return n<0?i:e[n][1]},Hn.prototype.has=function(t){return rr(this.__data__,t)>-1},Hn.prototype.set=function(t,e){var n=this.__data__,r=rr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Zn.prototype.clear=function(){this.size=0,this.__data__={hash:new $n,map:new(kn||Hn),string:new $n}},Zn.prototype.delete=function(t){var e=uo(this,t).delete(t);return this.size-=e?1:0,e},Zn.prototype.get=function(t){return uo(this,t).get(t)},Zn.prototype.has=function(t){return uo(this,t).has(t)},Zn.prototype.set=function(t,e){var n=uo(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Yn.prototype.add=Yn.prototype.push=function(t){return this.__data__.set(t,s),this},Yn.prototype.has=function(t){return this.__data__.has(t)},Xn.prototype.clear=function(){this.__data__=new Hn,this.size=0},Xn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Xn.prototype.get=function(t){return this.__data__.get(t)},Xn.prototype.has=function(t){return this.__data__.has(t)},Xn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Hn){var r=n.__data__;if(!kn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Zn(r)}return n.set(t,e),this.size=n.size,this};var fr=Di(br),dr=Di(wr,!0);function gr(t,e){var n=!0;return fr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function mr(t,e,n){for(var r=-1,o=t.length;++r<o;){var s=t[r],a=e(s);if(null!=a&&(c===i?a==a&&!la(a):n(a,c)))var c=a,l=s}return l}function yr(t,e){var n=[];return fr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function _r(t,e,n,r,i){var o=-1,s=t.length;for(n||(n=vo),i||(i=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?_r(a,e-1,n,r,i):Ne(i,a):r||(i[i.length]=a)}return i}var vr=Ri(),xr=Ri(!0);function br(t,e){return t&&vr(t,e,Pa)}function wr(t,e){return t&&xr(t,e,Pa)}function Er(t,e){return Pe(e,(function(e){return Js(t[e])}))}function Tr(t,e){for(var n=0,r=(e=xi(e,t)).length;null!=t&&n<r;)t=t[zo(e[n++])];return n&&n==r?t:i}function Sr(t,e,n){var r=e(t);return Gs(t)?r:Ne(r,n(t))}function kr(t){return null==t?t===i?"[object Undefined]":"[object Null]":Qt&&Qt in At(t)?function(t){var e=Nt.call(t,Qt),n=t[Qt];try{t[Qt]=i;var r=!0}catch(t){}var o=Bt.call(t);r&&(e?t[Qt]=n:delete t[Qt]);return o}(t):function(t){return Bt.call(t)}(t)}function Ar(t,e){return t>e}function Mr(t,e){return null!=t&&Nt.call(t,e)}function Ir(t,e){return null!=t&&e in At(t)}function Cr(t,e,n){for(var o=n?De:Le,s=t[0].length,a=t.length,c=a,l=r(a),u=1/0,h=[];c--;){var p=t[c];c&&e&&(p=Re(p,Qe(e))),u=xn(p.length,u),l[c]=!n&&(e||s>=120&&p.length>=120)?new Yn(c&&p):i}p=t[0];var f=-1,d=l[0];t:for(;++f<s&&h.length<u;){var g=p[f],m=e?e(g):g;if(g=n||0!==g?g:0,!(d?en(d,m):o(h,m,n))){for(c=a;--c;){var y=l[c];if(!(y?en(y,m):o(t[c],m,n)))continue t}d&&d.push(m),h.push(g)}}return h}function Or(t,e,n){var r=null==(t=Io(t,e=xi(e,t)))?t:t[zo(Ko(e))];return null==r?i:Ae(r,t,n)}function Pr(t){return na(t)&&kr(t)==_}function Lr(t,e,n,r,o){return t===e||(null==t||null==e||!na(t)&&!na(e)?t!=t&&e!=e:function(t,e,n,r,o,s){var a=Gs(t),c=Gs(e),l=a?v:mo(t),u=c?v:mo(e),h=(l=l==_?A:l)==A,p=(u=u==_?A:u)==A,f=l==u;if(f&&Ys(t)){if(!Ys(e))return!1;a=!0,h=!1}if(f&&!h)return s||(s=new Xn),a||ua(t)?no(t,e,n,r,o,s):function(t,e,n,r,i,o,s){switch(n){case R:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case D:return!(t.byteLength!=e.byteLength||!o(new Gt(t),new Gt(e)));case x:case b:case k:return Us(+t,+e);case w:return t.name==e.name&&t.message==e.message;case I:case O:return t==e+"";case S:var a=ln;case C:var c=1&r;if(a||(a=pn),t.size!=e.size&&!c)return!1;var l=s.get(t);if(l)return l==e;r|=2,s.set(t,e);var u=no(a(t),a(e),r,i,o,s);return s.delete(t),u;case P:if(Bn)return Bn.call(t)==Bn.call(e)}return!1}(t,e,l,n,r,o,s);if(!(1&n)){var d=h&&Nt.call(t,"__wrapped__"),g=p&&Nt.call(e,"__wrapped__");if(d||g){var m=d?t.value():t,y=g?e.value():e;return s||(s=new Xn),o(m,y,n,r,s)}}if(!f)return!1;return s||(s=new Xn),function(t,e,n,r,o,s){var a=1&n,c=io(t),l=c.length,u=io(e),h=u.length;if(l!=h&&!a)return!1;var p=l;for(;p--;){var f=c[p];if(!(a?f in e:Nt.call(e,f)))return!1}var d=s.get(t),g=s.get(e);if(d&&g)return d==e&&g==t;var m=!0;s.set(t,e),s.set(e,t);var y=a;for(;++p<l;){var _=t[f=c[p]],v=e[f];if(r)var x=a?r(v,_,f,e,t,s):r(_,v,f,t,e,s);if(!(x===i?_===v||o(_,v,n,r,s):x)){m=!1;break}y||(y="constructor"==f)}if(m&&!y){var b=t.constructor,w=e.constructor;b==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(m=!1)}return s.delete(t),s.delete(e),m}(t,e,n,r,o,s)}(t,e,n,r,Lr,o))}function Dr(t,e,n,r){var o=n.length,s=o,a=!r;if(null==t)return!s;for(t=At(t);o--;){var c=n[o];if(a&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++o<s;){var l=(c=n[o])[0],u=t[l],h=c[1];if(a&&c[2]){if(u===i&&!(l in t))return!1}else{var p=new Xn;if(r)var f=r(u,h,l,t,e,p);if(!(f===i?Lr(h,u,3,r,p):f))return!1}}return!0}function Rr(t){return!(!ea(t)||(e=t,zt&&zt in e))&&(Js(t)?Vt:_t).test(Bo(t));var e}function Nr(t){return"function"==typeof t?t:null==t?ic:"object"==typeof t?Gs(t)?Vr(t[0],t[1]):Ur(t):fc(t)}function jr(t){if(!So(t))return Ze(t);var e=[];for(var n in At(t))Nt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function zr(t){if(!ea(t))return function(t){var e=[];if(null!=t)for(var n in At(t))e.push(n);return e}(t);var e=So(t),n=[];for(var r in t)("constructor"!=r||!e&&Nt.call(t,r))&&n.push(r);return n}function Br(t,e){return t<e}function Fr(t,e){var n=-1,i=Hs(t)?r(t.length):[];return fr(t,(function(t,r,o){i[++n]=e(t,r,o)})),i}function Ur(t){var e=ho(t);return 1==e.length&&e[0][2]?Ao(e[0][0],e[0][1]):function(n){return n===t||Dr(n,t,e)}}function Vr(t,e){return wo(t)&&ko(e)?Ao(zo(t),e):function(n){var r=Aa(n,t);return r===i&&r===e?Ma(n,t):Lr(e,r,3)}}function qr(t,e,n,r,o){t!==e&&vr(e,(function(s,a){if(o||(o=new Xn),ea(s))!function(t,e,n,r,o,s,a){var c=Co(t,n),l=Co(e,n),u=a.get(l);if(u)return void er(t,n,u);var h=s?s(c,l,n+"",t,e,a):i,p=h===i;if(p){var f=Gs(l),d=!f&&Ys(l),g=!f&&!d&&ua(l);h=l,f||d||g?Gs(c)?h=c:Zs(c)?h=Ci(c):d?(p=!1,h=Ti(l,!0)):g?(p=!1,h=ki(l,!0)):h=[]:oa(l)||Ws(l)?(h=c,Ws(c)?h=_a(c):ea(c)&&!Js(c)||(h=_o(l))):p=!1}p&&(a.set(l,h),o(h,l,r,s,a),a.delete(l));er(t,n,h)}(t,e,a,n,qr,r,o);else{var c=r?r(Co(t,a),s,a+"",t,e,o):i;c===i&&(c=s),er(t,a,c)}}),La)}function Wr(t,e){var n=t.length;if(n)return xo(e+=e<0?n:0,n)?t[e]:i}function Gr(t,e,n){e=e.length?Re(e,(function(t){return Gs(t)?function(e){return Tr(e,1===t.length?t[0]:t)}:t})):[ic];var r=-1;e=Re(e,Qe(lo()));var i=Fr(t,(function(t,n,i){var o=Re(e,(function(e){return e(t)}));return{criteria:o,index:++r,value:t}}));return function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(i,(function(t,e){return function(t,e,n){var r=-1,i=t.criteria,o=e.criteria,s=i.length,a=n.length;for(;++r<s;){var c=Ai(i[r],o[r]);if(c)return r>=a?c:c*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}))}function $r(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var s=e[r],a=Tr(t,s);n(a,s)&&ti(o,xi(s,t),a)}return o}function Hr(t,e,n,r){var i=r?We:qe,o=-1,s=e.length,a=t;for(t===e&&(e=Ci(e)),n&&(a=Re(t,Qe(n)));++o<s;)for(var c=0,l=e[o],u=n?n(l):l;(c=i(a,u,c,r))>-1;)a!==t&&Xt.call(a,c,1),Xt.call(t,c,1);return t}function Zr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;xo(i)?Xt.call(t,i,1):pi(t,i)}}return t}function Yr(t,e){return t+me(En()*(e-t+1))}function Xr(t,e){var n="";if(!t||e<1||e>d)return n;do{e%2&&(n+=t),(e=me(e/2))&&(t+=t)}while(e);return n}function Kr(t,e){return Lo(Mo(t,e,ic),t+"")}function Jr(t){return Jn(Ua(t))}function Qr(t,e){var n=Ua(t);return No(n,cr(e,0,n.length))}function ti(t,e,n,r){if(!ea(t))return t;for(var o=-1,s=(e=xi(e,t)).length,a=s-1,c=t;null!=c&&++o<s;){var l=zo(e[o]),u=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(o!=a){var h=c[l];(u=r?r(h,l,c):i)===i&&(u=ea(h)?h:xo(e[o+1])?[]:{})}nr(c,l,u),c=c[l]}return t}var ei=On?function(t,e){return On.set(t,e),t}:ic,ni=ne?function(t,e){return ne(t,"toString",{configurable:!0,enumerable:!1,value:ec(e),writable:!0})}:ic;function ri(t){return No(Ua(t))}function ii(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var s=r(o);++i<o;)s[i]=t[i+e];return s}function oi(t,e){var n;return fr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function si(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,s=t[o];null!==s&&!la(s)&&(n?s<=e:s<e)?r=o+1:i=o}return i}return ai(t,e,ic,n)}function ai(t,e,n,r){var o=0,s=null==t?0:t.length;if(0===s)return 0;for(var a=(e=n(e))!=e,c=null===e,l=la(e),u=e===i;o<s;){var h=me((o+s)/2),p=n(t[h]),f=p!==i,d=null===p,g=p==p,m=la(p);if(a)var y=r||g;else y=u?g&&(r||f):c?g&&f&&(r||!d):l?g&&f&&!d&&(r||!m):!d&&!m&&(r?p<=e:p<e);y?o=h+1:s=h}return xn(s,4294967294)}function ci(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n],a=e?e(s):s;if(!n||!Us(a,c)){var c=a;o[i++]=0===s?0:s}}return o}function li(t){return"number"==typeof t?t:la(t)?g:+t}function ui(t){if("string"==typeof t)return t;if(Gs(t))return Re(t,ui)+"";if(la(t))return Fn?Fn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function hi(t,e,n){var r=-1,i=Le,o=t.length,s=!0,a=[],c=a;if(n)s=!1,i=De;else if(o>=200){var l=e?null:Xi(t);if(l)return pn(l);s=!1,i=en,c=new Yn}else c=e?[]:a;t:for(;++r<o;){var u=t[r],h=e?e(u):u;if(u=n||0!==u?u:0,s&&h==h){for(var p=c.length;p--;)if(c[p]===h)continue t;e&&c.push(h),a.push(u)}else i(c,h,n)||(c!==a&&c.push(h),a.push(u))}return a}function pi(t,e){return null==(t=Io(t,e=xi(e,t)))||delete t[zo(Ko(e))]}function fi(t,e,n,r){return ti(t,e,n(Tr(t,e)),r)}function di(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ii(t,r?0:o,r?o+1:i):ii(t,r?o+1:0,r?i:o)}function gi(t,e){var n=t;return n instanceof Gn&&(n=n.value()),je(e,(function(t,e){return e.func.apply(e.thisArg,Ne([t],e.args))}),n)}function mi(t,e,n){var i=t.length;if(i<2)return i?hi(t[0]):[];for(var o=-1,s=r(i);++o<i;)for(var a=t[o],c=-1;++c<i;)c!=o&&(s[o]=pr(s[o]||a,t[c],e,n));return hi(_r(s,1),e,n)}function yi(t,e,n){for(var r=-1,o=t.length,s=e.length,a={};++r<o;){var c=r<s?e[r]:i;n(a,t[r],c)}return a}function _i(t){return Zs(t)?t:[]}function vi(t){return"function"==typeof t?t:ic}function xi(t,e){return Gs(t)?t:wo(t,e)?[t]:jo(va(t))}var bi=Kr;function wi(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:ii(t,e,n)}var Ei=ie||function(t){return ge.clearTimeout(t)};function Ti(t,e){if(e)return t.slice();var n=t.length,r=$t?$t(n):new t.constructor(n);return t.copy(r),r}function Si(t){var e=new t.constructor(t.byteLength);return new Gt(e).set(new Gt(t)),e}function ki(t,e){var n=e?Si(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ai(t,e){if(t!==e){var n=t!==i,r=null===t,o=t==t,s=la(t),a=e!==i,c=null===e,l=e==e,u=la(e);if(!c&&!u&&!s&&t>e||s&&a&&l&&!c&&!u||r&&a&&l||!n&&l||!o)return 1;if(!r&&!s&&!u&&t<e||u&&n&&o&&!r&&!s||c&&n&&o||!a&&o||!l)return-1}return 0}function Mi(t,e,n,i){for(var o=-1,s=t.length,a=n.length,c=-1,l=e.length,u=vn(s-a,0),h=r(l+u),p=!i;++c<l;)h[c]=e[c];for(;++o<a;)(p||o<s)&&(h[n[o]]=t[o]);for(;u--;)h[c++]=t[o++];return h}function Ii(t,e,n,i){for(var o=-1,s=t.length,a=-1,c=n.length,l=-1,u=e.length,h=vn(s-c,0),p=r(h+u),f=!i;++o<h;)p[o]=t[o];for(var d=o;++l<u;)p[d+l]=e[l];for(;++a<c;)(f||o<s)&&(p[d+n[a]]=t[o++]);return p}function Ci(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function Oi(t,e,n,r){var o=!n;n||(n={});for(var s=-1,a=e.length;++s<a;){var c=e[s],l=r?r(n[c],t[c],c,n,t):i;l===i&&(l=t[c]),o?sr(n,c,l):nr(n,c,l)}return n}function Pi(t,e){return function(n,r){var i=Gs(n)?Me:ir,o=e?e():{};return i(n,t,lo(r,2),o)}}function Li(t){return Kr((function(e,n){var r=-1,o=n.length,s=o>1?n[o-1]:i,a=o>2?n[2]:i;for(s=t.length>3&&"function"==typeof s?(o--,s):i,a&&bo(n[0],n[1],a)&&(s=o<3?i:s,o=1),e=At(e);++r<o;){var c=n[r];c&&t(e,c,r,s)}return e}))}function Di(t,e){return function(n,r){if(null==n)return n;if(!Hs(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=At(n);(e?o--:++o<i)&&!1!==r(s[o],o,s););return n}}function Ri(t){return function(e,n,r){for(var i=-1,o=At(e),s=r(e),a=s.length;a--;){var c=s[t?a:++i];if(!1===n(o[c],c,o))break}return e}}function Ni(t){return function(e){var n=cn(e=va(e))?gn(e):i,r=n?n[0]:e.charAt(0),o=n?wi(n,1).join(""):e.slice(1);return r[t]()+o}}function ji(t){return function(e){return je(Ja(Wa(e).replace(te,"")),t,"")}}function zi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Vn(t.prototype),r=t.apply(n,e);return ea(r)?r:n}}function Bi(t){return function(e,n,r){var o=At(e);if(!Hs(e)){var s=lo(n,3);e=Pa(e),n=function(t){return s(o[t],t,o)}}var a=t(e,n,r);return a>-1?o[s?e[a]:a]:i}}function Fi(t){return ro((function(e){var n=e.length,r=n,s=Wn.prototype.thru;for(t&&e.reverse();r--;){var a=e[r];if("function"!=typeof a)throw new Ct(o);if(s&&!c&&"wrapper"==ao(a))var c=new Wn([],!0)}for(r=c?r:n;++r<n;){var l=ao(a=e[r]),u="wrapper"==l?so(a):i;c=u&&Eo(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?c[ao(u[0])].apply(c,u[3]):1==a.length&&Eo(a)?c[l]():c.thru(a)}return function(){var t=arguments,r=t[0];if(c&&1==t.length&&Gs(r))return c.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}function Ui(t,e,n,o,s,a,c,l,u,p){var f=e&h,d=1&e,g=2&e,m=24&e,y=512&e,_=g?i:zi(t);return function h(){for(var v=arguments.length,x=r(v),b=v;b--;)x[b]=arguments[b];if(m)var w=co(h),E=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(x,w);if(o&&(x=Mi(x,o,s,m)),a&&(x=Ii(x,a,c,m)),v-=E,m&&v<p){var T=hn(x,w);return Zi(t,e,Ui,h.placeholder,n,x,T,l,u,p-v)}var S=d?n:this,k=g?S[t]:t;return v=x.length,l?x=function(t,e){var n=t.length,r=xn(e.length,n),o=Ci(t);for(;r--;){var s=e[r];t[r]=xo(s,n)?o[s]:i}return t}(x,l):y&&v>1&&x.reverse(),f&&u<v&&(x.length=u),this&&this!==ge&&this instanceof h&&(k=_||zi(k)),k.apply(S,x)}}function Vi(t,e){return function(n,r){return function(t,e,n,r){return br(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function qi(t,e){return function(n,r){var o;if(n===i&&r===i)return e;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=ui(n),r=ui(r)):(n=li(n),r=li(r)),o=t(n,r)}return o}}function Wi(t){return ro((function(e){return e=Re(e,Qe(lo())),Kr((function(n){var r=this;return t(e,(function(t){return Ae(t,r,n)}))}))}))}function Gi(t,e){var n=(e=e===i?" ":ui(e)).length;if(n<2)return n?Xr(e,t):e;var r=Xr(e,de(t/dn(e)));return cn(e)?wi(gn(r),0,t).join(""):r.slice(0,t)}function $i(t){return function(e,n,o){return o&&"number"!=typeof o&&bo(e,n,o)&&(n=o=i),e=da(e),n===i?(n=e,e=0):n=da(n),function(t,e,n,i){for(var o=-1,s=vn(de((e-t)/(n||1)),0),a=r(s);s--;)a[i?s:++o]=t,t+=n;return a}(e,n,o=o===i?e<n?1:-1:da(o),t)}}function Hi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ya(e),n=ya(n)),t(e,n)}}function Zi(t,e,n,r,o,s,a,c,h,p){var f=8&e;e|=f?l:u,4&(e&=~(f?u:l))||(e&=-4);var d=[t,e,o,f?s:i,f?a:i,f?i:s,f?i:a,c,h,p],g=n.apply(i,d);return Eo(t)&&Oo(g,d),g.placeholder=r,Do(g,t,e)}function Yi(t){var e=kt[t];return function(t,n){if(t=ya(t),(n=null==n?0:xn(ga(n),292))&&xe(t)){var r=(va(t)+"e").split("e");return+((r=(va(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Xi=Mn&&1/pn(new Mn([,-0]))[1]==f?function(t){return new Mn(t)}:lc;function Ki(t){return function(e){var n=mo(e);return n==S?ln(e):n==C?fn(e):function(t,e){return Re(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Ji(t,e,n,s,f,d,g,m){var y=2&e;if(!y&&"function"!=typeof t)throw new Ct(o);var _=s?s.length:0;if(_||(e&=-97,s=f=i),g=g===i?g:vn(ga(g),0),m=m===i?m:ga(m),_-=f?f.length:0,e&u){var v=s,x=f;s=f=i}var b=y?i:so(t),w=[t,e,n,s,f,v,x,d,g,m];if(b&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,s=r==h&&8==n||r==h&&n==p&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!s)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var c=e[3];if(c){var l=t[3];t[3]=l?Mi(l,c,e[4]):c,t[4]=l?hn(t[3],a):e[4]}(c=e[5])&&(l=t[5],t[5]=l?Ii(l,c,e[6]):c,t[6]=l?hn(t[5],a):e[6]);(c=e[7])&&(t[7]=c);r&h&&(t[8]=null==t[8]?e[8]:xn(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=i}(w,b),t=w[0],e=w[1],n=w[2],s=w[3],f=w[4],!(m=w[9]=w[9]===i?y?0:t.length:vn(w[9]-_,0))&&24&e&&(e&=-25),e&&1!=e)E=8==e||e==c?function(t,e,n){var o=zi(t);return function s(){for(var a=arguments.length,c=r(a),l=a,u=co(s);l--;)c[l]=arguments[l];var h=a<3&&c[0]!==u&&c[a-1]!==u?[]:hn(c,u);return(a-=h.length)<n?Zi(t,e,Ui,s.placeholder,i,c,h,i,i,n-a):Ae(this&&this!==ge&&this instanceof s?o:t,this,c)}}(t,e,m):e!=l&&33!=e||f.length?Ui.apply(i,w):function(t,e,n,i){var o=1&e,s=zi(t);return function e(){for(var a=-1,c=arguments.length,l=-1,u=i.length,h=r(u+c),p=this&&this!==ge&&this instanceof e?s:t;++l<u;)h[l]=i[l];for(;c--;)h[l++]=arguments[++a];return Ae(p,o?n:this,h)}}(t,e,n,s);else var E=function(t,e,n){var r=1&e,i=zi(t);return function e(){return(this&&this!==ge&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return Do((b?ei:Oo)(E,w),t,e)}function Qi(t,e,n,r){return t===i||Us(t,Lt[n])&&!Nt.call(r,n)?e:t}function to(t,e,n,r,o,s){return ea(t)&&ea(e)&&(s.set(e,t),qr(t,e,i,to,s),s.delete(e)),t}function eo(t){return oa(t)?i:t}function no(t,e,n,r,o,s){var a=1&n,c=t.length,l=e.length;if(c!=l&&!(a&&l>c))return!1;var u=s.get(t),h=s.get(e);if(u&&h)return u==e&&h==t;var p=-1,f=!0,d=2&n?new Yn:i;for(s.set(t,e),s.set(e,t);++p<c;){var g=t[p],m=e[p];if(r)var y=a?r(m,g,p,e,t,s):r(g,m,p,t,e,s);if(y!==i){if(y)continue;f=!1;break}if(d){if(!Be(e,(function(t,e){if(!en(d,e)&&(g===t||o(g,t,n,r,s)))return d.push(e)}))){f=!1;break}}else if(g!==m&&!o(g,m,n,r,s)){f=!1;break}}return s.delete(t),s.delete(e),f}function ro(t){return Lo(Mo(t,i,$o),t+"")}function io(t){return Sr(t,Pa,fo)}function oo(t){return Sr(t,La,go)}var so=On?function(t){return On.get(t)}:lc;function ao(t){for(var e=t.name+"",n=Pn[e],r=Nt.call(Pn,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function co(t){return(Nt.call(Un,"placeholder")?Un:t).placeholder}function lo(){var t=Un.iteratee||oc;return t=t===oc?Nr:t,arguments.length?t(arguments[0],arguments[1]):t}function uo(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function ho(t){for(var e=Pa(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,ko(i)]}return e}function po(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return Rr(n)?n:i}var fo=ye?function(t){return null==t?[]:(t=At(t),Pe(ye(t),(function(e){return Yt.call(t,e)})))}:mc,go=ye?function(t){for(var e=[];t;)Ne(e,fo(t)),t=Ht(t);return e}:mc,mo=kr;function yo(t,e,n){for(var r=-1,i=(e=xi(e,t)).length,o=!1;++r<i;){var s=zo(e[r]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&ta(i)&&xo(s,i)&&(Gs(t)||Ws(t))}function _o(t){return"function"!=typeof t.constructor||So(t)?{}:Vn(Ht(t))}function vo(t){return Gs(t)||Ws(t)||!!(Kt&&t&&t[Kt])}function xo(t,e){var n=typeof t;return!!(e=null==e?d:e)&&("number"==n||"symbol"!=n&&xt.test(t))&&t>-1&&t%1==0&&t<e}function bo(t,e,n){if(!ea(n))return!1;var r=typeof e;return!!("number"==r?Hs(n)&&xo(e,n.length):"string"==r&&e in n)&&Us(n[e],t)}function wo(t,e){if(Gs(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!la(t))||(nt.test(t)||!et.test(t)||null!=e&&t in At(e))}function Eo(t){var e=ao(t),n=Un[e];if("function"!=typeof n||!(e in Gn.prototype))return!1;if(t===n)return!0;var r=so(n);return!!r&&t===r[0]}(Sn&&mo(new Sn(new ArrayBuffer(1)))!=R||kn&&mo(new kn)!=S||An&&mo(An.resolve())!=M||Mn&&mo(new Mn)!=C||In&&mo(new In)!=L)&&(mo=function(t){var e=kr(t),n=e==A?t.constructor:i,r=n?Bo(n):"";if(r)switch(r){case Ln:return R;case Dn:return S;case Rn:return M;case Nn:return C;case jn:return L}return e});var To=Dt?Js:yc;function So(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Lt)}function ko(t){return t==t&&!ea(t)}function Ao(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==i||t in At(n)))}}function Mo(t,e,n){return e=vn(e===i?t.length-1:e,0),function(){for(var i=arguments,o=-1,s=vn(i.length-e,0),a=r(s);++o<s;)a[o]=i[e+o];o=-1;for(var c=r(e+1);++o<e;)c[o]=i[o];return c[e]=n(a),Ae(t,this,c)}}function Io(t,e){return e.length<2?t:Tr(t,ii(e,0,-1))}function Co(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Oo=Ro(ei),Po=fe||function(t,e){return ge.setTimeout(t,e)},Lo=Ro(ni);function Do(t,e,n){var r=e+"";return Lo(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(ct,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Ie(y,(function(n){var r="_."+n[0];e&n[1]&&!Le(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(lt);return e?e[1].split(ut):[]}(r),n)))}function Ro(t){var e=0,n=0;return function(){var r=bn(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}}function No(t,e){var n=-1,r=t.length,o=r-1;for(e=e===i?r:e;++n<e;){var s=Yr(n,o),a=t[s];t[s]=t[n],t[n]=a}return t.length=e,t}var jo=function(t){var e=Rs(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(rt,(function(t,n,r,i){e.push(r?i.replace(ft,"$1"):n||t)})),e}));function zo(t){if("string"==typeof t||la(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Bo(t){if(null!=t){try{return Rt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Fo(t){if(t instanceof Gn)return t.clone();var e=new Wn(t.__wrapped__,t.__chain__);return e.__actions__=Ci(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Uo=Kr((function(t,e){return Zs(t)?pr(t,_r(e,1,Zs,!0)):[]})),Vo=Kr((function(t,e){var n=Ko(e);return Zs(n)&&(n=i),Zs(t)?pr(t,_r(e,1,Zs,!0),lo(n,2)):[]})),qo=Kr((function(t,e){var n=Ko(e);return Zs(n)&&(n=i),Zs(t)?pr(t,_r(e,1,Zs,!0),i,n):[]}));function Wo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ga(n);return i<0&&(i=vn(r+i,0)),Ve(t,lo(e,3),i)}function Go(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return n!==i&&(o=ga(n),o=n<0?vn(r+o,0):xn(o,r-1)),Ve(t,lo(e,3),o,!0)}function $o(t){return(null==t?0:t.length)?_r(t,1):[]}function Ho(t){return t&&t.length?t[0]:i}var Zo=Kr((function(t){var e=Re(t,_i);return e.length&&e[0]===t[0]?Cr(e):[]})),Yo=Kr((function(t){var e=Ko(t),n=Re(t,_i);return e===Ko(n)?e=i:n.pop(),n.length&&n[0]===t[0]?Cr(n,lo(e,2)):[]})),Xo=Kr((function(t){var e=Ko(t),n=Re(t,_i);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?Cr(n,i,e):[]}));function Ko(t){var e=null==t?0:t.length;return e?t[e-1]:i}var Jo=Kr(Qo);function Qo(t,e){return t&&t.length&&e&&e.length?Hr(t,e):t}var ts=ro((function(t,e){var n=null==t?0:t.length,r=ar(t,e);return Zr(t,Re(e,(function(t){return xo(t,n)?+t:t})).sort(Ai)),r}));function es(t){return null==t?t:Tn.call(t)}var ns=Kr((function(t){return hi(_r(t,1,Zs,!0))})),rs=Kr((function(t){var e=Ko(t);return Zs(e)&&(e=i),hi(_r(t,1,Zs,!0),lo(e,2))})),is=Kr((function(t){var e=Ko(t);return e="function"==typeof e?e:i,hi(_r(t,1,Zs,!0),i,e)}));function os(t){if(!t||!t.length)return[];var e=0;return t=Pe(t,(function(t){if(Zs(t))return e=vn(t.length,e),!0})),Ke(e,(function(e){return Re(t,He(e))}))}function ss(t,e){if(!t||!t.length)return[];var n=os(t);return null==e?n:Re(n,(function(t){return Ae(e,i,t)}))}var as=Kr((function(t,e){return Zs(t)?pr(t,e):[]})),cs=Kr((function(t){return mi(Pe(t,Zs))})),ls=Kr((function(t){var e=Ko(t);return Zs(e)&&(e=i),mi(Pe(t,Zs),lo(e,2))})),us=Kr((function(t){var e=Ko(t);return e="function"==typeof e?e:i,mi(Pe(t,Zs),i,e)})),hs=Kr(os);var ps=Kr((function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,ss(t,n)}));function fs(t){var e=Un(t);return e.__chain__=!0,e}function ds(t,e){return e(t)}var gs=ro((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return ar(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Gn&&xo(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:ds,args:[o],thisArg:i}),new Wn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(i),t}))):this.thru(o)}));var ms=Pi((function(t,e,n){Nt.call(t,n)?++t[n]:sr(t,n,1)}));var ys=Bi(Wo),_s=Bi(Go);function vs(t,e){return(Gs(t)?Ie:fr)(t,lo(e,3))}function xs(t,e){return(Gs(t)?Ce:dr)(t,lo(e,3))}var bs=Pi((function(t,e,n){Nt.call(t,n)?t[n].push(e):sr(t,n,[e])}));var ws=Kr((function(t,e,n){var i=-1,o="function"==typeof e,s=Hs(t)?r(t.length):[];return fr(t,(function(t){s[++i]=o?Ae(e,t,n):Or(t,e,n)})),s})),Es=Pi((function(t,e,n){sr(t,n,e)}));function Ts(t,e){return(Gs(t)?Re:Fr)(t,lo(e,3))}var Ss=Pi((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var ks=Kr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&bo(t,e[0],e[1])?e=[]:n>2&&bo(e[0],e[1],e[2])&&(e=[e[0]]),Gr(t,_r(e,1),[])})),As=ue||function(){return ge.Date.now()};function Ms(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,Ji(t,h,i,i,i,i,e)}function Is(t,e){var n;if("function"!=typeof e)throw new Ct(o);return t=ga(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var Cs=Kr((function(t,e,n){var r=1;if(n.length){var i=hn(n,co(Cs));r|=l}return Ji(t,r,e,n,i)})),Os=Kr((function(t,e,n){var r=3;if(n.length){var i=hn(n,co(Os));r|=l}return Ji(e,r,t,n,i)}));function Ps(t,e,n){var r,s,a,c,l,u,h=0,p=!1,f=!1,d=!0;if("function"!=typeof t)throw new Ct(o);function g(e){var n=r,o=s;return r=s=i,h=e,c=t.apply(o,n)}function m(t){var n=t-u;return u===i||n>=e||n<0||f&&t-h>=a}function y(){var t=As();if(m(t))return _(t);l=Po(y,function(t){var n=e-(t-u);return f?xn(n,a-(t-h)):n}(t))}function _(t){return l=i,d&&r?g(t):(r=s=i,c)}function v(){var t=As(),n=m(t);if(r=arguments,s=this,u=t,n){if(l===i)return function(t){return h=t,l=Po(y,e),p?g(t):c}(u);if(f)return Ei(l),l=Po(y,e),g(u)}return l===i&&(l=Po(y,e)),c}return e=ya(e)||0,ea(n)&&(p=!!n.leading,a=(f="maxWait"in n)?vn(ya(n.maxWait)||0,e):a,d="trailing"in n?!!n.trailing:d),v.cancel=function(){l!==i&&Ei(l),h=0,r=u=s=l=i},v.flush=function(){return l===i?c:_(As())},v}var Ls=Kr((function(t,e){return hr(t,1,e)})),Ds=Kr((function(t,e,n){return hr(t,ya(e)||0,n)}));function Rs(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Ct(o);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(Rs.Cache||Zn),n}function Ns(t){if("function"!=typeof t)throw new Ct(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Rs.Cache=Zn;var js=bi((function(t,e){var n=(e=1==e.length&&Gs(e[0])?Re(e[0],Qe(lo())):Re(_r(e,1),Qe(lo()))).length;return Kr((function(r){for(var i=-1,o=xn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return Ae(t,this,r)}))})),zs=Kr((function(t,e){var n=hn(e,co(zs));return Ji(t,l,i,e,n)})),Bs=Kr((function(t,e){var n=hn(e,co(Bs));return Ji(t,u,i,e,n)})),Fs=ro((function(t,e){return Ji(t,p,i,i,i,e)}));function Us(t,e){return t===e||t!=t&&e!=e}var Vs=Hi(Ar),qs=Hi((function(t,e){return t>=e})),Ws=Pr(function(){return arguments}())?Pr:function(t){return na(t)&&Nt.call(t,"callee")&&!Yt.call(t,"callee")},Gs=r.isArray,$s=be?Qe(be):function(t){return na(t)&&kr(t)==D};function Hs(t){return null!=t&&ta(t.length)&&!Js(t)}function Zs(t){return na(t)&&Hs(t)}var Ys=ve||yc,Xs=we?Qe(we):function(t){return na(t)&&kr(t)==b};function Ks(t){if(!na(t))return!1;var e=kr(t);return e==w||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!oa(t)}function Js(t){if(!ea(t))return!1;var e=kr(t);return e==E||e==T||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Qs(t){return"number"==typeof t&&t==ga(t)}function ta(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=d}function ea(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function na(t){return null!=t&&"object"==typeof t}var ra=Ee?Qe(Ee):function(t){return na(t)&&mo(t)==S};function ia(t){return"number"==typeof t||na(t)&&kr(t)==k}function oa(t){if(!na(t)||kr(t)!=A)return!1;var e=Ht(t);if(null===e)return!0;var n=Nt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Rt.call(n)==Ft}var sa=Te?Qe(Te):function(t){return na(t)&&kr(t)==I};var aa=Se?Qe(Se):function(t){return na(t)&&mo(t)==C};function ca(t){return"string"==typeof t||!Gs(t)&&na(t)&&kr(t)==O}function la(t){return"symbol"==typeof t||na(t)&&kr(t)==P}var ua=ke?Qe(ke):function(t){return na(t)&&ta(t.length)&&!!ce[kr(t)]};var ha=Hi(Br),pa=Hi((function(t,e){return t<=e}));function fa(t){if(!t)return[];if(Hs(t))return ca(t)?gn(t):Ci(t);if(Jt&&t[Jt])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Jt]());var e=mo(t);return(e==S?ln:e==C?pn:Ua)(t)}function da(t){return t?(t=ya(t))===f||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function ga(t){var e=da(t),n=e%1;return e==e?n?e-n:e:0}function ma(t){return t?cr(ga(t),0,m):0}function ya(t){if("number"==typeof t)return t;if(la(t))return g;if(ea(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ea(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Je(t);var n=yt.test(t);return n||vt.test(t)?pe(t.slice(2),n?2:8):mt.test(t)?g:+t}function _a(t){return Oi(t,La(t))}function va(t){return null==t?"":ui(t)}var xa=Li((function(t,e){if(So(e)||Hs(e))Oi(e,Pa(e),t);else for(var n in e)Nt.call(e,n)&&nr(t,n,e[n])})),ba=Li((function(t,e){Oi(e,La(e),t)})),wa=Li((function(t,e,n,r){Oi(e,La(e),t,r)})),Ea=Li((function(t,e,n,r){Oi(e,Pa(e),t,r)})),Ta=ro(ar);var Sa=Kr((function(t,e){t=At(t);var n=-1,r=e.length,o=r>2?e[2]:i;for(o&&bo(e[0],e[1],o)&&(r=1);++n<r;)for(var s=e[n],a=La(s),c=-1,l=a.length;++c<l;){var u=a[c],h=t[u];(h===i||Us(h,Lt[u])&&!Nt.call(t,u))&&(t[u]=s[u])}return t})),ka=Kr((function(t){return t.push(i,to),Ae(Ra,i,t)}));function Aa(t,e,n){var r=null==t?i:Tr(t,e);return r===i?n:r}function Ma(t,e){return null!=t&&yo(t,e,Ir)}var Ia=Vi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Bt.call(e)),t[e]=n}),ec(ic)),Ca=Vi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Bt.call(e)),Nt.call(t,e)?t[e].push(n):t[e]=[n]}),lo),Oa=Kr(Or);function Pa(t){return Hs(t)?Kn(t):jr(t)}function La(t){return Hs(t)?Kn(t,!0):zr(t)}var Da=Li((function(t,e,n){qr(t,e,n)})),Ra=Li((function(t,e,n,r){qr(t,e,n,r)})),Na=ro((function(t,e){var n={};if(null==t)return n;var r=!1;e=Re(e,(function(e){return e=xi(e,t),r||(r=e.length>1),e})),Oi(t,oo(t),n),r&&(n=lr(n,7,eo));for(var i=e.length;i--;)pi(n,e[i]);return n}));var ja=ro((function(t,e){return null==t?{}:function(t,e){return $r(t,e,(function(e,n){return Ma(t,n)}))}(t,e)}));function za(t,e){if(null==t)return{};var n=Re(oo(t),(function(t){return[t]}));return e=lo(e),$r(t,n,(function(t,n){return e(t,n[0])}))}var Ba=Ki(Pa),Fa=Ki(La);function Ua(t){return null==t?[]:tn(t,Pa(t))}var Va=ji((function(t,e,n){return e=e.toLowerCase(),t+(n?qa(e):e)}));function qa(t){return Ka(va(t).toLowerCase())}function Wa(t){return(t=va(t))&&t.replace(bt,on).replace(ee,"")}var Ga=ji((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),$a=ji((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Ha=Ni("toLowerCase");var Za=ji((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var Ya=ji((function(t,e,n){return t+(n?" ":"")+Ka(e)}));var Xa=ji((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Ka=Ni("toUpperCase");function Ja(t,e,n){return t=va(t),(e=n?i:e)===i?function(t){return oe.test(t)}(t)?function(t){return t.match(re)||[]}(t):function(t){return t.match(ht)||[]}(t):t.match(e)||[]}var Qa=Kr((function(t,e){try{return Ae(t,i,e)}catch(t){return Ks(t)?t:new Tt(t)}})),tc=ro((function(t,e){return Ie(e,(function(e){e=zo(e),sr(t,e,Cs(t[e],t))})),t}));function ec(t){return function(){return t}}var nc=Fi(),rc=Fi(!0);function ic(t){return t}function oc(t){return Nr("function"==typeof t?t:lr(t,1))}var sc=Kr((function(t,e){return function(n){return Or(n,t,e)}})),ac=Kr((function(t,e){return function(n){return Or(t,n,e)}}));function cc(t,e,n){var r=Pa(e),i=Er(e,r);null!=n||ea(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=Er(e,Pa(e)));var o=!(ea(n)&&"chain"in n&&!n.chain),s=Js(t);return Ie(i,(function(n){var r=e[n];t[n]=r,s&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=Ci(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Ne([this.value()],arguments))})})),t}function lc(){}var uc=Wi(Re),hc=Wi(Oe),pc=Wi(Be);function fc(t){return wo(t)?He(zo(t)):function(t){return function(e){return Tr(e,t)}}(t)}var dc=$i(),gc=$i(!0);function mc(){return[]}function yc(){return!1}var _c=qi((function(t,e){return t+e}),0),vc=Yi("ceil"),xc=qi((function(t,e){return t/e}),1),bc=Yi("floor");var wc,Ec=qi((function(t,e){return t*e}),1),Tc=Yi("round"),Sc=qi((function(t,e){return t-e}),0);return Un.after=function(t,e){if("function"!=typeof e)throw new Ct(o);return t=ga(t),function(){if(--t<1)return e.apply(this,arguments)}},Un.ary=Ms,Un.assign=xa,Un.assignIn=ba,Un.assignInWith=wa,Un.assignWith=Ea,Un.at=Ta,Un.before=Is,Un.bind=Cs,Un.bindAll=tc,Un.bindKey=Os,Un.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Gs(t)?t:[t]},Un.chain=fs,Un.chunk=function(t,e,n){e=(n?bo(t,e,n):e===i)?1:vn(ga(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var s=0,a=0,c=r(de(o/e));s<o;)c[a++]=ii(t,s,s+=e);return c},Un.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},Un.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Ne(Gs(n)?Ci(n):[n],_r(e,1))},Un.cond=function(t){var e=null==t?0:t.length,n=lo();return t=e?Re(t,(function(t){if("function"!=typeof t[1])throw new Ct(o);return[n(t[0]),t[1]]})):[],Kr((function(n){for(var r=-1;++r<e;){var i=t[r];if(Ae(i[0],this,n))return Ae(i[1],this,n)}}))},Un.conforms=function(t){return function(t){var e=Pa(t);return function(n){return ur(n,t,e)}}(lr(t,1))},Un.constant=ec,Un.countBy=ms,Un.create=function(t,e){var n=Vn(t);return null==e?n:or(n,e)},Un.curry=function t(e,n,r){var o=Ji(e,8,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},Un.curryRight=function t(e,n,r){var o=Ji(e,c,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},Un.debounce=Ps,Un.defaults=Sa,Un.defaultsDeep=ka,Un.defer=Ls,Un.delay=Ds,Un.difference=Uo,Un.differenceBy=Vo,Un.differenceWith=qo,Un.drop=function(t,e,n){var r=null==t?0:t.length;return r?ii(t,(e=n||e===i?1:ga(e))<0?0:e,r):[]},Un.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?ii(t,0,(e=r-(e=n||e===i?1:ga(e)))<0?0:e):[]},Un.dropRightWhile=function(t,e){return t&&t.length?di(t,lo(e,3),!0,!0):[]},Un.dropWhile=function(t,e){return t&&t.length?di(t,lo(e,3),!0):[]},Un.fill=function(t,e,n,r){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&bo(t,e,n)&&(n=0,r=o),function(t,e,n,r){var o=t.length;for((n=ga(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:ga(r))<0&&(r+=o),r=n>r?0:ma(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},Un.filter=function(t,e){return(Gs(t)?Pe:yr)(t,lo(e,3))},Un.flatMap=function(t,e){return _r(Ts(t,e),1)},Un.flatMapDeep=function(t,e){return _r(Ts(t,e),f)},Un.flatMapDepth=function(t,e,n){return n=n===i?1:ga(n),_r(Ts(t,e),n)},Un.flatten=$o,Un.flattenDeep=function(t){return(null==t?0:t.length)?_r(t,f):[]},Un.flattenDepth=function(t,e){return(null==t?0:t.length)?_r(t,e=e===i?1:ga(e)):[]},Un.flip=function(t){return Ji(t,512)},Un.flow=nc,Un.flowRight=rc,Un.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Un.functions=function(t){return null==t?[]:Er(t,Pa(t))},Un.functionsIn=function(t){return null==t?[]:Er(t,La(t))},Un.groupBy=bs,Un.initial=function(t){return(null==t?0:t.length)?ii(t,0,-1):[]},Un.intersection=Zo,Un.intersectionBy=Yo,Un.intersectionWith=Xo,Un.invert=Ia,Un.invertBy=Ca,Un.invokeMap=ws,Un.iteratee=oc,Un.keyBy=Es,Un.keys=Pa,Un.keysIn=La,Un.map=Ts,Un.mapKeys=function(t,e){var n={};return e=lo(e,3),br(t,(function(t,r,i){sr(n,e(t,r,i),t)})),n},Un.mapValues=function(t,e){var n={};return e=lo(e,3),br(t,(function(t,r,i){sr(n,r,e(t,r,i))})),n},Un.matches=function(t){return Ur(lr(t,1))},Un.matchesProperty=function(t,e){return Vr(t,lr(e,1))},Un.memoize=Rs,Un.merge=Da,Un.mergeWith=Ra,Un.method=sc,Un.methodOf=ac,Un.mixin=cc,Un.negate=Ns,Un.nthArg=function(t){return t=ga(t),Kr((function(e){return Wr(e,t)}))},Un.omit=Na,Un.omitBy=function(t,e){return za(t,Ns(lo(e)))},Un.once=function(t){return Is(2,t)},Un.orderBy=function(t,e,n,r){return null==t?[]:(Gs(e)||(e=null==e?[]:[e]),Gs(n=r?i:n)||(n=null==n?[]:[n]),Gr(t,e,n))},Un.over=uc,Un.overArgs=js,Un.overEvery=hc,Un.overSome=pc,Un.partial=zs,Un.partialRight=Bs,Un.partition=Ss,Un.pick=ja,Un.pickBy=za,Un.property=fc,Un.propertyOf=function(t){return function(e){return null==t?i:Tr(t,e)}},Un.pull=Jo,Un.pullAll=Qo,Un.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Hr(t,e,lo(n,2)):t},Un.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Hr(t,e,i,n):t},Un.pullAt=ts,Un.range=dc,Un.rangeRight=gc,Un.rearg=Fs,Un.reject=function(t,e){return(Gs(t)?Pe:yr)(t,Ns(lo(e,3)))},Un.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=lo(e,3);++r<o;){var s=t[r];e(s,r,t)&&(n.push(s),i.push(r))}return Zr(t,i),n},Un.rest=function(t,e){if("function"!=typeof t)throw new Ct(o);return Kr(t,e=e===i?e:ga(e))},Un.reverse=es,Un.sampleSize=function(t,e,n){return e=(n?bo(t,e,n):e===i)?1:ga(e),(Gs(t)?Qn:Qr)(t,e)},Un.set=function(t,e,n){return null==t?t:ti(t,e,n)},Un.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:ti(t,e,n,r)},Un.shuffle=function(t){return(Gs(t)?tr:ri)(t)},Un.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&bo(t,e,n)?(e=0,n=r):(e=null==e?0:ga(e),n=n===i?r:ga(n)),ii(t,e,n)):[]},Un.sortBy=ks,Un.sortedUniq=function(t){return t&&t.length?ci(t):[]},Un.sortedUniqBy=function(t,e){return t&&t.length?ci(t,lo(e,2)):[]},Un.split=function(t,e,n){return n&&"number"!=typeof n&&bo(t,e,n)&&(e=n=i),(n=n===i?m:n>>>0)?(t=va(t))&&("string"==typeof e||null!=e&&!sa(e))&&!(e=ui(e))&&cn(t)?wi(gn(t),0,n):t.split(e,n):[]},Un.spread=function(t,e){if("function"!=typeof t)throw new Ct(o);return e=null==e?0:vn(ga(e),0),Kr((function(n){var r=n[e],i=wi(n,0,e);return r&&Ne(i,r),Ae(t,this,i)}))},Un.tail=function(t){var e=null==t?0:t.length;return e?ii(t,1,e):[]},Un.take=function(t,e,n){return t&&t.length?ii(t,0,(e=n||e===i?1:ga(e))<0?0:e):[]},Un.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?ii(t,(e=r-(e=n||e===i?1:ga(e)))<0?0:e,r):[]},Un.takeRightWhile=function(t,e){return t&&t.length?di(t,lo(e,3),!1,!0):[]},Un.takeWhile=function(t,e){return t&&t.length?di(t,lo(e,3)):[]},Un.tap=function(t,e){return e(t),t},Un.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Ct(o);return ea(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ps(t,e,{leading:r,maxWait:e,trailing:i})},Un.thru=ds,Un.toArray=fa,Un.toPairs=Ba,Un.toPairsIn=Fa,Un.toPath=function(t){return Gs(t)?Re(t,zo):la(t)?[t]:Ci(jo(va(t)))},Un.toPlainObject=_a,Un.transform=function(t,e,n){var r=Gs(t),i=r||Ys(t)||ua(t);if(e=lo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:ea(t)&&Js(o)?Vn(Ht(t)):{}}return(i?Ie:br)(t,(function(t,r,i){return e(n,t,r,i)})),n},Un.unary=function(t){return Ms(t,1)},Un.union=ns,Un.unionBy=rs,Un.unionWith=is,Un.uniq=function(t){return t&&t.length?hi(t):[]},Un.uniqBy=function(t,e){return t&&t.length?hi(t,lo(e,2)):[]},Un.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?hi(t,i,e):[]},Un.unset=function(t,e){return null==t||pi(t,e)},Un.unzip=os,Un.unzipWith=ss,Un.update=function(t,e,n){return null==t?t:fi(t,e,vi(n))},Un.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:fi(t,e,vi(n),r)},Un.values=Ua,Un.valuesIn=function(t){return null==t?[]:tn(t,La(t))},Un.without=as,Un.words=Ja,Un.wrap=function(t,e){return zs(vi(e),t)},Un.xor=cs,Un.xorBy=ls,Un.xorWith=us,Un.zip=hs,Un.zipObject=function(t,e){return yi(t||[],e||[],nr)},Un.zipObjectDeep=function(t,e){return yi(t||[],e||[],ti)},Un.zipWith=ps,Un.entries=Ba,Un.entriesIn=Fa,Un.extend=ba,Un.extendWith=wa,cc(Un,Un),Un.add=_c,Un.attempt=Qa,Un.camelCase=Va,Un.capitalize=qa,Un.ceil=vc,Un.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=ya(n))==n?n:0),e!==i&&(e=(e=ya(e))==e?e:0),cr(ya(t),e,n)},Un.clone=function(t){return lr(t,4)},Un.cloneDeep=function(t){return lr(t,5)},Un.cloneDeepWith=function(t,e){return lr(t,5,e="function"==typeof e?e:i)},Un.cloneWith=function(t,e){return lr(t,4,e="function"==typeof e?e:i)},Un.conformsTo=function(t,e){return null==e||ur(t,e,Pa(e))},Un.deburr=Wa,Un.defaultTo=function(t,e){return null==t||t!=t?e:t},Un.divide=xc,Un.endsWith=function(t,e,n){t=va(t),e=ui(e);var r=t.length,o=n=n===i?r:cr(ga(n),0,r);return(n-=e.length)>=0&&t.slice(n,o)==e},Un.eq=Us,Un.escape=function(t){return(t=va(t))&&K.test(t)?t.replace(Y,sn):t},Un.escapeRegExp=function(t){return(t=va(t))&&ot.test(t)?t.replace(it,"\\$&"):t},Un.every=function(t,e,n){var r=Gs(t)?Oe:gr;return n&&bo(t,e,n)&&(e=i),r(t,lo(e,3))},Un.find=ys,Un.findIndex=Wo,Un.findKey=function(t,e){return Ue(t,lo(e,3),br)},Un.findLast=_s,Un.findLastIndex=Go,Un.findLastKey=function(t,e){return Ue(t,lo(e,3),wr)},Un.floor=bc,Un.forEach=vs,Un.forEachRight=xs,Un.forIn=function(t,e){return null==t?t:vr(t,lo(e,3),La)},Un.forInRight=function(t,e){return null==t?t:xr(t,lo(e,3),La)},Un.forOwn=function(t,e){return t&&br(t,lo(e,3))},Un.forOwnRight=function(t,e){return t&&wr(t,lo(e,3))},Un.get=Aa,Un.gt=Vs,Un.gte=qs,Un.has=function(t,e){return null!=t&&yo(t,e,Mr)},Un.hasIn=Ma,Un.head=Ho,Un.identity=ic,Un.includes=function(t,e,n,r){t=Hs(t)?t:Ua(t),n=n&&!r?ga(n):0;var i=t.length;return n<0&&(n=vn(i+n,0)),ca(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&qe(t,e,n)>-1},Un.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ga(n);return i<0&&(i=vn(r+i,0)),qe(t,e,i)},Un.inRange=function(t,e,n){return e=da(e),n===i?(n=e,e=0):n=da(n),function(t,e,n){return t>=xn(e,n)&&t<vn(e,n)}(t=ya(t),e,n)},Un.invoke=Oa,Un.isArguments=Ws,Un.isArray=Gs,Un.isArrayBuffer=$s,Un.isArrayLike=Hs,Un.isArrayLikeObject=Zs,Un.isBoolean=function(t){return!0===t||!1===t||na(t)&&kr(t)==x},Un.isBuffer=Ys,Un.isDate=Xs,Un.isElement=function(t){return na(t)&&1===t.nodeType&&!oa(t)},Un.isEmpty=function(t){if(null==t)return!0;if(Hs(t)&&(Gs(t)||"string"==typeof t||"function"==typeof t.splice||Ys(t)||ua(t)||Ws(t)))return!t.length;var e=mo(t);if(e==S||e==C)return!t.size;if(So(t))return!jr(t).length;for(var n in t)if(Nt.call(t,n))return!1;return!0},Un.isEqual=function(t,e){return Lr(t,e)},Un.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?Lr(t,e,i,n):!!r},Un.isError=Ks,Un.isFinite=function(t){return"number"==typeof t&&xe(t)},Un.isFunction=Js,Un.isInteger=Qs,Un.isLength=ta,Un.isMap=ra,Un.isMatch=function(t,e){return t===e||Dr(t,e,ho(e))},Un.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,Dr(t,e,ho(e),n)},Un.isNaN=function(t){return ia(t)&&t!=+t},Un.isNative=function(t){if(To(t))throw new Tt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Rr(t)},Un.isNil=function(t){return null==t},Un.isNull=function(t){return null===t},Un.isNumber=ia,Un.isObject=ea,Un.isObjectLike=na,Un.isPlainObject=oa,Un.isRegExp=sa,Un.isSafeInteger=function(t){return Qs(t)&&t>=-9007199254740991&&t<=d},Un.isSet=aa,Un.isString=ca,Un.isSymbol=la,Un.isTypedArray=ua,Un.isUndefined=function(t){return t===i},Un.isWeakMap=function(t){return na(t)&&mo(t)==L},Un.isWeakSet=function(t){return na(t)&&"[object WeakSet]"==kr(t)},Un.join=function(t,e){return null==t?"":Fe.call(t,e)},Un.kebabCase=Ga,Un.last=Ko,Un.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=ga(n))<0?vn(r+o,0):xn(o,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):Ve(t,Ge,o,!0)},Un.lowerCase=$a,Un.lowerFirst=Ha,Un.lt=ha,Un.lte=pa,Un.max=function(t){return t&&t.length?mr(t,ic,Ar):i},Un.maxBy=function(t,e){return t&&t.length?mr(t,lo(e,2),Ar):i},Un.mean=function(t){return $e(t,ic)},Un.meanBy=function(t,e){return $e(t,lo(e,2))},Un.min=function(t){return t&&t.length?mr(t,ic,Br):i},Un.minBy=function(t,e){return t&&t.length?mr(t,lo(e,2),Br):i},Un.stubArray=mc,Un.stubFalse=yc,Un.stubObject=function(){return{}},Un.stubString=function(){return""},Un.stubTrue=function(){return!0},Un.multiply=Ec,Un.nth=function(t,e){return t&&t.length?Wr(t,ga(e)):i},Un.noConflict=function(){return ge._===this&&(ge._=Ut),this},Un.noop=lc,Un.now=As,Un.pad=function(t,e,n){t=va(t);var r=(e=ga(e))?dn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Gi(me(i),n)+t+Gi(de(i),n)},Un.padEnd=function(t,e,n){t=va(t);var r=(e=ga(e))?dn(t):0;return e&&r<e?t+Gi(e-r,n):t},Un.padStart=function(t,e,n){t=va(t);var r=(e=ga(e))?dn(t):0;return e&&r<e?Gi(e-r,n)+t:t},Un.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),wn(va(t).replace(st,""),e||0)},Un.random=function(t,e,n){if(n&&"boolean"!=typeof n&&bo(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=da(t),e===i?(e=t,t=0):e=da(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var o=En();return xn(t+o*(e-t+he("1e-"+((o+"").length-1))),e)}return Yr(t,e)},Un.reduce=function(t,e,n){var r=Gs(t)?je:Ye,i=arguments.length<3;return r(t,lo(e,4),n,i,fr)},Un.reduceRight=function(t,e,n){var r=Gs(t)?ze:Ye,i=arguments.length<3;return r(t,lo(e,4),n,i,dr)},Un.repeat=function(t,e,n){return e=(n?bo(t,e,n):e===i)?1:ga(e),Xr(va(t),e)},Un.replace=function(){var t=arguments,e=va(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Un.result=function(t,e,n){var r=-1,o=(e=xi(e,t)).length;for(o||(o=1,t=i);++r<o;){var s=null==t?i:t[zo(e[r])];s===i&&(r=o,s=n),t=Js(s)?s.call(t):s}return t},Un.round=Tc,Un.runInContext=t,Un.sample=function(t){return(Gs(t)?Jn:Jr)(t)},Un.size=function(t){if(null==t)return 0;if(Hs(t))return ca(t)?dn(t):t.length;var e=mo(t);return e==S||e==C?t.size:jr(t).length},Un.snakeCase=Za,Un.some=function(t,e,n){var r=Gs(t)?Be:oi;return n&&bo(t,e,n)&&(e=i),r(t,lo(e,3))},Un.sortedIndex=function(t,e){return si(t,e)},Un.sortedIndexBy=function(t,e,n){return ai(t,e,lo(n,2))},Un.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=si(t,e);if(r<n&&Us(t[r],e))return r}return-1},Un.sortedLastIndex=function(t,e){return si(t,e,!0)},Un.sortedLastIndexBy=function(t,e,n){return ai(t,e,lo(n,2),!0)},Un.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=si(t,e,!0)-1;if(Us(t[n],e))return n}return-1},Un.startCase=Ya,Un.startsWith=function(t,e,n){return t=va(t),n=null==n?0:cr(ga(n),0,t.length),e=ui(e),t.slice(n,n+e.length)==e},Un.subtract=Sc,Un.sum=function(t){return t&&t.length?Xe(t,ic):0},Un.sumBy=function(t,e){return t&&t.length?Xe(t,lo(e,2)):0},Un.template=function(t,e,n){var r=Un.templateSettings;n&&bo(t,e,n)&&(e=i),t=va(t),e=wa({},e,r,Qi);var o,s,a=wa({},e.imports,r.imports,Qi),c=Pa(a),l=tn(a,c),u=0,h=e.interpolate||wt,p="__p += '",f=Mt((e.escape||wt).source+"|"+h.source+"|"+(h===tt?dt:wt).source+"|"+(e.evaluate||wt).source+"|$","g"),d="//# sourceURL="+(Nt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ae+"]")+"\n";t.replace(f,(function(e,n,r,i,a,c){return r||(r=i),p+=t.slice(u,c).replace(Et,an),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),a&&(s=!0,p+="';\n"+a+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=c+e.length,e})),p+="';\n";var g=Nt.call(e,"variable")&&e.variable;if(g){if(pt.test(g))throw new Tt("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(s?p.replace(G,""):p).replace($,"$1").replace(H,"$1;"),p="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var m=Qa((function(){return St(c,d+"return "+p).apply(i,l)}));if(m.source=p,Ks(m))throw m;return m},Un.times=function(t,e){if((t=ga(t))<1||t>d)return[];var n=m,r=xn(t,m);e=lo(e),t-=m;for(var i=Ke(r,e);++n<t;)e(n);return i},Un.toFinite=da,Un.toInteger=ga,Un.toLength=ma,Un.toLower=function(t){return va(t).toLowerCase()},Un.toNumber=ya,Un.toSafeInteger=function(t){return t?cr(ga(t),-9007199254740991,d):0===t?t:0},Un.toString=va,Un.toUpper=function(t){return va(t).toUpperCase()},Un.trim=function(t,e,n){if((t=va(t))&&(n||e===i))return Je(t);if(!t||!(e=ui(e)))return t;var r=gn(t),o=gn(e);return wi(r,nn(r,o),rn(r,o)+1).join("")},Un.trimEnd=function(t,e,n){if((t=va(t))&&(n||e===i))return t.slice(0,mn(t)+1);if(!t||!(e=ui(e)))return t;var r=gn(t);return wi(r,0,rn(r,gn(e))+1).join("")},Un.trimStart=function(t,e,n){if((t=va(t))&&(n||e===i))return t.replace(st,"");if(!t||!(e=ui(e)))return t;var r=gn(t);return wi(r,nn(r,gn(e))).join("")},Un.truncate=function(t,e){var n=30,r="...";if(ea(e)){var o="separator"in e?e.separator:o;n="length"in e?ga(e.length):n,r="omission"in e?ui(e.omission):r}var s=(t=va(t)).length;if(cn(t)){var a=gn(t);s=a.length}if(n>=s)return t;var c=n-dn(r);if(c<1)return r;var l=a?wi(a,0,c).join(""):t.slice(0,c);if(o===i)return l+r;if(a&&(c+=l.length-c),sa(o)){if(t.slice(c).search(o)){var u,h=l;for(o.global||(o=Mt(o.source,va(gt.exec(o))+"g")),o.lastIndex=0;u=o.exec(h);)var p=u.index;l=l.slice(0,p===i?c:p)}}else if(t.indexOf(ui(o),c)!=c){var f=l.lastIndexOf(o);f>-1&&(l=l.slice(0,f))}return l+r},Un.unescape=function(t){return(t=va(t))&&X.test(t)?t.replace(Z,yn):t},Un.uniqueId=function(t){var e=++jt;return va(t)+e},Un.upperCase=Xa,Un.upperFirst=Ka,Un.each=vs,Un.eachRight=xs,Un.first=Ho,cc(Un,(wc={},br(Un,(function(t,e){Nt.call(Un.prototype,e)||(wc[e]=t)})),wc),{chain:!1}),Un.VERSION="4.17.21",Ie(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Un[t].placeholder=Un})),Ie(["drop","take"],(function(t,e){Gn.prototype[t]=function(n){n=n===i?1:vn(ga(n),0);var r=this.__filtered__&&!e?new Gn(this):this.clone();return r.__filtered__?r.__takeCount__=xn(n,r.__takeCount__):r.__views__.push({size:xn(n,m),type:t+(r.__dir__<0?"Right":"")}),r},Gn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Ie(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Gn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:lo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),Ie(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Gn.prototype[t]=function(){return this[n](1).value()[0]}})),Ie(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Gn.prototype[t]=function(){return this.__filtered__?new Gn(this):this[n](1)}})),Gn.prototype.compact=function(){return this.filter(ic)},Gn.prototype.find=function(t){return this.filter(t).head()},Gn.prototype.findLast=function(t){return this.reverse().find(t)},Gn.prototype.invokeMap=Kr((function(t,e){return"function"==typeof t?new Gn(this):this.map((function(n){return Or(n,t,e)}))})),Gn.prototype.reject=function(t){return this.filter(Ns(lo(t)))},Gn.prototype.slice=function(t,e){t=ga(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Gn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=ga(e))<0?n.dropRight(-e):n.take(e-t)),n)},Gn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Gn.prototype.toArray=function(){return this.take(m)},br(Gn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),o=Un[r?"take"+("last"==e?"Right":""):e],s=r||/^find/.test(e);o&&(Un.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,c=e instanceof Gn,l=a[0],u=c||Gs(e),h=function(t){var e=o.apply(Un,Ne([t],a));return r&&p?e[0]:e};u&&n&&"function"==typeof l&&1!=l.length&&(c=u=!1);var p=this.__chain__,f=!!this.__actions__.length,d=s&&!p,g=c&&!f;if(!s&&u){e=g?e:new Gn(this);var m=t.apply(e,a);return m.__actions__.push({func:ds,args:[h],thisArg:i}),new Wn(m,p)}return d&&g?t.apply(this,a):(m=this.thru(h),d?r?m.value()[0]:m.value():m)})})),Ie(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Ot[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Un.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Gs(i)?i:[],t)}return this[n]((function(n){return e.apply(Gs(n)?n:[],t)}))}})),br(Gn.prototype,(function(t,e){var n=Un[e];if(n){var r=n.name+"";Nt.call(Pn,r)||(Pn[r]=[]),Pn[r].push({name:e,func:n})}})),Pn[Ui(i,2).name]=[{name:"wrapper",func:i}],Gn.prototype.clone=function(){var t=new Gn(this.__wrapped__);return t.__actions__=Ci(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ci(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ci(this.__views__),t},Gn.prototype.reverse=function(){if(this.__filtered__){var t=new Gn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Gn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Gs(t),r=e<0,i=n?t.length:0,o=function(t,e,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=xn(e,t+s);break;case"takeRight":t=vn(t,e-s)}}return{start:t,end:e}}(0,i,this.__views__),s=o.start,a=o.end,c=a-s,l=r?a:s-1,u=this.__iteratees__,h=u.length,p=0,f=xn(c,this.__takeCount__);if(!n||!r&&i==c&&f==c)return gi(t,this.__actions__);var d=[];t:for(;c--&&p<f;){for(var g=-1,m=t[l+=e];++g<h;){var y=u[g],_=y.iteratee,v=y.type,x=_(m);if(2==v)m=x;else if(!x){if(1==v)continue t;break t}}d[p++]=m}return d},Un.prototype.at=gs,Un.prototype.chain=function(){return fs(this)},Un.prototype.commit=function(){return new Wn(this.value(),this.__chain__)},Un.prototype.next=function(){this.__values__===i&&(this.__values__=fa(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},Un.prototype.plant=function(t){for(var e,n=this;n instanceof qn;){var r=Fo(n);r.__index__=0,r.__values__=i,e?o.__wrapped__=r:e=r;var o=r;n=n.__wrapped__}return o.__wrapped__=t,e},Un.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Gn){var e=t;return this.__actions__.length&&(e=new Gn(this)),(e=e.reverse()).__actions__.push({func:ds,args:[es],thisArg:i}),new Wn(e,this.__chain__)}return this.thru(es)},Un.prototype.toJSON=Un.prototype.valueOf=Un.prototype.value=function(){return gi(this.__wrapped__,this.__actions__)},Un.prototype.first=Un.prototype.head,Jt&&(Un.prototype[Jt]=function(){return this}),Un}();ge._=_n,(r=function(){return _n}.call(e,n,e,t))===i||(t.exports=r)}.call(this)},6158:function(t,e,n){var r=n(34155),i=n(25108);t.exports=function(){"use strict";var t,e,n;function o(r,i){if(t)if(e){var o="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk); self.onerror = null;",s={};t(s),n=i(s),"undefined"!=typeof window&&window&&window.URL&&window.URL.createObjectURL&&(n.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else e=i;else t=i}return o(["exports"],(function(t){var e="undefined"!=typeof self?self:{},n="2.15.0";let o;const s={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==o){const t=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{o=null!=r.env.API_URL_REGEX?new RegExp(r.env.API_URL_REGEX):t}catch(e){o=t}}return o},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!s.API_URL)return null;try{const t=new URL(s.API_URL);return"api.mapbox.cn"===t.hostname?"https://events.mapbox.cn/events/v2":"api.mapbox.com"===t.hostname?"https://events.mapbox.com/events/v2":null}catch(t){return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},a={supported:!1,testSupport:function(t){!u&&l&&(h?p(t):c=t)}};let c,l,u=!1,h=!1;function p(t){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,l),t.isContextLost())return;a.supported=!0}catch(t){}t.deleteTexture(e),u=!0}e.document&&(l=e.document.createElement("img"),l.onload=function(){c&&p(c),c=null,h=!0},l.onerror=function(){u=!0,c=null},l.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const f="01";function d(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var g=m;function m(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=n,this.p2y=r}m.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(void 0===e&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var n=t,r=0;r<8;r++){var i=this.sampleCurveX(n)-t;if(Math.abs(i)<e)return n;var o=this.sampleCurveDerivativeX(n);if(Math.abs(o)<1e-6)break;n-=i/o}var s=0,a=1;for(n=t,r=0;r<20&&(i=this.sampleCurveX(n),!(Math.abs(i-t)<e));r++)t>i?s=n:a=n,n=.5*(a-s)+s;return n},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}};var y=d(g),_=v;function v(t,e){this.x=t,this.y=e}v.prototype={clone:function(){return new v(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=r,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-r*(this.y-e.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},v.convert=function(t){return t instanceof v?t:Array.isArray(t)?new v(t[0],t[1]):t};var x=d(_);const b=Math.PI/180,w=180/Math.PI;function E(t){return t*b}function T(t){return t*w}const S=[[0,0],[1,0],[1,1],[0,1]];function k(t){if(t<=0)return 0;if(t>=1)return 1;const e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function A(t,e,n,r){const i=new y(t,e,n,r);return function(t){return i.solve(t)}}const M=A(.25,.1,.25,1);function I(t,e,n){return Math.min(n,Math.max(e,t))}function C(t,e,n){return(n=I((n-t)/(e-t),0,1))*n*(3-2*n)}function O(t,e,n){const r=n-e,i=((t-e)%r+r)%r+e;return i===e?n:i}function P(t,e,n){if(!t.length)return n(null,[]);let r=t.length;const i=new Array(t.length);let o=null;t.forEach(((t,s)=>{e(t,((t,e)=>{t&&(o=t),i[s]=e,0==--r&&n(o,i)}))}))}function L(t){const e=[];for(const n in t)e.push(t[n]);return e}function D(t,...e){for(const n of e)for(const e in n)t[e]=n[e];return t}let R=1;function N(){return R++}function j(){return function t(e){return e?(e^Math.random()*(16>>e/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function z(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function B(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function F(t,e){t.forEach((t=>{e[t]&&(e[t]=e[t].bind(e))}))}function U(t,e){return-1!==t.indexOf(e,t.length-e.length)}function V(t,e,n){const r={};for(const i in t)r[i]=e.call(n||this,t[i],i,t);return r}function q(t,e,n){const r={};for(const i in t)e.call(n||this,t[i],i,t)&&(r[i]=t[i]);return r}function W(t){return Array.isArray(t)?t.map(W):"object"==typeof t&&t?V(t,W):t}const G={};function $(t){G[t]||(void 0!==i&&i.warn(t),G[t]=!0)}function H(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function Z(t){let e=0;for(let n,r,i=0,o=t.length,s=o-1;i<o;s=i++)n=t[i],r=t[s],e+=(r.x-n.x)*(n.y+r.y);return e}function Y(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function X(t){const e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((t,n,r,i)=>{const o=r||i;return e[n]=!o||o.toLowerCase(),""})),e["max-age"]){const t=parseInt(e["max-age"],10);isNaN(t)?delete e["max-age"]:e["max-age"]=t}return e}let K=null;function J(t){if(null==K){const e=t.navigator?t.navigator.userAgent:null;K=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return K}function Q(t){try{const n=e[t];return n.setItem("_mapbox_test_",1),n.removeItem("_mapbox_test_"),!0}catch(t){return!1}}function tt(t,e){return[t[4*e],t[4*e+1],t[4*e+2],t[4*e+3]]}const et="mapbox-tiles";let nt,rt,it=500,ot=50;function st(){try{return e.caches}catch(t){}}function at(){st()&&!nt&&(nt=e.caches.open(et))}function ct(t){const e=t.indexOf("?");if(e<0)return t;const n=function(t){const e=t.indexOf("?");return e>0?t.slice(e+1).split("&"):[]}(t),r=n.filter((t=>{const e=t.split("=");return"language"===e[0]||"worldview"===e[0]}));return r.length?`${t.slice(0,e)}?${r.join("&")}`:t.slice(0,e)}let lt=1/0;const ut={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(ut);class ht extends Error{constructor(t,e,n){401===e&&wt(n)&&(t+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(t),this.status=e,this.url=n}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const pt=Y()?()=>self.worker&&self.worker.referrer:()=>("blob:"===e.location.protocol?e.parent:e).location.href,ft=function(t,n){if(!(/^file:/.test(r=t.url)||/^file:/.test(pt())&&!/^\w+:/.test(r))){if(e.fetch&&e.Request&&e.AbortController&&e.Request.prototype.hasOwnProperty("signal"))return function(t,n){const r=new e.AbortController,i=new e.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:pt(),referrerPolicy:t.referrerPolicy,signal:r.signal});let o=!1,s=!1;const a=(c=i.url).indexOf("sku=")>0&&wt(c);var c;"json"===t.type&&i.headers.set("Accept","application/json");const l=(r,o,c)=>{if(s)return;if(r&&"SecurityError"!==r.message&&$(r.toString()),o&&c)return u(o);const l=Date.now();e.fetch(i).then((e=>{if(e.ok){const t=a?e.clone():null;return u(e,t,l)}return n(new ht(e.statusText,e.status,t.url))})).catch((e=>{"AbortError"!==e.name&&n(new Error(`${e.message} ${t.url}`))}))},u=(r,a,c)=>{("arrayBuffer"===t.type?r.arrayBuffer():"json"===t.type?r.json():r.text()).then((t=>{s||(a&&c&&function(t,n,r){if(at(),!nt)return;const i={status:n.status,statusText:n.statusText,headers:new e.Headers};n.headers.forEach(((t,e)=>i.headers.set(e,t)));const o=X(n.headers.get("Cache-Control")||"");if(o["no-store"])return;o["max-age"]&&i.headers.set("Expires",new Date(r+1e3*o["max-age"]).toUTCString());const s=i.headers.get("Expires");s&&(new Date(s).getTime()-r<42e4||function(t,e){if(void 0===rt)try{new Response(new ReadableStream),rt=!0}catch(t){rt=!1}rt?e(t.body):t.blob().then(e)}(n,(n=>{const r=new e.Response(n,i);at(),nt&&nt.then((e=>e.put(ct(t.url),r))).catch((t=>$(t.message)))})))}(i,a,c),o=!0,n(null,t,r.headers.get("Cache-Control"),r.headers.get("Expires")))})).catch((t=>{s||n(new Error(t.message))}))};return a?function(t,e){if(at(),!nt)return e(null);const n=ct(t.url);nt.then((t=>{t.match(n).then((r=>{const i=function(t){if(!t)return!1;const e=new Date(t.headers.get("Expires")||0),n=X(t.headers.get("Cache-Control")||"");return e>Date.now()&&!n["no-cache"]}(r);t.delete(n),i&&t.put(n,r.clone()),e(null,r,i)})).catch(e)})).catch(e)}(i,l):l(null,null),{cancel:()=>{s=!0,o||r.abort()}}}(t,n);if(Y()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,n,void 0,!0)}var r;return function(t,n){const r=new e.XMLHttpRequest;r.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(r.responseType="arraybuffer");for(const e in t.headers)r.setRequestHeader(e,t.headers[e]);return"json"===t.type&&(r.responseType="text",r.setRequestHeader("Accept","application/json")),r.withCredentials="include"===t.credentials,r.onerror=()=>{n(new Error(r.statusText))},r.onload=()=>{if((r.status>=200&&r.status<300||0===r.status)&&null!==r.response){let e=r.response;if("json"===t.type)try{e=JSON.parse(r.response)}catch(t){return n(t)}n(null,e,r.getResponseHeader("Cache-Control"),r.getResponseHeader("Expires"))}else n(new ht(r.statusText,r.status,t.url))},r.send(t.body),{cancel:()=>r.abort()}}(t,n)},dt=function(t,e){return ft(D(t,{type:"arrayBuffer"}),e)};function gt(t){const n=e.document.createElement("a");return n.href=t,n.protocol===e.document.location.protocol&&n.host===e.document.location.host}const mt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let yt,_t;yt=[],_t=0;const vt=function(t,n){if(a.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),_t>=s.MAX_PARALLEL_IMAGE_REQUESTS){const e={requestParameters:t,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return yt.push(e),e}_t++;let r=!1;const i=()=>{if(!r)for(r=!0,_t--;yt.length&&_t<s.MAX_PARALLEL_IMAGE_REQUESTS;){const t=yt.shift(),{requestParameters:e,callback:n,cancelled:r}=t;r||(t.cancel=vt(e,n).cancel)}},o=dt(t,((t,r,o,s)=>{i(),t?n(t):r&&(e.createImageBitmap?function(t,n){const r=new e.Blob([new Uint8Array(t)],{type:"image/png"});e.createImageBitmap(r).then((t=>{n(null,t)})).catch((t=>{n(new Error(`Could not load image because of ${t.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))}(r,((t,e)=>n(t,e,o,s))):function(t,n){const r=new e.Image,i=e.URL;r.onload=()=>{n(null,r),i.revokeObjectURL(r.src),r.onload=null,e.requestAnimationFrame((()=>{r.src=mt}))},r.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const o=new e.Blob([new Uint8Array(t)],{type:"image/png"});r.src=t.byteLength?i.createObjectURL(o):mt}(r,((t,e)=>n(t,e,o,s))))}));return{cancel:()=>{o.cancel(),i()}}},xt="NO_ACCESS_TOKEN";function bt(t){return 0===t.indexOf("mapbox:")}function wt(t){return s.API_URL_REGEX.test(t)}function Et(t){return s.API_CDN_URL_REGEX.test(t)}function Tt(t){return s.API_STYLE_REGEX.test(t)&&!St(t)}function St(t){return s.API_SPRITE_REGEX.test(t)}const kt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function At(t){const e=t.match(kt);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function Mt(t){const e=t.params.length?`?${t.params.join("&")}`:"";return`${t.protocol}://${t.authority}${t.path}${e}`}const It="mapbox.eventData";function Ct(t){if(!t)return null;const n=t.split(".");if(!n||3!==n.length)return null;try{return JSON.parse(decodeURIComponent(e.atob(n[1]).split("").map((t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2))).join("")))}catch(t){return null}}class Ot{constructor(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(t){const n=Ct(s.ACCESS_TOKEN);let r="";return r=n&&n.u?e.btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,((t,e)=>String.fromCharCode(Number("0x"+e))))):s.ACCESS_TOKEN||"",t?`${It}.${t}:${r}`:`${It}:${r}`}fetchEventData(){const t=Q("localStorage"),n=this.getStorageKey(),r=this.getStorageKey("uuid");if(t)try{const t=e.localStorage.getItem(n);t&&(this.eventData=JSON.parse(t));const i=e.localStorage.getItem(r);i&&(this.anonId=i)}catch(t){$("Unable to read from LocalStorage")}}saveEventData(){const t=Q("localStorage"),n=this.getStorageKey(),r=this.getStorageKey("uuid");if(t)try{e.localStorage.setItem(r,this.anonId),Object.keys(this.eventData).length>=1&&e.localStorage.setItem(n,JSON.stringify(this.eventData))}catch(t){$("Unable to write to LocalStorage")}}processRequests(t){}postEvent(t,e,n,r){if(!s.EVENTS_URL)return;const i=At(s.EVENTS_URL);i.params.push(`access_token=${r||s.ACCESS_TOKEN||""}`);const o={event:this.type,created:new Date(t).toISOString()},a=e?D(o,e):o,c={url:Mt(i),headers:{"Content-Type":"text/plain"},body:JSON.stringify([a])};this.pendingRequest=function(t,e){return ft(D(t,{method:"POST"}),e)}(c,(t=>{this.pendingRequest=null,n(t),this.saveEventData(),this.processRequests(r)}))}queueRequest(t,e){this.queue.push(t),this.processRequests(e)}}const Pt=new class extends Ot{constructor(t){super("appUserTurnstile"),this._customAccessToken=t}postTurnstileEvent(t,e){s.EVENTS_URL&&s.ACCESS_TOKEN&&Array.isArray(t)&&t.some((t=>bt(t)||wt(t)))&&this.queueRequest(Date.now(),e)}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const e=Ct(s.ACCESS_TOKEN),r=e?e.u:s.ACCESS_TOKEN;let i=r!==this.eventData.tokenU;B(this.anonId)||(this.anonId=j(),i=!0);const o=this.queue.shift();if(this.eventData.lastSuccess){const t=new Date(this.eventData.lastSuccess),e=new Date(o),n=(o-this.eventData.lastSuccess)/864e5;i=i||n>=1||n<-1||t.getDate()!==e.getDate()}else i=!0;i?this.postEvent(o,{sdkIdentifier:"mapbox-gl-js",sdkVersion:n,skuId:f,"enabled.telemetry":!1,userId:this.anonId},(t=>{t||(this.eventData.lastSuccess=o,this.eventData.tokenU=r)}),t):this.processRequests()}},Lt=Pt.postTurnstileEvent.bind(Pt),Dt=new class extends Ot{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(t,e,n,r){this.skuToken=e,this.errorCb=r,s.EVENTS_URL&&(n||s.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},n):this.errorCb(new Error(xt)))}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:r}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),B(this.anonId)||(this.anonId=j()),this.postEvent(r,{sdkIdentifier:"mapbox-gl-js",sdkVersion:n,skuId:f,skuToken:this.skuToken,userId:this.anonId},(t=>{t?this.errorCb(t):e&&(this.success[e]=!0)}),t))}},Rt=Dt.postMapLoadEvent.bind(Dt),Nt=new class extends Ot{constructor(){super("gljs.performance")}postPerformanceEvent(t,e){s.EVENTS_URL&&(t||s.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:e},t)}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:r,performanceData:i}=this.queue.shift(),o=function(t){const r=e.performance.getEntriesByType("resource"),i=e.performance.getEntriesByType("mark"),o=function(t){const e={};if(t)for(const n in t)if("other"!==n)for(const r of t[n]){const t=`${n}ResolveRangeMin`,i=`${n}ResolveRangeMax`,o=`${n}RequestCount`,s=`${n}RequestCachedCount`;e[t]=Math.min(e[t]||1/0,r.startTime),e[i]=Math.max(e[i]||-1/0,r.responseEnd);const a=t=>{void 0===e[t]&&(e[t]=0),++e[t]};void 0!==r.transferSize&&0===r.transferSize&&a(s),a(o)}return e}(function(t,e){const n={};if(t)for(const r of t){const t=e(r);void 0===n[t]&&(n[t]=[]),n[t].push(r)}return n}(r,qt)),s=e.devicePixelRatio,a=e.navigator.connection||e.navigator.mozConnection||e.navigator.webkitConnection,c={counters:[],metadata:[],attributes:[]},l=(t,e,n)=>{null!=n&&t.push({name:e,value:n.toString()})};for(const t in o)l(c.counters,t,o[t]);if(t.interactionRange[0]!==1/0&&t.interactionRange[1]!==-1/0&&(l(c.counters,"interactionRangeMin",t.interactionRange[0]),l(c.counters,"interactionRangeMax",t.interactionRange[1])),i)for(const t of Object.keys(Ut)){const e=Ut[t],n=i.find((t=>t.name===e));n&&l(c.counters,e,n.startTime)}return l(c.counters,"visibilityHidden",t.visibilityHidden),l(c.attributes,"style",function(t){if(t)for(const e of t){const t=e.name.split("?")[0];if(Tt(t)){const e=t.split("/").slice(-2);if(2===e.length)return`mapbox://styles/${e[0]}/${e[1]}`}}}(r)),l(c.attributes,"terrainEnabled",t.terrainEnabled?"true":"false"),l(c.attributes,"fogEnabled",t.fogEnabled?"true":"false"),l(c.attributes,"projection",t.projection),l(c.attributes,"zoom",t.zoom),l(c.metadata,"devicePixelRatio",s),l(c.metadata,"connectionEffectiveType",a?a.effectiveType:void 0),l(c.metadata,"navigatorUserAgent",e.navigator.userAgent),l(c.metadata,"screenWidth",e.screen.width),l(c.metadata,"screenHeight",e.screen.height),l(c.metadata,"windowWidth",e.innerWidth),l(c.metadata,"windowHeight",e.innerHeight),l(c.metadata,"mapWidth",t.width/s),l(c.metadata,"mapHeight",t.height/s),l(c.metadata,"webglRenderer",t.renderer),l(c.metadata,"webglVendor",t.vendor),l(c.metadata,"sdkVersion",n),l(c.metadata,"sdkIdentifier","mapbox-gl-js"),c}(i);for(const t of o.metadata);for(const t of o.counters);for(const t of o.attributes);this.postEvent(r,o,(()=>{}),t)}},jt=Nt.postPerformanceEvent.bind(Nt),zt=new class extends Ot{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(t,e,n,r){if(!s.API_URL||!s.SESSION_PATH)return;const i=At(s.API_URL+s.SESSION_PATH);i.params.push(`sku=${e||""}`),i.params.push(`access_token=${r||s.ACCESS_TOKEN||""}`);const o={url:Mt(i),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(t,e){return ft(D(t,{method:"GET"}),e)}(o,(t=>{this.pendingRequest=null,n(t),this.saveEventData(),this.processRequests(r)}))}getSessionAPI(t,e,n,r){this.skuToken=e,this.errorCb=r,s.SESSION_PATH&&s.API_URL&&(n||s.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},n):this.errorCb(new Error(xt)))}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:n}=this.queue.shift();e&&this.success[e]||this.getSession(n,this.skuToken,(t=>{t?this.errorCb(t):e&&(this.success[e]=!0)}),t)}},Bt=zt.getSessionAPI.bind(zt),Ft=new Set,Ut={create:"create",load:"load",fullLoad:"fullLoad"},Vt={mark(t){e.performance.mark(t)},measure(t,n,r){e.performance.measure(t,n,r)}};function qt(t){const e=t.name.split("?")[0];return Et(e)&&e.includes("mapbox-gl.js")?"javascript":Et(e)&&e.includes("mapbox-gl.css")?"css":function(t){return s.API_FONTS_REGEX.test(t)}(e)?"fontRange":St(e)?"sprite":Tt(e)?"style":function(t){return s.API_TILEJSON_REGEX.test(t)}(e)?"tilejson":"other"}const Wt=e.performance;function Gt(t){const e=t?t.url.toString():void 0;return Wt.getEntriesByName(e)}let $t,Ht,Zt,Yt;const Xt={now:()=>void 0!==Zt?Zt:e.performance.now(),setNow(t){Zt=t},restoreNow(){Zt=void 0},frame(t){const n=e.requestAnimationFrame(t);return{cancel:()=>e.cancelAnimationFrame(n)}},getImageData(t,n=0){const{width:r,height:i}=t;Yt||(Yt=e.document.createElement("canvas"));const o=Yt.getContext("2d",{willReadFrequently:!0});if(!o)throw new Error("failed to create canvas 2d context");return(r>Yt.width||i>Yt.height)&&(Yt.width=r,Yt.height=i),o.clearRect(-n,-n,r+2*n,i+2*n),o.drawImage(t,0,0,r,i),o.getImageData(-n,-n,r+2*n,i+2*n)},resolveURL:t=>($t||($t=e.document.createElement("a")),$t.href=t,$t.href),get devicePixelRatio(){return e.devicePixelRatio},get prefersReducedMotion(){return!!e.matchMedia&&(null==Ht&&(Ht=e.matchMedia("(prefers-reduced-motion: reduce)")),Ht.matches)}};function Kt(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function Jt(t,e,n){if(n&&n[t]){const r=n[t].indexOf(e);-1!==r&&n[t].splice(r,1)}}class Qt{constructor(t,e={}){D(this,e),this.type=t}}class te extends Qt{constructor(t,e={}){super("error",D({error:t},e))}}class ee{on(t,e){return this._listeners=this._listeners||{},Kt(t,e,this._listeners),this}off(t,e){return Jt(t,e,this._listeners),Jt(t,e,this._oneTimeListeners),this}once(t,e){return e?(this._oneTimeListeners=this._oneTimeListeners||{},Kt(t,e,this._oneTimeListeners),this):new Promise((e=>this.once(t,e)))}fire(t,e){"string"==typeof t&&(t=new Qt(t,e||{}));const n=t.type;if(this.listens(n)){t.target=this;const e=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];for(const n of e)n.call(this,t);const r=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];for(const e of r)Jt(n,e,this._oneTimeListeners),e.call(this,t);const i=this._eventedParent;i&&(D(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),i.fire(t))}else t instanceof te&&i.error(t.error);return this}listens(t){return!!(this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t))}setEventedParent(t,e){return this._eventedParent=t,this._eventedParentData=e,this}}var ne=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function re(t,...e){for(const n of e)for(const e in n)t[e]=n[e];return t}function ie(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function oe(t){if(Array.isArray(t))return t.map(oe);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const n in t)e[n]=oe(t[n]);return e}return ie(t)}class se extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}var ae=se;class ce{constructor(t,e=[]){this.parent=t,this.bindings={};for(const[t,n]of e)this.bindings[t]=n}concat(t){return new ce(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}var le=ce;const ue={kind:"null"},he={kind:"number"},pe={kind:"string"},fe={kind:"boolean"},de={kind:"color"},ge={kind:"object"},me={kind:"value"},ye={kind:"collator"},_e={kind:"formatted"},ve={kind:"resolvedImage"};function xe(t,e){return{kind:"array",itemType:t,N:e}}function be(t){if("array"===t.kind){const e=be(t.itemType);return"number"==typeof t.N?`array<${e}, ${t.N}>`:"value"===t.itemType.kind?"array":`array<${e}>`}return t.kind}const we=[ue,he,pe,fe,de,_e,ge,xe(me),ve];function Ee(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Ee(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(const t of we)if(!Ee(t,e))return null}return`Expected ${be(t)} but found ${be(e)} instead.`}function Te(t,e){return e.some((e=>e.kind===t.kind))}function Se(t,e){return e.some((e=>"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t))}var ke,Ae={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Me(t){return(t=Math.round(t))<0?0:t>255?255:t}function Ie(t){return Me("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function Ce(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function Oe(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{ke={}.parseCSSColor=function(t){var e,n=t.replace(/ /g,"").toLowerCase();if(n in Ae)return Ae[n].slice();if("#"===n[0])return 4===n.length?(e=parseInt(n.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===n.length&&(e=parseInt(n.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var r=n.indexOf("("),i=n.indexOf(")");if(-1!==r&&i+1===n.length){var o=n.substr(0,r),s=n.substr(r+1,i-(r+1)).split(","),a=1;switch(o){case"rgba":if(4!==s.length)return null;a=Ce(s.pop());case"rgb":return 3!==s.length?null:[Ie(s[0]),Ie(s[1]),Ie(s[2]),a];case"hsla":if(4!==s.length)return null;a=Ce(s.pop());case"hsl":if(3!==s.length)return null;var c=(parseFloat(s[0])%360+360)%360/360,l=Ce(s[1]),u=Ce(s[2]),h=u<=.5?u*(l+1):u+l-u*l,p=2*u-h;return[Me(255*Oe(p,h,c+1/3)),Me(255*Oe(p,h,c)),Me(255*Oe(p,h,c-1/3)),a];default:return null}}return null}}catch(t){}class Pe{constructor(t,e,n,r=1){this.r=t,this.g=e,this.b=n,this.a=r}static parse(t){if(!t)return;if(t instanceof Pe)return t;if("string"!=typeof t)return;const e=ke(t);return e?new Pe(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]):void 0}toString(){const[t,e,n,r]=this.toArray();return`rgba(${Math.round(t)},${Math.round(e)},${Math.round(n)},${r})`}toArray(){const{r:t,g:e,b:n,a:r}=this;return 0===r?[0,0,0,0]:[255*t/r,255*e/r,255*n/r,r]}toArray01(){const{r:t,g:e,b:n,a:r}=this;return 0===r?[0,0,0,0]:[t/r,e/r,n/r,r]}toArray01PremultipliedAlpha(){const{r:t,g:e,b:n,a:r}=this;return[t,e,n,r]}}Pe.black=new Pe(0,0,0,1),Pe.white=new Pe(1,1,1,1),Pe.transparent=new Pe(0,0,0,0),Pe.red=new Pe(1,0,0,1),Pe.blue=new Pe(0,0,1,1);var Le=Pe;class De{constructor(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Re{constructor(t,e,n,r,i){this.text=t.normalize?t.normalize():t,this.image=e,this.scale=n,this.fontStack=r,this.textColor=i}}class Ne{constructor(t){this.sections=t}static fromString(t){return new Ne([new Re(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((t=>0!==t.text.length||t.image&&0!==t.image.name.length))}static factory(t){return t instanceof Ne?t:Ne.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map((t=>t.text)).join("")}serialize(){const t=["format"];for(const e of this.sections){if(e.image){t.push(["image",e.image.name]);continue}t.push(e.text);const n={};e.fontStack&&(n["text-font"]=["literal",e.fontStack.split(",")]),e.scale&&(n["font-scale"]=e.scale),e.textColor&&(n["text-color"]=["rgba"].concat(e.textColor.toArray())),t.push(n)}return t}}class je{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new je({name:t,available:!1}):null}serialize(){return["image",this.name]}}function ze(t,e,n,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:`Invalid rgba value [${[t,e,n,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof r?[t,e,n,r]:[t,e,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Be(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof Le)return!0;if(t instanceof De)return!0;if(t instanceof Ne)return!0;if(t instanceof je)return!0;if(Array.isArray(t)){for(const e of t)if(!Be(e))return!1;return!0}if("object"==typeof t){for(const e in t)if(!Be(t[e]))return!1;return!0}return!1}function Fe(t){if(null===t)return ue;if("string"==typeof t)return pe;if("boolean"==typeof t)return fe;if("number"==typeof t)return he;if(t instanceof Le)return de;if(t instanceof De)return ye;if(t instanceof Ne)return _e;if(t instanceof je)return ve;if(Array.isArray(t)){const e=t.length;let n;for(const e of t){const t=Fe(e);if(n){if(n===t)continue;n=me;break}n=t}return xe(n||me,e)}return ge}function Ue(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Le||t instanceof Ne||t instanceof je?t.toString():JSON.stringify(t)}class Ve{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(2!==t.length)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Be(t[1]))return e.error("invalid value");const n=t[1];let r=Fe(n);const i=e.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new Ve(r,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Le?["rgba"].concat(this.value.toArray()):this.value instanceof Ne?this.value.serialize():this.value}}var qe=Ve,We=class{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}};const Ge={string:pe,number:he,boolean:fe,object:ge};class $e{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let n,r=1;const i=t[0];if("array"===i){let i,o;if(t.length>2){const n=t[1];if("string"!=typeof n||!(n in Ge)||"object"===n)return e.error('The item type argument of "array" must be one of string, number, boolean',1);i=Ge[n],r++}else i=me;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);o=t[2],r++}n=xe(i,o)}else n=Ge[i];const o=[];for(;r<t.length;r++){const n=e.parse(t[r],r,me);if(!n)return null;o.push(n)}return new $e(n,o)}evaluate(t){for(let e=0;e<this.args.length;e++){const n=this.args[e].evaluate(t);if(!Ee(this.type,Fe(n)))return n;if(e===this.args.length-1)throw new We(`Expected value to be of type ${be(this.type)}, but found ${be(Fe(n))} instead.`)}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=this.type,e=[t.kind];if("array"===t.kind){const n=t.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){e.push(n.kind);const r=t.N;("number"==typeof r||this.args.length>1)&&e.push(r)}}return e.concat(this.args.map((t=>t.serialize())))}}var He=$e;class Ze{constructor(t){this.type=_e,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[1];if(!Array.isArray(n)&&"object"==typeof n)return e.error("First argument must be an image or text section.");const r=[];let i=!1;for(let n=1;n<=t.length-1;++n){const o=t[n];if(i&&"object"==typeof o&&!Array.isArray(o)){i=!1;let t=null;if(o["font-scale"]&&(t=e.parse(o["font-scale"],1,he),!t))return null;let n=null;if(o["text-font"]&&(n=e.parse(o["text-font"],1,xe(pe)),!n))return null;let s=null;if(o["text-color"]&&(s=e.parse(o["text-color"],1,de),!s))return null;const a=r[r.length-1];a.scale=t,a.font=n,a.textColor=s}else{const o=e.parse(t[n],1,me);if(!o)return null;const s=o.type.kind;if("string"!==s&&"value"!==s&&"null"!==s&&"resolvedImage"!==s)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,r.push({content:o,scale:null,font:null,textColor:null})}}return new Ze(r)}evaluate(t){return new Ne(this.sections.map((e=>{const n=e.content.evaluate(t);return Fe(n)===ve?new Re("",n,null,null,null):new Re(Ue(n),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const e of this.sections){t.push(e.content.serialize());const n={};e.scale&&(n["font-scale"]=e.scale.serialize()),e.font&&(n["text-font"]=e.font.serialize()),e.textColor&&(n["text-color"]=e.textColor.serialize()),t.push(n)}return t}}class Ye{constructor(t){this.type=ve,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");const n=e.parse(t[1],1,pe);return n?new Ye(n):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),n=je.fromString(e);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(e)>-1),n}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Xe={"to-boolean":fe,"to-color":de,"to-number":he,"to-string":pe};class Ke{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[0];if(("to-boolean"===n||"to-string"===n)&&2!==t.length)return e.error("Expected one argument.");const r=Xe[n],i=[];for(let n=1;n<t.length;n++){const r=e.parse(t[n],n,me);if(!r)return null;i.push(r)}return new Ke(r,i)}evaluate(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){let e,n;for(const r of this.args){if(e=r.evaluate(t),n=null,e instanceof Le)return e;if("string"==typeof e){const n=t.parseColor(e);if(n)return n}else if(Array.isArray(e)&&(n=e.length<3||e.length>4?`Invalid rbga value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:ze(e[0],e[1],e[2],e[3]),!n))return new Le(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new We(n||`Could not parse color from value '${"string"==typeof e?e:String(JSON.stringify(e))}'`)}if("number"===this.type.kind){let e=null;for(const n of this.args){if(e=n.evaluate(t),null===e)return 0;const r=Number(e);if(!isNaN(r))return r}throw new We(`Could not convert ${JSON.stringify(e)} to number.`)}return"formatted"===this.type.kind?Ne.fromString(Ue(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?je.fromString(Ue(this.args[0].evaluate(t))):Ue(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){if("formatted"===this.type.kind)return new Ze([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Ye(this.args[0]).serialize();const t=[`to-${this.type.kind}`];return this.eachChild((e=>{t.push(e.serialize())})),t}}var Je=Ke;const Qe=["Unknown","Point","LineString","Polygon"];var tn=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Qe[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const t=this.featureDistanceData.center,e=this.featureDistanceData.scale,{x:n,y:r}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(n*e-t[0])+this.featureDistanceData.bearing[1]*(r*e-t[1])}return 0}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Le.parse(t)),e}};class en{constructor(t,e,n,r){this.name=t,this.type=e,this._evaluate=n,this.args=r}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((t=>t.serialize())))}static parse(t,e){const n=t[0],r=en.definitions[n];if(!r)return e.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const i=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,s=o.filter((([e])=>!Array.isArray(e)||e.length===t.length-1));let a=null;for(const[r,o]of s){a=new In(e.registry,e.path,null,e.scope);const s=[];let c=!1;for(let e=1;e<t.length;e++){const n=t[e],i=Array.isArray(r)?r[e-1]:r.type,o=a.parse(n,1+s.length,i);if(!o){c=!0;break}s.push(o)}if(!c)if(Array.isArray(r)&&r.length!==s.length)a.error(`Expected ${r.length} arguments, but found ${s.length} instead.`);else{for(let t=0;t<s.length;t++){const e=Array.isArray(r)?r[t]:r.type,n=s[t];a.concat(t+1).checkSubtype(e,n.type)}if(0===a.errors.length)return new en(n,i,o,s)}}if(1===s.length)e.errors.push(...a.errors);else{const n=(s.length?s:o).map((([t])=>{return e=t,Array.isArray(e)?`(${e.map(be).join(", ")})`:`(${be(e.type)}...)`;var e})).join(" | "),r=[];for(let n=1;n<t.length;n++){const i=e.parse(t[n],1+r.length);if(!i)return null;r.push(be(i.type))}e.error(`Expected arguments of type ${n}, but found (${r.join(", ")}) instead.`)}return null}static register(t,e){en.definitions=e;for(const n in e)t[n]=en}}var nn=en;class rn{constructor(t,e,n){this.type=ye,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");const r=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,fe);if(!r)return null;const i=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,fe);if(!i)return null;let o=null;return n.locale&&(o=e.parse(n.locale,1,pe),!o)?null:new rn(r,i,o)}evaluate(t){return new De(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const on=8192;function sn(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function an(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function cn(t,e){const n=(180+t[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,i=Math.pow(2,e.z);return[Math.round(n*i*on),Math.round(r*i*on)]}function ln(t,e,n){const r=t[0]-e[0],i=t[1]-e[1],o=t[0]-n[0],s=t[1]-n[1];return r*s-o*i==0&&r*o<=0&&i*s<=0}function un(t,e){let n=!1;for(let s=0,a=e.length;s<a;s++){const a=e[s];for(let e=0,s=a.length;e<s-1;e++){if(ln(t,a[e],a[e+1]))return!1;(i=a[e])[1]>(r=t)[1]!=(o=a[e+1])[1]>r[1]&&r[0]<(o[0]-i[0])*(r[1]-i[1])/(o[1]-i[1])+i[0]&&(n=!n)}}var r,i,o;return n}function hn(t,e){for(let n=0;n<e.length;n++)if(un(t,e[n]))return!0;return!1}function pn(t,e,n,r){const i=r[0]-n[0],o=r[1]-n[1],s=(t[0]-n[0])*o-i*(t[1]-n[1]),a=(e[0]-n[0])*o-i*(e[1]-n[1]);return s>0&&a<0||s<0&&a>0}function fn(t,e,n){for(const l of n)for(let n=0;n<l.length-1;++n)if(0!=(a=[(s=l[n+1])[0]-(o=l[n])[0],s[1]-o[1]])[0]*(c=[(i=e)[0]-(r=t)[0],i[1]-r[1]])[1]-a[1]*c[0]&&pn(r,i,o,s)&&pn(o,s,r,i))return!0;var r,i,o,s,a,c;return!1}function dn(t,e){for(let n=0;n<t.length;++n)if(!un(t[n],e))return!1;for(let n=0;n<t.length-1;++n)if(fn(t[n],t[n+1],e))return!1;return!0}function gn(t,e){for(let n=0;n<e.length;n++)if(dn(t,e[n]))return!0;return!1}function mn(t,e,n){const r=[];for(let i=0;i<t.length;i++){const o=[];for(let r=0;r<t[i].length;r++){const s=cn(t[i][r],n);sn(e,s),o.push(s)}r.push(o)}return r}function yn(t,e,n){const r=[];for(let i=0;i<t.length;i++){const o=mn(t[i],e,n);r.push(o)}return r}function _n(t,e,n,r){if(t[0]<n[0]||t[0]>n[2]){const e=.5*r;let i=t[0]-n[0]>e?-r:n[0]-t[0]>e?r:0;0===i&&(i=t[0]-n[2]>e?-r:n[2]-t[0]>e?r:0),t[0]+=i}sn(e,t)}function vn(t,e,n,r){const i=Math.pow(2,r.z)*on,o=[r.x*on,r.y*on],s=[];if(!t)return s;for(const r of t)for(const t of r){const r=[t.x+o[0],t.y+o[1]];_n(r,e,n,i),s.push(r)}return s}function xn(t,e,n,r){const i=Math.pow(2,r.z)*on,o=[r.x*on,r.y*on],s=[];if(!t)return s;for(const n of t){const t=[];for(const r of n){const n=[r.x+o[0],r.y+o[1]];sn(e,n),t.push(n)}s.push(t)}if(e[2]-e[0]<=i/2){(a=e)[0]=a[1]=1/0,a[2]=a[3]=-1/0;for(const t of s)for(const r of t)_n(r,e,n,i)}var a;return s}class bn{constructor(t,e){this.type=fe,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Be(t[1])){const e=t[1];if("FeatureCollection"===e.type)for(let t=0;t<e.features.length;++t){const n=e.features[t].geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new bn(e,e.features[t].geometry)}else if("Feature"===e.type){const t=e.geometry.type;if("Polygon"===t||"MultiPolygon"===t)return new bn(e,e.geometry)}else if("Polygon"===e.type||"MultiPolygon"===e.type)return new bn(e,e)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if(!i)return!1;if("Polygon"===e.type){const o=mn(e.coordinates,r,i),s=vn(t.geometry(),n,r,i);if(!an(n,r))return!1;for(const t of s)if(!un(t,o))return!1}if("MultiPolygon"===e.type){const o=yn(e.coordinates,r,i),s=vn(t.geometry(),n,r,i);if(!an(n,r))return!1;for(const t of s)if(!hn(t,o))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if(!i)return!1;if("Polygon"===e.type){const o=mn(e.coordinates,r,i),s=xn(t.geometry(),n,r,i);if(!an(n,r))return!1;for(const t of s)if(!dn(t,o))return!1}if("MultiPolygon"===e.type){const o=yn(e.coordinates,r,i),s=xn(t.geometry(),n,r,i);if(!an(n,r))return!1;for(const t of s)if(!gn(t,o))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var wn=bn;function En(t){if(t instanceof nn){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof wn)return!1;let e=!0;return t.eachChild((t=>{e&&!En(t)&&(e=!1)})),e}function Tn(t){if(t instanceof nn&&"feature-state"===t.name)return!1;let e=!0;return t.eachChild((t=>{e&&!Tn(t)&&(e=!1)})),e}function Sn(t,e){if(t instanceof nn&&e.indexOf(t.name)>=0)return!1;let n=!0;return t.eachChild((t=>{n&&!Sn(t,e)&&(n=!1)})),n}class kn{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");const n=t[1];return e.scope.has(n)?new kn(n,e.scope.get(n)):e.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var An=kn;class Mn{constructor(t,e=[],n,r=new le,i=[]){this.registry=t,this.path=e,this.key=e.map((t=>`[${t}]`)).join(""),this.scope=r,this.errors=i,this.expectedType=n}parse(t,e,n,r,i={}){return e?this.concat(e,n,r)._parse(t,i):this._parse(t,i)}_parse(t,e){function n(t,e,n){return"assert"===n?new He(e,[t]):"coerce"===n?new Je(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=t[0];if("string"!=typeof r)return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const i=this.registry[r];if(i){let r=i.parse(t,this);if(!r)return null;if(this.expectedType){const t=this.expectedType,i=r.type;if("string"!==t.kind&&"number"!==t.kind&&"boolean"!==t.kind&&"object"!==t.kind&&"array"!==t.kind||"value"!==i.kind)if("color"!==t.kind&&"formatted"!==t.kind&&"resolvedImage"!==t.kind||"value"!==i.kind&&"string"!==i.kind){if(this.checkSubtype(t,i))return null}else r=n(r,t,e.typeAnnotation||"coerce");else r=n(r,t,e.typeAnnotation||"assert")}if(!(r instanceof qe)&&"resolvedImage"!==r.type.kind&&Cn(r)){const e=new tn;try{r=new qe(r.type,r.evaluate(e))}catch(t){return this.error(t.message),null}}return r}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,e,n){const r="number"==typeof t?this.path.concat(t):this.path,i=n?this.scope.concat(n):this.scope;return new Mn(this.registry,r,e||null,i,this.errors)}error(t,...e){const n=`${this.key}${e.map((t=>`[${t}]`)).join("")}`;this.errors.push(new ae(n,t))}checkSubtype(t,e){const n=Ee(t,e);return n&&this.error(n),n}}var In=Mn;function Cn(t){if(t instanceof An)return Cn(t.boundExpression);if(t instanceof nn&&"error"===t.name)return!1;if(t instanceof rn)return!1;if(t instanceof wn)return!1;const e=t instanceof Je||t instanceof He;let n=!0;return t.eachChild((t=>{n=e?n&&Cn(t):n&&t instanceof qe})),!!n&&En(t)&&Sn(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function On(t,e){const n=t.length-1;let r,i,o=0,s=n,a=0;for(;o<=s;)if(a=Math.floor((o+s)/2),r=t[a],i=t[a+1],r<=e){if(a===n||e<i)return a;o=a+1}else{if(!(r>e))throw new We("Input is not a number.");s=a-1}return 0}class Pn{constructor(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[t,e]of n)this.labels.push(t),this.outputs.push(e)}static parse(t,e){if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");const n=e.parse(t[1],1,he);if(!n)return null;const r=[];let i=null;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(let n=1;n<t.length;n+=2){const o=1===n?-1/0:t[n],s=t[n+1],a=n,c=n+1;if("number"!=typeof o)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',a);if(r.length&&r[r.length-1][0]>=o)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',a);const l=e.parse(s,c,i);if(!l)return null;i=i||l.type,r.push([o,l])}return new Pn(i,n,r)}evaluate(t){const e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);const r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);const i=e.length;return r>=e[i-1]?n[i-1].evaluate(t):n[On(e,r)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){const t=["step",this.input.serialize()];for(let e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}var Ln=Pn;function Dn(t,e,n){return t*(1-n)+e*n}var Rn=Object.freeze({__proto__:null,array:function(t,e,n){return t.map(((t,r)=>Dn(t,e[r],n)))},color:function(t,e,n){return new Le(Dn(t.r,e.r,n),Dn(t.g,e.g,n),Dn(t.b,e.b,n),Dn(t.a,e.a,n))},number:Dn});const Nn=.95047,jn=1.08883,zn=4/29,Bn=6/29,Fn=3*Bn*Bn,Un=Bn*Bn*Bn,Vn=Math.PI/180,qn=180/Math.PI;function Wn(t){return t>Un?Math.pow(t,1/3):t/Fn+zn}function Gn(t){return t>Bn?t*t*t:Fn*(t-zn)}function $n(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Hn(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Zn(t){const e=Hn(t.r),n=Hn(t.g),r=Hn(t.b),i=Wn((.4124564*e+.3575761*n+.1804375*r)/Nn),o=Wn((.2126729*e+.7151522*n+.072175*r)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-Wn((.0193339*e+.119192*n+.9503041*r)/jn)),alpha:t.a}}function Yn(t){let e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=1*Gn(e),n=Nn*Gn(n),r=jn*Gn(r),new Le($n(3.2404542*n-1.5371385*e-.4985314*r),$n(-.969266*n+1.8760108*e+.041556*r),$n(.0556434*n-.2040259*e+1.0572252*r),t.alpha)}function Xn(t,e,n){const r=e-t;return t+n*(r>180||r<-180?r-360*Math.round(r/360):r)}const Kn={forward:Zn,reverse:Yn,interpolate:function(t,e,n){return{l:Dn(t.l,e.l,n),a:Dn(t.a,e.a,n),b:Dn(t.b,e.b,n),alpha:Dn(t.alpha,e.alpha,n)}}},Jn={forward:function(t){const{l:e,a:n,b:r}=Zn(t),i=Math.atan2(r,n)*qn;return{h:i<0?i+360:i,c:Math.sqrt(n*n+r*r),l:e,alpha:t.a}},reverse:function(t){const e=t.h*Vn,n=t.c;return Yn({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:Xn(t.h,e.h,n),c:Dn(t.c,e.c,n),l:Dn(t.l,e.l,n),alpha:Dn(t.alpha,e.alpha,n)}}};var Qn=Object.freeze({__proto__:null,hcl:Jn,lab:Kn});class tr{constructor(t,e,n,r,i){this.type=t,this.operator=e,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(const[t,e]of i)this.labels.push(t),this.outputs.push(e)}static interpolationFactor(t,e,n,r){let i=0;if("exponential"===t.name)i=er(e,t.base,n,r);else if("linear"===t.name)i=er(e,1,n,r);else if("cubic-bezier"===t.name){const o=t.controlPoints;i=new y(o[0],o[1],o[2],o[3]).solve(er(e,1,n,r))}return i}static parse(t,e){let[n,r,i,...o]=t;if(!Array.isArray(r)||0===r.length)return e.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){const t=r[1];if("number"!=typeof t)return e.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:t}}else{if("cubic-bezier"!==r[0])return e.error(`Unknown interpolation type ${String(r[0])}`,1,0);{const t=r.slice(1);if(4!==t.length||t.some((t=>"number"!=typeof t||t<0||t>1)))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:t}}}if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(i=e.parse(i,2,he),!i)return null;const s=[];let a=null;"interpolate-hcl"===n||"interpolate-lab"===n?a=de:e.expectedType&&"value"!==e.expectedType.kind&&(a=e.expectedType);for(let t=0;t<o.length;t+=2){const n=o[t],r=o[t+1],i=t+3,c=t+4;if("number"!=typeof n)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',i);if(s.length&&s[s.length-1][0]>=n)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',i);const l=e.parse(r,c,a);if(!l)return null;a=a||l.type,s.push([n,l])}return"number"===a.kind||"color"===a.kind||"array"===a.kind&&"number"===a.itemType.kind&&"number"==typeof a.N?new tr(a,n,r,i,s):e.error(`Type ${be(a)} is not interpolatable.`)}evaluate(t){const e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);const r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);const i=e.length;if(r>=e[i-1])return n[i-1].evaluate(t);const o=On(e,r),s=tr.interpolationFactor(this.interpolation,r,e[o],e[o+1]),a=n[o].evaluate(t),c=n[o+1].evaluate(t);return"interpolate"===this.operator?Rn[this.type.kind.toLowerCase()](a,c,s):"interpolate-hcl"===this.operator?Jn.reverse(Jn.interpolate(Jn.forward(a),Jn.forward(c),s)):Kn.reverse(Kn.interpolate(Kn.forward(a),Kn.forward(c),s))}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){let t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const e=[this.operator,t,this.input.serialize()];for(let t=0;t<this.labels.length;t++)e.push(this.labels[t],this.outputs[t].serialize());return e}}function er(t,e,n,r){const i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}var nr=tr;class rr{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let n=null;const r=e.expectedType;r&&"value"!==r.kind&&(n=r);const i=[];for(const r of t.slice(1)){const t=e.parse(r,1+i.length,n,void 0,{typeAnnotation:"omit"});if(!t)return null;n=n||t.type,i.push(t)}const o=r&&i.some((t=>Ee(r,t.type)));return new rr(o?me:n,i)}evaluate(t){let e,n=null,r=0;for(const i of this.args){if(r++,n=i.evaluate(t),n&&n instanceof je&&!n.available&&(e||(e=n),n=null,r===this.args.length))return e;if(null!==n)break}return n}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=["coalesce"];return this.eachChild((e=>{t.push(e.serialize())})),t}}var ir=rr;class or{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const n=[];for(let r=1;r<t.length-1;r+=2){const i=t[r];if("string"!=typeof i)return e.error(`Expected string, but found ${typeof i} instead.`,r);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",r);const o=e.parse(t[r+1],r+1);if(!o)return null;n.push([i,o])}const r=e.parse(t[t.length-1],t.length-1,e.expectedType,n);return r?new or(n,r):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[e,n]of this.bindings)t.push(e,n.serialize());return t.push(this.result.serialize()),t}}var sr=or;class ar{constructor(t,e,n){this.type=t,this.index=e,this.input=n}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,he),r=e.parse(t[2],2,xe(e.expectedType||me));return n&&r?new ar(r.type.itemType,n,r):null}evaluate(t){const e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new We(`Array index out of bounds: ${e} < 0.`);if(e>=n.length)throw new We(`Array index out of bounds: ${e} > ${n.length-1}.`);if(e!==Math.floor(e))throw new We(`Array index must be an integer, but found ${e} instead.`);return n[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var cr=ar;class lr{constructor(t,e){this.type=fe,this.needle=t,this.haystack=e}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,me),r=e.parse(t[2],2,me);return n&&r?Te(n.type,[fe,pe,he,ue,me])?new lr(n,r):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${be(n.type)} instead`):null}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(null==n)return!1;if(!Se(e,["boolean","string","number","null"]))throw new We(`Expected first argument to be of type boolean, string, number or null, but found ${be(Fe(e))} instead.`);if(!Se(n,["string","array"]))throw new We(`Expected second argument to be of type array or string, but found ${be(Fe(n))} instead.`);return n.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var ur=lr;class hr{constructor(t,e,n){this.type=he,this.needle=t,this.haystack=e,this.fromIndex=n}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,me),r=e.parse(t[2],2,me);if(!n||!r)return null;if(!Te(n.type,[fe,pe,he,ue,me]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${be(n.type)} instead`);if(4===t.length){const i=e.parse(t[3],3,he);return i?new hr(n,r,i):null}return new hr(n,r)}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!Se(e,["boolean","string","number","null"]))throw new We(`Expected first argument to be of type boolean, string, number or null, but found ${be(Fe(e))} instead.`);if(!Se(n,["string","array"]))throw new We(`Expected second argument to be of type array or string, but found ${be(Fe(n))} instead.`);if(this.fromIndex){const r=this.fromIndex.evaluate(t);return n.indexOf(e,r)}return n.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var pr=hr;class fr{constructor(t,e,n,r,i,o){this.inputType=t,this.type=e,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o}static parse(t,e){if(t.length<5)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return e.error("Expected an even number of arguments.");let n,r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);const i={},o=[];for(let s=2;s<t.length-1;s+=2){let a=t[s];const c=t[s+1];Array.isArray(a)||(a=[a]);const l=e.concat(s);if(0===a.length)return l.error("Expected at least one branch label.");for(const t of a){if("number"!=typeof t&&"string"!=typeof t)return l.error("Branch labels must be numbers or strings.");if("number"==typeof t&&Math.abs(t)>Number.MAX_SAFE_INTEGER)return l.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof t&&Math.floor(t)!==t)return l.error("Numeric branch labels must be integer values.");if(n){if(l.checkSubtype(n,Fe(t)))return null}else n=Fe(t);if(void 0!==i[String(t)])return l.error("Branch labels must be unique.");i[String(t)]=o.length}const u=e.parse(c,s,r);if(!u)return null;r=r||u.type,o.push(u)}const s=e.parse(t[1],1,me);if(!s)return null;const a=e.parse(t[t.length-1],t.length-1,r);return a?"value"!==s.type.kind&&e.concat(1).checkSubtype(n,s.type)?null:new fr(n,r,s,i,o,a):null}evaluate(t){const e=this.input.evaluate(t);return(Fe(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],e=Object.keys(this.cases).sort(),n=[],r={};for(const t of e){const e=r[this.cases[t]];void 0===e?(r[this.cases[t]]=n.length,n.push([this.cases[t],[t]])):n[e][1].push(t)}const i=t=>"number"===this.inputType.kind?Number(t):t;for(const[e,r]of n)t.push(1===r.length?i(r[0]):r.map(i)),t.push(this.outputs[e].serialize());return t.push(this.otherwise.serialize()),t}}var dr=fr;class gr{constructor(t,e,n){this.type=t,this.branches=e,this.otherwise=n}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return e.error("Expected an odd number of arguments.");let n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);const r=[];for(let i=1;i<t.length-1;i+=2){const o=e.parse(t[i],i,fe);if(!o)return null;const s=e.parse(t[i+1],i+1,n);if(!s)return null;r.push([o,s]),n=n||s.type}const i=e.parse(t[t.length-1],t.length-1,n);return i?new gr(n,r,i):null}evaluate(t){for(const[e,n]of this.branches)if(e.evaluate(t))return n.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,n]of this.branches)t(e),t(n);t(this.otherwise)}outputDefined(){return this.branches.every((([t,e])=>e.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild((e=>{t.push(e.serialize())})),t}}var mr=gr;class yr{constructor(t,e,n,r){this.type=t,this.input=e,this.beginIndex=n,this.endIndex=r}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,me),r=e.parse(t[2],2,he);if(!n||!r)return null;if(!Te(n.type,[xe(me),pe,me]))return e.error(`Expected first argument to be of type array or string, but found ${be(n.type)} instead`);if(4===t.length){const i=e.parse(t[3],3,he);return i?new yr(n.type,n,r,i):null}return new yr(n.type,n,r)}evaluate(t){const e=this.input.evaluate(t),n=this.beginIndex.evaluate(t);if(!Se(e,["string","array"]))throw new We(`Expected first argument to be of type array or string, but found ${be(Fe(e))} instead.`);if(this.endIndex){const r=this.endIndex.evaluate(t);return e.slice(n,r)}return e.slice(n)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var _r=yr;function vr(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function xr(t,e,n,r){return 0===r.compare(e,n)}function br(t,e,n){const r="=="!==t&&"!="!==t;return class i{constructor(t,e,n){this.type=fe,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}static parse(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");const n=t[0];let o=e.parse(t[1],1,me);if(!o)return null;if(!vr(n,o.type))return e.concat(1).error(`"${n}" comparisons are not supported for type '${be(o.type)}'.`);let s=e.parse(t[2],2,me);if(!s)return null;if(!vr(n,s.type))return e.concat(2).error(`"${n}" comparisons are not supported for type '${be(s.type)}'.`);if(o.type.kind!==s.type.kind&&"value"!==o.type.kind&&"value"!==s.type.kind)return e.error(`Cannot compare types '${be(o.type)}' and '${be(s.type)}'.`);r&&("value"===o.type.kind&&"value"!==s.type.kind?o=new He(s.type,[o]):"value"!==o.type.kind&&"value"===s.type.kind&&(s=new He(o.type,[s])));let a=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==s.type.kind&&"value"!==o.type.kind&&"value"!==s.type.kind)return e.error("Cannot use collator to compare non-string types.");if(a=e.parse(t[3],3,ye),!a)return null}return new i(o,s,a)}evaluate(i){const o=this.lhs.evaluate(i),s=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){const e=Fe(o),n=Fe(s);if(e.kind!==n.kind||"string"!==e.kind&&"number"!==e.kind)throw new We(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${e.kind}, ${n.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const t=Fe(o),n=Fe(s);if("string"!==t.kind||"string"!==n.kind)return e(i,o,s)}return this.collator?n(i,o,s,this.collator.evaluate(i)):e(i,o,s)}eachChild(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}outputDefined(){return!0}serialize(){const e=[t];return this.eachChild((t=>{e.push(t.serialize())})),e}}}const wr=br("==",(function(t,e,n){return e===n}),xr),Er=br("!=",(function(t,e,n){return e!==n}),(function(t,e,n,r){return!xr(0,e,n,r)})),Tr=br("<",(function(t,e,n){return e<n}),(function(t,e,n,r){return r.compare(e,n)<0})),Sr=br(">",(function(t,e,n){return e>n}),(function(t,e,n,r){return r.compare(e,n)>0})),kr=br("<=",(function(t,e,n){return e<=n}),(function(t,e,n,r){return r.compare(e,n)<=0})),Ar=br(">=",(function(t,e,n){return e>=n}),(function(t,e,n,r){return r.compare(e,n)>=0}));class Mr{constructor(t,e,n,r,i,o){this.type=pe,this.number=t,this.locale=e,this.currency=n,this.unit=r,this.minFractionDigits=i,this.maxFractionDigits=o}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");const n=e.parse(t[1],1,he);if(!n)return null;const r=t[2];if("object"!=typeof r||Array.isArray(r))return e.error("NumberFormat options argument must be an object.");let i=null;if(r.locale&&(i=e.parse(r.locale,1,pe),!i))return null;let o=null;if(r.currency&&(o=e.parse(r.currency,1,pe),!o))return null;let s=null;if(r.unit&&(s=e.parse(r.unit,1,pe),!s))return null;let a=null;if(r["min-fraction-digits"]&&(a=e.parse(r["min-fraction-digits"],1,he),!a))return null;let c=null;return r["max-fraction-digits"]&&(c=e.parse(r["max-fraction-digits"],1,he),!c)?null:new Mr(n,i,o,s,a,c)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(t):void 0,unit:this.unit?this.unit.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.unit&&t(this.unit),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.unit&&(t.unit=this.unit.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class Ir{constructor(t){this.type=he,this.input=t}static parse(t,e){if(2!==t.length)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error(`Expected argument of type string or array, but found ${be(n.type)} instead.`):new Ir(n):null}evaluate(t){const e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new We(`Expected value to be of type string or array, but found ${be(Fe(e))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild((e=>{t.push(e.serialize())})),t}}const Cr={"==":wr,"!=":Er,">":Sr,"<":Tr,">=":Ar,"<=":kr,array:He,at:cr,boolean:He,case:mr,coalesce:ir,collator:rn,format:Ze,image:Ye,in:ur,"index-of":pr,interpolate:nr,"interpolate-hcl":nr,"interpolate-lab":nr,length:Ir,let:sr,literal:qe,match:dr,number:He,"number-format":Mr,object:He,slice:_r,step:Ln,string:He,"to-boolean":Je,"to-color":Je,"to-number":Je,"to-string":Je,var:An,within:wn};function Or(t,[e,n,r,i]){e=e.evaluate(t),n=n.evaluate(t),r=r.evaluate(t);const o=i?i.evaluate(t):1,s=ze(e,n,r,o);if(s)throw new We(s);return new Le(e/255*o,n/255*o,r/255*o,o)}function Pr(t,e){return t in e}function Lr(t,e){const n=e[t];return void 0===n?null:n}function Dr(t){return{type:t}}nn.register(Cr,{error:[{kind:"error"},[pe],(t,[e])=>{throw new We(e.evaluate(t))}],typeof:[pe,[me],(t,[e])=>be(Fe(e.evaluate(t)))],"to-rgba":[xe(he,4),[de],(t,[e])=>e.evaluate(t).toArray()],rgb:[de,[he,he,he],Or],rgba:[de,[he,he,he,he],Or],has:{type:fe,overloads:[[[pe],(t,[e])=>Pr(e.evaluate(t),t.properties())],[[pe,ge],(t,[e,n])=>Pr(e.evaluate(t),n.evaluate(t))]]},get:{type:me,overloads:[[[pe],(t,[e])=>Lr(e.evaluate(t),t.properties())],[[pe,ge],(t,[e,n])=>Lr(e.evaluate(t),n.evaluate(t))]]},"feature-state":[me,[pe],(t,[e])=>Lr(e.evaluate(t),t.featureState||{})],properties:[ge,[],t=>t.properties()],"geometry-type":[pe,[],t=>t.geometryType()],id:[me,[],t=>t.id()],zoom:[he,[],t=>t.globals.zoom],pitch:[he,[],t=>t.globals.pitch||0],"distance-from-center":[he,[],t=>t.distanceFromCenter()],"heatmap-density":[he,[],t=>t.globals.heatmapDensity||0],"line-progress":[he,[],t=>t.globals.lineProgress||0],"sky-radial-progress":[he,[],t=>t.globals.skyRadialProgress||0],accumulated:[me,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[he,Dr(he),(t,e)=>{let n=0;for(const r of e)n+=r.evaluate(t);return n}],"*":[he,Dr(he),(t,e)=>{let n=1;for(const r of e)n*=r.evaluate(t);return n}],"-":{type:he,overloads:[[[he,he],(t,[e,n])=>e.evaluate(t)-n.evaluate(t)],[[he],(t,[e])=>-e.evaluate(t)]]},"/":[he,[he,he],(t,[e,n])=>e.evaluate(t)/n.evaluate(t)],"%":[he,[he,he],(t,[e,n])=>e.evaluate(t)%n.evaluate(t)],ln2:[he,[],()=>Math.LN2],pi:[he,[],()=>Math.PI],e:[he,[],()=>Math.E],"^":[he,[he,he],(t,[e,n])=>Math.pow(e.evaluate(t),n.evaluate(t))],sqrt:[he,[he],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[he,[he],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[he,[he],(t,[e])=>Math.log(e.evaluate(t))],log2:[he,[he],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[he,[he],(t,[e])=>Math.sin(e.evaluate(t))],cos:[he,[he],(t,[e])=>Math.cos(e.evaluate(t))],tan:[he,[he],(t,[e])=>Math.tan(e.evaluate(t))],asin:[he,[he],(t,[e])=>Math.asin(e.evaluate(t))],acos:[he,[he],(t,[e])=>Math.acos(e.evaluate(t))],atan:[he,[he],(t,[e])=>Math.atan(e.evaluate(t))],min:[he,Dr(he),(t,e)=>Math.min(...e.map((e=>e.evaluate(t))))],max:[he,Dr(he),(t,e)=>Math.max(...e.map((e=>e.evaluate(t))))],abs:[he,[he],(t,[e])=>Math.abs(e.evaluate(t))],round:[he,[he],(t,[e])=>{const n=e.evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[he,[he],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[he,[he],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[fe,[pe,me],(t,[e,n])=>t.properties()[e.value]===n.value],"filter-id-==":[fe,[me],(t,[e])=>t.id()===e.value],"filter-type-==":[fe,[pe],(t,[e])=>t.geometryType()===e.value],"filter-<":[fe,[pe,me],(t,[e,n])=>{const r=t.properties()[e.value],i=n.value;return typeof r==typeof i&&r<i}],"filter-id-<":[fe,[me],(t,[e])=>{const n=t.id(),r=e.value;return typeof n==typeof r&&n<r}],"filter->":[fe,[pe,me],(t,[e,n])=>{const r=t.properties()[e.value],i=n.value;return typeof r==typeof i&&r>i}],"filter-id->":[fe,[me],(t,[e])=>{const n=t.id(),r=e.value;return typeof n==typeof r&&n>r}],"filter-<=":[fe,[pe,me],(t,[e,n])=>{const r=t.properties()[e.value],i=n.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[fe,[me],(t,[e])=>{const n=t.id(),r=e.value;return typeof n==typeof r&&n<=r}],"filter->=":[fe,[pe,me],(t,[e,n])=>{const r=t.properties()[e.value],i=n.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[fe,[me],(t,[e])=>{const n=t.id(),r=e.value;return typeof n==typeof r&&n>=r}],"filter-has":[fe,[me],(t,[e])=>e.value in t.properties()],"filter-has-id":[fe,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[fe,[xe(pe)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[fe,[xe(me)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[fe,[pe,xe(me)],(t,[e,n])=>n.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[fe,[pe,xe(me)],(t,[e,n])=>function(t,e,n,r){for(;n<=r;){const i=n+r>>1;if(e[i]===t)return!0;e[i]>t?r=i-1:n=i+1}return!1}(t.properties()[e.value],n.value,0,n.value.length-1)],all:{type:fe,overloads:[[[fe,fe],(t,[e,n])=>e.evaluate(t)&&n.evaluate(t)],[Dr(fe),(t,e)=>{for(const n of e)if(!n.evaluate(t))return!1;return!0}]]},any:{type:fe,overloads:[[[fe,fe],(t,[e,n])=>e.evaluate(t)||n.evaluate(t)],[Dr(fe),(t,e)=>{for(const n of e)if(n.evaluate(t))return!0;return!1}]]},"!":[fe,[fe],(t,[e])=>!e.evaluate(t)],"is-supported-script":[fe,[pe],(t,[e])=>{const n=t.globals&&t.globals.isSupportedScript;return!n||n(e.evaluate(t))}],upcase:[pe,[pe],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[pe,[pe],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[pe,Dr(me),(t,e)=>e.map((e=>Ue(e.evaluate(t)))).join("")],"resolved-locale":[pe,[ye],(t,[e])=>e.evaluate(t).resolvedLocale()]});var Rr=Cr;function Nr(t){return{result:"success",value:t}}function jr(t){return{result:"error",value:t}}function zr(t){return"data-driven"===t["property-type"]}function Br(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Fr(t){return!!t.expression&&t.expression.interpolated}function Ur(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Vr(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function qr(t){return t}function Wr(t,e){const n="color"===e.type,r=t.stops&&"object"==typeof t.stops[0][0],i=r||!(r||void 0!==t.property),o=t.type||(Fr(e)?"exponential":"interval");if(n&&((t=re({},t)).stops&&(t.stops=t.stops.map((t=>[t[0],Le.parse(t[1])]))),t.default=Le.parse(t.default?t.default:e.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!Qn[t.colorSpace])throw new Error(`Unknown color space: ${t.colorSpace}`);let s,a,c;if("exponential"===o)s=Zr;else if("interval"===o)s=Hr;else if("categorical"===o){s=$r,a=Object.create(null);for(const e of t.stops)a[e[0]]=e[1];c=typeof t.stops[0][0]}else{if("identity"!==o)throw new Error(`Unknown function type "${o}"`);s=Yr}if(r){const n={},r=[];for(let e=0;e<t.stops.length;e++){const i=t.stops[e],o=i[0].zoom;void 0===n[o]&&(n[o]={zoom:o,type:t.type,property:t.property,default:t.default,stops:[]},r.push(o)),n[o].stops.push([i[0].value,i[1]])}const i=[];for(const t of r)i.push([n[t].zoom,Wr(n[t],e)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:nr.interpolationFactor.bind(void 0,o),zoomStops:i.map((t=>t[0])),evaluate:({zoom:n},r)=>Zr({stops:i,base:t.base},e,n).evaluate(n,r)}}if(i){const n="exponential"===o?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:n,interpolationFactor:nr.interpolationFactor.bind(void 0,n),zoomStops:t.stops.map((t=>t[0])),evaluate:({zoom:n})=>s(t,e,n,a,c)}}return{kind:"source",evaluate(n,r){const i=r&&r.properties?r.properties[t.property]:void 0;return void 0===i?Gr(t.default,e.default):s(t,e,i,a,c)}}}function Gr(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function $r(t,e,n,r,i){return Gr(typeof n===i?r[n]:void 0,t.default,e.default)}function Hr(t,e,n){if("number"!==Ur(n))return Gr(t.default,e.default);const r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];const i=On(t.stops.map((t=>t[0])),n);return t.stops[i][1]}function Zr(t,e,n){const r=void 0!==t.base?t.base:1;if("number"!==Ur(n))return Gr(t.default,e.default);const i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];const o=On(t.stops.map((t=>t[0])),n),s=function(t,e,n,r){const i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}(n,r,t.stops[o][0],t.stops[o+1][0]),a=t.stops[o][1],c=t.stops[o+1][1];let l=Rn[e.type]||qr;if(t.colorSpace&&"rgb"!==t.colorSpace){const e=Qn[t.colorSpace];l=(t,n)=>e.reverse(e.interpolate(e.forward(t),e.forward(n),s))}return"function"==typeof a.evaluate?{evaluate(...t){const e=a.evaluate.apply(void 0,t),n=c.evaluate.apply(void 0,t);if(void 0!==e&&void 0!==n)return l(e,n,s)}}:l(a,c,s)}function Yr(t,e,n){return"color"===e.type?n=Le.parse(n):"formatted"===e.type?n=Ne.fromString(n.toString()):"resolvedImage"===e.type?n=je.fromString(n.toString()):Ur(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),Gr(n,t.default,e.default)}class Xr{constructor(t,e){this.expression=t,this._warningHistory={},this._evaluator=new tn,this._defaultValue=e?function(t){return"color"===t.type&&(Vr(t.default)||Array.isArray(t.default))?new Le(0,0,0,0):"color"===t.type?Le.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null}evaluateWithoutErrorHandling(t,e,n,r,i,o,s,a){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=r||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this._evaluator.featureTileCoord=s||null,this._evaluator.featureDistanceData=a||null,this.expression.evaluate(this._evaluator)}evaluate(t,e,n,r,o,s,a,c){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r||null,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s||null,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=c||null;try{const t=this.expression.evaluate(this._evaluator);if(null==t||"number"==typeof t&&t!=t)return this._defaultValue;if(this._enumValues&&!(t in this._enumValues))throw new We(`Expected value to be one of ${Object.keys(this._enumValues).map((t=>JSON.stringify(t))).join(", ")}, but found ${JSON.stringify(t)} instead.`);return t}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,void 0!==i&&i.warn(t.message)),this._defaultValue}}}function Kr(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Rr}function Jr(t,e){const n=new In(Rr,[],e?function(t){const e={color:de,string:pe,number:he,enum:pe,boolean:fe,formatted:_e,resolvedImage:ve};return"array"===t.type?xe(e[t.value]||me,t.length):e[t.type]}(e):void 0),r=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return r?Nr(new Xr(r,e)):jr(n.errors)}class Qr{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!Tn(e.expression)}evaluateWithoutErrorHandling(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)}evaluate(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)}}class ti{constructor(t,e,n,r){this.kind=t,this.zoomStops=n,this._styleExpression=e,this.isStateDependent="camera"!==t&&!Tn(e.expression),this.interpolationType=r}evaluateWithoutErrorHandling(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)}evaluate(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)}interpolationFactor(t,e,n){return this.interpolationType?nr.interpolationFactor(this.interpolationType,t,e,n):0}}function ei(t,e){if("error"===(t=Jr(t,e)).result)return t;const n=t.value.expression,r=En(n);if(!r&&!zr(e))return jr([new ae("","data expressions not supported")]);const i=Sn(n,["zoom","pitch","distance-from-center"]);if(!i&&!Br(e))return jr([new ae("","zoom expressions not supported")]);const o=ri(n);return o||i?o instanceof ae?jr([o]):o instanceof nr&&!Fr(e)?jr([new ae("",'"interpolate" expressions cannot be used with this property')]):Nr(o?new ti(r?"camera":"composite",t.value,o.labels,o instanceof nr?o.interpolation:void 0):new Qr(r?"constant":"source",t.value)):jr([new ae("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ni{constructor(t,e){this._parameters=t,this._specification=e,re(this,Wr(this._parameters,this._specification))}static deserialize(t){return new ni(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function ri(t){let e=null;if(t instanceof sr)e=ri(t.result);else if(t instanceof ir){for(const n of t.args)if(e=ri(n),e)break}else(t instanceof Ln||t instanceof nr)&&t.input instanceof nn&&"zoom"===t.input.name&&(e=t);return e instanceof ae||t.eachChild((t=>{const n=ri(t);n instanceof ae?e=n:!e&&n?e=new ae("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&n&&e!==n&&(e=new ae("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}class ii{constructor(t,e,n,r){this.message=(t?`${t}: `:"")+n,r&&(this.identifier=r),null!=e&&e.__line__&&(this.line=e.__line__)}}function oi(t){const e=t.key,n=t.value,r=t.valueSpec||{},i=t.objectElementValidators||{},o=t.style,s=t.styleSpec;let a=[];const c=Ur(n);if("object"!==c)return[new ii(e,n,`object expected, ${c} found`)];for(const t in n){const c=t.split(".")[0];let l;i[c]?l=i[c]:r[c]?l=Bi:i["*"]?l=i["*"]:r["*"]&&(l=Bi),l?a=a.concat(l({key:(e?`${e}.`:e)+t,value:n[t],valueSpec:r[c]||r["*"],style:o,styleSpec:s,object:n,objectKey:t},n)):a.push(new ii(e,n[t],`unknown property "${t}"`))}for(const t in r)i[t]||r[t].required&&void 0===r[t].default&&void 0===n[t]&&a.push(new ii(e,n,`missing required property "${t}"`));return a}function si(t){const e=t.value,n=t.valueSpec,r=t.style,i=t.styleSpec,o=t.key,s=t.arrayElementValidator||Bi;if("array"!==Ur(e))return[new ii(o,e,`array expected, ${Ur(e)} found`)];if(n.length&&e.length!==n.length)return[new ii(o,e,`array length ${n.length} expected, length ${e.length} found`)];if(n["min-length"]&&e.length<n["min-length"])return[new ii(o,e,`array length at least ${n["min-length"]} expected, length ${e.length} found`)];let a={type:n.value,values:n.values,minimum:n.minimum,maximum:n.maximum,function:void 0};i.$version<7&&(a.function=n.function),"object"===Ur(n.value)&&(a=n.value);let c=[];for(let t=0;t<e.length;t++)c=c.concat(s({array:e,arrayIndex:t,value:e[t],valueSpec:a,style:r,styleSpec:i,key:`${o}[${t}]`}));return c}function ai(t){const e=t.key,n=t.value,r=t.valueSpec;let i=Ur(n);if("number"===i&&n!=n&&(i="NaN"),"number"!==i)return[new ii(e,n,`number expected, ${i} found`)];if("minimum"in r){let i=r.minimum;if("array"===Ur(r.minimum)&&(i=r.minimum[t.arrayIndex]),n<i)return[new ii(e,n,`${n} is less than the minimum value ${i}`)]}if("maximum"in r){let i=r.maximum;if("array"===Ur(r.maximum)&&(i=r.maximum[t.arrayIndex]),n>i)return[new ii(e,n,`${n} is greater than the maximum value ${i}`)]}return[]}function ci(t){const e=t.valueSpec,n=ie(t.value.type);let r,i,o,s={};const a="categorical"!==n&&void 0===t.value.property,c=!a,l="array"===Ur(t.value.stops)&&"array"===Ur(t.value.stops[0])&&"object"===Ur(t.value.stops[0][0]),u=oi({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===n)return[new ii(t.key,t.value,'identity function may not have a "stops" property')];let e=[];const r=t.value;return e=e.concat(si({key:t.key,value:r,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),"array"===Ur(r)&&0===r.length&&e.push(new ii(t.key,r,"array must have at least one stop")),e},default:function(t){return Bi({key:t.key,value:t.value,valueSpec:e,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===n&&a&&u.push(new ii(t.key,t.value,'missing required property "property"')),"identity"===n||t.value.stops||u.push(new ii(t.key,t.value,'missing required property "stops"')),"exponential"===n&&t.valueSpec.expression&&!Fr(t.valueSpec)&&u.push(new ii(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(c&&!zr(t.valueSpec)?u.push(new ii(t.key,t.value,"property functions not supported")):a&&!Br(t.valueSpec)&&u.push(new ii(t.key,t.value,"zoom functions not supported"))),"categorical"!==n&&!l||void 0!==t.value.property||u.push(new ii(t.key,t.value,'"property" property is required')),u;function h(t){let n=[];const r=t.value,a=t.key;if("array"!==Ur(r))return[new ii(a,r,`array expected, ${Ur(r)} found`)];if(2!==r.length)return[new ii(a,r,`array length 2 expected, length ${r.length} found`)];if(l){if("object"!==Ur(r[0]))return[new ii(a,r,`object expected, ${Ur(r[0])} found`)];if(void 0===r[0].zoom)return[new ii(a,r,"object stop key must have zoom")];if(void 0===r[0].value)return[new ii(a,r,"object stop key must have value")];const e=ie(r[0].zoom);if("number"!=typeof e)return[new ii(a,r[0].zoom,"stop zoom values must be numbers")];if(o&&o>e)return[new ii(a,r[0].zoom,"stop zoom values must appear in ascending order")];e!==o&&(o=e,i=void 0,s={}),n=n.concat(oi({key:`${a}[0]`,value:r[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:ai,value:p}}))}else n=n.concat(p({key:`${a}[0]`,value:r[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},r));return Kr(oe(r[1]))?n.concat([new ii(`${a}[1]`,r[1],"expressions are not allowed in function stops.")]):n.concat(Bi({key:`${a}[1]`,value:r[1],valueSpec:e,style:t.style,styleSpec:t.styleSpec}))}function p(t,o){const a=Ur(t.value),c=ie(t.value),l=null!==t.value?t.value:o;if(r){if(a!==r)return[new ii(t.key,l,`${a} stop domain type must match previous stop domain type ${r}`)]}else r=a;if("number"!==a&&"string"!==a&&"boolean"!==a&&"number"!=typeof c&&"string"!=typeof c&&"boolean"!=typeof c)return[new ii(t.key,l,"stop domain value must be a number, string, or boolean")];if("number"!==a&&"categorical"!==n){let r=`number expected, ${a} found`;return zr(e)&&void 0===n&&(r+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ii(t.key,l,r)]}return"categorical"!==n||"number"!==a||"number"==typeof c&&isFinite(c)&&Math.floor(c)===c?"categorical"!==n&&"number"===a&&"number"==typeof c&&"number"==typeof i&&void 0!==i&&c<i?[new ii(t.key,l,"stop domain values must appear in ascending order")]:(i=c,"categorical"===n&&c in s?[new ii(t.key,l,"stop domain values must be unique")]:(s[c]=!0,[])):[new ii(t.key,l,`integer expected, found ${String(c)}`)]}}function li(t){const e=("property"===t.expressionContext?ei:Jr)(oe(t.value),t.valueSpec);if("error"===e.result)return e.value.map((e=>new ii(`${t.key}${e.key}`,t.value,e.message)));const n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!n.outputDefined())return[new ii(t.key,t.value,`Invalid data expression for "${t.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===t.expressionContext&&"layout"===t.propertyType&&!Tn(n))return[new ii(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext)return ui(n,t);if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!Sn(n,["zoom","feature-state"]))return[new ii(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!En(n))return[new ii(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ui(t,e){const n=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(e.valueSpec&&e.valueSpec.expression)for(const t of e.valueSpec.expression.parameters)n.delete(t);if(0===n.size)return[];const r=[];return t instanceof nn&&n.has(t.name)?[new ii(e.key,e.value,`["${t.name}"] expression is not supported in a filter for a ${e.object.type} layer with id: ${e.object.id}`)]:(t.eachChild((t=>{r.push(...ui(t,e))})),r)}function hi(t){const e=t.key,n=t.value,r=t.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(ie(n))&&i.push(new ii(e,n,`expected one of [${r.values.join(", ")}], ${JSON.stringify(n)} found`)):-1===Object.keys(r.values).indexOf(ie(n))&&i.push(new ii(e,n,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(n)} found`)),i}function pi(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!pi(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}function fi(t,e="fill"){if(null==t)return{filter:()=>!0,needGeometry:!1,needFeature:!1};pi(t)||(t=xi(t));const n=t;let r=!0;try{r=function(t){if(!mi(t))return t;let e=oe(t);return gi(e),e=di(e),e}(n)}catch(t){i.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(n,null,2)}\n        `)}const o=ne[`filter_${e}`],s=Jr(r,o);let a=null;if("error"===s.result)throw new Error(s.value.map((t=>`${t.key}: ${t.message}`)).join(", "));a=(t,e,n)=>s.value.evaluate(t,e,{},n);let c=null,l=null;if(r!==n){const t=Jr(n,o);if("error"===t.result)throw new Error(t.value.map((t=>`${t.key}: ${t.message}`)).join(", "));c=(e,n,r,i,o)=>t.value.evaluate(e,n,{},r,void 0,void 0,i,o),l=!En(t.value.expression)}return{filter:a,dynamicFilter:c||void 0,needGeometry:vi(r),needFeature:!!l}}function di(t){if(!Array.isArray(t))return t;const e=function(t){if(yi.has(t[0]))for(let e=1;e<t.length;e++)if(mi(t[e]))return!0;return t}(t);return!0===e?e:e.map((t=>di(t)))}function gi(t){let e=!1;const n=[];if("case"===t[0]){for(let r=1;r<t.length-1;r+=2)e=e||mi(t[r]),n.push(t[r+1]);n.push(t[t.length-1])}else if("match"===t[0]){e=e||mi(t[1]);for(let e=2;e<t.length-1;e+=2)n.push(t[e+1]);n.push(t[t.length-1])}else if("step"===t[0]){e=e||mi(t[1]);for(let e=1;e<t.length-1;e+=2)n.push(t[e+1])}e&&(t.length=0,t.push("any",...n));for(let e=1;e<t.length;e++)gi(t[e])}function mi(t){if(!Array.isArray(t))return!1;if("pitch"===(e=t[0])||"distance-from-center"===e)return!0;var e;for(let e=1;e<t.length;e++)if(mi(t[e]))return!0;return!1}const yi=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function _i(t,e){return t<e?-1:t>e?1:0}function vi(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(let e=1;e<t.length;e++)if(vi(t[e]))return!0;return!1}function xi(t){if(!t)return!0;const e=t[0];return t.length<=1?"any"!==e:"=="===e?bi(t[1],t[2],"=="):"!="===e?Ti(bi(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?bi(t[1],t[2],e):"any"===e?(n=t.slice(1),["any"].concat(n.map(xi))):"all"===e?["all"].concat(t.slice(1).map(xi)):"none"===e?["all"].concat(t.slice(1).map(xi).map(Ti)):"in"===e?wi(t[1],t.slice(2)):"!in"===e?Ti(wi(t[1],t.slice(2))):"has"===e?Ei(t[1]):"!has"===e?Ti(Ei(t[1])):"within"!==e||t;var n}function bi(t,e,n){switch(t){case"$type":return[`filter-type-${n}`,e];case"$id":return[`filter-id-${n}`,e];default:return[`filter-${n}`,t,e]}}function wi(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((t=>typeof t!=typeof e[0]))?["filter-in-large",t,["literal",e.sort(_i)]]:["filter-in-small",t,["literal",e]]}}function Ei(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Ti(t){return["!",t]}function Si(t){return pi(oe(t.value))?li(re({},t,{expressionContext:"filter",valueSpec:t.styleSpec[`filter_${t.layerType||"fill"}`]})):ki(t)}function ki(t){const e=t.value,n=t.key;if("array"!==Ur(e))return[new ii(n,e,`array expected, ${Ur(e)} found`)];const r=t.styleSpec;let i,o=[];if(e.length<1)return[new ii(n,e,"filter array must have at least 1 element")];switch(o=o.concat(hi({key:`${n}[0]`,value:e[0],valueSpec:r.filter_operator,style:t.style,styleSpec:t.styleSpec})),ie(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===ie(e[1])&&o.push(new ii(n,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":3!==e.length&&o.push(new ii(n,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(i=Ur(e[1]),"string"!==i&&o.push(new ii(`${n}[1]`,e[1],`string expected, ${i} found`)));for(let s=2;s<e.length;s++)i=Ur(e[s]),"$type"===ie(e[1])?o=o.concat(hi({key:`${n}[${s}]`,value:e[s],valueSpec:r.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&o.push(new ii(`${n}[${s}]`,e[s],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let r=1;r<e.length;r++)o=o.concat(ki({key:`${n}[${r}]`,value:e[r],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":i=Ur(e[1]),2!==e.length?o.push(new ii(n,e,`filter array for "${e[0]}" operator must have 2 elements`)):"string"!==i&&o.push(new ii(`${n}[1]`,e[1],`string expected, ${i} found`));break;case"within":i=Ur(e[1]),2!==e.length?o.push(new ii(n,e,`filter array for "${e[0]}" operator must have 2 elements`)):"object"!==i&&o.push(new ii(`${n}[1]`,e[1],`object expected, ${i} found`))}return o}function Ai(t,e){const n=t.key,r=t.style,i=t.styleSpec,o=t.value,s=t.objectKey,a=i[`${e}_${t.layerType}`];if(!a)return[];const c=s.match(/^(.*)-transition$/);if("paint"===e&&c&&a[c[1]]&&a[c[1]].transition)return Bi({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});const l=t.valueSpec||a[s];if(!l)return[new ii(n,o,`unknown property "${s}"`)];let u;if("string"===Ur(o)&&zr(l)&&!l.tokens&&(u=/^{([^}]+)}$/.exec(o))){const t=`\`{ "type": "identity", "property": ${u?JSON.stringify(u[1]):'"_"'} }\``;return[new ii(n,o,`"${s}" does not support interpolation syntax\nUse an identity property function instead: ${t}.`)]}const h=[];return"symbol"===t.layerType&&("text-field"===s&&r&&!r.glyphs&&h.push(new ii(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===s&&Vr(oe(o))&&"identity"===ie(o.type)&&h.push(new ii(n,o,'"text-font" does not support identity functions'))),h.concat(Bi({key:t.key,value:o,valueSpec:l,style:r,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:s}))}function Mi(t){return Ai(t,"paint")}function Ii(t){return Ai(t,"layout")}function Ci(t){let e=[];const n=t.value,r=t.key,i=t.style,o=t.styleSpec;n.type||n.ref||e.push(new ii(r,n,'either "type" or "ref" is required'));let s=ie(n.type);const a=ie(n.ref);if(n.id){const o=ie(n.id);for(let s=0;s<t.arrayIndex;s++){const t=i.layers[s];ie(t.id)===o&&e.push(new ii(r,n.id,`duplicate layer id "${n.id}", previously used at line ${t.id.__line__}`))}}if("ref"in n){let t;["type","source","source-layer","filter","layout"].forEach((t=>{t in n&&e.push(new ii(r,n[t],`"${t}" is prohibited for ref layers`))})),i.layers.forEach((e=>{ie(e.id)===a&&(t=e)})),t?t.ref?e.push(new ii(r,n.ref,"ref cannot reference another ref layer")):s=ie(t.type):"string"==typeof a&&e.push(new ii(r,n.ref,`ref layer "${a}" not found`))}else if("background"!==s&&"sky"!==s)if(n.source){const t=i.sources&&i.sources[n.source],o=t&&ie(t.type);t?"vector"===o&&"raster"===s?e.push(new ii(r,n.source,`layer "${n.id}" requires a raster source`)):"raster"===o&&"raster"!==s?e.push(new ii(r,n.source,`layer "${n.id}" requires a vector source`)):"vector"!==o||n["source-layer"]?"raster-dem"===o&&"hillshade"!==s?e.push(new ii(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]&&!n.paint["line-trim-offset"]||"geojson"===o&&t.lineMetrics||e.push(new ii(r,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new ii(r,n,`layer "${n.id}" must specify a "source-layer"`)):e.push(new ii(r,n.source,`source "${n.source}" not found`))}else e.push(new ii(r,n,'missing required property "source"'));return e=e.concat(oi({key:r,value:n,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Bi({key:`${r}.type`,value:n.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"}),filter:t=>Si(re({layerType:s},t)),layout:t=>oi({layer:n,key:t.key,value:t.value,valueSpec:{},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>Ii(re({layerType:s},t))}}),paint:t=>oi({layer:n,key:t.key,value:t.value,valueSpec:{},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>Mi(re({layerType:s},t))}})}})),e}function Oi(t){const e=t.value,n=t.key,r=Ur(e);return"string"!==r?[new ii(n,e,`string expected, ${r} found`)]:[]}const Pi={promoteId:function({key:t,value:e}){if("string"===Ur(e))return Oi({key:t,value:e});{const n=[];for(const r in e)n.push(...Oi({key:`${t}.${r}`,value:e[r]}));return n}}};function Li(t){const e=t.value,n=t.key,r=t.styleSpec,i=t.style;if(!e.type)return[new ii(n,e,'"type" is required')];const o=ie(e.type);let s;switch(o){case"vector":case"raster":case"raster-dem":return s=oi({key:n,value:e,valueSpec:r[`source_${o.replace("-","_")}`],style:t.style,styleSpec:r,objectElementValidators:Pi}),s;case"geojson":if(s=oi({key:n,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:Pi}),e.cluster)for(const t in e.clusterProperties){const[r,i]=e.clusterProperties[t],o="string"==typeof r?[r,["accumulated"],["get",t]]:r;s.push(...li({key:`${n}.${t}.map`,value:i,expressionContext:"cluster-map"})),s.push(...li({key:`${n}.${t}.reduce`,value:o,expressionContext:"cluster-reduce"}))}return s;case"video":return oi({key:n,value:e,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return oi({key:n,value:e,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new ii(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return hi({key:`${n}.type`,value:e.type,valueSpec:{values:Di(r)},style:i,styleSpec:r})}}function Di(t){return t.source.reduce(((e,n)=>{const r=t[n];return"enum"===r.type.type&&(e=e.concat(Object.keys(r.type.values))),e}),[])}function Ri(t){const e=t.value,n=t.styleSpec,r=n.light,i=t.style;let o=[];const s=Ur(e);if(void 0===e)return o;if("object"!==s)return o=o.concat([new ii("light",e,`object expected, ${s} found`)]),o;for(const t in e){const s=t.match(/^(.*)-transition$/);o=o.concat(s&&r[s[1]]&&r[s[1]].transition?Bi({key:t,value:e[t],valueSpec:n.transition,style:i,styleSpec:n}):r[t]?Bi({key:t,value:e[t],valueSpec:r[t],style:i,styleSpec:n}):[new ii(t,e[t],`unknown property "${t}"`)])}return o}function Ni(t){const e=t.value,n=t.key,r=t.style,i=t.styleSpec,o=i.terrain;let s=[];const a=Ur(e);if(void 0===e)return s;if("object"!==a)return s=s.concat([new ii("terrain",e,`object expected, ${a} found`)]),s;for(const t in e){const n=t.match(/^(.*)-transition$/);s=s.concat(n&&o[n[1]]&&o[n[1]].transition?Bi({key:t,value:e[t],valueSpec:i.transition,style:r,styleSpec:i}):o[t]?Bi({key:t,value:e[t],valueSpec:o[t],style:r,styleSpec:i}):[new ii(t,e[t],`unknown property "${t}"`)])}if(e.source){const t=r.sources&&r.sources[e.source],i=t&&ie(t.type);t?"raster-dem"!==i&&s.push(new ii(n,e.source,`terrain cannot be used with a source of type ${String(i)}, it only be used with a "raster-dem" source type`)):s.push(new ii(n,e.source,`source "${e.source}" not found`))}else s.push(new ii(n,e,'terrain is missing required property "source"'));return s}function ji(t){const e=t.value,n=t.style,r=t.styleSpec,i=r.fog;let o=[];const s=Ur(e);if(void 0===e)return o;if("object"!==s)return o=o.concat([new ii("fog",e,`object expected, ${s} found`)]),o;for(const t in e){const s=t.match(/^(.*)-transition$/);o=o.concat(s&&i[s[1]]&&i[s[1]].transition?Bi({key:t,value:e[t],valueSpec:r.transition,style:n,styleSpec:r}):i[t]?Bi({key:t,value:e[t],valueSpec:i[t],style:n,styleSpec:r}):[new ii(t,e[t],`unknown property "${t}"`)])}return o}const zi={"*":()=>[],array:si,boolean:function(t){const e=t.value,n=t.key,r=Ur(e);return"boolean"!==r?[new ii(n,e,`boolean expected, ${r} found`)]:[]},number:ai,color:function(t){const e=t.key,n=t.value,r=Ur(n);return"string"!==r?[new ii(e,n,`color expected, ${r} found`)]:null===ke(n)?[new ii(e,n,`color expected, "${n}" found`)]:[]},enum:hi,filter:Si,function:ci,layer:Ci,object:oi,source:Li,light:Ri,terrain:Ni,fog:ji,string:Oi,formatted:function(t){return 0===Oi(t).length?[]:li(t)},resolvedImage:function(t){return 0===Oi(t).length?[]:li(t)},projection:function(t){const e=t.value,n=t.styleSpec,r=n.projection,i=t.style;let o=[];const s=Ur(e);if("object"===s)for(const t in e)o=o.concat(Bi({key:t,value:e[t],valueSpec:r[t],style:i,styleSpec:n}));else"string"!==s&&(o=o.concat([new ii("projection",e,`object or string expected, ${s} found`)]));return o}};function Bi(t){const e=t.value,n=t.valueSpec,r=t.styleSpec;return n.expression&&Vr(ie(e))?ci(t):n.expression&&Kr(oe(e))?li(t):n.type&&zi[n.type]?zi[n.type](t):oi(re({},t,{valueSpec:n.type?r[n.type]:n}))}function Fi(t){const e=t.value,n=t.key,r=Oi(t);return r.length||(-1===e.indexOf("{fontstack}")&&r.push(new ii(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new ii(n,e,'"glyphs" url must include a "{range}" token'))),r}function Ui(t,e=ne){return Wi(Bi({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Fi,"*":()=>[]}}))}const Vi=t=>Wi(Mi(t)),qi=t=>Wi(Ii(t));function Wi(t){return t.slice().sort(((t,e)=>t.line&&e.line?t.line-e.line:0))}function Gi(t,e){let n=!1;if(e&&e.length)for(const r of e)t.fire(new te(new Error(r.message))),n=!0;return n}var $i=Zi,Hi=3;function Zi(t,e,n){var r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=new Int32Array(this.arrayBuffer);t=i[0],this.d=(e=i[1])+2*(n=i[2]);for(var o=0;o<this.d*this.d;o++){var s=i[Hi+o],a=i[Hi+o+1];r.push(s===a?null:i.subarray(s,a))}var c=i[Hi+r.length+1];this.keys=i.subarray(i[Hi+r.length],c),this.bboxes=i.subarray(c),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var l=0;l<this.d*this.d;l++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var u=n/e*t;this.min=-u,this.max=t+u}Zi.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Zi.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Zi.prototype._insertCell=function(t,e,n,r,i,o){this.cells[i].push(o)},Zi.prototype.query=function(t,e,n,r,i){var o=this.min,s=this.max;if(t<=o&&e<=o&&s<=n&&s<=r&&!i)return Array.prototype.slice.call(this.keys);var a=[];return this._forEachCell(t,e,n,r,this._queryCell,a,{},i),a},Zi.prototype._queryCell=function(t,e,n,r,i,o,s,a){var c=this.cells[i];if(null!==c)for(var l=this.keys,u=this.bboxes,h=0;h<c.length;h++){var p=c[h];if(void 0===s[p]){var f=4*p;(a?a(u[f+0],u[f+1],u[f+2],u[f+3]):t<=u[f+2]&&e<=u[f+3]&&n>=u[f+0]&&r>=u[f+1])?(s[p]=!0,o.push(l[p])):s[p]=!1}}},Zi.prototype._forEachCell=function(t,e,n,r,i,o,s,a){for(var c=this._convertToCellCoord(t),l=this._convertToCellCoord(e),u=this._convertToCellCoord(n),h=this._convertToCellCoord(r),p=c;p<=u;p++)for(var f=l;f<=h;f++){var d=this.d*f+p;if((!a||a(this._convertFromCellCoord(p),this._convertFromCellCoord(f),this._convertFromCellCoord(p+1),this._convertFromCellCoord(f+1)))&&i.call(this,t,e,n,r,d,o,s,a))return}},Zi.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},Zi.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Zi.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=Hi+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(e+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=e,s=0;s<t.length;s++){var a=t[s];i[Hi+s]=o,i.set(a,o),o+=a.length}return i[Hi+t.length]=o,i.set(this.keys,o),i[Hi+t.length+1]=o+=this.keys.length,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};var Yi=d($i);const Xi={};function Ki(t,e,n={}){Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Xi[e]={klass:t,omit:n.omit||[]}}Ki(Object,"Object"),Yi.serialize=function(t,e){const n=t.toArrayBuffer();return e&&e.push(n),{buffer:n}},Yi.deserialize=function(t){return new Yi(t.buffer)},Object.defineProperty(Yi,"name",{value:"Grid"}),Ki(Yi,"Grid"),Ki(Le,"Color"),Ki(Error,"Error"),Ki(ht,"AJAXError"),Ki(je,"ResolvedImage"),Ki(ni,"StylePropertyFunction"),Ki(Xr,"StyleExpression",{omit:["_evaluator"]}),Ki(ti,"ZoomDependentExpression"),Ki(Qr,"ZoomConstantExpression"),Ki(nn,"CompoundExpression",{omit:["_evaluate"]});for(const t in Rr)Xi[Rr[t]._classRegistryKey]||Ki(Rr[t],`Expression${t}`);function Ji(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Qi(t){return e.ImageBitmap&&t instanceof e.ImageBitmap}function to(t,n){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(Ji(t)||Qi(t))return n&&n.push(t),t;if(ArrayBuffer.isView(t)){const e=t;return n&&n.push(e.buffer),e}if(t instanceof e.ImageData)return n&&n.push(t.data.buffer),t;if(Array.isArray(t)){const e=[];for(const r of t)e.push(to(r,n));return e}if("object"==typeof t){const e=t.constructor,r=e._classRegistryKey;if(!r)throw new Error(`can't serialize object of unregistered class ${r}`);const i=e.serialize?e.serialize(t,n):{};if(!e.serialize){for(const e in t)t.hasOwnProperty(e)&&(Xi[r].omit.indexOf(e)>=0||(i[e]=to(t[e],n)));t instanceof Error&&(i.message=t.message)}if(i.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==r&&(i.$name=r),i}throw new Error("can't serialize object of type "+typeof t)}function eo(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||Ji(t)||Qi(t)||ArrayBuffer.isView(t)||t instanceof e.ImageData)return t;if(Array.isArray(t))return t.map(eo);if("object"==typeof t){const e=t.$name||"Object",{klass:n}=Xi[e];if(!n)throw new Error(`can't deserialize unregistered class ${e}`);if(n.deserialize)return n.deserialize(t);const r=Object.create(n.prototype);for(const e of Object.keys(t))"$name"!==e&&(r[e]=eo(t[e]));return r}throw new Error("can't deserialize object of type "+typeof t)}const no={"Latin-1 Supplement":t=>t>=128&&t<=255,Arabic:t=>t>=1536&&t<=1791,"Arabic Supplement":t=>t>=1872&&t<=1919,"Arabic Extended-A":t=>t>=2208&&t<=2303,"Hangul Jamo":t=>t>=4352&&t<=4607,"Unified Canadian Aboriginal Syllabics":t=>t>=5120&&t<=5759,Khmer:t=>t>=6016&&t<=6143,"Unified Canadian Aboriginal Syllabics Extended":t=>t>=6320&&t<=6399,"General Punctuation":t=>t>=8192&&t<=8303,"Letterlike Symbols":t=>t>=8448&&t<=8527,"Number Forms":t=>t>=8528&&t<=8591,"Miscellaneous Technical":t=>t>=8960&&t<=9215,"Control Pictures":t=>t>=9216&&t<=9279,"Optical Character Recognition":t=>t>=9280&&t<=9311,"Enclosed Alphanumerics":t=>t>=9312&&t<=9471,"Geometric Shapes":t=>t>=9632&&t<=9727,"Miscellaneous Symbols":t=>t>=9728&&t<=9983,"Miscellaneous Symbols and Arrows":t=>t>=11008&&t<=11263,"CJK Radicals Supplement":t=>t>=11904&&t<=12031,"Kangxi Radicals":t=>t>=12032&&t<=12255,"Ideographic Description Characters":t=>t>=12272&&t<=12287,"CJK Symbols and Punctuation":t=>t>=12288&&t<=12351,Hiragana:t=>t>=12352&&t<=12447,Katakana:t=>t>=12448&&t<=12543,Bopomofo:t=>t>=12544&&t<=12591,"Hangul Compatibility Jamo":t=>t>=12592&&t<=12687,Kanbun:t=>t>=12688&&t<=12703,"Bopomofo Extended":t=>t>=12704&&t<=12735,"CJK Strokes":t=>t>=12736&&t<=12783,"Katakana Phonetic Extensions":t=>t>=12784&&t<=12799,"Enclosed CJK Letters and Months":t=>t>=12800&&t<=13055,"CJK Compatibility":t=>t>=13056&&t<=13311,"CJK Unified Ideographs Extension A":t=>t>=13312&&t<=19903,"Yijing Hexagram Symbols":t=>t>=19904&&t<=19967,"CJK Unified Ideographs":t=>t>=19968&&t<=40959,"Yi Syllables":t=>t>=40960&&t<=42127,"Yi Radicals":t=>t>=42128&&t<=42191,"Hangul Jamo Extended-A":t=>t>=43360&&t<=43391,"Hangul Syllables":t=>t>=44032&&t<=55215,"Hangul Jamo Extended-B":t=>t>=55216&&t<=55295,"Private Use Area":t=>t>=57344&&t<=63743,"CJK Compatibility Ideographs":t=>t>=63744&&t<=64255,"Arabic Presentation Forms-A":t=>t>=64336&&t<=65023,"Vertical Forms":t=>t>=65040&&t<=65055,"CJK Compatibility Forms":t=>t>=65072&&t<=65103,"Small Form Variants":t=>t>=65104&&t<=65135,"Arabic Presentation Forms-B":t=>t>=65136&&t<=65279,"Halfwidth and Fullwidth Forms":t=>t>=65280&&t<=65519};function ro(t){for(const e of t)if(so(e.charCodeAt(0)))return!0;return!1}function io(t){for(const e of t)if(!oo(e.charCodeAt(0)))return!1;return!0}function oo(t){return!(no.Arabic(t)||no["Arabic Supplement"](t)||no["Arabic Extended-A"](t)||no["Arabic Presentation Forms-A"](t)||no["Arabic Presentation Forms-B"](t))}function so(t){return!(746!==t&&747!==t&&(t<4352||!(no["Bopomofo Extended"](t)||no.Bopomofo(t)||no["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||no["CJK Compatibility Ideographs"](t)||no["CJK Compatibility"](t)||no["CJK Radicals Supplement"](t)||no["CJK Strokes"](t)||!(!no["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||no["CJK Unified Ideographs Extension A"](t)||no["CJK Unified Ideographs"](t)||no["Enclosed CJK Letters and Months"](t)||no["Hangul Compatibility Jamo"](t)||no["Hangul Jamo Extended-A"](t)||no["Hangul Jamo Extended-B"](t)||no["Hangul Jamo"](t)||no["Hangul Syllables"](t)||no.Hiragana(t)||no["Ideographic Description Characters"](t)||no.Kanbun(t)||no["Kangxi Radicals"](t)||no["Katakana Phonetic Extensions"](t)||no.Katakana(t)&&12540!==t||!(!no["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!no["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||no["Unified Canadian Aboriginal Syllabics"](t)||no["Unified Canadian Aboriginal Syllabics Extended"](t)||no["Vertical Forms"](t)||no["Yijing Hexagram Symbols"](t)||no["Yi Syllables"](t)||no["Yi Radicals"](t))))}function ao(t){return!(so(t)||function(t){return!!(no["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||no["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||no["Letterlike Symbols"](t)||no["Number Forms"](t)||no["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||no["Control Pictures"](t)&&9251!==t||no["Optical Character Recognition"](t)||no["Enclosed Alphanumerics"](t)||no["Geometric Shapes"](t)||no["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||no["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||no["CJK Symbols and Punctuation"](t)||no.Katakana(t)||no["Private Use Area"](t)||no["CJK Compatibility Forms"](t)||no["Small Form Variants"](t)||no["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function co(t){return t>=1424&&t<=2303||no["Arabic Presentation Forms-A"](t)||no["Arabic Presentation Forms-B"](t)}function lo(t,e){return!(!e&&co(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||no.Khmer(t))}function uo(t){for(const e of t)if(co(e.charCodeAt(0)))return!0;return!1}const ho="deferred",po="loading",fo="loaded";let go=null,mo="unavailable",yo=null;const _o=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(mo="error"),go&&go(t)};function vo(){xo.fire(new Qt("pluginStateChange",{pluginStatus:mo,pluginURL:yo}))}const xo=new ee,bo=function(){return mo},wo=function(){if(mo!==ho||!yo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");mo=po,vo(),yo&&dt({url:yo},(t=>{t?_o(t):(mo=fo,vo())}))},Eo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>mo===fo||null!=Eo.applyArabicShaping,isLoading:()=>mo===po,setState(t){mo=t.pluginStatus,yo=t.pluginURL},isParsed:()=>null!=Eo.applyArabicShaping&&null!=Eo.processBidirectionalText&&null!=Eo.processStyledBidirectionalText,getPluginURL:()=>yo};class To{constructor(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.transition=e.transition,this.pitch=e.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(t){return function(t,e){for(const n of t)if(!lo(n.charCodeAt(0),e))return!1;return!0}(t,Eo.isLoaded())}}class So{constructor(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(Vr(t))return new ni(t,e);if(Kr(t)){const n=ei(t,e);if("error"===n.result)throw new Error(n.value.map((t=>`${t.key}: ${t.message}`)).join(", "));return n.value}{let n=t;return"string"==typeof t&&"color"===e.type&&(n=Le.parse(t)),{kind:"constant",evaluate:()=>n}}}(void 0===e?t.specification.default:e,t.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(t,e,n){return this.property.possiblyEvaluate(this,t,e,n)}}class ko{constructor(t){this.property=t,this.value=new So(t,void 0)}transitioned(t,e){return new Mo(this.property,this.value,e,D({},t.transition,this.transition),t.now)}untransitioned(){return new Mo(this.property,this.value,null,{},0)}}class Ao{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return W(this._values[t].value.value)}setValue(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new ko(this._values[t].property)),this._values[t].value=new So(this._values[t].property,null===e?void 0:W(e))}getTransition(t){return W(this._values[t].transition)}setTransition(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new ko(this._values[t].property)),this._values[t].transition=W(e)||void 0}serialize(){const t={};for(const e of Object.keys(this._values)){const n=this.getValue(e);void 0!==n&&(t[e]=n);const r=this.getTransition(e);void 0!==r&&(t[`${e}-transition`]=r)}return t}transitioned(t,e){const n=new Io(this._properties);for(const r of Object.keys(this._values))n._values[r]=this._values[r].transitioned(t,e._values[r]);return n}untransitioned(){const t=new Io(this._properties);for(const e of Object.keys(this._values))t._values[e]=this._values[e].untransitioned();return t}}class Mo{constructor(t,e,n,r,i){const o=r.delay||0,s=r.duration||0;i=i||0,this.property=t,this.value=e,this.begin=i+o,this.end=this.begin+s,t.specification.transition&&(r.delay||r.duration)&&(this.prior=n)}possiblyEvaluate(t,e,n){const r=t.now||0,i=this.value.possiblyEvaluate(t,e,n),o=this.prior;if(o){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return o.possiblyEvaluate(t,e,n);{const s=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,n),i,k(s))}}return i}}class Io{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,e,n){const r=new Po(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(t,e,n);return r}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class Co{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return W(this._values[t].value)}setValue(t,e){this._values[t]=new So(this._values[t].property,null===e?void 0:W(e))}serialize(){const t={};for(const e of Object.keys(this._values)){const n=this.getValue(e);void 0!==n&&(t[e]=n)}return t}possiblyEvaluate(t,e,n){const r=new Po(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(t,e,n);return r}}class Oo{constructor(t,e,n){this.property=t,this.value=e,this.parameters=n}isConstant(){return"constant"===this.value.kind}constantOr(t){return"constant"===this.value.kind?this.value.value:t}evaluate(t,e,n,r){return this.property.evaluate(this.value,this.parameters,t,e,n,r)}}class Po{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class Lo{constructor(t){this.specification=t}possiblyEvaluate(t,e){return t.expression.evaluate(e)}interpolate(t,e,n){const r=Rn[this.specification.type];return r?r(t,e,n):t}}class Do{constructor(t,e){this.specification=t,this.overrides=e}possiblyEvaluate(t,e,n,r){return new Oo(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},n,r)}:t.expression,e)}interpolate(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new Oo(this,{kind:"constant",value:void 0},t.parameters);const r=Rn[this.specification.type];return r?new Oo(this,{kind:"constant",value:r(t.value.value,e.value.value,n)},t.parameters):t}evaluate(t,e,n,r,i,o){return"constant"===t.kind?t.value:t.evaluate(e,n,r,i,o)}}class Ro{constructor(t){this.specification=t}possiblyEvaluate(t,e,n,r){return!!t.expression.evaluate(e,null,{},n,r)}interpolate(){return!1}}class No{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const e=new To(0,{});for(const n in t){const r=t[n];r.specification.overridable&&this.overridableProperties.push(n);const i=this.defaultPropertyValues[n]=new So(r,void 0),o=this.defaultTransitionablePropertyValues[n]=new ko(r);this.defaultTransitioningPropertyValues[n]=o.untransitioned(),this.defaultPossiblyEvaluatedValues[n]=i.possiblyEvaluate(e)}}}function jo(t,e){return 256*(t=I(Math.floor(t),0,255))+I(Math.floor(e),0,255)}Ki(Do,"DataDrivenProperty"),Ki(Lo,"DataConstantProperty"),Ki(Ro,"ColorRampProperty");const zo={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Bo{constructor(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Fo{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Uo(t,e=1){let n=0,r=0;return{members:t.map((t=>{const i=zo[t.type].BYTES_PER_ELEMENT,o=n=Vo(n,Math.max(e,i)),s=t.components||1;return r=Math.max(r,i),n+=i*s,{name:t.name,type:t.type,components:s,offset:o}})),size:Vo(n,Math.max(r,e)),alignment:e}}function Vo(t,e){return Math.ceil(t/e)*e}class qo extends Fo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const r=2*t;return this.int16[r+0]=e,this.int16[r+1]=n,t}}qo.prototype.bytesPerElement=4,Ki(qo,"StructArrayLayout2i4");class Wo extends Fo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}emplace(t,e,n,r){const i=3*t;return this.int16[i+0]=e,this.int16[i+1]=n,this.int16[i+2]=r,t}}Wo.prototype.bytesPerElement=6,Ki(Wo,"StructArrayLayout3i6");class Go extends Fo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}emplace(t,e,n,r,i){const o=4*t;return this.int16[o+0]=e,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,t}}Go.prototype.bytesPerElement=8,Ki(Go,"StructArrayLayout4i8");class $o extends Fo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,s){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o,s)}emplace(t,e,n,r,i,o,s,a){const c=6*t,l=12*t,u=3*t;return this.int16[c+0]=e,this.int16[c+1]=n,this.uint8[l+4]=r,this.uint8[l+5]=i,this.uint8[l+6]=o,this.uint8[l+7]=s,this.float32[u+2]=a,t}}$o.prototype.bytesPerElement=12,Ki($o,"StructArrayLayout2i4ub1f12");class Ho extends Fo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}emplace(t,e,n,r,i){const o=4*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,t}}Ho.prototype.bytesPerElement=16,Ki(Ho,"StructArrayLayout4f16");class Zo extends Fo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,r,i)}emplace(t,e,n,r,i,o){const s=6*t,a=3*t;return this.uint16[s+0]=e,this.uint16[s+1]=n,this.uint16[s+2]=r,this.uint16[s+3]=i,this.float32[a+2]=o,t}}Zo.prototype.bytesPerElement=12,Ki(Zo,"StructArrayLayout4ui1f12");class Yo extends Fo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}emplace(t,e,n,r,i){const o=4*t;return this.uint16[o+0]=e,this.uint16[o+1]=n,this.uint16[o+2]=r,this.uint16[o+3]=i,t}}Yo.prototype.bytesPerElement=8,Ki(Yo,"StructArrayLayout4ui8");class Xo extends Fo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,n,r,i,o)}emplace(t,e,n,r,i,o,s){const a=6*t;return this.int16[a+0]=e,this.int16[a+1]=n,this.int16[a+2]=r,this.int16[a+3]=i,this.int16[a+4]=o,this.int16[a+5]=s,t}}Xo.prototype.bytesPerElement=12,Ki(Xo,"StructArrayLayout6i12");class Ko extends Fo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,s,a,c,l,u,h){const p=this.length;return this.resize(p+1),this.emplace(p,t,e,n,r,i,o,s,a,c,l,u,h)}emplace(t,e,n,r,i,o,s,a,c,l,u,h,p){const f=12*t;return this.int16[f+0]=e,this.int16[f+1]=n,this.int16[f+2]=r,this.int16[f+3]=i,this.uint16[f+4]=o,this.uint16[f+5]=s,this.uint16[f+6]=a,this.uint16[f+7]=c,this.int16[f+8]=l,this.int16[f+9]=u,this.int16[f+10]=h,this.int16[f+11]=p,t}}Ko.prototype.bytesPerElement=24,Ki(Ko,"StructArrayLayout4i4ui4i24");class Jo extends Fo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,n,r,i,o)}emplace(t,e,n,r,i,o,s){const a=10*t,c=5*t;return this.int16[a+0]=e,this.int16[a+1]=n,this.int16[a+2]=r,this.float32[c+2]=i,this.float32[c+3]=o,this.float32[c+4]=s,t}}Jo.prototype.bytesPerElement=20,Ki(Jo,"StructArrayLayout3i3f20");class Qo extends Fo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint32[1*t+0]=e,t}}Qo.prototype.bytesPerElement=4,Ki(Qo,"StructArrayLayout1ul4");class ts extends Fo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,s,a,c,l,u,h,p){const f=this.length;return this.resize(f+1),this.emplace(f,t,e,n,r,i,o,s,a,c,l,u,h,p)}emplace(t,e,n,r,i,o,s,a,c,l,u,h,p,f){const d=20*t,g=10*t;return this.int16[d+0]=e,this.int16[d+1]=n,this.int16[d+2]=r,this.int16[d+3]=i,this.int16[d+4]=o,this.float32[g+3]=s,this.float32[g+4]=a,this.float32[g+5]=c,this.float32[g+6]=l,this.int16[d+14]=u,this.uint32[g+8]=h,this.uint16[d+18]=p,this.uint16[d+19]=f,t}}ts.prototype.bytesPerElement=40,Ki(ts,"StructArrayLayout5i4f1i1ul2ui40");class es extends Fo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,s){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o,s)}emplace(t,e,n,r,i,o,s,a){const c=8*t;return this.int16[c+0]=e,this.int16[c+1]=n,this.int16[c+2]=r,this.int16[c+4]=i,this.int16[c+5]=o,this.int16[c+6]=s,this.int16[c+7]=a,t}}es.prototype.bytesPerElement=16,Ki(es,"StructArrayLayout3i2i2i16");class ns extends Fo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,r,i)}emplace(t,e,n,r,i,o){const s=4*t,a=8*t;return this.float32[s+0]=e,this.float32[s+1]=n,this.float32[s+2]=r,this.int16[a+6]=i,this.int16[a+7]=o,t}}ns.prototype.bytesPerElement=16,Ki(ns,"StructArrayLayout2f1f2i16");class rs extends Fo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}emplace(t,e,n,r,i){const o=12*t,s=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=n,this.float32[s+1]=r,this.float32[s+2]=i,t}}rs.prototype.bytesPerElement=12,Ki(rs,"StructArrayLayout2ub2f12");class is extends Fo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}emplace(t,e,n,r){const i=3*t;return this.float32[i+0]=e,this.float32[i+1]=n,this.float32[i+2]=r,t}}is.prototype.bytesPerElement=12,Ki(is,"StructArrayLayout3f12");class os extends Fo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}emplace(t,e,n,r){const i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,this.uint16[i+2]=r,t}}os.prototype.bytesPerElement=6,Ki(os,"StructArrayLayout3ui6");class ss extends Fo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,s,a,c,l,u,h,p,f,d,g,m,y,_,v,x){const b=this.length;return this.resize(b+1),this.emplace(b,t,e,n,r,i,o,s,a,c,l,u,h,p,f,d,g,m,y,_,v,x)}emplace(t,e,n,r,i,o,s,a,c,l,u,h,p,f,d,g,m,y,_,v,x,b){const w=30*t,E=15*t,T=60*t;return this.int16[w+0]=e,this.int16[w+1]=n,this.int16[w+2]=r,this.float32[E+2]=i,this.float32[E+3]=o,this.uint16[w+8]=s,this.uint16[w+9]=a,this.uint32[E+5]=c,this.uint32[E+6]=l,this.uint32[E+7]=u,this.uint16[w+16]=h,this.uint16[w+17]=p,this.uint16[w+18]=f,this.float32[E+10]=d,this.float32[E+11]=g,this.uint8[T+48]=m,this.uint8[T+49]=y,this.uint8[T+50]=_,this.uint32[E+13]=v,this.int16[w+28]=x,this.uint8[T+58]=b,t}}ss.prototype.bytesPerElement=60,Ki(ss,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class as extends Fo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,s,a,c,l,u,h,p,f,d,g,m,y,_,v,x,b,w,E,T,S,k,A,M,I){const C=this.length;return this.resize(C+1),this.emplace(C,t,e,n,r,i,o,s,a,c,l,u,h,p,f,d,g,m,y,_,v,x,b,w,E,T,S,k,A,M,I)}emplace(t,e,n,r,i,o,s,a,c,l,u,h,p,f,d,g,m,y,_,v,x,b,w,E,T,S,k,A,M,I,C){const O=38*t,P=19*t;return this.int16[O+0]=e,this.int16[O+1]=n,this.int16[O+2]=r,this.float32[P+2]=i,this.float32[P+3]=o,this.int16[O+8]=s,this.int16[O+9]=a,this.int16[O+10]=c,this.int16[O+11]=l,this.int16[O+12]=u,this.int16[O+13]=h,this.uint16[O+14]=p,this.uint16[O+15]=f,this.uint16[O+16]=d,this.uint16[O+17]=g,this.uint16[O+18]=m,this.uint16[O+19]=y,this.uint16[O+20]=_,this.uint16[O+21]=v,this.uint16[O+22]=x,this.uint16[O+23]=b,this.uint16[O+24]=w,this.uint16[O+25]=E,this.uint16[O+26]=T,this.uint16[O+27]=S,this.uint16[O+28]=k,this.uint32[P+15]=A,this.float32[P+16]=M,this.float32[P+17]=I,this.float32[P+18]=C,t}}as.prototype.bytesPerElement=76,Ki(as,"StructArrayLayout3i2f6i15ui1ul3f76");class cs extends Fo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.float32[1*t+0]=e,t}}cs.prototype.bytesPerElement=4,Ki(cs,"StructArrayLayout1f4");class ls extends Fo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,r,i)}emplace(t,e,n,r,i,o){const s=5*t;return this.float32[s+0]=e,this.float32[s+1]=n,this.float32[s+2]=r,this.float32[s+3]=i,this.float32[s+4]=o,t}}ls.prototype.bytesPerElement=20,Ki(ls,"StructArrayLayout5f20");class us extends Fo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}emplace(t,e,n,r,i){const o=6*t;return this.uint32[3*t+0]=e,this.uint16[o+2]=n,this.uint16[o+3]=r,this.uint16[o+4]=i,t}}us.prototype.bytesPerElement=12,Ki(us,"StructArrayLayout1ul3ui12");class hs extends Fo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const r=2*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,t}}hs.prototype.bytesPerElement=4,Ki(hs,"StructArrayLayout2ui4");class ps extends Fo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint16[1*t+0]=e,t}}ps.prototype.bytesPerElement=2,Ki(ps,"StructArrayLayout1ui2");class fs extends Fo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const r=2*t;return this.float32[r+0]=e,this.float32[r+1]=n,t}}fs.prototype.bytesPerElement=8,Ki(fs,"StructArrayLayout2f8");class ds extends Bo{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}ds.prototype.size=40;class gs extends ts{get(t){return new ds(this,t)}}Ki(gs,"CollisionBoxArray");class ms extends Bo{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(t){this._structArray.uint8[this._pos1+49]=t}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(t){this._structArray.uint8[this._pos1+50]=t}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(t){this._structArray.uint32[this._pos4+13]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(t){this._structArray.uint8[this._pos1+58]=t}}ms.prototype.size=60;class ys extends ss{get(t){return new ms(this,t)}}Ki(ys,"PlacedSymbolArray");class _s extends Bo{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(t){this._structArray.uint32[this._pos4+15]=t}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}_s.prototype.size=76;class vs extends as{get(t){return new _s(this,t)}}Ki(vs,"SymbolInstanceArray");class xs extends cs{getoffsetX(t){return this.float32[1*t+0]}}Ki(xs,"GlyphOffsetArray");class bs extends qo{getx(t){return this.int16[2*t+0]}gety(t){return this.int16[2*t+1]}}Ki(bs,"SymbolLineVertexArray");class ws extends Bo{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}ws.prototype.size=12;class Es extends us{get(t){return new ws(this,t)}}Ki(Es,"FeatureIndexArray");class Ts extends hs{geta_centroid_pos0(t){return this.uint16[2*t+0]}geta_centroid_pos1(t){return this.uint16[2*t+1]}}Ki(Ts,"FillExtrusionCentroidArray");const Ss=Uo([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),ks=Uo([{name:"a_dash",components:4,type:"Uint16"}]);var As={exports:{}},Ms={exports:function(t,e){var n,r,i,o,s,a,c,l;for(r=t.length-(n=3&t.length),i=e,s=3432918353,a=461845907,l=0;l<r;)c=255&t.charCodeAt(l)|(255&t.charCodeAt(++l))<<8|(255&t.charCodeAt(++l))<<16|(255&t.charCodeAt(++l))<<24,++l,i=27492+(65535&(o=5*(65535&(i=(i^=c=(65535&(c=(c=(65535&c)*s+(((c>>>16)*s&65535)<<16)&4294967295)<<15|c>>>17))*a+(((c>>>16)*a&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(c=0,n){case 3:c^=(255&t.charCodeAt(l+2))<<16;case 2:c^=(255&t.charCodeAt(l+1))<<8;case 1:i^=c=(65535&(c=(c=(65535&(c^=255&t.charCodeAt(l)))*s+(((c>>>16)*s&65535)<<16)&4294967295)<<15|c>>>17))*a+(((c>>>16)*a&65535)<<16)&4294967295}return i^=t.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}},Is={exports:function(t,e){for(var n,r=t.length,i=e^r,o=0;r>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:i^=(255&t.charCodeAt(o+2))<<16;case 2:i^=(255&t.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&t.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}},Cs=Ms.exports,Os=Is.exports;As.exports=Cs,As.exports.murmur3=Cs,As.exports.murmur2=Os;var Ps=d(As.exports);class Ls{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,e,n,r){this.ids.push(Ds(t)),this.positions.push(e,n,r)}getPositions(t){const e=Ds(t);let n=0,r=this.ids.length-1;for(;n<r;){const t=n+r>>1;this.ids[t]>=e?r=t:n=t+1}const i=[];for(;this.ids[n]===e;)i.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return i}static serialize(t,e){const n=new Float64Array(t.ids),r=new Uint32Array(t.positions);return Rs(n,r,0,n.length-1),e&&e.push(n.buffer,r.buffer),{ids:n,positions:r}}static deserialize(t){const e=new Ls;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e}}function Ds(t){const e=+t;return!isNaN(e)&&Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:Ps(String(t))}function Rs(t,e,n,r){for(;n<r;){const i=t[n+r>>1];let o=n-1,s=r+1;for(;;){do{o++}while(t[o]<i);do{s--}while(t[s]>i);if(o>=s)break;Ns(t,o,s),Ns(e,3*o,3*s),Ns(e,3*o+1,3*s+1),Ns(e,3*o+2,3*s+2)}s-n<r-s?(Rs(t,e,n,s),n=s+1):(Rs(t,e,s+1,r),r=s)}}function Ns(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}Ki(Ls,"FeaturePositionMap");class js{constructor(t){this.gl=t.gl,this.initialized=!1}fetchUniformLocation(t,e){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(t,e),this.initialized=!0),!!this.location}}class zs extends js{constructor(t){super(t),this.current=0}set(t,e,n){this.fetchUniformLocation(t,e)&&this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Bs extends js{constructor(t){super(t),this.current=[0,0,0,0]}set(t,e,n){this.fetchUniformLocation(t,e)&&(n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3])))}}class Fs extends js{constructor(t){super(t),this.current=Le.transparent}set(t,e,n){this.fetchUniformLocation(t,e)&&(n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a)))}}const Us=new Float32Array(16),Vs=new Float32Array(9),qs=new Float32Array(4);function Ws(t){return[jo(255*t.r,255*t.g),jo(255*t.b,255*t.a)]}class Gs{constructor(t,e,n){this.value=t,this.uniformNames=e.map((t=>`u_${t}`)),this.type=n}setUniform(t,e,n,r,i){e.set(t,i,r.constantOr(this.value))}getBinding(t,e){return"color"===this.type?new Fs(t):new zs(t)}}class $s{constructor(t,e){this.uniformNames=e.map((t=>`u_${t}`)),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(t){this.pixelRatio=t.pixelRatio||1,this.pattern=t.tl.concat(t.br)}setUniform(t,e,n,r,i){const o="u_pattern"===i||"u_dash"===i?this.pattern:"u_pixel_ratio"===i?this.pixelRatio:null;o&&e.set(t,i,o)}getBinding(t,e){return"u_pattern"===e||"u_dash"===e?new Bs(t):new zs(t)}}class Hs{constructor(t,e,n,r){this.expression=t,this.type=n,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:`a_${t}`,type:"Float32",components:"color"===n?2:1,offset:0}))),this.paintVertexArray=new r}populatePaintArray(t,e,n,r,i,o){const s=this.paintVertexArray.length,a=this.expression.evaluate(new To(0),e,{},i,r,o);this.paintVertexArray.resize(t),this._setPaintValue(s,t,a)}updatePaintArray(t,e,n,r,i){const o=this.expression.evaluate({zoom:0},n,r,void 0,i);this._setPaintValue(t,e,o)}_setPaintValue(t,e,n){if("color"===this.type){const r=Ws(n);for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,r[0],r[1])}else{for(let r=t;r<e;r++)this.paintVertexArray.emplace(r,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Zs{constructor(t,e,n,r,i,o){this.expression=t,this.uniformNames=e.map((t=>`u_${t}_t`)),this.type=n,this.useIntegerZoom=r,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:`a_${t}`,type:"Float32",components:"color"===n?4:2,offset:0}))),this.paintVertexArray=new o}populatePaintArray(t,e,n,r,i,o){const s=this.expression.evaluate(new To(this.zoom),e,{},i,r,o),a=this.expression.evaluate(new To(this.zoom+1),e,{},i,r,o),c=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(c,t,s,a)}updatePaintArray(t,e,n,r,i){const o=this.expression.evaluate({zoom:this.zoom},n,r,void 0,i),s=this.expression.evaluate({zoom:this.zoom+1},n,r,void 0,i);this._setPaintValue(t,e,o,s)}_setPaintValue(t,e,n,r){if("color"===this.type){const i=Ws(n),o=Ws(r);for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,i[0],i[1],o[0],o[1])}else{for(let i=t;i<e;i++)this.paintVertexArray.emplace(i,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,e,n,r,i){const o=this.useIntegerZoom?Math.floor(n.zoom):n.zoom,s=I(this.expression.interpolationFactor(o,this.zoom,this.zoom+1),0,1);e.set(t,i,s)}getBinding(t,e){return new zs(t)}}class Ys{constructor(t,e,n,r,i){this.expression=t,this.layerId=i,this.paintVertexAttributes=("array"===n?ks:Ss).members;for(let t=0;t<e.length;++t);this.paintVertexArray=new r}populatePaintArray(t,e,n){const r=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValues(r,t,e.patterns&&e.patterns[this.layerId],n)}updatePaintArray(t,e,n,r,i,o){this._setPaintValues(t,e,n.patterns&&n.patterns[this.layerId],o)}_setPaintValues(t,e,n,r){if(!r||!n)return;const i=r[n];if(!i)return;const{tl:o,br:s,pixelRatio:a}=i;for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,o[0],o[1],s[0],s[1],a)}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Xs{constructor(t,e,n=(()=>!0)){this.binders={},this._buffers=[];const r=[];for(const i in t.paint._values){if(!n(i))continue;const o=t.paint.get(i);if(!(o instanceof Oo&&zr(o.property.specification)))continue;const s=Qs(i,t.type),a=o.value,c=o.property.specification.type,l=!!o.property.useIntegerZoom,u="line-dasharray"===i||i.endsWith("pattern"),h="line-dasharray"===i&&"constant"!==t.layout.get("line-cap").value.kind;if("constant"!==a.kind||h)if("source"===a.kind||h||u){const e=na(i,c,"source");this.binders[i]=u?new Ys(a,s,c,e,t.id):new Hs(a,s,c,e),r.push(`/a_${i}`)}else{const t=na(i,c,"composite");this.binders[i]=new Zs(a,s,c,l,e,t),r.push(`/z_${i}`)}else this.binders[i]=u?new $s(a.value,s):new Gs(a.value,s,c),r.push(`/u_${i}`)}this.cacheKey=r.sort().join("")}getMaxValue(t){const e=this.binders[t];return e instanceof Hs||e instanceof Zs?e.maxValue:0}populatePaintArrays(t,e,n,r,i,o){for(const s in this.binders){const a=this.binders[s];(a instanceof Hs||a instanceof Zs||a instanceof Ys)&&a.populatePaintArray(t,e,n,r,i,o)}}setConstantPatternPositions(t){for(const e in this.binders){const n=this.binders[e];n instanceof $s&&n.setConstantPatternPositions(t)}}updatePaintArrays(t,e,n,r,i,o){let s=!1;for(const a in t){const c=e.getPositions(a);for(const e of c){const c=n.feature(e.index);for(const n in this.binders){const l=this.binders[n];if((l instanceof Hs||l instanceof Zs||l instanceof Ys)&&!0===l.expression.isStateDependent){const u=r.paint.get(n);l.expression=u.value,l.updatePaintArray(e.start,e.end,c,t[a],i,o),s=!0}}}}return s}defines(){const t=[];for(const e in this.binders){const n=this.binders[e];(n instanceof Gs||n instanceof $s)&&t.push(...n.uniformNames.map((t=>`#define HAS_UNIFORM_${t}`)))}return t}getBinderAttributes(){const t=[];for(const e in this.binders){const n=this.binders[e];if(n instanceof Hs||n instanceof Zs||n instanceof Ys)for(let e=0;e<n.paintVertexAttributes.length;e++)t.push(n.paintVertexAttributes[e].name)}return t}getBinderUniforms(){const t=[];for(const e in this.binders){const n=this.binders[e];if(n instanceof Gs||n instanceof $s||n instanceof Zs)for(const e of n.uniformNames)t.push(e)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t){const e=[];for(const n in this.binders){const r=this.binders[n];if(r instanceof Gs||r instanceof $s||r instanceof Zs)for(const i of r.uniformNames)e.push({name:i,property:n,binding:r.getBinding(t,i)})}return e}setUniforms(t,e,n,r,i){for(const{name:e,property:o,binding:s}of n)this.binders[o].setUniform(t,s,i,r.get(o),e)}updatePaintBuffers(){this._buffers=[];for(const t in this.binders){const e=this.binders[t];(e instanceof Hs||e instanceof Zs||e instanceof Ys)&&e.paintVertexBuffer&&this._buffers.push(e.paintVertexBuffer)}}upload(t){for(const e in this.binders){const n=this.binders[e];(n instanceof Hs||n instanceof Zs||n instanceof Ys)&&n.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const e=this.binders[t];(e instanceof Hs||e instanceof Zs||e instanceof Ys)&&e.destroy()}}}class Ks{constructor(t,e,n=(()=>!0)){this.programConfigurations={};for(const r of t)this.programConfigurations[r.id]=new Xs(r,e,n);this.needsUpload=!1,this._featureMap=new Ls,this._bufferOffset=0}populatePaintArrays(t,e,n,r,i,o,s){for(const n in this.programConfigurations)this.programConfigurations[n].populatePaintArrays(t,e,r,i,o,s);void 0!==e.id&&this._featureMap.add(e.id,n,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,e,n,r,i){for(const o of n)this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(t,this._featureMap,e,o,r,i)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}const Js={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function Qs(t,e){return Js[t]||[t.replace(`${e}-`,"").replace(/-/g,"_")]}const ta={"line-pattern":{source:Zo,composite:Zo},"fill-pattern":{source:Zo,composite:Zo},"fill-extrusion-pattern":{source:Zo,composite:Zo},"line-dasharray":{source:Yo,composite:Yo}},ea={color:{source:fs,composite:Ho},number:{source:cs,composite:fs}};function na(t,e,n){const r=ta[t];return r&&r[n]||ea[e][n]}Ki(Gs,"ConstantBinder"),Ki($s,"PatternConstantBinder"),Ki(Hs,"SourceExpressionBinder"),Ki(Ys,"PatternCompositeBinder"),Ki(Zs,"CompositeExpressionBinder"),Ki(Xs,"ProgramConfiguration",{omit:["_buffers"]}),Ki(Ks,"ProgramConfigurationSet");const ra="-transition";class ia extends ee{constructor(t,e){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==t.type&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&"sky"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),e.layout&&(this._unevaluatedLayout=new Co(e.layout)),e.paint)){this._transitionablePaint=new Ao(e.paint);for(const e in t.paint)this.setPaintProperty(e,t.paint[e],{validate:!1});for(const e in t.layout)this.setLayoutProperty(e,t.layout[e],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Po(e.paint)}}getLayoutProperty(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,e,n={}){null!=e&&this._validate(qi,`layers.${this.id}.layout.${t}`,t,e,n)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)}getPaintProperty(t){return U(t,ra)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,e,n={}){if(null!=e&&this._validate(Vi,`layers.${this.id}.paint.${t}`,t,e,n))return!1;if(U(t,ra))return this._transitionablePaint.setTransition(t.slice(0,-11),e||void 0),!1;{const n=this._transitionablePaint._values[t],r=n.value.isDataDriven(),i=n.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);const o=this._transitionablePaint._values[t].value,s=o.isDataDriven(),a=U(t,"pattern")||"line-dasharray"===t;return s||r||a||this._handleOverridablePaintPropertyUpdate(t,i,o)}}_handleSpecialPaintPropertyUpdate(t){}getProgramIds(){return null}getProgramConfiguration(t){return null}_handleOverridablePaintPropertyUpdate(t,e,n){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,e){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),q(t,((t,e)=>!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)))}_validate(t,e,n,r,i={}){return(!i||!1!==i.validate)&&Gi(this,t.call(Ui,{key:e,layerType:this.type,objectKey:n,value:r,styleSpec:ne,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const e=this.paint.get(t);if(e instanceof Oo&&zr(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=fi(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const oa=Uo([{name:"a_pos",components:2,type:"Int16"}],4),sa=Uo([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class aa{constructor(t=[]){this.segments=t}prepareSegment(t,e,n,r){let i=this.segments[this.segments.length-1];return t>aa.MAX_VERTEX_ARRAY_LENGTH&&$(`Max vertices per segment is ${aa.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!i||i.vertexLength+t>aa.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==r)&&(i={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==r&&(i.sortKey=r),this.segments.push(i)),i}get(){return this.segments}destroy(){for(const t of this.segments)for(const e in t.vaos)t.vaos[e].destroy()}static simpleSegment(t,e,n,r){return new aa([{vertexOffset:t,primitiveOffset:e,vertexLength:n,primitiveLength:r,vaos:{},sortKey:0}])}}aa.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ki(aa,"SegmentVector");var ca=8192;class la{constructor(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}setNorthEast(t){return this._ne=t instanceof qc?new qc(t.lng,t.lat):qc.convert(t),this}setSouthWest(t){return this._sw=t instanceof qc?new qc(t.lng,t.lat):qc.convert(t),this}extend(t){const e=this._sw,n=this._ne;let r,i;if(t instanceof qc)r=t,i=t;else{if(!(t instanceof la))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(la.convert(t)):this.extend(qc.convert(t)):"object"==typeof t&&null!==t&&t.hasOwnProperty("lat")&&(t.hasOwnProperty("lon")||t.hasOwnProperty("lng"))?this.extend(qc.convert(t)):this;if(r=t._sw,i=t._ne,!r||!i)return this}return e||n?(e.lng=Math.min(r.lng,e.lng),e.lat=Math.min(r.lat,e.lat),n.lng=Math.max(i.lng,n.lng),n.lat=Math.max(i.lat,n.lat)):(this._sw=new qc(r.lng,r.lat),this._ne=new qc(i.lng,i.lat)),this}getCenter(){return new qc((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new qc(this.getWest(),this.getNorth())}getSouthEast(){return new qc(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:e,lat:n}=qc.convert(t);let r=this._sw.lng<=e&&e<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=e&&e>=this._ne.lng),this._sw.lat<=n&&n<=this._ne.lat&&r}static convert(t){return!t||t instanceof la?t:new la(t)}}var ua=1e-6,ha="undefined"!=typeof Float32Array?Float32Array:Array;function pa(){var t=new ha(9);return ha!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function fa(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],u=e[7],h=e[8],p=n[0],f=n[1],d=n[2],g=n[3],m=n[4],y=n[5],_=n[6],v=n[7],x=n[8];return t[0]=p*r+f*s+d*l,t[1]=p*i+f*a+d*u,t[2]=p*o+f*c+d*h,t[3]=g*r+m*s+y*l,t[4]=g*i+m*a+y*u,t[5]=g*o+m*c+y*h,t[6]=_*r+v*s+x*l,t[7]=_*i+v*a+x*u,t[8]=_*o+v*c+x*h,t}function da(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ga(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],u=e[8],h=e[9],p=e[10],f=e[11],d=e[12],g=e[13],m=e[14],y=e[15],_=n*a-r*s,v=n*c-i*s,x=n*l-o*s,b=r*c-i*a,w=r*l-o*a,E=i*l-o*c,T=u*g-h*d,S=u*m-p*d,k=u*y-f*d,A=h*m-p*g,M=h*y-f*g,I=p*y-f*m,C=_*I-v*M+x*A+b*k-w*S+E*T;return C?(t[0]=(a*I-c*M+l*A)*(C=1/C),t[1]=(i*M-r*I-o*A)*C,t[2]=(g*E-m*w+y*b)*C,t[3]=(p*w-h*E-f*b)*C,t[4]=(c*k-s*I-l*S)*C,t[5]=(n*I-i*k+o*S)*C,t[6]=(m*x-d*E-y*v)*C,t[7]=(u*E-p*x+f*v)*C,t[8]=(s*M-a*k+l*T)*C,t[9]=(r*k-n*M-o*T)*C,t[10]=(d*w-g*x+y*_)*C,t[11]=(h*x-u*w-f*_)*C,t[12]=(a*S-s*A-c*T)*C,t[13]=(n*A-r*S+i*T)*C,t[14]=(g*v-d*b-m*_)*C,t[15]=(u*b-h*v+p*_)*C,t):null}function ma(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],u=e[7],h=e[8],p=e[9],f=e[10],d=e[11],g=e[12],m=e[13],y=e[14],_=e[15],v=n[0],x=n[1],b=n[2],w=n[3];return t[0]=v*r+x*a+b*h+w*g,t[1]=v*i+x*c+b*p+w*m,t[2]=v*o+x*l+b*f+w*y,t[3]=v*s+x*u+b*d+w*_,t[4]=(v=n[4])*r+(x=n[5])*a+(b=n[6])*h+(w=n[7])*g,t[5]=v*i+x*c+b*p+w*m,t[6]=v*o+x*l+b*f+w*y,t[7]=v*s+x*u+b*d+w*_,t[8]=(v=n[8])*r+(x=n[9])*a+(b=n[10])*h+(w=n[11])*g,t[9]=v*i+x*c+b*p+w*m,t[10]=v*o+x*l+b*f+w*y,t[11]=v*s+x*u+b*d+w*_,t[12]=(v=n[12])*r+(x=n[13])*a+(b=n[14])*h+(w=n[15])*g,t[13]=v*i+x*c+b*p+w*m,t[14]=v*o+x*l+b*f+w*y,t[15]=v*s+x*u+b*d+w*_,t}function ya(t,e,n){var r,i,o,s,a,c,l,u,h,p,f,d,g=n[0],m=n[1],y=n[2];return e===t?(t[12]=e[0]*g+e[4]*m+e[8]*y+e[12],t[13]=e[1]*g+e[5]*m+e[9]*y+e[13],t[14]=e[2]*g+e[6]*m+e[10]*y+e[14],t[15]=e[3]*g+e[7]*m+e[11]*y+e[15]):(i=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],u=e[7],h=e[8],p=e[9],f=e[10],d=e[11],t[0]=r=e[0],t[1]=i,t[2]=o,t[3]=s,t[4]=a,t[5]=c,t[6]=l,t[7]=u,t[8]=h,t[9]=p,t[10]=f,t[11]=d,t[12]=r*g+a*m+h*y+e[12],t[13]=i*g+c*m+p*y+e[13],t[14]=o*g+l*m+f*y+e[14],t[15]=s*g+u*m+d*y+e[15]),t}function _a(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function va(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],s=e[5],a=e[6],c=e[7],l=e[8],u=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+l*r,t[5]=s*i+u*r,t[6]=a*i+h*r,t[7]=c*i+p*r,t[8]=l*i-o*r,t[9]=u*i-s*r,t[10]=h*i-a*r,t[11]=p*i-c*r,t}function xa(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],s=e[1],a=e[2],c=e[3],l=e[8],u=e[9],h=e[10],p=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-l*r,t[1]=s*i-u*r,t[2]=a*i-h*r,t[3]=c*i-p*r,t[8]=o*r+l*i,t[9]=s*r+u*i,t[10]=a*r+h*i,t[11]=c*r+p*i,t}function ba(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function wa(t,e,n){var r,i,o,s=n[0],a=n[1],c=n[2],l=Math.hypot(s,a,c);return l<ua?null:(s*=l=1/l,a*=l,c*=l,r=Math.sin(e),i=Math.cos(e),t[0]=s*s*(o=1-i)+i,t[1]=a*s*o+c*r,t[2]=c*s*o-a*r,t[3]=0,t[4]=s*a*o-c*r,t[5]=a*a*o+i,t[6]=c*a*o+s*r,t[7]=0,t[8]=s*c*o+a*r,t[9]=a*c*o-s*r,t[10]=c*c*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Ea=ma;function Ta(){var t=new ha(3);return ha!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Sa(t){var e=new ha(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function ka(t){return Math.hypot(t[0],t[1],t[2])}function Aa(t,e,n){var r=new ha(3);return r[0]=t,r[1]=e,r[2]=n,r}function Ma(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Ia(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Ca(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Oa(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function Pa(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function La(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function Da(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function Ra(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function Na(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ja(t,e,n){var r=e[0],i=e[1],o=e[2],s=n[0],a=n[1],c=n[2];return t[0]=i*c-o*a,t[1]=o*s-r*c,t[2]=r*a-i*s,t}function za(t,e,n){var r=e[0],i=e[1],o=e[2],s=n[3]*r+n[7]*i+n[11]*o+n[15];return t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/(s=s||1),t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/s,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/s,t}function Ba(t,e,n){var r=n[0],i=n[1],o=n[2],s=e[0],a=e[1],c=e[2],l=i*c-o*a,u=o*s-r*c,h=r*a-i*s,p=i*h-o*u,f=o*l-r*h,d=r*u-i*l,g=2*n[3];return u*=g,h*=g,f*=2,d*=2,t[0]=s+(l*=g)+(p*=2),t[1]=a+u+f,t[2]=c+h+d,t}var Fa,Ua=Ia,Va=Ca,qa=ka;function Wa(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function Ga(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n*n+r*r+i*i+o*o;return s>0&&(s=1/Math.sqrt(s)),t[0]=n*s,t[1]=r*s,t[2]=i*s,t[3]=o*s,t}function $a(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*s,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*s,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*s,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*s,t}function Ha(){var t=new ha(4);return ha!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Za(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Ya(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(n),c=Math.cos(n);return t[0]=r*c+s*a,t[1]=i*c+o*a,t[2]=o*c-i*a,t[3]=s*c-r*a,t}function Xa(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(n),c=Math.cos(n);return t[0]=r*c-o*a,t[1]=i*c+s*a,t[2]=o*c+r*a,t[3]=s*c-i*a,t}Ta(),Fa=new ha(4),ha!=Float32Array&&(Fa[0]=0,Fa[1]=0,Fa[2]=0,Fa[3]=0);var Ka=Ga;Ta(),Aa(1,0,0),Aa(0,1,0),Ha(),Ha(),pa();const Ja=Uo([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Qa}=Ja,tc=Uo([{name:"a_pos_3",components:3,type:"Int16"}]);var ec=Uo([{name:"a_pos",type:"Int16",components:2}]);class nc{constructor(t,e){this.pos=t,this.dir=e}intersectsPlane(t,e,n){const r=Na(e,this.dir);if(Math.abs(r)<1e-6)return!1;const i=((t[0]-this.pos[0])*e[0]+(t[1]-this.pos[1])*e[1]+(t[2]-this.pos[2])*e[2])/r;return n[0]=this.pos[0]+this.dir[0]*i,n[1]=this.pos[1]+this.dir[1]*i,n[2]=this.pos[2]+this.dir[2]*i,!0}closestPointOnSphere(t,e,n){if(function(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],s=e[1],a=e[2];return Math.abs(n-o)<=ua*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-s)<=ua*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-a)<=ua*Math.max(1,Math.abs(i),Math.abs(a))}(this.pos,t)||0===e)return n[0]=n[1]=n[2]=0,!1;const[r,i,o]=this.dir,s=this.pos[0]-t[0],a=this.pos[1]-t[1],c=this.pos[2]-t[2],l=r*r+i*i+o*o,u=2*(s*r+a*i+c*o),h=u*u-4*l*(s*s+a*a+c*c-e*e);if(h<0){const t=Math.max(-u/2,0),l=s+r*t,h=a+i*t,p=c+o*t,f=Math.hypot(l,h,p);return n[0]=l*e/f,n[1]=h*e/f,n[2]=p*e/f,!1}{const t=(-u-Math.sqrt(h))/(2*l);if(t<0){const t=Math.hypot(s,a,c);return n[0]=s*e/t,n[1]=a*e/t,n[2]=c*e/t,!1}return n[0]=s+r*t,n[1]=a+i*t,n[2]=c+o*t,!0}}}class rc{constructor(t,e,n,r,i){this.TL=t,this.TR=e,this.BR=n,this.BL=r,this.horizon=i}static fromInvProjectionMatrix(t,e,n){const r=[-1,1,1],i=[1,1,1],o=[1,-1,1],s=[-1,-1,1],a=za(r,r,t),c=za(i,i,t),l=za(o,o,t),u=za(s,s,t);return new rc(a,c,l,u,e/n)}}class ic{constructor(t,e){this.points=t,this.planes=e}static fromInvProjectionMatrix(t,e,n,r){const i=Math.pow(2,n),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((n=>{const o=$a([],n,t),s=1/o[3]/e*i;return function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}(o,o,[s,s,r?1/o[3]:s,s])})),s=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((t=>{const e=Ra([],ja([],Ua([],o[t[0]],o[t[1]]),Ua([],o[t[2]],o[t[1]]))),n=-Na(e,o[t[1]]);return e.concat(n)}));return new ic(o,s)}}class oc{static fromPoints(t){const e=[1/0,1/0,1/0],n=[-1/0,-1/0,-1/0];for(const r of t)Oa(e,e,r),Pa(n,n,r);return new oc(e,n)}static applyTransform(t,e){const n=t.getCorners();for(let t=0;t<n.length;++t)za(n[t],n[t],e);return oc.fromPoints(n)}constructor(t,e){this.min=t,this.max=e,this.center=La([],Ma([],this.min,this.max),.5)}quadrant(t){const e=[t%2==0,t<2],n=Sa(this.min),r=Sa(this.max);for(let t=0;t<e.length;t++)n[t]=e[t]?this.min[t]:this.center[t],r[t]=e[t]?this.center[t]:this.max[t];return r[2]=this.max[2],new oc(n,r)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}distanceZ(t){return Math.max(Math.min(this.max[2],t[2]),this.min[2])-t[2]}getCorners(){const t=this.min,e=this.max;return[[t[0],t[1],t[2]],[e[0],t[1],t[2]],[e[0],e[1],t[2]],[t[0],e[1],t[2]],[t[0],t[1],e[2]],[e[0],t[1],e[2]],[e[0],e[1],e[2]],[t[0],e[1],e[2]]]}intersects(t){const e=this.getCorners();let n=!0;for(let r=0;r<t.planes.length;r++){const i=t.planes[r];let o=0;for(let t=0;t<e.length;t++)o+=Na(i,e[t])+i[3]>=0;if(0===o)return 0;o!==e.length&&(n=!1)}if(n)return 2;for(let e=0;e<3;e++){let n=Number.MAX_VALUE,r=-Number.MAX_VALUE;for(let i=0;i<t.points.length;i++){const o=t.points[i][e]-this.min[e];n=Math.min(n,o),r=Math.max(r,o)}if(r<0||n>this.max[e]-this.min[e])return 0}return 1}}const sc=5,ac=6,cc=ca/Math.PI/2,lc=16383,uc=64,hc=[uc,32,16],pc=-cc,fc=cc,dc=[new oc([pc,pc,pc],[fc,fc,fc]),new oc([pc,pc,pc],[0,0,fc]),new oc([0,pc,pc],[fc,0,fc]),new oc([pc,0,pc],[0,fc,fc]),new oc([0,0,pc],[fc,fc,fc])];function gc(t){return t*cc/Fc}function mc(t,e,n,r=!0){const i=La([],t._camera.position,t.worldSize),o=[e,n,1,1];$a(o,o,t.pixelMatrixInverse),Wa(o,o,1/o[3]);const s=Ra([],Ua([],o,i)),a=t.globeMatrix,c=[a[12],a[13],a[14]],l=Ua([],c,i),u=ka(l),h=Ra([],l),p=t.worldSize/(2*Math.PI),f=Na(h,s),d=Math.asin(p/u);if(d<Math.acos(f)){if(!r)return null;const t=[],e=[];La(t,s,u/f),Ra(e,Ua(e,t,l)),Ra(s,Ma(s,l,La(s,e,Math.tan(d)*u)))}const g=[];new nc(i,s).closestPointOnSphere(c,p,g);const m=Ra([],tt(a,0)),y=Ra([],tt(a,1)),_=Ra([],tt(a,2)),v=Na(m,g),x=Na(y,g),b=Na(_,g),w=T(Math.asin(-x/p));let E=T(Math.atan2(v,b));E=t.center.lng+function(t,e){const n=(e-t+180)%360-180;return n<-180?n+360:n}(t.center.lng,E);const S=Gc(E),k=I($c(w),0,1);return new Qc(S,k)}class yc{constructor(t,e,n){this.a=Ua([],t,n),this.b=Ua([],e,n),this.center=n;const r=Ra([],this.a),i=Ra([],this.b);this.angle=Math.acos(Na(r,i))}}function _c(t,e){if(0===t.angle)return null;let n;return n=0===t.a[e]?1/t.angle*.5*Math.PI:1/t.angle*Math.atan(t.b[e]/t.a[e]/Math.sin(t.angle)-1/Math.tan(t.angle)),n<0||n>1?null:function(t,e,n,r){const i=Math.sin(n);return t*(Math.sin((1-r)*n)/i)+e*(Math.sin(r*n)/i)}(t.a[e],t.b[e],t.angle,I(n,0,1))+t.center[e]}function vc(t){if(t.z<=1)return dc[t.z+2*t.y+t.x];const e=Sc(Tc(t));return oc.fromPoints(e)}function xc(t,e,n){return La(t,t,1-n),Da(t,t,e,n)}function bc(t,e){const n=Dc(e.zoom);if(0===n)return vc(t);const r=Tc(t),i=Sc(r),o=Gc(r.getWest())*e.worldSize,s=Gc(r.getEast())*e.worldSize,a=$c(r.getNorth())*e.worldSize,c=$c(r.getSouth())*e.worldSize,l=[o,a,0],u=[s,a,0],h=[o,c,0],p=[s,c,0],f=ga([],e.globeMatrix);return za(l,l,f),za(u,u,f),za(h,h,f),za(p,p,f),i[0]=xc(i[0],h,n),i[1]=xc(i[1],p,n),i[2]=xc(i[2],u,n),i[3]=xc(i[3],l,n),oc.fromPoints(i)}function wc(t,e,n){for(const r of t)za(r,r,e),La(r,r,n)}function Ec(t,e,n){const r=e/t.worldSize,i=t.globeMatrix;if(n.z<=1){const t=vc(n).getCorners();return wc(t,i,r),oc.fromPoints(t)}const o=Tc(n),s=Sc(o);wc(s,i,r);const a=Number.MAX_VALUE,c=[-a,-a,-a],l=[a,a,a];if(o.contains(t.center)){for(const t of s)Oa(l,l,t),Pa(c,c,t);c[2]=0;const e=t.point,n=[e.x*r,e.y*r,0];return Oa(l,l,n),Pa(c,c,n),new oc(l,c)}const u=[i[12]*r,i[13]*r,i[14]*r],h=o.getCenter(),p=I(t.center.lat,-Kc,Kc),f=I(h.lat,-Kc,Kc),d=Gc(t.center.lng),g=$c(p);let m=d-Gc(h.lng);const y=g-$c(f);m>.5?m-=1:m<-.5&&(m+=1);let _=0;Math.abs(m)>Math.abs(y)?_=m>=0?1:3:(_=y>=0?0:2,Da(u,u,[i[4]*r,i[5]*r,i[6]*r],-Math.sin(E(y>=0?o.getSouth():o.getNorth()))*cc));const v=s[_],x=s[(_+1)%4],b=new yc(v,x,u),w=[_c(b,0)||v[0],_c(b,1)||v[1],_c(b,2)||v[2]],T=Dc(t.zoom);if(T>0){const r=function({x:t,y:e,z:n},r,i,o,s){const a=1/(1<<n);let c=t*a,l=c+a,u=e*a,h=u+a,p=0;const f=(c+l)/2-o;return f>.5?p=-1:f<-.5&&(p=1),c=((c+p)*r-(o*=r))*i+o,l=((l+p)*r-o)*i+o,u=(u*r-(s*=r))*i+s,h=(h*r-s)*i+s,[[c,h,0],[l,h,0],[l,u,0],[c,u,0]]}(n,e,t._pixelsPerMercatorPixel,d,g);for(let t=0;t<s.length;t++)xc(s[t],r[t],T);const i=Ma([],r[_],r[(_+1)%4]);La(i,i,.5),xc(w,i,T)}for(const t of s)Oa(l,l,t),Pa(c,c,t);return l[2]=Math.min(v[2],x[2]),Oa(l,l,w),Pa(c,c,w),new oc(l,c)}function Tc({x:t,y:e,z:n}){const r=1/(1<<n),i=new qc(Zc(t*r),Yc((e+1)*r)),o=new qc(Zc((t+1)*r),Yc(e*r));return new la(i,o)}function Sc(t){const e=E(t.getNorth()),n=E(t.getSouth()),r=Math.cos(e),i=Math.cos(n),o=Math.sin(e),s=Math.sin(n),a=t.getWest(),c=t.getEast();return[kc(i,s,a),kc(i,s,c),kc(r,o,c),kc(r,o,a)]}function kc(t,e,n,r=cc){return n=E(n),[t*Math.sin(n)*r,-e*r,t*Math.cos(n)*r]}function Ac(t,e,n){return kc(Math.cos(E(t)),Math.sin(E(t)),e,n)}function Mc(t,e,n,r){const i=1<<n.z,o=(t/ca+n.x)/i;return Ac(Yc((e/ca+n.y)/i),Zc(o),r)}function Ic({min:t,max:e}){return lc/Math.max(e[0]-t[0],e[1]-t[1],e[2]-t[2])}const Cc=new Float64Array(16);function Oc(t){const e=Ic(t),n=ba(Cc,[e,e,e]);return ya(n,n,((r=[])[0]=-(i=t.min)[0],r[1]=-i[1],r[2]=-i[2],r));var r,i}function Pc(t){const e=(r=t.min,(n=Cc)[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n);var n,r;const i=1/Ic(t);return _a(e,e,[i,i,i])}function Lc(t,e,n,r,i){const o=function(t){const e=ca/(2*Math.PI);return t/(2*Math.PI)/e}(n),s=[t,e,-n/(2*Math.PI)],a=da(new Float64Array(16));return ya(a,a,s),_a(a,a,[o,o,o]),va(a,a,E(-i)),xa(a,a,E(-r)),a}function Dc(t){return C(sc,ac,t)}function Rc(t,e){const n=Ac(e.lat,e.lng),r=function(t){const e=Ac(t._center.lat,t._center.lng);let n=ja([],Aa(0,1,0),e);const r=wa([],-t.angle,e);n=za(n,n,r),wa(r,-t._pitch,n);const i=Ra([],e);return La(i,i,gc(t.cameraToCenterDistance/t.pixelsPerMeter)),za(i,i,r),Ma([],e,i)}(t);return s=(i=Ia([],r,n))[0],a=i[1],c=i[2],l=(o=n)[0],u=o[1],h=o[2],f=(p=Math.sqrt(s*s+a*a+c*c)*Math.sqrt(l*l+u*u+h*h))&&Na(i,o)/p,Math.acos(Math.min(Math.max(f,-1),1));var i,o,s,a,c,l,u,h,p,f}function Nc(t,e){return Rc(t,e)>Math.PI/2*1.01}const jc=E(85),zc=Math.cos(jc),Bc=Math.sin(jc),Fc=6371008.8,Uc=2*Math.PI*Fc;class Vc{constructor(t,e){if(isNaN(t)||isNaN(e))throw new Error(`Invalid LngLat object: (${t}, ${e})`);if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Vc(O(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const e=Math.PI/180,n=this.lat*e,r=t.lat*e,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((t.lng-this.lng)*e);return Fc*Math.acos(Math.min(i,1))}toBounds(t=0){const e=360*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return new la(new Vc(this.lng-n,this.lat-e),new Vc(this.lng+n,this.lat+e))}toEcef(t){const e=gc(t);return Ac(this.lat,this.lng,cc+e)}static convert(t){if(t instanceof Vc)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Vc(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Vc(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var qc=Vc;function Wc(t){return Uc*Math.cos(t*Math.PI/180)}function Gc(t){return(180+t)/360}function $c(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Hc(t,e){return t/Wc(e)}function Zc(t){return 360*t-180}function Yc(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}function Xc(t,e){return t*Wc(Yc(e))}const Kc=85.051129;function Jc(t){return 1/Math.cos(t*Math.PI/180)}class Qc{constructor(t,e,n=0){this.x=+t,this.y=+e,this.z=+n}static fromLngLat(t,e=0){const n=qc.convert(t);return new Qc(Gc(n.lng),$c(n.lat),Hc(e,n.lat))}toLngLat(){return new qc(Zc(this.x),Yc(this.y))}toAltitude(){return Xc(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Uc*Jc(Yc(this.y))}}function tl(t,e,n,r,i,o,s,a,c){const l=(e+r)/2,u=(n+i)/2,h=new x(l,u);a(h),function(t,e,n,r,i,o){const s=n-i,a=r-o;return Math.abs((r-e)*s-(n-t)*a)/Math.hypot(s,a)}(h.x,h.y,o.x,o.y,s.x,s.y)>=c?(tl(t,e,n,l,u,o,h,a,c),tl(t,l,u,r,i,h,s,a,c)):t.push(s)}function el(t,e,n){let r=t[0],i=r.x,o=r.y;e(r);const s=[r];for(let a=1;a<t.length;a++){const c=t[a],{x:l,y:u}=c;e(c),tl(s,i,o,l,u,r,c,e,n),i=l,o=u,r=c}return s}function nl(t,e,n,r){if(r(e,n)){const i=e.add(n)._mult(.5);nl(t,e,i,r),nl(t,i,n,r)}else t.push(n)}function rl(t,e){let n=t[0];const r=[n];for(let i=1;i<t.length;i++){const o=t[i];nl(r,n,o,e),n=o}return r}const il=Math.pow(2,14)-1,ol=-il-1;function sl(t,e){const n=Math.round(t.x*e),r=Math.round(t.y*e);return t.x=I(n,ol,il),t.y=I(r,ol,il),(n<t.x||n>t.x+1||r<t.y||r>t.y+1)&&$("Geometry exceeds allowed extent, reduce your vector tile buffer size"),t}function al(t,e,n){const r=t.loadGeometry(),i=t.extent,o=ca/i;if(e&&n&&n.projection.isReprojectedInTileSpace){const o=1<<e.z,{scale:s,x:a,y:c,projection:l}=n,u=t=>{const n=Zc((e.x+t.x/i)/o),r=Yc((e.y+t.y/i)/o),u=l.project(n,r);t.x=(u.x*s-a)*i,t.y=(u.y*s-c)*i};for(let e=0;e<r.length;e++)if(1!==t.type)r[e]=el(r[e],u,1);else{const t=[];for(const n of r[e])n.x<0||n.x>=i||n.y<0||n.y>=i||(u(n),t.push(n));r[e]=t}}for(const t of r)for(const e of t)sl(e,o);return r}function cl(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?al(t):[]}}function ll(t,e,n,r,i){t.emplaceBack(2*e+(r+1)/2,2*n+(i+1)/2)}function ul(t,e,n){const r=16384;t.emplaceBack(e.x,e.y,e.z,n[0]*r,n[1]*r,n[2]*r)}class hl{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.projection=t.projection,this.layoutVertexArray=new qo,this.indexArray=new os,this.segments=new aa,this.programConfigurations=new Ks(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n,r){const i=this.layers[0],o=[];let s=null;"circle"===i.type&&(s=i.layout.get("circle-sort-key"));for(const{feature:e,id:i,index:a,sourceLayerIndex:c}of t){const t=this.layers[0]._featureFilter.needGeometry,l=cl(e,t);if(!this.layers[0]._featureFilter.filter(new To(this.zoom),l,n))continue;const u=s?s.evaluate(l,{},n):void 0,h={id:i,properties:e.properties,type:e.type,sourceLayerIndex:c,index:a,geometry:t?l.geometry:al(e,n,r),patterns:{},sortKey:u};o.push(h)}s&&o.sort(((t,e)=>t.sortKey-e.sortKey));let a=null;"globe"===r.projection.name&&(this.globeExtVertexArray=new Xo,a=r.projection);for(const r of o){const{geometry:i,index:o,sourceLayerIndex:s}=r,c=t[o].feature;this.addFeature(r,i,o,e.availableImages,n,a),e.featureIndex.insert(c,i,o,s,this.index)}}update(t,e,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,oa.members),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=t.createVertexBuffer(this.globeExtVertexArray,sa.members))),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(t,e,n,r,i,o){for(const n of e)for(const e of n){const n=e.x,r=e.y;if(n<0||n>=ca||r<0||r>=ca)continue;if(o){const t=o.projectTilePoint(n,r,i),e=o.upVector(i,n,r),s=this.globeExtVertexArray;ul(s,t,e),ul(s,t,e),ul(s,t,e),ul(s,t,e)}const s=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),a=s.vertexLength;ll(this.layoutVertexArray,n,r,-1,-1),ll(this.layoutVertexArray,n,r,1,-1),ll(this.layoutVertexArray,n,r,1,1),ll(this.layoutVertexArray,n,r,-1,1),this.indexArray.emplaceBack(a,a+1,a+2),this.indexArray.emplaceBack(a,a+2,a+3),s.vertexLength+=4,s.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{},r,i)}}function pl(t,e){for(let n=0;n<t.length;n++)if(bl(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(bl(t,e[n]))return!0;return!!ml(t,e)}function fl(t,e,n){return!!bl(t,e)||!!_l(e,t,n)}function dl(t,e){if(1===t.length)return xl(e,t[0]);for(let n=0;n<e.length;n++){const r=e[n];for(let e=0;e<r.length;e++)if(bl(t,r[e]))return!0}for(let n=0;n<t.length;n++)if(xl(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(ml(t,e[n]))return!0;return!1}function gl(t,e,n){if(t.length>1){if(ml(t,e))return!0;for(let r=0;r<e.length;r++)if(_l(e[r],t,n))return!0}for(let r=0;r<t.length;r++)if(_l(t[r],e,n))return!0;return!1}function ml(t,e){if(0===t.length||0===e.length)return!1;for(let n=0;n<t.length-1;n++){const r=t[n],i=t[n+1];for(let t=0;t<e.length-1;t++)if(yl(r,i,e[t],e[t+1]))return!0}return!1}function yl(t,e,n,r){return H(t,n,r)!==H(e,n,r)&&H(t,e,n)!==H(t,e,r)}function _l(t,e,n){const r=n*n;if(1===e.length)return t.distSqr(e[0])<r;for(let n=1;n<e.length;n++)if(vl(t,e[n-1],e[n])<r)return!0;return!1}function vl(t,e,n){const r=e.distSqr(n);if(0===r)return t.distSqr(e);const i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;return t.distSqr(i<0?e:i>1?n:n.sub(e)._mult(i)._add(e))}function xl(t,e){let n,r,i,o=!1;for(let s=0;s<t.length;s++){n=t[s];for(let t=0,s=n.length-1;t<n.length;s=t++)r=n[t],i=n[s],r.y>e.y!=i.y>e.y&&e.x<(i.x-r.x)*(e.y-r.y)/(i.y-r.y)+r.x&&(o=!o)}return o}function bl(t,e){let n=!1;for(let r=0,i=t.length-1;r<t.length;i=r++){const o=t[r],s=t[i];o.y>e.y!=s.y>e.y&&e.x<(s.x-o.x)*(e.y-o.y)/(s.y-o.y)+o.x&&(n=!n)}return n}function wl(t,e,n,r,i){for(const o of t)if(e<=o.x&&n<=o.y&&r>=o.x&&i>=o.y)return!0;const o=[new x(e,n),new x(e,i),new x(r,i),new x(r,n)];if(t.length>2)for(const e of o)if(bl(t,e))return!0;for(let e=0;e<t.length-1;e++)if(El(t[e],t[e+1],o))return!0;return!1}function El(t,e,n){const r=n[0],i=n[2];if(t.x<r.x&&e.x<r.x||t.x>i.x&&e.x>i.x||t.y<r.y&&e.y<r.y||t.y>i.y&&e.y>i.y)return!1;const o=H(t,e,n[0]);return o!==H(t,e,n[1])||o!==H(t,e,n[2])||o!==H(t,e,n[3])}function Tl(t,e,n){const r=e.paint.get(t).value;return"constant"===r.kind?r.value:n.programConfigurations.get(e.id).getMaxValue(t)}function Sl(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function kl(t,e,n,r,i){if(!e[0]&&!e[1])return t;const o=x.convert(e)._mult(i);"viewport"===n&&o._rotate(-r);const s=[];for(let e=0;e<t.length;e++)s.push(t[e].sub(o));return s}function Al(t,e,n,r){const i=x.convert(t)._mult(r);return"viewport"===e&&i._rotate(-n),i}Ki(hl,"CircleBucket",{omit:["layers"]});const Ml=new No({"circle-sort-key":new Do(ne.layout_circle["circle-sort-key"])});var Il={paint:new No({"circle-radius":new Do(ne.paint_circle["circle-radius"]),"circle-color":new Do(ne.paint_circle["circle-color"]),"circle-blur":new Do(ne.paint_circle["circle-blur"]),"circle-opacity":new Do(ne.paint_circle["circle-opacity"]),"circle-translate":new Lo(ne.paint_circle["circle-translate"]),"circle-translate-anchor":new Lo(ne.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Lo(ne.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Lo(ne.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Do(ne.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Do(ne.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Do(ne.paint_circle["circle-stroke-opacity"])}),layout:Ml};function Cl(t,e,n,r,i,o,s,a,c){if(o&&t.queryGeometry.isAboveHorizon)return!1;o&&(c*=t.pixelToTileUnitsFactor);const l=t.tileID.canonical,u=n.projection.upVectorScale(l,n.center.lat,n.worldSize).metersToTile;for(const h of e)for(const e of h){const h=e.add(a),p=i&&n.elevation?n.elevation.exaggeration()*i.getElevationAt(h.x,h.y,!0):0,f=n.projection.projectTilePoint(h.x,h.y,l);if(p>0){const t=n.projection.upVector(l,h.x,h.y);f.x+=t[0]*u*p,f.y+=t[1]*u*p,f.z+=t[2]*u*p}const d=o?h:Ol(f.x,f.y,f.z,r),g=o?t.tilespaceRays.map((t=>Dl(t,p))):t.queryGeometry.screenGeometry,m=$a([],[f.x,f.y,f.z,1],r);if(!s&&o?c*=m[3]/n.cameraToCenterDistance:s&&!o&&(c*=n.cameraToCenterDistance/m[3]),o){const t=Yc((e.y/ca+l.y)/(1<<l.z));c/=n.projection.pixelsPerMeter(t,1)/Hc(1,t)}if(fl(g,d,c))return!0}return!1}function Ol(t,e,n,r){const i=$a([],[t,e,n,1],r);return new x(i[0]/i[3],i[1]/i[3])}const Pl=Aa(0,0,0),Ll=Aa(0,0,1);function Dl(t,e){const n=Ta();return Pl[2]=e,t.intersectsPlane(Pl,Ll,n),new x(n[0],n[1])}class Rl extends hl{}function Nl(t,{width:e,height:n},r,i){if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==e*n*r)throw new RangeError("mismatched image size")}else i=new Uint8Array(e*n*r);return t.width=e,t.height=n,t.data=i,t}function jl(t,e,n){const{width:r,height:i}=e;r===t.width&&i===t.height||(zl(t,e,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,r),height:Math.min(t.height,i)},n),t.width=r,t.height=i,t.data=e.data)}function zl(t,e,n,r,i,o){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");const s=t.data,a=e.data;for(let c=0;c<i.height;c++){const l=((n.y+c)*t.width+n.x)*o,u=((r.y+c)*e.width+r.x)*o;for(let t=0;t<i.width*o;t++)a[u+t]=s[l+t]}return e}Ki(Rl,"HeatmapBucket",{omit:["layers"]});class Bl{constructor(t,e){Nl(this,t,1,e)}resize(t){jl(this,new Bl(t),1)}clone(){return new Bl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,n,r,i){zl(t,e,n,r,i,1)}}class Fl{constructor(t,e){Nl(this,t,4,e)}resize(t){jl(this,new Fl(t),4)}replace(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new Fl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,n,r,i){zl(t,e,n,r,i,4)}}Ki(Bl,"AlphaImage"),Ki(Fl,"RGBAImage");var Ul={paint:new No({"heatmap-radius":new Do(ne.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Do(ne.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Lo(ne.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ro(ne.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Lo(ne.paint_heatmap["heatmap-opacity"])})};function Vl(t){const e={},n=t.resolution||256,r=t.clips?t.clips.length:1,i=t.image||new Fl({width:n,height:r}),o=(n,r,o)=>{e[t.evaluationKey]=o;const s=t.expression.evaluate(e);i.data[n+r+0]=Math.floor(255*s.r/s.a),i.data[n+r+1]=Math.floor(255*s.g/s.a),i.data[n+r+2]=Math.floor(255*s.b/s.a),i.data[n+r+3]=Math.floor(255*s.a)};if(t.clips)for(let e=0,i=0;e<r;++e,i+=4*n)for(let r=0,s=0;r<n;r++,s+=4){const a=r/(n-1),{start:c,end:l}=t.clips[e];o(i,s,c*(1-a)+l*a)}else for(let t=0,e=0;t<n;t++,e+=4)o(0,e,t/(n-1));return i}var ql={paint:new No({"hillshade-illumination-direction":new Lo(ne.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Lo(ne.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Lo(ne.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Lo(ne.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Lo(ne.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Lo(ne.paint_hillshade["hillshade-accent-color"])})};const Wl=Uo([{name:"a_pos",components:2,type:"Int16"}],4),{members:Gl}=Wl;var $l={exports:{}};function Hl(t,e,n){n=n||2;var r,i,o,s,a,c,l,u=e&&e.length,h=u?e[0]*n:t.length,p=Zl(t,0,h,n,!0),f=[];if(!p||p.next===p.prev)return f;if(u&&(p=function(t,e,n,r){var i,o,s,a=[];for(i=0,o=e.length;i<o;i++)(s=Zl(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===s.next&&(s.steiner=!0),a.push(ou(s));for(a.sort(eu),i=0;i<a.length;i++)n=nu(a[i],n);return n}(t,e,p,n)),t.length>80*n){r=o=t[0],i=s=t[1];for(var d=n;d<h;d+=n)(a=t[d])<r&&(r=a),(c=t[d+1])<i&&(i=c),a>o&&(o=a),c>s&&(s=c);l=0!==(l=Math.max(o-r,s-i))?32767/l:0}return Xl(p,f,n,r,i,l,0),f}function Zl(t,e,n,r,i){var o,s;if(i===_u(t,e,n,r)>0)for(o=e;o<n;o+=r)s=gu(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=gu(o,t[o],t[o+1],s);return s&&lu(s,s.next)&&(mu(s),s=s.next),s}function Yl(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!lu(r,r.next)&&0!==cu(r.prev,r,r.next))r=r.next;else{if(mu(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function Xl(t,e,n,r,i,o,s){if(t){!s&&o&&function(t,e,n,r){var i=t;do{0===i.z&&(i.z=iu(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,s,a,c,l=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<l&&(a++,r=r.nextZ);e++);for(c=l;a>0||c>0&&r;)0!==a&&(0===c||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,c--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(s>1)}(i)}(t,r,i,o);for(var a,c,l=t;t.prev!==t.next;)if(a=t.prev,c=t.next,o?Jl(t,r,i,o):Kl(t))e.push(a.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),mu(t),t=c.next,l=c.next;else if((t=c)===l){s?1===s?Xl(t=Ql(Yl(t),e,n),e,n,r,i,o,2):2===s&&tu(t,e,n,r,i,o):Xl(Yl(t),e,n,r,i,o,1);break}}}function Kl(t){var e=t.prev,n=t,r=t.next;if(cu(e,n,r)>=0)return!1;for(var i=e.x,o=n.x,s=r.x,a=e.y,c=n.y,l=r.y,u=i<o?i<s?i:s:o<s?o:s,h=a<c?a<l?a:l:c<l?c:l,p=i>o?i>s?i:s:o>s?o:s,f=a>c?a>l?a:l:c>l?c:l,d=r.next;d!==e;){if(d.x>=u&&d.x<=p&&d.y>=h&&d.y<=f&&su(i,a,o,c,s,l,d.x,d.y)&&cu(d.prev,d,d.next)>=0)return!1;d=d.next}return!0}function Jl(t,e,n,r){var i=t.prev,o=t,s=t.next;if(cu(i,o,s)>=0)return!1;for(var a=i.x,c=o.x,l=s.x,u=i.y,h=o.y,p=s.y,f=a<c?a<l?a:l:c<l?c:l,d=u<h?u<p?u:p:h<p?h:p,g=a>c?a>l?a:l:c>l?c:l,m=u>h?u>p?u:p:h>p?h:p,y=iu(f,d,e,n,r),_=iu(g,m,e,n,r),v=t.prevZ,x=t.nextZ;v&&v.z>=y&&x&&x.z<=_;){if(v.x>=f&&v.x<=g&&v.y>=d&&v.y<=m&&v!==i&&v!==s&&su(a,u,c,h,l,p,v.x,v.y)&&cu(v.prev,v,v.next)>=0)return!1;if(v=v.prevZ,x.x>=f&&x.x<=g&&x.y>=d&&x.y<=m&&x!==i&&x!==s&&su(a,u,c,h,l,p,x.x,x.y)&&cu(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;v&&v.z>=y;){if(v.x>=f&&v.x<=g&&v.y>=d&&v.y<=m&&v!==i&&v!==s&&su(a,u,c,h,l,p,v.x,v.y)&&cu(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;x&&x.z<=_;){if(x.x>=f&&x.x<=g&&x.y>=d&&x.y<=m&&x!==i&&x!==s&&su(a,u,c,h,l,p,x.x,x.y)&&cu(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function Ql(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!lu(i,o)&&uu(i,r,r.next,o)&&fu(i,o)&&fu(o,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(o.i/n|0),mu(r),mu(r.next),r=t=o),r=r.next}while(r!==t);return Yl(r)}function tu(t,e,n,r,i,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&au(s,a)){var c=du(s,a);return s=Yl(s,s.next),c=Yl(c,c.next),Xl(s,e,n,r,i,o,0),void Xl(c,e,n,r,i,o,0)}a=a.next}s=s.next}while(s!==t)}function eu(t,e){return t.x-e.x}function nu(t,e){var n=function(t,e){var n,r=e,i=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s&&(s=a,n=r.x<r.next.x?r:r.next,a===i))return n}r=r.next}while(r!==e);if(!n)return null;var c,l=n,u=n.x,h=n.y,p=1/0;r=n;do{i>=r.x&&r.x>=u&&i!==r.x&&su(o<h?i:s,o,u,h,o<h?s:i,o,r.x,r.y)&&(c=Math.abs(o-r.y)/(i-r.x),fu(r,t)&&(c<p||c===p&&(r.x>n.x||r.x===n.x&&ru(n,r)))&&(n=r,p=c)),r=r.next}while(r!==l);return n}(t,e);if(!n)return e;var r=du(n,t);return Yl(r,r.next),Yl(n,n.next)}function ru(t,e){return cu(t.prev,t,e.prev)<0&&cu(e.next,t,t.next)<0}function iu(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function ou(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function su(t,e,n,r,i,o,s,a){return(i-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(r-a)>=(n-s)*(e-a)&&(n-s)*(o-a)>=(i-s)*(r-a)}function au(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&uu(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(fu(t,e)&&fu(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(cu(t.prev,t,e.prev)||cu(t,e.prev,e))||lu(t,e)&&cu(t.prev,t,t.next)>0&&cu(e.prev,e,e.next)>0)}function cu(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function lu(t,e){return t.x===e.x&&t.y===e.y}function uu(t,e,n,r){var i=pu(cu(t,e,n)),o=pu(cu(t,e,r)),s=pu(cu(n,r,t)),a=pu(cu(n,r,e));return i!==o&&s!==a||!(0!==i||!hu(t,n,e))||!(0!==o||!hu(t,r,e))||!(0!==s||!hu(n,t,r))||!(0!==a||!hu(n,e,r))}function hu(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function pu(t){return t>0?1:t<0?-1:0}function fu(t,e){return cu(t.prev,t,t.next)<0?cu(t,e,t.next)>=0&&cu(t,t.prev,e)>=0:cu(t,e,t.prev)<0||cu(t,t.next,e)<0}function du(t,e){var n=new yu(t.i,t.x,t.y),r=new yu(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function gu(t,e,n,r){var i=new yu(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function mu(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function yu(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function _u(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}$l.exports=Hl,$l.exports.default=Hl,Hl.deviation=function(t,e,n,r){var i=e&&e.length,o=Math.abs(_u(t,0,i?e[0]*n:t.length,n));if(i)for(var s=0,a=e.length;s<a;s++)o-=Math.abs(_u(t,e[s]*n,s<a-1?e[s+1]*n:t.length,n));var c=0;for(s=0;s<r.length;s+=3){var l=r[s]*n,u=r[s+1]*n,h=r[s+2]*n;c+=Math.abs((t[l]-t[h])*(t[u+1]-t[l+1])-(t[l]-t[u])*(t[h+1]-t[l+1]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},Hl.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&n.holes.push(r+=t[i-1].length)}return n};var vu=d($l.exports);function xu(t,e,n,r,i){bu(t,e,n||0,r||t.length-1,i||Eu)}function bu(t,e,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,s=e-n+1,a=Math.log(o),c=.5*Math.exp(2*a/3),l=.5*Math.sqrt(a*c*(o-c)/o)*(s-o/2<0?-1:1);bu(t,e,Math.max(n,Math.floor(e-s*c/o+l)),Math.min(r,Math.floor(e+(o-s)*c/o+l)),i)}var u=t[e],h=n,p=r;for(wu(t,n,e),i(t[r],u)>0&&wu(t,n,r);h<p;){for(wu(t,h,p),h++,p--;i(t[h],u)<0;)h++;for(;i(t[p],u)>0;)p--}0===i(t[n],u)?wu(t,n,p):wu(t,++p,r),p<=e&&(n=p+1),e<=p&&(r=p-1)}}function wu(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Eu(t,e){return t<e?-1:t>e?1:0}function Tu(t,e){const n=t.length;if(n<=1)return[t];const r=[];let i,o;for(let e=0;e<n;e++){const n=Z(t[e]);0!==n&&(t[e].area=Math.abs(n),void 0===o&&(o=n<0),o===n<0?(i&&r.push(i),i=[t[e]]):i.push(t[e]))}if(i&&r.push(i),e>1)for(let t=0;t<r.length;t++)r[t].length<=e||(xu(r[t],e,1,r[t].length-1,Su),r[t]=r[t].slice(0,e));return r}function Su(t,e){return e.area-t.area}function ku(t,e,n){const r=n.patternDependencies;let i=!1;for(const n of e){const e=n.paint.get(`${t}-pattern`);e.isConstant()||(i=!0);const o=e.constantOr(null);o&&(i=!0,r[o]=!0)}return i}function Au(t,e,n,r,i){const o=i.patternDependencies;for(const s of e){const e=s.paint.get(`${t}-pattern`).value;if("constant"!==e.kind){let t=e.evaluate({zoom:r},n,{},i.availableImages);t=t&&t.name?t.name:t,o[t]=!0,n.patterns[s.id]=t}}return n}class Mu{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new qo,this.indexArray=new os,this.indexArray2=new hs,this.programConfigurations=new Ks(t.layers,t.zoom),this.segments=new aa,this.segments2=new aa,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.projection=t.projection}populate(t,e,n,r){this.hasPattern=ku("fill",this.layers,e);const i=this.layers[0].layout.get("fill-sort-key"),o=[];for(const{feature:s,id:a,index:c,sourceLayerIndex:l}of t){const t=this.layers[0]._featureFilter.needGeometry,u=cl(s,t);if(!this.layers[0]._featureFilter.filter(new To(this.zoom),u,n))continue;const h=i?i.evaluate(u,{},n,e.availableImages):void 0,p={id:a,properties:s.properties,type:s.type,sourceLayerIndex:l,index:c,geometry:t?u.geometry:al(s,n,r),patterns:{},sortKey:h};o.push(p)}i&&o.sort(((t,e)=>t.sortKey-e.sortKey));for(const r of o){const{geometry:i,index:o,sourceLayerIndex:s}=r;if(this.hasPattern){const t=Au("fill",this.layers,r,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(r,i,o,n,{},e.availableImages);e.featureIndex.insert(t[o].feature,i,o,s,this.index)}}update(t,e,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n,r)}addFeatures(t,e,n,r,i){for(const t of this.patternFeatures)this.addFeature(t,t.geometry,t.index,e,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Gl),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,e,n,r,i,o=[]){for(const t of Tu(e,500)){let e=0;for(const n of t)e+=n.length;const n=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray),r=n.vertexLength,i=[],o=[];for(const e of t){if(0===e.length)continue;e!==t[0]&&o.push(i.length/2);const n=this.segments2.prepareSegment(e.length,this.layoutVertexArray,this.indexArray2),r=n.vertexLength;this.layoutVertexArray.emplaceBack(e[0].x,e[0].y),this.indexArray2.emplaceBack(r+e.length-1,r),i.push(e[0].x),i.push(e[0].y);for(let t=1;t<e.length;t++)this.layoutVertexArray.emplaceBack(e[t].x,e[t].y),this.indexArray2.emplaceBack(r+t-1,r+t),i.push(e[t].x),i.push(e[t].y);n.vertexLength+=e.length,n.primitiveLength+=e.length}const s=vu(i,o);for(let t=0;t<s.length;t+=3)this.indexArray.emplaceBack(r+s[t],r+s[t+1],r+s[t+2]);n.vertexLength+=e,n.primitiveLength+=s.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,o,r)}}Ki(Mu,"FillBucket",{omit:["layers","patternFeatures"]});const Iu=new No({"fill-sort-key":new Do(ne.layout_fill["fill-sort-key"])});var Cu={paint:new No({"fill-antialias":new Lo(ne.paint_fill["fill-antialias"]),"fill-opacity":new Do(ne.paint_fill["fill-opacity"]),"fill-color":new Do(ne.paint_fill["fill-color"]),"fill-outline-color":new Do(ne.paint_fill["fill-outline-color"]),"fill-translate":new Lo(ne.paint_fill["fill-translate"]),"fill-translate-anchor":new Lo(ne.paint_fill["fill-translate-anchor"]),"fill-pattern":new Do(ne.paint_fill["fill-pattern"])}),layout:Iu};const Ou=Uo([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Pu=Uo([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Lu=Uo([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Du}=Ou;var Ru={},Nu=_,ju=zu;function zu(t,e,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=i,t.readFields(Bu,this,e)}function Bu(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function Fu(t){for(var e,n,r=0,i=0,o=t.length,s=o-1;i<o;s=i++)r+=((n=t[s]).x-(e=t[i]).x)*(e.y+n.y);return r}zu.types=["Unknown","Point","LineString","Polygon"],zu.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,i=0,o=0,s=0,a=[];t.pos<n;){if(i<=0){var c=t.readVarint();r=7&c,i=c>>3}if(i--,1===r||2===r)o+=t.readSVarint(),s+=t.readSVarint(),1===r&&(e&&a.push(e),e=[]),e.push(new Nu(o,s));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&a.push(e),a},zu.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,i=0,o=0,s=1/0,a=-1/0,c=1/0,l=-1/0;t.pos<e;){if(r<=0){var u=t.readVarint();n=7&u,r=u>>3}if(r--,1===n||2===n)(i+=t.readSVarint())<s&&(s=i),i>a&&(a=i),(o+=t.readSVarint())<c&&(c=o),o>l&&(l=o);else if(7!==n)throw new Error("unknown command "+n)}return[s,c,a,l]},zu.prototype.toGeoJSON=function(t,e,n){var r,i,o=this.extent*Math.pow(2,n),s=this.extent*t,a=this.extent*e,c=this.loadGeometry(),l=zu.types[this.type];function u(t){for(var e=0;e<t.length;e++){var n=t[e];t[e]=[360*(n.x+s)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+a)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(r=0;r<c.length;r++)h[r]=c[r][0];u(c=h);break;case 2:for(r=0;r<c.length;r++)u(c[r]);break;case 3:for(c=function(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var s=Fu(t[o]);0!==s&&(void 0===r&&(r=s<0),r===s<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}return n&&i.push(n),i}(c),r=0;r<c.length;r++)for(i=0;i<c[r].length;i++)u(c[r][i])}1===c.length?c=c[0]:l="Multi"+l;var p={type:"Feature",geometry:{type:l,coordinates:c},properties:this.properties};return"id"in this&&(p.id=this.id),p};var Uu=ju,Vu=qu;function qu(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Wu,this,e),this.length=this._features.length}function Wu(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(n))}qu.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Uu(this._pbf,e,this.extent,this._keys,this._values)};var Gu=Vu;function $u(t,e,n){if(3===t){var r=new Gu(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}var Hu=Ru.VectorTile=function(t,e){this.layers=t.readFields($u,{},e)},Zu=Ru.VectorTileFeature=ju;function Yu(t,e,n,r){const i=[],o=0===r?(t,e,n,r,i,o)=>{t.push(new x(o,n+(o-e)/(r-e)*(i-n)))}:(t,e,n,r,i,o)=>{t.push(new x(e+(o-n)/(i-n)*(r-e),o))};for(const s of t){const t=[];for(const i of s){if(i.length<=2)continue;const s=[];for(let t=0;t<i.length-1;t++){const a=i[t].x,c=i[t].y,l=i[t+1].x,u=i[t+1].y,h=0===r?a:c,p=0===r?l:u;h<e?p>e&&o(s,a,c,l,u,e):h>n?p<n&&o(s,a,c,l,u,n):s.push(i[t]),p<e&&h>=e&&o(s,a,c,l,u,e),p>n&&h<=n&&o(s,a,c,l,u,n)}let a=i[i.length-1];const c=0===r?a.x:a.y;c>=e&&c<=n&&s.push(a),s.length&&(a=s[s.length-1],s[0].x===a.x&&s[0].y===a.y||s.push(s[0]),t.push(s))}t.length&&i.push(t)}return i}Ru.VectorTileLayer=Vu;const Xu=Zu.types,Ku=Math.pow(2,13);function Ju(t,e,n,r,i,o,s,a){t.emplaceBack((e<<1)+s,(n<<1)+o,(Math.floor(r*Ku)<<1)+i,Math.round(a))}function Qu(t,e,n){const r=16384;t.emplaceBack(e.x,e.y,e.z,n[0]*r,n[1]*r,n[2]*r)}class th{constructor(){this.acc=new x(0,0),this.polyCount=[]}startRing(t){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new x(t.x,t.y),this.max=new x(t.x,t.y))}append(t,e){this.currentPolyCount.edges++,this.acc._add(t);const n=this.min,r=this.max;t.x<n.x?n.x=t.x:t.x>r.x&&(r.x=t.x),t.y<n.y?n.y=t.y:t.y>r.y&&(r.y=t.y),((0===t.x||t.x===ca)&&t.x===e.x)!=((0===t.y||t.y===ca)&&t.y===e.y)&&this.processBorderOverlap(t,e),e.x<0!=t.x<0&&this.addBorderIntersection(0,Dn(e.y,t.y,(0-e.x)/(t.x-e.x))),e.x>ca!=t.x>ca&&this.addBorderIntersection(1,Dn(e.y,t.y,(ca-e.x)/(t.x-e.x))),e.y<0!=t.y<0&&this.addBorderIntersection(2,Dn(e.x,t.x,(0-e.y)/(t.y-e.y))),e.y>ca!=t.y>ca&&this.addBorderIntersection(3,Dn(e.x,t.x,(ca-e.y)/(t.y-e.y)))}addBorderIntersection(t,e){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const n=this.borders[t];e<n[0]&&(n[0]=e),e>n[1]&&(n[1]=e)}processBorderOverlap(t,e){if(t.x===e.x){if(t.y===e.y)return;const n=0===t.x?0:1;this.addBorderIntersection(n,e.y),this.addBorderIntersection(n,t.y)}else{const n=0===t.y?2:3;this.addBorderIntersection(n,e.x),this.addBorderIntersection(n,t.x)}}centroid(){const t=this.polyCount.reduce(((t,e)=>t+e.edges),0);return 0!==t?this.acc.div(t)._round():new x(0,0)}span(){return new x(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce(((t,e)=>t+ +(e[0]!==Number.MAX_VALUE)),0)}}class eh{constructor(t){this.zoom=t.zoom,this.canonical=t.canonical,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=t.projection,this.layoutVertexArray=new Go,this.centroidVertexArray=new Ts,this.indexArray=new os,this.programConfigurations=new Ks(t.layers,t.zoom),this.segments=new aa,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.enableTerrain=t.enableTerrain}populate(t,e,n,r){this.features=[],this.hasPattern=ku("fill-extrusion",this.layers,e),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(t){const e=Math.exp(Math.PI*(1-t.y/(1<<t.z)*2));return 80150034*e/(e*e+1)/ca/(1<<t.z)}(n),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:i,id:o,index:s,sourceLayerIndex:a}of t){const t=this.layers[0]._featureFilter.needGeometry,c=cl(i,t);if(!this.layers[0]._featureFilter.filter(new To(this.zoom),c,n))continue;const l={id:o,sourceLayerIndex:a,index:s,geometry:t?c.geometry:al(i,n,r),properties:i.properties,type:i.type,patterns:{}},u=this.layoutVertexArray.length;this.hasPattern?this.features.push(Au("fill-extrusion",this.layers,l,this.zoom,e)):this.addFeature(l,l.geometry,s,n,{},e.availableImages,r),e.featureIndex.insert(i,l.geometry,s,a,this.index,u)}this.sortBorders()}addFeatures(t,e,n,r,i){for(const t of this.features){const{geometry:o}=t;this.addFeature(t,o,t.index,e,n,r,i)}this.sortBorders()}update(t,e,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Du),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=t.createVertexBuffer(this.layoutVertexExtArray,Lu.members,!0))),this.programConfigurations.upload(t),this.uploaded=!0}uploadCentroid(t){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,Pu.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,e,n,r,i,o,s){const a=[new x(0,0),new x(ca,ca)],c=s.projection,l="globe"===c.name,u=this.enableTerrain&&!l?new th:null,h="Polygon"===Xu[t.type];l&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Xo);const p=Tu(e,500);for(let t=p.length-1;t>=0;t--){const e=p[t];(0===e.length||(f=e[0]).every((t=>t.x<=0))||f.every((t=>t.x>=ca))||f.every((t=>t.y<=0))||f.every((t=>t.y>=ca)))&&p.splice(t,1)}var f;let d;if(l)d=lh(p,a,r);else{d=[];for(const t of p)d.push({polygon:t,bounds:a})}const g=h?this.edgeRadius:0;for(const{polygon:t,bounds:e}of d){let n=0,i=0;for(const e of t)h&&!e[0].equals(e[e.length-1])&&e.push(e[0]),i+=h?e.length-1:e.length;const o=this.segments.prepareSegment((h?5:4)*i,this.layoutVertexArray,this.indexArray);if(h){const e=[],i=[];n=o.vertexLength;for(const n of t){let s,a;n.length&&n!==t[0]&&i.push(e.length/2),s=n[1].sub(n[0])._perp()._unit();for(let t=1;t<n.length;t++){const i=n[t],u=n[t===n.length-1?1:t+1];let{x:h,y:p}=i;if(g){a=u.sub(i)._perp()._unit();const t=s.add(a)._unit(),e=g*Math.min(4,1/(s.x*t.x+s.y*t.y));h+=e*t.x,p+=e*t.y,s=a}Ju(this.layoutVertexArray,h,p,0,0,1,1,0),o.vertexLength++,e.push(i.x,i.y),l&&Qu(this.layoutVertexExtArray,c.projectTilePoint(h,p,r),c.upVector(r,h,p))}}const s=vu(e,i);for(let t=0;t<s.length;t+=3)this.indexArray.emplaceBack(n+s[t],n+s[t+2],n+s[t+1]),o.primitiveLength++}for(const i of t){u&&i.length&&u.startRing(i[0]);let t,s,a,p=i.length>4&&sh(i[i.length-2],i[0],i[1]),f=g?rh(i[i.length-2],i[0],i[1],g):0;s=i[1].sub(i[0])._perp()._unit();let d=!0;for(let m=1,y=0;m<i.length;m++){let _=i[m-1],v=i[m];const x=i[m===i.length-1?1:m+1];if(u&&h&&u.currentPolyCount.top++,oh(v,_,e)){g&&(s=x.sub(v)._perp()._unit(),d=!d);continue}u&&u.append(v,_);const b=v.sub(_)._perp(),w=b.x/(Math.abs(b.x)+Math.abs(b.y)),E=b.y>0?1:0,T=_.dist(v);if(y+T>32768&&(y=0),g){a=x.sub(v)._perp()._unit();let t=ih(_,v,x,nh(s,a),g);isNaN(t)&&(t=0);const e=v.sub(_)._unit();_=_.add(e.mult(f))._round(),v=v.add(e.mult(-t))._round(),f=t,s=a}const S=o.vertexLength,k=i.length>4&&sh(_,v,x);let A=ah(y,p,d);if(Ju(this.layoutVertexArray,_.x,_.y,w,E,0,0,A),Ju(this.layoutVertexArray,_.x,_.y,w,E,0,1,A),y+=T,A=ah(y,k,!d),p=k,Ju(this.layoutVertexArray,v.x,v.y,w,E,0,0,A),Ju(this.layoutVertexArray,v.x,v.y,w,E,0,1,A),o.vertexLength+=4,this.indexArray.emplaceBack(S+0,S+1,S+2),this.indexArray.emplaceBack(S+1,S+3,S+2),o.primitiveLength+=2,g){const r=n+(1===m?i.length-2:m-2),s=1===m?n:r+1;if(this.indexArray.emplaceBack(S+1,r,S+3),this.indexArray.emplaceBack(r,s,S+3),o.primitiveLength+=2,void 0===t&&(t=S),!oh(x,i[m],e)){const e=m===i.length-1?t:o.vertexLength;this.indexArray.emplaceBack(S+2,S+3,e),this.indexArray.emplaceBack(S+3,e+1,e),this.indexArray.emplaceBack(S+3,s,e+1),o.primitiveLength+=3}d=!d}if(l){const t=this.layoutVertexExtArray,e=c.projectTilePoint(_.x,_.y,r),n=c.projectTilePoint(v.x,v.y,r),i=c.upVector(r,_.x,_.y),o=c.upVector(r,v.x,v.y);Qu(t,e,i),Qu(t,e,i),Qu(t,n,o),Qu(t,n,o)}}h&&(n+=i.length-1)}}if(u&&u.polyCount.length>0){if(u.borders){u.vertexArrayOffset=this.centroidVertexArray.length;const t=u.borders,e=this.featuresOnBorder.push(u)-1;for(let n=0;n<4;n++)t[n][0]!==Number.MAX_VALUE&&this.borders[n].push(e)}this.encodeCentroid(u.borders?void 0:u.centroid(),u)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,o,r)}sortBorders(){for(let t=0;t<4;t++)this.borders[t].sort(((e,n)=>this.featuresOnBorder[e].borders[t][0]-this.featuresOnBorder[n].borders[t][0]))}encodeCentroid(t,e,n=!0){let r,i;if(t)if(0!==t.y){const n=e.span()._mult(this.tileToMeter);r=(Math.max(t.x,1)<<3)+Math.min(7,Math.round(n.x/10)),i=(Math.max(t.y,1)<<3)+Math.min(7,Math.round(n.y/10))}else r=Math.ceil(7*(t.x+450)),i=0;else r=0,i=+n;let o=n?this.centroidVertexArray.length:e.vertexArrayOffset;for(const t of e.polyCount){n&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*t.edges+t.top);for(let e=0;e<t.top;e++)this.centroidVertexArray.emplace(o++,r,i);for(let e=0;e<2*t.edges;e++)this.centroidVertexArray.emplace(o++,0,i),this.centroidVertexArray.emplace(o++,r,i)}}}function nh(t,e){const n=t.add(e)._unit();return t.x*n.x+t.y*n.y}function rh(t,e,n,r){const i=e.sub(t)._perp()._unit(),o=n.sub(e)._perp()._unit();return ih(t,e,n,nh(i,o),r)}function ih(t,e,n,r,i){const o=Math.sqrt(1-r*r);return Math.min(t.dist(e)/3,e.dist(n)/3,i*o/r)}function oh(t,e,n){return t.x<n[0].x&&e.x<n[0].x||t.x>n[1].x&&e.x>n[1].x||t.y<n[0].y&&e.y<n[0].y||t.y>n[1].y&&e.y>n[1].y}function sh(t,e,n){if(t.x<0||t.x>=ca||e.x<0||e.x>=ca||n.x<0||n.x>=ca)return!1;const r=n.sub(e),i=r.perp(),o=t.sub(e);return(r.x*o.x+r.y*o.y)/Math.sqrt((r.x*r.x+r.y*r.y)*(o.x*o.x+o.y*o.y))>-.866&&i.x*o.x+i.y*o.y<0}function ah(t,e,n){const r=e?2|t:-3&t;return n?1|r:-2&r}function ch(){const t=Math.PI/32,e=Math.tan(t),n=Fc;return n*Math.sqrt(1+2*e*e)-n}function lh(t,e,n){const r=1<<n.z,i=Zc(n.x/r),o=Zc((n.x+1)/r),s=Yc(n.y/r),a=Yc((n.y+1)/r);return function(t,e,n,r,i=0,o){const s=[];if(!t.length||!n||!r)return s;const a=(t,e)=>{for(const n of t)s.push({polygon:n,bounds:e})},c=Math.ceil(Math.log2(n)),l=Math.ceil(Math.log2(r)),u=c-l,h=[];for(let t=0;t<Math.abs(u);t++)h.push(u>0?0:1);for(let t=0;t<Math.min(c,l);t++)h.push(0),h.push(1);let p=t;if(p=Yu(p,e[0].y-i,e[1].y+i,1),p=Yu(p,e[0].x-i,e[1].x+i,0),!p.length)return s;const f=[];for(h.length?f.push({polygons:p,bounds:e,depth:0}):a(p,e);f.length;){const t=f.pop(),e=t.depth,n=h[e],r=t.bounds[0],s=t.bounds[1],c=0===n?r.x:r.y,l=0===n?s.x:s.y,u=o?o(n,c,l):.5*(c+l),p=Yu(t.polygons,c-i,u+i,n),d=Yu(t.polygons,u-i,l+i,n);if(p.length){const t=[r,new x(0===n?u:s.x,1===n?u:s.y)];h.length>e+1?f.push({polygons:p,bounds:t,depth:e+1}):a(p,t)}if(d.length){const t=[new x(0===n?u:r.x,1===n?u:r.y),s];h.length>e+1?f.push({polygons:d,bounds:t,depth:e+1}):a(d,t)}}return s}(t,e,Math.ceil((o-i)/11.25),Math.ceil((s-a)/11.25),1,((t,e,i)=>{if(0===t)return.5*(e+i);{const t=Yc((n.y+e/ca)/r);return($c(.5*(Yc((n.y+i/ca)/r)+t))*r-n.y)*ca}}))}Ki(eh,"FillExtrusionBucket",{omit:["layers","features"]}),Ki(th,"PartMetadata");const uh=new No({"fill-extrusion-edge-radius":new Lo(ne["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var hh={paint:new No({"fill-extrusion-opacity":new Lo(ne["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Do(ne["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Lo(ne["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Lo(ne["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Do(ne["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Do(ne["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Do(ne["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Lo(ne["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Lo(ne["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Lo(ne["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new Lo(ne["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:uh};function ph(t,e,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}class fh{constructor(t,e,n){this.z=t,this.x=e,this.y=n,this.key=mh(0,t,t,e,n)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,e){const n=function(t,e,n){var r=ph(256*t,256*(e=Math.pow(2,n)-e-1),n),i=ph(256*(t+1),256*(e+1),n);return r[0]+","+r[1]+","+i[0]+","+i[1]}(this.x,this.y,this.z),r=function(t,e,n){let r,i="";for(let o=t;o>0;o--)r=1<<o-1,i+=(e&r?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",r).replace("{bbox-epsg-3857}",n)}toString(){return`${this.z}/${this.x}/${this.y}`}}class dh{constructor(t,e){this.wrap=t,this.canonical=e,this.key=mh(t,e.z,e.z,e.x,e.y)}}class gh{constructor(t,e,n,r,i){this.overscaledZ=t,this.wrap=e,this.canonical=new fh(n,+r,+i),this.key=0===e&&t===n?this.canonical.key:mh(e,t,n,r,i)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){const e=this.canonical.z-t;return t>this.canonical.z?new gh(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new gh(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)}calculateScaledKey(t,e=!0){if(this.overscaledZ===t&&e)return this.key;if(t>this.canonical.z)return mh(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y);{const n=this.canonical.z-t;return mh(this.wrap*+e,t,t,this.canonical.x>>n,this.canonical.y>>n)}}isChildOf(t){if(t.wrap!==this.wrap)return!1;const e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e}children(t){if(this.overscaledZ>=t)return[new gh(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const e=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new gh(e,this.wrap,e,n,r),new gh(e,this.wrap,e,n+1,r),new gh(e,this.wrap,e,n,r+1),new gh(e,this.wrap,e,n+1,r+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new gh(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new gh(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new dh(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function mh(t,e,n,r,i){const o=1<<Math.min(n,22);let s=o*(i%o)+r%o;return t&&n<22&&(s+=o*o*((t<0?-2*t-1:2*t)%(1<<2*(22-n)))),16*(32*s+n)+(e-n)}Ki(fh,"CanonicalTileID"),Ki(gh,"OverscaledTileID",{omit:["projMatrix"]});class yh extends x{constructor(t,e,n){super(t,e),this.z=n}}function _h(t,e){return t.x*e.x+t.y*e.y}function vh(t,e){if(1===t.length){let n=0;const r=e[n++];let i;for(;!i||r.equals(i);)if(i=e[n++],!i)return 1/0;for(;n<e.length;n++){const o=e[n],s=t[0],a=i.sub(r),c=o.sub(r),l=s.sub(r),u=_h(a,a),h=_h(a,c),p=_h(c,c),f=_h(l,a),d=_h(l,c),g=u*p-h*h,m=(p*f-h*d)/g,y=(u*d-h*f)/g,_=r.z*(1-m-y)+i.z*m+o.z*y;if(isFinite(_))return _}return 1/0}{let t=1/0;for(const n of e)t=Math.min(t,n.z);return t}}function xh(t,e,n,r,i,o,s,a){const c=s*i.getElevationAt(t,e,!0,!0),l=0!==o[0],u=l?0===o[1]?s*(o[0]/7-450):s*function(t,e,n){const r=Math.floor(e[0]/8),i=Math.floor(e[1]/8),o=10*(e[0]-8*r),s=10*(e[1]-8*i),a=t.getElevationAt(r,i,!0,!0),c=t.getMeterToDEM(n),l=Math.floor(.5*(o*c-1)),u=Math.floor(.5*(s*c-1)),h=t.tileCoordToPixel(r,i),p=2*l+1,f=2*u+1,d=function(t,e,n,r,i){return[t.getElevationAtPixel(e,n,!0),t.getElevationAtPixel(e+i,n,!0),t.getElevationAtPixel(e,n+i,!0),t.getElevationAtPixel(e+r,n+i,!0)]}(t,h.x-l,h.y-u,p,f),g=Math.abs(d[0]-d[1]),m=Math.abs(d[2]-d[3]),y=Math.abs(d[0]-d[2])+Math.abs(d[1]-d[3]),_=Math.min(.25,.5*c*(g+m)/p),v=Math.min(.25,.5*c*y/f);return a+Math.max(_*o,v*s)}(i,o,a):c;return{base:c+(0===n)?-1:n,top:l?Math.max(u+r,c+n+2):c+r}}const bh=Uo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:wh}=bh,Eh=Uo([{name:"a_packed",components:4,type:"Float32"}]),{members:Th}=Eh,Sh=Zu.types,kh=Math.cos(Math.PI/180*37.5);class Ah{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.projection=t.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((t=>{this.gradients[t.id]={}})),this.layoutVertexArray=new $o,this.layoutVertexArray2=new Ho,this.indexArray=new os,this.programConfigurations=new Ks(t.layers,t.zoom),this.segments=new aa,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n,r){this.hasPattern=ku("line",this.layers,e);const i=this.layers[0].layout.get("line-sort-key"),o=[];for(const{feature:e,id:s,index:a,sourceLayerIndex:c}of t){const t=this.layers[0]._featureFilter.needGeometry,l=cl(e,t);if(!this.layers[0]._featureFilter.filter(new To(this.zoom),l,n))continue;const u=i?i.evaluate(l,{},n):void 0,h={id:s,properties:e.properties,type:e.type,sourceLayerIndex:c,index:a,geometry:t?l.geometry:al(e,n,r),patterns:{},sortKey:u};o.push(h)}i&&o.sort(((t,e)=>t.sortKey-e.sortKey));const{lineAtlas:s,featureIndex:a}=e,c=this.addConstantDashes(s);for(const r of o){const{geometry:i,index:o,sourceLayerIndex:l}=r;if(c&&this.addFeatureDashes(r,s),this.hasPattern){const t=Au("line",this.layers,r,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(r,i,o,n,s.positions,e.availableImages);a.insert(t[o].feature,i,o,l,this.index)}}addConstantDashes(t){let e=!1;for(const n of this.layers){const r=n.paint.get("line-dasharray").value,i=n.layout.get("line-cap").value;if("constant"!==r.kind||"constant"!==i.kind)e=!0;else{const e=i.value,n=r.value;if(!n)continue;t.addDash(n,e)}}return e}addFeatureDashes(t,e){const n=this.zoom;for(const r of this.layers){const i=r.paint.get("line-dasharray").value,o=r.layout.get("line-cap").value;if("constant"===i.kind&&"constant"===o.kind)continue;let s,a;if("constant"===i.kind){if(s=i.value,!s)continue}else s=i.evaluate({zoom:n},t);a="constant"===o.kind?o.value:o.evaluate({zoom:n},t),e.addDash(s,a),t.patterns[r.id]=e.getKey(s,a)}}update(t,e,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n,r)}addFeatures(t,e,n,r,i){for(const t of this.patternFeatures)this.addFeature(t,t.geometry,t.index,e,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,Th)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,wh),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,e,n,r,i,o){const s=this.layers[0].layout,a=s.get("line-join").evaluate(t,{}),c=s.get("line-cap").evaluate(t,{}),l=s.get("line-miter-limit"),u=s.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const n of e)this.addLine(n,t,a,c,l,u);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,o,r)}addLine(t,e,n,r,i,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let e=0;e<t.length-1;e++)this.totalDistance+=t[e].dist(t[e+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const s="Polygon"===Sh[e.type];let a=t.length;for(;a>=2&&t[a-1].equals(t[a-2]);)a--;let c=0;for(;c<a-1&&t[c].equals(t[c+1]);)c++;if(a<(s?3:2))return;"bevel"===n&&(i=1.05);const l=this.overscaling<=16?15*ca/(512*this.overscaling):0,u=this.segments.prepareSegment(10*a,this.layoutVertexArray,this.indexArray);let h,p,f,d,g;this.e1=this.e2=-1,s&&(h=t[a-2],g=t[c].sub(h)._unit()._perp());for(let e=c;e<a;e++){if(f=e===a-1?s?t[c+1]:void 0:t[e+1],f&&t[e].equals(f))continue;g&&(d=g),h&&(p=h),h=t[e],g=f?f.sub(h)._unit()._perp():d,d=d||g;let m=d.add(g);0===m.x&&0===m.y||m._unit();const y=d.x*g.x+d.y*g.y,_=m.x*g.x+m.y*g.y,v=0!==_?1/_:1/0,x=2*Math.sqrt(2-2*_),b=_<kh&&p&&f,w=d.x*g.y-d.y*g.x>0;if(b&&e>c){const t=h.dist(p);if(t>2*l){const e=h.sub(h.sub(p)._mult(l/t)._round());this.updateDistance(p,e),this.addCurrentVertex(e,d,0,0,u),p=e}}const E=p&&f;let T=E?n:s?"butt":r;if(E&&"round"===T&&(v<o?T="miter":v<=2&&(T="fakeround")),"miter"===T&&v>i&&(T="bevel"),"bevel"===T&&(v>2&&(T="flipbevel"),v<i&&(T="miter")),p&&this.updateDistance(p,h),"miter"===T)m._mult(v),this.addCurrentVertex(h,m,0,0,u);else if("flipbevel"===T){if(v>100)m=g.mult(-1);else{const t=v*d.add(g).mag()/d.sub(g).mag();m._perp()._mult(t*(w?-1:1))}this.addCurrentVertex(h,m,0,0,u),this.addCurrentVertex(h,m.mult(-1),0,0,u)}else if("bevel"===T||"fakeround"===T){const t=-Math.sqrt(v*v-1),e=w?t:0,n=w?0:t;if(p&&this.addCurrentVertex(h,d,e,n,u),"fakeround"===T){const t=Math.round(180*x/Math.PI/20);for(let e=1;e<t;e++){let n=e/t;if(.5!==n){const t=n-.5;n+=n*t*(n-1)*((1.0904+y*(y*(3.55645-1.43519*y)-3.2452))*t*t+(.848013+y*(.215638*y-1.06021)))}const r=g.sub(d)._mult(n)._add(d)._unit()._mult(w?-1:1);this.addHalfVertex(h,r.x,r.y,!1,w,0,u)}}f&&this.addCurrentVertex(h,g,-e,-n,u)}else if("butt"===T)this.addCurrentVertex(h,m,0,0,u);else if("square"===T){const t=p?1:-1;p||this.addCurrentVertex(h,m,t,t,u),this.addCurrentVertex(h,m,0,0,u),p&&this.addCurrentVertex(h,m,t,t,u)}else"round"===T&&(p&&(this.addCurrentVertex(h,d,0,0,u),this.addCurrentVertex(h,d,1,1,u,!0)),f&&(this.addCurrentVertex(h,g,-1,-1,u,!0),this.addCurrentVertex(h,g,0,0,u)));if(b&&e<a-1){const t=h.dist(f);if(t>2*l){const e=h.add(f.sub(h)._mult(l/t)._round());this.updateDistance(h,e),this.addCurrentVertex(e,g,0,0,u),h=e}}}}addCurrentVertex(t,e,n,r,i,o=!1){const s=e.y*r-e.x,a=-e.y-e.x*r;this.addHalfVertex(t,e.x+e.y*n,e.y-e.x*n,o,!1,n,i),this.addHalfVertex(t,s,a,o,!0,-r,i)}addHalfVertex({x:t,y:e},n,r,i,o,s,a){this.layoutVertexArray.emplaceBack((t<<1)+(i?1:0),(e<<1)+(o?1:0),Math.round(63*n)+128,Math.round(63*r)+128,1+(0===s?0:s<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const c=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,c),a.primitiveLength++),o?this.e2=c:this.e1=c}updateScaledDistance(){if(this.lineClips){const t=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=t*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(t,e){this.distance+=t.dist(e),this.updateScaledDistance()}}Ki(Ah,"LineBucket",{omit:["layers","patternFeatures"]});const Mh=new No({"line-cap":new Do(ne.layout_line["line-cap"]),"line-join":new Do(ne.layout_line["line-join"]),"line-miter-limit":new Lo(ne.layout_line["line-miter-limit"]),"line-round-limit":new Lo(ne.layout_line["line-round-limit"]),"line-sort-key":new Do(ne.layout_line["line-sort-key"])});var Ih={paint:new No({"line-opacity":new Do(ne.paint_line["line-opacity"]),"line-color":new Do(ne.paint_line["line-color"]),"line-translate":new Lo(ne.paint_line["line-translate"]),"line-translate-anchor":new Lo(ne.paint_line["line-translate-anchor"]),"line-width":new Do(ne.paint_line["line-width"]),"line-gap-width":new Do(ne.paint_line["line-gap-width"]),"line-offset":new Do(ne.paint_line["line-offset"]),"line-blur":new Do(ne.paint_line["line-blur"]),"line-dasharray":new Do(ne.paint_line["line-dasharray"]),"line-pattern":new Do(ne.paint_line["line-pattern"]),"line-gradient":new Ro(ne.paint_line["line-gradient"]),"line-trim-offset":new Lo(ne.paint_line["line-trim-offset"])}),layout:Mh};const Ch=new class extends Do{possiblyEvaluate(t,e){return e=new To(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,transition:e.transition}),super.possiblyEvaluate(t,e)}evaluate(t,e,n,r){return e=D({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(t,e,n,r)}}(Ih.paint.properties["line-width"].specification);function Oh(t,e){return e>0?e+2*t:t}Ch.useIntegerZoom=!0;const Ph=Uo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Lh=Uo([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Dh=Uo([{name:"a_projected_pos",components:4,type:"Float32"}],4);Uo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Rh=Uo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Nh=Uo([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Uo([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const jh=Uo([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),zh=Uo([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Uo([{name:"triangle",components:3,type:"Uint16"}]),Uo([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Uo([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Uo([{type:"Float32",name:"offsetX"}]),Uo([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Bh=24;const Fh=128;function Uh(t,e){const{expression:n}=e;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new To(t+1))};if("source"===n.kind)return{kind:"source"};{const{zoomStops:e,interpolationType:r}=n;let i=0;for(;i<e.length&&e[i]<=t;)i++;i=Math.max(0,i-1);let o=i;for(;o<e.length&&e[o]<t+1;)o++;o=Math.min(e.length-1,o);const s=e[i],a=e[o];return"composite"===n.kind?{kind:"composite",minZoom:s,maxZoom:a,interpolationType:r}:{kind:"camera",minZoom:s,maxZoom:a,minSize:n.evaluate(new To(s)),maxSize:n.evaluate(new To(a)),interpolationType:r}}}function Vh(t,{uSize:e,uSizeT:n},{lowerSize:r,upperSize:i}){return"source"===t.kind?r/Fh:"composite"===t.kind?Dn(r/Fh,i/Fh,n):e}function qh(t,e){let n=0,r=0;if("constant"===t.kind)r=t.layoutSize;else if("source"!==t.kind){const{interpolationType:i,minZoom:o,maxZoom:s}=t,a=i?I(nr.interpolationFactor(i,e,o,s),0,1):0;"camera"===t.kind?r=Dn(t.minSize,t.maxSize,a):n=a}return{uSizeT:n,uSize:r}}var Wh=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Fh,evaluateSizeForFeature:Vh,evaluateSizeForZoom:qh,getSizeData:Uh});function Gh(t,e,n){return t.sections.forEach((t=>{t.text=function(t,e,n){const r=e.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?t=t.toLocaleUpperCase():"lowercase"===r&&(t=t.toLocaleLowerCase()),Eo.applyArabicShaping&&(t=Eo.applyArabicShaping(t)),t}(t.text,e,n)})),t}const $h={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂","←":"↑","→":"↓"};function Hh(t){return"︶"===t||"﹈"===t||"︸"===t||"﹄"===t||"﹂"===t||"︾"===t||"︼"===t||"︺"===t||"︘"===t||"﹀"===t||"︐"===t||"︓"===t||"︔"===t||"｀"===t||"￣"===t||"︑"===t||"︒"===t}function Zh(t){return"︵"===t||"﹇"===t||"︷"===t||"﹃"===t||"﹁"===t||"︽"===t||"︻"===t||"︹"===t||"︗"===t||"︿"===t}var Yh=Jh,Xh=function(t,e,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,l=c>>1,u=-7,h=n?i-1:0,p=n?-1:1,f=t[e+h];for(h+=p,o=f&(1<<-u)-1,f>>=-u,u+=a;u>0;o=256*o+t[e+h],h+=p,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=r;u>0;s=256*s+t[e+h],h+=p,u-=8);if(0===o)o=1-l;else{if(o===c)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),o-=l}return(f?-1:1)*s*Math.pow(2,o-r)},Kh=function(t,e,n,r,i,o){var s,a,c,l=8*o-i-1,u=(1<<l)-1,h=u>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),(e+=s+h>=1?p/c:p*Math.pow(2,1-h))*c>=2&&(s++,c/=2),s+h>=u?(a=0,s=u):s+h>=1?(a=(e*c-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[n+f]=255&a,f+=d,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;t[n+f]=255&s,f+=d,s/=256,l-=8);t[n+f-d]|=128*g};function Jh(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Jh.Varint=0,Jh.Fixed64=1,Jh.Bytes=2,Jh.Fixed32=5;var Qh=4294967296,tp=1/Qh,ep="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function np(t){return t.type===Jh.Bytes?t.readVarint()+t.pos:t.pos+1}function rp(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function ip(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function op(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function sp(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function ap(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function cp(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function lp(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function up(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function hp(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function pp(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function fp(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function dp(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function gp(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function mp(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}Jh.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=dp(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=mp(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=dp(this.buf,this.pos)+dp(this.buf,this.pos+4)*Qh;return this.pos+=8,t},readSFixed64:function(){var t=dp(this.buf,this.pos)+mp(this.buf,this.pos+4)*Qh;return this.pos+=8,t},readFloat:function(){var t=Xh(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Xh(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:function(t,e,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return rp(t,r,e);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return rp(t,r,e);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return rp(t,r,e);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return rp(t,r,e);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return rp(t,r,e);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return rp(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&ep?function(t,e,n){return ep.decode(t.subarray(e,n))}(this.buf,e,t):function(t,e,n){for(var r="",i=e;i<n;){var o,s,a,c=t[i],l=null,u=c>239?4:c>223?3:c>191?2:1;if(i+u>n)break;1===u?c<128&&(l=c):2===u?128==(192&(o=t[i+1]))&&(l=(31&c)<<6|63&o)<=127&&(l=null):3===u?(s=t[i+2],128==(192&(o=t[i+1]))&&128==(192&s)&&((l=(15&c)<<12|(63&o)<<6|63&s)<=2047||l>=55296&&l<=57343)&&(l=null)):4===u&&(s=t[i+2],a=t[i+3],128==(192&(o=t[i+1]))&&128==(192&s)&&128==(192&a)&&((l=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,u=1):l>65535&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),r+=String.fromCharCode(l),i+=u}return r}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Jh.Bytes)return t.push(this.readVarint(e));var n=np(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Jh.Bytes)return t.push(this.readSVarint());var e=np(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==Jh.Bytes)return t.push(this.readBoolean());var e=np(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Jh.Bytes)return t.push(this.readFloat());var e=np(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Jh.Bytes)return t.push(this.readDouble());var e=np(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Jh.Bytes)return t.push(this.readFixed32());var e=np(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Jh.Bytes)return t.push(this.readSFixed32());var e=np(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Jh.Bytes)return t.push(this.readFixed64());var e=np(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Jh.Bytes)return t.push(this.readSFixed64());var e=np(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Jh.Varint)for(;this.buf[this.pos++]>127;);else if(e===Jh.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Jh.Fixed32)this.pos+=4;else{if(e!==Jh.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),gp(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),gp(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),gp(this.buf,-1&t,this.pos),gp(this.buf,Math.floor(t*tp),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),gp(this.buf,-1&t,this.pos),gp(this.buf,Math.floor(t*tp),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,n.buf[n.pos]=127&(t>>>=7)}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&ip(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),Kh(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Kh(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&ip(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,Jh.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,op,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,sp,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,lp,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,ap,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,cp,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,up,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,hp,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,pp,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,fp,e)},writeBytesField:function(t,e){this.writeTag(t,Jh.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Jh.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Jh.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Jh.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Jh.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Jh.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Jh.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Jh.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Jh.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Jh.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var yp=d(Yh);const _p=3;function vp(t,e,n){e.glyphs=[],1===t&&n.readMessage(xp,e)}function xp(t,e,n){if(3===t){const{id:t,bitmap:r,width:i,height:o,left:s,top:a,advance:c}=n.readMessage(bp,{});e.glyphs.push({id:t,bitmap:new Bl({width:i+2*_p,height:o+2*_p},r),metrics:{width:i,height:o,left:s,top:a,advance:c}})}else 4===t?e.ascender=n.readSVarint():5===t&&(e.descender=n.readSVarint())}function bp(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}const wp=_p;function Ep(t){let e=0,n=0;for(const r of t)e+=r.w*r.h,n=Math.max(n,r.w);t.sort(((t,e)=>e.h-t.h));const r=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}];let i=0,o=0;for(const e of t)for(let t=r.length-1;t>=0;t--){const n=r[t];if(!(e.w>n.w||e.h>n.h)){if(e.x=n.x,e.y=n.y,o=Math.max(o,e.y+e.h),i=Math.max(i,e.x+e.w),e.w===n.w&&e.h===n.h){const e=r.pop();t<r.length&&(r[t]=e)}else e.h===n.h?(n.x+=e.w,n.w-=e.w):e.w===n.w?(n.y+=e.h,n.h-=e.h):(r.push({x:n.x+e.w,y:n.y,w:n.w-e.w,h:e.h}),n.y+=e.h,n.h-=e.h);break}}return{w:i,h:o,fill:e/(i*o)||0}}const Tp=1;class Sp{constructor(t,{pixelRatio:e,version:n,stretchX:r,stretchY:i,content:o}){this.paddedRect=t,this.pixelRatio=e,this.stretchX=r,this.stretchY=i,this.content=o,this.version=n}get tl(){return[this.paddedRect.x+Tp,this.paddedRect.y+Tp]}get br(){return[this.paddedRect.x+this.paddedRect.w-Tp,this.paddedRect.y+this.paddedRect.h-Tp]}get displaySize(){return[(this.paddedRect.w-2*Tp)/this.pixelRatio,(this.paddedRect.h-2*Tp)/this.pixelRatio]}}class kp{constructor(t,e){const n={},r={};this.haveRenderCallbacks=[];const i=[];this.addImages(t,n,i),this.addImages(e,r,i);const{w:o,h:s}=Ep(i),a=new Fl({width:o||1,height:s||1});for(const e in t){const r=t[e],i=n[e].paddedRect;Fl.copy(r.data,a,{x:0,y:0},{x:i.x+Tp,y:i.y+Tp},r.data)}for(const t in e){const n=e[t],i=r[t].paddedRect,o=i.x+Tp,s=i.y+Tp,c=n.data.width,l=n.data.height;Fl.copy(n.data,a,{x:0,y:0},{x:o,y:s},n.data),Fl.copy(n.data,a,{x:0,y:l-1},{x:o,y:s-1},{width:c,height:1}),Fl.copy(n.data,a,{x:0,y:0},{x:o,y:s+l},{width:c,height:1}),Fl.copy(n.data,a,{x:c-1,y:0},{x:o-1,y:s},{width:1,height:l}),Fl.copy(n.data,a,{x:0,y:0},{x:o+c,y:s},{width:1,height:l})}this.image=a,this.iconPositions=n,this.patternPositions=r}addImages(t,e,n){for(const r in t){const i=t[r],o={x:0,y:0,w:i.data.width+2*Tp,h:i.data.height+2*Tp};n.push(o),e[r]=new Sp(o,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}}patchUpdatedImages(t,e){this.haveRenderCallbacks=this.haveRenderCallbacks.filter((e=>t.hasImage(e))),t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const n in t.updatedImages)this.patchUpdatedImage(this.iconPositions[n],t.getImage(n),e),this.patchUpdatedImage(this.patternPositions[n],t.getImage(n),e)}patchUpdatedImage(t,e,n){if(!t||!e)return;if(t.version===e.version)return;t.version=e.version;const[r,i]=t.tl;n.update(e.data,void 0,{x:r,y:i})}}Ki(Sp,"ImagePosition"),Ki(kp,"ImageAtlas");const Ap={horizontal:1,vertical:2,horizontalOnly:3},Mp=-17;class Ip{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,e){const n=new Ip;return n.scale=t||1,n.fontStack=e,n}static forImage(t){const e=new Ip;return e.imageName=t,e}}class Cp{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,e){const n=new Cp;for(let r=0;r<t.sections.length;r++){const i=t.sections[r];i.image?n.addImageSection(i):n.addTextSection(i,e)}return n}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSections(){return this.sections}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(t){this.text=function(t,e){let n="";for(let r=0;r<t.length;r++){const i=t.charCodeAt(r+1)||null,o=t.charCodeAt(r-1)||null;n+=!e&&(i&&ao(i)&&!$h[t[r+1]]||o&&ao(o)&&!$h[t[r-1]])||!$h[t[r]]?t[r]:$h[t[r]]}return n}(this.text,t)}trim(){let t=0;for(let e=0;e<this.text.length&&Pp[this.text.charCodeAt(e)];e++)t++;let e=this.text.length;for(let n=this.text.length-1;n>=0&&n>=t&&Pp[this.text.charCodeAt(n)];n--)e--;this.text=this.text.substring(t,e),this.sectionIndex=this.sectionIndex.slice(t,e)}substring(t,e){const n=new Cp;return n.text=this.text.substring(t,e),n.sectionIndex=this.sectionIndex.slice(t,e),n.sections=this.sections,n}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((t,e)=>Math.max(t,this.sections[e].scale)),0)}addTextSection(t,e){this.text+=t.text,this.sections.push(Ip.forText(t.scale,t.fontStack||e));const n=this.sections.length-1;for(let e=0;e<t.text.length;++e)this.sectionIndex.push(n)}addImageSection(t){const e=t.image?t.image.name:"";if(0===e.length)return void $("Can't add FormattedSection with an empty image.");const n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(Ip.forImage(e)),this.sectionIndex.push(this.sections.length-1)):$("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Op(t,e,n,r,i,o,s,a,c,l,u,h,p,f,d){const g=Cp.fromFeature(t,i);h===Ap.vertical&&g.verticalizePunctuation(p);let m=[];const y=function(t,e,n,r,i,o){if(!t)return[];const s=[],a=function(t,e,n,r,i,o){let s=0;for(let n=0;n<t.length();n++){const a=t.getSection(n);s+=Dp(t.getCharCode(n),a,r,i,e,o)}return s/Math.max(1,Math.ceil(s/n))}(t,e,n,r,i,o),c=t.text.indexOf("​")>=0;let l=0;for(let n=0;n<t.length();n++){const h=t.getSection(n),p=t.getCharCode(n);if(Pp[p]||(l+=Dp(p,h,r,i,e,o)),n<t.length()-1){const e=!((u=p)<11904||!(no["Bopomofo Extended"](u)||no.Bopomofo(u)||no["CJK Compatibility Forms"](u)||no["CJK Compatibility Ideographs"](u)||no["CJK Compatibility"](u)||no["CJK Radicals Supplement"](u)||no["CJK Strokes"](u)||no["CJK Symbols and Punctuation"](u)||no["CJK Unified Ideographs Extension A"](u)||no["CJK Unified Ideographs"](u)||no["Enclosed CJK Letters and Months"](u)||no["Halfwidth and Fullwidth Forms"](u)||no.Hiragana(u)||no["Ideographic Description Characters"](u)||no["Kangxi Radicals"](u)||no["Katakana Phonetic Extensions"](u)||no.Katakana(u)||no["Vertical Forms"](u)||no["Yi Radicals"](u)||no["Yi Syllables"](u)));(Lp[p]||e||h.imageName)&&s.push(jp(n+1,l,a,s,Np(p,t.getCharCode(n+1),e&&c),!1))}}var u;return zp(jp(t.length(),l,a,s,0,!0))}(g,l,o,e,r,f),{processBidirectionalText:_,processStyledBidirectionalText:v}=Eo;if(_&&1===g.sections.length){const t=_(g.toString(),y);for(const e of t){const t=new Cp;t.text=e,t.sections=g.sections;for(let n=0;n<e.length;n++)t.sectionIndex.push(0);m.push(t)}}else if(v){const t=v(g.text,g.sectionIndex,y);for(const e of t){const t=new Cp;t.text=e[0],t.sectionIndex=e[1],t.sections=g.sections,m.push(t)}}else m=function(t,e){const n=[],r=t.text;let i=0;for(const r of e)n.push(t.substring(i,r)),i=r;return i<r.length&&n.push(t.substring(i,r.length)),n}(g,y);const x=[],b={positionedLines:x,text:g.toString(),top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:h,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(t,e,n,r,i,o,s,a,c,l,u,h){let p=0,f=0,d=0;const g="right"===a?1:"left"===a?0:.5;let m=!1;for(const t of i){const n=t.getSections();for(const t of n){if(t.imageName)continue;const n=e[t.fontStack];if(n&&(m=void 0!==n.ascender&&void 0!==n.descender,!m))break}if(!m)break}let y=0;for(const s of i){s.trim();const i=s.getMaxScale(),a=(i-1)*Bh,v={positionedGlyphs:[],lineOffset:0};t.positionedLines[y]=v;const x=v.positionedGlyphs;let b=0;if(!s.length()){f+=o,++y;continue}let w=0,E=0;for(let o=0;o<s.length();o++){const a=s.getSection(o),d=s.getSectionIndex(o),g=s.getCharCode(o);let y=a.scale,v=null,T=null,S=null,k=Bh,A=0;const M=!(c===Ap.horizontal||!u&&!so(g)||u&&(Pp[g]||(_=g,no.Arabic(_)||no["Arabic Supplement"](_)||no["Arabic Extended-A"](_)||no["Arabic Presentation Forms-A"](_)||no["Arabic Presentation Forms-B"](_))));if(a.imageName){const e=r[a.imageName];if(!e)continue;S=a.imageName,t.iconsInText=t.iconsInText||!0,T=e.paddedRect;const n=e.displaySize;y=y*Bh/h,v={width:n[0],height:n[1],left:Tp,top:-wp,advance:M?n[1]:n[0],localGlyph:!1},A=m?-v.height*y:Mp+i*Bh-n[1]*y,k=v.advance;const o=(M?n[0]:n[1])*y-Bh*i;o>0&&o>b&&(b=o)}else{const t=n[a.fontStack];if(!t)continue;t[g]&&(T=t[g]);const r=e[a.fontStack];if(!r)continue;const o=r.glyphs[g];if(!o)continue;if(v=o.metrics,k=8203!==g?Bh:0,m){const t=void 0!==r.ascender?Math.abs(r.ascender):0,e=void 0!==r.descender?Math.abs(r.descender):0,n=(t+e)*y;w<n&&(w=n,E=(t-e)/2*y),A=-t*y}else A=Mp+(i-y)*Bh}M?(t.verticalizable=!0,x.push({glyph:g,imageName:S,x:p,y:f+A,vertical:M,scale:y,localGlyph:v.localGlyph,fontStack:a.fontStack,sectionIndex:d,metrics:v,rect:T}),p+=k*y+l):(x.push({glyph:g,imageName:S,x:p,y:f+A,vertical:M,scale:y,localGlyph:v.localGlyph,fontStack:a.fontStack,sectionIndex:d,metrics:v,rect:T}),p+=v.advance*y+l)}0!==x.length&&(d=Math.max(p-l,d),m?Fp(x,g,b,E,o*i/2):Fp(x,g,b,0,o/2)),p=0;const T=o*i+b;v.lineOffset=Math.max(b,a),f+=T,++y}var _;const v=f,{horizontalAlign:x,verticalAlign:b}=Bp(s);(function(t,e,n,r,i,o){const s=(e-n)*i,a=-o*r;for(const e of t)for(const t of e.positionedGlyphs)t.x+=s,t.y+=a})(t.positionedLines,g,x,b,d,v),t.top+=-b*v,t.bottom=t.top+v,t.left+=-x*d,t.right=t.left+d,t.hasBaseline=m}(b,e,n,r,m,s,a,c,h,l,p,d),!function(t){for(const e of t)if(0!==e.positionedGlyphs.length)return!1;return!0}(x)&&b}const Pp={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Lp={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Dp(t,e,n,r,i,o){if(e.imageName){const t=r[e.imageName];return t?t.displaySize[0]*e.scale*Bh/o+i:0}{const r=n[e.fontStack],o=r&&r.glyphs[t];return o?o.metrics.advance*e.scale+i:0}}function Rp(t,e,n,r){const i=Math.pow(t-e,2);return r?t<e?i/2:2*i:i+Math.abs(n)*n}function Np(t,e,n){let r=0;return 10===t&&(r-=1e4),n&&(r+=150),40!==t&&65288!==t||(r+=50),41!==e&&65289!==e||(r+=50),r}function jp(t,e,n,r,i,o){let s=null,a=Rp(e,n,i,o);for(const t of r){const r=Rp(e-t.x,n,i,o)+t.badness;r<=a&&(s=t,a=r)}return{index:t,x:e,priorBreak:s,badness:a}}function zp(t){return t?zp(t.priorBreak).concat(t.index):[]}function Bp(t){let e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function Fp(t,e,n,r,i){if(!(e||n||r||i))return;const o=t.length-1,s=t[o],a=(s.x+s.metrics.advance*s.scale)*e;for(let e=0;e<=o;e++)t[e].x-=a,t[e].y+=n+r+i}function Up(t,e,n){const{horizontalAlign:r,verticalAlign:i}=Bp(n),o=e[0]-t.displaySize[0]*r,s=e[1]-t.displaySize[1]*i;return{image:t,top:s,bottom:s+t.displaySize[1],left:o,right:o+t.displaySize[0]}}function Vp(t,e,n,r,i,o){const s=t.image;let a;if(s.content){const t=s.content,e=s.pixelRatio||1;a=[t[0]/e,t[1]/e,s.displaySize[0]-t[2]/e,s.displaySize[1]-t[3]/e]}const c=e.left*o,l=e.right*o;let u,h,p,f;"width"===n||"both"===n?(f=i[0]+c-r[3],h=i[0]+l+r[1]):(f=i[0]+(c+l-s.displaySize[0])/2,h=f+s.displaySize[0]);const d=e.top*o,g=e.bottom*o;return"height"===n||"both"===n?(u=i[1]+d-r[0],p=i[1]+g+r[2]):(u=i[1]+(d+g-s.displaySize[1])/2,p=u+s.displaySize[1]),{image:s,top:u,right:h,bottom:p,left:f,collisionPadding:a}}class qp extends x{constructor(t,e,n,r,i){super(t,e),this.angle=r,this.z=n,void 0!==i&&(this.segment=i)}clone(){return new qp(this.x,this.y,this.z,this.angle,this.segment)}}function Wp(t,e,n,r,i){if(void 0===e.segment)return!0;let o=e,s=e.segment+1,a=0;for(;a>-n/2;){if(s--,s<0)return!1;a-=t[s].dist(o),o=t[s]}a+=t[s].dist(t[s+1]),s++;const c=[];let l=0;for(;a<n/2;){const e=t[s],n=t[s+1];if(!n)return!1;let o=t[s-1].angleTo(e)-e.angleTo(n);for(o=Math.abs((o+3*Math.PI)%(2*Math.PI)-Math.PI),c.push({distance:a,angleDelta:o}),l+=o;a-c[0].distance>r;)l-=c.shift().angleDelta;if(l>i)return!1;s++,a+=e.dist(n)}return!0}function Gp(t){let e=0;for(let n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function $p(t,e,n){return t?.6*e*n:0}function Hp(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function Zp(t,e,n,r,i,o){const s=$p(n,i,o),a=Hp(n,r)*o;let c=0;const l=Gp(t)/2;for(let n=0;n<t.length-1;n++){const r=t[n],i=t[n+1],o=r.dist(i);if(c+o>l){const u=(l-c)/o,h=Dn(r.x,i.x,u),p=Dn(r.y,i.y,u),f=new qp(h,p,0,i.angleTo(r),n);return!s||Wp(t,f,a,s,e)?f:void 0}c+=o}}function Yp(t,e,n,r,i,o,s,a,c){const l=$p(r,o,s),u=Hp(r,i),h=u*s,p=0===t[0].x||t[0].x===c||0===t[0].y||t[0].y===c;return e-h<e/4&&(e=h+e/4),Xp(t,p?e/2*a%e:(u/2+2*o)*s*a%e,e,l,n,h,p,!1,c)}function Xp(t,e,n,r,i,o,s,a,c){const l=o/2,u=Gp(t);let h=0,p=e-n,f=[];for(let e=0;e<t.length-1;e++){const s=t[e],a=t[e+1],d=s.dist(a),g=a.angleTo(s);for(;p+n<h+d;){p+=n;const m=(p-h)/d,y=Dn(s.x,a.x,m),_=Dn(s.y,a.y,m);if(y>=0&&y<c&&_>=0&&_<c&&p-l>=0&&p+l<=u){const n=new qp(y,_,0,g,e);n._round(),r&&!Wp(t,n,o,r,i)||f.push(n)}}h+=d}return a||f.length||s||(f=Xp(t,h/2,n,r,i,o,s,!0,c)),f}function Kp(t,e,n,r,i){const o=[];for(let s=0;s<t.length;s++){const a=t[s];let c;for(let t=0;t<a.length-1;t++){let s=a[t],l=a[t+1];s.x<e&&l.x<e||(s.x<e?s=new x(e,s.y+(e-s.x)/(l.x-s.x)*(l.y-s.y))._round():l.x<e&&(l=new x(e,s.y+(e-s.x)/(l.x-s.x)*(l.y-s.y))._round()),s.y<n&&l.y<n||(s.y<n?s=new x(s.x+(n-s.y)/(l.y-s.y)*(l.x-s.x),n)._round():l.y<n&&(l=new x(s.x+(n-s.y)/(l.y-s.y)*(l.x-s.x),n)._round()),s.x>=r&&l.x>=r||(s.x>=r?s=new x(r,s.y+(r-s.x)/(l.x-s.x)*(l.y-s.y))._round():l.x>=r&&(l=new x(r,s.y+(r-s.x)/(l.x-s.x)*(l.y-s.y))._round()),s.y>=i&&l.y>=i||(s.y>=i?s=new x(s.x+(i-s.y)/(l.y-s.y)*(l.x-s.x),i)._round():l.y>=i&&(l=new x(s.x+(i-s.y)/(l.y-s.y)*(l.x-s.x),i)._round()),c&&s.equals(c[c.length-1])||(c=[s],o.push(c)),c.push(l)))))}}return o}Ki(qp,"Anchor");const Jp=1e20;function Qp(t,e,n,r,i,o,s,a,c){for(let l=e;l<e+r;l++)tf(t,n*o+l,o,i,s,a,c);for(let l=n;l<n+i;l++)tf(t,l*o+e,1,r,s,a,c)}function tf(t,e,n,r,i,o,s){o[0]=0,s[0]=-Jp,s[1]=Jp,i[0]=t[e];for(let a=1,c=0,l=0;a<r;a++){i[a]=t[e+a*n];const r=a*a;do{const t=o[c];l=(i[a]-i[t]+r-t*t)/(a-t)/2}while(l<=s[c]&&--c>-1);c++,o[c]=a,s[c]=l,s[c+1]=Jp}for(let a=0,c=0;a<r;a++){for(;s[c+1]<a;)c++;const r=o[c],l=a-r;t[e+a*n]=i[r]+l*l}}const ef=2,nf={none:0,ideographs:1,all:2};class rf{constructor(t,e,n){this.requestManager=t,this.localGlyphMode=e,this.localFontFamily=n,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(t){this.url=t}getGlyphs(t,e){const n=[];for(const e in t)for(const r of t[e])n.push({stack:e,id:r});P(n,(({stack:t,id:e},n)=>{let r=this.entries[t];r||(r=this.entries[t]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let i=r.glyphs[e];if(void 0!==i)return void n(null,{stack:t,id:e,glyph:i});if(i=this._tinySDF(r,t,e),i)return r.glyphs[e]=i,void n(null,{stack:t,id:e,glyph:i});const o=Math.floor(e/256);if(256*o>65535)return void n(new Error("glyphs > 65535 not supported"));if(r.ranges[o])return void n(null,{stack:t,id:e,glyph:i});let s=r.requests[o];s||(s=r.requests[o]=[],rf.loadGlyphRange(t,o,this.url,this.requestManager,((t,e)=>{if(e){r.ascender=e.ascender,r.descender=e.descender;for(const t in e.glyphs)this._doesCharSupportLocalGlyph(+t)||(r.glyphs[+t]=e.glyphs[+t]);r.ranges[o]=!0}for(const n of s)n(t,e);delete r.requests[o]}))),s.push(((r,i)=>{r?n(r):i&&n(null,{stack:t,id:e,glyph:i.glyphs[e]||null})}))}),((t,n)=>{if(t)e(t);else if(n){const t={};for(const{stack:e,id:r,glyph:i}of n)void 0===t[e]&&(t[e]={}),void 0===t[e].glyphs&&(t[e].glyphs={}),t[e].glyphs[r]=i&&{id:i.id,bitmap:i.bitmap.clone(),metrics:i.metrics},t[e].ascender=this.entries[e].ascender,t[e].descender=this.entries[e].descender;e(null,t)}}))}_doesCharSupportLocalGlyph(t){return this.localGlyphMode!==nf.none&&(this.localGlyphMode===nf.all?!!this.localFontFamily:!!this.localFontFamily&&(no["CJK Unified Ideographs"](t)||no["Hangul Syllables"](t)||no.Hiragana(t)||no.Katakana(t)||no["CJK Symbols and Punctuation"](t)))}_tinySDF(t,e,n){const r=this.localFontFamily;if(!r||!this._doesCharSupportLocalGlyph(n))return;let i=t.tinySDF;if(!i){let n="400";/bold/i.test(e)?n="900":/medium/i.test(e)?n="500":/light/i.test(e)&&(n="200"),i=t.tinySDF=new rf.TinySDF({fontFamily:r,fontWeight:n,fontSize:24*ef,buffer:3*ef,radius:8*ef}),i.fontWeight=n}if(this.localGlyphs[i.fontWeight][n])return this.localGlyphs[i.fontWeight][n];const o=String.fromCharCode(n),{data:s,width:a,height:c,glyphWidth:l,glyphHeight:u,glyphLeft:h,glyphTop:p,glyphAdvance:f}=i.draw(o);return this.localGlyphs[i.fontWeight][n]={id:n,bitmap:new Bl({width:a,height:c},s),metrics:{width:l/ef,height:u/ef,left:h/ef,top:p/ef-27,advance:f/ef,localGlyph:!0}}}}rf.loadGlyphRange=function(t,e,n,r,i){const o=256*e,s=o+255,a=r.transformRequest(r.normalizeGlyphsURL(n).replace("{fontstack}",t).replace("{range}",`${o}-${s}`),ut.Glyphs);dt(a,((t,e)=>{if(t)i(t);else if(e){const t={},n=function(t){return new yp(t).readFields(vp,{})}(e);for(const e of n.glyphs)t[e.id]=e;i(null,{glyphs:t,ascender:n.ascender,descender:n.descender})}}))},rf.TinySDF=class{constructor({fontSize:t=24,buffer:e=3,radius:n=8,cutoff:r=.25,fontFamily:i="sans-serif",fontWeight:o="normal",fontStyle:s="normal"}={}){this.buffer=e,this.cutoff=r,this.radius=n;const a=this.size=t+4*e,c=this._createCanvas(a),l=this.ctx=c.getContext("2d",{willReadFrequently:!0});l.font=`${s} ${o} ${t}px ${i}`,l.textBaseline="alphabetic",l.textAlign="left",l.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Uint16Array(a)}_createCanvas(t){const e=document.createElement("canvas");return e.width=e.height=t,e}draw(t){const{width:e,actualBoundingBoxAscent:n,actualBoundingBoxDescent:r,actualBoundingBoxLeft:i,actualBoundingBoxRight:o}=this.ctx.measureText(t),s=Math.ceil(n),a=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-i))),c=Math.min(this.size-this.buffer,s+Math.ceil(r)),l=a+2*this.buffer,u=c+2*this.buffer,h=Math.max(l*u,0),p=new Uint8ClampedArray(h),f={data:p,width:l,height:u,glyphWidth:a,glyphHeight:c,glyphTop:s,glyphLeft:0,glyphAdvance:e};if(0===a||0===c)return f;const{ctx:d,buffer:g,gridInner:m,gridOuter:y}=this;d.clearRect(g,g,a,c),d.fillText(t,g,g+s);const _=d.getImageData(g,g,a,c);y.fill(Jp,0,h),m.fill(0,0,h);for(let t=0;t<c;t++)for(let e=0;e<a;e++){const n=_.data[4*(t*a+e)+3]/255;if(0===n)continue;const r=(t+g)*l+e+g;if(1===n)y[r]=0,m[r]=Jp;else{const t=.5-n;y[r]=t>0?t*t:0,m[r]=t<0?t*t:0}}Qp(y,0,0,l,u,l,this.f,this.v,this.z),Qp(m,g,g,a,c,l,this.f,this.v,this.z);for(let t=0;t<h;t++){const e=Math.sqrt(y[t])-Math.sqrt(m[t]);p[t]=Math.round(255-255*(e/this.radius+this.cutoff))}return f}};const of=Tp;function sf(t,e,n,r){const i=[],o=t.image,s=o.pixelRatio,a=o.paddedRect.w-2*of,c=o.paddedRect.h-2*of,l=t.right-t.left,u=t.bottom-t.top,h=o.stretchX||[[0,a]],p=o.stretchY||[[0,c]],f=(t,e)=>t+e[1]-e[0],d=h.reduce(f,0),g=p.reduce(f,0),m=a-d,y=c-g;let _=0,v=d,b=0,w=g,E=0,T=m,S=0,k=y;if(o.content&&r){const t=o.content;_=af(h,0,t[0]),b=af(p,0,t[1]),v=af(h,t[0],t[2]),w=af(p,t[1],t[3]),E=t[0]-_,S=t[1]-b,T=t[2]-t[0]-v,k=t[3]-t[1]-w}const A=(r,i,a,c)=>{const h=lf(r.stretch-_,v,l,t.left),p=uf(r.fixed-E,T,r.stretch,d),f=lf(i.stretch-b,w,u,t.top),m=uf(i.fixed-S,k,i.stretch,g),y=lf(a.stretch-_,v,l,t.left),A=uf(a.fixed-E,T,a.stretch,d),M=lf(c.stretch-b,w,u,t.top),I=uf(c.fixed-S,k,c.stretch,g),C=new x(h,f),O=new x(y,f),P=new x(y,M),L=new x(h,M),D=new x(p/s,m/s),R=new x(A/s,I/s),N=e*Math.PI/180;if(N){const t=Math.sin(N),e=Math.cos(N),n=[e,-t,t,e];C._matMult(n),O._matMult(n),L._matMult(n),P._matMult(n)}const j=r.stretch+r.fixed,z=i.stretch+i.fixed;return{tl:C,tr:O,bl:L,br:P,tex:{x:o.paddedRect.x+of+j,y:o.paddedRect.y+of+z,w:a.stretch+a.fixed-j,h:c.stretch+c.fixed-z},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:D,pixelOffsetBR:R,minFontScaleX:T/s/l,minFontScaleY:k/s/u,isSDF:n}};if(r&&(o.stretchX||o.stretchY)){const t=cf(h,m,d),e=cf(p,y,g);for(let n=0;n<t.length-1;n++){const r=t[n],o=t[n+1];for(let t=0;t<e.length-1;t++)i.push(A(r,e[t],o,e[t+1]))}}else i.push(A({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:a+1},{fixed:0,stretch:c+1}));return i}function af(t,e,n){let r=0;for(const i of t)r+=Math.max(e,Math.min(n,i[1]))-Math.max(e,Math.min(n,i[0]));return r}function cf(t,e,n){const r=[{fixed:-of,stretch:0}];for(const[e,n]of t){const t=r[r.length-1];r.push({fixed:e-t.stretch,stretch:t.stretch}),r.push({fixed:e-t.stretch,stretch:t.stretch+(n-e)})}return r.push({fixed:e+of,stretch:n}),r}function lf(t,e,n,r){return t/e*n+r}function uf(t,e,n,r){return t-e*n/r}function hf(t,e,n,r){const i=e+t.positionedLines[r].lineOffset;return 0===r?n+i/2:n+(i+(e+t.positionedLines[r-1].lineOffset))/2}class pf{constructor(t=[],e=ff){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let t=(this.length>>1)-1;t>=0;t--)this._down(t)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:n}=this,r=e[t];for(;t>0;){const i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r}_down(t){const{data:e,compare:n}=this,r=this.length>>1,i=e[t];for(;t<r;){let r=1+(t<<1),o=e[r];const s=r+1;if(s<this.length&&n(e[s],o)<0&&(r=s,o=e[s]),n(o,i)>=0)break;e[t]=o,t=r}e[t]=i}}function ff(t,e){return t<e?-1:t>e?1:0}function df(t,e=1,n=!1){let r=1/0,o=1/0,s=-1/0,a=-1/0;const c=t[0];for(let t=0;t<c.length;t++){const e=c[t];(!t||e.x<r)&&(r=e.x),(!t||e.y<o)&&(o=e.y),(!t||e.x>s)&&(s=e.x),(!t||e.y>a)&&(a=e.y)}const l=Math.min(s-r,a-o);let u=l/2;const h=new pf([],gf);if(0===l)return new x(r,o);for(let e=r;e<s;e+=l)for(let n=o;n<a;n+=l)h.push(new mf(e+u,n+u,u,t));let p=function(t){let e=0,n=0,r=0;const i=t[0];for(let t=0,o=i.length,s=o-1;t<o;s=t++){const o=i[t],a=i[s],c=o.x*a.y-a.x*o.y;n+=(o.x+a.x)*c,r+=(o.y+a.y)*c,e+=3*c}return new mf(n/e,r/e,0,t)}(t),f=h.length;for(;h.length;){const r=h.pop();(r.d>p.d||!p.d)&&(p=r,n&&i.log("found best %d after %d probes",Math.round(1e4*r.d)/1e4,f)),r.max-p.d<=e||(u=r.h/2,h.push(new mf(r.p.x-u,r.p.y-u,u,t)),h.push(new mf(r.p.x+u,r.p.y-u,u,t)),h.push(new mf(r.p.x-u,r.p.y+u,u,t)),h.push(new mf(r.p.x+u,r.p.y+u,u,t)),f+=4)}return n&&(i.log(`num probes: ${f}`),i.log(`best distance: ${p.d}`)),p.p}function gf(t,e){return e.max-t.max}class mf{constructor(t,e,n,r){this.p=new x(t,e),this.h=n,this.d=function(t,e){let n=!1,r=1/0;for(let i=0;i<e.length;i++){const o=e[i];for(let e=0,i=o.length,s=i-1;e<i;s=e++){const i=o[e],a=o[s];i.y>t.y!=a.y>t.y&&t.x<(a.x-i.x)*(t.y-i.y)/(a.y-i.y)+i.x&&(n=!n),r=Math.min(r,vl(t,i,a))}}return(n?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}}const yf=7,_f=Number.POSITIVE_INFINITY,vf=Math.sqrt(2);function xf(t,[e,n]){let r=0,i=0;if(n===_f){e<0&&(e=0);const n=e/vf;switch(t){case"top-right":case"top-left":i=n-yf;break;case"bottom-right":case"bottom-left":i=-n+yf;break;case"bottom":i=-e+yf;break;case"top":i=e-yf}switch(t){case"top-right":case"bottom-right":r=-n;break;case"top-left":case"bottom-left":r=n;break;case"left":r=e;break;case"right":r=-e}}else{switch(e=Math.abs(e),n=Math.abs(n),t){case"top-right":case"top-left":case"top":i=n-yf;break;case"bottom-right":case"bottom-left":case"bottom":i=-n+yf}switch(t){case"top-right":case"bottom-right":case"right":r=-e;break;case"top-left":case"bottom-left":case"left":r=e}}return[r,i]}function bf(t,e,n,r,i,o,s,a,c,l){t.createArrays(),t.tilePixelRatio=ca/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;const u=t.layers[0].layout,h=t.layers[0]._unevaluatedLayout._values,p={};if("composite"===t.textSizeData.kind){const{minZoom:e,maxZoom:n}=t.textSizeData;p.compositeTextSizes=[h["text-size"].possiblyEvaluate(new To(e),a),h["text-size"].possiblyEvaluate(new To(n),a)]}if("composite"===t.iconSizeData.kind){const{minZoom:e,maxZoom:n}=t.iconSizeData;p.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new To(e),a),h["icon-size"].possiblyEvaluate(new To(n),a)]}p.layoutTextSize=h["text-size"].possiblyEvaluate(new To(c+1),a),p.layoutIconSize=h["icon-size"].possiblyEvaluate(new To(c+1),a),p.textMaxSize=h["text-size"].possiblyEvaluate(new To(18),a);const f="map"===u.get("text-rotation-alignment")&&"point"!==u.get("symbol-placement"),d=u.get("text-size");for(const o of t.features){const c=u.get("text-font").evaluate(o,{},a).join(","),h=d.evaluate(o,{},a),g=p.layoutTextSize.evaluate(o,{},a),m=(p.layoutIconSize.evaluate(o,{},a),{horizontal:{},vertical:void 0}),y=o.text;let _,v=[0,0];if(y){const r=y.toString(),s=u.get("text-letter-spacing").evaluate(o,{},a)*Bh,l=u.get("text-line-height").evaluate(o,{},a)*Bh,p=io(r)?s:0,d=u.get("text-anchor").evaluate(o,{},a),_=u.get("text-variable-anchor");if(!_){const t=u.get("text-radial-offset").evaluate(o,{},a);v=t?xf(d,[t*Bh,_f]):u.get("text-offset").evaluate(o,{},a).map((t=>t*Bh))}let x=f?"center":u.get("text-justify").evaluate(o,{},a);const b="point"===u.get("symbol-placement"),w=b?u.get("text-max-width").evaluate(o,{},a)*Bh:1/0,E=o=>{t.allowVerticalPlacement&&ro(r)&&(m.vertical=Op(y,e,n,i,c,w,l,d,o,p,v,Ap.vertical,!0,g,h))};if(!f&&_){const t="auto"===x?_.map((t=>wf(t))):[x];let r=!1;for(let o=0;o<t.length;o++){const s=t[o];if(!m.horizontal[s])if(r)m.horizontal[s]=m.horizontal[0];else{const t=Op(y,e,n,i,c,w,l,"center",s,p,v,Ap.horizontal,!1,g,h);t&&(m.horizontal[s]=t,r=1===t.positionedLines.length)}}E("left")}else{if("auto"===x&&(x=wf(d)),b||u.get("text-writing-mode").indexOf("horizontal")>=0||!ro(r)){const t=Op(y,e,n,i,c,w,l,d,x,p,v,Ap.horizontal,!1,g,h);t&&(m.horizontal[x]=t)}E(b?"left":x)}}let x=!1;if(o.icon&&o.icon.name){const e=r[o.icon.name];e&&(_=Up(i[o.icon.name],u.get("icon-offset").evaluate(o,{},a),u.get("icon-anchor").evaluate(o,{},a)),x=e.sdf,void 0===t.sdfIcons?t.sdfIcons=e.sdf:t.sdfIcons!==e.sdf&&$("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(e.pixelRatio!==t.pixelRatio||0!==u.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}const b=Af(m.horizontal)||m.vertical;t.iconsInText||(t.iconsInText=!!b&&b.iconsInText),(b||_)&&Ef(t,o,m,_,r,p,g,0,v,x,s,a,l)}o&&t.generateCollisionDebugBuffers(c,t.collisionBoxArray)}function wf(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Ef(t,e,n,r,i,o,s,a,c,l,u,h,p){let f=o.textMaxSize.evaluate(e,{},h);void 0===f&&(f=s);const d=t.layers[0].layout,g=d.get("icon-offset").evaluate(e,{},h),m=Af(n.horizontal)||n.vertical,y="globe"===p.name,_=Bh,v=s/_,x=t.tilePixelRatio*f/_,b=(C=t.overscaling,t.zoom>18&&C>2&&(C>>=1),Math.max(ca/(512*C),1)*d.get("symbol-spacing")),w=d.get("text-padding")*t.tilePixelRatio,T=d.get("icon-padding")*t.tilePixelRatio,S=E(d.get("text-max-angle")),k="map"===d.get("text-rotation-alignment")&&"point"!==d.get("symbol-placement"),A="map"===d.get("icon-rotation-alignment")&&"point"!==d.get("symbol-placement"),M=d.get("symbol-placement"),I=b/2;var C;const O=d.get("icon-text-fit");let P;r&&"none"!==O&&(t.allowVerticalPlacement&&n.vertical&&(P=Vp(r,n.vertical,O,d.get("icon-text-fit-padding"),g,v)),m&&(r=Vp(r,m,O,d.get("icon-text-fit-padding"),g,v)));const L=(s,a,f)=>{if(a.x<0||a.x>=ca||a.y<0||a.y>=ca)return;let d=null;if(y){const{x:t,y:e,z:n}=p.projectTilePoint(a.x,a.y,f);d={anchor:new qp(t,e,n,0,void 0),up:p.upVector(f,a.x,a.y)}}!function(t,e,n,r,i,o,s,a,c,l,u,h,p,f,d,g,m,y,_,v,x,b,w,E,T){const S=t.addToLineVertexArray(e,r);let k,A,M,I,C,O,P,L=0,D=0,R=0,N=0,j=-1,z=-1;const B={};let F=Ps("");const U=n?n.anchor:e;let V=0,q=0;if(void 0===c._unevaluatedLayout.getValue("text-radial-offset")?[V,q]=c.layout.get("text-offset").evaluate(x,{},T).map((t=>t*Bh)):(V=c.layout.get("text-radial-offset").evaluate(x,{},T)*Bh,q=_f),t.allowVerticalPlacement&&i.vertical){const t=i.vertical;if(d)O=If(t),a&&(P=If(a));else{const n=c.layout.get("text-rotate").evaluate(x,{},T)+90;M=Mf(l,U,e,u,h,p,t,f,n,g),a&&(I=Mf(l,U,e,u,h,p,a,y,n))}}if(o){const r=c.layout.get("icon-rotate").evaluate(x,{},T),i="none"!==c.layout.get("icon-text-fit"),s=sf(o,r,w,i),f=a?sf(a,r,w,i):void 0;A=Mf(l,U,e,u,h,p,o,y,r),L=4*s.length;const d=t.iconSizeData;let g=null;"source"===d.kind?(g=[Fh*c.layout.get("icon-size").evaluate(x,{},T)],g[0]>Sf&&$(`${t.layerIds[0]}: Value for "icon-size" is >= ${Tf}. Reduce your "icon-size".`)):"composite"===d.kind&&(g=[Fh*b.compositeIconSizes[0].evaluate(x,{},T),Fh*b.compositeIconSizes[1].evaluate(x,{},T)],(g[0]>Sf||g[1]>Sf)&&$(`${t.layerIds[0]}: Value for "icon-size" is >= ${Tf}. Reduce your "icon-size".`)),t.addSymbols(t.icon,s,g,v,_,x,!1,n,e,S.lineStartIndex,S.lineLength,-1,E,T),j=t.icon.placedSymbolArray.length-1,f&&(D=4*f.length,t.addSymbols(t.icon,f,g,v,_,x,Ap.vertical,n,e,S.lineStartIndex,S.lineLength,-1,E,T),z=t.icon.placedSymbolArray.length-1)}for(const r in i.horizontal){const o=i.horizontal[r];k||(F=Ps(o.text),d?C=If(o):k=Mf(l,U,e,u,h,p,o,f,c.layout.get("text-rotate").evaluate(x,{},T),g));const a=1===o.positionedLines.length;if(R+=kf(t,n,e,o,s,c,d,x,g,S,i.vertical?Ap.horizontal:Ap.horizontalOnly,a?Object.keys(i.horizontal):[r],B,j,b,E,T),a)break}i.vertical&&(N+=kf(t,n,e,i.vertical,s,c,d,x,g,S,Ap.vertical,["vertical"],B,z,b,E,T));let W=-1;const G=(t,e)=>t?Math.max(t,e):e;W=G(C,W),W=G(O,W),W=G(P,W);const H=W>-1?1:0;t.glyphOffsetArray.length>=cd.MAX_GLYPHS&&$("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==x.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,x.sortKey),t.symbolInstances.emplaceBack(U.x,U.y,U.z,e.x,e.y,B.right>=0?B.right:-1,B.center>=0?B.center:-1,B.left>=0?B.left:-1,B.vertical>=0?B.vertical:-1,j,z,F,void 0!==k?k:t.collisionBoxArray.length,void 0!==k?k+1:t.collisionBoxArray.length,void 0!==M?M:t.collisionBoxArray.length,void 0!==M?M+1:t.collisionBoxArray.length,void 0!==A?A:t.collisionBoxArray.length,void 0!==A?A+1:t.collisionBoxArray.length,I||t.collisionBoxArray.length,I?I+1:t.collisionBoxArray.length,u,R,N,L,D,H,0,V,q,W)}(t,a,d,s,n,r,i,P,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,w,k,c,0,T,A,g,e,o,l,u,h)};if("line"===M)for(const i of Kp(e.geometry,0,0,ca,ca)){const e=Yp(i,b,S,n.vertical||m,r,_,x,t.overscaling,ca);for(const n of e)m&&Cf(t,m.text,I,n)||L(i,n,h)}else if("line-center"===M){for(const t of e.geometry)if(t.length>1){const e=Zp(t,S,n.vertical||m,r,_,x);e&&L(t,e,h)}}else if("Polygon"===e.type)for(const t of Tu(e.geometry,0)){const e=df(t,16);L(t[0],new qp(e.x,e.y,0,0,void 0),h)}else if("LineString"===e.type)for(const t of e.geometry)L(t,new qp(t[0].x,t[0].y,0,0,void 0),h);else if("Point"===e.type)for(const t of e.geometry)for(const e of t)L([e],new qp(e.x,e.y,0,0,void 0),h)}const Tf=255,Sf=Tf*Fh;function kf(t,e,n,r,i,o,s,a,c,l,u,h,p,f,d,g,m){const y=function(t,e,n,r,i,o,s,a){const c=[];if(0===e.positionedLines.length)return c;const l=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,u=function(t){const e=t[0],n=t[1],r=e*n;return r>0?[e,-n]:r<0?[-e,n]:0===e?[n,e]:[n,-e]}(n);let h=Math.abs(e.top-e.bottom);for(const t of e.positionedLines)h-=t.lineOffset;const p=e.positionedLines.length,f=h/p;let d=e.top-n[1];for(let t=0;t<p;++t){const r=e.positionedLines[t];d=hf(e,f,d,t);for(const t of r.positionedGlyphs){if(!t.rect)continue;const r=t.rect||{};let o=wp+1,h=!0,p=1,f=0;if(t.imageName){const e=s[t.imageName];if(!e)continue;if(e.sdf){$("SDF images are not supported in formatted text and will be ignored.");continue}h=!1,p=e.pixelRatio,o=Tp/p}const g=(i||a)&&t.vertical,m=t.metrics.advance*t.scale/2,y=t.metrics,_=t.rect;if(null===_)continue;a&&e.verticalizable&&(f=t.imageName?m-t.metrics.width*t.scale/2:0);const v=i?[t.x+m,t.y]:[0,0];let b=[0,0],w=[0,0],E=!1;i||(g?(w=[t.x+m+u[0],t.y+u[1]-f],E=!0):b=[t.x+m+n[0],t.y+n[1]-f]);const T=_.w*t.scale/(p*(t.localGlyph?ef:1)),S=_.h*t.scale/(p*(t.localGlyph?ef:1));let k,A,M,I;if(g){const e=t.y-d,n=new x(-m,m-e),r=-Math.PI/2,i=new x(...w);k=new x(-m+b[0],b[1]),k._rotateAround(r,n)._add(i),k.x+=-e+m,k.y-=(y.left-o)*t.scale;const s=t.imageName?y.advance*t.scale:Bh*t.scale,a=String.fromCharCode(t.glyph);Hh(a)?k.x+=(1-o)*t.scale:Zh(a)?k.x+=s-y.height*t.scale+(-o-1)*t.scale:k.x+=t.imageName||y.width+2*o===_.w&&y.height+2*o===_.h?(s-S)/2:(s-(y.height+2*o)*t.scale)/2,A=new x(k.x,k.y-T),M=new x(k.x+S,k.y),I=new x(k.x+S,k.y-T)}else{const e=(y.left-o)*t.scale-m+b[0],n=(-y.top-o)*t.scale+b[1],r=e+T,i=n+S;k=new x(e,n),A=new x(r,n),M=new x(e,i),I=new x(r,i)}if(l){let t;t=i?new x(0,0):E?new x(u[0],u[1]):new x(n[0],n[1]),k._rotateAround(l,t),A._rotateAround(l,t),M._rotateAround(l,t),I._rotateAround(l,t)}const C=new x(0,0),O=new x(0,0);c.push({tl:k,tr:A,bl:M,br:I,tex:r,writingMode:e.writingMode,glyphOffset:v,sectionIndex:t.sectionIndex,isSDF:h,pixelOffsetTL:C,pixelOffsetBR:O,minFontScaleX:0,minFontScaleY:0})}}return c}(0,r,c,o,s,a,i,t.allowVerticalPlacement),_=t.textSizeData;let v=null;"source"===_.kind?(v=[Fh*o.layout.get("text-size").evaluate(a,{},m)],v[0]>Sf&&$(`${t.layerIds[0]}: Value for "text-size" is >= ${Tf}. Reduce your "text-size".`)):"composite"===_.kind&&(v=[Fh*d.compositeTextSizes[0].evaluate(a,{},m),Fh*d.compositeTextSizes[1].evaluate(a,{},m)],(v[0]>Sf||v[1]>Sf)&&$(`${t.layerIds[0]}: Value for "text-size" is >= ${Tf}. Reduce your "text-size".`)),t.addSymbols(t.text,y,v,c,s,a,u,e,n,l.lineStartIndex,l.lineLength,f,g,m);for(const e of h)p[e]=t.text.placedSymbolArray.length-1;return 4*y.length}function Af(t){for(const e in t)return t[e];return null}function Mf(t,e,n,r,i,o,s,a,c,l){let u=s.top,h=s.bottom,p=s.left,f=s.right;const d=s.collisionPadding;if(d&&(p-=d[0],u-=d[1],f+=d[2],h+=d[3]),c){const t=new x(p,u),e=new x(f,u),n=new x(p,h),r=new x(f,h),i=E(c);let o=new x(0,0);l&&(o=new x(l[0],l[1])),t._rotateAround(i,o),e._rotateAround(i,o),n._rotateAround(i,o),r._rotateAround(i,o),p=Math.min(t.x,e.x,n.x,r.x),f=Math.max(t.x,e.x,n.x,r.x),u=Math.min(t.y,e.y,n.y,r.y),h=Math.max(t.y,e.y,n.y,r.y)}return t.emplaceBack(e.x,e.y,e.z,n.x,n.y,p,u,f,h,a,r,i,o),t.length-1}function If(t){t.collisionPadding&&(t.top-=t.collisionPadding[1],t.bottom+=t.collisionPadding[3]);const e=t.bottom-t.top;return e>0?Math.max(10,e):null}function Cf(t,e,n,r){const i=t.compareText;if(e in i){const t=i[e];for(let e=t.length-1;e>=0;e--)if(r.dist(t[e])<n)return!0}else i[e]=[];return i[e].push(r),!1}function Of(t,e){const n=t.fovAboveCenter,r=t.elevation?t.elevation.getMinElevationBelowMSL()*e:0,i=(t._camera.position[2]*t.worldSize-r)/Math.cos(t._pitch),o=Math.sin(n)*i/Math.sin(Math.max(Math.PI/2-t._pitch-n,.01)),s=Math.sin(t._pitch)*o+i;return Math.min(1.01*s,i*(1/t._horizonShift))}function Pf(t,e){if(!e.isReprojectedInTileSpace)return{scale:1<<t.z,x:t.x,y:t.y,x2:t.x+1,y2:t.y+1,projection:e};const n=Math.pow(2,-t.z),r=t.x*n,i=(t.x+1)*n,o=t.y*n,s=(t.y+1)*n,a=Zc(r),c=Zc(i),l=Yc(o),u=Yc(s),h=e.project(a,l),p=e.project(c,l),f=e.project(c,u),d=e.project(a,u);let g=Math.min(h.x,p.x,f.x,d.x),m=Math.min(h.y,p.y,f.y,d.y),y=Math.max(h.x,p.x,f.x,d.x),_=Math.max(h.y,p.y,f.y,d.y);const v=n/16;function x(t,n,r,i,o,s){const a=(r+o)/2,c=(i+s)/2,l=e.project(Zc(a),Yc(c)),u=Math.max(0,g-l.x,m-l.y,l.x-y,l.y-_);g=Math.min(g,l.x),y=Math.max(y,l.x),m=Math.min(m,l.y),_=Math.max(_,l.y),u>v&&(x(t,l,r,i,a,c),x(l,n,a,c,o,s))}x(h,p,r,o,i,o),x(p,f,i,o,i,s),x(f,d,i,s,r,s),x(d,h,r,s,r,o),g-=v,m-=v,y+=v,_+=v;const b=1/Math.max(y-g,_-m);return{scale:b,x:g*b,y:m*b,x2:y*b,y2:_*b,projection:e}}const Lf=da(new Float32Array(16));class Df{constructor(t){this.spec=t,this.name=t.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(t,e){return{x:0,y:0,z:0}}unproject(t,e){return new qc(0,0)}projectTilePoint(t,e,n){return{x:t,y:e,z:0}}locationPoint(t,e,n=!0){return t._coordinatePoint(t.locationCoordinate(e),n)}pixelsPerMeter(t,e){return Hc(1,t)*e}pixelSpaceConversion(t,e,n){return 1}farthestPixelDistance(t){return Of(t,t.pixelsPerMeter)}pointCoordinate(t,e,n,r){const i=t.horizonLineFromTop(!1),o=new x(e,Math.max(i,n));return t.rayIntersectionCoordinate(t.pointRayIntersection(o,r))}pointCoordinate3D(t,e,n){const r=new x(e,n);if(t.elevation)return t.elevation.pointCoordinate(r);{const e=this.pointCoordinate(t,r.x,r.y,0);return[e.x,e.y,e.z]}}isPointAboveHorizon(t,e){if(t.elevation)return!this.pointCoordinate3D(t,e.x,e.y);const n=t.horizonLineFromTop();return e.y<n}createInversionMatrix(t,e){return Lf}createTileMatrix(t,e,n){let r,i,o;const s=n.canonical,a=da(new Float64Array(16));if(this.isReprojectedInTileSpace){const c=Pf(s,this);r=1,i=c.x+n.wrap*c.scale,o=c.y,_a(a,a,[r/c.scale,r/c.scale,t.pixelsPerMeter/e])}else r=e/t.zoomScale(s.z),i=(s.x+Math.pow(2,s.z)*n.wrap)*r,o=s.y*r;return ya(a,a,[i,o,0]),_a(a,a,[r/ca,r/ca,1]),a}upVector(t,e,n){return[0,0,1]}upVectorScale(t,e,n){return{metersToTile:1}}}class Rf extends Df{constructor(t){super(t),this.range=[4,7],this.center=t.center||[-96,37.5];const[e,n]=this.parallels=t.parallels||[29.5,45.5],r=Math.sin(E(e));this.n=(r+Math.sin(E(n)))/2,this.c=1+r*(2*this.n-r),this.r0=Math.sqrt(this.c)/this.n}project(t,e){const{n,c:r,r0:i}=this,o=E(t-this.center[0]),s=E(e),a=Math.sqrt(r-2*n*Math.sin(s))/n;return{x:a*Math.sin(o*n),y:a*Math.cos(o*n)-i,z:0}}unproject(t,e){const{n,c:r,r0:i}=this,o=i+e;let s=Math.atan2(t,Math.abs(o))*Math.sign(o);o*n<0&&(s-=Math.PI*Math.sign(t)*Math.sign(o));const a=E(this.center[0])*n;s=O(s,-Math.PI-a,Math.PI-a);const c=I(T(s/n)+this.center[0],-180,180),l=Math.asin(I((r-(t*t+o*o)*n*n)/(2*n),-1,1)),u=I(T(l),-Kc,Kc);return new qc(c,u)}}const Nf=1.340264,jf=-.081106,zf=893e-6,Bf=.003796,Ff=Math.sqrt(3)/2;class Uf extends Df{project(t,e){e=e/180*Math.PI,t=t/180*Math.PI;const n=Math.asin(Ff*Math.sin(e)),r=n*n,i=r*r*r;return{x:.5*(t*Math.cos(n)/(Ff*(Nf+3*jf*r+i*(7*zf+9*Bf*r)))/Math.PI+.5),y:1-.5*(n*(Nf+jf*r+i*(zf+Bf*r))/Math.PI+1),z:0}}unproject(t,e){t=(2*t-.5)*Math.PI;let n=e=(2*(1-e)-1)*Math.PI,r=n*n,i=r*r*r;for(let t,o,s,a=0;a<12&&(o=n*(Nf+jf*r+i*(zf+Bf*r))-e,s=Nf+3*jf*r+i*(7*zf+9*Bf*r),t=o/s,n=I(n-t,-Math.PI/3,Math.PI/3),r=n*n,i=r*r*r,!(Math.abs(t)<1e-12));++a);const o=Ff*t*(Nf+3*jf*r+i*(7*zf+9*Bf*r))/Math.cos(n),s=Math.asin(Math.sin(n)/Ff),a=I(180*o/Math.PI,-180,180),c=I(180*s/Math.PI,-Kc,Kc);return new qc(a,c)}}class Vf extends Df{constructor(t){super(t),this.wrap=!0,this.supportsWorldCopies=!0}project(t,e){return{x:.5+t/360,y:.5-e/360,z:0}}unproject(t,e){const n=360*(t-.5),r=I(360*(.5-e),-Kc,Kc);return new qc(n,r)}}const qf=Math.PI/2;function Wf(t){return Math.tan((qf+t)/2)}class Gf extends Df{constructor(t){super(t),this.center=t.center||[0,30];const[e,n]=this.parallels=t.parallels||[30,30];let r=E(e),i=E(n);this.southernCenter=r+i<0,this.southernCenter&&(r=-r,i=-i);const o=Math.cos(r),s=Wf(r);this.n=r===i?Math.sin(r):Math.log(o/Math.cos(i))/Math.log(Wf(i)/s),this.f=o*Math.pow(Wf(r),this.n)/this.n}project(t,e){e=E(e),this.southernCenter&&(e=-e),t=E(t-this.center[0]);const n=1e-6,{n:r,f:i}=this;i>0?e<-qf+n&&(e=-qf+n):e>qf-n&&(e=qf-n);const o=i/Math.pow(Wf(e),r);let s=o*Math.sin(r*t),a=i-o*Math.cos(r*t);return s=.5*(s/Math.PI+.5),a=.5*(a/Math.PI+.5),{x:s,y:this.southernCenter?a:1-a,z:0}}unproject(t,e){t=(2*t-.5)*Math.PI,this.southernCenter&&(e=1-e),e=(2*(1-e)-.5)*Math.PI;const{n,f:r}=this,i=r-e,o=Math.sign(i),s=Math.sign(n)*Math.sqrt(t*t+i*i);let a=Math.atan2(t,Math.abs(i))*o;i*n<0&&(a-=Math.PI*Math.sign(t)*o);const c=I(T(a/n)+this.center[0],-180,180),l=I(T(2*Math.atan(Math.pow(r/s,1/n))-qf),-Kc,Kc);return new qc(c,this.southernCenter?-l:l)}}class $f extends Df{constructor(t){super(t),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(t,e){return{x:Gc(t),y:$c(e),z:0}}unproject(t,e){const n=Zc(t),r=Yc(e);return new qc(n,r)}}const Hf=E(Kc);class Zf extends Df{project(t,e){const n=(e=E(e))*e,r=n*n;return{x:.5*((t=E(t))*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791))/Math.PI+.5),y:1-.5*(e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))/Math.PI+1),z:0}}unproject(t,e){t=(2*t-.5)*Math.PI;let n=e=(2*(1-e)-1)*Math.PI,r=25,i=0,o=n*n;do{o=n*n;const t=o*o;i=(n*(1.007226+o*(.015085+t*(.028874*o-.044475-.005916*t)))-e)/(1.007226+o*(.045255+t*(.259866*o-.311325-.005916*11*t))),n=I(n-i,-Hf,Hf)}while(Math.abs(i)>1e-6&&--r>0);o=n*n;const s=I(T(t/(.8707+o*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979))),-180,180),a=T(n);return new qc(s,a)}}const Yf=E(Kc);class Xf extends Df{project(t,e){e=E(e),t=E(t);const n=Math.cos(e),r=2/Math.PI,i=Math.acos(n*Math.cos(t/2)),o=Math.sin(i)/i,s=.5*(t*r+2*n*Math.sin(t/2)/o)||0,a=.5*(e+Math.sin(e)/o)||0;return{x:.5*(s/Math.PI+.5),y:1-.5*(a/Math.PI+1),z:0}}unproject(t,e){let n=t=(2*t-.5)*Math.PI,r=e=(2*(1-e)-1)*Math.PI,i=25;const o=1e-6;let s=0,a=0;do{const i=Math.cos(r),o=Math.sin(r),c=2*o*i,l=o*o,u=i*i,h=Math.cos(n/2),p=Math.sin(n/2),f=2*h*p,d=p*p,g=1-u*h*h,m=g?1/g:0,y=g?Math.acos(i*h)*Math.sqrt(1/g):0,_=.5*(2*y*i*p+2*n/Math.PI)-t,v=.5*(y*o+r)-e,x=.5*m*(u*d+y*i*h*l)+1/Math.PI,b=m*(f*c/4-y*o*p),w=.125*m*(c*p-y*o*u*f),E=.5*m*(l*h+y*d*i)+.5,T=b*w-E*x;s=(v*b-_*E)/T,a=(_*w-v*x)/T,n=I(n-s,-Math.PI,Math.PI),r=I(r-a,-Yf,Yf)}while((Math.abs(s)>o||Math.abs(a)>o)&&--i>0);return new qc(T(n),T(r))}}class Kf extends Df{constructor(t){super(t),this.center=t.center||[0,0],this.parallels=t.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(E(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(t,e){const{scale:n,cosPhi:r}=this;return{x:E(t)*r*n+.5,y:-Math.sin(E(e))/r*n+.5,z:0}}unproject(t,e){const{scale:n,cosPhi:r}=this,i=-(e-.5)/n,o=I(T((t-.5)/n)/r,-180,180),s=Math.asin(I(i*r,-1,1)),a=I(T(s),-Kc,Kc);return new qc(o,a)}}class Jf extends $f{constructor(t){super(t),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(t,e,n){const r=Mc(t,e,n);return za(r,r,Oc(vc(n))),{x:r[0],y:r[1],z:r[2]}}locationPoint(t,e){const n=Ac(e.lat,e.lng),r=Ra([],n),i=t.elevation?t.elevation.getAtPointOrZero(t.locationCoordinate(e),t._centerAltitude):t._centerAltitude;Da(n,n,r,Hc(1,0)*ca*i);const o=da(new Float64Array(16));return ma(o,t.pixelMatrix,t.globeMatrix),za(n,n,o),new x(n[0],n[1])}pixelsPerMeter(t,e){return Hc(1,0)*e}pixelSpaceConversion(t,e,n){const r=Hc(1,t)*e,i=Dn(Hc(1,45)*e,r,n);return this.pixelsPerMeter(t,e)/i}createTileMatrix(t,e,n){const r=Pc(vc(n.canonical));return ma(new Float64Array(16),t.globeMatrix,r)}createInversionMatrix(t,e){const{center:n}=t,r=Oc(vc(e));return xa(r,r,E(n.lng)),va(r,r,E(n.lat)),_a(r,r,[t._pixelsPerMercatorPixel,t._pixelsPerMercatorPixel,1]),Float32Array.from(r)}pointCoordinate(t,e,n,r){return mc(t,e,n,!0)||new Qc(0,0)}pointCoordinate3D(t,e,n){const r=this.pointCoordinate(t,e,n,0);return[r.x,r.y,r.z]}isPointAboveHorizon(t,e){return!mc(t,e.x,e.y,!1)}farthestPixelDistance(t){const e=function(t,e){const n=t.cameraToCenterDistance,r=t._centerAltitude*e,i=t._camera,o=t._camera.forward(),s=Ma([],La([],o,-n),[0,0,r]),a=t.worldSize/(2*Math.PI),c=[0,0,-a],l=t.width/t.height,u=Math.tan(t.fovAboveCenter),h=La([],i.up(),u),p=La([],i.right(),u*l),f=Ra([],Ma([],Ma([],o,h),p)),d=[];let g;if(new nc(s,f).closestPointOnSphere(c,a,d)){const e=Ma([],d,c),n=Ua([],e,s);g=Math.cos(t.fovAboveCenter)*ka(n)}else{const t=Ua([],s,c),e=Ua([],c,s);Ra(e,e);const n=ka(t)-a;g=Math.sqrt(n*(n+2*a));const r=Math.acos(g/(a+n))-Math.acos(Na(o,e));g*=Math.cos(r)}return 1.01*g}(t,this.pixelsPerMeter(t.center.lat,t.worldSize)),n=Dc(t.zoom);if(n>0){const r=Of(t,Hc(1,t.center.lat)*t.worldSize),i=t.worldSize/(2*Math.PI),o=Math.max(t.width,t.height)/t.worldSize*Math.PI;return Dn(e,r+i*(1-Math.cos(o)),Math.pow(n,10))}return e}upVector(t,e,n){return Mc(e,n,t,1)}upVectorScale(t){return{metersToTile:gc(Ic(vc(t)))}}}function Qf(t){const e=t.parallels,n=!!e&&Math.abs(e[0]+e[1])<.01;switch(t.name){case"mercator":return new $f(t);case"equirectangular":return new Vf(t);case"naturalEarth":return new Zf(t);case"equalEarth":return new Uf(t);case"winkelTripel":return new Xf(t);case"albers":return n?new Kf(t):new Rf(t);case"lambertConformalConic":return n?new Kf(t):new Gf(t);case"globe":return new Jf(t)}throw new Error(`Invalid projection name: ${t.name}`)}const td=Zu.types,ed=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function nd(t,e,n,r,i,o,s,a,c,l,u,h,p){const f=a?Math.min(Sf,Math.round(a[0])):0,d=a?Math.min(Sf,Math.round(a[1])):0;t.emplaceBack(e,n,Math.round(32*r),Math.round(32*i),o,s,(f<<1)+(c?1:0),d,16*l,16*u,256*h,256*p)}function rd(t,e,n,r,i,o,s){t.emplaceBack(e,n,r,i,o,s)}function id(t,e,n,r,i){t.emplaceBack(e,n,r,i),t.emplaceBack(e,n,r,i),t.emplaceBack(e,n,r,i),t.emplaceBack(e,n,r,i)}function od(t){for(const e of t.sections)if(uo(e.text))return!0;return!1}class sd{constructor(t){this.layoutVertexArray=new Ko,this.indexArray=new os,this.programConfigurations=t,this.segments=new aa,this.dynamicLayoutVertexArray=new Ho,this.opacityVertexArray=new Qo,this.placedSymbolArray=new ys,this.globeExtVertexArray=new Jo}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(t,e,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ph.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Dh.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,ed,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=t.createVertexBuffer(this.globeExtVertexArray,Lh.members,!0)),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Ki(sd,"SymbolBuffers");class ad{constructor(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new aa,this.collisionVertexArray=new rs,this.collisionVertexArrayExt=new is}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Rh.members,!0),this.collisionVertexBufferExt=t.createVertexBuffer(this.collisionVertexArrayExt,Nh.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Ki(ad,"CollisionBuffers");class cd{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=da([]),this.placementViewportMatrix=da([]);const e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Uh(this.zoom,e["text-size"]),this.iconSizeData=Uh(this.zoom,e["icon-size"]);const n=this.layers[0].layout,r=n.get("symbol-sort-key"),i=n.get("symbol-z-order");this.canOverlap=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==i&&void 0!==r.constantOr(1),this.sortFeaturesByY=("viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=n.get("text-writing-mode").map((t=>Ap[t])),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.sourceID=t.sourceID,this.projection=t.projection}createArrays(){this.text=new sd(new Ks(this.layers,this.zoom,(t=>/^text/.test(t)))),this.icon=new sd(new Ks(this.layers,this.zoom,(t=>/^icon/.test(t)))),this.glyphOffsetArray=new xs,this.lineVertexArray=new bs,this.symbolInstances=new vs}calculateGlyphDependencies(t,e,n,r,i){for(let n=0;n<t.length;n++)if(e[t.charCodeAt(n)]=!0,r&&i){const r=$h[t.charAt(n)];r&&(e[r.charCodeAt(0)]=!0)}}populate(t,e,n,r){const i=this.layers[0],o=i.layout,s="globe"===this.projection.name,a=o.get("text-font"),c=o.get("text-field"),l=o.get("icon-image"),u=("constant"!==c.value.kind||c.value.value instanceof Ne&&!c.value.value.isEmpty()||c.value.value.toString().length>0)&&("constant"!==a.value.kind||a.value.value.length>0),h="constant"!==l.value.kind||!!l.value.value||Object.keys(l.parameters).length>0,p=o.get("symbol-sort-key");if(this.features=[],!u&&!h)return;const f=e.iconDependencies,d=e.glyphDependencies,g=e.availableImages,m=new To(this.zoom);for(const{feature:e,id:c,index:l,sourceLayerIndex:y}of t){const t=i._featureFilter.needGeometry,_=cl(e,t);if(!i._featureFilter.filter(m,_,n))continue;if(t||(_.geometry=al(e,n,r)),s&&1!==e.type&&n.z<=5){const t=_.geometry,e=.98078528056,r=(t,r)=>Na(Mc(t.x,t.y,n,1),Mc(r.x,r.y,n,1))<e;for(let e=0;e<t.length;e++)t[e]=rl(t[e],r)}let v,x;if(u){const t=i.getValueAndResolveTokens("text-field",_,n,g),e=Ne.factory(t);od(e)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===bo()||this.hasRTLText&&Eo.isParsed())&&(v=Gh(e,i,_))}if(h){const t=i.getValueAndResolveTokens("icon-image",_,n,g);x=t instanceof je?t:je.fromString(t)}if(!v&&!x)continue;const b=this.sortFeaturesByKey?p.evaluate(_,{},n):void 0;if(this.features.push({id:c,text:v,icon:x,index:l,sourceLayerIndex:y,geometry:_.geometry,properties:e.properties,type:td[e.type],sortKey:b}),x&&(f[x.name]=!0),v){const t=a.evaluate(_,{},n).join(","),e="map"===o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ap.vertical)>=0;for(const n of v.sections)if(n.image)f[n.image.name]=!0;else{const r=ro(v.toString()),i=n.fontStack||t,o=d[i]=d[i]||{};this.calculateGlyphDependencies(n.text,o,e,this.allowVerticalPlacement,r)}}}"line"===o.get("symbol-placement")&&(this.features=function(t){const e={},n={},r=[];let i=0;function o(e){r.push(t[e]),i++}function s(t,e,i){const o=n[t];return delete n[t],n[e]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(i[0]),o}function a(t,n,i){const o=e[n];return delete e[n],e[t]=o,r[o].geometry[0].shift(),r[o].geometry[0]=i[0].concat(r[o].geometry[0]),o}function c(t,e,n){const r=n?e[0][e[0].length-1]:e[0][0];return`${t}:${r.x}:${r.y}`}for(let l=0;l<t.length;l++){const u=t[l],h=u.geometry,p=u.text?u.text.toString():null;if(!p){o(l);continue}const f=c(p,h),d=c(p,h,!0);if(f in n&&d in e&&n[f]!==e[d]){const t=a(f,d,h),i=s(f,d,r[t].geometry);delete e[f],delete n[d],n[c(p,r[i].geometry,!0)]=i,r[t].geometry=null}else f in n?s(f,d,h):d in e?a(f,d,h):(o(l),e[f]=i-1,n[d]=i-1)}return r.filter((t=>t.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((t,e)=>t.sortKey-e.sortKey))}update(t,e,n,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,n,r),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,n,r))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=Qf(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,e){const n=this.lineVertexArray.length;if(void 0!==t.segment)for(const{x:t,y:n}of e)this.lineVertexArray.emplaceBack(t,n);return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}addSymbols(t,e,n,r,i,o,s,a,c,l,u,h,p,f){const d=t.indexArray,g=t.layoutVertexArray,m=t.globeExtVertexArray,y=t.segments.prepareSegment(4*e.length,g,d,this.canOverlap?o.sortKey:void 0),_=this.glyphOffsetArray.length,v=y.vertexLength,x=this.allowVerticalPlacement&&s===Ap.vertical?Math.PI/2:0,b=o.text&&o.text.sections;for(let r=0;r<e.length;r++){const{tl:i,tr:s,bl:l,br:u,tex:h,pixelOffsetTL:_,pixelOffsetBR:v,minFontScaleX:w,minFontScaleY:E,glyphOffset:T,isSDF:S,sectionIndex:k}=e[r],A=y.vertexLength,M=T[1];if(nd(g,c.x,c.y,i.x,M+i.y,h.x,h.y,n,S,_.x,_.y,w,E),nd(g,c.x,c.y,s.x,M+s.y,h.x+h.w,h.y,n,S,v.x,_.y,w,E),nd(g,c.x,c.y,l.x,M+l.y,h.x,h.y+h.h,n,S,_.x,v.y,w,E),nd(g,c.x,c.y,u.x,M+u.y,h.x+h.w,h.y+h.h,n,S,v.x,v.y,w,E),a){const{x:e,y:n,z:r}=a.anchor,[i,o,s]=a.up;rd(m,e,n,r,i,o,s),rd(m,e,n,r,i,o,s),rd(m,e,n,r,i,o,s),rd(m,e,n,r,i,o,s),id(t.dynamicLayoutVertexArray,e,n,r,x)}else id(t.dynamicLayoutVertexArray,c.x,c.y,c.z,x);d.emplaceBack(A,A+1,A+2),d.emplaceBack(A+1,A+2,A+3),y.vertexLength+=4,y.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(T[0]),r!==e.length-1&&k===e[r+1].sectionIndex||t.programConfigurations.populatePaintArrays(g.length,o,o.index,{},p,f,b&&b[k])}const w=a?a.anchor:c;t.placedSymbolArray.emplaceBack(w.x,w.y,w.z,c.x,c.y,_,this.glyphOffsetArray.length-_,v,l,u,c.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],s,0,!1,0,h,0)}_commitLayoutVertex(t,e,n,r,i,o,s){t.emplaceBack(e,n,r,i,o,Math.round(s.x),Math.round(s.y))}_addCollisionDebugVertices(t,e,n,r,i,o,s){const a=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),c=a.vertexLength,l=s.tileAnchorX,u=s.tileAnchorY;for(let t=0;t<4;t++)n.collisionVertexArray.emplaceBack(0,0,0,0);n.collisionVertexArrayExt.emplaceBack(e,-t.padding,-t.padding),n.collisionVertexArrayExt.emplaceBack(e,t.padding,-t.padding),n.collisionVertexArrayExt.emplaceBack(e,t.padding,t.padding),n.collisionVertexArrayExt.emplaceBack(e,-t.padding,t.padding),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,l,u,new x(t.x1,t.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,l,u,new x(t.x2,t.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,l,u,new x(t.x2,t.y2)),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,l,u,new x(t.x1,t.y2)),a.vertexLength+=4;const h=n.indexArray;h.emplaceBack(c,c+1),h.emplaceBack(c+1,c+2),h.emplaceBack(c+2,c+3),h.emplaceBack(c+3,c),a.primitiveLength+=4}_addTextDebugCollisionBoxes(t,e,n,r,i,o){for(let s=r;s<i;s++){const r=n.get(s),i=this.getSymbolInstanceTextSize(t,o,e,s);this._addCollisionDebugVertices(r,i,this.textCollisionBox,r.projectedAnchorX,r.projectedAnchorY,r.projectedAnchorZ,o)}}_addIconDebugCollisionBoxes(t,e,n,r,i,o){for(let s=r;s<i;s++){const r=n.get(s),i=this.getSymbolInstanceIconSize(t,e,o.placedIconSymbolIndex);this._addCollisionDebugVertices(r,i,this.iconCollisionBox,r.projectedAnchorX,r.projectedAnchorY,r.projectedAnchorZ,o)}}generateCollisionDebugBuffers(t,e){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ad(es,jh.members,hs),this.iconCollisionBox=new ad(es,jh.members,hs);const n=qh(this.iconSizeData,t),r=qh(this.textSizeData,t);for(let i=0;i<this.symbolInstances.length;i++){const o=this.symbolInstances.get(i);this._addTextDebugCollisionBoxes(r,t,e,o.textBoxStartIndex,o.textBoxEndIndex,o),this._addTextDebugCollisionBoxes(r,t,e,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,t,e,o.iconBoxStartIndex,o.iconBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,t,e,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o)}}getSymbolInstanceTextSize(t,e,n,r){const i=this.text.placedSymbolArray.get(e.rightJustifiedTextSymbolIndex>=0?e.rightJustifiedTextSymbolIndex:e.centerJustifiedTextSymbolIndex>=0?e.centerJustifiedTextSymbolIndex:e.leftJustifiedTextSymbolIndex>=0?e.leftJustifiedTextSymbolIndex:e.verticalPlacedTextSymbolIndex>=0?e.verticalPlacedTextSymbolIndex:r),o=Vh(this.textSizeData,t,i)/Bh;return this.tilePixelRatio*o}getSymbolInstanceIconSize(t,e,n){const r=this.icon.placedSymbolArray.get(n),i=Vh(this.iconSizeData,t,r);return this.tilePixelRatio*i}_commitDebugCollisionVertexUpdate(t,e,n){t.emplaceBack(e,-n,-n),t.emplaceBack(e,n,-n),t.emplaceBack(e,n,n),t.emplaceBack(e,-n,n)}_updateTextDebugCollisionBoxes(t,e,n,r,i,o){for(let s=r;s<i;s++){const r=n.get(s),i=this.getSymbolInstanceTextSize(t,o,e,s);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,i,r.padding)}}_updateIconDebugCollisionBoxes(t,e,n,r,i,o){for(let s=r;s<i;s++){const r=n.get(s),i=this.getSymbolInstanceIconSize(t,e,o);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,i,r.padding)}}updateCollisionDebugBuffers(t,e){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const n=qh(this.iconSizeData,t),r=qh(this.textSizeData,t);for(let i=0;i<this.symbolInstances.length;i++){const o=this.symbolInstances.get(i);this._updateTextDebugCollisionBoxes(r,t,e,o.textBoxStartIndex,o.textBoxEndIndex,o),this._updateTextDebugCollisionBoxes(r,t,e,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._updateIconDebugCollisionBoxes(n,t,e,o.iconBoxStartIndex,o.iconBoxEndIndex,o.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(n,t,e,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(t,e,n,r,i,o,s,a,c){const l={};if(e<n){const{x1:n,y1:r,x2:i,y2:o,padding:s,projectedAnchorX:a,projectedAnchorY:c,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:p,featureIndex:f}=t.get(e);l.textBox={x1:n,y1:r,x2:i,y2:o,padding:s,projectedAnchorX:a,projectedAnchorY:c,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:p},l.textFeatureIndex=f}if(r<i){const{x1:e,y1:n,x2:i,y2:o,padding:s,projectedAnchorX:a,projectedAnchorY:c,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:p,featureIndex:f}=t.get(r);l.verticalTextBox={x1:e,y1:n,x2:i,y2:o,padding:s,projectedAnchorX:a,projectedAnchorY:c,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:p},l.verticalTextFeatureIndex=f}if(o<s){const{x1:e,y1:n,x2:r,y2:i,padding:s,projectedAnchorX:a,projectedAnchorY:c,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:p,featureIndex:f}=t.get(o);l.iconBox={x1:e,y1:n,x2:r,y2:i,padding:s,projectedAnchorX:a,projectedAnchorY:c,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:p},l.iconFeatureIndex=f}if(a<c){const{x1:e,y1:n,x2:r,y2:i,padding:o,projectedAnchorX:s,projectedAnchorY:c,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:p,featureIndex:f}=t.get(a);l.verticalIconBox={x1:e,y1:n,x2:r,y2:i,padding:o,projectedAnchorX:s,projectedAnchorY:c,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:p},l.verticalIconFeatureIndex=f}return l}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let e=0;e<this.symbolInstances.length;e++){const n=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,e){const n=t.placedSymbolArray.get(e),r=n.vertexStartIndex+4*n.numGlyphs;for(let e=n.vertexStartIndex;e<r;e+=4)t.indexArray.emplaceBack(e,e+1,e+2),t.indexArray.emplaceBack(e+1,e+2,e+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const e=Math.sin(t),n=Math.cos(t),r=[],i=[],o=[];for(let t=0;t<this.symbolInstances.length;++t){o.push(t);const s=this.symbolInstances.get(t);r.push(0|Math.round(e*s.tileAnchorX+n*s.tileAnchorY)),i.push(s.featureIndex)}return o.sort(((t,e)=>r[t]-r[e]||i[e]-i[t])),o}addToSortKeyRanges(t,e){const n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===e?n.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const t of this.symbolInstanceIndexes){const e=this.symbolInstances.get(t);this.featureSortOrder.push(e.featureIndex);const{rightJustifiedTextSymbolIndex:n,centerJustifiedTextSymbolIndex:r,leftJustifiedTextSymbolIndex:i,verticalPlacedTextSymbolIndex:o,placedIconSymbolIndex:s,verticalPlacedIconSymbolIndex:a}=e;n>=0&&this.addIndicesForPlacedSymbol(this.text,n),r>=0&&r!==n&&this.addIndicesForPlacedSymbol(this.text,r),i>=0&&i!==r&&i!==n&&this.addIndicesForPlacedSymbol(this.text,i),o>=0&&this.addIndicesForPlacedSymbol(this.text,o),s>=0&&this.addIndicesForPlacedSymbol(this.icon,s),a>=0&&this.addIndicesForPlacedSymbol(this.icon,a)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Ki(cd,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),cd.MAX_GLYPHS=65535,cd.addDynamicAttributes=id;const ld=new No({"symbol-placement":new Lo(ne.layout_symbol["symbol-placement"]),"symbol-spacing":new Lo(ne.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Lo(ne.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Do(ne.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Lo(ne.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Lo(ne.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Lo(ne.layout_symbol["icon-ignore-placement"]),"icon-optional":new Lo(ne.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Lo(ne.layout_symbol["icon-rotation-alignment"]),"icon-size":new Do(ne.layout_symbol["icon-size"]),"icon-text-fit":new Lo(ne.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Lo(ne.layout_symbol["icon-text-fit-padding"]),"icon-image":new Do(ne.layout_symbol["icon-image"]),"icon-rotate":new Do(ne.layout_symbol["icon-rotate"]),"icon-padding":new Lo(ne.layout_symbol["icon-padding"]),"icon-keep-upright":new Lo(ne.layout_symbol["icon-keep-upright"]),"icon-offset":new Do(ne.layout_symbol["icon-offset"]),"icon-anchor":new Do(ne.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Lo(ne.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Lo(ne.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Lo(ne.layout_symbol["text-rotation-alignment"]),"text-field":new Do(ne.layout_symbol["text-field"]),"text-font":new Do(ne.layout_symbol["text-font"]),"text-size":new Do(ne.layout_symbol["text-size"]),"text-max-width":new Do(ne.layout_symbol["text-max-width"]),"text-line-height":new Do(ne.layout_symbol["text-line-height"]),"text-letter-spacing":new Do(ne.layout_symbol["text-letter-spacing"]),"text-justify":new Do(ne.layout_symbol["text-justify"]),"text-radial-offset":new Do(ne.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Lo(ne.layout_symbol["text-variable-anchor"]),"text-anchor":new Do(ne.layout_symbol["text-anchor"]),"text-max-angle":new Lo(ne.layout_symbol["text-max-angle"]),"text-writing-mode":new Lo(ne.layout_symbol["text-writing-mode"]),"text-rotate":new Do(ne.layout_symbol["text-rotate"]),"text-padding":new Lo(ne.layout_symbol["text-padding"]),"text-keep-upright":new Lo(ne.layout_symbol["text-keep-upright"]),"text-transform":new Do(ne.layout_symbol["text-transform"]),"text-offset":new Do(ne.layout_symbol["text-offset"]),"text-allow-overlap":new Lo(ne.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Lo(ne.layout_symbol["text-ignore-placement"]),"text-optional":new Lo(ne.layout_symbol["text-optional"])});var ud={paint:new No({"icon-opacity":new Do(ne.paint_symbol["icon-opacity"]),"icon-color":new Do(ne.paint_symbol["icon-color"]),"icon-halo-color":new Do(ne.paint_symbol["icon-halo-color"]),"icon-halo-width":new Do(ne.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Do(ne.paint_symbol["icon-halo-blur"]),"icon-translate":new Lo(ne.paint_symbol["icon-translate"]),"icon-translate-anchor":new Lo(ne.paint_symbol["icon-translate-anchor"]),"text-opacity":new Do(ne.paint_symbol["text-opacity"]),"text-color":new Do(ne.paint_symbol["text-color"],{runtimeType:de,getOverride:t=>t.textColor,hasOverride:t=>!!t.textColor}),"text-halo-color":new Do(ne.paint_symbol["text-halo-color"]),"text-halo-width":new Do(ne.paint_symbol["text-halo-width"]),"text-halo-blur":new Do(ne.paint_symbol["text-halo-blur"]),"text-translate":new Lo(ne.paint_symbol["text-translate"]),"text-translate-anchor":new Lo(ne.paint_symbol["text-translate-anchor"])}),layout:ld};class hd{constructor(t){this.type=t.property.overrides?t.property.overrides.runtimeType:ue,this.defaultValue=t}evaluate(t){if(t.formattedSection){const e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ki(hd,"FormatSectionOverride",{omit:["defaultValue"]});class pd extends ia{constructor(t){super(t,ud)}recalculate(t,e){super.recalculate(t,e),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const n=this.layout.get("text-writing-mode");if(n){const t=[];for(const e of n)t.indexOf(e)<0&&t.push(e);this.layout._values["text-writing-mode"]=t}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(t,e,n,r){const i=this.layout.get(t).evaluate(e,{},n,r),o=this._unevaluatedLayout._values[t];return o.isDataDriven()||Kr(o.value)||!i?i:function(t,e){return e.replace(/{([^{}]+)}/g,((e,n)=>n in t?String(t[n]):""))}(e.properties,i)}createBucket(t){return new cd(t)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const t of ud.paint.overridableProperties){if(!pd.hasPaintOverride(this.layout,t))continue;const e=this.paint.get(t),n=new hd(e),r=new Xr(n,e.property.specification);let i=null;i="constant"===e.value.kind||"source"===e.value.kind?new Qr("source",r):new ti("composite",r,e.value.zoomStops,e.value._interpolationType),this.paint._values[t]=new Oo(e.property,i,e.parameters)}}_handleOverridablePaintPropertyUpdate(t,e,n){return!(!this.layout||e.isDataDriven()||n.isDataDriven())&&pd.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,e){const n=t.get("text-field"),r=ud.paint.properties[e];let i=!1;const o=t=>{for(const e of t)if(r.overrides&&r.overrides.hasOverride(e))return void(i=!0)};if("constant"===n.value.kind&&n.value.value instanceof Ne)o(n.value.value.sections);else if("source"===n.value.kind){const t=e=>{i||(e instanceof qe&&Fe(e.value)===_e?o(e.value.sections):e instanceof Ze?o(e.sections):e.eachChild(t))},e=n.value;e._styleExpression&&t(e._styleExpression.expression)}return i}getProgramConfiguration(t){return new Xs(this,t)}}var fd={paint:new No({"background-color":new Lo(ne.paint_background["background-color"]),"background-pattern":new Lo(ne.paint_background["background-pattern"]),"background-opacity":new Lo(ne.paint_background["background-opacity"])})},dd={paint:new No({"raster-opacity":new Lo(ne.paint_raster["raster-opacity"]),"raster-hue-rotate":new Lo(ne.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Lo(ne.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Lo(ne.paint_raster["raster-brightness-max"]),"raster-saturation":new Lo(ne.paint_raster["raster-saturation"]),"raster-contrast":new Lo(ne.paint_raster["raster-contrast"]),"raster-resampling":new Lo(ne.paint_raster["raster-resampling"]),"raster-fade-duration":new Lo(ne.paint_raster["raster-fade-duration"])})};class gd extends ia{constructor(t){super(t,{}),this.implementation=t}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isLayerDraped(){return void 0!==this.implementation.renderToTile}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)}onRemove(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)}}var md={paint:new No({"sky-type":new Lo(ne.paint_sky["sky-type"]),"sky-atmosphere-sun":new Lo(ne.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Lo(ne.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Lo(ne.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Lo(ne.paint_sky["sky-gradient-radius"]),"sky-gradient":new Ro(ne.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Lo(ne.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Lo(ne.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Lo(ne.paint_sky["sky-opacity"])})};function yd(t,e,n){const r=[0,0,1],i=Za([]);return Xa(i,i,n?-E(t)+Math.PI:E(t)),Ya(i,i,-E(e)),Ba(r,r,i),Ra(r,r)}const _d={circle:class extends ia{constructor(t){super(t,Il)}createBucket(t){return new hl(t)}queryRadius(t){const e=t;return Tl("circle-radius",this,e)+Tl("circle-stroke-width",this,e)+Sl(this.paint.get("circle-translate"))}queryIntersectsFeature(t,e,n,r,i,o,s,a){const c=Al(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),l=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n);return Cl(t,r,o,s,a,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),c,l)}getProgramIds(){return["circle"]}getProgramConfiguration(t){return new Xs(this,t)}},heatmap:class extends ia{createBucket(t){return new Rl(t)}constructor(t){super(t,Ul),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"heatmap-color"===t&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Vl({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(t){return Tl("heatmap-radius",this,t)}queryIntersectsFeature(t,e,n,r,i,o,s,a){const c=this.paint.get("heatmap-radius").evaluate(e,n);return Cl(t,r,o,s,a,!0,!0,new x(0,0),c)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(t){return new Xs(this,t)}},hillshade:class extends ia{constructor(t){super(t,ql)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends ia{constructor(t){super(t,Cu)}getProgramIds(){const t=this.paint.get("fill-pattern"),e=t&&t.constantOr(1),n=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&n.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),n}getProgramConfiguration(t){return new Xs(this,t)}recalculate(t,e){super.recalculate(t,e);const n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new Mu(t)}queryRadius(){return Sl(this.paint.get("fill-translate"))}queryIntersectsFeature(t,e,n,r,i,o){return!t.queryGeometry.isAboveHorizon&&dl(kl(t.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),r)}isTileClipped(){return!0}},"fill-extrusion":class extends ia{constructor(t){super(t,hh)}createBucket(t){return new eh(t)}queryRadius(){return Sl(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(t){return new Xs(this,t)}queryIntersectsFeature(t,e,n,r,i,o,s,a,c){const l=Al(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),u=this.paint.get("fill-extrusion-height").evaluate(e,n),h=this.paint.get("fill-extrusion-base").evaluate(e,n),p=[0,0],f=a&&o.elevation,d=o.elevation?o.elevation.exaggeration():1,g=t.tile.getBucket(this);if(f&&g instanceof eh){const t=g.centroidVertexArray,e=c+1;e<t.length&&(p[0]=t.geta_centroid_pos0(e),p[1]=t.geta_centroid_pos1(e))}if(0===p[0]&&1===p[1])return!1;"globe"===o.projection.name&&(r=lh([r],[new x(0,0),new x(ca,ca)],t.tileID.canonical).map((t=>t.polygon)).flat());const m=f?a:null,[y,_]=function(t,e,n,r,i,o,s,a,c,l,u){return"globe"===t.projection.name?function(t,e,n,r,i,o,s,a,c,l,u){const h=[],p=[],f=t.projection.upVectorScale(u,t.center.lat,t.worldSize).metersToTile,d=[0,0,0,1],g=[0,0,0,1],m=(t,e,n,r)=>{t[0]=e,t[1]=n,t[2]=r,t[3]=1},y=ch();n>0&&(n+=y),r+=y;for(const y of e){const e=[],_=[];for(const h of y){const p=h.x+i.x,y=h.y+i.y,v=t.projection.projectTilePoint(p,y,u),x=t.projection.upVector(u,h.x,h.y);let b=n,w=r;if(s){const t=xh(p,y,n,r,s,a,c,l);b+=t.base,w+=t.top}0!==n?m(d,v.x+x[0]*f*b,v.y+x[1]*f*b,v.z+x[2]*f*b):m(d,v.x,v.y,v.z),m(g,v.x+x[0]*f*w,v.y+x[1]*f*w,v.z+x[2]*f*w),za(d,d,o),za(g,g,o),e.push(new yh(d[0],d[1],d[2])),_.push(new yh(g[0],g[1],g[2]))}h.push(e),p.push(_)}return[h,p]}(t,e,n,r,i,o,s,a,c,l,u):s?function(t,e,n,r,i,o,s,a,c){const l=[],u=[],h=[0,0,0,1];for(const p of t){const t=[],f=[];for(const l of p){const u=l.x+r.x,p=l.y+r.y,d=xh(u,p,e,n,o,s,a,c);h[0]=u,h[1]=p,h[2]=d.base,h[3]=1,$a(h,h,i),h[3]=Math.max(h[3],1e-5);const g=new yh(h[0]/h[3],h[1]/h[3],h[2]/h[3]);h[0]=u,h[1]=p,h[2]=d.top,h[3]=1,$a(h,h,i),h[3]=Math.max(h[3],1e-5);const m=new yh(h[0]/h[3],h[1]/h[3],h[2]/h[3]);t.push(g),f.push(m)}l.push(t),u.push(f)}return[l,u]}(e,n,r,i,o,s,a,c,l):function(t,e,n,r,i){const o=[],s=[],a=i[8]*e,c=i[9]*e,l=i[10]*e,u=i[11]*e,h=i[8]*n,p=i[9]*n,f=i[10]*n,d=i[11]*n;for(const e of t){const t=[],n=[];for(const o of e){const e=o.x+r.x,s=o.y+r.y,g=i[0]*e+i[4]*s+i[12],m=i[1]*e+i[5]*s+i[13],y=i[2]*e+i[6]*s+i[14],_=i[3]*e+i[7]*s+i[15],v=g+a,x=m+c,b=y+l,w=Math.max(_+u,1e-5),E=g+h,T=m+p,S=y+f,k=Math.max(_+d,1e-5);t.push(new yh(v/w,x/w,b/w)),n.push(new yh(E/k,T/k,S/k))}o.push(t),s.push(n)}return[o,s]}(e,n,r,i,o)}(o,r,h,u,l,s,m,p,d,o.center.lat,t.tileID.canonical),v=t.queryGeometry;return function(t,e,n){let r=1/0;dl(n,e)&&(r=vh(n,e[0]));for(let i=0;i<e.length;i++){const o=e[i],s=t[i];for(let t=0;t<o.length-1;t++){const e=o[t],i=[e,o[t+1],s[t+1],s[t],e];pl(n,i)&&(r=Math.min(r,vh(n,i)))}}return r!==1/0&&r}(y,_,v.isPointQuery()?v.screenBounds:v.screenGeometry)}},line:class extends ia{constructor(t){super(t,Ih),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(t){if("line-gradient"===t){const t=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=t._styleExpression&&t._styleExpression.expression instanceof Ln,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(t,e){super.recalculate(t,e),this.paint._values["line-floorwidth"]=Ch.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new Ah(t)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(t){return new Xs(this,t)}queryRadius(t){const e=t,n=Oh(Tl("line-width",this,e),Tl("line-gap-width",this,e)),r=Tl("line-offset",this,e);return n/2+Math.abs(r)+Sl(this.paint.get("line-translate"))}queryIntersectsFeature(t,e,n,r,i,o){if(t.queryGeometry.isAboveHorizon)return!1;const s=kl(t.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),a=t.pixelToTileUnitsFactor/2*Oh(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),c=this.paint.get("line-offset").evaluate(e,n);return c&&(r=function(t,e){const n=[],r=new x(0,0);for(let i=0;i<t.length;i++){const o=t[i],s=[];for(let t=0;t<o.length;t++){const n=o[t],i=o[t+1],a=0===t?r:n.sub(o[t-1])._unit()._perp(),c=t===o.length-1?r:i.sub(n)._unit()._perp(),l=a._add(c)._unit();l._mult(1/(l.x*c.x+l.y*c.y)),s.push(l._mult(e)._add(n))}n.push(s)}return n}(r,c*t.pixelToTileUnitsFactor)),function(t,e,n){for(let r=0;r<e.length;r++){const i=e[r];if(t.length>=3)for(let e=0;e<i.length;e++)if(bl(t,i[e]))return!0;if(gl(t,i,n))return!0}return!1}(s,r,a)}isTileClipped(){return!0}},symbol:pd,background:class extends ia{constructor(t){super(t,fd)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends ia{constructor(t){super(t,dd)}getProgramIds(){return["raster"]}},sky:class extends ia{constructor(t){super(t,md),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"sky-gradient"===t?this._updateColorRamp():"sky-atmosphere-sun"!==t&&"sky-atmosphere-halo-color"!==t&&"sky-atmosphere-color"!==t&&"sky-atmosphere-sun-intensity"!==t||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Vl({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(t){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const e=t.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}return!1}getCenter(t,e){if("atmosphere"===this.paint.get("sky-type")){const n=this.paint.get("sky-atmosphere-sun"),r=!n,i=t.style.light,o=i.properties.get("position");return r&&"viewport"===i.properties.get("anchor")&&$("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),r?yd(o.azimuthal,90-o.polar,e):yd(n[0],90-n[1],e)}const n=this.paint.get("sky-gradient-center");return yd(n[0],90-n[1],e)}is3D(){return!1}isSky(){return!0}markSkyboxValid(t){this._skyboxInvalidated=!1,this._lightPosition=t.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const t=this.paint.get("sky-type");return"atmosphere"===t?["skyboxCapture","skybox"]:"gradient"===t?["skyboxGradient"]:null}}};class vd{constructor(t,e,n,r){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(e,r)}update(t,n,r){const{width:i,height:o}=t,{context:s}=this,{gl:a}=s,{HTMLImageElement:c,HTMLCanvasElement:l,HTMLVideoElement:u,ImageData:h,ImageBitmap:p}=e;if(a.bindTexture(a.TEXTURE_2D,this.texture),s.pixelStoreUnpackFlipY.set(!1),s.pixelStoreUnpack.set(1),s.pixelStoreUnpackPremultiplyAlpha.set(this.format===a.RGBA&&(!n||!1!==n.premultiply)),r||this.size&&this.size[0]===i&&this.size[1]===o){const{x:e,y:n}=r||{x:0,y:0};t instanceof c||t instanceof l||t instanceof u||t instanceof h||p&&t instanceof p?a.texSubImage2D(a.TEXTURE_2D,0,e,n,a.RGBA,a.UNSIGNED_BYTE,t):a.texSubImage2D(a.TEXTURE_2D,0,e,n,i,o,a.RGBA,a.UNSIGNED_BYTE,t.data)}else this.size=[i,o],t instanceof c||t instanceof l||t instanceof u||t instanceof h||p&&t instanceof p?a.texImage2D(a.TEXTURE_2D,0,this.format,this.format,a.UNSIGNED_BYTE,t):a.texImage2D(a.TEXTURE_2D,0,this.format,i,o,0,this.format,a.UNSIGNED_BYTE,t.data);this.useMipmap=Boolean(n&&n.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&a.generateMipmap(a.TEXTURE_2D)}bind(t,e){const{context:n}=this,{gl:r}=n;r.bindTexture(r.TEXTURE_2D,this.texture),t!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,this.useMipmap?t===r.NEAREST?r.NEAREST_MIPMAP_NEAREST:r.LINEAR_MIPMAP_NEAREST:t),this.filter=t),e!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e),this.wrap=e)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}class xd{constructor(t){this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){this._channel=void 0,this._callback=()=>{}}}class bd{constructor(){this.tasks={},this.taskQueue=[],F(["process"],this),this.invoker=new xd(this.process),this.nextId=0}add(t,e){const n=this.nextId++,r=function({type:t,isSymbolTile:e,zoom:n}){return n=n||0,"message"===t?0:"maybePrepare"!==t||e?"parseTile"!==t||e?"parseTile"===t&&e?300-n:"maybePrepare"===t&&e?400-n:500:200-n:100-n}(e);if(0===r){Y();try{t()}finally{}return{cancel:()=>{}}}return this.tasks[n]={fn:t,metadata:e,priority:r,id:n},this.taskQueue.push(n),this.invoker.trigger(),{cancel:()=>{delete this.tasks[n]}}}process(){Y();try{if(this.taskQueue=this.taskQueue.filter((t=>!!this.tasks[t])),!this.taskQueue.length)return;const t=this.pick();if(null===t)return;const e=this.tasks[t];if(delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),!e)return;e.fn()}finally{}}pick(){let t=null,e=1/0;for(let n=0;n<this.taskQueue.length;n++){const r=this.tasks[this.taskQueue[n]];r.priority<e&&(e=r.priority,t=n)}if(null===t)return null;const n=this.taskQueue[t];return this.taskQueue.splice(t,1),n}remove(){this.invoker.remove()}}class wd{constructor(t){this._stringToNumber={},this._numberToString=[];for(let e=0;e<t.length;e++){const n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}}encode(t){return this._stringToNumber[t]}decode(t){return this._numberToString[t]}}const Ed=["tile","layer","source","sourceLayer","state"];class Td{constructor(t,e,n,r,i){this.type="Feature",this._vectorTileFeature=t,this._z=e,this._x=n,this._y=r,this.properties=t.properties,this.id=i}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};void 0!==this.id&&(t.id=this.id);for(const e of Ed)void 0!==this[e]&&(t[e]=this[e]);return t}}const Sd=32,kd=33,Ad=new Uint16Array(8184);for(let t=0;t<2046;t++){let e=t+2,n=0,r=0,i=0,o=0,s=0,a=0;for(1&e?i=o=s=Sd:n=r=a=Sd;(e>>=1)>1;){const t=n+i>>1,c=r+o>>1;1&e?(i=n,o=r,n=s,r=a):(n=i,r=o,i=s,o=a),s=t,a=c}const c=4*t;Ad[c+0]=n,Ad[c+1]=r,Ad[c+2]=i,Ad[c+3]=o}const Md=new Uint16Array(2178),Id=new Uint8Array(1089),Cd=new Uint16Array(1089);function Od(t){return 0===t?-.03125:32===t?.03125:0}var Pd=Uo([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Ld={type:2,extent:ca,loadGeometry:()=>[[new x(0,0),new x(ca+1,0),new x(ca+1,ca+1),new x(0,ca+1),new x(0,0)]]};class Dd{constructor(t,e,n,r,i){this.tileID=t,this.uid=N(),this.uses=0,this.tileSize=e,this.tileZoom=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=i,this.expiredRequestCount=0,this.state="loading",r&&r.transform&&(this.projection=r.transform.projection)}registerFadeDuration(t){const e=t+this.timeAdded;e<Xt.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=Pf(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(t,e,n){if(this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){const n={};if(!e)return n;for(const r of t){const t=r.layerIds.map((t=>e.getLayer(t))).filter(Boolean);if(0!==t.length){r.layers=t,r.stateDependentLayerIds&&(r.stateDependentLayers=r.stateDependentLayerIds.map((e=>t.filter((t=>t.id===e))[0])));for(const e of t)n[e.id]=r}}return n}(t.buckets,e.style),this.hasSymbolBuckets=!1;for(const t in this.buckets){const e=this.buckets[t];if(e instanceof cd){if(this.hasSymbolBuckets=!0,!n)break;e.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const t in this.buckets){const e=this.buckets[t];if(e instanceof cd&&e.hasRTLText){this.hasRTLText=!0,Eo.isLoading()||Eo.isLoaded()||"deferred"!==bo()||wo();break}}this.queryPadding=0;for(const t in this.buckets){const n=this.buckets[t];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(t).queryRadius(n))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage),t.lineAtlas&&(this.lineAtlas=t.lineAtlas)}else this.collisionBoxArray=new gs}unloadVectorData(){if(this.hasData()){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(t){return this.buckets[t.id]}upload(t){for(const e in this.buckets){const n=this.buckets[e];n.uploadPending()&&n.upload(t)}const e=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new vd(t,this.imageAtlas.image,e.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new vd(t,this.glyphAtlasImage,e.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new vd(t,this.lineAtlas.image,e.ALPHA),this.lineAtlas.uploaded=!0)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,e,n,r,i,o,s,a){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:r,pixelPosMatrix:s,transform:o,params:i,tileTransform:this.tileTransform},t,e,n):{}}querySourceFeatures(t,e){const n=this.latestFeatureIndex;if(!n||!n.rawTileData)return;const r=n.loadVTLayers(),i=e?e.sourceLayer:"",o=r._geojsonTileLayer||r[i];if(!o)return;const s=fi(e&&e.filter),{z:a,x:c,y:l}=this.tileID.canonical,u={z:a,x:c,y:l};for(let e=0;e<o.length;e++){const r=o.feature(e);if(s.needGeometry){const t=cl(r,!0);if(!s.filter(new To(this.tileID.overscaledZ),t,this.tileID.canonical))continue}else if(!s.filter(new To(this.tileID.overscaledZ),r))continue;const h=n.getId(r,i),p=new Td(r,a,c,l,h);p.tile=u,t.push(p)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const e=this.expirationTime;if(t.cacheControl){const e=X(t.cacheControl);e["max-age"]&&(this.expirationTime=Date.now()+1e3*e["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const t=Date.now();let n=!1;if(this.expirationTime>t)n=!1;else if(e)if(this.expirationTime<e)n=!0;else{const r=this.expirationTime-e;r?this.expirationTime=t+Math.max(r,3e4):n=!0}else n=!0;n?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(t,e){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(t).length||!e)return;const n=this.latestFeatureIndex.loadVTLayers(),r=e.style.listImages();for(const i in this.buckets){if(!e.style.hasLayer(i))continue;const o=this.buckets[i],s=o.layers[0].sourceLayer||"_geojsonTileLayer",a=n[s],c=t[s];if(!a||!c||0===Object.keys(c).length)continue;if(o.update(c,a,r,this.imageAtlas&&this.imageAtlas.patternPositions||{}),o instanceof Ah||o instanceof Mu){const t=e.style._getSourceCache(o.layers[0].source);e._terrain&&e._terrain.enabled&&t&&o.programConfigurations.needsUpload&&e._terrain._clearRenderCacheForTile(t.id,this.tileID)}const l=e&&e.style&&e.style.getLayer(i);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(o)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Xt.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=Xt.now()+t}setTexture(t,e){const n=e.context,r=n.gl;this.texture=this.texture||e.getTileTexture(t.width),this.texture?this.texture.update(t,{useMipmap:!0}):(this.texture=new vd(n,t,r.RGBA,{useMipmap:!0}),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE))}setDependencies(t,e){const n={};for(const t of e)n[t]=!0;this.dependencies[t]=n}hasDependency(t,e){for(const n of t){const t=this.dependencies[n];if(t)for(const n of e)if(t[n])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(t,e){if(!e||"mercator"===e.name||this._tileDebugBuffer)return;const n=al(Ld,this.tileID.canonical,this.tileTransform)[0],r=new qo,i=new ps;for(let t=0;t<n.length;t++){const{x:e,y:o}=n[t];r.emplaceBack(e,o),i.emplaceBack(t)}i.emplaceBack(0),this._tileDebugIndexBuffer=t.createIndexBuffer(i),this._tileDebugBuffer=t.createVertexBuffer(r,ec.members),this._tileDebugSegments=aa.simpleSegment(0,0,r.length,i.length)}_makeTileBoundsBuffers(t,e){if(this._tileBoundsBuffer||!e||"mercator"===e.name)return;const n=al(Ld,this.tileID.canonical,this.tileTransform)[0];let r,i;if(this.isRaster){const t=function(t,e){const n=Pf(t,e),r=Math.pow(2,t.z);for(let i=0;i<kd;i++)for(let o=0;o<kd;o++){const s=Zc((t.x+(o+Od(o))/Sd)/r),a=Yc((t.y+(i+Od(i))/Sd)/r),c=e.project(s,a),l=i*kd+o;Md[2*l+0]=Math.round((c.x*n.scale-n.x)*ca),Md[2*l+1]=Math.round((c.y*n.scale-n.y)*ca)}Id.fill(0),Cd.fill(0);for(let t=2045;t>=0;t--){const e=4*t,n=Ad[e+0],r=Ad[e+1],i=Ad[e+2],o=Ad[e+3],s=n+i>>1,a=r+o>>1,c=s+a-r,l=a+n-s,u=r*kd+n,h=o*kd+i,p=a*kd+s,f=Math.hypot((Md[2*u+0]+Md[2*h+0])/2-Md[2*p+0],(Md[2*u+1]+Md[2*h+1])/2-Md[2*p+1])>=16;Id[p]=Id[p]||(f?1:0),t<1022&&(Id[p]=Id[p]||Id[(r+l>>1)*kd+(n+c>>1)]||Id[(o+l>>1)*kd+(i+c>>1)])}const i=new Go,o=new os;let s=0;function a(t,e){const n=e*kd+t;return 0===Cd[n]&&(i.emplaceBack(Md[2*n+0],Md[2*n+1],t*ca/Sd,e*ca/Sd),Cd[n]=++s),Cd[n]-1}function c(t,e,n,r,i,s){const l=t+n>>1,u=e+r>>1;if(Math.abs(t-i)+Math.abs(e-s)>1&&Id[u*kd+l])c(i,s,t,e,l,u),c(n,r,i,s,l,u);else{const c=a(t,e),l=a(n,r),u=a(i,s);o.emplaceBack(c,l,u)}}return c(0,0,Sd,Sd,Sd,0),c(Sd,Sd,0,0,0,Sd),{vertices:i,indices:o}}(this.tileID.canonical,e);r=t.vertices,i=t.indices}else{r=new Go,i=new os;for(const{x:t,y:e}of n)r.emplaceBack(t,e,0,0);const t=vu(r.int16,void 0,4);for(let e=0;e<t.length;e+=3)i.emplaceBack(t[e],t[e+1],t[e+2])}this._tileBoundsBuffer=t.createVertexBuffer(r,Pd.members),this._tileBoundsIndexBuffer=t.createIndexBuffer(i),this._tileBoundsSegments=aa.simpleSegment(0,0,r.length,i.length)}_makeGlobeTileDebugBuffers(t,e){const n=e.projection;if(!n||"globe"!==n.name||e.freezeTileCoverage)return;const r=this.tileID.canonical,i=Oc(bc(r,e)),o=Dc(e.zoom);let s;o>0&&(s=ga(new Float64Array(16),e.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(t,r,e,i,s,o),this._makeGlobeTileDebugTextBuffer(t,r,e,i,s,o)}_globePoint(t,e,n,r,i,o,s){let a=Mc(t,e,n);if(o){const i=1<<n.z,c=Gc(r.center.lng),l=$c(r.center.lat),u=(n.x+.5)/i-c;let h=0;u>.5?h=-1:u<-.5&&(h=1);let p=(t/ca+n.x)/i+h,f=(e/ca+n.y)/i;p=(p-c)*r._pixelsPerMercatorPixel+c,f=(f-l)*r._pixelsPerMercatorPixel+l;const d=[p*r.worldSize,f*r.worldSize,0];za(d,d,o),a=xc(a,d,s)}return za(a,a,i)}_makeGlobeTileDebugBorderBuffer(t,e,n,r,i,o){const s=new qo,a=new ps,c=new Wo,l=(t,l,u,h,p)=>{const f=(u-t)/(p-1),d=(h-l)/(p-1),g=s.length;for(let u=0;u<p;u++){const h=t+u*f,p=l+u*d;s.emplaceBack(h,p);const m=this._globePoint(h,p,e,n,r,i,o);c.emplaceBack(m[0],m[1],m[2]),a.emplaceBack(g+u)}},u=ca;l(0,0,u,0,16),l(u,0,u,u,16),l(u,u,0,u,16),l(0,u,0,0,16),this._tileDebugIndexBuffer=t.createIndexBuffer(a),this._tileDebugBuffer=t.createVertexBuffer(s,ec.members),this._globeTileDebugBorderBuffer=t.createVertexBuffer(c,tc.members),this._tileDebugSegments=aa.simpleSegment(0,0,s.length,a.length)}_makeGlobeTileDebugTextBuffer(t,e,n,r,i,o){const s=ca/4,a=new qo,c=new os,l=new Wo,u=25;c.reserve(32),a.reserve(u),l.reserve(u);const h=(t,e)=>u*t+e;for(let t=0;t<u;t++){const c=t*s;for(let t=0;t<u;t++){const u=t*s;a.emplaceBack(u,c);const h=this._globePoint(u,c,e,n,r,i,o);l.emplaceBack(h[0],h[1],h[2])}}for(let t=0;t<4;t++)for(let e=0;e<4;e++){const n=h(t,e),r=h(t,e+1),i=h(t+1,e),o=h(t+1,e+1);c.emplaceBack(n,r,i),c.emplaceBack(i,r,o)}this._tileDebugTextIndexBuffer=t.createIndexBuffer(c),this._tileDebugTextBuffer=t.createVertexBuffer(a,ec.members),this._globeTileDebugTextBuffer=t.createVertexBuffer(l,tc.members),this._tileDebugTextSegments=aa.simpleSegment(0,0,u,32)}}class Rd{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,e,n){const r=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][r]=this.stateChanges[t][r]||{},D(this.stateChanges[t][r],n),null===this.deletedStates[t]){this.deletedStates[t]={};for(const e in this.state[t])e!==r&&(this.deletedStates[t][e]=null)}else if(this.deletedStates[t]&&null===this.deletedStates[t][r]){this.deletedStates[t][r]={};for(const e in this.state[t][r])n[e]||(this.deletedStates[t][r][e]=null)}else for(const e in n)this.deletedStates[t]&&this.deletedStates[t][r]&&null===this.deletedStates[t][r][e]&&delete this.deletedStates[t][r][e]}removeFeatureState(t,e,n){if(null===this.deletedStates[t])return;const r=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},n&&void 0!==e)null!==this.deletedStates[t][r]&&(this.deletedStates[t][r]=this.deletedStates[t][r]||{},this.deletedStates[t][r][n]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][r])for(n in this.deletedStates[t][r]={},this.stateChanges[t][r])this.deletedStates[t][r][n]=null;else this.deletedStates[t][r]=null;else this.deletedStates[t]=null}getState(t,e){const n=String(e),r=D({},(this.state[t]||{})[n],(this.stateChanges[t]||{})[n]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){const n=this.deletedStates[t][e];if(null===n)return{};for(const t in n)delete r[t]}return r}initializeTileState(t,e){t.setFeatureState(this.state,e)}coalesceChanges(t,e){const n={};for(const t in this.stateChanges){this.state[t]=this.state[t]||{};const e={};for(const n in this.stateChanges[t])this.state[t][n]||(this.state[t][n]={}),D(this.state[t][n],this.stateChanges[t][n]),e[n]=this.state[t][n];n[t]=e}for(const t in this.deletedStates){this.state[t]=this.state[t]||{};const e={};if(null===this.deletedStates[t])for(const n in this.state[t])e[n]={},this.state[t][n]={};else for(const n in this.deletedStates[t]){if(null===this.deletedStates[t][n])this.state[t][n]={};else if(this.state[t][n])for(const e of Object.keys(this.deletedStates[t][n]))delete this.state[t][n][e];e[n]=this.state[t][n]}n[t]=n[t]||{},D(n[t],e)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(const r in t)t[r].setFeatureState(n,e)}}class Nd{constructor(t){this.size=t,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(t,e){const n=this.toIdx(t,e);return{min:this.minimums[n],max:this.maximums[n]}}isLeaf(t,e){return this.leaves[this.toIdx(t,e)]}toIdx(t,e){return e*this.size+t}}function jd(t,e,n,r){let i=0,o=Number.MAX_VALUE;for(let s=0;s<3;s++)if(Math.abs(r[s])<1e-15){if(n[s]<t[s]||n[s]>e[s])return null}else{const a=1/r[s];let c=(t[s]-n[s])*a,l=(e[s]-n[s])*a;if(c>l){const t=c;c=l,l=t}if(c>i&&(i=c),l<o&&(o=l),i>o)return null}return i}function zd(t,e,n,r,i,o,s,a,c,l,u){const h=r-t,p=i-e,f=o-n,d=s-t,g=a-e,m=c-n,y=u[1]*m-u[2]*g,_=u[2]*d-u[0]*m,v=u[0]*g-u[1]*d,x=h*y+p*_+f*v;if(Math.abs(x)<1e-15)return null;const b=1/x,w=l[0]-t,E=l[1]-e,T=l[2]-n,S=(w*y+E*_+T*v)*b;if(S<0||S>1)return null;const k=E*f-T*p,A=T*h-w*f,M=w*p-E*h,I=(u[0]*k+u[1]*A+u[2]*M)*b;return I<0||S+I>1?null:(d*k+g*A+m*M)*b}function Bd(t,e,n){return(t-e)/(n-e)}function Fd(t,e,n,r,i,o,s,a,c){const l=1<<n,u=o-r,h=s-i,p=(t+1)/l*u+r,f=(e+0)/l*h+i,d=(e+1)/l*h+i;a[0]=(t+0)/l*u+r,a[1]=f,c[0]=p,c[1]=d}class Ud{constructor(t){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=t,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const e=function(t){const e=Math.ceil(Math.log2(t.dim/8)),n=[];let r=Math.ceil(Math.pow(2,e));const i=1/r,o=(t,e,n,r,i)=>{const o=r?1:0,s=(t+1)*n-o,a=e*n,c=(e+1)*n-o;i[0]=t*n,i[1]=a,i[2]=s,i[3]=c};let s=new Nd(r);const a=[];for(let e=0;e<r*r;e++){o(e%r,Math.floor(e/r),i,!1,a);const n=qd(a[0],a[1],t),c=qd(a[2],a[1],t),l=qd(a[2],a[3],t),u=qd(a[0],a[3],t);s.minimums.push(Math.min(n,c,l,u)),s.maximums.push(Math.max(n,c,l,u)),s.leaves.push(1)}for(n.push(s),r/=2;r>=1;r/=2){const t=n[n.length-1];s=new Nd(r);for(let e=0;e<r*r;e++){o(e%r,Math.floor(e/r),2,!0,a);const n=t.getElevation(a[0],a[1]),i=t.getElevation(a[2],a[1]),c=t.getElevation(a[2],a[3]),l=t.getElevation(a[0],a[3]),u=t.isLeaf(a[0],a[1]),h=t.isLeaf(a[2],a[1]),p=t.isLeaf(a[2],a[3]),f=t.isLeaf(a[0],a[3]),d=Math.min(n.min,i.min,c.min,l.min),g=Math.max(n.max,i.max,c.max,l.max),m=u&&h&&p&&f;s.maximums.push(g),s.minimums.push(d),s.leaves.push(g-d<=5&&m?1:0)}n.push(s)}return n}(this.dem),n=e.length-1,r=e[n];this._addNode(r.minimums[0],r.maximums[0],r.leaves[0]),this._construct(e,0,0,n,0)}raycastRoot(t,e,n,r,i,o,s=1){return jd([t,e,-100],[n,r,this.maximums[0]*s],i,o)}raycast(t,e,n,r,i,o,s=1){if(!this.nodeCount)return null;const a=this.raycastRoot(t,e,n,r,i,o,s);if(null==a)return null;const c=[],l=[],u=[],h=[],p=[{idx:0,t:a,nodex:0,nodey:0,depth:0}];for(;p.length>0;){const{idx:a,t:f,nodex:d,nodey:g,depth:m}=p.pop();if(this.leaves[a]){Fd(d,g,m,t,e,n,r,u,h);const a=1<<m,c=(d+0)/a,l=(d+1)/a,p=(g+0)/a,y=(g+1)/a,_=qd(c,p,this.dem)*s,v=qd(l,p,this.dem)*s,x=qd(l,y,this.dem)*s,b=qd(c,y,this.dem)*s,w=zd(u[0],u[1],_,h[0],u[1],v,h[0],h[1],x,i,o),E=zd(h[0],h[1],x,u[0],h[1],b,u[0],u[1],_,i,o),T=Math.min(null!==w?w:Number.MAX_VALUE,null!==E?E:Number.MAX_VALUE);if(T!==Number.MAX_VALUE)return T;{const t=Da([],i,o,f);if(Vd(_,v,b,x,Bd(t[0],u[0],h[0]),Bd(t[1],u[1],h[1]))>=t[2])return f}continue}let y=0;for(let p=0;p<this._siblingOffset.length;p++){Fd((d<<1)+this._siblingOffset[p][0],(g<<1)+this._siblingOffset[p][1],m+1,t,e,n,r,u,h),u[2]=-100,h[2]=this.maximums[this.childOffsets[a]+p]*s;const f=jd(u,h,i,o);if(null!=f){const t=f;c[p]=t;let e=!1;for(let n=0;n<y&&!e;n++)t>=c[l[n]]&&(l.splice(n,0,p),e=!0);e||(l[y]=p),y++}}for(let t=0;t<y;t++){const e=l[t];p.push({idx:this.childOffsets[a]+e,t:c[e],nodex:(d<<1)+this._siblingOffset[e][0],nodey:(g<<1)+this._siblingOffset[e][1],depth:m+1})}}return null}_addNode(t,e,n){return this.minimums.push(t),this.maximums.push(e),this.leaves.push(n),this.childOffsets.push(0),this.nodeCount++}_construct(t,e,n,r,i){if(1===t[r].isLeaf(e,n))return;this.childOffsets[i]||(this.childOffsets[i]=this.nodeCount);const o=r-1,s=t[o];let a=0,c=0;for(let t=0;t<this._siblingOffset.length;t++){const r=2*e+this._siblingOffset[t][0],i=2*n+this._siblingOffset[t][1],o=s.getElevation(r,i),l=s.isLeaf(r,i),u=this._addNode(o.min,o.max,l);l&&(a|=1<<t),c||(c=u)}for(let r=0;r<this._siblingOffset.length;r++)a&1<<r||this._construct(t,2*e+this._siblingOffset[r][0],2*n+this._siblingOffset[r][1],o,c+r)}}function Vd(t,e,n,r,i,o){return Dn(Dn(t,n,o),Dn(e,r,o),i)}function qd(t,e,n){const r=n.dim,i=I(t*r-.5,0,r-1),o=I(e*r-.5,0,r-1),s=Math.floor(i),a=Math.floor(o),c=Math.min(s+1,r-1),l=Math.min(a+1,r-1);return Vd(n.get(s,a),n.get(c,a),n.get(s,l),n.get(c,l),i-s,o-a)}const Wd={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function Gd(t,e,n){return(256*t*256+256*e+n)/10-1e4}function $d(t,e,n){return 256*t+e+n/256-32768}class Hd{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(t,e,n,r=!1,i=!1){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return $(`"${n}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=e.height;const o=this.dim=e.height-2,s=new Uint32Array(e.data.buffer);if(this.pixels=new Uint8Array(e.data.buffer),this.encoding=n||"mapbox",this.borderReady=r,!r){for(let t=0;t<o;t++)s[this._idx(-1,t)]=s[this._idx(0,t)],s[this._idx(o,t)]=s[this._idx(o-1,t)],s[this._idx(t,-1)]=s[this._idx(t,0)],s[this._idx(t,o)]=s[this._idx(t,o-1)];s[this._idx(-1,-1)]=s[this._idx(0,0)],s[this._idx(o,-1)]=s[this._idx(o-1,0)],s[this._idx(-1,o)]=s[this._idx(0,o-1)],s[this._idx(o,o)]=s[this._idx(o-1,o-1)],i&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Ud(this)}get(t,e,n=!1){n&&(t=I(t,-1,this.dim),e=I(e,-1,this.dim));const r=4*this._idx(t,e);return("terrarium"===this.encoding?$d:Gd)(this.pixels[r],this.pixels[r+1],this.pixels[r+2])}static getUnpackVector(t){return Wd[t]}get unpackVector(){return Wd[this.encoding]}_idx(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)}static pack(t,e){const n=[0,0,0,0],r=Hd.getUnpackVector(e);let i=Math.floor((t+r[3])/r[2]);return n[2]=i%256,i=Math.floor(i/256),n[1]=i%256,i=Math.floor(i/256),n[0]=i,n}getPixels(){return new Fl({width:this.stride,height:this.stride},this.pixels)}backfillBorder(t,e,n){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let r=e*this.dim,i=e*this.dim+this.dim,o=n*this.dim,s=n*this.dim+this.dim;switch(e){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:o=s-1;break;case 1:s=o+1}const a=-e*this.dim,c=-n*this.dim;for(let e=o;e<s;e++)for(let n=r;n<i;n++){const r=4*this._idx(n,e),i=4*this._idx(n+a,e+c);this.pixels[r+0]=t.pixels[i+0],this.pixels[r+1]=t.pixels[i+1],this.pixels[r+2]=t.pixels[i+2],this.pixels[r+3]=t.pixels[i+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Ki(Hd,"DEMData"),Ki(Ud,"DemMinMaxQuadTree",{omit:["dem"]});class Zd{constructor(t,e){this.max=t,this.onRemove=e,this.reset()}reset(){for(const t in this.data)for(const e of this.data[t])e.timeout&&clearTimeout(e.timeout),this.onRemove(e.value);return this.data={},this.order=[],this}add(t,e,n){const r=t.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);const i={value:e,timeout:void 0};if(void 0!==n&&(i.timeout=setTimeout((()=>{this.remove(t,i)}),n)),this.data[r].push(i),this.order.push(r),this.order.length>this.max){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value}getByKey(t){const e=this.data[t];return e?e[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,e){if(!this.has(t))return this;const n=t.wrapped().key,r=void 0===e?0:this.data[n].indexOf(e),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}filter(t){const e=[];for(const n in this.data)for(const r of this.data[n])t(r.value)||e.push(r);for(const t of e)this.remove(t.value.tileID,t)}}class Yd{constructor(t,e,n){this.func=t,this.mask=e,this.range=n}}Yd.ReadOnly=!1,Yd.ReadWrite=!0,Yd.disabled=new Yd(519,Yd.ReadOnly,[0,1]);const Xd=7680;class Kd{constructor(t,e,n,r,i,o){this.test=t,this.ref=e,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o}}Kd.disabled=new Kd({func:519,mask:0},0,0,Xd,Xd,Xd);class Jd{constructor(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n}}Jd.Replace=[1,0],Jd.disabled=new Jd(Jd.Replace,Le.transparent,[!1,!1,!1,!1]),Jd.unblended=new Jd(Jd.Replace,Le.transparent,[!0,!0,!0,!0]),Jd.alphaBlended=new Jd([1,771],Le.transparent,[!0,!0,!0,!0]);const Qd=1029,tg=2305;class eg{constructor(t,e,n){this.enable=t,this.mode=e,this.frontFace=n}}eg.disabled=new eg(!1,Qd,tg),eg.backCCW=new eg(!0,Qd,tg),eg.backCW=new eg(!0,Qd,2304),eg.frontCW=new eg(!0,1028,2304),eg.frontCCW=new eg(!0,1028,tg);class ng extends ee{constructor(t,e,n){super(),this.id=t,this._onlySymbols=n,e.on("data",(t=>{"source"===t.dataType&&"metadata"===t.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))})),e.on("error",(()=>{this._sourceErrored=!0})),this._source=e,this._tiles={},this._cache=new Zd(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=e.minTileCacheSize,this._maxTileCacheSize=e.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new Rd,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(t){this.map=t,this._minTileCacheSize=void 0===this._minTileCacheSize&&t?t._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&t?t._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const t in this._tiles){const e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(t,e){return t.isSymbolTile=this._onlySymbols,this._source.loadTile(t,e)}_unloadTile(t){if(this._source.unloadTile)return this._source.unloadTile(t,(()=>{}))}_abortTile(t){if(this._source.abortTile)return this._source.abortTile(t,(()=>{}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const e in this._tiles){const n=this._tiles[e];n.upload(t),n.prepare(this.map.style.imageManager)}}getIds(){return L(this._tiles).map((t=>t.tileID)).sort(rg).map((t=>t.key))}getRenderableIds(t){const e=[];for(const n in this._tiles)this._isIdRenderable(+n,t)&&e.push(this._tiles[n]);return t?e.sort(((t,e)=>{const n=t.tileID,r=e.tileID,i=new x(n.canonical.x,n.canonical.y)._rotate(this.transform.angle),o=new x(r.canonical.x,r.canonical.y)._rotate(this.transform.angle);return n.overscaledZ-r.overscaledZ||o.y-i.y||o.x-i.x})).map((t=>t.tileID.key)):e.map((t=>t.tileID)).sort(rg).map((t=>t.key))}hasRenderableParent(t){const e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)}_isIdRenderable(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(+t,"reloading")}}_reloadTile(t,e){const n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))}_tileLoaded(t,e,n,r){if(r)if(t.state="errored",404!==r.status)this._source.fire(new te(r,{tile:t}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const t=this.map.painter.terrain;this.update(this.transform,t.getScaledDemTileSize(),!0),t.resetTileLookupCache(this.id)}else this.update(this.transform);else t.timeAdded=Xt.now(),"expired"===n&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(e,t),"raster-dem"===this._source.type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new Qt("data",{dataType:"source",tile:t,coord:t.tileID,sourceCacheId:this.id}))}_backfillDEM(t){const e=this.getRenderableIds();for(let r=0;r<e.length;r++){const i=e[r];if(t.neighboringTiles&&t.neighboringTiles[i]){const e=this.getTileByID(i);n(t,e),n(e,t)}}function n(t,e){if(!t.dem||t.dem.borderReady)return;t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0;let n=e.tileID.canonical.x-t.tileID.canonical.x;const r=e.tileID.canonical.y-t.tileID.canonical.y,i=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,r),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,e,n,r){for(const i in this._tiles){let o=this._tiles[i];if(r[i]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>n)continue;let s=o.tileID;for(;o&&o.tileID.overscaledZ>e+1;){const t=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[t.key],o&&o.hasData()&&(s=t)}let a=s;for(;a.overscaledZ>e;)if(a=a.scaledTo(a.overscaledZ-1),t[a.key]){r[s.key]=s;break}}}findLoadedParent(t,e){if(t.key in this._loadedParentTiles){const n=this._loadedParentTiles[t.key];return n&&n.tileID.overscaledZ>=e?n:null}for(let n=t.overscaledZ-1;n>=e;n--){const e=t.scaledTo(n),r=this._getLoadedTile(e);if(r)return r}}_getLoadedTile(t){const e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(this._source.reparseOverscaled?t.wrapped().key:t.canonical.key)}updateCacheSize(t,e){e=e||this._source.tileSize;const n=Math.ceil(t.width/e)+1,r=Math.ceil(t.height/e)+1,i=Math.floor(n*r*5),o="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,i):i,s="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,o):o;this._cache.setMaxSize(s)}handleWrapJump(t){const e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){const t={};for(const n in this._tiles){const r=this._tiles[n];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+e),t[r.tileID.key]=r}this._tiles=t;for(const t in this._timers)clearTimeout(this._timers[t]),delete this._timers[t];for(const t in this._tiles)this._setTileReloadTimer(+t,this._tiles[t])}}update(t,e,n){if(this.transform=t,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage)return;if(this.usedForTerrain&&!n)return;let r;this.updateCacheSize(t,e),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?r=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((t=>new gh(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y))):(r=t.coveringTiles({tileSize:e||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!n,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(r=r.filter((t=>this._source.hasTile(t))))):r=[];const i=this._updateRetainedTiles(r);if(ig(this._source.type)&&0!==r.length){const t={},e={},n=Object.keys(i);for(const r of n){const n=i[r],o=this._tiles[r];if(!o||o.fadeEndTime&&o.fadeEndTime<=Xt.now())continue;const s=this.findLoadedParent(n,Math.max(n.overscaledZ-ng.maxOverzooming,this._source.minzoom));s&&(this._addTile(s.tileID),t[s.tileID.key]=s.tileID),e[r]=n}const o=r[r.length-1].overscaledZ;for(const t in this._tiles){const n=this._tiles[t];if(i[t]||!n.hasData())continue;let r=n.tileID;for(;r.overscaledZ>o;){r=r.scaledTo(r.overscaledZ-1);const o=this._tiles[r.key];if(o&&o.hasData()&&e[r.key]){i[t]=n.tileID;break}}}for(const e in t)i[e]||(this._coveredTiles[e]=!0,i[e]=t[e])}for(const t in i)this._tiles[t].clearFadeHold();const o=function(t,e){const n=[];for(const r in t)r in e||n.push(r);return n}(this._tiles,i);for(const t of o){const e=this._tiles[t];e.hasSymbolBuckets&&!e.holdingForFade()?e.setHoldDuration(this.map._fadeDuration):e.hasSymbolBuckets&&!e.symbolFadeFinished()||this._removeTile(+t)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(+t)}_updateRetainedTiles(t){const e={};if(0===t.length)return e;const n={},r=t.reduce(((t,e)=>Math.min(t,e.overscaledZ)),1/0),i=t[0].overscaledZ,o=Math.max(i-ng.maxOverzooming,this._source.minzoom),s=Math.max(i+ng.maxUnderzooming,this._source.minzoom),a={};for(const n of t){const t=this._addTile(n);e[n.key]=n,t.hasData()||r<this._source.maxzoom&&(a[n.key]=n)}this._retainLoadedChildren(a,r,s,e);for(const r of t){let t=this._tiles[r.key];if(t.hasData())continue;if(r.canonical.z>=this._source.maxzoom){const t=r.children(this._source.maxzoom)[0],n=this.getTile(t);if(n&&n.hasData()){e[t.key]=t;continue}}else{const t=r.children(this._source.maxzoom);if(e[t[0].key]&&e[t[1].key]&&e[t[2].key]&&e[t[3].key])continue}let i=t.wasRequested();for(let s=r.overscaledZ-1;s>=o;--s){const o=r.scaledTo(s);if(n[o.key])break;if(n[o.key]=!0,t=this.getTile(o),!t&&i&&(t=this._addTile(o)),t&&(e[o.key]=o,i=t.wasRequested(),t.hasData()))break}}return e}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const e=[];let n,r=this._tiles[t].tileID;for(;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}e.push(r.key);const t=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(t),n)break;r=t}for(const t of e)this._loadedParentTiles[t]=n}}_addTile(t){let e=this._tiles[t.key];if(e)return e;e=this._cache.getAndRemove(t),e&&(this._setTileReloadTimer(t.key,e),e.tileID=t,this._state.initializeTileState(e,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,e)));const n=Boolean(e);if(!n){const n=this.map?this.map.painter:null;e=new Dd(t,this._source.tileSize*t.overscaleFactor(),this.transform.tileZoom,n,this._isRaster),this._loadTile(e,this._tileLoaded.bind(this,e,t.key,e.state))}return e?(e.uses++,this._tiles[t.key]=e,n||this._source.fire(new Qt("dataloading",{tile:e,coord:e.tileID,dataType:"source"})),e):null}_setTileReloadTimer(t,e){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const n=e.getExpiryTimeout();n&&(this._timers[t]=setTimeout((()=>{this._reloadTile(t,"expired"),delete this._timers[t]}),n))}_removeTile(t){const e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(+t);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(t,e,n){const r=[],i=this.transform;if(!i)return r;const o="globe"===i.projection.name,s=Gc(i.center.lng);for(const a in this._tiles){const c=this._tiles[a];if(n&&c.clearQueryDebugViz(),c.holdingForFade())continue;let l;if(o){const t=c.tileID.canonical;if(0===t.z){const e=[Math.abs(I(s,...og(t,-1))-s),Math.abs(I(s,...og(t,1))-s)];l=[0,2*e.indexOf(Math.min(...e))-1]}else{const e=[Math.abs(I(s,...og(t,-1))-s),Math.abs(I(s,...og(t,0))-s),Math.abs(I(s,...og(t,1))-s)];l=[e.indexOf(Math.min(...e))-1]}}else l=[0];for(const n of l){const o=t.containsTile(c,i,e,n);o&&r.push(o)}}return r}getVisibleCoordinates(t){const e=this.getRenderableIds(t).map((t=>this._tiles[t].tileID));for(const t of e)t.projMatrix=this.transform.calculateProjMatrix(t.toUnwrapped());return e}hasTransition(){if(this._source.hasTransition())return!0;if(ig(this._source.type))for(const t in this._tiles){const e=this._tiles[t];if(void 0!==e.fadeEndTime&&e.fadeEndTime>=Xt.now())return!0}return!1}setFeatureState(t,e,n){this._state.updateState(t=t||"_geojsonTileLayer",e,n)}removeFeatureState(t,e,n){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,n)}getFeatureState(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)}setDependencies(t,e,n){const r=this._tiles[t];r&&r.setDependencies(e,n)}reloadTilesForDependencies(t,e){for(const n in this._tiles)this._tiles[n].hasDependency(t,e)&&this._reloadTile(+n,"reloading");this._cache.filter((n=>!n.hasDependency(t,e)))}_preloadTiles(t,e){if(!this._sourceLoaded){const n=()=>{this._sourceLoaded&&(this._source.off("data",n),this._preloadTiles(t,e))};return void this._source.on("data",n)}const n=new Map,r=Array.isArray(t)?t:[t],i=this.map.painter.terrain,o=this.usedForTerrain&&i?i.getScaledDemTileSize():this._source.tileSize;for(const t of r){const e=t.coveringTiles({tileSize:o,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const t of e)n.set(t.key,t);this.usedForTerrain&&t.updateElevation(!1)}P(Array.from(n.values()),((t,e)=>{const n=new Dd(t,this._source.tileSize*t.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(n,(t=>{"raster-dem"===this._source.type&&n.dem&&this._backfillDEM(n),e(t,n)}))}),e)}}function rg(t,e){const n=Math.abs(2*t.wrap)-+(t.wrap<0),r=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||r-n||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function ig(t){return"raster"===t||"image"===t||"video"===t||"custom"===t}function og(t,e){const n=1<<t.z;return[t.x/n+e,(t.x+1)/n+e]}ng.maxOverzooming=10,ng.maxUnderzooming=3;class sg{constructor(t,e,n){this._demTile=t,this._dem=this._demTile.dem,this._scale=e,this._offset=n}static create(t,e,n){const r=n||t.findDEMTileFor(e);if(!r||!r.dem)return;const i=r.dem,o=r.tileID,s=1<<e.canonical.z-o.canonical.z;return new sg(r,r.tileSize/ca/s,[(e.canonical.x/s-o.canonical.x)*i.dim,(e.canonical.y/s-o.canonical.y)*i.dim])}tileCoordToPixel(t,e){const n=e*this._scale+this._offset[1],r=Math.floor(t*this._scale+this._offset[0]),i=Math.floor(n);return new x(r,i)}getElevationAt(t,e,n,r){const i=t*this._scale+this._offset[0],o=e*this._scale+this._offset[1],s=Math.floor(i),a=Math.floor(o),c=this._dem;return r=!!r,n?Dn(Dn(c.get(s,a,r),c.get(s,a+1,r),o-a),Dn(c.get(s+1,a,r),c.get(s+1,a+1,r),o-a),i-s):c.get(s,a,r)}getElevationAtPixel(t,e,n){return this._dem.get(t,e,!!n)}getMeterToDEM(t){return(1<<this._demTile.tileID.canonical.z)*Hc(1,t)*this._dem.stride}}class ag{constructor(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Yi(ca,16,0),this.featureIndexArray=new Es,this.promoteId=e}insert(t,e,n,r,i,o=0){const s=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i,o);const a=this.grid;for(let t=0;t<e.length;t++){const n=e[t],r=[1/0,1/0,-1/0,-1/0];for(let t=0;t<n.length;t++){const e=n[t];r[0]=Math.min(r[0],e.x),r[1]=Math.min(r[1],e.y),r[2]=Math.max(r[2],e.x),r[3]=Math.max(r[3],e.y)}r[0]<ca&&r[1]<ca&&r[2]>=0&&r[3]>=0&&a.insert(s,r[0],r[1],r[2],r[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Hu(new yp(this.rawTileData)).layers,this.sourceLayerCoder=new wd(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const t in this.vtLayers)this.vtFeatures[t]=[]}return this.vtLayers}query(t,e,n,r){this.loadVTLayers();const i=t.params||{},o=fi(i.filter),s=t.tileResult,a=t.transform,c=s.bufferedTilespaceBounds,l=this.grid.query(c.min.x,c.min.y,c.max.x,c.max.y,((t,e,n,r)=>wl(s.bufferedTilespaceGeometry,t,e,n,r)));l.sort(lg);let u=null;a.elevation&&l.length>0&&(u=sg.create(a.elevation,this.tileID));const h={};let p;for(let a=0;a<l.length;a++){const c=l[a];if(c===p)continue;p=c;const f=this.featureIndexArray.get(c);let d=null;this.loadMatchingFeature(h,f,o,i.layers,i.availableImages,e,n,r,((e,n,r,i=0)=>(d||(d=al(e,this.tileID.canonical,t.tileTransform)),n.queryIntersectsFeature(s,e,r,d,this.z,t.transform,t.pixelPosMatrix,u,i))))}return h}loadMatchingFeature(t,e,n,r,i,o,s,a,c){const{featureIndex:l,bucketIndex:u,sourceLayerIndex:h,layoutVertexArrayOffset:p}=e,f=this.bucketLayerIDs[u];if(r&&!function(t,e){for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(r,f))return;const d=this.sourceLayerCoder.decode(h),g=this.vtLayers[d].feature(l);if(n.needGeometry){const t=cl(g,!0);if(!n.filter(new To(this.tileID.overscaledZ),t,this.tileID.canonical))return}else if(!n.filter(new To(this.tileID.overscaledZ),g))return;const m=this.getId(g,d);for(let e=0;e<f.length;e++){const n=f[e];if(r&&r.indexOf(n)<0)continue;const u=o[n];if(!u)continue;let h={};void 0!==m&&a&&(h=a.getState(u.sourceLayer||"_geojsonTileLayer",m));const d=D({},s[n]);d.paint=cg(d.paint,u.paint,g,h,i),d.layout=cg(d.layout,u.layout,g,h,i);const y=!c||c(g,u,h,p);if(!y)continue;const _=new Td(g,this.z,this.x,this.y,m);_.layer=d;let v=t[n];void 0===v&&(v=t[n]=[]),v.push({featureIndex:l,feature:_,intersectionZ:y})}}lookupSymbolFeatures(t,e,n,r,i,o,s,a){const c={};this.loadVTLayers();const l=fi(i);for(const i of t)this.loadMatchingFeature(c,{bucketIndex:n,sourceLayerIndex:r,featureIndex:i,layoutVertexArrayOffset:0},l,o,s,a,e);return c}loadFeature(t){const{featureIndex:e,sourceLayerIndex:n}=t;this.loadVTLayers();const r=this.sourceLayerCoder.decode(n),i=this.vtFeatures[r];if(i[e])return i[e];const o=this.vtLayers[r].feature(e);return i[e]=o,o}hasLayer(t){for(const e of this.bucketLayerIDs)for(const n of e)if(t===n)return!0;return!1}getId(t,e){let n=t.id;if(this.promoteId){const r="string"==typeof this.promoteId?this.promoteId:this.promoteId[e];null!=r&&(n=t.properties[r]),"boolean"==typeof n&&(n=Number(n))}return n}}function cg(t,e,n,r,i){return V(t,((t,o)=>{const s=e instanceof Po?e.get(o):null;return s&&s.evaluate?s.evaluate(n,r,i):s}))}function lg(t,e){return e-t}Ki(ag,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class ug{constructor(t,e){this.width=t,this.height=e,this.nextRow=0,this.image=new Bl({width:t,height:e}),this.positions={},this.uploaded=!1}getDash(t,e){const n=this.getKey(t,e);return this.positions[n]}trim(){const t=this.width,e=this.height=z(this.nextRow);this.image.resize({width:t,height:e})}getKey(t,e){return t.join(",")+e}getDashRanges(t,e,n){const r=[];let i=t.length%2==1?-t[t.length-1]*n:0,o=t[0]*n,s=!0;r.push({left:i,right:o,isDash:s,zeroLength:0===t[0]});let a=t[0];for(let e=1;e<t.length;e++){s=!s;const c=t[e];i=a*n,a+=c,o=a*n,r.push({left:i,right:o,isDash:s,zeroLength:0===c})}return r}addRoundDash(t,e,n){const r=e/2;for(let e=-n;e<=n;e++){const i=this.width*(this.nextRow+n+e);let o=0,s=t[o];for(let a=0;a<this.width;a++){a/s.right>1&&(s=t[++o]);const c=Math.abs(a-s.left),l=Math.abs(a-s.right),u=Math.min(c,l);let h;const p=e/n*(r+1);if(s.isDash){const t=r-Math.abs(p);h=Math.sqrt(u*u+t*t)}else h=r-Math.sqrt(u*u+p*p);this.image.data[i+a]=Math.max(0,Math.min(255,h+128))}}}addRegularDash(t,e){for(let e=t.length-1;e>=0;--e){const n=t[e],r=t[e+1];n.zeroLength?t.splice(e,1):r&&r.isDash===n.isDash&&(r.left=n.left,t.splice(e,1))}const n=t[0],r=t[t.length-1];n.isDash===r.isDash&&(n.left=r.left-this.width,r.right=n.right+this.width);const i=this.width*this.nextRow;let o=0,s=t[o];for(let n=0;n<this.width;n++){n/s.right>1&&(s=t[++o]);const r=Math.abs(n-s.left),a=Math.abs(n-s.right),c=Math.min(r,a);this.image.data[i+n]=Math.max(0,Math.min(255,(s.isDash?c:-c)+e+128))}}addDash(t,e){const n=this.getKey(t,e);if(this.positions[n])return this.positions[n];const r="round"===e,i=r?7:0,o=2*i+1;if(this.nextRow+o>this.height)return $("LineAtlas out of space"),null;0===t.length&&t.push(1);let s=0;for(let e=0;e<t.length;e++)t[e]<0&&($("Negative value is found in line dasharray, replacing values with 0"),t[e]=0),s+=t[e];if(0!==s){const n=this.width/s,o=this.getDashRanges(t,this.width,n);r?this.addRoundDash(o,n,i):this.addRegularDash(o,"square"===e?.5*n:0)}const a=this.nextRow+i;this.nextRow+=o;const c={tl:[a,i],br:[s,0]};return this.positions[n]=c,c}}Ki(ug,"LineAtlas");const hg=1*ef;class pg{constructor(t){const e={},n=[];for(const r in t){const i=t[r],o=e[r]={};for(const t in i.glyphs){const e=i.glyphs[+t];if(!e||0===e.bitmap.width||0===e.bitmap.height)continue;const r=e.metrics.localGlyph?hg:1,s={x:0,y:0,w:e.bitmap.width+2*r,h:e.bitmap.height+2*r};n.push(s),o[t]=s}}const{w:r,h:i}=Ep(n),o=new Bl({width:r||1,height:i||1});for(const n in t){const r=t[n];for(const t in r.glyphs){const i=r.glyphs[+t];if(!i||0===i.bitmap.width||0===i.bitmap.height)continue;const s=e[n][t],a=i.metrics.localGlyph?hg:1;Bl.copy(i.bitmap,o,{x:0,y:0},{x:s.x+a,y:s.y+a},i.bitmap)}}this.image=o,this.positions=e}}Ki(pg,"GlyphAtlas");class fg{constructor(t){this.tileID=new gh(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.tileZoom=t.tileZoom,this.uid=t.uid,this.zoom=t.zoom,this.canonical=t.tileID.canonical,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.enableTerrain=!!t.enableTerrain,this.isSymbolTile=t.isSymbolTile,this.tileTransform=Pf(t.tileID.canonical,t.projection),this.projection=t.projection}parse(t,e,n,r,i){this.status="parsing",this.data=t,this.collisionBoxArray=new gs;const o=new wd(Object.keys(t.layers).sort()),s=new ag(this.tileID,this.promoteId);s.bucketLayerIDs=[];const a={},c=new ug(256,256),l={featureIndex:s,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:c,availableImages:n},u=e.familiesBySource[this.source];for(const e in u){const r=t.layers[e];if(!r)continue;let i=!1,c=!1;for(const t of u[e])"symbol"===t[0].type?i=!0:c=!0;if(!0===this.isSymbolTile&&!i)continue;if(!1===this.isSymbolTile&&!c)continue;1===r.version&&$(`Vector tile source "${this.source}" layer "${e}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const h=o.encode(e),p=[];for(let t=0;t<r.length;t++){const n=r.feature(t),i=s.getId(n,e);p.push({feature:n,id:i,index:t,sourceLayerIndex:h})}for(const t of u[e]){const e=t[0];void 0!==this.isSymbolTile&&"symbol"===e.type!==this.isSymbolTile||e.minzoom&&this.zoom<Math.floor(e.minzoom)||e.maxzoom&&this.zoom>=e.maxzoom||"none"!==e.visibility&&(dg(t,this.zoom,n),(a[e.id]=e.createBucket({index:s.bucketLayerIDs.length,layers:t,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:h,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:n})).populate(p,l,this.tileID.canonical,this.tileTransform),s.bucketLayerIDs.push(t.map((t=>t.id))))}}let h,p,f,d;c.trim();const g={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},m=()=>{if(h)return i(h);if(p&&f&&d){const t=new pg(p),e=new kp(f,d);for(const r in a){const i=a[r];i instanceof cd?(dg(i.layers,this.zoom,n),bf(i,p,t.positions,f,e.iconPositions,this.showCollisionBoxes,n,this.tileID.canonical,this.tileZoom,this.projection)):i.hasPattern&&(i instanceof Ah||i instanceof Mu||i instanceof eh)&&(dg(i.layers,this.zoom,n),i.addFeatures(l,this.tileID.canonical,e.patternPositions,n,this.tileTransform))}this.status="done",i(null,{buckets:L(a).filter((t=>!t.isEmpty())),featureIndex:s,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,lineAtlas:c,imageAtlas:e,glyphMap:this.returnDependencies?p:null,iconMap:this.returnDependencies?f:null,glyphPositions:this.returnDependencies?t.positions:null})}},y=V(l.glyphDependencies,(t=>Object.keys(t).map(Number)));Object.keys(y).length?r.send("getGlyphs",{uid:this.uid,stacks:y},((t,e)=>{h||(h=t,p=e,m())}),void 0,!1,g):p={};const _=Object.keys(l.iconDependencies);_.length?r.send("getImages",{icons:_,source:this.source,tileID:this.tileID,type:"icons"},((t,e)=>{h||(h=t,f=e,m())}),void 0,!1,g):f={};const v=Object.keys(l.patternDependencies);v.length?r.send("getImages",{icons:v,source:this.source,tileID:this.tileID,type:"patterns"},((t,e)=>{h||(h=t,d=e,m())}),void 0,!1,g):d={},m()}}function dg(t,e,n){const r=new To(e);for(const e of t)e.recalculate(r,n)}class gg{constructor(t){this.entries={},this.scheduler=t}request(t,e,n,r){const i=this.entries[t]=this.entries[t]||{callbacks:[]};if(i.result){const[t,n]=i.result;return this.scheduler?this.scheduler.add((()=>{r(t,n)}),e):r(t,n),()=>{}}return i.callbacks.push(r),i.cancel||(i.cancel=n(((n,r)=>{i.result=[n,r];for(const t of i.callbacks)this.scheduler?this.scheduler.add((()=>{t(n,r)}),e):t(n,r);setTimeout((()=>delete this.entries[t]),3e3)}))),()=>{i.result||(i.callbacks=i.callbacks.filter((t=>t!==r)),i.callbacks.length||(i.cancel(),delete this.entries[t]))}}}function mg(t,e,n){const r=JSON.stringify(t.request);return t.data&&(this.deduped.entries[r]={result:[null,t.data]}),this.deduped.request(r,{type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom},(e=>{const r=dt(t.request,((t,r,i,o)=>{t?e(t):r&&e(null,{vectorTile:n?void 0:new Hu(new yp(r)),rawData:r,cacheControl:i,expires:o})}));return()=>{r.cancel(),e()}}),e)}const yg=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class _g{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[e,n]=new Uint8Array(t,0,2);if(219!==e)throw new Error("Data does not appear to be in a KDBush format.");const r=n>>4;if(1!==r)throw new Error(`Got v${r} data when expected v1.`);const i=yg[15&n];if(!i)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(t,2,1),[s]=new Uint32Array(t,4,1);return new _g(s,o,i,t)}constructor(t,e=64,n=Float64Array,r){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+e,2),65535),this.ArrayType=n,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const i=yg.indexOf(this.ArrayType),o=2*t*this.ArrayType.BYTES_PER_ELEMENT,s=t*this.IndexArrayType.BYTES_PER_ELEMENT,a=(8-s%8)%8;if(i<0)throw new Error(`Unexpected typed array class: ${n}.`);r&&r instanceof ArrayBuffer?(this.data=r,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+s+a,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+o+s+a),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+s+a,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+i]),new Uint16Array(this.data,2,1)[0]=e,new Uint32Array(this.data,4,1)[0]=t)}add(t,e){const n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=t,this.coords[this._pos++]=e,n}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return vg(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,e,n,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:o,nodeSize:s}=this,a=[0,i.length-1,0],c=[];for(;a.length;){const l=a.pop()||0,u=a.pop()||0,h=a.pop()||0;if(u-h<=s){for(let s=h;s<=u;s++){const a=o[2*s],l=o[2*s+1];a>=t&&a<=n&&l>=e&&l<=r&&c.push(i[s])}continue}const p=h+u>>1,f=o[2*p],d=o[2*p+1];f>=t&&f<=n&&d>=e&&d<=r&&c.push(i[p]),(0===l?t<=f:e<=d)&&(a.push(h),a.push(p-1),a.push(1-l)),(0===l?n>=f:r>=d)&&(a.push(p+1),a.push(u),a.push(1-l))}return c}within(t,e,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:i,nodeSize:o}=this,s=[0,r.length-1,0],a=[],c=n*n;for(;s.length;){const l=s.pop()||0,u=s.pop()||0,h=s.pop()||0;if(u-h<=o){for(let n=h;n<=u;n++)Eg(i[2*n],i[2*n+1],t,e)<=c&&a.push(r[n]);continue}const p=h+u>>1,f=i[2*p],d=i[2*p+1];Eg(f,d,t,e)<=c&&a.push(r[p]),(0===l?t-n<=f:e-n<=d)&&(s.push(h),s.push(p-1),s.push(1-l)),(0===l?t+n>=f:e+n>=d)&&(s.push(p+1),s.push(u),s.push(1-l))}return a}}function vg(t,e,n,r,i,o){if(i-r<=n)return;const s=r+i>>1;xg(t,e,s,r,i,o),vg(t,e,n,r,s-1,1-o),vg(t,e,n,s+1,i,1-o)}function xg(t,e,n,r,i,o){for(;i>r;){if(i-r>600){const s=i-r+1,a=n-r+1,c=Math.log(s),l=.5*Math.exp(2*c/3),u=.5*Math.sqrt(c*l*(s-l)/s)*(a-s/2<0?-1:1);xg(t,e,n,Math.max(r,Math.floor(n-a*l/s+u)),Math.min(i,Math.floor(n+(s-a)*l/s+u)),o)}const s=e[2*n+o];let a=r,c=i;for(bg(t,e,r,n),e[2*i+o]>s&&bg(t,e,r,i);a<c;){for(bg(t,e,a,c),a++,c--;e[2*a+o]<s;)a++;for(;e[2*c+o]>s;)c--}e[2*r+o]===s?bg(t,e,r,c):(c++,bg(t,e,c,i)),c<=n&&(r=c+1),n<=c&&(i=c-1)}}function bg(t,e,n,r){wg(t,n,r),wg(e,2*n,2*r),wg(e,2*n+1,2*r+1)}function wg(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Eg(t,e,n,r){const i=t-n,o=e-r;return i*i+o*o}t.ARRAY_TYPE=ha,t.AUTH_ERR_MSG=xt,t.Aabb=oc,t.Actor=class{constructor(t,n,r){this.target=t,this.parent=n,this.mapId=r,this.callbacks={},this.cancelCallbacks={},F(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Y()?t:e,this.scheduler=new bd}send(t,e,n,r,i=!1,o){const s=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(n.metadata=o,this.callbacks[s]=n);const a=J(this.globalScope)?void 0:[];return this.target.postMessage({id:s,type:t,hasCallback:!!n,targetMapId:r,mustQueue:i,sourceMapId:this.mapId,data:to(e,a)},a),{cancel:()=>{n&&delete this.callbacks[s],this.target.postMessage({id:s,type:"<cancel>",targetMapId:r,sourceMapId:this.mapId})}}}receive(t){const e=t.data,n=e.id;if(n&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){const t=this.cancelCallbacks[n];delete this.cancelCallbacks[n],t&&t.cancel()}else if(e.mustQueue||Y()){const t=this.callbacks[n];this.cancelCallbacks[n]=this.scheduler.add((()=>this.processTask(n,e)),t&&t.metadata||{type:"message"})}else this.processTask(n,e)}processTask(t,e){if("<response>"===e.type){const n=this.callbacks[t];delete this.callbacks[t],n&&(e.error?n(eo(e.error)):n(null,eo(e.data)))}else{const n=J(this.globalScope)?void 0:[],r=e.hasCallback?(e,r)=>{delete this.cancelCallbacks[t],this.target.postMessage({id:t,type:"<response>",sourceMapId:this.mapId,error:e?to(e):null,data:to(r,n)},n)}:t=>{},i=eo(e.data);if(this.parent[e.type])this.parent[e.type](e.sourceMapId,i,r);else if(this.parent.getWorkerSource){const t=e.type.split(".");this.parent.getWorkerSource(e.sourceMapId,t[0],i.source)[t[1]](i,r)}else r(new Error(`Could not find function ${e.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},t.CanonicalTileID=fh,t.Color=Le,t.ColorMode=Jd,t.CullFaceMode=eg,t.DEMData=Hd,t.DataConstantProperty=Lo,t.DedupedRequest=gg,t.DepthMode=Yd,t.EXTENT=ca,t.Elevation=class{isDataAvailableAtPoint(t){const e=this._source();if(this.isUsingMockSource()||!e||t.y<0||t.y>1)return!1;const n=e.getSource().maxzoom,r=1<<n,i=Math.floor(t.x),o=Math.floor((t.x-i)*r),s=Math.floor(t.y*r),a=this.findDEMTileFor(new gh(n,i,n,o,s));return!(!a||!a.dem)}getAtPointOrZero(t,e=0){return this.getAtPoint(t,e)||0}getAtPoint(t,e,n=!0){if(this.isUsingMockSource())return null;null==e&&(e=null);const r=this._source();if(!r)return e;if(t.y<0||t.y>1)return e;const i=r.getSource().maxzoom,o=1<<i,s=Math.floor(t.x),a=t.x-s,c=new gh(i,s,i,Math.floor(a*o),Math.floor(t.y*o)),l=this.findDEMTileFor(c);if(!l||!l.dem)return e;const u=l.dem,h=1<<l.tileID.canonical.z,p=(a*h-l.tileID.canonical.x)*u.dim,f=(t.y*h-l.tileID.canonical.y)*u.dim,d=Math.floor(p),g=Math.floor(f);return(n?this.exaggeration():1)*Dn(Dn(u.get(d,g),u.get(d,g+1),f-g),Dn(u.get(d+1,g),u.get(d+1,g+1),f-g),p-d)}getAtTileOffset(t,e,n){const r=1<<t.canonical.z;return this.getAtPointOrZero(new Qc(t.wrap+(t.canonical.x+e/ca)/r,(t.canonical.y+n/ca)/r))}getAtTileOffsetFunc(t,e,n,r){return i=>{const o=this.getAtTileOffset(t,i.x,i.y),s=r.upVector(t.canonical,i.x,i.y);return La(s,s,o*r.upVectorScale(t.canonical,e,n).metersToTile),s}}getForTilePoints(t,e,n,r){if(this.isUsingMockSource())return!1;const i=sg.create(this,t,r);return!!i&&(e.forEach((t=>{t[2]=this.exaggeration()*i.getElevationAt(t[0],t[1],n)})),!0)}getMinMaxForTile(t){if(this.isUsingMockSource())return null;const e=this.findDEMTileFor(t);if(!e||!e.dem)return null;const n=e.dem.tree,r=e.tileID,i=1<<t.canonical.z-r.canonical.z;let o=t.canonical.x/i-r.canonical.x,s=t.canonical.y/i-r.canonical.y,a=0;for(let e=0;e<t.canonical.z-r.canonical.z&&!n.leaves[a];e++){o*=2,s*=2;const t=2*Math.floor(s)+Math.floor(o);a=n.childOffsets[a]+t,o%=1,s%=1}return{min:this.exaggeration()*n.minimums[a],max:this.exaggeration()*n.maximums[a]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(t,e,n){throw new Error("Pure virtual method called.")}pointCoordinate(t){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(t){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},t.ErrorEvent=te,t.EvaluationParameters=To,t.Event=Qt,t.Evented=ee,t.FillExtrusionBucket=eh,t.Frustum=ic,t.FrustumCorners=rc,t.GLOBE_RADIUS=cc,t.GLOBE_SCALE_MATCH_LATITUDE=45,t.GLOBE_ZOOM_THRESHOLD_MAX=ac,t.GLOBE_ZOOM_THRESHOLD_MIN=sc,t.GlobeSharedBuffers=class{constructor(t){this._createGrid(t),this._createPoles(t)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const t of this._poleSegments)t.destroy();for(const t of this._gridSegments)t.withSkirts.destroy(),t.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const t of this._wireframeSegments)t.destroy()}}_fillGridMeshWithLods(t,e){const n=new qo,r=new os,i=[],o=t+1+2,s=e[0]+1,a=e[0]+1+(1+e.length),c=(t,e,n)=>{let r=t===o-1?t-2:0===t?t:t-1;return r+=n?24575:0,[r,e]};for(let t=0;t<o;++t)n.emplaceBack(...c(t,0,!0));for(let t=0;t<s;++t)for(let e=0;e<o;++e)n.emplaceBack(...c(e,t,(0===e||e===o-1)&&!0));for(let t=0;t<e.length;++t){const r=e[t];for(let t=0;t<o;++t)n.emplaceBack(...c(t,r,!0))}for(let t=0;t<e.length;++t){const s=r.length,c=e[t]+1+2,l=new os;for(let n=0;n<c-1;n++){const i=n===c-2,s=i?o*(a-e.length+t-n):o;for(let t=0;t<o-1;t++){const e=n*o+t;0===n||i||0===t||t===o-2?(l.emplaceBack(e+1,e,e+s),l.emplaceBack(e+s,e+s+1,e+1)):(r.emplaceBack(e+1,e,e+s),r.emplaceBack(e+s,e+s+1,e+1))}}const u=aa.simpleSegment(0,s,n.length,r.length-s);for(let t=0;t<l.uint16.length;t+=3)r.emplaceBack(l.uint16[t],l.uint16[t+1],l.uint16[t+2]);const h=aa.simpleSegment(0,s,n.length,r.length-s);i.push({withoutSkirts:u,withSkirts:h})}return{vertices:n,indices:r,segments:i}}_createGrid(t){const e=this._fillGridMeshWithLods(uc,hc);this._gridSegments=e.segments,this._gridBuffer=t.createVertexBuffer(e.vertices,ec.members),this._gridIndexBuffer=t.createIndexBuffer(e.indices,!0)}_createPoles(t){const e=new os;for(let t=0;t<=uc;t++)e.emplaceBack(0,t+1,t+2);this._poleIndexBuffer=t.createIndexBuffer(e,!0);const n=new ls,r=new ls;this._poleSegments=[];for(let t=0,e=0;t<sc;t++){const i=360/(1<<t);n.emplaceBack(0,-cc,0,.5,0),r.emplaceBack(0,-cc,0,.5,1);for(let t=0;t<=uc;t++){const e=t/uc,o=Dn(0,i,e),[s,a,c]=kc(zc,Bc,o,cc);n.emplaceBack(s,a,c,e,0),r.emplaceBack(s,a,c,e,1)}this._poleSegments.push(aa.simpleSegment(e,0,66,64)),e+=66}this._poleNorthVertexBuffer=t.createVertexBuffer(n,Qa,!1),this._poleSouthVertexBuffer=t.createVertexBuffer(r,Qa,!1)}getGridBuffers(t,e){return[this._gridBuffer,this._gridIndexBuffer,e?this._gridSegments[t].withSkirts:this._gridSegments[t].withoutSkirts]}getPoleBuffers(t){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[t]]}getWirefameBuffers(t,e){if(!this._wireframeSegments){const e=new hs,n=uc,r=n+1+2,i=1;this._wireframeSegments=[];for(let t=0,o=0;t<hc.length;t++){const s=hc[t];for(let t=i;t<s+i;t++)for(let o=i;o<n+i;o++){const n=t*r+o;e.emplaceBack(n,n+1),e.emplaceBack(n,n+r),e.emplaceBack(n,n+r+1)}const a=s*n*3;this._wireframeSegments.push(aa.simpleSegment(0,o,(s+1)*r,a)),o+=a}this._wireframeIndexBuffer=t.createIndexBuffer(e)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[e]]}},t.GlyphManager=rf,t.ImagePosition=Sp,t.KDBush=_g,t.LivePerformanceUtils=Vt,t.LngLat=qc,t.LngLatBounds=la,t.LocalGlyphMode=nf,t.MAX_MERCATOR_LATITUDE=Kc,t.MercatorCoordinate=Qc,t.ONE_EM=Bh,t.OverscaledTileID=gh,t.PerformanceMarkers=Ut,t.Point=x,t.Properties=No,t.RGBAImage=Fl,t.Ray=nc,t.RequestManager=class{constructor(t,e,n){this._transformRequestFn=t,this._customAccessToken=e,this._silenceAuthErrors=!!n,this._createSkuToken()}_createSkuToken(){const t=function(){let t="";for(let e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",f,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}}normalizeStyleURL(t,e){if(!bt(t))return t;const n=At(t);return n.path=`/styles/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||e)}normalizeGlyphsURL(t,e){if(!bt(t))return t;const n=At(t);return n.path=`/fonts/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||e)}normalizeSourceURL(t,e,n,r){if(!bt(t))return t;const i=At(t);return i.path=`/v4/${i.authority}.json`,i.params.push("secure"),n&&i.params.push(`language=${n}`),r&&i.params.push(`worldview=${r}`),this._makeAPIURL(i,this._customAccessToken||e)}normalizeSpriteURL(t,e,n,r){const i=At(t);return bt(t)?(i.path=`/styles/v1${i.path}/sprite${e}${n}`,this._makeAPIURL(i,this._customAccessToken||r)):(i.path+=`${e}${n}`,Mt(i))}normalizeTileURL(t,e,n){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!bt(t))return t;const r=At(t);r.path=r.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${e||n&&"raster"!==r.authority&&512===n?"@2x":""}${a.supported?".webp":"$1"}`),"raster"===r.authority?r.path=`/${s.RASTER_URL_PREFIX}${r.path}`:(r.path=r.path.replace(/^.+\/v4\//,"/"),r.path=`/${s.TILE_URL_VERSION}${r.path}`);const i=this._customAccessToken||function(t){for(const e of t){const t=e.match(/^access_token=(.*)$/);if(t)return t[1]}return null}(r.params)||s.ACCESS_TOKEN;return s.REQUIRE_ACCESS_TOKEN&&i&&this._skuToken&&r.params.push(`sku=${this._skuToken}`),this._makeAPIURL(r,i)}canonicalizeTileURL(t,e){const n=At(t);if(!n.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!n.path.match(/\.[\w]+$/))return t;let r="mapbox://";n.path.match(/^\/raster\/v1\//)?r+=`raster/${n.path.replace(`/${s.RASTER_URL_PREFIX}/`,"")}`:r+=`tiles/${n.path.replace(`/${s.TILE_URL_VERSION}/`,"")}`;let i=n.params;return e&&(i=i.filter((t=>!t.match(/^access_token=/)))),i.length&&(r+=`?${i.join("&")}`),r}canonicalizeTileset(t,e){const n=!!e&&bt(e),r=[];for(const e of t.tiles||[])wt(e)?r.push(this.canonicalizeTileURL(e,n)):r.push(e);return r}_makeAPIURL(t,e){const n="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",r=At(s.API_URL);if(t.protocol=r.protocol,t.authority=r.authority,"http"===t.protocol){const e=t.params.indexOf("secure");e>=0&&t.params.splice(e,1)}if("/"!==r.path&&(t.path=`${r.path}${t.path}`),!s.REQUIRE_ACCESS_TOKEN)return Mt(t);if(e=e||s.ACCESS_TOKEN,!this._silenceAuthErrors){if(!e)throw new Error(`An API access token is required to use Mapbox GL. ${n}`);if("s"===e[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${n}`)}return t.params=t.params.filter((t=>-1===t.indexOf("access_token"))),t.params.push(`access_token=${e||""}`),Mt(t)}},t.ResourceType=ut,t.SegmentVector=aa,t.SourceCache=ng,t.StencilMode=Kd,t.StructArrayLayout1ui2=ps,t.StructArrayLayout2f1f2i16=ns,t.StructArrayLayout2i4=qo,t.StructArrayLayout2ui4=hs,t.StructArrayLayout3f12=is,t.StructArrayLayout3ui6=os,t.StructArrayLayout4i8=Go,t.StructArrayLayout5f20=ls,t.Texture=vd,t.Tile=Dd,t.Transitionable=Ao,t.Uniform1f=zs,t.Uniform1i=class extends js{constructor(t){super(t),this.current=0}set(t,e,n){this.fetchUniformLocation(t,e)&&this.current!==n&&(this.current=n,this.gl.uniform1i(this.location,n))}},t.Uniform2f=class extends js{constructor(t){super(t),this.current=[0,0]}set(t,e,n){this.fetchUniformLocation(t,e)&&(n[0]===this.current[0]&&n[1]===this.current[1]||(this.current=n,this.gl.uniform2f(this.location,n[0],n[1])))}},t.Uniform3f=class extends js{constructor(t){super(t),this.current=[0,0,0]}set(t,e,n){this.fetchUniformLocation(t,e)&&(n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]||(this.current=n,this.gl.uniform3f(this.location,n[0],n[1],n[2])))}},t.Uniform4f=Bs,t.UniformColor=Fs,t.UniformMatrix2f=class extends js{constructor(t){super(t),this.current=qs}set(t,e,n){if(this.fetchUniformLocation(t,e))for(let t=0;t<4;t++)if(n[t]!==this.current[t]){this.current=n,this.gl.uniformMatrix2fv(this.location,!1,n);break}}},t.UniformMatrix3f=class extends js{constructor(t){super(t),this.current=Vs}set(t,e,n){if(this.fetchUniformLocation(t,e))for(let t=0;t<9;t++)if(n[t]!==this.current[t]){this.current=n,this.gl.uniformMatrix3fv(this.location,!1,n);break}}},t.UniformMatrix4f=class extends js{constructor(t){super(t),this.current=Us}set(t,e,n){if(this.fetchUniformLocation(t,e)){if(n[12]!==this.current[12]||n[0]!==this.current[0])return this.current=n,void this.gl.uniformMatrix4fv(this.location,!1,n);for(let t=1;t<16;t++)if(n[t]!==this.current[t]){this.current=n,this.gl.uniformMatrix4fv(this.location,!1,n);break}}}},t.UnwrappedTileID=dh,t.ValidationError=ii,t.VectorTileFeature=Zu,t.VectorTileWorkerSource=class extends ee{constructor(t,e,n,r,i){super(),this.actor=t,this.layerIndex=e,this.availableImages=n,this.loadVectorData=i||mg,this.loading={},this.loaded={},this.deduped=new gg(t.scheduler),this.isSpriteLoaded=r,this.scheduler=t.scheduler}loadTile(t,e){const n=t.uid,r=t&&t.request,i=r&&r.collectResourceTiming,o=this.loading[n]=new fg(t);o.abort=this.loadVectorData(t,((s,a)=>{const c=!this.loading[n];if(delete this.loading[n],c||s||!a)return o.status="done",c||(this.loaded[n]=o),e(s);const l=a.rawData,u={};a.expires&&(u.expires=a.expires),a.cacheControl&&(u.cacheControl=a.cacheControl),o.vectorTile=a.vectorTile||new Hu(new yp(l));const h=()=>{o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,((t,n)=>{if(t||!n)return e(t);const o={};if(i){const t=Gt(r);t.length>0&&(o.resourceTiming=JSON.parse(JSON.stringify(t)))}e(null,D({rawTileData:l.slice(0)},n,u,o))}))};this.isSpriteLoaded?h():this.once("isSpriteLoaded",(()=>{this.scheduler?this.scheduler.add(h,{type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom}):h()})),this.loaded=this.loaded||{},this.loaded[n]=o}))}reloadTile(t,e){const n=this.loaded,r=t.uid,i=this;if(n&&n[r]){const o=n[r];o.showCollisionBoxes=t.showCollisionBoxes,o.enableTerrain=!!t.enableTerrain,o.projection=t.projection,o.tileTransform=Pf(t.tileID.canonical,t.projection);const s=(t,n)=>{const r=o.reloadCallback;r&&(delete o.reloadCallback,o.parse(o.vectorTile,i.layerIndex,this.availableImages,i.actor,r)),e(t,n)};"parsing"===o.status?o.reloadCallback=s:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}}abortTile(t,e){const n=t.uid,r=this.loading[n];r&&(r.abort&&r.abort(),delete this.loading[n]),e()}removeTile(t,e){const n=this.loaded,r=t.uid;n&&n[r]&&delete n[r],e()}},t.WritingMode=Ap,t.ZoomDependentExpression=ti,t.add=Ma,t.addDynamicAttributes=id,t.adjoint=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],u=e[8];return t[0]=s*u-a*l,t[1]=i*l-r*u,t[2]=r*a-i*s,t[3]=a*c-o*u,t[4]=n*u-i*c,t[5]=i*o-n*a,t[6]=o*l-s*c,t[7]=r*c-n*l,t[8]=n*s-r*o,t},t.asyncAll=P,t.bezier=A,t.bindAll=F,t.boundsAttributes=Pd,t.bufferConvexPolygon=function(t,e){const n=[];for(let r=0;r<t.length;r++){const i=O(r-1,-1,t.length-1),o=O(r+1,-1,t.length-1),s=t[r],a=t[o],c=t[i].sub(s).unit(),l=a.sub(s).unit(),u=l.angleWithSep(c.x,c.y),h=c.add(l).unit().mult(-1*e/Math.sin(u/2));n.push(s.add(h))}return n},t.cacheEntryPossiblyAdded=function(t){lt++,lt>ot&&(t.getActor().send("enforceCacheSizeLimit",it),lt=0)},t.calculateGlobeLabelMatrix=function(t,e){const{x:n,y:r}=t.point,i=Lc(n,r,t.worldSize/t._pixelsPerMercatorPixel,0,0);return ma(i,i,Pc(vc(e)))},t.calculateGlobeMatrix=function(t){const{x:e,y:n}=t.point,{lng:r,lat:i}=t._center;return Lc(e,n,t.worldSize,r,i)},t.calculateGlobeMercatorMatrix=function(t){const e=t.pixelsPerMeter,n=e/Hc(1,t.center.lat),r=da(new Float64Array(16));return ya(r,r,[t.point.x,t.point.y,0]),_a(r,r,[n,n,e]),Float32Array.from(r)},t.circumferenceAtLatitude=Wc,t.clamp=I,t.clearTileCache=function(t){if(!st())return;const n=e.caches.delete(et);t&&n.catch(t).then((()=>t()))},t.clipLine=Kp,t.clone=function(t){var e=new ha(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=W,t.collisionCircleLayout=zh,t.config=s,t.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},t.create=function(){var t=new ha(16);return ha!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=pa,t.createExpression=Jr,t.createLayout=Uo,t.createStyleLayer=function(t){return"custom"===t.type?new gd(t):new _d[t.type](t)},t.cross=ja,t.degToRad=E,t.distance=function(t,e){return Math.hypot(e[0]-t[0],e[1]-t[1],e[2]-t[2])},t.div=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t},t.dot=Na,t.earthRadius=Fc,t.ease=M,t.easeCubicInOut=k,t.ecefToLatLng=function([t,e,n]){const r=Math.hypot(t,e,n),i=Math.atan2(t,n),o=.5*Math.PI-Math.acos(-e/r);return new qc(T(i),T(o))},t.emitValidationErrors=Gi,t.endsWith=U,t.enforceCacheSizeLimit=function(t){at(),nt&&nt.then((e=>{e.keys().then((n=>{for(let r=0;r<n.length-t;r++)e.delete(n[r])}))}))},t.evaluateSizeForFeature=Vh,t.evaluateSizeForZoom=qh,t.evaluateVariableOffset=xf,t.evented=xo,t.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},t.exactEquals$1=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},t.exported=Xt,t.exported$1=a,t.extend=D,t.extend$1=re,t.fillExtrusionHeightLift=ch,t.filterObject=q,t.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},t.fromQuat=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n+n,a=r+r,c=i+i,l=n*s,u=r*s,h=r*a,p=i*s,f=i*a,d=i*c,g=o*s,m=o*a,y=o*c;return t[0]=1-h-d,t[1]=u+y,t[2]=p-m,t[3]=0,t[4]=u-y,t[5]=1-l-d,t[6]=f+g,t[7]=0,t[8]=p+m,t[9]=f-g,t[10]=1-l-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.fromScaling=ba,t.furthestTileCorner=function(t){const e=Math.round((t+45+360)%360/90)%4;return S[e]},t.getAABBPointSquareDist=function(t,e,n){let r=0;for(let i=0;i<2;++i){const o=n?n[i]:0;t[i]>o&&(r+=(t[i]-o)*(t[i]-o)),e[i]<o&&(r+=(o-e[i])*(o-e[i]))}return r},t.getAnchorAlignment=Bp,t.getAnchorJustification=wf,t.getBounds=function(t){let e=1/0,n=1/0,r=-1/0,i=-1/0;for(const o of t)e=Math.min(e,o.x),n=Math.min(n,o.y),r=Math.max(r,o.x),i=Math.max(i,o.y);return{min:new x(e,n),max:new x(r,i)}},t.getColumn=tt,t.getDefaultExportFromCjs=d,t.getGridMatrix=function(t,e,n,r){const i=e.getNorth(),o=e.getSouth(),s=e.getWest(),a=e.getEast(),c=1<<t.z,l=a-s,u=i-o,h=l/uc,p=-u/hc[n],f=[0,h,0,p,0,0,i,s,0];if(t.z>0){const t=180/r;fa(f,f,[t/l+1,0,0,0,t/u+1,0,-.5*t/h,.5*t/p,1])}return f[2]=c,f[5]=t.x,f[8]=t.y,f},t.getImage=vt,t.getJSON=function(t,e){return ft(D(t,{type:"json"}),e)},t.getLatitudinalLod=function(t){const e=Kc-5;t=I(t,-e,e)/e*90;const n=Math.pow(Math.abs(Math.sin(E(t))),3);return Math.round(n*(hc.length-1))},t.getMapSessionAPI=Bt,t.getPerformanceMeasurement=Gt,t.getProjection=Qf,t.getRTLTextPluginStatus=bo,t.getReferrer=pt,t.getTilePoint=function(t,{x:e,y:n},r=0){return new x(((e-r)*t.scale-t.x)*ca,(n*t.scale-t.y)*ca)},t.getTileVec3=function(t,e,n=0){return Aa(((e.x-n)*t.scale-t.x)*ca,(e.y*t.scale-t.y)*ca,Xc(e.z,e.y))},t.getVideo=function(t,n){const r=e.document.createElement("video");r.muted=!0,r.onloadstart=function(){n(null,r)};for(let n=0;n<t.length;n++){const i=e.document.createElement("source");gt(t[n])||(r.crossOrigin="Anonymous"),i.src=t[n],r.appendChild(i)}return{cancel:()=>{}}},t.globeCenterToScreenPoint=function(t){const e=[0,0,0],n=da(new Float64Array(16));return ma(n,t.pixelMatrix,t.globeMatrix),za(e,e,n),new x(e[0],e[1])},t.globeDenormalizeECEF=Pc,t.globeECEFOrigin=function(t,e){const n=[0,0,0];return za(n,n,Oc(vc(e.canonical))),za(n,n,t),n},t.globeMetersToEcef=gc,t.globeNormalizeECEF=Oc,t.globePixelsToTileUnits=function(t,e){return ca/(512*Math.pow(2,t))*Ic(vc(e))},t.globePoleMatrixForTile=function(t,e,n){const r=da(new Float64Array(16)),i=(e/(1<<t)-.5)*Math.PI*2;return xa(r,n.globeMatrix,i),Float32Array.from(r)},t.globeTileBounds=vc,t.globeTiltAtLngLat=Rc,t.globeToMercatorTransition=Dc,t.globeUseCustomAntiAliasing=function(t,e,n){const r=Dc(n.zoom),i=t.style.map._antialias,o=!!e.extStandardDerivatives,s=e.extStandardDerivativesForceOff||t.terrain&&t.terrain.exaggeration()>0;return 0===r&&!i&&!s&&o},t.identity=da,t.identity$1=Za,t.invert=ga,t.isFullscreen=function(){return!!e.document.fullscreenElement||!!e.document.webkitFullscreenElement},t.isLngLatBehindGlobe=Nc,t.isMapAuthenticated=function(t){return Ft.has(t)},t.isMapboxURL=bt,t.isSafariWithAntialiasingBug=function(t){const e=t.navigator?t.navigator.userAgent:null;return!!J(t)&&e&&(e.match("Version/15.4")||e.match("Version/15.5")||e.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},t.latFromMercatorY=Yc,t.latLngToECEF=Ac,t.len=qa,t.length=ka,t.length$1=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},t.lngFromMercatorX=Zc,t.loadVectorTile=mg,t.makeRequest=ft,t.mapValue=function(t,e,n,r,i){return I((t-e)/(n-e)*(i-r)+r,r,i)},t.mercatorScale=Jc,t.mercatorXfromLng=Gc,t.mercatorYfromLat=$c,t.mercatorZfromAltitude=Hc,t.mul=Ea,t.mul$1=Va,t.multiply=ma,t.multiply$1=fa,t.multiply$2=Ca,t.nextPowerOfTwo=z,t.normalize=Ra,t.normalize$1=Ka,t.normalize$2=Ga,t.number=Dn,t.ortho=function(t,e,n,r,i,o,s){var a=1/(e-n),c=1/(r-i),l=1/(o-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*c,t[14]=(s+o)*l,t[15]=1,t},t.pbf=Yh,t.perspective=function(t,e,n,r,i){var o,s=1/Math.tan(e/2);return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(t[10]=(i+r)*(o=1/(r-i)),t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t},t.pick=function(t,e){const n={};for(let r=0;r<e.length;r++){const i=e[r];i in t&&(n[i]=t[i])}return n},t.plugin=Eo,t.pointGeometry=_,t.polesInViewport=function(t){const e=da(new Float64Array(16));ma(e,t.pixelMatrix,t.globeMatrix);const n=[0,pc,0],r=[0,fc,0];return za(n,n,e),za(r,r,e),[n[0]>0&&n[0]<=t.width&&n[1]>0&&n[1]<=t.height&&!Nc(t,new qc(t.center.lat,90)),r[0]>0&&r[0]<=t.width&&r[1]>0&&r[1]<=t.height&&!Nc(t,new qc(t.center.lat,-90))]},t.polygonContainsPoint=bl,t.polygonIntersectsBox=wl,t.polygonIntersectsPolygon=pl,t.polygonizeBounds=function(t,e,n=0,r=!0){const i=new x(n,n),o=t.sub(i),s=e.add(i),a=[o,new x(s.x,o.y),s,new x(o.x,s.y)];return r&&a.push(o.clone()),a},t.posAttributes=ec,t.postMapLoadEvent=Rt,t.postPerformanceEvent=jt,t.postTurnstileEvent=Lt,t.potpack=Ep,t.prevPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},t.radToDeg=T,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.registerForPluginStateChange=function(t){return t({pluginStatus:mo,pluginURL:yo}),xo.on("pluginStateChange",t),t},t.removeAuthState=function(t){Ft.delete(t)},t.renderColorRamp=Vl,t.resample=el,t.rotateX=va,t.rotateX$1=Ya,t.rotateY=xa,t.rotateY$1=Xa,t.rotateZ=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],s=e[1],a=e[2],c=e[3],l=e[4],u=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+l*r,t[1]=s*i+u*r,t[2]=a*i+h*r,t[3]=c*i+p*r,t[4]=l*i-o*r,t[5]=u*i-s*r,t[6]=h*i-a*r,t[7]=p*i-c*r,t},t.rotateZ$1=function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(n),c=Math.cos(n);return t[0]=r*c+i*a,t[1]=i*c-r*a,t[2]=o*c+s*a,t[3]=s*c-o*a,t},t.scale=_a,t.scale$1=Wa,t.scale$2=La,t.scaleAndAdd=Da,t.set=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},t.setCacheLimits=function(t,e){it=t,ot=e},t.setColumn=function(t,e,n){t[4*e+0]=n[0],t[4*e+1]=n[1],t[4*e+2]=n[2],t[4*e+3]=n[3]},t.setRTLTextPlugin=function(t,e,n=!1){if(mo===ho||mo===po||mo===fo)throw new Error("setRTLTextPlugin cannot be called multiple times.");yo=Xt.resolveURL(t),mo=ho,go=e,vo(),n||wo()},t.smoothstep=C,t.spec=ne,t.squaredLength=function(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r},t.storeAuthState=function(t,e){e?Ft.add(t):Ft.delete(t)},t.sub=Ua,t.subtract=Ia,t.symbolSize=Wh,t.tileAABB=function(t,e,n,r,i,o,s,a,c){if("globe"===c.name)return Ec(t,e,new fh(n,r,i));const l=Pf({z:n,x:r,y:i},c);return new oc([(o+l.x/l.scale)*e,e*(l.y/l.scale),s],[(o+l.x2/l.scale)*e,e*(l.y2/l.scale),a])},t.tileCornersToBounds=Tc,t.tileTransform=Pf,t.transformMat3=function(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t},t.transformMat4=za,t.transformMat4$1=$a,t.transformQuat=Ba,t.transitionTileAABBinECEF=bc,t.translate=ya,t.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},t.triggerPluginCompletionEvent=_o,t.uniqueId=N,t.updateGlobeVertexNormal=function(t,e,n,r,i){const o=5*e+2;t.float32[o+0]=n,t.float32[o+1]=r,t.float32[o+2]=i},t.validateCustomStyleLayer=function(t){const e=[],n=t.id;return void 0===n&&e.push({message:`layers.${n}: missing required property "id"`}),void 0===t.render&&e.push({message:`layers.${n}: missing required method "render"`}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),e},t.validateFilter=t=>Wi(Si(t)),t.validateFog=t=>Wi(ji(t)),t.validateLayer=t=>Wi(Ci(t)),t.validateLight=t=>Wi(Ri(t)),t.validateSource=t=>Wi(Li(t)),t.validateStyle=Ui,t.validateTerrain=t=>Wi(Ni(t)),t.values=L,t.vectorTile=Ru,t.version=n,t.warnOnce=$,t.window=e,t.wrap=O})),o(["./shared"],(function(t){function e(t){if("number"==typeof t||"boolean"==typeof t||"string"==typeof t||null==t)return JSON.stringify(t);if(Array.isArray(t)){let n="[";for(const r of t)n+=`${e(r)},`;return`${n}]`}let n="{";for(const r of Object.keys(t).sort())n+=`${r}:${e(t[r])},`;return`${n}}`}function n(n){let r="";for(const i of t.refProperties)r+=`/${e(n[i])}`;return r}class r{constructor(t){this.keyCache={},t&&this.replace(t)}replace(t){this._layerConfigs={},this._layers={},this.update(t,[])}update(e,r){for(const n of e)this._layerConfigs[n.id]=n,(this._layers[n.id]=t.createStyleLayer(n)).compileFilter(),this.keyCache[n.id]&&delete this.keyCache[n.id];for(const t of r)delete this.keyCache[t],delete this._layerConfigs[t],delete this._layers[t];this.familiesBySource={};const i=function(t,e){const r={};for(let i=0;i<t.length;i++){const o=e&&e[t[i].id]||n(t[i]);e&&(e[t[i].id]=o);let s=r[o];s||(s=r[o]=[]),s.push(t[i])}const i=[];for(const t in r)i.push(r[t]);return i}(t.values(this._layerConfigs),this.keyCache);for(const t of i){const e=t.map((t=>this._layers[t.id])),n=e[0];if("none"===n.visibility)continue;const r=n.source||"";let i=this.familiesBySource[r];i||(i=this.familiesBySource[r]={});const o=n.sourceLayer||"_geojsonTileLayer";let s=i[o];s||(s=i[o]=[]),s.push(e)}}}class o{loadTile(e,n){const{uid:r,encoding:i,rawImageData:o,padding:s,buildQuadTree:a}=e,c=t.window.ImageBitmap&&o instanceof t.window.ImageBitmap?this.getImageData(o,s):o;n(null,new t.DEMData(r,c,i,s<1,a))}getImageData(t,e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(t.width,t.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=t.width,this.offscreenCanvas.height=t.height,this.offscreenCanvasContext.drawImage(t,0,0,t.width,t.height);const n=this.offscreenCanvasContext.getImageData(-e,-e,t.width+2*e,t.height+2*e);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),n}}function s(t,e){if(0!==t.length){a(t[0],e);for(var n=1;n<t.length;n++)a(t[n],!e)}}function a(t,e){for(var n=0,r=0,i=0,o=t.length,s=o-1;i<o;s=i++){var a=(t[i][0]-t[s][0])*(t[s][1]+t[i][1]),c=n+a;r+=Math.abs(n)>=Math.abs(a)?n-c+a:a-c+n,n=c}n+r>=0!=!!e&&t.reverse()}var c=t.getDefaultExportFromCjs((function t(e,n){var r,i=e&&e.type;if("FeatureCollection"===i)for(r=0;r<e.features.length;r++)t(e.features[r],n);else if("GeometryCollection"===i)for(r=0;r<e.geometries.length;r++)t(e.geometries[r],n);else if("Feature"===i)t(e.geometry,n);else if("Polygon"===i)s(e.coordinates,n);else if("MultiPolygon"===i)for(r=0;r<e.coordinates.length;r++)s(e.coordinates[r],n);return e}));const l=t.VectorTileFeature.prototype.toGeoJSON;var u={exports:{}},h=t.pointGeometry,p=t.vectorTile.VectorTileFeature,f=d;function d(t,e){this.options=e||{},this.features=t,this.length=t.length}function g(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}d.prototype.feature=function(t){return new g(this.features[t],this.options.extent)},g.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var n=t[e],r=[],i=0;i<n.length;i++)r.push(new h(n[i][0],n[i][1]));this.geometry.push(r)}return this.geometry},g.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<t.length;o++)for(var s=t[o],a=0;a<s.length;a++){var c=s[a];e=Math.min(e,c.x),n=Math.max(n,c.x),r=Math.min(r,c.y),i=Math.max(i,c.y)}return[e,r,n,i]},g.prototype.toGeoJSON=p.prototype.toGeoJSON;var m=t.pbf,y=f;function _(t){var e=new m;return function(t,e){for(var n in t.layers)e.writeMessage(3,v,t.layers[n])}(t,e),e.finish()}function v(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)r.feature=t.feature(n),e.writeMessage(2,x,r);var i=r.keys;for(n=0;n<i.length;n++)e.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)e.writeMessage(4,S,o[n])}function x(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,b,t),e.writeVarintField(3,n.type),e.writeMessage(4,T,n)}function b(t,e){var n=t.feature,r=t.keys,i=t.values,o=t.keycache,s=t.valuecache;for(var a in n.properties){var c=n.properties[a],l=o[a];if(null!==c){void 0===l&&(r.push(a),o[a]=l=r.length-1),e.writeVarint(l);var u=typeof c;"string"!==u&&"boolean"!==u&&"number"!==u&&(c=JSON.stringify(c));var h=u+":"+c,p=s[h];void 0===p&&(i.push(c),s[h]=p=i.length-1),e.writeVarint(p)}}}function w(t,e){return(e<<3)+(7&t)}function E(t){return t<<1^t>>31}function T(t,e){for(var n=t.loadGeometry(),r=t.type,i=0,o=0,s=n.length,a=0;a<s;a++){var c=n[a],l=1;1===r&&(l=c.length),e.writeVarint(w(1,l));for(var u=3===r?c.length-1:c.length,h=0;h<u;h++){1===h&&1!==r&&e.writeVarint(w(2,u-1));var p=c[h].x-i,f=c[h].y-o;e.writeVarint(E(p)),e.writeVarint(E(f)),i+=p,o+=f}3===r&&e.writeVarint(w(7,1))}}function S(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}u.exports=_,u.exports.fromVectorTileJs=_,u.exports.fromGeojsonVt=function(t,e){e=e||{};var n={};for(var r in t)n[r]=new y(t[r].features,e),n[r].name=r,n[r].version=e.version,n[r].extent=e.extent;return _({layers:n})},u.exports.GeoJSONWrapper=y;var k=t.getDefaultExportFromCjs(u.exports);const A={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},M=Math.fround||(I=new Float32Array(1),t=>(I[0]=+t,I[0]));var I;const C=3,O=5,P=6;class L{constructor(t){this.options=Object.assign(Object.create(A),t),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(t){const{log:e,minZoom:n,maxZoom:r}=this.options;e&&i.time("total time");const o=`prepare ${t.length} points`;e&&i.time(o),this.points=t;const s=[];for(let e=0;e<t.length;e++){const n=t[e];if(!n.geometry)continue;const[r,i]=n.geometry.coordinates,o=M(N(r)),a=M(j(i));s.push(o,a,1/0,e,-1,1),this.options.reduce&&s.push(0)}let a=this.trees[r+1]=this._createTree(s);e&&i.timeEnd(o);for(let t=r;t>=n;t--){const n=+Date.now();a=this.trees[t]=this._createTree(this._cluster(a,t)),e&&i.log("z%d: %d clusters in %dms",t,a.numItems,+Date.now()-n)}return e&&i.timeEnd("total time"),this}getClusters(t,e){let n=((t[0]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,t[1]));let i=180===t[2]?180:((t[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,i=180;else if(n>i){const t=this.getClusters([n,r,180,o],e),s=this.getClusters([-180,r,i,o],e);return t.concat(s)}const s=this.trees[this._limitZoom(e)],a=s.range(N(n),j(o),N(i),j(r)),c=s.data,l=[];for(const t of a){const e=this.stride*t;l.push(c[e+O]>1?D(c,e,this.clusterProps):this.points[c[e+C]])}return l}getChildren(t){const e=this._getOriginId(t),n=this._getOriginZoom(t),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);const o=i.data;if(e*this.stride>=o.length)throw new Error(r);const s=this.options.radius/(this.options.extent*Math.pow(2,n-1)),a=i.within(o[e*this.stride],o[e*this.stride+1],s),c=[];for(const e of a){const n=e*this.stride;o[n+4]===t&&c.push(o[n+O]>1?D(o,n,this.clusterProps):this.points[o[n+C]])}if(0===c.length)throw new Error(r);return c}getLeaves(t,e,n){const r=[];return this._appendLeaves(r,t,e=e||10,n=n||0,0),r}getTile(t,e,n){const r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),{extent:o,radius:s}=this.options,a=s/o,c=(n-a)/i,l=(n+1+a)/i,u={features:[]};return this._addTileFeatures(r.range((e-a)/i,c,(e+1+a)/i,l),r.data,e,n,i,u),0===e&&this._addTileFeatures(r.range(1-a/i,c,1,l),r.data,i,n,i,u),e===i-1&&this._addTileFeatures(r.range(0,c,a/i,l),r.data,-1,n,i,u),u.features.length?u:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){const n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e}_appendLeaves(t,e,n,r,i){const o=this.getChildren(e);for(const e of o){const o=e.properties;if(o&&o.cluster?i+o.point_count<=r?i+=o.point_count:i=this._appendLeaves(t,o.cluster_id,n,r,i):i<r?i++:t.push(e),t.length===n)break}return i}_createTree(e){const n=new t.KDBush(e.length/this.stride|0,this.options.nodeSize,Float32Array);for(let t=0;t<e.length;t+=this.stride)n.add(e[t],e[t+1]);return n.finish(),n.data=e,n}_addTileFeatures(t,e,n,r,i,o){for(const s of t){const t=s*this.stride,a=e[t+O]>1;let c,l,u;if(a)c=R(e,t,this.clusterProps),l=e[t],u=e[t+1];else{const n=this.points[e[t+C]];c=n.properties;const[r,i]=n.geometry.coordinates;l=N(r),u=j(i)}const h={type:1,geometry:[[Math.round(this.options.extent*(l*i-n)),Math.round(this.options.extent*(u*i-r))]],tags:c};let p;p=a||this.options.generateId?e[t+C]:this.points[e[t+C]].id,void 0!==p&&(h.id=p),o.features.push(h)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}_cluster(t,e){const{radius:n,extent:r,reduce:i,minPoints:o}=this.options,s=n/(r*Math.pow(2,e)),a=t.data,c=[],l=this.stride;for(let n=0;n<a.length;n+=l){if(a[n+2]<=e)continue;a[n+2]=e;const r=a[n],u=a[n+1],h=t.within(a[n],a[n+1],s),p=a[n+O];let f=p;for(const t of h){const n=t*l;a[n+2]>e&&(f+=a[n+O])}if(f>p&&f>=o){let t,o=r*p,s=u*p,d=-1;const g=((n/l|0)<<5)+(e+1)+this.points.length;for(const r of h){const c=r*l;if(a[c+2]<=e)continue;a[c+2]=e;const u=a[c+O];o+=a[c]*u,s+=a[c+1]*u,a[c+4]=g,i&&(t||(t=this._map(a,n,!0),d=this.clusterProps.length,this.clusterProps.push(t)),i(t,this._map(a,c)))}a[n+4]=g,c.push(o/f,s/f,1/0,g,-1,f),i&&c.push(d)}else{for(let t=0;t<l;t++)c.push(a[n+t]);if(f>1)for(const t of h){const n=t*l;if(!(a[n+2]<=e)){a[n+2]=e;for(let t=0;t<l;t++)c.push(a[n+t])}}}}return c}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e,n){if(t[e+O]>1){const r=this.clusterProps[t[e+P]];return n?Object.assign({},r):r}const r=this.points[t[e+C]].properties,i=this.options.map(r);return n&&i===r?Object.assign({},i):i}}function D(t,e,n){return{type:"Feature",id:t[e+C],properties:R(t,e,n),geometry:{type:"Point",coordinates:[(r=t[e],360*(r-.5)),z(t[e+1])]}};var r}function R(t,e,n){const r=t[e+O],i=r>=1e4?`${Math.round(r/1e3)}k`:r>=1e3?Math.round(r/100)/10+"k":r,o=t[e+P],s=-1===o?{}:Object.assign({},n[o]);return Object.assign(s,{cluster:!0,cluster_id:t[e+C],point_count:r,point_count_abbreviated:i})}function N(t){return t/360+.5}function j(t){const e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function z(t){const e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function B(t,e,n,r){for(var i,o=r,s=n-e>>1,a=n-e,c=t[e],l=t[e+1],u=t[n],h=t[n+1],p=e+3;p<n;p+=3){var f=F(t[p],t[p+1],c,l,u,h);if(f>o)i=p,o=f;else if(f===o){var d=Math.abs(p-s);d<a&&(i=p,a=d)}}o>r&&(i-e>3&&B(t,e,i,r),t[i+2]=o,n-i>3&&B(t,i,n,r))}function F(t,e,n,r,i,o){var s=i-n,a=o-r;if(0!==s||0!==a){var c=((t-n)*s+(e-r)*a)/(s*s+a*a);c>1?(n=i,r=o):c>0&&(n+=s*c,r+=a*c)}return(s=t-n)*s+(a=e-r)*a}function U(t,e,n,r){var i={id:void 0===t?null:t,type:e,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)V(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<e.length;r++)V(t,e[r]);else if("MultiPolygon"===n)for(r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)V(t,e[r][i])}(i),i}function V(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function q(t,e,n,r){if(e.geometry){var i=e.geometry.coordinates,o=e.geometry.type,s=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),a=[],c=e.id;if(n.promoteId?c=e.properties[n.promoteId]:n.generateId&&(c=r||0),"Point"===o)W(i,a);else if("MultiPoint"===o)for(var l=0;l<i.length;l++)W(i[l],a);else if("LineString"===o)G(i,a,s,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(l=0;l<i.length;l++)G(i[l],a=[],s,!1),t.push(U(c,"LineString",a,e.properties));return}$(i,a,s,!1)}else if("Polygon"===o)$(i,a,s,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(l=0;l<e.geometry.geometries.length;l++)q(t,{id:c,geometry:e.geometry.geometries[l],properties:e.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(l=0;l<i.length;l++){var u=[];$(i[l],u,s,!0),a.push(u)}}t.push(U(c,o,a,e.properties))}}function W(t,e){e.push(H(t[0])),e.push(Z(t[1])),e.push(0)}function G(t,e,n,r){for(var i,o,s=0,a=0;a<t.length;a++){var c=H(t[a][0]),l=Z(t[a][1]);e.push(c),e.push(l),e.push(0),a>0&&(s+=r?(i*l-c*o)/2:Math.sqrt(Math.pow(c-i,2)+Math.pow(l-o,2))),i=c,o=l}var u=e.length-3;e[2]=1,B(e,0,u,n),e[u+2]=1,e.size=Math.abs(s),e.start=0,e.end=e.size}function $(t,e,n,r){for(var i=0;i<t.length;i++){var o=[];G(t[i],o,n,r),e.push(o)}}function H(t){return t/360+.5}function Z(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function Y(t,e,n,r,i,o,s,a){if(r/=e,o>=(n/=e)&&s<r)return t;if(s<n||o>=r)return null;for(var c=[],l=0;l<t.length;l++){var u=t[l],h=u.geometry,p=u.type,f=0===i?u.minX:u.minY,d=0===i?u.maxX:u.maxY;if(f>=n&&d<r)c.push(u);else if(!(d<n||f>=r)){var g=[];if("Point"===p||"MultiPoint"===p)X(h,g,n,r,i);else if("LineString"===p)K(h,g,n,r,i,!1,a.lineMetrics);else if("MultiLineString"===p)Q(h,g,n,r,i,!1);else if("Polygon"===p)Q(h,g,n,r,i,!0);else if("MultiPolygon"===p)for(var m=0;m<h.length;m++){var y=[];Q(h[m],y,n,r,i,!0),y.length&&g.push(y)}if(g.length){if(a.lineMetrics&&"LineString"===p){for(m=0;m<g.length;m++)c.push(U(u.id,p,g[m],u.tags));continue}"LineString"!==p&&"MultiLineString"!==p||(1===g.length?(p="LineString",g=g[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===g.length?"Point":"MultiPoint"),c.push(U(u.id,p,g,u.tags))}}}return c.length?c:null}function X(t,e,n,r,i){for(var o=0;o<t.length;o+=3){var s=t[o+i];s>=n&&s<=r&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function K(t,e,n,r,i,o,s){for(var a,c,l=J(t),u=0===i?et:nt,h=t.start,p=0;p<t.length-3;p+=3){var f=t[p],d=t[p+1],g=t[p+2],m=t[p+3],y=t[p+4],_=0===i?f:d,v=0===i?m:y,x=!1;s&&(a=Math.sqrt(Math.pow(f-m,2)+Math.pow(d-y,2))),_<n?v>n&&(c=u(l,f,d,m,y,n),s&&(l.start=h+a*c)):_>r?v<r&&(c=u(l,f,d,m,y,r),s&&(l.start=h+a*c)):tt(l,f,d,g),v<n&&_>=n&&(c=u(l,f,d,m,y,n),x=!0),v>r&&_<=r&&(c=u(l,f,d,m,y,r),x=!0),!o&&x&&(s&&(l.end=h+a*c),e.push(l),l=J(t)),s&&(h+=a)}var b=t.length-3;f=t[b],d=t[b+1],g=t[b+2],(_=0===i?f:d)>=n&&_<=r&&tt(l,f,d,g),b=l.length-3,o&&b>=3&&(l[b]!==l[0]||l[b+1]!==l[1])&&tt(l,l[0],l[1],l[2]),l.length&&e.push(l)}function J(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function Q(t,e,n,r,i,o){for(var s=0;s<t.length;s++)K(t[s],e,n,r,i,o,!1)}function tt(t,e,n,r){t.push(e),t.push(n),t.push(r)}function et(t,e,n,r,i,o){var s=(o-e)/(r-e);return t.push(o),t.push(n+(i-n)*s),t.push(1),s}function nt(t,e,n,r,i,o){var s=(o-n)/(i-n);return t.push(e+(r-e)*s),t.push(o),t.push(1),s}function rt(t,e){for(var n=[],r=0;r<t.length;r++){var i,o=t[r],s=o.type;if("Point"===s||"MultiPoint"===s||"LineString"===s)i=it(o.geometry,e);else if("MultiLineString"===s||"Polygon"===s){i=[];for(var a=0;a<o.geometry.length;a++)i.push(it(o.geometry[a],e))}else if("MultiPolygon"===s)for(i=[],a=0;a<o.geometry.length;a++){for(var c=[],l=0;l<o.geometry[a].length;l++)c.push(it(o.geometry[a][l],e));i.push(c)}n.push(U(o.id,s,i,o.tags))}return n}function it(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var r=0;r<t.length;r+=3)n.push(t[r]+e,t[r+1],t[r+2]);return n}function ot(t,e){if(t.transformed)return t;var n,r,i,o=1<<t.z,s=t.x,a=t.y;for(n=0;n<t.features.length;n++){var c=t.features[n],l=c.geometry,u=c.type;if(c.geometry=[],1===u)for(r=0;r<l.length;r+=2)c.geometry.push(st(l[r],l[r+1],e,o,s,a));else for(r=0;r<l.length;r++){var h=[];for(i=0;i<l[r].length;i+=2)h.push(st(l[r][i],l[r][i+1],e,o,s,a));c.geometry.push(h)}}return t.transformed=!0,t}function st(t,e,n,r,i,o){return[Math.round(n*(t*r-i)),Math.round(n*(e*r-o))]}function at(t,e,n,r,i){for(var o=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),s={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},a=0;a<t.length;a++){s.numFeatures++,ct(s,t[a],o,i);var c=t[a].minX,l=t[a].minY,u=t[a].maxX,h=t[a].maxY;c<s.minX&&(s.minX=c),l<s.minY&&(s.minY=l),u>s.maxX&&(s.maxX=u),h>s.maxY&&(s.maxY=h)}return s}function ct(t,e,n,r){var i=e.geometry,o=e.type,s=[];if("Point"===o||"MultiPoint"===o)for(var a=0;a<i.length;a+=3)s.push(i[a]),s.push(i[a+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)lt(s,i,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(a=0;a<i.length;a++)lt(s,i[a],t,n,"Polygon"===o,0===a);else if("MultiPolygon"===o)for(var c=0;c<i.length;c++){var l=i[c];for(a=0;a<l.length;a++)lt(s,l[a],t,n,!0,0===a)}if(s.length){var u=e.tags||null;if("LineString"===o&&r.lineMetrics){for(var h in u={},e.tags)u[h]=e.tags[h];u.mapbox_clip_start=i.start/i.size,u.mapbox_clip_end=i.end/i.size}var p={geometry:s,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:u};null!==e.id&&(p.id=e.id),t.features.push(p)}}function lt(t,e,n,r,i,o){var s=r*r;if(r>0&&e.size<(i?s:r))n.numPoints+=e.length/3;else{for(var a=[],c=0;c<e.length;c+=3)(0===r||e[c+2]>s)&&(n.numSimplified++,a.push(e[c]),a.push(e[c+1])),n.numPoints++;i&&function(t,e){for(var n=0,r=0,i=t.length,o=i-2;r<i;o=r,r+=2)n+=(t[r]-t[o])*(t[r+1]+t[o+1]);if(n>0===e)for(r=0,i=t.length;r<i/2;r+=2){var s=t[r],a=t[r+1];t[r]=t[i-2-r],t[r+1]=t[i-1-r],t[i-2-r]=s,t[i-1-r]=a}}(a,o),t.push(a)}}function ut(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&i.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)q(n,t.features[r],e,r);else q(n,"Feature"===t.type?t:{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(i.timeEnd("preprocess data"),i.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),i.time("generate tiles"),this.stats={},this.total=0),r=function(t,e){var n=e.buffer/e.extent,r=t,i=Y(t,1,-1-n,n,0,-1,2,e),o=Y(t,1,1-n,2+n,0,-1,2,e);return(i||o)&&(r=Y(t,1,-n,1+n,0,-1,2,e)||[],i&&(r=rt(i,1).concat(r)),o&&(r=r.concat(rt(o,-1)))),r}(r,e),r.length&&this.splitTile(r,0,0,0),n&&(r.length&&i.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),i.timeEnd("generate tiles"),i.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ht(t,e,n){return 32*((1<<t)*n+e)+t}function pt(e,n){const r=e.tileID.canonical;if(!this._geoJSONIndex)return n(null,null);const i=this._geoJSONIndex.getTile(r.z,r.x,r.y);if(!i)return n(null,null);const o=new class{constructor(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e}feature(e){return new class{constructor(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))}loadGeometry(){if(1===this._feature.type){const e=[];for(const n of this._feature.geometry)e.push([new t.Point(n[0],n[1])]);return e}{const e=[];for(const n of this._feature.geometry){const r=[];for(const e of n)r.push(new t.Point(e[0],e[1]));e.push(r)}return e}}toGeoJSON(t,e,n){return l.call(this,t,e,n)}}(this._features[e])}}(i.features);let s=k(o);0===s.byteOffset&&s.byteLength===s.buffer.byteLength||(s=new Uint8Array(s)),n(null,{vectorTile:o,rawData:s.buffer})}ut.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ut.prototype.splitTile=function(t,e,n,r,o,s,a){for(var c=[t,e,n,r],l=this.options,u=l.debug;c.length;){r=c.pop(),n=c.pop(),e=c.pop(),t=c.pop();var h=1<<e,p=ht(e,n,r),f=this.tiles[p];if(!f&&(u>1&&i.time("creation"),f=this.tiles[p]=at(t,e,n,r,l),this.tileCoords.push({z:e,x:n,y:r}),u)){u>1&&(i.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,f.numFeatures,f.numPoints,f.numSimplified),i.timeEnd("creation"));var d="z"+e;this.stats[d]=(this.stats[d]||0)+1,this.total++}if(f.source=t,o){if(e===l.maxZoom||e===o)continue;var g=1<<o-e;if(n!==Math.floor(s/g)||r!==Math.floor(a/g))continue}else if(e===l.indexMaxZoom||f.numPoints<=l.indexMaxPoints)continue;if(f.source=null,0!==t.length){u>1&&i.time("clipping");var m,y,_,v,x,b,w=.5*l.buffer/l.extent,E=.5-w,T=.5+w,S=1+w;m=y=_=v=null,x=Y(t,h,n-w,n+T,0,f.minX,f.maxX,l),b=Y(t,h,n+E,n+S,0,f.minX,f.maxX,l),t=null,x&&(m=Y(x,h,r-w,r+T,1,f.minY,f.maxY,l),y=Y(x,h,r+E,r+S,1,f.minY,f.maxY,l),x=null),b&&(_=Y(b,h,r-w,r+T,1,f.minY,f.maxY,l),v=Y(b,h,r+E,r+S,1,f.minY,f.maxY,l),b=null),u>1&&i.timeEnd("clipping"),c.push(m||[],e+1,2*n,2*r),c.push(y||[],e+1,2*n,2*r+1),c.push(_||[],e+1,2*n+1,2*r),c.push(v||[],e+1,2*n+1,2*r+1)}}},ut.prototype.getTile=function(t,e,n){var r=this.options,o=r.extent,s=r.debug;if(t<0||t>24)return null;var a=1<<t,c=ht(t,e=(e%a+a)%a,n);if(this.tiles[c])return ot(this.tiles[c],o);s>1&&i.log("drilling down to z%d-%d-%d",t,e,n);for(var l,u=t,h=e,p=n;!l&&u>0;)u--,h=Math.floor(h/2),p=Math.floor(p/2),l=this.tiles[ht(u,h,p)];return l&&l.source?(s>1&&i.log("found parent tile z%d-%d-%d",u,h,p),s>1&&i.time("drilling down"),this.splitTile(l.source,u,h,p,t,e,n),s>1&&i.timeEnd("drilling down"),this.tiles[c]?ot(this.tiles[c],o):null):null};class ft extends t.VectorTileWorkerSource{constructor(t,e,n,r,i){super(t,e,n,r,pt),i&&(this.loadGeoJSON=i)}loadData(e,n){const r=e&&e.request,i=r&&r.collectResourceTiming;this.loadGeoJSON(e,((o,s)=>{if(o||!s)return n(o);if("object"!=typeof s)return n(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`));{c(s,!0);try{if(e.filter){const n=t.createExpression(e.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===n.result)throw new Error(n.value.map((t=>`${t.key}: ${t.message}`)).join(", "));const r=s.features.filter((t=>n.value.evaluate({zoom:0},t)));s={type:"FeatureCollection",features:r}}this._geoJSONIndex=e.cluster?new L(function({superclusterOptions:e,clusterProperties:n}){if(!n||!e)return e;const r={},i={},o={accumulated:null,zoom:0},s={properties:null},a=Object.keys(n);for(const e of a){const[o,s]=n[e],a=t.createExpression(s),c=t.createExpression("string"==typeof o?[o,["accumulated"],["get",e]]:o);r[e]=a.value,i[e]=c.value}return e.map=t=>{s.properties=t;const e={};for(const t of a)e[t]=r[t].evaluate(o,s);return e},e.reduce=(t,e)=>{s.properties=e;for(const e of a)o.accumulated=t[e],t[e]=i[e].evaluate(o,s)},e}(e)).load(s.features):function(t,e){return new ut(t,e)}(s,e.geojsonVtOptions)}catch(o){return n(o)}this.loaded={};const a={};if(i){const n=t.getPerformanceMeasurement(r);n&&(a.resourceTiming={},a.resourceTiming[e.source]=JSON.parse(JSON.stringify(n)))}n(null,a)}}))}reloadTile(t,e){const n=this.loaded;return n&&n[t.uid]?super.reloadTile(t,e):this.loadTile(t,e)}loadGeoJSON(e,n){if(e.request)t.getJSON(e.request,n);else{if("string"!=typeof e.data)return n(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`));try{return n(null,JSON.parse(e.data))}catch(t){return n(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}}getClusterChildren(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}}getClusterLeaves(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}}}class dt{constructor(e){this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=t.getProjection({name:"mercator"}),this.workerSourceTypes={vector:t.VectorTileWorkerSource,geojson:ft},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(t,e)=>{if(this.workerSourceTypes[t])throw new Error(`Worker source with name "${t}" already registered.`);this.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=e=>{if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}}clearCaches(t,e,n){delete this.layerIndexes[t],delete this.availableImages[t],delete this.workerSources[t],delete this.demWorkerSources[t],n()}checkIfReady(t,e,n){n()}setReferrer(t,e){this.referrer=e}spriteLoaded(e,n){this.isSpriteLoaded[e]=n;for(const r in this.workerSources[e]){const i=this.workerSources[e][r];for(const e in i)i[e]instanceof t.VectorTileWorkerSource&&(i[e].isSpriteLoaded=n,i[e].fire(new t.Event("isSpriteLoaded")))}}setImages(t,e,n){this.availableImages[t]=e;for(const n in this.workerSources[t]){const r=this.workerSources[t][n];for(const t in r)r[t].availableImages=e}n()}enableTerrain(t,e,n){this.terrain=e,n()}setProjection(e,n){this.projections[e]=t.getProjection(n)}setLayers(t,e,n){this.getLayerIndex(t).replace(e),n()}updateLayers(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()}loadTile(e,n,r){const i=this.enableTerrain?t.extend({enableTerrain:this.terrain},n):n;i.projection=this.projections[e]||this.defaultProjection,this.getWorkerSource(e,n.type,n.source).loadTile(i,r)}loadDEMTile(e,n,r){const i=this.enableTerrain?t.extend({buildQuadTree:this.terrain},n):n;this.getDEMWorkerSource(e,n.source).loadTile(i,r)}reloadTile(e,n,r){const i=this.enableTerrain?t.extend({enableTerrain:this.terrain},n):n;i.projection=this.projections[e]||this.defaultProjection,this.getWorkerSource(e,n.type,n.source).reloadTile(i,r)}abortTile(t,e,n){this.getWorkerSource(t,e.type,e.source).abortTile(e,n)}removeTile(t,e,n){this.getWorkerSource(t,e.type,e.source).removeTile(e,n)}removeSource(t,e,n){if(!this.workerSources[t]||!this.workerSources[t][e.type]||!this.workerSources[t][e.type][e.source])return;const r=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==r.removeSource?r.removeSource(e,n):n()}loadWorkerSource(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}}syncRTLPluginState(e,n,r){try{t.plugin.setState(n);const e=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=e){this.self.importScripts(e);const n=t.plugin.isParsed();r(n?void 0:new Error(`RTL Text Plugin failed to import scripts from ${e}`),n)}}catch(t){r(t.toString())}}getAvailableImages(t){let e=this.availableImages[t];return e||(e=[]),e}getLayerIndex(t){let e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new r),e}getWorkerSource(t,e,n){if(this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),!this.workerSources[t][e][n]){const r={send:(e,n,r,i,o,s)=>{this.actor.send(e,n,r,t,o,s)},scheduler:this.actor.scheduler};this.workerSources[t][e][n]=new this.workerSourceTypes[e](r,this.getLayerIndex(t),this.getAvailableImages(t),this.isSpriteLoaded[t])}return this.workerSources[t][e][n]}getDEMWorkerSource(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new o),this.demWorkerSources[t][e]}enforceCacheSizeLimit(e,n){t.enforceCacheSizeLimit(n)}getWorkerPerformanceMetrics(t,e,n){n(void 0,void 0)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new dt(self)),dt})),o(["./shared"],(function(t){function e(t,n){if(Array.isArray(t)){if(!Array.isArray(n)||t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!e(t[r],n[r]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(!e(t[r],n[r]))return!1;return!0}return t===n}var n=r;function r(t){return!function(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{e=new Worker(r),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(r),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var n=e.getImageData(0,0,1,1);return n&&n.width===t.width}()?(void 0===o[e=t&&t.failIfMajorPerformanceCaveat]&&(o[e]=function(t){var e,n=function(t){var e=document.createElement("canvas"),n=Object.create(r.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=t,e.getContext("webgl",n)||e.getContext("experimental-webgl",n)}(t);if(!n)return!1;try{e=n.createShader(n.VERTEX_SHADER)}catch(t){return!1}return!(!e||n.isContextLost())&&(n.shaderSource(e,"void main() {}"),n.compileShader(e),!0===n.getShaderParameter(e,n.COMPILE_STATUS))}(e)),o[e]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var e}(t)}var o={};function s(e,n,r){const i=t.window.document.createElement(e);return void 0!==n&&(i.className=n),r&&r.appendChild(i),i}function a(e,n,r){const i=t.window.document.createElementNS("http://www.w3.org/2000/svg",e);for(const t of Object.keys(n))i.setAttributeNS(null,t,n[t]);return r&&r.appendChild(i),i}r.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const c=t.window.document&&t.window.document.documentElement.style,l=c&&void 0!==c.userSelect?"userSelect":"WebkitUserSelect";let u;function h(){c&&l&&(u=c[l],c[l]="none")}function p(){c&&l&&(c[l]=u)}function f(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",f,!0)}function d(){t.window.addEventListener("click",f,!0),t.window.setTimeout((()=>{t.window.removeEventListener("click",f,!0)}),0)}function g(t,e){const n=t.getBoundingClientRect();return _(t,n,e)}function m(t,e){const n=t.getBoundingClientRect(),r=[];for(let i=0;i<e.length;i++)r.push(_(t,n,e[i]));return r}function y(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button}function _(e,n,r){const i=e.offsetWidth===n.width?1:e.offsetWidth/n.width;return new t.Point((r.clientX-n.left)*i,(r.clientY-n.top)*i)}function v(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n*o-i*r;return s?(t[0]=o*(s=1/s),t[1]=-r*s,t[2]=-i*s,t[3]=n*s,t):null}function x(t){const{userImage:e}=t;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}class b extends t.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:t,callback:e}of this.requestors)this._notify(t,e);this.requestors=[]}}hasImage(t){return!!this.getImage(t)}getImage(t){return this.images[t]}addImage(t,e){this._validate(t,e)&&(this.images[t]=e)}_validate(e,n){let r=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "stretchX" value`))),r=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "stretchY" value`))),r=!1),this._validateContent(n.content,n)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "content" value`))),r=!1),r}_validateStretch(t,e){if(!t)return!0;let n=0;for(const r of t){if(r[0]<n||r[1]<r[0]||e<r[1])return!1;n=r[1]}return!0}_validateContent(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))}updateImage(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0}removeImage(t){const e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t,e){let n=!0;if(!this.isLoaded())for(const e of t)this.images[e]||(n=!1);this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})}_notify(e,n){const r={};for(const n of e){this.images[n]||this.fire(new t.Event("styleimagemissing",{id:n}));const e=this.images[n];e?r[n]={data:e.data.clone(),pixelRatio:e.pixelRatio,sdf:e.sdf,version:e.version,stretchX:e.stretchX,stretchY:e.stretchY,content:e.content,hasRenderCallback:Boolean(e.userImage&&e.userImage.render)}:t.warnOnce(`Image "${n}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}n(null,r)}getPixelSize(){const{width:t,height:e}=this.atlasImage;return{width:t,height:e}}getPattern(e){const n=this.patterns[e],r=this.getImage(e);if(!r)return null;if(n&&n.position.version===r.version)return n.position;if(n)n.position.version=r.version;else{const n={w:r.data.width+2,h:r.data.height+2,x:0,y:0},i=new t.ImagePosition(n,r);this.patterns[e]={bin:n,position:i}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const n=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,n.RGBA),this.atlasTexture&&this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const t in this.patterns)e.push(this.patterns[t].bin);const{w:n,h:r}=t.potpack(e),i=this.atlasImage;i.resize({width:n||1,height:r||1});for(const e in this.patterns){const{bin:n}=this.patterns[e],r=n.x+1,o=n.y+1,s=this.images[e].data,a=s.width,c=s.height;t.RGBAImage.copy(s,i,{x:0,y:0},{x:r,y:o},{width:a,height:c}),t.RGBAImage.copy(s,i,{x:0,y:c-1},{x:r,y:o-1},{width:a,height:1}),t.RGBAImage.copy(s,i,{x:0,y:0},{x:r,y:o+c},{width:a,height:1}),t.RGBAImage.copy(s,i,{x:a-1,y:0},{x:r-1,y:o},{width:1,height:c}),t.RGBAImage.copy(s,i,{x:0,y:0},{x:r+a,y:o},{width:1,height:c})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const e of t){if(this.callbackDispatchedThisFrame[e])continue;this.callbackDispatchedThisFrame[e]=!0;const t=this.images[e];x(t)&&this.updateImage(e,t)}}}const w=new t.Properties({anchor:new t.DataConstantProperty(t.spec.light.anchor),position:new class{constructor(){this.specification=t.spec.light.position}possiblyEvaluate(e,n){return function([e,n,r]){const i=t.degToRad(n+90),o=t.degToRad(r);return{x:e*Math.cos(i)*Math.sin(o),y:e*Math.sin(i)*Math.sin(o),z:e*Math.cos(o),azimuthal:n,polar:r}}(e.expression.evaluate(n))}interpolate(e,n,r){return{x:t.number(e.x,n.x,r),y:t.number(e.y,n.y,r),z:t.number(e.z,n.z,r),azimuthal:t.number(e.azimuthal,n.azimuthal,r),polar:t.number(e.polar,n.polar,r)}}},color:new t.DataConstantProperty(t.spec.light.color),intensity:new t.DataConstantProperty(t.spec.light.intensity)});class E extends t.Evented{constructor(e){super(),this._transitionable=new t.Transitionable(w),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,n={}){if(!this._validate(t.validateLight,e,n))for(const n in e){const r=e[n];t.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-11),r):this._transitionable.setValue(n,r)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(e,n,r){return(!r||!1!==r.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}const T=new t.Properties({source:new t.DataConstantProperty(t.spec.terrain.source),exaggeration:new t.DataConstantProperty(t.spec.terrain.exaggeration)});let S=class extends t.Evented{constructor(e,n){super(),this._transitionable=new t.Transitionable(T),this.set(e),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=n}get(){return this._transitionable.serialize()}set(e){for(const n in e){const r=e[n];t.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-11),r):this._transitionable.setValue(n,r)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}};function k(e,n,r,i){const o=t.smoothstep(45,65,r),[s,a]=A(e,i),c=t.length(n);let l=1-Math.min(1,Math.exp((c-s)/(a-s)*-6));return l*=l*l,l=Math.min(1,1.00747*l),l*o*e.alpha}function A(t,e){const n=.5/Math.tan(.5*e);return[t.range[0]+n,t.range[1]+n]}const M=new t.Properties({range:new t.DataConstantProperty(t.spec.fog.range),color:new t.DataConstantProperty(t.spec.fog.color),"high-color":new t.DataConstantProperty(t.spec.fog["high-color"]),"space-color":new t.DataConstantProperty(t.spec.fog["space-color"]),"horizon-blend":new t.DataConstantProperty(t.spec.fog["horizon-blend"]),"star-intensity":new t.DataConstantProperty(t.spec.fog["star-intensity"])});class I extends t.Evented{constructor(e,n){super(),this._transitionable=new t.Transitionable(M),this.set(e),this._transitioning=this._transitionable.untransitioned(),this._transform=n}get state(){const e=this._transform,n="globe"===e.projection.name,r=t.globeToMercatorTransition(e.zoom),i=this.properties.get("range"),o=[.5,3];return{range:n?[t.number(o[0],i[0],r),t.number(o[1],i[1],r)]:i,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(e,n={}){if(!this._validate(t.validateFog,e,n)){for(const n of Object.keys(t.spec.fog))e&&void 0===e[n]&&(e[n]=t.spec.fog[n].default);for(const n in e){const r=e[n];t.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-11),r):this._transitionable.setValue(n,r)}}}getOpacity(e){if(!this._transform.projection.supportsFog)return 0;const n=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:t.smoothstep(45,65,e))*n.a}getOpacityAtLatLng(e,n){return this._transform.projection.supportsFog?function(e,n,r){const i=t.MercatorCoordinate.fromLngLat(n),o=r.elevation?r.elevation.getAtPointOrZero(i):0,s=[i.x,i.y,o];return t.transformMat4(s,s,r.mercatorFogMatrix),k(e,s,r.pitch,r._fov)}(this.state,e,n):0}getFovAdjustedRange(t){return this._transform.projection.supportsFog?A(this.state,t):[0,1]}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(e,n,r){return(!r||!1!==r.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}class C{constructor(e,n){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=t.uniqueId();const r=this.workerPool.acquire(this.id);for(let t=0;t<r.length;t++){const e=new C.Actor(r[t],n,this.id);e.name=`Worker ${t}`,this.actors.push(e)}this.ready=!1,this.broadcast("checkIfReady",null,(()=>{this.ready=!0}))}broadcast(e,n,r){t.asyncAll(this.actors,((t,r)=>{t.send(e,n,r)}),r=r||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((t=>{t.remove()})),this.actors=[],this.workerPool.release(this.id)}}function O(e,n,r){return n*(t.EXTENT/(e.tileSize*Math.pow(2,r-e.tileID.overscaledZ)))}C.Actor=t.Actor;class P{constructor(t,e,n,r){this.screenBounds=t,this.cameraPoint=e,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=n,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,r)}static createFromScreenPoints(e,n){let r,i;if(e instanceof t.Point||"number"==typeof e[0]){const o=t.Point.convert(e);r=[o],i=n.isPointAboveHorizon(o)}else{const o=t.Point.convert(e[0]),s=t.Point.convert(e[1]);r=[o,s],i=t.polygonizeBounds(o,s).every((t=>n.isPointAboveHorizon(t)))}return new P(r,n.getCameraPoint(),i,n)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(e){return t.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],e)}bufferedCameraGeometry(e){const n=this.screenBounds[0],r=1===this.screenBounds.length?this.screenBounds[0].add(new t.Point(1,1)):this.screenBounds[1],i=t.polygonizeBounds(n,r,0,!1);return this.cameraPoint.y>r.y&&(this.cameraPoint.x>n.x&&this.cameraPoint.x<r.x?i.splice(3,0,this.cameraPoint):this.cameraPoint.x>=r.x?i[2]=this.cameraPoint:this.cameraPoint.x<=n.x&&(i[3]=this.cameraPoint)),t.bufferConvexPolygon(i,e)}bufferedCameraGeometryGlobe(e){const n=this.screenBounds[0],r=1===this.screenBounds.length?this.screenBounds[0].add(new t.Point(1,1)):this.screenBounds[1],i=t.polygonizeBounds(n,r,e),o=this.cameraPoint.clone();switch(3*((o.y>n.y)+(o.y>r.y))+((o.x>n.x)+(o.x>r.x))){case 0:i[0]=o,i[4]=o.clone();break;case 1:i.splice(1,0,o);break;case 2:i[1]=o;break;case 3:i.splice(4,0,o);break;case 5:i.splice(2,0,o);break;case 6:i[3]=o;break;case 7:i.splice(3,0,o);break;case 8:i[2]=o}return i}containsTile(e,n,r,i=0){const o=e.queryPadding/n._pixelsPerMercatorPixel+1,s=r?this._bufferedCameraMercator(o,n):this._bufferedScreenMercator(o,n);let a=e.tileID.wrap+(s.unwrapped?i:0);const c=s.polygon.map((n=>t.getTilePoint(e.tileTransform,n,a)));if(!t.polygonIntersectsBox(c,0,0,t.EXTENT,t.EXTENT))return;a=e.tileID.wrap+(this.screenGeometryMercator.unwrapped?i:0);const l=this.screenGeometryMercator.polygon.map((n=>t.getTileVec3(e.tileTransform,n,a))),u=l.map((e=>new t.Point(e[0],e[1]))),h=n.getFreeCameraOptions().position||new t.MercatorCoordinate(0,0,0),p=t.getTileVec3(e.tileTransform,h,a),f=l.map((e=>{const n=t.sub(e,e,p);return t.normalize(n,n),new t.Ray(p,n)})),d=O(e,1,n.zoom)*n._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:u,tilespaceRays:f,bufferedTilespaceGeometry:c,bufferedTilespaceBounds:(g=t.getBounds(c),g.min.x=t.clamp(g.min.x,0,t.EXTENT),g.min.y=t.clamp(g.min.y,0,t.EXTENT),g.max.x=t.clamp(g.max.x,0,t.EXTENT),g.max.y=t.clamp(g.max.y,0,t.EXTENT),g),tile:e,tileID:e.tileID,pixelToTileUnitsFactor:d};var g}_bufferedScreenMercator(t,e){const n=R(t);if(this._screenRaycastCache[n])return this._screenRaycastCache[n];{let r;return r="globe"===e.projection.name?this._projectAndResample(this.bufferedScreenGeometry(t),e):{polygon:this.bufferedScreenGeometry(t).map((t=>e.pointCoordinate3D(t))),unwrapped:!0},this._screenRaycastCache[n]=r,r}}_bufferedCameraMercator(t,e){const n=R(t);if(this._cameraRaycastCache[n])return this._cameraRaycastCache[n];{let r;return r="globe"===e.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(t),e):{polygon:this.bufferedCameraGeometry(t).map((t=>e.pointCoordinate3D(t))),unwrapped:!0},this._cameraRaycastCache[n]=r,r}}_projectAndResample(e,n){const r=function(e,n){const r=t.multiply([],n.pixelMatrix,n.globeMatrix),i=[0,-t.GLOBE_RADIUS,0,1],o=[0,t.GLOBE_RADIUS,0,1],s=[0,0,0,1];t.transformMat4$1(i,i,r),t.transformMat4$1(o,o,r),t.transformMat4$1(s,s,r);const a=new t.Point(i[0]/i[3],i[1]/i[3]),c=new t.Point(o[0]/o[3],o[1]/o[3]),l=t.polygonContainsPoint(e,a)&&i[3]<s[3],u=t.polygonContainsPoint(e,c)&&o[3]<s[3];if(!l&&!u)return null;const h=function(t,e,n){for(let r=1;r<t.length;r++){const i=D(e.pointCoordinate3D(t[r-1]).x),o=D(e.pointCoordinate3D(t[r]).x);if(n<0){if(i<o)return{idx:r,t:-i/(o-1-i)}}else if(o<i)return{idx:r,t:(1-i)/(o+1-i)}}return null}(e,n,l?-1:1);if(!h)return null;const{idx:p,t:f}=h;let d=p>1?L(e.slice(0,p),n):[],g=p<e.length?L(e.slice(p),n):[];d=d.map((e=>new t.Point(D(e.x),e.y))),g=g.map((e=>new t.Point(D(e.x),e.y)));const m=[...d];0===m.length&&m.push(g[g.length-1]);const y=t.number(m[m.length-1].y,(0===g.length?d[0]:g[0]).y,f);let _;return _=l?[new t.Point(0,y),new t.Point(0,0),new t.Point(1,0),new t.Point(1,y)]:[new t.Point(1,y),new t.Point(1,1),new t.Point(0,1),new t.Point(0,y)],m.push(..._),0===g.length?m.push(d[0]):m.push(...g),{polygon:m.map((e=>new t.MercatorCoordinate(e.x,e.y))),unwrapped:!1}}(e,n);if(r)return r;const i=function(e,n){let r=!1,i=-1/0,o=0;for(let t=0;t<e.length-1;t++)e[t].x>i&&(i=e[t].x,o=t);for(let t=0;t<e.length-1;t++){const n=(o+t)%(e.length-1),i=e[n],s=e[n+1];Math.abs(i.x-s.x)>.5&&(i.x<s.x?(i.x+=1,0===n&&(e[e.length-1].x+=1)):(s.x+=1,n+1===e.length-1&&(e[0].x+=1)),r=!0)}const s=t.mercatorXfromLng(n.center.lng);return r&&s<Math.abs(s-1)&&e.forEach((t=>{t.x-=1})),{polygon:e,unwrapped:r}}(L(e,n).map((e=>new t.Point(D(e.x),e.y))),n);return{polygon:i.polygon.map((e=>new t.MercatorCoordinate(e.x,e.y))),unwrapped:i.unwrapped}}}function L(e,n){return t.resample(e,(t=>{const e=n.pointCoordinate3D(t);t.x=e.x,t.y=e.y}),1/256)}function D(t){return t<0?1+t%1:t%1}function R(t){return 100*t|0}function N(e,n,r,i,o){const s=function(r,i){if(r)return o(r);if(i){e.url&&i.tiles&&e.tiles&&delete e.tiles;const r=t.pick(t.extend(i,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);i.vector_layers&&(r.vectorLayers=i.vector_layers,r.vectorLayerIds=r.vectorLayers.map((t=>t.id))),r.tiles=n.canonicalizeTileset(r,e.url),o(null,r)}};return e.url?t.getJSON(n.transformRequest(n.normalizeSourceURL(e.url,null,r,i),t.ResourceType.Source),s):t.exported.frame((()=>s(null,e)))}class j{constructor(e,n,r){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=n||0,this.maxzoom=r||24}validateBounds(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(e){const n=Math.pow(2,e.z),r=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*n),s=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*n);return e.x>=r&&e.x<o&&e.y>=i&&e.y<s}}class z{constructor(t,e,n){this.context=t;const r=t.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||e.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const B={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class F{constructor(t,e,n,r){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=r,this.context=t;const i=t.gl;this.buffer=i.createBuffer(),t.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||e.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){const e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,e){for(let n=0;n<this.attributes.length;n++){const r=e.attributes[this.attributes[n].name];void 0!==r&&t.enableVertexAttribArray(r)}}setVertexAttribPointers(t,e,n){for(let r=0;r<this.attributes.length;r++){const i=this.attributes[r],o=e.attributes[i.name];void 0!==o&&t.vertexAttribPointer(o,i.components,t[B[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class U{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class V extends U{getDefault(){return t.Color.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class q extends U{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class W extends U{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class G extends U{getDefault(){return[!0,!0,!0,!0]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class $ extends U{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class H extends U{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class Z extends U{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class Y extends U{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class X extends U{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}}class K extends U{getDefault(){return[0,1]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class J extends U{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}}class Q extends U{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class tt extends U{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}}class et extends U{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class nt extends U{getDefault(){return t.Color.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class rt extends U{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class it extends U{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}}class ot extends U{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class st extends U{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}let at,ct=class extends U{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}};class lt extends U{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class ut extends U{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class ht extends U{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class pt extends U{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class ft extends U{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class dt extends U{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class gt extends U{getDefault(){return null}set(t){const e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class mt extends U{constructor(t){super(t),this.vao=t.extVertexArrayObject}getDefault(){return null}set(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)}}class yt extends U{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class _t extends U{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class vt extends U{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class xt extends U{constructor(t,e){super(t),this.context=t,this.parent=e}getDefault(){return null}}class bt extends xt{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class wt extends xt{attachment(){return this.gl.DEPTH_ATTACHMENT}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,this.attachment(),e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class Et extends wt{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Tt{constructor(t,e,n,r){this.context=t,this.width=e,this.height=n;const i=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new bt(t,i),r&&(this.depthAttachment=new wt(t,i))}destroy(){const t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){const e=this.depthAttachment.get();e&&t.deleteRenderbuffer(e)}t.deleteFramebuffer(this.framebuffer)}}class St{constructor(t,e=!1){if(this.gl=t,this.isWebGL2=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),e){const e=t;this.extVertexArrayObject={createVertexArrayOES:e.createVertexArray.bind(t),deleteVertexArrayOES:e.deleteVertexArray.bind(t),bindVertexArrayOES:e.bindVertexArray.bind(t)}}this.clearColor=new V(this),this.clearDepth=new q(this),this.clearStencil=new W(this),this.colorMask=new G(this),this.depthMask=new $(this),this.stencilMask=new H(this),this.stencilFunc=new Z(this),this.stencilOp=new Y(this),this.stencilTest=new X(this),this.depthRange=new K(this),this.depthTest=new J(this),this.depthFunc=new Q(this),this.blend=new tt(this),this.blendFunc=new et(this),this.blendColor=new nt(this),this.blendEquation=new rt(this),this.cullFace=new it(this),this.cullFaceSide=new ot(this),this.frontFace=new st(this),this.program=new ct(this),this.activeTexture=new lt(this),this.viewport=new ut(this),this.bindFramebuffer=new ht(this),this.bindRenderbuffer=new pt(this),this.bindTexture=new ft(this),this.bindVertexBuffer=new dt(this),this.bindElementBuffer=new gt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new mt(this),this.pixelStoreUnpack=new yt(this),this.pixelStoreUnpackPremultiplyAlpha=new _t(this),this.pixelStoreUnpackFlipY=new vt(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=t.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=t.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=t.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),e||(this.extTextureHalfFloat=t.getExtension("OES_texture_half_float")),(e||this.extTextureHalfFloat&&t.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=e||t.getExtension("OES_standard_derivatives"),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,e){return new z(this,t,e)}createVertexBuffer(t,e,n){return new F(this,t,e,n)}createRenderbuffer(t,e,n){const r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),i}createFramebuffer(t,e,n){return new Tt(this,t,e,n)}clear({color:t,depth:e,stencil:n}){const r=this.gl;let i=0;t&&(i|=r.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==e&&(i|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(e),this.depthMask.set(!0)),void 0!==n&&(i|=r.STENCIL_BUFFER_BIT,this.clearStencil.set(n),this.stencilMask.set(255)),r.clear(i)}setCullFace(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(n){e(n.blendFunction,t.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class kt extends t.Evented{constructor(e,n,r,i){if(super(),this.id=e,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(n,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i),this._tileWorkers={},this._deduped=new t.DedupedRequest}load(e){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"}));const n=Array.isArray(this.map._language)?this.map._language.join():this.map._language,r=this.map._worldview;this._tileJSONRequest=N(this._options,this.map._requestManager,n,r,((o,s)=>{this._tileJSONRequest=null,this._loaded=!0,o?(n&&i.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${n}`),r&&2!==r.length&&i.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${r}`),this.fire(new t.ErrorEvent(o))):s&&(t.extend(this,s),s.bounds&&(this.tileBounds=new j(s.bounds,this.minzoom,this.maxzoom)),t.postTurnstileEvent(s.tiles,this.map._requestManager._customAccessToken),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"}))),e&&e(o)}))}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)))}setTiles(t){return this._options.tiles=t,this.reload(),this}setUrl(t){return this.url=t,this._options.url=t,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return t.extend({},this._options)}loadTile(e,n){const r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme)),i={request:this.map._requestManager.transformRequest(r,t.ResourceType.Tile),data:void 0,uid:e.uid,tileID:e.tileID,tileZoom:e.tileZoom,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:e.isSymbolTile};if(i.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state)"loading"===e.state?e.reloadCallback=n:e.request=e.actor.send("reloadTile",i,o.bind(this));else if(e.actor=this._tileWorkers[r]=this._tileWorkers[r]||this.dispatcher.getActor(),this.dispatcher.ready)e.request=e.actor.send("loadTile",i,o.bind(this),void 0,!0);else{const n=t.loadVectorTile.call({deduped:this._deduped},i,((t,n)=>{t||!n?o.call(this,t):(i.data={cacheControl:n.cacheControl,expires:n.expires,rawData:n.rawData.slice(0)},e.actor&&e.actor.send("loadTile",i,o.bind(this),void 0,!0))}),!0);e.request={cancel:n}}function o(r,i){return delete e.request,e.aborted?n(null):r&&404!==r.status?n(r):(i&&i.resourceTiming&&(e.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&e.setExpiryData(i),e.loadVectorData(i,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id})}unloadTile(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class At extends t.Evented{constructor(e,n,r,i){super(),this.id=e,this.dispatcher=r,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},n),t.extend(this,t.pick(n,["url","scheme","tileSize"]))}load(e){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=N(this._options,this.map._requestManager,null,null,((n,r)=>{this._tileJSONRequest=null,this._loaded=!0,n?this.fire(new t.ErrorEvent(n)):r&&(t.extend(this,r),r.bounds&&(this.tileBounds=new j(r.bounds,this.minzoom,this.maxzoom)),t.postTurnstileEvent(r.tiles),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"}))),e&&e(n)}))}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)))}setTiles(t){return this._options.tiles=t,this.reload(),this}setUrl(t){return this.url=t,this._options.url=t,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return t.extend({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(e,n){const r=t.exported.devicePixelRatio>=2,i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),r,this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(i,t.ResourceType.Tile),((r,i,o,s)=>(delete e.request,e.aborted?(e.state="unloaded",n(null)):r?(e.state="errored",n(r)):i?(this.map._refreshExpiredTiles&&e.setExpiryData({cacheControl:o,expires:s}),e.setTexture(i,this.map.painter),e.state="loaded",t.cacheEntryPossiblyAdded(this.dispatcher),void n(null)):n(null))))}static loadTileData(t,e,n){t.setTexture(e,n)}static unloadTileData(t,e){t.texture&&e.saveTileTexture(t.texture)}abortTile(t,e){t.request&&(t.request.cancel(),delete t.request),e()}unloadTile(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function Mt(e,n,r,i,o,s,a,c){const l=[e,r,o,n,i,s,1,1,1],u=[a,c,1],h=t.adjoint([],l),[p,f,d]=t.transformMat3(u,u,t.transpose(h,h));return t.multiply$1(l,[p,0,0,0,f,0,0,0,d],l)}class It extends t.Evented{constructor(t,e,n,r){super(),this.id=t,this.dispatcher=n,this.coordinates=e.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(r),this.options=e,this._dirty=!1}load(e,n){this._loaded=n||!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),((n,r)=>{if(this._imageRequest=null,this._loaded=!0,n)this.fire(new t.ErrorEvent(n));else if(r){const{HTMLImageElement:n}=t.window;this.image=r instanceof n?t.exported.getImageData(r):r,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,e&&(this.coordinates=e),this._finishLoading()}}))}loaded(){return this._loaded}updateImage(t){return this.image&&t.url?(this._imageRequest&&t.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=t.url,this.load(t.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(e){this.coordinates=e,this._boundsArray=void 0;const n=e.map(t.MercatorCoordinate.fromLngLat);return this.tileID=function(e){let n=1/0,r=1/0,i=-1/0,o=-1/0;for(const t of e)n=Math.min(n,t.x),r=Math.min(r,t.y),i=Math.max(i,t.x),o=Math.max(o,t.y);const s=Math.max(i-n,o-r),a=Math.max(0,Math.floor(-Math.log(s)/Math.LN2)),c=Math.pow(2,a);return new t.CanonicalTileID(a,Math.floor((n+i)/2*c),Math.floor((r+o)/2*c))}(n),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(e){for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}if(this._boundsArray)return;const n=t.tileTransform(this.tileID,this.map.transform.projection),[r,i,o,s]=this.coordinates.map((e=>{const r=n.projection.project(e[0],e[1]);return t.getTilePoint(n,r)._round()}));this.perspectiveTransform=function(e,n,r,i,o,s,a,c,l,u){const h=Mt(0,0,e,0,0,n,e,n),p=Mt(r,i,o,s,a,c,l,u);return t.multiply$1(p,t.adjoint(h,h),p),[p[6]/p[8]*e/t.EXTENT,p[7]/p[8]*n/t.EXTENT]}(this.width,this.height,r.x,r.y,i.x,i.y,s.x,s.y,o.x,o.y);const a=this._boundsArray=new t.StructArrayLayout4i8;a.emplaceBack(r.x,r.y,0,0),a.emplaceBack(i.x,i.y,t.EXTENT,0),a.emplaceBack(s.x,s.y,0,t.EXTENT),a.emplaceBack(o.x,o.y,t.EXTENT,t.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=e.createVertexBuffer(a,t.boundsAttributes.members),this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const e=this.map.painter.context,n=e.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new t.Texture(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(e)}loadTile(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Ct={vector:kt,raster:At,"raster-dem":class extends At{constructor(e,n,r,i){super(e,n,r,i),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox"}loadTile(e,n){const r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function i(t,r){t&&(e.state="errored",n(t)),r&&(e.dem=r,e.dem.onDeserialize(),e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0,e.state="loaded",n(null))}e.request=t.getImage(this.map._requestManager.transformRequest(r,t.ResourceType.Tile),function(r,o,s,a){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(r)e.state="errored",n(r);else if(o){this.map._refreshExpiredTiles&&e.setExpiryData({cacheControl:s,expires:a});const n=t.window.ImageBitmap&&o instanceof t.window.ImageBitmap&&(null==at&&(at=t.window.OffscreenCanvas&&new t.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof t.window.createImageBitmap),at),r=1-(o.width-t.prevPowerOfTwo(o.width))/2;r<1||e.neighboringTiles||(e.neighboringTiles=this._getNeighboringTiles(e.tileID));const c=n?o:t.exported.getImageData(o,r),l={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:c,encoding:this.encoding,padding:r};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",l,i.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(e){const n=e.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?e.wrap-1:e.wrap,s=(n.x+1+r)%r,a=n.x+1===r?e.wrap+1:e.wrap,c={};return c[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},c[new t.OverscaledTileID(e.overscaledZ,a,n.z,s,n.y).key]={backfilled:!1},n.y>0&&(c[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},c[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},c[new t.OverscaledTileID(e.overscaledZ,a,n.z,s,n.y-1).key]={backfilled:!1}),n.y+1<r&&(c[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},c[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},c[new t.OverscaledTileID(e.overscaledZ,a,n.z,s,n.y+1).key]={backfilled:!1}),c}unloadTile(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded"}},geojson:class extends t.Evented{constructor(e,n,r,i){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=r.getActor(),this.setEventedParent(i),this._data=n.data,this._options=t.extend({},n),this._collectResourceTiming=n.collectResourceTiming,void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId;const o=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*o,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*o,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?n.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,n.clusterMinPoints||2),extent:t.EXTENT,radius:(void 0!==n.clusterRadius?n.clusterRadius:50)*o,log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions)}onAdd(t){this.map=t,this.setData(this._data)}setData(t){return this._data=t,this._updateWorkerData(),this}getClusterExpansionZoom(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this}getClusterChildren(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this}getClusterLeaves(t,e,n,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:n},r),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new t.Event("dataloading",{dataType:"source"})),this._loaded=!1;const e=t.extend({},this.workerOptions),n=this._data;"string"==typeof n?(e.request=this.map._requestManager.transformRequest(t.exported.resolveURL(n),t.ResourceType.Source),e.request.collectResourceTiming=this._collectResourceTiming):e.data=JSON.stringify(n),this._pendingLoad=this.actor.send(`${this.type}.loadData`,e,((e,n)=>{if(this._loaded=!0,this._pendingLoad=null,e)this.fire(new t.ErrorEvent(e));else{const e={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&n&&n.resourceTiming&&n.resourceTiming[this.id]&&(e.resourceTiming=n.resourceTiming[this.id]),this.fire(new t.Event("data",e)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)}))}loaded(){return this._loaded}loadTile(e,n){const r=e.actor?"reloadTile":"loadTile";e.actor=this.actor,e.request=this.actor.send(r,{type:this.type,uid:e.uid,tileID:e.tileID,tileZoom:e.tileZoom,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},((t,i)=>(delete e.request,e.unloadVectorData(),e.aborted?n(null):t?n(t):(e.loadVectorData(i,this.map.painter,"reloadTile"===r),n(null)))),void 0,"loadTile"===r)}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0}unloadTile(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return t.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends It{constructor(t,e,n,r){super(t,e,n,r),this.roundZoom=!0,this.type="video",this.options=e}load(){this._loaded=!1;const e=this.options;this.urls=[];for(const n of e.urls)this.urls.push(this.map._requestManager.transformRequest(n,t.ResourceType.Source).url);t.getVideo(this.urls,((e,n)=>{this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):n&&(this.video=n,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const n=this.video.seekable;e<n.start(0)||e>n.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${n.start(0)} and ${n.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const e=this.map.painter.context,n=e.gl;this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(e)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:It,canvas:class extends It{constructor(e,n,r,i){super(e,n,r,i),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some((t=>!Array.isArray(t)||2!==t.length||t.some((t=>"number"!=typeof t))))||this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const n=this.map.painter.context;this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(n,this.canvas,n.gl.RGBA,{premultiply:!0}),this._prepareData(n)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}},custom:class extends t.Evented{constructor(e,n,r,i){super(),this.id=e,this.type="custom",this._dataType="raster",this._dispatcher=r,this._implementation=n,this.setEventedParent(i),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new t.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new t.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new j(this._implementation.bounds,this.minzoom,this.maxzoom)),n.update=this._update.bind(this),n.clearTiles=this._clearTiles.bind(this),n.coveringTiles=this._coveringTiles.bind(this),t.extend(this,t.pick(n,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return t.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(e){this._map=e,this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(e),this.load()}onRemove(t){this._implementation.onRemove&&this._implementation.onRemove(t)}hasTile(t){if(this._implementation.hasTile){const{x:e,y:n,z:r}=t.canonical;return this._implementation.hasTile({x:e,y:n,z:r})}return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(e,n){const{x:r,y:i,z:o}=e.tileID.canonical,s=new t.window.AbortController;e.request=Promise.resolve(this._implementation.loadTile({x:r,y:i,z:o},{signal:s.signal})).then(function(r){return delete e.request,e.aborted?(e.state="unloaded",n(null)):void 0===r?(e.state="errored",n(null)):null===r?(this.loadTileData(e,{width:this.tileSize,height:this.tileSize,data:null}),e.state="loaded",n(null)):function(e){return e instanceof t.window.ImageData||e instanceof t.window.HTMLCanvasElement||e instanceof t.window.ImageBitmap||e instanceof t.window.HTMLImageElement}(r)?(this.loadTileData(e,r),e.state="loaded",void n(null)):(e.state="errored",n(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch((t=>{20!==t.code&&(e.state="errored",n(t))})),e.request.cancel=()=>s.abort()}loadTileData(t,e){At.loadTileData(t,e,this._map.painter)}unloadTileData(t){At.unloadTileData(t,this._map.painter)}unloadTile(t,e){if(this.unloadTileData(t),this._implementation.unloadTile){const{x:e,y:n,z:r}=t.tileID.canonical;this._implementation.unloadTile({x:e,y:n,z:r})}e()}abortTile(t,e){t.request&&t.request.cancel&&(t.request.cancel(),delete t.request),e()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map((t=>({x:t.canonical.x,y:t.canonical.y,z:t.canonical.z})))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Ot=function(e,n,r,i){const o=new Ct[n.type](e,n,r,i);if(o.id!==e)throw new Error(`Expected Source id to be ${e} instead of ${o.id}`);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o};function Pt(e,n){const r=t.identity([]);return t.scale(r,r,[.5*e.width,.5*-e.height,1]),t.translate(r,r,[1,-1,0]),t.multiply(r,r,e.calculateProjMatrix(n.toUnwrapped())),Float32Array.from(r)}function Lt(t,e,n,r,i,o,s,a=!1){const c=t.tilesIn(r,s,a);c.sort(Rt);const l=[];for(const r of c)l.push({wrappedTileID:r.tile.tileID.wrapped().key,queryResults:r.tile.queryRenderedFeatures(e,n,t._state,r,i,o,Pt(t.transform,r.tile.tileID),a)});const u=function(t){const e={},n={};for(const r of t){const t=r.queryResults,i=r.wrappedTileID,o=n[i]=n[i]||{};for(const n in t){const r=t[n],i=o[n]=o[n]||{},s=e[n]=e[n]||[];for(const t of r)i[t.featureIndex]||(i[t.featureIndex]=!0,s.push(t))}}return e}(l);for(const e in u)u[e].forEach((e=>{const n=e.feature,r=n.layer;r&&"background"!==r.type&&"sky"!==r.type&&(n.source=r.source,r["source-layer"]&&(n.sourceLayer=r["source-layer"]),n.state=void 0!==n.id?t.getFeatureState(r["source-layer"],n.id):{})}));return u}function Dt(t,e){const n=t.getRenderableIds().map((e=>t.getTileByID(e))),r=[],i={};for(let t=0;t<n.length;t++){const o=n[t],s=o.tileID.canonical.key;i[s]||(i[s]=!0,o.querySourceFeatures(r,e))}return r}function Rt(t,e){const n=t.tileID,r=e.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}function Nt(){return null!=fo.workerClass?new fo.workerClass:new t.window.Worker(fo.workerUrl)}const jt="mapboxgl_preloaded_worker_pool";class zt{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<zt.workerCount;)this.workers.push(new Nt);return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((t=>{t.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[jt]}numActive(){return Object.keys(this.active).length}}let Bt;function Ft(){return Bt||(Bt=new zt),Bt}function Ut(e,n){const r={};for(const t in e)"ref"!==t&&(r[t]=e[t]);return t.refProperties.forEach((t=>{t in n&&(r[t]=n[t])})),r}function Vt(t){t=t.slice();const e=Object.create(null);for(let n=0;n<t.length;n++)e[t[n].id]=t[n];for(let n=0;n<t.length;n++)"ref"in t[n]&&(t[n]=Ut(t[n],e[t[n].ref]));return t}zt.workerCount=2;const qt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Wt(t,e,n){n.push({command:qt.addSource,args:[t,e[t]]})}function Gt(t,e,n){e.push({command:qt.removeSource,args:[t]}),n[t]=!0}function $t(t,e,n,r){Gt(t,n,r),Wt(t,e,n)}function Ht(t,n,r){let i;for(i in t[r])if(t[r].hasOwnProperty(i)&&"data"!==i&&!e(t[r][i],n[r][i]))return!1;for(i in n[r])if(n[r].hasOwnProperty(i)&&"data"!==i&&!e(t[r][i],n[r][i]))return!1;return!0}function Zt(t,n,r,i,o,s){let a;for(a in n=n||{},t=t||{})t.hasOwnProperty(a)&&(e(t[a],n[a])||r.push({command:s,args:[i,a,n[a],o]}));for(a in n)n.hasOwnProperty(a)&&!t.hasOwnProperty(a)&&(e(t[a],n[a])||r.push({command:s,args:[i,a,n[a],o]}))}function Yt(t){return t.id}function Xt(t,e){return t[e.id]=e,t}class Kt{constructor(t,e){this.reset(t,e)}reset(t,e){this.points=t||[],this._distances=[0];for(let t=1;t<this.points.length;t++)this._distances[t]=this._distances[t-1]+this.points[t].dist(this.points[t-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(1===this.points.length)return this.points[0];e=t.clamp(e,0,1);let n=1,r=this._distances[n];const i=e*this.paddedLength+this.padding;for(;r<i&&n<this._distances.length;)r=this._distances[++n];const o=n-1,s=this._distances[o],a=r-s,c=a>0?(i-s)/a:0;return this.points[o].mult(1-c).add(this.points[n].mult(c))}}class Jt{constructor(t,e,n){const r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(let t=0;t<this.xCellCount*this.yCellCount;t++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}insertCircle(t,e,n,r){this._forEachCell(e-r,n-r,e+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(r)}_insertBoxCell(t,e,n,r,i,o){this.boxCells[i].push(o)}_insertCircleCell(t,e,n,r,i,o){this.circleCells[i].push(o)}_query(t,e,n,r,i,o){if(n<0||t>this.width||r<0||e>this.height)return!i&&[];const s=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(let t=0;t<this.boxKeys.length;t++)s.push({key:this.boxKeys[t],x1:this.bboxes[4*t],y1:this.bboxes[4*t+1],x2:this.bboxes[4*t+2],y2:this.bboxes[4*t+3]});for(let t=0;t<this.circleKeys.length;t++){const e=this.circles[3*t],n=this.circles[3*t+1],r=this.circles[3*t+2];s.push({key:this.circleKeys[t],x1:e-r,y1:n-r,x2:e+r,y2:n+r})}return o?s.filter(o):s}return this._forEachCell(t,e,n,r,this._queryCell,s,{hitTest:i,seenUids:{box:{},circle:{}}},o),i?s.length>0:s}_queryCircle(t,e,n,r,i){const o=t-n,s=t+n,a=e-n,c=e+n;if(s<0||o>this.width||c<0||a>this.height)return!r&&[];const l=[];return this._forEachCell(o,a,s,c,this._queryCellCircle,l,{hitTest:r,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}},i),r?l.length>0:l}query(t,e,n,r,i){return this._query(t,e,n,r,!1,i)}hitTest(t,e,n,r,i){return this._query(t,e,n,r,!0,i)}hitTestCircle(t,e,n,r){return this._queryCircle(t,e,n,!0,r)}_queryCell(t,e,n,r,i,o,s,a){const c=s.seenUids,l=this.boxCells[i];if(null!==l){const i=this.bboxes;for(const u of l)if(!c.box[u]){c.box[u]=!0;const l=4*u;if(t<=i[l+2]&&e<=i[l+3]&&n>=i[l+0]&&r>=i[l+1]&&(!a||a(this.boxKeys[u]))){if(s.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[u],x1:i[l],y1:i[l+1],x2:i[l+2],y2:i[l+3]})}}}const u=this.circleCells[i];if(null!==u){const i=this.circles;for(const l of u)if(!c.circle[l]){c.circle[l]=!0;const u=3*l;if(this._circleAndRectCollide(i[u],i[u+1],i[u+2],t,e,n,r)&&(!a||a(this.circleKeys[l]))){if(s.hitTest)return o.push(!0),!0;{const t=i[u],e=i[u+1],n=i[u+2];o.push({key:this.circleKeys[l],x1:t-n,y1:e-n,x2:t+n,y2:e+n})}}}}}_queryCellCircle(t,e,n,r,i,o,s,a){const c=s.circle,l=s.seenUids,u=this.boxCells[i];if(null!==u){const t=this.bboxes;for(const e of u)if(!l.box[e]){l.box[e]=!0;const n=4*e;if(this._circleAndRectCollide(c.x,c.y,c.radius,t[n+0],t[n+1],t[n+2],t[n+3])&&(!a||a(this.boxKeys[e])))return o.push(!0),!0}}const h=this.circleCells[i];if(null!==h){const t=this.circles;for(const e of h)if(!l.circle[e]){l.circle[e]=!0;const n=3*e;if(this._circlesCollide(t[n],t[n+1],t[n+2],c.x,c.y,c.radius)&&(!a||a(this.circleKeys[e])))return o.push(!0),!0}}}_forEachCell(t,e,n,r,i,o,s,a){const c=this._convertToXCellCoord(t),l=this._convertToYCellCoord(e),u=this._convertToXCellCoord(n),h=this._convertToYCellCoord(r);for(let p=c;p<=u;p++)for(let c=l;c<=h;c++)if(i.call(this,t,e,n,r,this.xCellCount*c+p,o,s,a))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,e,n,r,i,o){const s=r-t,a=i-e,c=n+o;return c*c>s*s+a*a}_circleAndRectCollide(t,e,n,r,i,o,s){const a=(o-r)/2,c=Math.abs(t-(r+a));if(c>a+n)return!1;const l=(s-i)/2,u=Math.abs(e-(i+l));if(u>l+n)return!1;if(c<=a||u<=l)return!0;const h=c-a,p=u-l;return h*h+p*p<=n*n}}const Qt={unknown:0,flipRequired:1,flipNotRequired:2},te=Math.tan(85*Math.PI/180);function ee(e,n,r,i,o,s,a){const c=t.create();if(r)if("globe"===s.name){const e=t.calculateGlobeLabelMatrix(o,n);t.multiply(c,c,e)}else{const e=v([],a);c[0]=e[0],c[1]=e[1],c[4]=e[2],c[5]=e[3],i||t.rotateZ(c,c,o.angle)}else t.multiply(c,o.labelPlaneMatrix,e);return c}function ne(t,e,n,r,i,o,s){const a=ee(t,e,n,r,i,o,s);return"globe"===o.name&&n||(a[2]=a[6]=a[10]=a[14]=0),a}function re(e,n,r,i,o,s,a){if(r){if("globe"===s.name){const c=ee(e,n,r,i,o,s,a);return t.invert(c,c),t.multiply(c,e,c),c}{const n=t.clone(e),r=t.identity([]);return r[0]=a[0],r[1]=a[1],r[4]=a[2],r[5]=a[3],t.multiply(n,n,r),i||t.rotateZ(n,n,-o.angle),n}}return o.glCoordMatrix}function ie(e,n,r,i){const o=[e,n,r,1];r?t.transformMat4$1(o,o,i):ge(o,o,i);const s=o[3];return o[0]/=s,o[1]/=s,o[2]/=s,o}function oe(t,e){return Math.min(.5+t/e*.5,1.5)}function se(t,e){const n=t[0]/t[3],r=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&r>=-e[1]&&r<=e[1]}function ae(e,n,r,i,o,s,a,c,l,u){const h=r.transform,p=i?e.textSizeData:e.iconSizeData,f=t.evaluateSizeForZoom(p,r.transform.zoom),d="globe"===h.projection.name,g=[256/r.width*2+1,256/r.height*2+1],m=i?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;m.clear();let y=null;d&&(y=i?e.text.globeExtVertexArray:e.icon.globeExtVertexArray);const _=e.lineVertexArray,v=i?e.text.placedSymbolArray:e.icon.placedSymbolArray,x=r.transform.width/r.transform.height;let b,w=!1;for(let i=0;i<v.length;i++){const d=v.get(i),{numGlyphs:E,writingMode:T}=d;if(T!==t.WritingMode.vertical||w||b===t.WritingMode.horizontal||(w=!0),b=T,(d.hidden||T===t.WritingMode.vertical)&&!w){de(E,m);continue}w=!1;const S=new t.Point(d.tileAnchorX,d.tileAnchorY);let{x:k,y:A,z:M}=h.projection.projectTilePoint(S.x,S.y,u.canonical);if(l){const[t,e,n]=l(S);k+=t,A+=e,M+=n}const I=[k,A,M,1];if(t.transformMat4$1(I,I,n),!se(I,g)){de(E,m);continue}const C=oe(r.transform.cameraToCenterDistance,I[3]),O=t.evaluateSizeForFeature(p,f,d),P=a?O/C:O*C,L=ie(k,A,M,o);if(L[3]<=0){de(E,m);continue}let D={};const R=a?null:l,N=ue(d,P,!1,c,n,o,s,e.glyphOffsetArray,_,m,y,L,S,D,x,R,h.projection,u,a);w=N.useVertical,R&&N.needsFlipping&&(D={}),(N.notEnoughRoom||w||N.needsFlipping&&ue(d,P,!0,c,n,o,s,e.glyphOffsetArray,_,m,y,L,S,D,x,R,h.projection,u,a).notEnoughRoom)&&de(E,m)}i?(e.text.dynamicLayoutVertexBuffer.updateData(m),y&&e.text.globeExtVertexBuffer.updateData(y)):(e.icon.dynamicLayoutVertexBuffer.updateData(m),y&&e.icon.globeExtVertexBuffer.updateData(y))}function ce(t,e,n,r,i,o,s,a,c,l,u,h,p,f,d,g){const{lineStartIndex:m,glyphStartIndex:y,segment:_}=a,v=y+a.numGlyphs,x=m+a.lineLength,b=e.getoffsetX(y),w=e.getoffsetX(v-1),E=fe(t*b,n,r,i,o,s,_,m,x,c,l,u,h,p,!0,f,d,g);if(!E)return null;const T=fe(t*w,n,r,i,o,s,_,m,x,c,l,u,h,p,!0,f,d,g);return T?{first:E,last:T}:null}function le(e,n,r,i){return e===t.WritingMode.horizontal&&Math.abs(i)>Math.abs(r)?{useVertical:!0}:e===t.WritingMode.vertical?i>0?{needsFlipping:!0}:null:n!==Qt.unknown&&function(t,e){return 0===t||Math.abs(e/t)>te}(r,i)?n===Qt.flipRequired?{needsFlipping:!0}:null:r<0?{needsFlipping:!0}:null}function ue(e,n,r,i,o,s,a,c,l,u,h,p,f,d,g,m,y,_,v){const x=n/24,b=e.lineOffsetX*x,w=e.lineOffsetY*x,{lineStartIndex:E,glyphStartIndex:T,numGlyphs:S,segment:k,writingMode:A,flipState:M}=e,I=E+e.lineLength,C=e=>{if(h){const[n,r,i]=e.up,o=u.length;t.updateGlobeVertexNormal(h,o+0,n,r,i),t.updateGlobeVertexNormal(h,o+1,n,r,i),t.updateGlobeVertexNormal(h,o+2,n,r,i),t.updateGlobeVertexNormal(h,o+3,n,r,i)}const[n,r,i]=e.point;t.addDynamicAttributes(u,n,r,i,e.angle)};if(S>1){const t=ce(x,c,b,w,r,p,f,e,l,s,d,m,!1,y,_,v);if(!t)return{notEnoughRoom:!0};if(i&&!r){let[n,r,i]=t.first.point,[o,s,c]=t.last.point;[n,r]=ie(n,r,i,a),[o,s]=ie(o,s,c,a);const l=le(A,M,(o-n)*g,s-r);if(e.flipState=l&&l.needsFlipping?Qt.flipRequired:Qt.flipNotRequired,l)return l}C(t.first);for(let t=T+1;t<T+S-1;t++){const e=fe(x*c.getoffsetX(t),b,w,r,p,f,k,E,I,l,s,d,m,!1,!1,y,_,v);if(!e)return u.length-=4*(t-T),{notEnoughRoom:!0};C(e)}C(t.last)}else{if(i&&!r){const n=ie(f.x,f.y,0,o),r=E+k+1,i=new t.Point(l.getx(r),l.gety(r)),s=ie(i.x,i.y,0,o),a=s[3]>0?s:pe(f,i,n,1,o,void 0,y,_.canonical),c=le(A,M,(a[0]-n[0])*g,a[1]-n[1]);if(e.flipState=c&&c.needsFlipping?Qt.flipRequired:Qt.flipNotRequired,c)return c}const n=fe(x*c.getoffsetX(T),b,w,r,p,f,k,E,I,l,s,d,m,!1,!1,y,_,v);if(!n)return{notEnoughRoom:!0};C(n)}return{}}function he(t,e,n,r,i){const{x:o,y:s,z:a}=r.projectTilePoint(t.x,t.y,e);if(!i)return ie(o,s,a,n);const[c,l,u]=i(t);return ie(o+c,s+l,a+u,n)}function pe(e,n,r,i,o,s,a,c){const l=he(e.sub(n)._unit()._add(e),c,o,a,s);return t.sub(l,r,l),t.normalize(l,l),t.scaleAndAdd(l,r,l,i)}function fe(e,n,r,i,o,s,a,c,l,u,h,p,f,d,g,m,y,_){const v=i?e-n:e+n;let x=v>0?1:-1,b=0;i&&(x*=-1,b=Math.PI),x<0&&(b+=Math.PI);let w=c+a+(x>0?0:1)|0,E=o,T=o,S=0,k=0;const A=Math.abs(v),M=[],I=[];let C=s,O=C;const P=()=>pe(O,C,T,A-S+1,h,f,m,y.canonical);for(;S+k<=A;){if(w+=x,w<c||w>=l)return null;if(T=E,O=C,M.push(T),d&&I.push(O),C=new t.Point(u.getx(w),u.gety(w)),E=p[w],!E){const t=he(C,y.canonical,h,m,f);E=t[3]>0?p[w]=t:P()}S+=k,k=t.distance(T,E)}g&&f&&(p[w]&&(E=P(),k=t.distance(T,E)),p[w]=E);const L=(A-S)/k,D=C.sub(O)._mult(L)._add(O),R=t.sub([],E,T),N=t.scaleAndAdd([],T,R,L);let j=[0,0,1],z=R[0],B=R[1];if(_&&(j=m.upVector(y.canonical,D.x,D.y),0!==j[0]||0!==j[1]||1!==j[2])){const e=[j[2],0,-j[0]],n=t.cross([],j,e);t.normalize(e,e),t.normalize(n,n),z=t.dot(R,e),B=t.dot(R,n)}if(r){const e=t.cross([],j,R);t.normalize(e,e),t.scaleAndAdd(N,N,e,r*x)}const F=b+Math.atan2(B,z);return M.push(N),d&&I.push(D),{point:N,angle:F,path:M,tilePath:I,up:j}}function de(t,e){const n=e.length,r=n+4*t;e.resize(r),e.float32.fill(-1/0,4*n,4*r)}function ge(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t[3]=n[3]*r+n[7]*i+n[15],t}const me=100;class ye{constructor(t,e,n=new Jt(t.width+200,t.height+200,25),r=new Jt(t.width+200,t.height+200,25)){this.transform=t,this.grid=n,this.ignoredGrid=r,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+me,this.screenBottomBoundary=t.height+me,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.fogState=e}placeCollisionBox(t,e,n,r,i,o,s,a){let c=n.projectedAnchorX,l=n.projectedAnchorY,u=n.projectedAnchorZ;const h=n.elevation,p=n.tileID,f=t.getProjection();if(h&&p){const[t,e,r]=f.upVector(p.canonical,n.tileAnchorX,n.tileAnchorY),i=f.upVectorScale(p.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;c+=t*h*i,l+=e*h*i,u+=r*h*i}const d=this.projectAndGetPerspectiveRatio(s,c,l,u,n.tileID,"globe"===f.name||!!h||this.transform.pitch>0,f),g=o*d.perspectiveRatio,m=(n.x1*e+r.x-n.padding)*g+d.point.x,y=(n.y1*e+r.y-n.padding)*g+d.point.y,_=(n.x2*e+r.x+n.padding)*g+d.point.x,v=(n.y2*e+r.y+n.padding)*g+d.point.y,x=d.perspectiveRatio<=.55||d.occluded;return!this.isInsideGrid(m,y,_,v)||!i&&this.grid.hitTest(m,y,_,v,a)||x?{box:[],offscreen:!1,occluded:d.occluded}:{box:[m,y,_,v],offscreen:this.isOffscreen(m,y,_,v),occluded:!1}}placeCollisionCircles(e,n,r,i,o,s,a,c,l,u,h,p,f,d,g){const m=[],y=this.transform.elevation,_=e.getProjection(),v=y?y.getAtTileOffsetFunc(g,this.transform.center.lat,this.transform.worldSize,_):null,x=new t.Point(r.tileAnchorX,r.tileAnchorY);let{x:b,y:w,z:E}=_.projectTilePoint(x.x,x.y,g.canonical);if(v){const[t,e,n]=v(x);b+=t,w+=e,E+=n}const T="globe"===_.name,S=this.projectAndGetPerspectiveRatio(a,b,w,E,g,T||!!y||this.transform.pitch>0,_),{perspectiveRatio:k}=S,A=(h?s/k:s*k)/t.ONE_EM,M=ie(b,w,E,c),I=S.signedDistanceFromCamera>0?ce(A,o,r.lineOffsetX*A,r.lineOffsetY*A,!1,M,x,r,i,c,{},y&&!h?v:null,h&&!!y,_,g,h):null;let C=!1,O=!1,P=!0;if(I&&!S.occluded){const e=.5*f*k+d,r=new t.Point(-100,-100),i=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),o=new Kt,{first:s,last:a}=I,c=s.path.length;let h=[];for(let t=c-1;t>=1;t--)h.push(s.path[t]);for(let t=1;t<a.path.length;t++)h.push(a.path[t]);const g=2.5*e;l&&(h=h.map((([t,e,n],r)=>(v&&!T&&(n=v(r<c-1?s.tilePath[c-1-r]:a.tilePath[r-c+2])[2]),ie(t,e,n,l)))),h.some((t=>t[3]<=0))&&(h=[]));let y=[];if(h.length>0){let e=1/0,n=-1/0,o=1/0,s=-1/0;for(const t of h)e=Math.min(e,t[0]),o=Math.min(o,t[1]),n=Math.max(n,t[0]),s=Math.max(s,t[1]);n>=r.x&&e<=i.x&&s>=r.y&&o<=i.y&&(y=[h.map((e=>new t.Point(e[0],e[1])))],(e<r.x||n>i.x||o<r.y||s>i.y)&&(y=t.clipLine(y,r.x,r.y,i.x,i.y)))}for(const t of y){o.reset(t,.25*e);let r=0;r=o.length<=.5*e?1:Math.ceil(o.paddedLength/g)+1;for(let t=0;t<r;t++){const i=t/Math.max(r-1,1),s=o.lerp(i),a=s.x+me,c=s.y+me;m.push(a,c,e,0);const l=a-e,h=c-e,f=a+e,d=c+e;if(P=P&&this.isOffscreen(l,h,f,d),O=O||this.isInsideGrid(l,h,f,d),!n&&this.grid.hitTestCircle(a,c,e,p)&&(C=!0,!u))return{circles:[],offscreen:!1,collisionDetected:C,occluded:!1}}}}return{circles:!u&&C||!O?[]:m,offscreen:P,collisionDetected:C,occluded:S.occluded}}queryRenderedSymbols(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const n=[];let r=1/0,i=1/0,o=-1/0,s=-1/0;for(const a of e){const e=new t.Point(a.x+me,a.y+me);r=Math.min(r,e.x),i=Math.min(i,e.y),o=Math.max(o,e.x),s=Math.max(s,e.y),n.push(e)}const a=this.grid.query(r,i,o,s).concat(this.ignoredGrid.query(r,i,o,s)),c={},l={};for(const e of a){const r=e.key;if(void 0===c[r.bucketInstanceId]&&(c[r.bucketInstanceId]={}),c[r.bucketInstanceId][r.featureIndex])continue;const i=[new t.Point(e.x1,e.y1),new t.Point(e.x2,e.y1),new t.Point(e.x2,e.y2),new t.Point(e.x1,e.y2)];t.polygonIntersectsPolygon(n,i)&&(c[r.bucketInstanceId][r.featureIndex]=!0,void 0===l[r.bucketInstanceId]&&(l[r.bucketInstanceId]=[]),l[r.bucketInstanceId].push(r.featureIndex))}return l}insertCollisionBox(t,e,n,r,i){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:r,collisionGroupID:i},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,e,n,r,i){const o=e?this.ignoredGrid:this.grid,s={bucketInstanceId:n,featureIndex:r,collisionGroupID:i};for(let e=0;e<t.length;e+=4)o.insertCircle(s,t[e],t[e+1],t[e+2])}projectAndGetPerspectiveRatio(e,n,r,i,o,s,a){const c=[n,r,i,1];let l=!1;if(i||this.transform.pitch>0){if(t.transformMat4$1(c,c,e),this.fogState&&o&&"globe"!==a.name){const e=function(e,n,r,i,o,s){const a=s.calculateFogTileMatrix(o),c=[n,r,i];return t.transformMat4(c,c,a),k(e,c,s.pitch,s._fov)}(this.fogState,n,r,i,o.toUnwrapped(),this.transform);l=e>.9}}else ge(c,c,e);const u=c[3];return{point:new t.Point((c[0]/u+1)/2*this.transform.width+me,(-c[1]/u+1)/2*this.transform.height+me),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(a)/u*.5,1.5),signedDistanceFromCamera:u,occluded:s&&c[2]>u||l}}isOffscreen(t,e,n,r){return n<me||t>=this.screenRightBoundary||r<me||e>this.screenBottomBoundary}isInsideGrid(t,e,n,r){return n>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary}getViewportMatrix(){const e=t.identity([]);return t.translate(e,e,[-100,-100,0]),e}}function _e(e,n,r){const i=n.createTileMatrix(e,e.worldSize,r.toUnwrapped());return t.multiply(new Float32Array(16),e.projMatrix,i)}function ve(t,e,n){if(e.projection.name===n.projection.name)return t.projMatrix;const r=n.clone();return r.setProjection(e.projection),_e(r,e.getProjection(),t)}function xe(t,e,n){return e.name===n.projection.name?t.projMatrix:_e(n,e,t)}class be{constructor(t,e,n,r){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):r&&n?1:0,this.placed=n}isHidden(){return 0===this.opacity&&!this.placed}}class we{constructor(t,e,n,r,i,o=!1){this.text=new be(t?t.text:null,e,n,i),this.icon=new be(t?t.icon:null,e,r,i),this.clipped=o}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ee{constructor(t,e,n,r=!1){this.text=t,this.icon=e,this.skipFade=n,this.clipped=r}}class Te{constructor(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]}}class Se{constructor(t,e,n,r,i){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i}}class ke{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:t=>t.collisionGroupID===e}}return this.collisionGroups[t]}}function Ae(e,n,r,i,o){const{horizontalAlign:s,verticalAlign:a}=t.getAnchorAlignment(e),c=-(s-.5)*n,l=-(a-.5)*r,u=t.evaluateVariableOffset(e,i);return new t.Point(c+u[0]*o,l+u[1]*o)}function Me(e,n,r,i,o){const s=new t.Point(e,n);return r&&s._rotate(i?o:-o),s}class Ie{constructor(t,e,n,r,i){this.transform=t.clone(),this.projection=t.projection.name,this.collisionIndex=new ye(this.transform,i),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new ke(n),this.collisionCircleArrays={},this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(e,n,r,i){const o=r.getBucket(n),s=r.latestFeatureIndex;if(!o||!s||n.id!==o.layerIds[0])return;const a=o.layers[0].layout,c=r.collisionBoxArray,l=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),u=r.tileSize/t.EXTENT,h=r.tileID.toUnwrapped();this.transform.setProjection(o.projection);const p=(f=r.tileID,d=o.getProjection(),g=this.transform,d.name===this.projection?g.calculateProjMatrix(f.toUnwrapped()):_e(g,d,f));var f,d,g;const m="map"===a.get("text-pitch-alignment"),y="map"===a.get("text-rotation-alignment");n.compileFilter();const _=n.dynamicFilter(),v=n.dynamicFilterNeedsFeature(),x=this.transform.calculatePixelsToTileUnitsMatrix(r),b=ne(p,r.tileID.canonical,m,y,this.transform,o.getProjection(),x);let w=null;if(m){const e=re(p,r.tileID.canonical,m,y,this.transform,o.getProjection(),x);w=t.multiply([],this.transform.labelPlaneMatrix,e)}let E=null;_&&r.latestFeatureIndex&&(E={unwrappedTileID:h,dynamicFilter:_,dynamicFilterNeedsFeature:v,featureIndex:r.latestFeatureIndex}),this.retainedQueryData[o.bucketInstanceId]=new Se(o.bucketInstanceId,s,o.sourceLayerIndex,o.index,r.tileID);const T={bucket:o,layout:a,posMatrix:p,textLabelPlaneMatrix:b,labelToScreenMatrix:w,clippingData:E,scale:l,textPixelRatio:u,holdingForFade:r.holdingForFade(),collisionBoxArray:c,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:t.evaluateSizeForZoom(o.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(i)for(const t of o.sortKeyRanges){const{sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:i}=t;e.push({sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:i,parameters:T})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:T})}attemptAnchorPlacement(t,e,n,r,i,o,s,a,c,l,u,h,p,f,d,g,m,y){const{textOffset0:_,textOffset1:v,crossTileID:x}=h,b=[_,v],w=Ae(t,n,r,b,i),E=this.collisionIndex.placeCollisionBox(f,i,e,Me(w.x,w.y,o,s,this.transform.angle),u,a,c,l.predicate);if(g){const t=f.getSymbolInstanceIconSize(y,this.transform.zoom,h.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(f,t,g,Me(w.x,w.y,o,s,this.transform.angle),u,a,c,l.predicate).box.length)return}if(E.box.length>0){let e;return this.prevPlacement&&this.prevPlacement.variableOffsets[x]&&this.prevPlacement.placements[x]&&this.prevPlacement.placements[x].text&&(e=this.prevPlacement.variableOffsets[x].anchor),this.variableOffsets[x]={textOffset:b,width:n,height:r,anchor:t,textScale:i,prevAnchor:e},this.markUsedJustification(f,t,h,d),f.allowVerticalPlacement&&(this.markUsedOrientation(f,d,h),this.placedOrientations[x]=d),{shift:w,placedGlyphBoxes:E}}}placeLayerBucketPart(e,n,r,i){const{bucket:o,layout:s,posMatrix:a,textLabelPlaneMatrix:c,labelToScreenMatrix:l,clippingData:u,textPixelRatio:h,holdingForFade:p,collisionBoxArray:f,partiallyEvaluatedTextSize:d,partiallyEvaluatedIconSize:g,collisionGroup:m}=e.parameters,y=s.get("text-optional"),_=s.get("icon-optional"),v=s.get("text-allow-overlap"),x=s.get("icon-allow-overlap"),b="map"===s.get("text-rotation-alignment"),w="map"===s.get("text-pitch-alignment"),E="none"!==s.get("icon-text-fit"),T="viewport-y"===s.get("symbol-z-order");this.transform.setProjection(o.projection);let S=v&&(x||!o.hasIconData()||_),k=x&&(v||!o.hasTextData()||y);!o.collisionArrays&&f&&o.deserializeCollisionBoxes(f),r&&i&&o.updateCollisionDebugBuffers(this.transform.zoom,f);const A=(e,i,f)=>{const{crossTileID:T,numVerticalGlyphVertices:A}=e;if(u){const r={zoom:this.transform.zoom,pitch:this.transform.pitch};let i=null;if(u.dynamicFilterNeedsFeature){const t=this.retainedQueryData[o.bucketInstanceId];i=u.featureIndex.loadFeature({featureIndex:e.featureIndex,bucketIndex:t.bucketIndex,sourceLayerIndex:t.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,u.dynamicFilter)(r,i,this.retainedQueryData[o.bucketInstanceId].tileID.canonical,new t.Point(e.tileAnchorX,e.tileAnchorY),this.transform.calculateDistanceTileData(u.unwrappedTileID)))return this.placements[T]=new Ee(!1,!1,!1,!0),void n.add(T)}if(n.has(T))return;if(p)return void(this.placements[T]=new Ee(!1,!1,!1));let M=!1,I=!1,C=!0,O=!1,P=!1,L=null,D={box:null,offscreen:null,occluded:null},R={box:null,offscreen:null,occluded:null},N=null,j=null,z=null,B=0,F=0,U=0;f.textFeatureIndex?B=f.textFeatureIndex:e.useRuntimeCollisionCircles&&(B=e.featureIndex),f.verticalTextFeatureIndex&&(F=f.verticalTextFeatureIndex);const V=t=>{t.tileID=this.retainedQueryData[o.bucketInstanceId].tileID;const e=this.transform.elevation;(e||t.elevation)&&(t.elevation=e?e.getAtTileOffset(t.tileID,t.tileAnchorX,t.tileAnchorY):0)},q=f.textBox;if(q){V(q);const n=n=>{let r=t.WritingMode.horizontal;if(o.allowVerticalPlacement&&!n&&this.prevPlacement){const t=this.prevPlacement.placedOrientations[T];t&&(this.placedOrientations[T]=t,r=t,this.markUsedOrientation(o,r,e))}return r},r=(e,n)=>{if(o.allowVerticalPlacement&&A>0&&f.verticalTextBox){for(const r of o.writingModes)if(r===t.WritingMode.vertical?(D=n(),R=D):D=e(),D&&D.box&&D.box.length)break}else D=e()};if(s.get("text-variable-anchor")){let c=s.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[T]){const t=this.prevPlacement.variableOffsets[T];c.indexOf(t.anchor)>0&&(c=c.filter((e=>e!==t.anchor)),c.unshift(t.anchor))}const l=(t,n,r)=>{const s=o.getSymbolInstanceTextSize(d,e,this.transform.zoom,i),l=(t.x2-t.x1)*s+2*t.padding,u=(t.y2-t.y1)*s+2*t.padding,p=E&&!x?n:null;p&&V(p);let f={box:[],offscreen:!1,occluded:!1};const y=v?2*c.length:c.length;for(let n=0;n<y;++n){const y=this.attemptAnchorPlacement(c[n%c.length],t,l,u,s,b,w,h,a,m,n>=c.length,e,i,o,r,p,d,g);if(y&&(f=y.placedGlyphBoxes,f&&f.box&&f.box.length)){M=!0,L=y.shift;break}}return f};r((()=>l(q,f.iconBox,t.WritingMode.horizontal)),(()=>{const e=f.verticalTextBox;return e&&V(e),o.allowVerticalPlacement&&!(D&&D.box&&D.box.length)&&A>0&&e?l(e,f.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null,occluded:null}})),D&&(M=D.box,C=D.offscreen,O=D.occluded);const u=n(!(!D||!D.box));if(!M&&this.prevPlacement){const t=this.prevPlacement.variableOffsets[T];t&&(this.variableOffsets[T]=t,this.markUsedJustification(o,t.anchor,e,u))}}else{const s=(n,r)=>{const s=o.getSymbolInstanceTextSize(d,e,this.transform.zoom,i),c=this.collisionIndex.placeCollisionBox(o,s,n,new t.Point(0,0),v,h,a,m.predicate);return c&&c.box&&c.box.length&&(this.markUsedOrientation(o,r,e),this.placedOrientations[T]=r),c};r((()=>s(q,t.WritingMode.horizontal)),(()=>{const e=f.verticalTextBox;return o.allowVerticalPlacement&&A>0&&e?(V(e),s(e,t.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}})),n(!!(D&&D.box&&D.box.length))}}if(N=D,M=N&&N.box&&N.box.length>0,C=N&&N.offscreen,O=N&&N.occluded,e.useRuntimeCollisionCircles){const n=o.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex>=0?e.centerJustifiedTextSymbolIndex:e.verticalPlacedTextSymbolIndex),i=t.evaluateSizeForFeature(o.textSizeData,d,n),u=s.get("text-padding");j=this.collisionIndex.placeCollisionCircles(o,v,n,o.lineVertexArray,o.glyphOffsetArray,i,a,c,l,r,w,m.predicate,e.collisionCircleDiameter*i/t.ONE_EM,u,this.retainedQueryData[o.bucketInstanceId].tileID),M=v||j.circles.length>0&&!j.collisionDetected,C=C&&j.offscreen,O=j.occluded}if(f.iconFeatureIndex&&(U=f.iconFeatureIndex),f.iconBox){const n=n=>{V(n);const r=E&&L?Me(L.x,L.y,b,w,this.transform.angle):new t.Point(0,0),i=o.getSymbolInstanceIconSize(g,this.transform.zoom,e.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(o,i,n,r,x,h,a,m.predicate)};R&&R.box&&R.box.length&&f.verticalIconBox?(z=n(f.verticalIconBox),I=z.box.length>0):(z=n(f.iconBox),I=z.box.length>0),C=C&&z.offscreen,P=z.occluded}const W=y||0===e.numHorizontalGlyphVertices&&0===A,G=_||0===e.numIconVertices;if(W||G?G?W||(I=I&&M):M=I&&M:I=M=I&&M,M&&N&&N.box&&this.collisionIndex.insertCollisionBox(N.box,s.get("text-ignore-placement"),o.bucketInstanceId,R&&R.box&&F?F:B,m.ID),I&&z&&this.collisionIndex.insertCollisionBox(z.box,s.get("icon-ignore-placement"),o.bucketInstanceId,U,m.ID),j&&(M&&this.collisionIndex.insertCollisionCircles(j.circles,s.get("text-ignore-placement"),o.bucketInstanceId,B,m.ID),r)){const t=o.bucketInstanceId;let e=this.collisionCircleArrays[t];void 0===e&&(e=this.collisionCircleArrays[t]=new Te);for(let t=0;t<j.circles.length;t+=4)e.circles.push(j.circles[t+0]),e.circles.push(j.circles[t+1]),e.circles.push(j.circles[t+2]),e.circles.push(j.collisionDetected?1:0)}const $="globe"!==o.projection.name;S=S&&($||!O),k=k&&($||!P),this.placements[T]=new Ee(M||S,I||k,C||o.justReloaded),n.add(T)};if(T){const t=o.getSortedSymbolIndexes(this.transform.angle);for(let e=t.length-1;e>=0;--e){const n=t[e];A(o.symbolInstances.get(n),n,o.collisionArrays[n])}}else for(let t=e.symbolInstanceStart;t<e.symbolInstanceEnd;t++)A(o.symbolInstances.get(t),t,o.collisionArrays[t]);if(r&&o.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[o.bucketInstanceId];t.invert(e.invProjMatrix,a),e.viewportMatrix=this.collisionIndex.getViewportMatrix()}o.justReloaded=!1}markUsedJustification(e,n,r,i){const{leftJustifiedTextSymbolIndex:o,centerJustifiedTextSymbolIndex:s,rightJustifiedTextSymbolIndex:a,verticalPlacedTextSymbolIndex:c,crossTileID:l}=r,u=t.getAnchorJustification(n),h=i===t.WritingMode.vertical?c:"left"===u?o:"center"===u?s:"right"===u?a:-1;o>=0&&(e.text.placedSymbolArray.get(o).crossTileID=h>=0&&o!==h?0:l),s>=0&&(e.text.placedSymbolArray.get(s).crossTileID=h>=0&&s!==h?0:l),a>=0&&(e.text.placedSymbolArray.get(a).crossTileID=h>=0&&a!==h?0:l),c>=0&&(e.text.placedSymbolArray.get(c).crossTileID=h>=0&&c!==h?0:l)}markUsedOrientation(e,n,r){const i=n===t.WritingMode.horizontal||n===t.WritingMode.horizontalOnly?n:0,o=n===t.WritingMode.vertical?n:0,{leftJustifiedTextSymbolIndex:s,centerJustifiedTextSymbolIndex:a,rightJustifiedTextSymbolIndex:c,verticalPlacedTextSymbolIndex:l}=r,u=e.text.placedSymbolArray;s>=0&&(u.get(s).placedOrientation=i),a>=0&&(u.get(a).placedOrientation=i),c>=0&&(u.get(c).placedOrientation=i),l>=0&&(u.get(l).placedOrientation=o)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const e=this.prevPlacement;let n=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;const r=e?e.symbolFadeChange(t):1,i=e?e.opacities:{},o=e?e.variableOffsets:{},s=e?e.placedOrientations:{};for(const t in this.placements){const e=this.placements[t],o=i[t];o?(this.opacities[t]=new we(o,r,e.text,e.icon,null,e.clipped),n=n||e.text!==o.text.placed||e.icon!==o.icon.placed):(this.opacities[t]=new we(null,r,e.text,e.icon,e.skipFade,e.clipped),n=n||e.text||e.icon)}for(const t in i){const e=i[t];if(!this.opacities[t]){const i=new we(e,r,!1,!1);i.isHidden()||(this.opacities[t]=i,n=n||e.text.placed||e.icon.placed)}}for(const t in o)this.variableOffsets[t]||!this.opacities[t]||this.opacities[t].isHidden()||(this.variableOffsets[t]=o[t]);for(const t in s)this.placedOrientations[t]||!this.opacities[t]||this.opacities[t].isHidden()||(this.placedOrientations[t]=s[t]);n?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)}updateLayerOpacities(t,e){const n=new Set;for(const r of e){const e=r.getBucket(t);e&&r.latestFeatureIndex&&t.id===e.layerIds[0]&&this.updateBucketOpacities(e,n,r.collisionBoxArray)}}updateBucketOpacities(e,n,r){e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const i=e.layers[0].layout,o=!!e.layers[0].dynamicFilter(),s=new we(null,0,!1,!1,!0),a=i.get("text-allow-overlap"),c=i.get("icon-allow-overlap"),l=i.get("text-variable-anchor"),u="map"===i.get("text-rotation-alignment"),h="map"===i.get("text-pitch-alignment"),p="none"!==i.get("icon-text-fit"),f=new we(null,0,a&&(c||!e.hasIconData()||i.get("icon-optional")),c&&(a||!e.hasTextData()||i.get("text-optional")),!0);!e.collisionArrays&&r&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(r);const d=(t,e,n)=>{for(let r=0;r<e/4;r++)t.opacityVertexArray.emplaceBack(n)};let g=0;for(let r=0;r<e.symbolInstances.length;r++){const i=e.symbolInstances.get(r),{numHorizontalGlyphVertices:a,numVerticalGlyphVertices:c,crossTileID:m,numIconVertices:y}=i,_=n.has(m);let v=this.opacities[m];_?v=s:v||(v=f,this.opacities[m]=v),n.add(m);const x=a>0||c>0,b=y>0,w=this.placedOrientations[m],E=w===t.WritingMode.vertical,T=w===t.WritingMode.horizontal||w===t.WritingMode.horizontalOnly;if(!x&&!b||v.isHidden()||g++,x){const t=ze(v.text);d(e.text,a,E?Be:t),d(e.text,c,T?Be:t);const n=v.text.isHidden(),{leftJustifiedTextSymbolIndex:r,centerJustifiedTextSymbolIndex:o,rightJustifiedTextSymbolIndex:s,verticalPlacedTextSymbolIndex:l}=i,u=e.text.placedSymbolArray,h=n||E?1:0;r>=0&&(u.get(r).hidden=h),o>=0&&(u.get(o).hidden=h),s>=0&&(u.get(s).hidden=h),l>=0&&(u.get(l).hidden=n||T?1:0);const p=this.variableOffsets[m];p&&this.markUsedJustification(e,p.anchor,i,w);const f=this.placedOrientations[m];f&&(this.markUsedJustification(e,"left",i,f),this.markUsedOrientation(e,f,i))}if(b){const t=ze(v.icon),{placedIconSymbolIndex:n,verticalPlacedIconSymbolIndex:r}=i,o=e.icon.placedSymbolArray,s=v.icon.isHidden()?1:0;n>=0&&(d(e.icon,y,E?Be:t),o.get(n).hidden=s),r>=0&&(d(e.icon,i.numVerticalIconVertices,T?Be:t),o.get(r).hidden=s)}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const n=e.collisionArrays[r];if(n){let r=new t.Point(0,0),i=!0;if(n.textBox||n.verticalTextBox){if(l){const t=this.variableOffsets[m];t?(r=Ae(t.anchor,t.width,t.height,t.textOffset,t.textScale),u&&r._rotate(h?this.transform.angle:-this.transform.angle)):i=!1}o&&(i=!v.clipped),n.textBox&&Ce(e.textCollisionBox.collisionVertexArray,v.text.placed,!i||E,r.x,r.y),n.verticalTextBox&&Ce(e.textCollisionBox.collisionVertexArray,v.text.placed,!i||T,r.x,r.y)}const s=i&&Boolean(!T&&n.verticalIconBox);n.iconBox&&Ce(e.iconCollisionBox.collisionVertexArray,v.icon.placed,s,p?r.x:0,p?r.y:0),n.verticalIconBox&&Ce(e.iconCollisionBox.collisionVertexArray,v.icon.placed,!s,p?r.x:0,p?r.y:0)}}}if(e.fullyClipped=0===g,e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=t.invProjMatrix,e.placementViewportMatrix=t.viewportMatrix,e.collisionCircleArray=t.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,e){const n=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*n>t}setStale(){this.stale=!0}}function Ce(t,e,n,r,i){t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0)}const Oe=Math.pow(2,25),Pe=Math.pow(2,24),Le=Math.pow(2,17),De=Math.pow(2,16),Re=Math.pow(2,9),Ne=Math.pow(2,8),je=Math.pow(2,1);function ze(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;const e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*Oe+e*Pe+n*Le+e*De+n*Re+e*Ne+n*je+e}const Be=0;class Fe{constructor(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(t,e,n,r,i){const o=this._bucketParts;for(;this._currentTileIndex<t.length;)if(e.getBucketParts(o,r,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort(((t,e)=>t.sortKey-e.sortKey)));this._currentPartIndex<o.length;){const t=o[this._currentPartIndex];if(e.placeLayerBucketPart(t,this._seenCrossTileIDs,n,0===t.symbolInstanceStart),this._currentPartIndex++,i())return!0}return!1}}class Ue{constructor(t,e,n,r,i,o,s,a){this.placement=new Ie(t,i,o,s,a),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1}isDone(){return this._done}continuePlacement(e,n,r){const i=t.exported.now(),o=()=>{const e=t.exported.now()-i;return!this._forceFullPlacement&&e>2};for(;this._currentPlacementIndex>=0;){const t=n[e[this._currentPlacementIndex]],i=this.placement.collisionIndex.transform.zoom;if("symbol"===t.type&&(!t.minzoom||t.minzoom<=i)&&(!t.maxzoom||t.maxzoom>i)){if(this._inProgressLayer||(this._inProgressLayer=new Fe(t)),this._inProgressLayer.continuePlacement(r[t.source],this.placement,this._showCollisionBoxes,t,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const Ve=512/t.EXTENT/2;class qe{constructor(e,n,r){this.tileID=e,this.bucketInstanceId=r,this.index=new t.KDBush(n.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const i=e.canonical.x*t.EXTENT,o=e.canonical.y*t.EXTENT;for(let t=0;t<n.length;t++){const{key:e,crossTileID:r,tileAnchorX:s,tileAnchorY:a}=n.get(t),c=Math.floor((i+s)*Ve),l=Math.floor((o+a)*Ve);this.index.add(c,l),this.keys.push(e),this.crossTileIDs.push(r)}this.index.finish()}findMatches(e,n,r){const i=this.tileID.canonical.z<n.canonical.z?1:Math.pow(2,this.tileID.canonical.z-n.canonical.z),o=Ve/Math.pow(2,n.canonical.z-this.tileID.canonical.z),s=n.canonical.x*t.EXTENT,a=n.canonical.y*t.EXTENT;for(let t=0;t<e.length;t++){const n=e.get(t);if(n.crossTileID)continue;const{key:c,tileAnchorX:l,tileAnchorY:u}=n,h=Math.floor((s+l)*o),p=Math.floor((a+u)*o),f=this.index.range(h-i,p-i,h+i,p+i);for(const t of f){const e=this.crossTileIDs[t];if(this.keys[t]===c&&!r.has(e)){r.add(e),n.crossTileID=e;break}}}}}class We{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ge{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const e=Math.round((t-this.lng)/360);if(0!==e)for(const t in this.indexes){const n=this.indexes[t],r={};for(const t in n){const i=n[t];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+e),r[i.tileID.key]=i}this.indexes[t]=r}this.lng=t}addBucket(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let t=0;t<e.symbolInstances.length;t++)e.symbolInstances.get(t).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]=new Set);const r=this.usedCrossTileIDs[t.overscaledZ];for(const n in this.indexes){const i=this.indexes[n];if(Number(n)>t.overscaledZ)for(const n in i){const o=i[n];o.tileID.isChildOf(t)&&o.findMatches(e.symbolInstances,t,r)}else{const o=i[t.scaledTo(Number(n)).key];o&&o.findMatches(e.symbolInstances,t,r)}}for(let t=0;t<e.symbolInstances.length;t++){const i=e.symbolInstances.get(t);i.crossTileID||(i.crossTileID=n.generate(),r.add(i.crossTileID))}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new qe(t,e.symbolInstances,e.bucketInstanceId),!0}removeBucketCrossTileIDs(t,e){for(const n of e.crossTileIDs)this.usedCrossTileIDs[t].delete(n)}removeStaleBuckets(t){let e=!1;for(const n in this.indexes){const r=this.indexes[n];for(const i in r)t[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],e=!0)}return e}}class $e{constructor(){this.layerIndexes={},this.crossTileIDs=new We,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,e,n,r){let i=this.layerIndexes[t.id];void 0===i&&(i=this.layerIndexes[t.id]=new Ge);let o=!1;const s={};"globe"!==r.name&&i.handleWrapJump(n);for(const n of e){const e=n.getBucket(t);e&&t.id===e.layerIds[0]&&(e.bucketInstanceId||(e.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(n.tileID,e,this.crossTileIDs)&&(o=!0),s[e.bucketInstanceId]=!0)}return i.removeStaleBuckets(s)&&(o=!0),o}pruneUnusedLayers(t){const e={};t.forEach((t=>{e[t]=!0}));for(const t in this.layerIndexes)e[t]||delete this.layerIndexes[t]}}const He=(e,n)=>t.emitValidationErrors(e,n&&n.filter((t=>"source.canvas"!==t.identifier))),Ze=t.pick(qt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Ye=t.pick(qt,["setCenter","setZoom","setBearing","setPitch"]),Xe={version:8,layers:[],sources:{}},Ke={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Je extends t.Evented{constructor(e,n={}){super(),this.map=e,this.dispatcher=new C(Ft(),this),this.imageManager=new b,this.imageManager.setEventedParent(this),this.glyphManager=new t.GlyphManager(e._requestManager,n.localFontFamily?t.LocalGlyphMode.all:n.localIdeographFontFamily?t.LocalGlyphMode.ideographs:t.LocalGlyphMode.none,n.localFontFamily||n.localIdeographFontFamily),this.crossTileSymbolIndex=new $e,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());const r=this;this._rtlTextPluginCallback=Je.registerForPluginStateChange((e=>{r.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},((e,n)=>{if(t.triggerPluginCompletionEvent(e),n&&n.every((t=>t)))for(const t in r._sourceCaches){const e=r._sourceCaches[t],n=e.getSource().type;"vector"!==n&&"geojson"!==n||e.reload()}}))})),this.on("data",(t=>{if("source"!==t.dataType||"metadata"!==t.sourceDataType)return;const e=this.getSource(t.sourceId);if(e&&e.vectorLayerIds)for(const t in this._layers){const n=this._layers[t];n.source===e.id&&this._validateLayer(n)}}))}loadURL(e,n={}){this.fire(new t.Event("dataloading",{dataType:"style"}));const r="boolean"==typeof n.validate?n.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,n.accessToken);const i=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(i,((e,n)=>{this._request=null,e?this.fire(new t.ErrorEvent(e)):n&&this._load(n,r)}))}loadJSON(e,n={}){this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.exported.frame((()=>{this._request=null,this._load(e,!1!==n.validate)}))}loadEmpty(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(Xe,!1)}_updateLayerCount(t,e){const n=e?1:-1;t.is3D()&&(this._num3DLayers+=n),"circle"===t.type&&(this._numCircleLayers+=n),"symbol"===t.type&&(this._numSymbolLayers+=n)}_load(e,n){if(n&&He(this,t.validateStyle(e)))return;this._loaded=!0,this.stylesheet=t.clone$1(e),this._updateMapProjection();for(const t in e.sources)this.addSource(t,e.sources[t],{validate:!1});this._changed=!1,e.sprite?this._loadSprite(e.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(e.glyphs);const r=Vt(this.stylesheet.layers);this._order=r.map((t=>t.id)),this._layers={},this._serializedLayers={};for(const e of r){const n=t.createStyleLayer(e);n.setEventedParent(this,{layer:{id:n.id}}),this._layers[n.id]=n,this._serializedLayers[n.id]=n.serialize(),this._updateLayerCount(n,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new E(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(t){t?this.stylesheet.projection=t:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(e){this._spriteRequest=function(e,n,r){let i,o,s;const a=t.exported.devicePixelRatio>1?"@2x":"";let c=t.getJSON(n.transformRequest(n.normalizeSpriteURL(e,a,".json"),t.ResourceType.SpriteJSON),((t,e)=>{c=null,s||(s=t,i=e,u())})),l=t.getImage(n.transformRequest(n.normalizeSpriteURL(e,a,".png"),t.ResourceType.SpriteImage),((t,e)=>{l=null,s||(s=t,o=e,u())}));function u(){if(s)r(s);else if(i&&o){const e=t.exported.getImageData(o),n={};for(const r in i){const{width:o,height:s,x:a,y:c,sdf:l,pixelRatio:u,stretchX:h,stretchY:p,content:f}=i[r],d=new t.RGBAImage({width:o,height:s});t.RGBAImage.copy(e,d,{x:a,y:c},{x:0,y:0},{width:o,height:s}),n[r]={data:d,pixelRatio:u,sdf:l,stretchX:h,stretchY:p,content:f}}r(null,n)}}return{cancel(){c&&(c.cancel(),c=null),l&&(l.cancel(),l=null)}}}(e,this.map._requestManager,((e,n)=>{if(this._spriteRequest=null,e)this.fire(new t.ErrorEvent(e));else if(n)for(const t in n)this.imageManager.addImage(t,n[t]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new t.Event("data",{dataType:"style"}))}))}_validateLayer(e){const n=this.getSource(e.source);if(!n)return;const r=e.sourceLayer;r&&("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(r))&&this.fire(new t.ErrorEvent(new Error(`Source layer "${r}" does not exist on source "${n.id}" as specified by style layer "${e.id}"`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const t in this._sourceCaches)if(!this._sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(t){const e=[];for(const n of t){const t=this._layers[n];"custom"!==t.type&&e.push(t.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;if(this.fog&&this.fog.hasTransition())return!0;for(const t in this._sourceCaches)if(this._sourceCaches[t].hasTransition())return!0;for(const t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(t){return!!this.terrain&&("function"==typeof t.isLayerDraped?t.isLayerDraped():Ke[t.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(e){if(!this._loaded)return;const n=this._changed;if(this._changed){const t=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);(t.length||n.length)&&this._updateWorkerLayers(t,n);for(const t in this._updatedSources){const e=this._updatedSources[t];"reload"===e?this._reloadSource(t):"clear"===e&&this._clearSource(t)}this._updateTilesForChangedImages();for(const t in this._updatedPaintProps)this._layers[t].updateTransitions(e);this.light.updateTransitions(e),this.fog&&this.fog.updateTransitions(e),this._resetUpdates()}const r={};for(const t in this._sourceCaches){const e=this._sourceCaches[t];r[t]=e.used,e.used=!1}for(const t of this._order){const n=this._layers[t];if(n.recalculate(e,this._availableImages),!n.isHidden(e.zoom)){const t=this._getLayerSourceCache(n);t&&(t.used=!0)}const r=this.map.painter;if(r){const t=n.getProgramIds();if(!t)continue;const i=n.getProgramConfiguration(e.zoom);for(const e of t)r.useProgram(e,i)}}for(const e in r){const n=this._sourceCaches[e];r[e]!==n.used&&n.getSource().fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:n.getSource().id}))}this.light.recalculate(e),this.terrain&&this.terrain.recalculate(e),this.fog&&this.fog.recalculate(e),this.z=e.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),n&&this.fire(new t.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const e in this._sourceCaches)this._sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateWorkerLayers(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(n){if(this._checkLoaded(),He(this,t.validateStyle(n)))return!1;(n=t.clone$1(n)).layers=Vt(n.layers);const r=function(t,n){if(!t)return[{command:qt.setStyle,args:[n]}];let r=[];try{if(!e(t.version,n.version))return[{command:qt.setStyle,args:[n]}];e(t.center,n.center)||r.push({command:qt.setCenter,args:[n.center]}),e(t.zoom,n.zoom)||r.push({command:qt.setZoom,args:[n.zoom]}),e(t.bearing,n.bearing)||r.push({command:qt.setBearing,args:[n.bearing]}),e(t.pitch,n.pitch)||r.push({command:qt.setPitch,args:[n.pitch]}),e(t.sprite,n.sprite)||r.push({command:qt.setSprite,args:[n.sprite]}),e(t.glyphs,n.glyphs)||r.push({command:qt.setGlyphs,args:[n.glyphs]}),e(t.transition,n.transition)||r.push({command:qt.setTransition,args:[n.transition]}),e(t.light,n.light)||r.push({command:qt.setLight,args:[n.light]}),e(t.fog,n.fog)||r.push({command:qt.setFog,args:[n.fog]}),e(t.projection,n.projection)||r.push({command:qt.setProjection,args:[n.projection]});const i={},o=[];!function(t,n,r,i){let o;for(o in n=n||{},t=t||{})t.hasOwnProperty(o)&&(n.hasOwnProperty(o)||Gt(o,r,i));for(o in n){if(!n.hasOwnProperty(o))continue;const s=n[o];t.hasOwnProperty(o)?e(t[o],s)||("geojson"===t[o].type&&"geojson"===s.type&&Ht(t,n,o)?r.push({command:qt.setGeoJSONSourceData,args:[o,s.data]}):$t(o,n,r,i)):Wt(o,n,r)}}(t.sources,n.sources,o,i);const s=[];t.layers&&t.layers.forEach((t=>{t.source&&i[t.source]?r.push({command:qt.removeLayer,args:[t.id]}):s.push(t)}));let a=t.terrain;a&&i[a.source]&&(r.push({command:qt.setTerrain,args:[void 0]}),a=void 0),r=r.concat(o),e(a,n.terrain)||r.push({command:qt.setTerrain,args:[n.terrain]}),function(t,n,r){n=n||[];const i=(t=t||[]).map(Yt),o=n.map(Yt),s=t.reduce(Xt,{}),a=n.reduce(Xt,{}),c=i.slice(),l=Object.create(null);let u,h,p,f,d,g,m;for(u=0,h=0;u<i.length;u++)p=i[u],a.hasOwnProperty(p)?h++:(r.push({command:qt.removeLayer,args:[p]}),c.splice(c.indexOf(p,h),1));for(u=0,h=0;u<o.length;u++)p=o[o.length-1-u],c[c.length-1-u]!==p&&(s.hasOwnProperty(p)?(r.push({command:qt.removeLayer,args:[p]}),c.splice(c.lastIndexOf(p,c.length-h),1)):h++,g=c[c.length-u],r.push({command:qt.addLayer,args:[a[p],g]}),c.splice(c.length-u,0,p),l[p]=!0);for(u=0;u<o.length;u++)if(p=o[u],f=s[p],d=a[p],!l[p]&&!e(f,d))if(e(f.source,d.source)&&e(f["source-layer"],d["source-layer"])&&e(f.type,d.type)){for(m in Zt(f.layout,d.layout,r,p,null,qt.setLayoutProperty),Zt(f.paint,d.paint,r,p,null,qt.setPaintProperty),e(f.filter,d.filter)||r.push({command:qt.setFilter,args:[p,d.filter]}),e(f.minzoom,d.minzoom)&&e(f.maxzoom,d.maxzoom)||r.push({command:qt.setLayerZoomRange,args:[p,d.minzoom,d.maxzoom]}),f)f.hasOwnProperty(m)&&"layout"!==m&&"paint"!==m&&"filter"!==m&&"metadata"!==m&&"minzoom"!==m&&"maxzoom"!==m&&(0===m.indexOf("paint.")?Zt(f[m],d[m],r,p,m.slice(6),qt.setPaintProperty):e(f[m],d[m])||r.push({command:qt.setLayerProperty,args:[p,m,d[m]]}));for(m in d)d.hasOwnProperty(m)&&!f.hasOwnProperty(m)&&"layout"!==m&&"paint"!==m&&"filter"!==m&&"metadata"!==m&&"minzoom"!==m&&"maxzoom"!==m&&(0===m.indexOf("paint.")?Zt(f[m],d[m],r,p,m.slice(6),qt.setPaintProperty):e(f[m],d[m])||r.push({command:qt.setLayerProperty,args:[p,m,d[m]]}))}else r.push({command:qt.removeLayer,args:[p]}),g=c[c.lastIndexOf(p)+1],r.push({command:qt.addLayer,args:[d,g]})}(s,n.layers,r)}catch(t){i.warn("Unable to compute style diff:",t),r=[{command:qt.setStyle,args:[n]}]}return r}(this.serialize(),n).filter((t=>!(t.command in Ye)));if(0===r.length)return!1;const o=r.filter((t=>!(t.command in Ze)));if(o.length>0)throw new Error(`Unimplemented: ${o.map((t=>t.command)).join(", ")}.`);return r.forEach((t=>{"setTransition"!==t.command&&"setProjection"!==t.command&&this[t.command].apply(this,t.args)})),this.stylesheet=n,this._updateMapProjection(),!0}addImage(e,n){return this.getImage(e)?this.fire(new t.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(e,n),this._afterImageUpdated(e),this)}updateImage(t,e){this.imageManager.updateImage(t,e)}getImage(t){return this.imageManager.getImage(t)}removeImage(e){return this.getImage(e)?(this.imageManager.removeImage(e),this._afterImageUpdated(e),this):this.fire(new t.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(e,n,r={}){if(this._checkLoaded(),void 0!==this.getSource(e))throw new Error("There is already a source with this ID");if(!n.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(n).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.validateSource,`sources.${e}`,n,null,r))return;this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);const i=Ot(e,n,this.dispatcher,this);i.setEventedParent(this,(()=>({isSourceLoaded:this._isSourceCacheLoaded(e),source:i.serialize(),sourceId:e})));const o=n=>{const r=(n?"symbol:":"other:")+e,o=this._sourceCaches[r]=new t.SourceCache(r,i,n);(n?this._symbolSourceCaches:this._otherSourceCaches)[e]=o,o.style=this,o.onAdd(this.map)};o(!1),"vector"!==n.type&&"geojson"!==n.type||o(!0),i.onAdd&&i.onAdd(this.map),this._changed=!0}removeSource(e){this._checkLoaded();const n=this.getSource(e);if(!n)throw new Error("There is no source with this ID");for(const n in this._layers)if(this._layers[n].source===e)return this.fire(new t.ErrorEvent(new Error(`Source "${e}" cannot be removed while layer "${n}" is using it.`)));if(this.terrain&&this.terrain.get().source===e)return this.fire(new t.ErrorEvent(new Error(`Source "${e}" cannot be removed while terrain is using it.`)));const r=this._getSourceCaches(e);for(const e of r)delete this._sourceCaches[e.id],delete this._updatedSources[e.id],e.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e.getSource().id})),e.setEventedParent(null),e.clearTiles();return delete this._otherSourceCaches[e],delete this._symbolSourceCaches[e],n.setEventedParent(null),n.onRemove&&n.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(t,e){this._checkLoaded(),this.getSource(t).setData(e),this._changed=!0}getSource(t){const e=this._getSourceCache(t);return e&&e.getSource()}_getSources(){const t=[];for(const e in this._otherSourceCaches){const n=this._getSourceCache(e);n&&t.push(n.getSource())}return t}addLayer(e,n,r={}){this._checkLoaded();const i=e.id;if(this.getLayer(i))return void this.fire(new t.ErrorEvent(new Error(`Layer with id "${i}" already exists on this map`)));let o;if("custom"===e.type){if(He(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(i,e.source),e=t.clone$1(e),e=t.extend(e,{source:i})),this._validate(t.validateLayer,`layers.${i}`,e,{arrayIndex:-1},r))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[o.id]=o.serialize(),this._updateLayerCount(o,!0)}const s=n?this._order.indexOf(n):this._order.length;if(n&&-1===s)return void this.fire(new t.ErrorEvent(new Error(`Layer with id "${n}" does not exist on this map.`)));this._order.splice(s,0,i),this._layerOrderChanged=!0,this._layers[i]=o;const a=this._getLayerSourceCache(o);if(this._removedLayers[i]&&o.source&&a&&"custom"!==o.type){const t=this._removedLayers[i];delete this._removedLayers[i],t.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",a.pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(e,n){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===n)return;const r=this._order.indexOf(e);this._order.splice(r,1);const i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new t.ErrorEvent(new Error(`Layer with id "${n}" does not exist on this map.`))):(this._order.splice(i,0,e),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(e){this._checkLoaded();const n=this._layers[e];if(!n)return void this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be removed.`)));n.setEventedParent(null),this._updateLayerCount(n,!1);const r=this._order.indexOf(e);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(t){return this._layers[t]}hasLayer(t){return t in this._layers}hasLayerType(t){for(const e in this._layers)if(this._layers[e].type===t)return!0;return!1}setLayerZoomRange(e,n,r){this._checkLoaded();const i=this.getLayer(e);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(n,r,i={}){this._checkLoaded();const o=this.getLayer(n);if(o){if(!e(o.filter,r))return null==r?(o.filter=void 0,void this._updateLayer(o)):void(this._validate(t.validateFilter,`layers.${o.id}.filter`,r,{layerType:o.type},i)||(o.filter=t.clone$1(r),this._updateLayer(o)))}else this.fire(new t.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot be filtered.`)))}getFilter(e){const n=this.getLayer(e);return n&&t.clone$1(n.filter)}setLayoutProperty(n,r,i,o={}){this._checkLoaded();const s=this.getLayer(n);s?e(s.getLayoutProperty(r),i)||(s.setLayoutProperty(r,i,o),this._updateLayer(s)):this.fire(new t.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(e,n){const r=this.getLayer(e);if(r)return r.getLayoutProperty(n);this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style.`)))}setPaintProperty(n,r,i,o={}){this._checkLoaded();const s=this.getLayer(n);s?e(s.getPaintProperty(r),i)||(s.setPaintProperty(r,i,o)&&this._updateLayer(s),this._changed=!0,this._updatedPaintProps[n]=!0):this.fire(new t.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(t,e){const n=this.getLayer(t);return n&&n.getPaintProperty(e)}setFeatureState(e,n){this._checkLoaded();const r=e.source,i=e.sourceLayer,o=this.getSource(r);if(!o)return void this.fire(new t.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)));const s=o.type;if("geojson"===s&&i)return void this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===s&&!i)return void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided.")));const a=this._getSourceCaches(r);for(const t of a)t.setFeatureState(i,e.id,n)}removeFeatureState(e,n){this._checkLoaded();const r=e.source,i=this.getSource(r);if(!i)return void this.fire(new t.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)));const o=i.type,s="vector"===o?e.sourceLayer:void 0;if("vector"===o&&!s)return void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(n&&"string"!=typeof e.id&&"number"!=typeof e.id)return void this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const a=this._getSourceCaches(r);for(const t of a)t.removeFeatureState(s,e.id,n)}getFeatureState(e){this._checkLoaded();const n=e.source,r=e.sourceLayer,i=this.getSource(n);if(i){if("vector"!==i.type||r)return void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(n)[0].getFeatureState(r,e.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error(`The source '${n}' does not exist in the map's style.`)))}getTransition(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const e={};for(const t in this._sourceCaches){const n=this._sourceCaches[t].getSource();e[n.id]||(e[n.id]=n.serialize())}return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:e,layers:this._serializeLayers(this._order)},(t=>void 0!==t))}_updateLayer(t){this._updatedLayers[t.id]=!0;const e=this._getLayerSourceCache(t);t.source&&!this._updatedSources[t.source]&&e&&"raster"!==e.getSource().type&&(this._updatedSources[t.source]="reload",e.pause()),this._changed=!0,t.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(t){const e=t=>"fill-extrusion"===this._layers[t].type,n={},r=[];for(let i=this._order.length-1;i>=0;i--){const o=this._order[i];if(e(o)){n[o]=i;for(const e of t){const t=e[o];if(t)for(const e of t)r.push(e)}}}r.sort(((t,e)=>e.intersectionZ-t.intersectionZ));const i=[];for(let o=this._order.length-1;o>=0;o--){const s=this._order[o];if(e(s))for(let t=r.length-1;t>=0;t--){const e=r[t].feature;if(n[e.layer.id]<o)break;i.push(e),r.pop()}else for(const e of t){const t=e[s];if(t)for(const e of t)i.push(e.feature)}}return i}queryRenderedFeatures(e,n,r){n&&n.filter&&this._validate(t.validateFilter,"queryRenderedFeatures.filter",n.filter,null,n);const i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const e of n.layers){const n=this._layers[e];if(!n)return this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be queried for features.`))),[];i[n.source]=!0}}const o=[];n.availableImages=this._availableImages;const s=n&&n.layers?n.layers.some((t=>{const e=this.getLayer(t);return e&&e.is3D()})):this.has3DLayers(),a=P.createFromScreenPoints(e,r);for(const t in this._sourceCaches){const e=this._sourceCaches[t].getSource().id;n.layers&&!i[e]||o.push(Lt(this._sourceCaches[t],this._layers,this._serializedLayers,a,n,r,s,!!this.map._showQueryGeometry))}return this.placement&&o.push(function(t,e,n,r,i,o,s){const a={},c=o.queryRenderedSymbols(r),l=[];for(const t of Object.keys(c).map(Number))l.push(s[t]);l.sort(Rt);for(const n of l){const r=n.featureIndex.lookupSymbolFeatures(c[n.bucketInstanceId],e,n.bucketIndex,n.sourceLayerIndex,i.filter,i.layers,i.availableImages,t);for(const t in r){const e=a[t]=a[t]||[],i=r[t];i.sort(((t,e)=>{const r=n.featureSortOrder;if(r){const n=r.indexOf(t.featureIndex);return r.indexOf(e.featureIndex)-n}return e.featureIndex-t.featureIndex}));for(const t of i)e.push(t)}}for(const e in a)a[e].forEach((r=>{const i=r.feature,o=n(t[e]);if(!o)return;const s=o.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=s}));return a}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),a.screenGeometry,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(e,n){n&&n.filter&&this._validate(t.validateFilter,"querySourceFeatures.filter",n.filter,null,n);const r=this._getSourceCaches(e);let i=[];for(const t of r)i=i.concat(Dt(t,n));return i}addSourceType(t,e,n){return Je.getSourceType(t)?n(new Error(`A source type called "${t}" already exists.`)):(Je.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},n):n(null,null))}getLight(){return this.light.getLight()}setLight(t,n={}){this._checkLoaded();const r=this.light.getLight();let i=!1;for(const n in t)if(!e(t[n],r[n])){i=!0;break}if(!i)return;const o=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(t,n),this.light.updateTransitions(o)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(n,r=1){if(this._checkLoaded(),!n)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let i=n;if(1===r){if("object"==typeof i.source){const e="terrain-dem-src";this.addSource(e,i.source),i=t.clone$1(i),i=t.extend(i,{source:e})}if(this._validate(t.validateTerrain,"terrain",i))return}if(!this.terrain||this.terrain&&r!==this.terrain.drapeRenderMode){if(!i)return;this._createTerrain(i,r)}else{const n=this.terrain,r=n.get();for(const e of Object.keys(t.spec.terrain))!i.hasOwnProperty(e)&&t.spec.terrain[e].default&&(i[e]=t.spec.terrain[e].default);for(const t in i)if(!e(i[t],r[t])){n.set(i),this.stylesheet.terrain=i;const t=this._setTransitionParameters({duration:0});n.updateTransitions(t);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(t){const e=this.fog=new I(t,this.map.transform);this.stylesheet.fog=t;const n=this._setTransitionParameters({duration:0});e.updateTransitions(n)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask((()=>{for(const t of this.map._markers)t._evaluateOpacity()}))}getFog(){return this.fog?this.fog.get():null}setFog(t){if(this._checkLoaded(),!t)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const n=this.fog,r=n.get();0===Object.keys(t).length&&n.set(t);for(const i in t)if(!e(t[i],r[i])){n.set(t),this.stylesheet.fog=t;const e=this._setTransitionParameters({duration:0});n.updateTransitions(e);break}}else this._createFog(t);this._markersNeedUpdate=!0}_setTransitionParameters(e){return{now:t.exported.now(),transition:t.extend(e,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const t=this._order.filter((t=>this.isLayerDraped(this._layers[t]))),e=this._order.filter((t=>!this.isLayerDraped(this._layers[t])));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...t),this._drapedFirstOrder.push(...e)}_createTerrain(t,e){const n=this.terrain=new S(t,e);this.stylesheet.terrain=t,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const r=this._setTransitionParameters({duration:0});n.updateTransitions(r)}_force3DLayerUpdate(){for(const t in this._layers){const e=this._layers[t];"fill-extrusion"===e.type&&this._updateLayer(e)}}_forceSymbolLayerUpdate(){for(const t in this._layers){const e=this._layers[t];"symbol"===e.type&&this._updateLayer(e)}}_validate(e,n,r,i,o={}){return(!o||!1!==o.validate)&&He(this,e.call(t.validateStyle,t.extend({key:n,style:this.serialize(),value:r,styleSpec:t.spec},i)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const t in this._layers)this._layers[t].setEventedParent(null);for(const t in this._sourceCaches)this._sourceCaches[t].clearTiles(),this._sourceCaches[t].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(t){const e=this._getSourceCaches(t);for(const t of e)t.clearTiles()}_reloadSource(t){const e=this._getSourceCaches(t);for(const t of e)t.resume(),t.reload()}_reloadSources(){for(const t of this._getSources())t.reload&&t.reload()}_updateSources(t){for(const e in this._sourceCaches)this._sourceCaches[e].update(t)}_generateCollisionBoxes(){for(const t in this._sourceCaches){const e=this._sourceCaches[t];e.resume(),e.reload()}}_updatePlacement(e,n,r,i,o=!1){let s=!1,a=!1;const c={};for(const t of this._order){const n=this._layers[t];if("symbol"!==n.type)continue;if(!c[n.source]){const t=this._getLayerSourceCache(n);if(!t)continue;c[n.source]=t.getRenderableIds(!0).map((e=>t.getTileByID(e))).sort(((t,e)=>e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)))}const r=this.crossTileSymbolIndex.addLayer(n,c[n.source],e.center.lng,e.projection);s=s||r}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),o=o||this._layerOrderChanged||0===r,this._layerOrderChanged&&this.fire(new t.Event("neworder")),(o||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.exported.now(),e.zoom))&&(this.pauseablePlacement=new Ue(e,this._order,o,n,r,i,this.placement,this.fog&&e.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,c),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.exported.now()),a=!0),s&&this.pauseablePlacement.placement.setStale()),a||s)for(const t of this._order){const e=this._layers[t];"symbol"===e.type&&this.placement.updateLayerOpacities(e,c[e.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.exported.now())}_releaseSymbolFadeTiles(){for(const t in this._sourceCaches)this._sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,e,n){this.imageManager.getImages(e.icons,n),this._updateTilesForChangedImages();const r=t=>{t&&t.setDependencies(e.tileID.key,e.type,e.icons)};r(this._otherSourceCaches[e.source]),r(this._symbolSourceCaches[e.source])}getGlyphs(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)}getResource(e,n,r){return t.makeRequest(n,r)}_getSourceCache(t){return this._otherSourceCaches[t]}_getLayerSourceCache(t){return"symbol"===t.type?this._symbolSourceCaches[t.source]:this._otherSourceCaches[t.source]}_getSourceCaches(t){const e=[];return this._otherSourceCaches[t]&&e.push(this._otherSourceCaches[t]),this._symbolSourceCaches[t]&&e.push(this._symbolSourceCaches[t]),e}_isSourceCacheLoaded(e){const n=this._getSourceCaches(e);return 0===n.length?(this.fire(new t.ErrorEvent(new Error(`There is no source with ID '${e}'`))),!1):n.every((t=>t.loaded()))}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Je.getSourceType=function(t){return Ct[t]},Je.setSourceType=function(t,e){Ct[t]=e},Je.registerForPluginStateChange=t.registerForPluginStateChange;var Qe="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",tn="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",en="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\nconst float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",nn="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",rn="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let on={},sn={};const an=[];pn(Qe,an),pn(en,an),pn(nn,an),pn(rn,an),on=fn("",en),sn=fn(rn,nn);const cn=fn("\n#if __VERSION__ >=300\n#define varying in\n#define gl_FragColor glFragColor\n#define texture2D texture\n#define textureCube texture\nout vec4 glFragColor;\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\n#if __VERSION__ >=300\n#define attribute in\n#define varying out\n#define texture2D texture\n#endif\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),ln=Qe,un="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var hn={background:fn("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:fn("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:fn("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:fn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:fn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:fn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:fn("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:fn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:fn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:fn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:fn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:fn("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:fn("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:fn("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:fn("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:fn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:fn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:fn("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:fn("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:fn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:fn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:fn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:fn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:fn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=wireframeOffset;\n#endif\nv_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:fn("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:fn("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",tn),skyboxGradient:fn("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",tn),skyboxCapture:fn("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:fn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:fn("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function pn(t,e){const n=t.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let t of n)if(t=t.trim(),"#"===t[0]&&t.includes("if")&&!t.includes("endif")){t=t.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const n=t.split(" ");for(const t of n)e.includes(t)||e.push(t)}}function fn(t,e){const n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=e.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),i={},o=[...an];return pn(t,o),pn(e,o),{fragmentSource:t=t.replace(n,((t,e,n,r,o)=>(i[o]=!0,"define"===e?`\n#ifndef HAS_UNIFORM_u_${o}\nvarying ${n} ${r} ${o};\n#else\nuniform ${n} ${r} u_${o};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${o}\n    ${n} ${r} ${o} = u_${o};\n#endif\n`))),vertexSource:e=e.replace(n,((t,e,n,r,o)=>{const s="float"===r?"vec2":"vec4",a=o.match(/color/)?"color":s;return i[o]?"define"===e?`\n#ifndef HAS_UNIFORM_u_${o}\nuniform lowp float u_${o}_t;\nattribute ${n} ${s} a_${o};\nvarying ${n} ${r} ${o};\n#else\nuniform ${n} ${r} u_${o};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${o}\n    ${o} = a_${o};\n#else\n    ${n} ${r} ${o} = u_${o};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${o}\n    ${o} = unpack_mix_${a}(a_${o}, u_${o}_t);\n#else\n    ${n} ${r} ${o} = u_${o};\n#endif\n`:"define"===e?`\n#ifndef HAS_UNIFORM_u_${o}\nuniform lowp float u_${o}_t;\nattribute ${n} ${s} a_${o};\n#else\nuniform ${n} ${r} u_${o};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${o}\n    ${n} ${r} ${o} = a_${o};\n#else\n    ${n} ${r} ${o} = u_${o};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${o}\n    ${n} ${r} ${o} = unpack_mix_${a}(a_${o}, u_${o}_t);\n#else\n    ${n} ${r} ${o} = u_${o};\n#endif\n`})),staticAttributes:r,usedDefines:o}}class dn{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(t,e,n,r,i,o,s){this.context=t;let a=this.boundPaintVertexBuffers.length!==r.length;for(let t=0;!a&&t<r.length;t++)this.boundPaintVertexBuffers[t]!==r[t]&&(a=!0);let c=this.boundDynamicVertexBuffers.length!==s.length;for(let t=0;!c&&t<s.length;t++)this.boundDynamicVertexBuffers[t]!==s[t]&&(c=!0);if(!t.extVertexArrayObject||!this.vao||this.boundProgram!==e||this.boundLayoutVertexBuffer!==n||a||c||this.boundIndexBuffer!==i||this.boundVertexOffset!==o)this.freshBind(e,n,r,i,o,s);else{t.bindVertexArrayOES.set(this.vao);for(const t of s)t&&t.bind();i&&i.dynamicDraw&&i.bind()}}freshBind(t,e,n,r,i,o){let s;const a=t.numAttributes,c=this.context,l=c.gl;if(c.extVertexArrayObject)this.vao&&this.destroy(),this.vao=c.extVertexArrayObject.createVertexArrayOES(),c.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffers=o;else{s=c.currentNumAttributes||0;for(let t=a;t<s;t++)l.disableVertexAttribArray(t)}e.enableAttributes(l,t),e.bind(),e.setVertexAttribPointers(l,t,i);for(const e of n)e.enableAttributes(l,t),e.bind(),e.setVertexAttribPointers(l,t,i);for(const e of o)e&&(e.enableAttributes(l,t),e.bind(),e.setVertexAttribPointers(l,t,i));r&&r.bind(),c.currentNumAttributes=a}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function gn(e,n){const r=Math.pow(2,n.canonical.z),i=n.canonical.y;return[new t.MercatorCoordinate(0,i/r).toLngLat().lat,new t.MercatorCoordinate(0,(i+1)/r).toLngLat().lat]}function mn(e,n,r,i,o,s,a){const c=e.context,l=c.gl,u=r.fbo;if(!u)return;e.prepareDrawTile();const h=e.useProgram("hillshade");c.activeTexture.set(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,u.colorAttachment.get());const p=((t,e,n,r)=>{const i=n.paint.get("hillshade-shadow-color"),o=n.paint.get("hillshade-highlight-color"),s=n.paint.get("hillshade-accent-color");let a=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(a-=t.transform.angle);const c=!t.options.moving;return{u_matrix:r||t.transform.calculateProjMatrix(e.tileID.toUnwrapped(),c),u_image:0,u_latrange:gn(0,e.tileID),u_light:[n.paint.get("hillshade-exaggeration"),a],u_shadow:i,u_highlight:o,u_accent:s}})(e,r,i,e.terrain?n.projMatrix:null);e.prepareDrawProgram(c,h,n.toUnwrapped());const{tileBoundsBuffer:f,tileBoundsIndexBuffer:d,tileBoundsSegments:g}=e.getTileBoundsBuffers(r);h.draw(c,l.TRIANGLES,o,s,a,t.CullFaceMode.disabled,p,i.id,f,d,g)}function yn(e,n,r){if(!n.needsDEMTextureUpload)return;const i=e.context,o=i.gl;i.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(r.stride);const s=r.getPixels();n.demTexture?n.demTexture.update(s,{premultiply:!1}):n.demTexture=new t.Texture(i,s,o.RGBA,{premultiply:!1}),n.needsDEMTextureUpload=!1}function _n(e,n,r,i,o,s){const a=e.context,c=a.gl;if(!n.dem)return;const l=n.dem;if(a.activeTexture.set(c.TEXTURE1),yn(e,n,l),!n.demTexture)return;n.demTexture.bind(c.NEAREST,c.CLAMP_TO_EDGE);const u=l.dim;a.activeTexture.set(c.TEXTURE0);let h=n.fbo;if(!h){const e=new t.Texture(a,{width:u,height:u,data:null},c.RGBA);e.bind(c.LINEAR,c.CLAMP_TO_EDGE),h=n.fbo=a.createFramebuffer(u,u,!0),h.colorAttachment.set(e.texture)}a.bindFramebuffer.set(h.framebuffer),a.viewport.set([0,0,u,u]);const{tileBoundsBuffer:p,tileBoundsIndexBuffer:f,tileBoundsSegments:d}=e.getMercatorTileBoundsBuffers();e.useProgram("hillshadePrepare").draw(a,c.TRIANGLES,i,o,s,t.CullFaceMode.disabled,((e,n)=>{const r=n.stride,i=t.create();return t.ortho(i,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(i,i,[0,-t.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:e.overscaledZ,u_unpack:n.unpackVector}})(n.tileID,l),r.id,p,f,d),n.needsHillshadePrepare=!1}const vn=e=>({u_matrix:new t.UniformMatrix4f(e),u_image0:new t.Uniform1i(e),u_skirt_height:new t.Uniform1f(e)}),xn=(t,e)=>({u_matrix:t,u_image0:0,u_skirt_height:e}),bn=(t,e,n,r,i,o,s,a,c,l,u,h,p,f,d)=>({u_proj_matrix:Float32Array.from(t),u_globe_matrix:e,u_normalize_matrix:Float32Array.from(r),u_merc_matrix:n,u_zoom_transition:i,u_merc_center:o,u_image0:0,u_frustum_tl:s,u_frustum_tr:a,u_frustum_br:c,u_frustum_bl:l,u_globe_pos:u,u_globe_radius:h,u_viewport:p,u_grid_matrix:d?Float32Array.from(d):new Float32Array(9),u_skirt_height:f});function wn(t,e){return null!=t&&null!=e&&!(!t.hasData()||!e.hasData())&&null!=t.demTexture&&null!=e.demTexture&&t.tileID.key!==e.tileID.key}const En=new class{constructor(){this.operations={}}newMorphing(t,e,n,r,i){if(t in this.operations){const e=this.operations[t];e.to.tileID.key!==n.tileID.key&&(e.queued=n)}else this.operations[t]={startTime:r,phase:0,duration:i,from:e,to:n,queued:null}}getMorphValuesForProxy(t){if(!(t in this.operations))return null;const e=this.operations[t];return{from:e.from,to:e.to,phase:e.phase}}update(t){for(const e in this.operations){const n=this.operations[e];for(n.phase=(t-n.startTime)/n.duration;n.phase>=1||!this._validOp(n);)if(!this._nextOp(n,t)){delete this.operations[e];break}}}_nextOp(t,e){return!!t.queued&&(t.from=t.to,t.to=t.queued,t.queued=null,t.phase=0,t.startTime=e,!0)}_validOp(t){return t.from.hasData()&&t.to.hasData()}},Tn={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Sn(t){return 6*Math.pow(1.5,22-t)}function kn(t,e){const n=1<<t.z;return!e&&(0===t.x||t.x===n-1)||0===t.y||t.y===n-1}const An=t=>({u_matrix:t});function Mn(e,n,r,i,o){if(o>0){const s=t.exported.now(),a=(s-e.timeAdded)/o,c=n?(s-n.timeAdded)/o:-1,l=r.getSource(),u=i.coveringZoomLevel({tileSize:l.tileSize,roundZoom:l.roundZoom}),h=!n||Math.abs(n.tileID.overscaledZ-u)>Math.abs(e.tileID.overscaledZ-u),p=h&&e.refreshedUponExpiration?1:t.clamp(h?a:1-c,0,1);return e.refreshedUponExpiration&&a>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}class In extends t.SourceCache{constructor(t){const e={type:"raster-dem",maxzoom:t.transform.maxZoom},n=new C(Ft(),null),r=Ot("mock-dem",e,n,t.style);super("mock-dem",r,!1),r.setEventedParent(this),this._sourceLoaded=!0}_loadTile(t,e){t.state="loaded",e(null)}}class Cn extends t.SourceCache{constructor(t){const e=Ot("proxy",{type:"geojson",maxzoom:t.transform.maxZoom},new C(Ft(),null),t.style);super("proxy",e,!1),e.setEventedParent(this),this.map=this.getSource().map=t,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(e,n,r){if(e.freezeTileCoverage)return;this.transform=e;const i=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce(((n,r)=>{if(n[r.key]="",!this._tiles[r.key]){const n=new t.Tile(r,this._source.tileSize*r.overscaleFactor(),e.tileZoom);n.state="loaded",this._tiles[r.key]=n}return n}),{});for(const t in this._tiles)t in i||(this.freeFBO(t),this._tiles[t].unloadVectorData(),delete this._tiles[t])}freeFBO(t){const e=this.proxyCachedFBO[t];if(void 0!==e){const n=Object.values(e);this.renderCachePool.push(...n),delete this.proxyCachedFBO[t]}}deallocRenderCache(){this.renderCache.forEach((t=>t.fb.destroy())),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class On extends t.OverscaledTileID{constructor(t,e,n){super(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y),this.proxyTileKey=e,this.projMatrix=n}}class Pn extends t.Elevation{constructor(e,n){super(),this.painter=e,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[r,i,o]=function(e){const n=new t.StructArrayLayout2i4,r=new t.StructArrayLayout3ui6,i=131;n.reserve(17161),r.reserve(33800);const o=t.EXTENT/128,s=t.EXTENT+o/2,a=s+o;for(let e=-o;e<a;e+=o)for(let r=-o;r<a;r+=o){const i=r<0||r>s||e<0||e>s?24575:0,o=t.clamp(Math.round(r),0,t.EXTENT),a=t.clamp(Math.round(e),0,t.EXTENT);n.emplaceBack(o+i,a)}const c=(t,e)=>{const n=e*i+t;r.emplaceBack(n+1,n,n+i),r.emplaceBack(n+i,n+i+1,n+1)};for(let t=1;t<129;t++)for(let e=1;e<129;e++)c(e,t);return[0,129].forEach((t=>{for(let e=0;e<130;e++)c(e,t),c(t,e)})),[n,r,32768]}(),s=e.context;this.gridBuffer=s.createVertexBuffer(r,t.posAttributes.members),this.gridIndexBuffer=s.createIndexBuffer(i),this.gridSegments=t.SegmentVector.simpleSegment(0,0,r.length,i.length),this.gridNoSkirtSegments=t.SegmentVector.simpleSegment(0,0,r.length,o),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Cn(n.map),this.orthoMatrix=t.create(),t.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,t.EXTENT,0,t.EXTENT,0,1);const a=s.gl;this._overlapStencilMode=new t.StencilMode({func:a.GEQUAL,mask:255},0,255,a.KEEP,a.KEEP,a.REPLACE),this._previousZoom=e.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=n,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new In(n.map)}set style(t){t.on("data",this._onStyleDataEvent.bind(this)),t.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=t,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",(()=>{this._clearLineLayersFromRenderCache()}))}update(e,n,r){if(e&&e.terrain){this._style!==e&&(this.style=e),this.enabled=!0;const i=e.terrain.properties;this.sourceCache=0===e.terrain.drapeRenderMode?this._mockSourceCache:e._getSourceCache(i.get("source")),this._exaggeration=i.get("exaggeration");const o=()=>{this.sourceCache.used&&t.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const e=this.getScaledDemTileSize();this.sourceCache.update(n,e,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,o(),this._initializing=!0),o(),n.updateElevation(!0,r),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(n),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(t){this._findCoveringTileCache[t]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const e=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==e.efficiency&&t.warnOnce(`Terrain render cache efficiency is not optimal (${e.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${e.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(t){t.coord&&"source"===t.dataType?this._clearRenderCacheForTile(t.sourceCacheId,t.coord):"style"===t.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const t in this._style._sourceCaches)this._style._sourceCaches[t].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach((t=>t.fb.destroy())),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const t=2*this.proxySourceCache.getSource().tileSize;return[t,t]}set useVertexMorphing(t){this._useVertexMorphing=t}updateTileBinding(e){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const n=this.proxySourceCache,r=this.painter.transform;this._initializing&&(this._initializing=0===r._centerAltitude&&-1===this.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(r.center),-1),this._emptyDEMTextureDirty=!this._initializing);const i=this.proxyCoords=n.getIds().map((t=>{const e=n.getTileByID(t).tileID;return e.projMatrix=r.calculateProjMatrix(e.toUnwrapped()),e}));!function(e,n){const r=n.transform.pointCoordinate(n.transform.getCameraPoint()),i=new t.Point(r.x,r.y);e.sort(((e,n)=>{if(n.overscaledZ-e.overscaledZ)return n.overscaledZ-e.overscaledZ;const r=new t.Point(e.canonical.x+(1<<e.canonical.z)*e.wrap,e.canonical.y),o=new t.Point(n.canonical.x+(1<<n.canonical.z)*n.wrap,n.canonical.y),s=i.mult(1<<e.canonical.z);return s.x-=.5,s.y-=.5,s.distSqr(r)-s.distSqr(o)}))}(i,this.painter),this._previousZoom=r.zoom;const o=this.proxyToSource||{};this.proxyToSource={},i.forEach((t=>{this.proxyToSource[t.key]={}})),this.terrainTileForTile={};const s=this._style._sourceCaches;for(const t in s){const n=s[t];if(!n.used)continue;if(n!==this.sourceCache&&this.resetTileLookupCache(n.id),this._setupProxiedCoordsForOrtho(n,e[t],o),n.usedForTerrain)continue;const r=e[t];n.getSource().reparseOverscaled&&this._assignTerrainTiles(r)}this.proxiedCoords[n.id]=i.map((t=>new On(t,t.key,this.orthoMatrix))),this._assignTerrainTiles(i),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(o),this.renderingToTexture=!1,this._updateTimestamp=t.exported.now();const a={};this._visibleDemTiles=[];for(const t of this.proxyCoords){const e=this.terrainTileForTile[t.key];if(!e)continue;const n=e.tileID.key;n in a||(this._visibleDemTiles.push(e),a[n]=n)}}_assignTerrainTiles(t){this._initializing||t.forEach((t=>{if(this.terrainTileForTile[t.key])return;const e=this._findTileCoveringTileID(t,this.sourceCache);e&&(this.terrainTileForTile[t.key]=e)}))}_prepareDEMTextures(){const t=this.painter.context,e=t.gl;for(const n in this.terrainTileForTile){const r=this.terrainTileForTile[n],i=r.dem;!i||r.demTexture&&!r.needsDEMTextureUpload||(t.activeTexture.set(e.TEXTURE1),yn(this.painter,r,i))}}_prepareDemTileUniforms(t,e,n,r){if(!e||null==e.demTexture)return!1;const i=t.tileID.canonical,o=Math.pow(2,e.tileID.canonical.z-i.z),s=r||"";return n[`u_dem_tl${s}`]=[i.x*o%1,i.y*o%1],n[`u_dem_scale${s}`]=o,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const e=this.painter.context,n=e.gl;if(!this._emptyDepthBufferTexture){const r=new t.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new t.Texture(e,r,n.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let t=0;const e=this._visibleDemTiles.reduce(((e,n)=>{if(!n.dem)return e;const r=n.dem.tree.minimums[0];return r>0&&t++,e+r}),0);return t?e/t:0}_updateEmptyDEMTexture(){const e=this.painter.context,n=e.gl;e.activeTexture.set(n.TEXTURE2);const r=this._getLoadedAreaMinimum(),i=new t.RGBAImage({width:1,height:1},new Uint8Array(t.DEMData.pack(r,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let o=this._emptyDEMTexture;return o?o.update(i,{premultiply:!1}):o=this._emptyDEMTexture=new t.Texture(e,i,n.RGBA,{premultiply:!1}),o}setupElevationDraw(e,n,r){const i=this.painter.context,o=i.gl,s=(a=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:t.DEMData.getUnpackVector(a),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var a;s.u_dem_size=this.sourceCache.getSource().tileSize,s.u_exaggeration=this.exaggeration();let c=null,l=null,u=1;if(r&&r.morphing&&this._useVertexMorphing){const t=r.morphing.srcDemTile,n=r.morphing.dstDemTile;u=r.morphing.phase,t&&n&&(this._prepareDemTileUniforms(e,t,s,"_prev")&&(l=t),this._prepareDemTileUniforms(e,n,s)&&(c=n))}if(l&&c?(i.activeTexture.set(o.TEXTURE2),c.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),i.activeTexture.set(o.TEXTURE4),l.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),s.u_dem_lerp=u):(c=this.terrainTileForTile[e.tileID.key],i.activeTexture.set(o.TEXTURE2),(this._prepareDemTileUniforms(e,c,s)?c.demTexture:this.emptyDEMTexture).bind(o.NEAREST,o.CLAMP_TO_EDGE)),i.activeTexture.set(o.TEXTURE3),r&&r.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),this._depthFBO&&(s.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),s.u_depth_size_inv=[1,1]),r&&r.useMeterToDem&&c){const e=(1<<c.tileID.canonical.z)*t.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;s.u_meter_to_dem=e}if(r&&r.labelPlaneMatrixInv&&(s.u_label_plane_matrix_inv=r.labelPlaneMatrixInv),n.setTerrainUniformValues(i,s),"globe"===this.painter.transform.projection.name){const t=this.globeUniformValues(this.painter.transform,e.tileID.canonical,r&&r.useDenormalizedUpVectorScale);n.setGlobeUniformValues(i,t)}}globeUniformValues(e,n,r){const i=e.projection;return{u_tile_tl_up:i.upVector(n,0,0),u_tile_tr_up:i.upVector(n,t.EXTENT,0),u_tile_br_up:i.upVector(n,t.EXTENT,t.EXTENT),u_tile_bl_up:i.upVector(n,0,t.EXTENT),u_tile_up_scale:r?t.globeMetersToEcef(1):i.upVectorScale(n,e.center.lat,e.worldSize).metersToTile}}renderToBackBuffer(e){const n=this.painter,r=this.painter.context;0!==e.length&&(r.bindFramebuffer.set(null),r.viewport.set([0,0,n.width,n.height]),n.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(e,n,r,i,o){if("globe"===e.transform.projection.name)!function(e,n,r,i,o){const s=e.context,a=s.gl;let c,l;const u=e.options.showTerrainWireframe?2:0,h=e.transform,p=t.globeUseCustomAntiAliasing(e,s,h),f=(t,n)=>{if(l===t)return;const r=[Tn[t],"PROJECTION_GLOBE_VIEW"];p&&r.push("CUSTOM_ANTIALIASING"),n&&r.push(Tn[u]),c=e.useProgram("globeRaster",null,r),l=t},d=e.colorModeForRenderPass(),g=new t.DepthMode(a.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);En.update(o);const m=t.calculateGlobeMercatorMatrix(h),y=[t.mercatorXfromLng(h.center.lng),t.mercatorYfromLat(h.center.lat)],_=u?[!1,!0]:[!1],v=e.globeSharedBuffers,x=[h.width*t.exported.devicePixelRatio,h.height*t.exported.devicePixelRatio],b=Float32Array.from(h.globeMatrix),w={useDenormalizedUpVectorScale:!0};if(_.forEach((u=>{const h=e.transform,p=Sn(h.zoom)*n.exaggeration();l=-1;const _=u?a.LINES:a.TRIANGLES;for(const l of i){const i=r.getTile(l),E=t.StencilMode.disabled,T=n.prevTerrainTileForTile[l.key],S=n.terrainTileForTile[l.key];wn(T,S)&&En.newMorphing(l.key,T,S,o,250),s.activeTexture.set(a.TEXTURE0),i.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE);const k=En.getMorphValuesForProxy(l.key),A=k?1:0;k&&t.extend$1(w,{morphing:{srcDemTile:k.from,dstDemTile:k.to,phase:t.easeCubicInOut(k.phase)}});const M=t.tileCornersToBounds(l.canonical),I=t.getLatitudinalLod(M.getCenter().lat),C=t.getGridMatrix(l.canonical,M,I,h.worldSize/h._pixelsPerMercatorPixel),O=t.globeNormalizeECEF(t.globeTileBounds(l.canonical)),P=bn(h.projMatrix,b,m,O,t.globeToMercatorTransition(h.zoom),y,h.frustumCorners.TL,h.frustumCorners.TR,h.frustumCorners.BR,h.frustumCorners.BL,h.globeCenterInViewSpace,h.globeRadius,x,p,C);if(f(A,u),n.setupElevationDraw(i,c,w),e.prepareDrawProgram(s,c,l.toUnwrapped()),v){const[n,r,i]=u?v.getWirefameBuffers(e.context,I):v.getGridBuffers(I,0!==p);c.draw(s,_,g,E,d,t.CullFaceMode.backCCW,P,"globe_raster",n,r,i)}}})),v){const o=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];p&&o.push("CUSTOM_ANTIALIASING"),c=e.useProgram("globeRaster",null,o);for(const o of i){const{x:i,y:l,z:u}=o.canonical,p=0===l,f=l===(1<<u)-1,[m,_,b,E]=v.getPoleBuffers(u);if(E&&(p||f)){const l=r.getTile(o);s.activeTexture.set(a.TEXTURE0),l.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE);let v=t.globePoleMatrixForTile(u,i,h);const T=t.globeNormalizeECEF(t.globeTileBounds(o.canonical)),S=(e,n)=>e.draw(s,a.TRIANGLES,g,t.StencilMode.disabled,d,t.CullFaceMode.disabled,bn(h.projMatrix,v,v,T,0,y,h.frustumCorners.TL,h.frustumCorners.TR,h.frustumCorners.BR,h.frustumCorners.BL,h.globeCenterInViewSpace,h.globeRadius,x,0),"globe_pole_raster",n,b,E);n.setupElevationDraw(l,c,w),e.prepareDrawProgram(s,c,o.toUnwrapped()),p&&S(c,m),f&&(v=t.scale(t.create(),v,[1,-1,1]),S(c,_))}}}}(e,n,r,i,o);else{const s=e.context,a=s.gl;let c,l;const u=e.options.showTerrainWireframe?2:0,h=(t,n)=>{if(l===t)return;const r=[Tn[t]];n&&r.push(Tn[u]),c=e.useProgram("terrainRaster",null,r),l=t},p=e.colorModeForRenderPass(),f=new t.DepthMode(a.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);En.update(o);const d=e.transform,g=Sn(d.zoom)*n.exaggeration();(u?[!1,!0]:[!1]).forEach((u=>{l=-1;const m=u?a.LINES:a.TRIANGLES,[y,_]=u?n.getWirefameBuffer():[n.gridIndexBuffer,n.gridSegments];for(const l of i){const i=r.getTile(l),v=t.StencilMode.disabled,x=n.prevTerrainTileForTile[l.key],b=n.terrainTileForTile[l.key];wn(x,b)&&En.newMorphing(l.key,x,b,o,250),s.activeTexture.set(a.TEXTURE0),i.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST);const w=En.getMorphValuesForProxy(l.key),E=w?1:0;let T;w&&(T={morphing:{srcDemTile:w.from,dstDemTile:w.to,phase:t.easeCubicInOut(w.phase)}});const S=xn(l.projMatrix,kn(l.canonical,d.renderWorldCopies)?g/10:g);h(E,u),n.setupElevationDraw(i,c,T),e.prepareDrawProgram(s,c,l.toUnwrapped()),c.draw(s,m,f,v,p,t.CullFaceMode.backCCW,S,"terrain_raster",n.gridBuffer,y,_)}}))}}(n,this,this.proxySourceCache,e,this._updateTimestamp),this.renderingToTexture=!0,n.gpuTimingDeferredRenderEnd(),e.splice(0,e.length))}renderBatch(e){if(0===this._drapedRenderBatches.length)return e+1;this.renderingToTexture=!0;const n=this.painter,r=this.painter.context,i=this.proxySourceCache,o=this.proxiedCoords[i.id],s=this._drapedRenderBatches.shift(),a=[],c=n.style.order;let l=0;for(const u of o){const o=i.getTileByID(u.proxyTileKey),h=i.proxyCachedFBO[u.key]?i.proxyCachedFBO[u.key][e]:void 0,p=void 0!==h?i.renderCache[h]:this.pool[l++],f=void 0!==h;if(o.texture=p.tex,f&&!p.dirty){a.push(o.tileID);continue}let d;r.bindFramebuffer.set(p.fb.framebuffer),this.renderedToTile=!1,p.dirty&&(r.clear({color:t.Color.transparent,stencil:0}),p.dirty=!1);for(let t=s.start;t<=s.end;++t){const e=n.style._layers[c[t]];if(e.isHidden(n.transform.zoom))continue;const i=n.style._getLayerSourceCache(e),o=i?this.proxyToSource[u.key][i.id]:[u];if(!o)continue;const s=o;r.viewport.set([0,0,p.fb.width,p.fb.height]),d!==(i?i.id:null)&&(this._setupStencil(p,o,e,i),d=i?i.id:null),n.renderLayer(n,i,e,s)}this.renderedToTile?(p.dirty=!0,a.push(o.tileID)):f||--l,5===l&&(l=0,this.renderToBackBuffer(a))}return this.renderToBackBuffer(a),this.renderingToTexture=!1,r.bindFramebuffer.set(null),r.viewport.set([0,0,n.width,n.height]),s.end+1}postRender(){}renderCacheEfficiency(t){const e=t.order.length;if(0===e)return{efficiency:100};let n,r=0,i=0,o=!1;for(let s=0;s<e;++s){const e=t._layers[t.order[s]];this._style.isLayerDraped(e)?(o&&++r,++i):o||(o=!0,n=e.id)}return 0===i?{efficiency:100}:{efficiency:100*(1-r/i),firstUndrapedLayer:n}}getMinElevationBelowMSL(){let t=0;return this._visibleDemTiles.filter((t=>t.dem)).forEach((e=>{t=Math.min(t,e.dem.tree.minimums[0])})),0===t?t:(t-30)*this._exaggeration}raycast(t,e,n){if(!this._visibleDemTiles)return null;const r=this._visibleDemTiles.filter((t=>t.dem)).map((r=>{const i=r.tileID,o=1<<i.overscaledZ,{x:s,y:a}=i.canonical,c=s/o,l=(s+1)/o,u=a/o,h=(a+1)/o;return{minx:c,miny:u,maxx:l,maxy:h,t:r.dem.tree.raycastRoot(c,u,l,h,t,e,n),tile:r}}));r.sort(((t,e)=>(null!==t.t?t.t:Number.MAX_VALUE)-(null!==e.t?e.t:Number.MAX_VALUE)));for(const i of r){if(null==i.t)return null;const r=i.tile.dem.tree.raycast(i.minx,i.miny,i.maxx,i.maxy,t,e,n);if(null!=r)return r}return null}_createFBO(){const e=this.painter.context,n=e.gl,r=this.drapeBufferSize;e.activeTexture.set(n.TEXTURE0);const i=new t.Texture(e,{width:r[0],height:r[1],data:null},n.RGBA);i.bind(n.LINEAR,n.CLAMP_TO_EDGE);const o=e.createFramebuffer(r[0],r[1],!1);return o.colorAttachment.set(i.texture),o.depthAttachment=new Et(e,o.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=e.createRenderbuffer(e.gl.DEPTH_STENCIL,r[0],r[1]),this._stencilRef=0,o.depthAttachment.set(this._sharedDepthStencil),e.clear({stencil:0})):o.depthAttachment.set(this._sharedDepthStencil),e.extTextureFilterAnisotropic&&!e.extTextureFilterAnisotropicForceOff&&n.texParameterf(n.TEXTURE_2D,e.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,e.extTextureFilterAnisotropicMax),{fb:o,tex:i,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const t in this._style._sourceCaches)if(this._style._sourceCaches[t].hasTransition())return!0;return this._style.order.some((t=>{const e=this._style._layers[t],n=e.isHidden(this.painter.transform.zoom);return"custom"===e.type?!n&&e.shouldRedrape():!n&&e.hasTransition()}))}_clearLineLayersFromRenderCache(){let e=!1;for(const t of this._style._getSources())if(t instanceof kt){e=!0;break}if(!e)return;const n={};for(let e=0;e<this._style.order.length;++e){const r=this._style._layers[this._style.order[e]],i=this._style._getLayerSourceCache(r);if(i&&!n[i.id]&&!r.isHidden(this.painter.transform.zoom)&&"line"===r.type&&r.widthExpression()instanceof t.ZoomDependentExpression){n[i.id]=!0;for(const t of this.proxyCoords){const e=this.proxyToSource[t.key][i.id];if(e)for(const t of e)this._clearRenderCacheForTile(i.id,t)}}}}_clearRasterLayersFromRenderCache(){let t=!1;for(const e in this._style._sourceCaches)if(this._style._sourceCaches[e]._source instanceof At){t=!0;break}if(!t)return;const e={};for(let t=0;t<this._style.order.length;++t){const n=this._style._layers[this._style.order[t]],r=this._style._getLayerSourceCache(n);if(!r||e[r.id])continue;if(n.isHidden(this.painter.transform.zoom)||"raster"!==n.type)continue;const i=n.paint.get("raster-fade-duration");for(const t of this.proxyCoords){const e=this.proxyToSource[t.key][r.id];if(e)for(const t of e){const e=Mn(r.getTile(t),r.findLoadedParent(t,0),r,this.painter.transform,i);(1!==e.opacity||0!==e.mix)&&this._clearRenderCacheForTile(r.id,t)}}}}_setupDrapedRenderBatches(){const t=this._style.order,e=t.length;if(0===e)return;const n=[];let r,i=0,o=this._style._layers[t[i]];for(;!this._style.isLayerDraped(o)&&o.isHidden(this.painter.transform.zoom)&&++i<e;)o=this._style._layers[t[i]];for(;i<e;++i){const e=this._style._layers[t[i]];e.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(e)?void 0===r&&(r=i):void 0!==r&&(n.push({start:r,end:i-1}),r=void 0))}void 0!==r&&n.push({start:r,end:i-1}),this._drapedRenderBatches=n}_setupRenderCache(t){const e=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,e.renderCache.length>e.renderCachePool.length){const t=Object.values(e.proxyCachedFBO);e.proxyCachedFBO={};for(let n=0;n<t.length;++n){const r=Object.values(t[n]);e.renderCachePool.push(...r)}}return}this._clearRasterLayersFromRenderCache();const n=this.proxyCoords,r=this._tilesDirty;for(let i=n.length-1;i>=0;i--){const o=n[i];if(e.getTileByID(o.key),void 0!==e.proxyCachedFBO[o.key]){const n=t[o.key],i=this.proxyToSource[o.key];let s=0;for(const t in i){const e=i[t],o=n[t];if(!o||o.length!==e.length||e.some(((e,n)=>e!==o[n]||r[t]&&r[t].hasOwnProperty(e.key)))){s=-1;break}++s}for(const t in e.proxyCachedFBO[o.key])e.renderCache[e.proxyCachedFBO[o.key][t]].dirty=s<0||s!==Object.values(n).length}}const i=[...this._drapedRenderBatches];i.sort(((t,e)=>e.end-e.start-(t.end-t.start)));for(const t of i)for(const r of n){if(e.proxyCachedFBO[r.key])continue;let n=e.renderCachePool.pop();void 0===n&&e.renderCache.length<50&&(n=e.renderCache.length,e.renderCache.push(this._createFBO())),void 0!==n&&(e.proxyCachedFBO[r.key]={},e.proxyCachedFBO[r.key][t.start]=n,e.renderCache[n].dirty=!0)}this._tilesDirty={}}_setupStencil(t,e,n,r){if(!r||!this._sourceTilesOverlap[r.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const i=this.painter.context,o=i.gl;if(e.length<=1)return void(this._overlapStencilType=!1);let s;if(n.isTileClipped())s=e.length,this._overlapStencilMode.test={func:o.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(e[0].overscaledZ>e[e.length-1].overscaledZ))return void(this._overlapStencilType=!1);s=1,this._overlapStencilMode.test={func:o.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+s>255&&(i.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=s,this._overlapStencilMode.ref=this._stencilRef,n.isTileClipped()&&this._renderTileClippingMasks(e,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(e){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[e.key]),this._overlapStencilMode):t.StencilMode.disabled}_renderTileClippingMasks(e,n){const r=this.painter,i=this.painter.context,o=i.gl;r._tileClippingMaskIDs={},i.setColorMode(t.ColorMode.disabled),i.setDepthMode(t.DepthMode.disabled);const s=r.useProgram("clippingMask");for(const a of e){const e=r._tileClippingMaskIDs[a.key]=--n;s.draw(i,o.TRIANGLES,t.DepthMode.disabled,new t.StencilMode({func:o.ALWAYS,mask:0},e,255,o.KEEP,o.KEEP,o.REPLACE),t.ColorMode.disabled,t.CullFaceMode.disabled,An(a.projMatrix),"$clipping",r.tileExtentBuffer,r.quadTriangleIndexBuffer,r.tileExtentSegments)}}pointCoordinate(e){const n=this.painter.transform;if(e.x<0||e.x>n.width||e.y<0||e.y>n.height)return null;const r=[e.x,e.y,1,1];t.transformMat4$1(r,r,n.pixelMatrixInverse),t.scale$1(r,r,1/r[3]),r[0]/=n.worldSize,r[1]/=n.worldSize;const i=n._camera.position,o=t.mercatorZfromAltitude(1,n.center.lat),s=[i[0],i[1],i[2]/o,0],a=t.subtract([],r.slice(0,3),s);t.normalize(a,a);const c=this.raycast(s,a,this._exaggeration);return null!==c&&c?(t.scaleAndAdd(s,s,a,c),s[3]=s[2],s[2]*=o,s):null}drawDepth(){const e=this.painter,n=e.context,r=this.proxySourceCache,i=Math.ceil(e.width),o=Math.ceil(e.height);if(!this._depthFBO||this._depthFBO.width===i&&this._depthFBO.height===o||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const e=n.gl,r=n.createFramebuffer(i,o,!0);n.activeTexture.set(e.TEXTURE0);const s=new t.Texture(n,{width:i,height:o,data:null},e.RGBA);s.bind(e.NEAREST,e.CLAMP_TO_EDGE),r.colorAttachment.set(s.texture);const a=n.createRenderbuffer(n.gl.DEPTH_COMPONENT16,i,o);r.depthAttachment.set(a),this._depthFBO=r,this._depthTexture=s}n.bindFramebuffer.set(this._depthFBO.framebuffer),n.viewport.set([0,0,i,o]),function(e,n,r,i){if("globe"===e.transform.projection.name)return;const o=e.context,s=o.gl;o.clear({depth:1});const a=e.useProgram("terrainDepth"),c=new t.DepthMode(s.LESS,t.DepthMode.ReadWrite,e.depthRangeFor3D);for(const e of i){const i=r.getTile(e),l=xn(e.projMatrix,0);n.setupElevationDraw(i,a),a.draw(o,s.TRIANGLES,c,t.StencilMode.disabled,t.ColorMode.unblended,t.CullFaceMode.backCCW,l,"terrain_depth",n.gridBuffer,n.gridIndexBuffer,n.gridNoSkirtSegments)}}(e,this,r,this.proxyCoords)}_setupProxiedCoordsForOrtho(t,e,n){if(t.getSource()instanceof It)return this._setupProxiedCoordsForImageSource(t,e,n);this._findCoveringTileCache[t.id]=this._findCoveringTileCache[t.id]||{};const r=this.proxiedCoords[t.id]=[],i=this.proxyCoords;for(let e=0;e<i.length;e++){const o=i[e],s=this._findTileCoveringTileID(o,t);if(s){const e=this._createProxiedId(o,s,n[o.key]&&n[o.key][t.id]);r.push(e),this.proxyToSource[o.key][t.id]=[e]}}let o=!1;for(let i=0;i<e.length;i++){const s=t.getTile(e[i]);if(!s||!s.hasData())continue;const a=this._findTileCoveringTileID(s.tileID,this.proxySourceCache);if(a&&a.tileID.canonical.z!==s.tileID.canonical.z){const e=this.proxyToSource[a.tileID.key][t.id],i=this._createProxiedId(a.tileID,s,n[a.tileID.key]&&n[a.tileID.key][t.id]);e?e.splice(e.length-1,0,i):this.proxyToSource[a.tileID.key][t.id]=[i],r.push(i),o=!0}}this._sourceTilesOverlap[t.id]=o}_setupProxiedCoordsForImageSource(e,n,r){if(!e.getSource().loaded())return;const i=this.proxiedCoords[e.id]=[],o=this.proxyCoords,s=e.getSource(),a=new t.Point(s.tileID.x,s.tileID.y)._div(1<<s.tileID.z),c=s.coordinates.map(t.MercatorCoordinate.fromLngLat).reduce(((t,e)=>(t.min.x=Math.min(t.min.x,e.x-a.x),t.min.y=Math.min(t.min.y,e.y-a.y),t.max.x=Math.max(t.max.x,e.x-a.x),t.max.y=Math.max(t.max.y,e.y-a.y),t)),{min:new t.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new t.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),l=(e,n)=>{const r=e.wrap+e.canonical.x/(1<<e.canonical.z),i=e.canonical.y/(1<<e.canonical.z),o=t.EXTENT/(1<<e.canonical.z),s=n.wrap+n.canonical.x/(1<<n.canonical.z),a=n.canonical.y/(1<<n.canonical.z);return r+o<s+c.min.x||r>s+c.max.x||i+o<a+c.min.y||i>a+c.max.y};for(let t=0;t<o.length;t++){const s=o[t];for(let t=0;t<n.length;t++){const o=e.getTile(n[t]);if(!o||!o.hasData())continue;if(l(s,o.tileID))continue;const a=this._createProxiedId(s,o,r[s.key]&&r[s.key][e.id]),c=this.proxyToSource[s.key][e.id];c?c.push(a):this.proxyToSource[s.key][e.id]=[a],i.push(a)}}}_createProxiedId(e,n,r){let i=this.orthoMatrix;if(r){const t=r.find((t=>t.key===n.tileID.key));if(t)return t}if(n.tileID.key!==e.key){const r=e.canonical.z-n.tileID.canonical.z;let o,s,a;i=t.create();const c=n.tileID.wrap-e.wrap<<e.overscaledZ;r>0?(o=t.EXTENT>>r,s=o*((n.tileID.canonical.x<<r)-e.canonical.x+c),a=o*((n.tileID.canonical.y<<r)-e.canonical.y)):(o=t.EXTENT<<-r,s=t.EXTENT*(n.tileID.canonical.x-(e.canonical.x+c<<-r)),a=t.EXTENT*(n.tileID.canonical.y-(e.canonical.y<<-r))),t.ortho(i,0,o,0,o,0,1),t.translate(i,i,[s,a,0])}return new On(n.tileID,e.key,i)}_findTileCoveringTileID(e,n){let r=n.getTile(e);if(r&&r.hasData())return r;const i=this._findCoveringTileCache[n.id],o=i[e.key];if(r=o?n.getTileByID(o):null,r&&r.hasData()||null===o)return r;let s=r?r.tileID:e,a=s.overscaledZ;const c=n.getSource().minzoom,l=[];if(!o){const i=n.getSource().maxzoom;if(e.canonical.z>=i){const r=e.canonical.z-i;n.getSource().reparseOverscaled?(a=Math.max(e.canonical.z+2,n.transform.tileZoom),s=new t.OverscaledTileID(a,e.wrap,i,e.canonical.x>>r,e.canonical.y>>r)):0!==r&&(a=i,s=new t.OverscaledTileID(a,e.wrap,i,e.canonical.x>>r,e.canonical.y>>r))}s.key!==e.key&&(l.push(s.key),r=n.getTile(s))}const u=t=>{l.forEach((e=>{i[e]=t})),l.length=0};for(a-=1;a>=c&&(!r||!r.hasData());a--){r&&u(r.tileID.key);const t=s.calculateScaledKey(a);if(r=n.getTileByID(t),r&&r.hasData())break;const e=i[t];if(null===e)break;void 0===e?l.push(t):r=n.getTileByID(e)}return u(r?r.tileID.key:null),r&&r.hasData()?r:null}findDEMTileFor(t){return this.enabled?this._findTileCoveringTileID(t,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(t,e){let n=this._tilesDirty[t];n||(n=this._tilesDirty[t]={}),n[e.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const e=function(e){let n=0;const r=new t.StructArrayLayout2ui4,i=131;for(let t=1;t<129;t++){for(let e=1;e<129;e++)n=t*i+e,r.emplaceBack(n,n+1),r.emplaceBack(n,n+i),r.emplaceBack(n+1,n+i),128===t&&r.emplaceBack(n+i,n+i+1);r.emplaceBack(n+1,n+1+i)}return r}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(e),this.wireframeSegments=t.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,e.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Ln{static cacheKey(t,e,n,r){let i=`${e}${r?r.cacheKey:""}`;for(const e of n)t.usedDefines.includes(e)&&(i+=`/${e}`);return i}constructor(e,n,r,i,o,s){const a=e.gl;this.program=a.createProgram();const c=function(t){const e=[];for(let n=0;n<t.length;n++){if(null===t[n])continue;const r=t[n].split(" ");e.push(r.pop())}return e}(r.staticAttributes),l=i?i.getBinderAttributes():[],u=c.concat(l);let h=i?i.defines():[];h=h.concat(s.map((t=>`#define ${t}`)));const p=e.isWebGL2?"#version 300 es\n":"",f=p+h.concat(e.extStandardDerivatives&&0===p.length?"#extension GL_OES_standard_derivatives : enable\n".concat(un):un,un,ln,cn.fragmentSource,sn.fragmentSource,r.fragmentSource).join("\n"),d=p+h.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",ln,cn.vertexSource,sn.vertexSource,on.vertexSource,r.vertexSource).join("\n"),g=a.createShader(a.FRAGMENT_SHADER);if(a.isContextLost())return void(this.failedToCreate=!0);a.shaderSource(g,f),a.compileShader(g),a.attachShader(this.program,g);const m=a.createShader(a.VERTEX_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(m,d),a.compileShader(m),a.attachShader(this.program,m),this.attributes={},this.numAttributes=u.length;for(let t=0;t<this.numAttributes;t++)u[t]&&(a.bindAttribLocation(this.program,t,u[t]),this.attributes[u[t]]=t);a.linkProgram(this.program),a.deleteShader(m),a.deleteShader(g),this.fixedUniforms=o(e),this.binderUniforms=i?i.getUniforms(e):[],s.includes("TERRAIN")&&(this.terrainUniforms=(e=>({u_dem:new t.Uniform1i(e),u_dem_prev:new t.Uniform1i(e),u_dem_unpack:new t.Uniform4f(e),u_dem_tl:new t.Uniform2f(e),u_dem_scale:new t.Uniform1f(e),u_dem_tl_prev:new t.Uniform2f(e),u_dem_scale_prev:new t.Uniform1f(e),u_dem_size:new t.Uniform1f(e),u_dem_lerp:new t.Uniform1f(e),u_exaggeration:new t.Uniform1f(e),u_depth:new t.Uniform1i(e),u_depth_size_inv:new t.Uniform2f(e),u_meter_to_dem:new t.Uniform1f(e),u_label_plane_matrix_inv:new t.UniformMatrix4f(e)}))(e)),s.includes("GLOBE")&&(this.globeUniforms=(e=>({u_tile_tl_up:new t.Uniform3f(e),u_tile_tr_up:new t.Uniform3f(e),u_tile_br_up:new t.Uniform3f(e),u_tile_bl_up:new t.Uniform3f(e),u_tile_up_scale:new t.Uniform1f(e)}))(e)),s.includes("FOG")&&(this.fogUniforms=(e=>({u_fog_matrix:new t.UniformMatrix4f(e),u_fog_range:new t.Uniform2f(e),u_fog_color:new t.Uniform4f(e),u_fog_horizon_blend:new t.Uniform1f(e),u_fog_temporal_offset:new t.Uniform1f(e),u_frustum_tl:new t.Uniform3f(e),u_frustum_tr:new t.Uniform3f(e),u_frustum_br:new t.Uniform3f(e),u_frustum_bl:new t.Uniform3f(e),u_globe_pos:new t.Uniform3f(e),u_globe_radius:new t.Uniform1f(e),u_globe_transition:new t.Uniform1f(e),u_is_globe:new t.Uniform1i(e),u_viewport:new t.Uniform2f(e)}))(e))}}setTerrainUniformValues(t,e){if(!this.terrainUniforms)return;const n=this.terrainUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const t in e)n[t]&&n[t].set(this.program,t,e[t])}}setGlobeUniformValues(t,e){if(!this.globeUniforms)return;const n=this.globeUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const t in e)n[t]&&n[t].set(this.program,t,e[t])}}setFogUniformValues(t,e){if(!this.fogUniforms)return;const n=this.fogUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const t in e)n[t].set(this.program,t,e[t])}}draw(t,e,n,r,i,o,s,a,c,l,u,h,p,f,d){const g=t.gl;if(this.failedToCreate)return;t.program.set(this.program),t.setDepthMode(n),t.setStencilMode(r),t.setColorMode(i),t.setCullFace(o);for(const t of Object.keys(this.fixedUniforms))this.fixedUniforms[t].set(this.program,t,s[t]);f&&f.setUniforms(this.program,t,this.binderUniforms,h,{zoom:p});const m={[g.LINES]:2,[g.TRIANGLES]:3,[g.LINE_STRIP]:1}[e];for(const n of u.get()){const r=n.vaos||(n.vaos={});(r[a]||(r[a]=new dn)).bind(t,this,c,f?f.getPaintVertexBuffers():[],l,n.vertexOffset,d||[]),g.drawElements(e,n.primitiveLength*m,g.UNSIGNED_SHORT,n.primitiveOffset*m*2)}}}function Dn(t,e){const n=Math.pow(2,e.tileID.overscaledZ),r=e.tileSize*Math.pow(2,t.transform.tileZoom)/n,i=r*(e.tileID.canonical.x+e.tileID.wrap*n),o=r*e.tileID.canonical.y;return{u_image:0,u_texsize:e.imageAtlasTexture.size,u_tile_units_to_pixels:1/O(e,1,t.transform.tileZoom),u_pixel_coord_upper:[i>>16,o>>16],u_pixel_coord_lower:[65535&i,65535&o]}}const Rn=t.create(),Nn=(e,n,r,i,o,s,a,c,l,u,h)=>{const p=n.style.light,f=p.properties.get("position"),d=[f.x,f.y,f.z],g=t.create$1();"viewport"===p.properties.get("anchor")&&(t.fromRotation(g,-n.transform.angle),t.transformMat3(d,d,g));const m=p.properties.get("color"),y=n.transform,_={u_matrix:e,u_lightpos:d,u_lightintensity:p.properties.get("intensity"),u_lightcolor:[m.r,m.g,m.b],u_vertical_gradient:+r,u_opacity:i,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Rn,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:o,u_edge_radius:s};return"globe"===y.projection.name&&(_.u_tile_id=[a.canonical.x,a.canonical.y,1<<a.canonical.z],_.u_zoom_transition=l,_.u_inv_rot_matrix=h,_.u_merc_center=u,_.u_up_dir=y.projection.upVector(new t.CanonicalTileID(0,0,0),u[0]*t.EXTENT,u[1]*t.EXTENT),_.u_height_lift=c),_},jn=(e,n,r,i,o,s,a,c,l,u,h,p)=>{const f=Nn(e,n,r,i,o,s,a,l,u,h,p),d={u_height_factor:-Math.pow(2,a.overscaledZ)/c.tileSize/8};return t.extend(f,Dn(n,c),d)},zn=t=>({u_matrix:t}),Bn=(e,n,r)=>t.extend(zn(e),Dn(n,r)),Fn=(t,e)=>({u_matrix:t,u_world:e}),Un=(e,n,r,i)=>t.extend(Bn(e,n,r),{u_world:i}),Vn=t.create(),qn=(e,n,r,i,o,s)=>{const a=e.transform,c="globe"===a.projection.name;let l;if("map"===s.paint.get("circle-pitch-alignment"))if(c){const e=t.globePixelsToTileUnits(a.zoom,n.canonical)*a._pixelsPerMercatorPixel;l=Float32Array.from([e,0,0,e])}else l=a.calculatePixelsToTileUnitsMatrix(r);else l=new Float32Array([a.pixelsToGLUnits[0],0,0,a.pixelsToGLUnits[1]]);const u={u_camera_to_center_distance:a.cameraToCenterDistance,u_matrix:e.translatePosMatrix(n.projMatrix,r,s.paint.get("circle-translate"),s.paint.get("circle-translate-anchor")),u_device_pixel_ratio:t.exported.devicePixelRatio,u_extrude_scale:l,u_inv_rot_matrix:Vn,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(c){u.u_inv_rot_matrix=i,u.u_merc_center=o,u.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],u.u_zoom_transition=t.globeToMercatorTransition(a.zoom);const e=o[0]*t.EXTENT,r=o[1]*t.EXTENT;u.u_up_dir=a.projection.upVector(new t.CanonicalTileID(0,0,0),e,r)}return u},Wn=t=>{const e=[];return"map"===t.paint.get("circle-pitch-alignment")&&e.push("PITCH_WITH_MAP"),"map"===t.paint.get("circle-pitch-scale")&&e.push("SCALE_WITH_MAP"),e},Gn=(e,n,r,i)=>{const o=t.EXTENT/r.tileSize;return{u_matrix:e,u_camera_to_center_distance:n.getCameraToCenterDistance(i),u_extrude_scale:[n.pixelsToGLUnits[0]/o,n.pixelsToGLUnits[1]/o]}},$n=(t,e,n=1)=>({u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:n}),Hn=t.create(),Zn=(e,n,r,i,o,s,a)=>{const c=e.transform,l="globe"===c.projection.name,u=l?t.globePixelsToTileUnits(c.zoom,n.canonical)*c._pixelsPerMercatorPixel:O(r,1,s),h={u_matrix:n.projMatrix,u_extrude_scale:u,u_intensity:a,u_inv_rot_matrix:Hn,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(l){h.u_inv_rot_matrix=i,h.u_merc_center=o,h.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],h.u_zoom_transition=t.globeToMercatorTransition(c.zoom);const e=o[0]*t.EXTENT,r=o[1]*t.EXTENT;h.u_up_dir=c.projection.upVector(new t.CanonicalTileID(0,0,0),e,r)}return h},Yn=(t,e,n,r,i,o,s)=>{const a=t.transform,c=a.calculatePixelsToTileUnitsMatrix(e);return{u_matrix:Jn(t,e,n,r),u_pixels_to_tile_units:c,u_device_pixel_ratio:o,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:i,u_texsize:Qn(n)?e.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Kn(e,t.transform),u_alpha_discard_threshold:0,u_trim_offset:s}},Xn=(t,e,n,r,i)=>{const o=t.transform;return{u_matrix:Jn(t,e,n,r),u_texsize:e.imageAtlasTexture.size,u_pixels_to_tile_units:o.calculatePixelsToTileUnitsMatrix(e),u_device_pixel_ratio:i,u_image:0,u_tile_units_to_pixels:Kn(e,o),u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Kn(t,e){return 1/O(t,1,e.tileZoom)}function Jn(t,e,n,r){return t.translatePosMatrix(r||e.tileID.projMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}function Qn(t){const e=t.paint.get("line-dasharray").value;return e.value||"constant"!==e.kind}const tr=(t,e,n,r,i,o)=>{return{u_matrix:t,u_tl_parent:e,u_scale_parent:n,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(a=i.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(s=i.paint.get("raster-contrast"),s>0?1/(1-s):1+s),u_spin_weights:er(i.paint.get("raster-hue-rotate")),u_perspective_transform:o};var s,a};function er(t){t*=Math.PI/180;const e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}const nr=t.create(),rr=(e,n,r,i,o,s,a,c,l,u,h,p,f,d,g,m)=>{const y=o.transform,_={u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:y.cameraToCenterDistance,u_rotate_symbol:+r,u_aspect_ratio:y.width/y.height,u_fade_change:o.options.fadeDuration?o.symbolFadeChange:1,u_matrix:s,u_label_plane_matrix:a,u_coord_matrix:c,u_is_text:+l,u_pitch_with_map:+i,u_texsize:u,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:nr,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:nr,u_up_vector:[0,-1,0]};return"globe"===m.name&&(_.u_tile_id=[h.canonical.x,h.canonical.y,1<<h.canonical.z],_.u_zoom_transition=p,_.u_inv_rot_matrix=d,_.u_merc_center=f,_.u_camera_forward=y._camera.forward(),_.u_ecef_origin=t.globeECEFOrigin(y.globeMatrix,h.toUnwrapped()),_.u_tile_matrix=Float32Array.from(y.globeMatrix),_.u_up_vector=g),_},ir=(e,n,r,i,o,s,a,c,l,u,h,p,f,d,g,m,y)=>t.extend(rr(e,n,r,i,o,s,a,c,l,u,p,f,d,g,m,y),{u_gamma_scale:i?o.transform.cameraToCenterDistance*Math.cos(o.terrain?0:o.transform._pitch):1,u_device_pixel_ratio:t.exported.devicePixelRatio,u_is_halo:+h}),or=(e,n,r,i,o,s,a,c,l,u,h,p,f,d,g,m)=>t.extend(ir(e,n,r,i,o,s,a,c,!0,l,!0,h,p,f,d,g,m),{u_texsize_icon:u,u_texture_icon:1}),sr=(t,e,n)=>({u_matrix:t,u_opacity:e,u_color:n}),ar=(e,n,r,i,o)=>t.extend(function(t,e,n){const r=e.imageManager.getPattern(t.toString()),{width:i,height:o}=e.imageManager.getPixelSize(),s=Math.pow(2,n.tileID.overscaledZ),a=n.tileSize*Math.pow(2,e.transform.tileZoom)/s,c=a*(n.tileID.canonical.x+n.tileID.wrap*s),l=a*n.tileID.canonical.y;return{u_image:0,u_pattern_tl:r.tl,u_pattern_br:r.br,u_texsize:[i,o],u_pattern_size:r.displaySize,u_tile_units_to_pixels:1/O(n,1,e.transform.tileZoom),u_pixel_coord_upper:[c>>16,l>>16],u_pixel_coord_lower:[65535&c,65535&l]}}(i,r,o),{u_matrix:e,u_opacity:n}),cr={fillExtrusion:e=>({u_matrix:new t.UniformMatrix4f(e),u_lightpos:new t.Uniform3f(e),u_lightintensity:new t.Uniform1f(e),u_lightcolor:new t.Uniform3f(e),u_vertical_gradient:new t.Uniform1f(e),u_opacity:new t.Uniform1f(e),u_edge_radius:new t.Uniform1f(e),u_ao:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_up_dir:new t.Uniform3f(e),u_height_lift:new t.Uniform1f(e)}),fillExtrusionPattern:e=>({u_matrix:new t.UniformMatrix4f(e),u_lightpos:new t.Uniform3f(e),u_lightintensity:new t.Uniform1f(e),u_lightcolor:new t.Uniform3f(e),u_vertical_gradient:new t.Uniform1f(e),u_height_factor:new t.Uniform1f(e),u_edge_radius:new t.Uniform1f(e),u_ao:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_up_dir:new t.Uniform3f(e),u_height_lift:new t.Uniform1f(e),u_image:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_pixel_coord_upper:new t.Uniform2f(e),u_pixel_coord_lower:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e),u_opacity:new t.Uniform1f(e)}),fill:e=>({u_matrix:new t.UniformMatrix4f(e)}),fillPattern:e=>({u_matrix:new t.UniformMatrix4f(e),u_image:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_pixel_coord_upper:new t.Uniform2f(e),u_pixel_coord_lower:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e)}),fillOutline:e=>({u_matrix:new t.UniformMatrix4f(e),u_world:new t.Uniform2f(e)}),fillOutlinePattern:e=>({u_matrix:new t.UniformMatrix4f(e),u_world:new t.Uniform2f(e),u_image:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_pixel_coord_upper:new t.Uniform2f(e),u_pixel_coord_lower:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e)}),circle:e=>({u_camera_to_center_distance:new t.Uniform1f(e),u_extrude_scale:new t.UniformMatrix2f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_up_dir:new t.Uniform3f(e)}),collisionBox:e=>({u_matrix:new t.UniformMatrix4f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_extrude_scale:new t.Uniform2f(e)}),collisionCircle:e=>({u_matrix:new t.UniformMatrix4f(e),u_inv_matrix:new t.UniformMatrix4f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_viewport_size:new t.Uniform2f(e)}),debug:e=>({u_color:new t.UniformColor(e),u_matrix:new t.UniformMatrix4f(e),u_overlay:new t.Uniform1i(e),u_overlay_scale:new t.Uniform1f(e)}),clippingMask:e=>({u_matrix:new t.UniformMatrix4f(e)}),heatmap:e=>({u_extrude_scale:new t.Uniform1f(e),u_intensity:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_up_dir:new t.Uniform3f(e)}),heatmapTexture:e=>({u_image:new t.Uniform1i(e),u_color_ramp:new t.Uniform1i(e),u_opacity:new t.Uniform1f(e)}),hillshade:e=>({u_matrix:new t.UniformMatrix4f(e),u_image:new t.Uniform1i(e),u_latrange:new t.Uniform2f(e),u_light:new t.Uniform2f(e),u_shadow:new t.UniformColor(e),u_highlight:new t.UniformColor(e),u_accent:new t.UniformColor(e)}),hillshadePrepare:e=>({u_matrix:new t.UniformMatrix4f(e),u_image:new t.Uniform1i(e),u_dimension:new t.Uniform2f(e),u_zoom:new t.Uniform1f(e),u_unpack:new t.Uniform4f(e)}),line:e=>({u_matrix:new t.UniformMatrix4f(e),u_pixels_to_tile_units:new t.UniformMatrix2f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_units_to_pixels:new t.Uniform2f(e),u_dash_image:new t.Uniform1i(e),u_gradient_image:new t.Uniform1i(e),u_image_height:new t.Uniform1f(e),u_texsize:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e),u_alpha_discard_threshold:new t.Uniform1f(e),u_trim_offset:new t.Uniform2f(e)}),linePattern:e=>({u_matrix:new t.UniformMatrix4f(e),u_texsize:new t.Uniform2f(e),u_pixels_to_tile_units:new t.UniformMatrix2f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_image:new t.Uniform1i(e),u_units_to_pixels:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e),u_alpha_discard_threshold:new t.Uniform1f(e)}),raster:e=>({u_matrix:new t.UniformMatrix4f(e),u_tl_parent:new t.Uniform2f(e),u_scale_parent:new t.Uniform1f(e),u_fade_t:new t.Uniform1f(e),u_opacity:new t.Uniform1f(e),u_image0:new t.Uniform1i(e),u_image1:new t.Uniform1i(e),u_brightness_low:new t.Uniform1f(e),u_brightness_high:new t.Uniform1f(e),u_saturation_factor:new t.Uniform1f(e),u_contrast_factor:new t.Uniform1f(e),u_spin_weights:new t.Uniform3f(e),u_perspective_transform:new t.Uniform2f(e)}),symbolIcon:e=>({u_is_size_zoom_constant:new t.Uniform1i(e),u_is_size_feature_constant:new t.Uniform1i(e),u_size_t:new t.Uniform1f(e),u_size:new t.Uniform1f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_rotate_symbol:new t.Uniform1i(e),u_aspect_ratio:new t.Uniform1f(e),u_fade_change:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_label_plane_matrix:new t.UniformMatrix4f(e),u_coord_matrix:new t.UniformMatrix4f(e),u_is_text:new t.Uniform1i(e),u_pitch_with_map:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_camera_forward:new t.Uniform3f(e),u_tile_matrix:new t.UniformMatrix4f(e),u_up_vector:new t.Uniform3f(e),u_ecef_origin:new t.Uniform3f(e),u_texture:new t.Uniform1i(e)}),symbolSDF:e=>({u_is_size_zoom_constant:new t.Uniform1i(e),u_is_size_feature_constant:new t.Uniform1i(e),u_size_t:new t.Uniform1f(e),u_size:new t.Uniform1f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_rotate_symbol:new t.Uniform1i(e),u_aspect_ratio:new t.Uniform1f(e),u_fade_change:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_label_plane_matrix:new t.UniformMatrix4f(e),u_coord_matrix:new t.UniformMatrix4f(e),u_is_text:new t.Uniform1i(e),u_pitch_with_map:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_texture:new t.Uniform1i(e),u_gamma_scale:new t.Uniform1f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_camera_forward:new t.Uniform3f(e),u_tile_matrix:new t.UniformMatrix4f(e),u_up_vector:new t.Uniform3f(e),u_ecef_origin:new t.Uniform3f(e),u_is_halo:new t.Uniform1i(e)}),symbolTextAndIcon:e=>({u_is_size_zoom_constant:new t.Uniform1i(e),u_is_size_feature_constant:new t.Uniform1i(e),u_size_t:new t.Uniform1f(e),u_size:new t.Uniform1f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_rotate_symbol:new t.Uniform1i(e),u_aspect_ratio:new t.Uniform1f(e),u_fade_change:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_label_plane_matrix:new t.UniformMatrix4f(e),u_coord_matrix:new t.UniformMatrix4f(e),u_is_text:new t.Uniform1i(e),u_pitch_with_map:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_texsize_icon:new t.Uniform2f(e),u_texture:new t.Uniform1i(e),u_texture_icon:new t.Uniform1i(e),u_gamma_scale:new t.Uniform1f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_is_halo:new t.Uniform1i(e)}),background:e=>({u_matrix:new t.UniformMatrix4f(e),u_opacity:new t.Uniform1f(e),u_color:new t.UniformColor(e)}),backgroundPattern:e=>({u_matrix:new t.UniformMatrix4f(e),u_opacity:new t.Uniform1f(e),u_image:new t.Uniform1i(e),u_pattern_tl:new t.Uniform2f(e),u_pattern_br:new t.Uniform2f(e),u_texsize:new t.Uniform2f(e),u_pattern_size:new t.Uniform2f(e),u_pixel_coord_upper:new t.Uniform2f(e),u_pixel_coord_lower:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e)}),terrainRaster:vn,terrainDepth:vn,skybox:e=>({u_matrix:new t.UniformMatrix4f(e),u_sun_direction:new t.Uniform3f(e),u_cubemap:new t.Uniform1i(e),u_opacity:new t.Uniform1f(e),u_temporal_offset:new t.Uniform1f(e)}),skyboxGradient:e=>({u_matrix:new t.UniformMatrix4f(e),u_color_ramp:new t.Uniform1i(e),u_center_direction:new t.Uniform3f(e),u_radius:new t.Uniform1f(e),u_opacity:new t.Uniform1f(e),u_temporal_offset:new t.Uniform1f(e)}),skyboxCapture:e=>({u_matrix_3f:new t.UniformMatrix3f(e),u_sun_direction:new t.Uniform3f(e),u_sun_intensity:new t.Uniform1f(e),u_color_tint_r:new t.Uniform4f(e),u_color_tint_m:new t.Uniform4f(e),u_luminance:new t.Uniform1f(e)}),globeRaster:e=>({u_proj_matrix:new t.UniformMatrix4f(e),u_globe_matrix:new t.UniformMatrix4f(e),u_normalize_matrix:new t.UniformMatrix4f(e),u_merc_matrix:new t.UniformMatrix4f(e),u_zoom_transition:new t.Uniform1f(e),u_merc_center:new t.Uniform2f(e),u_image0:new t.Uniform1i(e),u_grid_matrix:new t.UniformMatrix3f(e),u_skirt_height:new t.Uniform1f(e),u_frustum_tl:new t.Uniform3f(e),u_frustum_tr:new t.Uniform3f(e),u_frustum_br:new t.Uniform3f(e),u_frustum_bl:new t.Uniform3f(e),u_globe_pos:new t.Uniform3f(e),u_globe_radius:new t.Uniform1f(e),u_viewport:new t.Uniform2f(e)}),globeAtmosphere:e=>({u_frustum_tl:new t.Uniform3f(e),u_frustum_tr:new t.Uniform3f(e),u_frustum_br:new t.Uniform3f(e),u_frustum_bl:new t.Uniform3f(e),u_horizon:new t.Uniform1f(e),u_transition:new t.Uniform1f(e),u_fadeout_range:new t.Uniform1f(e),u_color:new t.Uniform4f(e),u_high_color:new t.Uniform4f(e),u_space_color:new t.Uniform4f(e),u_star_intensity:new t.Uniform1f(e),u_star_density:new t.Uniform1f(e),u_star_size:new t.Uniform1f(e),u_temporal_offset:new t.Uniform1f(e),u_horizon_angle:new t.Uniform1f(e),u_rotation_matrix:new t.UniformMatrix4f(e)})};let lr;function ur(e,n,r,i,o,s,a){const c=e.context,l=c.gl,u=e.transform,h=e.useProgram("collisionBox"),p=[];let f=0,d=0;for(let g=0;g<i.length;g++){const m=i[g],y=n.getTile(m),_=y.getBucket(r);if(!_)continue;const v=ve(m,_,u);let x=v;0===o[0]&&0===o[1]||(x=e.translatePosMatrix(v,y,o,s));const b=a?_.textCollisionBox:_.iconCollisionBox,w=_.collisionCircleArray;if(w.length>0){const e=t.create(),n=x;t.mul(e,_.placementInvProjMatrix,u.glCoordMatrix),t.mul(e,e,_.placementViewportMatrix),p.push({circleArray:w,circleOffset:d,transform:n,invTransform:e,projection:_.getProjection()}),f+=w.length/4,d=f}b&&(e.terrain&&e.terrain.setupElevationDraw(y,h),h.draw(c,l.LINES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,Gn(x,u,y,_.getProjection()),r.id,b.layoutVertexBuffer,b.indexBuffer,b.segments,null,u.zoom,null,[b.collisionVertexBuffer,b.collisionVertexBufferExt]))}if(!a||!p.length)return;const g=e.useProgram("collisionCircle"),m=new t.StructArrayLayout2f1f2i16;m.resize(4*f),m._trim();let y=0;for(const t of p)for(let e=0;e<t.circleArray.length/4;e++){const n=4*e,r=t.circleArray[n+0],i=t.circleArray[n+1],o=t.circleArray[n+2],s=t.circleArray[n+3];m.emplace(y++,r,i,o,s,0),m.emplace(y++,r,i,o,s,1),m.emplace(y++,r,i,o,s,2),m.emplace(y++,r,i,o,s,3)}(!lr||lr.length<2*f)&&(lr=function(e){const n=2*e,r=new t.StructArrayLayout3ui6;r.resize(n),r._trim();for(let t=0;t<n;t++){const e=6*t;r.uint16[e+0]=4*t+0,r.uint16[e+1]=4*t+1,r.uint16[e+2]=4*t+2,r.uint16[e+3]=4*t+2,r.uint16[e+4]=4*t+3,r.uint16[e+5]=4*t+0}return r}(f));const _=c.createIndexBuffer(lr,!0),v=c.createVertexBuffer(m,t.collisionCircleLayout.members,!0);for(const n of p){const i={u_matrix:n.transform,u_inv_matrix:n.invTransform,u_camera_to_center_distance:(x=u).getCameraToCenterDistance(n.projection),u_viewport_size:[x.width,x.height]};g.draw(c,l.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,i,r.id,v,_,t.SegmentVector.simpleSegment(0,2*n.circleOffset,n.circleArray.length,n.circleArray.length/2),null,u.zoom)}var x;v.destroy(),_.destroy()}const hr=t.create();function pr({width:e,height:n,anchor:r,textOffset:i,textScale:o},s){const{horizontalAlign:a,verticalAlign:c}=t.getAnchorAlignment(r),l=-(a-.5)*e,u=-(c-.5)*n,h=t.evaluateVariableOffset(r,i);return new t.Point((l/o+h[0])*s,(u/o+h[1])*s)}function fr(e,n,r,i,o,s,a,c,l,u,h){const p=e.text.placedSymbolArray,f=e.text.dynamicLayoutVertexArray,d=e.icon.dynamicLayoutVertexArray,g={},m=e.getProjection(),y=xe(c,m,s),_=s.elevation,v=m.upVectorScale(c.canonical,s.center.lat,s.worldSize).metersToTile;f.clear();for(let d=0;d<p.length;d++){const x=p.get(d),{tileAnchorX:b,tileAnchorY:w,numGlyphs:E}=x,T=x.hidden||!x.crossTileID||e.allowVerticalPlacement&&!x.placedOrientation?null:i[x.crossTileID];if(T){let i=0,p=0,d=0;if(_){const t=_?_.getAtTileOffset(c,b,w):0,[e,n,r]=m.upVector(c.canonical,b,w);i=t*e*v,p=t*n*v,d=t*r*v}let[S,k,A,M]=ie(x.projectedAnchorX+i,x.projectedAnchorY+p,x.projectedAnchorZ+d,r?y:a);const I=oe(s.getCameraToCenterDistance(m),M);let C=o.evaluateSizeForFeature(e.textSizeData,u,x)*I/t.ONE_EM;r&&(C*=e.tilePixelRatio/l);const O=pr(T,C);r?(({x:S,y:k,z:A}=m.projectTilePoint(b+O.x,w+O.y,c.canonical)),[S,k,A]=ie(S+i,k+p,A+d,a)):(n&&O._rotate(-s.angle),S+=O.x,k+=O.y,A=0);const P=e.allowVerticalPlacement&&x.placedOrientation===t.WritingMode.vertical?Math.PI/2:0;for(let e=0;e<E;e++)t.addDynamicAttributes(f,S,k,A,P);h&&x.associatedIconIndex>=0&&(g[x.associatedIconIndex]={x:S,y:k,z:A,angle:P})}else de(E,f)}if(h){d.clear();const n=e.icon.placedSymbolArray;for(let e=0;e<n.length;e++){const r=n.get(e),{numGlyphs:i}=r,o=g[e];if(r.hidden||!o)de(i,d);else{const{x:e,y:n,z:r,angle:s}=o;for(let o=0;o<i;o++)t.addDynamicAttributes(d,e,n,r,s)}}e.icon.dynamicLayoutVertexBuffer.updateData(d)}e.text.dynamicLayoutVertexBuffer.updateData(f)}function dr(t,e,n){return n.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function gr(e,n,r,i,o,s,a,c,l,u,h,p){const f=e.context,d=f.gl,g=e.transform,m="map"===c,y="map"===l,_=m&&"point"!==r.layout.get("symbol-placement"),v=m&&!y&&!_,x=void 0!==r.layout.get("symbol-sort-key").constantOr(1);let b=!1;const w=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),E=[t.mercatorXfromLng(g.center.lng),t.mercatorYfromLat(g.center.lat)],T=r.layout.get("text-variable-anchor"),S="globe"===g.projection.name,k=[],A=[0,-1,0];let M=A;!S&&!g.mercatorFromTransition||m||(M=function(e){const n=e._camera.getWorldToCamera(e.worldSize,1),r=t.multiply([],n,e.globeMatrix);t.invert(r,r);const i=[0,0,0],o=[0,1,0,0];return t.transformMat4$1(o,o,r),i[0]=o[0],i[1]=o[1],i[2]=o[2],t.normalize(i,i),i}(g));for(const c of i){const i=n.getTile(c),l=i.getBucket(r);if(!l)continue;if("mercator"===l.projection.name&&S)continue;const h=o?l.text:l.icon;if(!h||l.fullyClipped||!h.segments.get().length)continue;const p=h.programConfigurations.get(r.id),f=o||l.sdfIcons,w=o?l.textSizeData:l.iconSizeData,I=y||0!==g.pitch,C=t.evaluateSizeForZoom(w,g.zoom);let O,P,L,D,R=[0,0],N=null;if(o)P=i.glyphAtlasTexture,L=d.LINEAR,O=i.glyphAtlasTexture.size,l.iconsInText&&(R=i.imageAtlasTexture.size,N=i.imageAtlasTexture,D=I||e.options.rotating||e.options.zooming||"composite"===w.kind||"camera"===w.kind?d.LINEAR:d.NEAREST);else{const t=1!==r.layout.get("icon-size").constantOr(0)||l.iconsNeedLinear;P=i.imageAtlasTexture,L=f||e.options.rotating||e.options.zooming||t||I?d.LINEAR:d.NEAREST,O=i.imageAtlasTexture.size}const j="globe"===l.projection.name,z=j?M:A,B=j?t.globeToMercatorTransition(g.zoom):0,F=xe(c,l.getProjection(),g),U=g.calculatePixelsToTileUnitsMatrix(i),V=ee(F,i.tileID.canonical,y,m,g,l.getProjection(),U),q=e.terrain&&y&&_?t.invert(t.create(),V):hr,W=re(F,i.tileID.canonical,y,m,g,l.getProjection(),U),G=T&&l.hasTextData(),$="none"!==r.layout.get("icon-text-fit")&&G&&l.hasIconData();if(_){const t=g.elevation,n=t?t.getAtTileOffsetFunc(c,g.center.lat,g.worldSize,l.getProjection()):null,r=ne(F,i.tileID.canonical,y,m,g,l.getProjection(),U);ae(l,F,e,o,r,W,y,u,n,c)}const H=_||o&&T||$,Z=e.translatePosMatrix(F,i,s,a),Y=H?hr:V,X=e.translatePosMatrix(W,i,s,a,!0),K=l.getProjection().createInversionMatrix(g,c.canonical),J=[];e.terrainRenderModeElevated()&&y&&J.push("PITCH_WITH_MAP_TERRAIN"),j&&J.push("PROJECTION_GLOBE_VIEW"),H&&J.push("PROJECTED_POS_ON_VIEWPORT");const Q=f&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);let tt;tt=f?l.iconsInText?or(w.kind,C,v,y,e,Z,Y,X,O,R,c,B,E,K,z,l.getProjection()):ir(w.kind,C,v,y,e,Z,Y,X,o,O,!0,c,B,E,K,z,l.getProjection()):rr(w.kind,C,v,y,e,Z,Y,X,o,O,c,B,E,K,z,l.getProjection());const et={program:e.useProgram(dr(f,o,l),p,J),buffers:h,uniformValues:tt,atlasTexture:P,atlasTextureIcon:N,atlasInterpolation:L,atlasInterpolationIcon:D,isSDF:f,hasHalo:Q,tile:i,labelPlaneMatrixInv:q};if(x&&l.canOverlap){b=!0;const e=h.segments.get();for(const n of e)k.push({segments:new t.SegmentVector([n]),sortKey:n.sortKey,state:et})}else k.push({segments:h.segments,sortKey:0,state:et})}b&&k.sort(((t,e)=>t.sortKey-e.sortKey));for(const t of k){const n=t.state;if(e.terrain&&e.terrain.setupElevationDraw(n.tile,n.program,{useDepthForOcclusion:!S,labelPlaneMatrixInv:n.labelPlaneMatrixInv}),f.activeTexture.set(d.TEXTURE0),n.atlasTexture.bind(n.atlasInterpolation,d.CLAMP_TO_EDGE),n.atlasTextureIcon&&(f.activeTexture.set(d.TEXTURE1),n.atlasTextureIcon&&n.atlasTextureIcon.bind(n.atlasInterpolationIcon,d.CLAMP_TO_EDGE)),n.isSDF){const i=n.uniformValues;n.hasHalo&&(i.u_is_halo=1,mr(n.buffers,t.segments,r,e,n.program,w,h,p,i)),i.u_is_halo=0}mr(n.buffers,t.segments,r,e,n.program,w,h,p,n.uniformValues)}}function mr(e,n,r,i,o,s,a,c,l){const u=i.context,h=[e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer,e.globeExtVertexBuffer];o.draw(u,u.gl.TRIANGLES,s,a,c,t.CullFaceMode.disabled,l,r.id,e.layoutVertexBuffer,e.indexBuffer,n,r.paint,i.transform.zoom,e.programConfigurations.get(r.id),h)}function yr(e,n,r,i,o,s,a){const c=e.context.gl,l=r.paint.get("fill-pattern"),u=l&&l.constantOr(1);let h,p,f,d,g;a?(p=u&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",h=c.LINES):(p=u?"fillPattern":"fill",h=c.TRIANGLES);for(const m of i){const i=n.getTile(m);if(u&&!i.patternsLoaded())continue;const y=i.getBucket(r);if(!y)continue;e.prepareDrawTile();const _=y.programConfigurations.get(r.id),v=e.useProgram(p,_);u&&(e.context.activeTexture.set(c.TEXTURE0),i.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),_.updatePaintBuffers());const x=l.constantOr(null);if(x&&i.imageAtlas){const t=i.imageAtlas.patternPositions[x.toString()];t&&_.setConstantPatternPositions(t)}const b=e.translatePosMatrix(m.projMatrix,i,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"));if(a){d=y.indexBuffer2,g=y.segments2;const t=e.terrain&&e.terrain.renderingToTexture?e.terrain.drapeBufferSize:[c.drawingBufferWidth,c.drawingBufferHeight];f="fillOutlinePattern"===p&&u?Un(b,e,i,t):Fn(b,t)}else d=y.indexBuffer,g=y.segments,f=u?Bn(b,e,i):zn(b);e.prepareDrawProgram(e.context,v,m.toUnwrapped()),v.draw(e.context,h,o,e.stencilModeForClipping(m),s,t.CullFaceMode.disabled,f,r.id,y.layoutVertexBuffer,d,g,r.paint,e.transform.zoom,_)}}function _r(e,n,r,i,o,s,a){const c=e.context,l=c.gl,u=e.transform,h=r.paint.get("fill-extrusion-pattern"),p=h.constantOr(1),f=r.paint.get("fill-extrusion-opacity"),d=[r.paint.get("fill-extrusion-ambient-occlusion-intensity"),r.paint.get("fill-extrusion-ambient-occlusion-radius")],g=r.layout.get("fill-extrusion-edge-radius"),m=g>0&&!r.paint.get("fill-extrusion-rounded-roof"),y=m?0:g,_="globe"===u.projection.name?t.fillExtrusionHeightLift():0,v="globe"===u.projection.name,x=v?t.globeToMercatorTransition(u.zoom):0,b=[t.mercatorXfromLng(u.center.lng),t.mercatorYfromLat(u.center.lat)],w=[];v&&w.push("PROJECTION_GLOBE_VIEW"),d[0]>0&&w.push("FAUX_AO"),m&&w.push("ZERO_ROOF_RADIUS");for(const g of i){const i=n.getTile(g),m=i.getBucket(r);if(!m||m.projection.name!==u.projection.name)continue;const E=m.programConfigurations.get(r.id),T=e.useProgram(p?"fillExtrusionPattern":"fillExtrusion",E,w);if(e.terrain){const t=e.terrain;if(e.style.terrainSetForDrapingOnly())t.setupElevationDraw(i,T,{useMeterToDem:!0});else{if(!m.enableTerrain)continue;if(t.setupElevationDraw(i,T,{useMeterToDem:!0}),vr(c,n,g,m,r,t),!m.centroidVertexBuffer){const t=T.attributes.a_centroid_pos;void 0!==t&&l.vertexAttrib2f(t,0,0)}}}p&&(e.context.activeTexture.set(l.TEXTURE0),i.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),E.updatePaintBuffers());const S=h.constantOr(null);if(S&&i.imageAtlas){const t=i.imageAtlas.patternPositions[S.toString()];t&&E.setConstantPatternPositions(t)}const k=e.translatePosMatrix(g.projMatrix,i,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),A=u.projection.createInversionMatrix(u,g.canonical),M=r.paint.get("fill-extrusion-vertical-gradient"),I=p?jn(k,e,M,f,d,y,g,i,_,x,b,A):Nn(k,e,M,f,d,y,g,_,x,b,A);e.prepareDrawProgram(c,T,g.toUnwrapped());const C=[];e.terrain&&C.push(m.centroidVertexBuffer),v&&C.push(m.layoutVertexExtBuffer),T.draw(c,c.gl.TRIANGLES,o,s,a,t.CullFaceMode.backCCW,I,r.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,r.paint,e.transform.zoom,E,C)}}function vr(e,n,r,i,o,s){const a=[e=>{let n=e.canonical.x-1,r=e.wrap;return n<0&&(n=(1<<e.canonical.z)-1,r--),new t.OverscaledTileID(e.overscaledZ,r,e.canonical.z,n,e.canonical.y)},e=>{let n=e.canonical.x+1,r=e.wrap;return n===1<<e.canonical.z&&(n=0,r++),new t.OverscaledTileID(e.overscaledZ,r,e.canonical.z,n,e.canonical.y)},e=>new t.OverscaledTileID(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,(0===e.canonical.y?1<<e.canonical.z:e.canonical.y)-1),e=>new t.OverscaledTileID(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y===(1<<e.canonical.z)-1?0:e.canonical.y+1)],c=t=>{const e=n.getSource().minzoom,r=t=>{const e=n.getTileByID(t);if(e&&e.hasData())return e.getBucket(o)},i=[0,-1,1];for(const n of i){if(t.overscaledZ+n<e)continue;const i=r(t.calculateScaledKey(t.overscaledZ+n));if(i)return i}},l=[0,0,0],u=(e,n)=>(l[0]=Math.min(e.min.y,n.min.y),l[1]=Math.max(e.max.y,n.max.y),l[2]=t.EXTENT-n.min.x>e.max.x?n.min.x-t.EXTENT:e.max.x,l),h=(e,n)=>(l[0]=Math.min(e.min.x,n.min.x),l[1]=Math.max(e.max.x,n.max.x),l[2]=t.EXTENT-n.min.y>e.max.y?n.min.y-t.EXTENT:e.max.y,l),p=[(t,e)=>u(t,e),(t,e)=>u(e,t),(t,e)=>h(t,e),(t,e)=>h(e,t)],f=new t.Point(0,0);let d,g,m;const y=(e,n,i,o,a)=>{const c=[[o?i:e,o?e:i,0],[o?i:n,o?n:i,0]],l=a<0?t.EXTENT+a:a,u=[o?l:(e+n)/2,o?(e+n)/2:l,0];return 0===i&&a<0||0!==i&&a>0?s.getForTilePoints(m,[u],!0,g):c.push(u),s.getForTilePoints(r,c,!0,d),Math.max(c[0][2],c[1][2],u[2])/s.exaggeration()};for(let e=0;e<4;e++){const n=(e<2?1:5)-e,o=i.borders[e];if(0===o.length)continue;const l=m=a[e](r),u=c(l);if(!(u&&u instanceof t.FillExtrusionBucket&&u.enableTerrain))continue;if(i.borderDoneWithNeighborZ[e]===u.canonical.z&&u.borderDoneWithNeighborZ[n]===i.canonical.z)continue;if(g=s.findDEMTileFor(l),!g||!g.dem)continue;if(!d){const t=s.findDEMTileFor(r);if(!t||!t.dem)return;d=t}const h=u.borders[n];let _=0;const v=u.borderDoneWithNeighborZ[n]!==i.canonical.z;if(i.canonical.z===u.canonical.z){for(let r=0;r<o.length;r++){const s=i.featuresOnBorder[o[r]],a=s.borders[e];let c;for(;_<h.length&&(c=u.featuresOnBorder[h[_]],!(c.borders[n][1]>a[0]+3));)v&&u.encodeCentroid(void 0,c,!1),_++;if(c&&_<h.length){const r=_;let o=0;for(;!(c.borders[n][0]>a[1]-3)&&(o++,++_!==h.length);)c=u.featuresOnBorder[h[_]];if(c=u.featuresOnBorder[h[r]],s.intersectsCount()>1||c.intersectsCount()>1||1!==o){1!==o&&(_=r),i.encodeCentroid(void 0,s,!1),v&&u.encodeCentroid(void 0,c,!1);continue}const l=p[e](s,c),d=e%2?t.EXTENT-1:0;f.x=y(l[0],Math.min(t.EXTENT-1,l[1]),d,e<2,l[2]),f.y=0,i.encodeCentroid(f,s,!1),v&&u.encodeCentroid(f,c,!1)}else i.encodeCentroid(void 0,s,!1)}i.borderDoneWithNeighborZ[e]=u.canonical.z,i.needsCentroidUpdate=!0,v&&(u.borderDoneWithNeighborZ[n]=i.canonical.z,u.needsCentroidUpdate=!0)}else{for(const t of o)i.encodeCentroid(void 0,i.featuresOnBorder[t],!1);if(v){for(const t of h)u.encodeCentroid(void 0,u.featuresOnBorder[t],!1);u.borderDoneWithNeighborZ[n]=i.canonical.z,u.needsCentroidUpdate=!0}i.borderDoneWithNeighborZ[e]=u.canonical.z,i.needsCentroidUpdate=!0}}(i.needsCentroidUpdate||!i.centroidVertexBuffer&&0!==i.centroidVertexArray.length)&&i.uploadCentroid(e)}const xr=new t.Color(1,0,0,1),br=new t.Color(0,1,0,1),wr=new t.Color(0,0,1,1),Er=new t.Color(1,0,1,1),Tr=new t.Color(0,1,1,1);function Sr(e,n,r){const i=e.context,o=e.transform,s=i.gl,a="globe"===o.projection.name,c=a?["PROJECTION_GLOBE_VIEW"]:null;let l=r.projMatrix;if(a&&t.globeToMercatorTransition(o.zoom)>0){const e=t.transitionTileAABBinECEF(r.canonical,o),n=t.globeDenormalizeECEF(e);l=t.multiply(new Float32Array(16),o.globeMatrix,n),t.multiply(l,o.projMatrix,l)}const u=e.useProgram("debug",null,c),h=n.getTileByID(r.key);e.terrain&&e.terrain.setupElevationDraw(h,u);const p=t.DepthMode.disabled,f=t.StencilMode.disabled,d=e.colorModeForRenderPass(),g="$debug";i.activeTexture.set(s.TEXTURE0),e.emptyTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE),a?h._makeGlobeTileDebugBuffers(e.context,o):h._makeDebugTileBoundsBuffers(e.context,o.projection);const m=h._tileDebugBuffer||e.debugBuffer,y=h._tileDebugIndexBuffer||e.debugIndexBuffer,_=h._tileDebugSegments||e.debugSegments;u.draw(i,s.LINE_STRIP,p,f,d,t.CullFaceMode.disabled,$n(l,t.Color.red),g,m,y,_,null,null,null,[h._globeTileDebugBorderBuffer]);const v=h.latestRawTileData,x=Math.floor((v&&v.byteLength||0)/1024),b=n.getTile(r).tileSize,w=512/Math.min(b,512)*(r.overscaledZ/o.zoom)*.5;let E=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(E+=` => ${r.overscaledZ}`),E+=` ${x}kb`,function(t,e){t.initDebugOverlayCanvas();const n=t.debugOverlayCanvas,r=t.context.gl,i=t.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,n.width,n.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(e,5,5),i.strokeText(e,5,5),t.debugOverlayTexture.update(n),t.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(e,E);const T=h._tileDebugTextBuffer||e.debugBuffer,S=h._tileDebugTextIndexBuffer||e.quadTriangleIndexBuffer,k=h._tileDebugTextSegments||e.debugSegments;u.draw(i,s.TRIANGLES,p,f,t.ColorMode.alphaBlended,t.CullFaceMode.disabled,$n(l,t.Color.transparent,w),g,T,S,k,null,null,null,[h._globeTileDebugTextBuffer])}function kr(t,e,n,r){Mr(t,0,e+n/2,t.transform.width,n,r)}function Ar(t,e,n,r){Mr(t,e-n/2,0,n,t.transform.height,r)}function Mr(e,n,r,i,o,s){const a=e.context,c=a.gl;c.enable(c.SCISSOR_TEST),c.scissor(n*t.exported.devicePixelRatio,r*t.exported.devicePixelRatio,i*t.exported.devicePixelRatio,o*t.exported.devicePixelRatio),a.clear({color:s}),c.disable(c.SCISSOR_TEST)}const Ir=t.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Cr}=Ir;function Or(t,e,n,r){t.emplaceBack(e,n,r)}class Pr{constructor(e){this.vertexArray=new t.StructArrayLayout3f12,this.indices=new t.StructArrayLayout3ui6,Or(this.vertexArray,-1,-1,1),Or(this.vertexArray,1,-1,1),Or(this.vertexArray,-1,1,1),Or(this.vertexArray,1,1,1),Or(this.vertexArray,-1,-1,-1),Or(this.vertexArray,1,-1,-1),Or(this.vertexArray,-1,1,-1),Or(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=e.createVertexBuffer(this.vertexArray,Cr),this.indexBuffer=e.createIndexBuffer(this.indices),this.segment=t.SegmentVector.simpleSegment(0,0,36,12)}}function Lr(e,n,r,i,o,s){const a=e.gl,c=n.paint.get("sky-atmosphere-color"),l=n.paint.get("sky-atmosphere-halo-color"),u=n.paint.get("sky-atmosphere-sun-intensity"),h=((t,e,n,r,i)=>({u_matrix_3f:t,u_sun_direction:e,u_sun_intensity:n,u_color_tint_r:[r.r,r.g,r.b,r.a],u_color_tint_m:[i.r,i.g,i.b,i.a],u_luminance:5e-5}))(t.fromMat4(t.create$1(),i),o,u,c,l);a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+s,n.skyboxTexture,0),r.draw(e,a.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,t.ColorMode.unblended,t.CullFaceMode.frontCW,h,"skyboxCapture",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}const Dr=t.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Rr{constructor(e){const n=new t.StructArrayLayout5f20;n.emplaceBack(-1,1,1,0,0),n.emplaceBack(1,1,1,1,0),n.emplaceBack(1,-1,1,1,1),n.emplaceBack(-1,-1,1,0,1);const r=new t.StructArrayLayout3ui6;r.emplaceBack(0,1,2),r.emplaceBack(2,3,0),this.vertexBuffer=e.createVertexBuffer(n,Dr.members),this.indexBuffer=e.createIndexBuffer(r),this.segments=t.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Nr={symbol:function(e,n,r,i,o){if("translucent"!==e.renderPass)return;const s=t.StencilMode.disabled,a=e.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(e,n,r,i,o,s,a){const c=n.transform,l="map"===o,u="map"===s;for(const n of e){const e=i.getTile(n),o=e.getBucket(r);if(!o||!o.text||!o.text.segments.get().length)continue;const s=t.evaluateSizeForZoom(o.textSizeData,c.zoom),h=xe(n,o.getProjection(),c),p=c.calculatePixelsToTileUnitsMatrix(e),f=ee(h,e.tileID.canonical,u,l,c,o.getProjection(),p),d="none"!==r.layout.get("icon-text-fit")&&o.hasIconData();if(s){const r=Math.pow(2,c.zoom-e.tileID.overscaledZ);fr(o,l,u,a,t.symbolSize,c,f,n,r,s,d)}}}(i,e,r,n,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),o),0!==r.paint.get("icon-opacity").constantOr(1)&&gr(e,n,r,i,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),s,a),0!==r.paint.get("text-opacity").constantOr(1)&&gr(e,n,r,i,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),s,a),n.map.showCollisionBoxes&&(ur(e,n,r,i,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),ur(e,n,r,i,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))},circle:function(e,n,r,i){if("translucent"!==e.renderPass)return;const o=r.paint.get("circle-opacity"),s=r.paint.get("circle-stroke-width"),a=r.paint.get("circle-stroke-opacity"),c=void 0!==r.layout.get("circle-sort-key").constantOr(1);if(0===o.constantOr(1)&&(0===s.constantOr(1)||0===a.constantOr(1)))return;const l=e.context,u=l.gl,h=e.transform,p=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),f=t.StencilMode.disabled,d=e.colorModeForRenderPass(),g="globe"===h.projection.name,m=[t.mercatorXfromLng(h.center.lng),t.mercatorYfromLat(h.center.lat)],y=[];for(let o=0;o<i.length;o++){const s=i[o],a=n.getTile(s),l=a.getBucket(r);if(!l||l.projection.name!==h.projection.name)continue;const u=l.programConfigurations.get(r.id),p=Wn(r);g&&p.push("PROJECTION_GLOBE_VIEW");const f=e.useProgram("circle",u,p),d=l.layoutVertexBuffer,_=l.globeExtVertexBuffer,v=l.indexBuffer,x=h.projection.createInversionMatrix(h,s.canonical),b={programConfiguration:u,program:f,layoutVertexBuffer:d,globeExtVertexBuffer:_,indexBuffer:v,uniformValues:qn(e,s,a,x,m,r),tile:a};if(c){const e=l.segments.get();for(const n of e)y.push({segments:new t.SegmentVector([n]),sortKey:n.sortKey,state:b})}else y.push({segments:l.segments,sortKey:0,state:b})}c&&y.sort(((t,e)=>t.sortKey-e.sortKey));const _={useDepthForOcclusion:!g};for(const n of y){const{programConfiguration:i,program:o,layoutVertexBuffer:s,globeExtVertexBuffer:a,indexBuffer:c,uniformValues:g,tile:m}=n.state,y=n.segments;e.terrain&&e.terrain.setupElevationDraw(m,o,_),e.prepareDrawProgram(l,o,m.tileID.toUnwrapped()),o.draw(l,u.TRIANGLES,p,f,d,t.CullFaceMode.disabled,g,r.id,s,c,y,r.paint,h.zoom,i,[a])}},heatmap:function(e,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){const o=e.context,s=o.gl,a=t.StencilMode.disabled,c=new t.ColorMode([s.ONE,s.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,n,r){const i=t.gl,o=e.width*r,s=e.height*r;t.activeTexture.set(i.TEXTURE1),t.viewport.set([0,0,o,s]);let a=n.heatmapFbo;if(!a||a&&(a.width!==o||a.height!==s)){a&&a.destroy();const e=i.createTexture();i.bindTexture(i.TEXTURE_2D,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),a=n.heatmapFbo=t.createFramebuffer(o,s,!1),function(t,e,n,r,i,o){const s=t.gl;s.texImage2D(s.TEXTURE_2D,0,t.isWebGL2&&t.extRenderToTextureHalfFloat?s.RGBA16F:s.RGBA,i,o,0,s.RGBA,t.extRenderToTextureHalfFloat?t.isWebGL2?s.HALF_FLOAT:t.extTextureHalfFloat.HALF_FLOAT_OES:s.UNSIGNED_BYTE,null),r.colorAttachment.set(n)}(t,0,e,a,o,s)}else i.bindTexture(i.TEXTURE_2D,a.colorAttachment.get()),t.bindFramebuffer.set(a.framebuffer)}(o,e,r,"globe"===e.transform.projection.name?.5:.25),o.clear({color:t.Color.transparent});const l=e.transform,u="globe"===l.projection.name,h=u?["PROJECTION_GLOBE_VIEW"]:null,p=u?t.CullFaceMode.frontCCW:t.CullFaceMode.disabled,f=[t.mercatorXfromLng(l.center.lng),t.mercatorYfromLat(l.center.lat)];for(let d=0;d<i.length;d++){const g=i[d];if(n.hasRenderableParent(g))continue;const m=n.getTile(g),y=m.getBucket(r);if(!y||y.projection.name!==l.projection.name)continue;const _=y.programConfigurations.get(r.id),v=e.useProgram("heatmap",_,h),{zoom:x}=e.transform;e.terrain&&e.terrain.setupElevationDraw(m,v),e.prepareDrawProgram(o,v,g.toUnwrapped());const b=l.projection.createInversionMatrix(l,g.canonical);v.draw(o,s.TRIANGLES,t.DepthMode.disabled,a,c,p,Zn(e,g,m,b,f,x,r.paint.get("heatmap-intensity")),r.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,r.paint,e.transform.zoom,_,u?[y.globeExtVertexBuffer]:null)}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){const r=e.context,i=r.gl,o=n.heatmapFbo;if(!o)return;r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);let s=n.colorRampTexture;s||(s=n.colorRampTexture=new t.Texture(r,n.colorRamp,i.RGBA)),s.bind(i.LINEAR,i.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(r,i.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,((t,e,n,r)=>({u_image:0,u_color_ramp:1,u_opacity:e.paint.get("heatmap-opacity")}))(0,n),n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}(e,r))},line:function(e,n,r,i){if("translucent"!==e.renderPass)return;const o=r.paint.get("line-opacity"),s=r.paint.get("line-width");if(0===o.constantOr(1)||0===s.constantOr(1))return;const a=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),c=e.colorModeForRenderPass(),l=e.terrain&&e.terrain.renderingToTexture?1:t.exported.devicePixelRatio,u=r.paint.get("line-dasharray"),h=u.constantOr(1),p=r.layout.get("line-cap"),f=r.paint.get("line-pattern"),d=f.constantOr(1),g=r.paint.get("line-gradient"),m=d?"linePattern":"line",y=e.context,_=y.gl,v=(t=>{const e=[];Qn(t)&&e.push("RENDER_LINE_DASH"),t.paint.get("line-gradient")&&e.push("RENDER_LINE_GRADIENT");const n=t.paint.get("line-trim-offset");0===n[0]&&0===n[1]||e.push("RENDER_LINE_TRIM_OFFSET");const r=t.paint.get("line-pattern").constantOr(1),i=1!==t.paint.get("line-opacity").constantOr(1);return!r&&i&&e.push("RENDER_LINE_ALPHA_DISCARD"),e})(r);let x=v.includes("RENDER_LINE_ALPHA_DISCARD");e.terrain&&e.terrain.clipOrMaskOverlapStencilType()&&(x=!1);for(const o of i){const i=n.getTile(o);if(d&&!i.patternsLoaded())continue;const s=i.getBucket(r);if(!s)continue;e.prepareDrawTile();const b=s.programConfigurations.get(r.id),w=e.useProgram(m,b,v),E=f.constantOr(null);if(E&&i.imageAtlas){const t=i.imageAtlas.patternPositions[E.toString()];t&&b.setConstantPatternPositions(t)}const T=u.constantOr(null),S=p.constantOr(null);if(!d&&T&&S&&i.lineAtlas){const t=i.lineAtlas.getDash(T,S);t&&b.setConstantPatternPositions(t)}let[k,A]=r.paint.get("line-trim-offset");if("round"===S||"square"===S){const t=1;k!==A&&(0===k&&(k-=t),1===A&&(A+=t))}const M=e.terrain?o.projMatrix:null,I=d?Xn(e,i,r,M,l):Yn(e,i,r,M,s.lineClipsArray.length,l,[k,A]);if(g){const i=s.gradients[r.id];let a=i.texture;if(r.gradientVersion!==i.version){let c=256;if(r.stepInterpolant){const r=n.getSource().maxzoom,i=o.canonical.z===r?Math.ceil(1<<e.transform.maxZoom-o.canonical.z):1;c=t.clamp(t.nextPowerOfTwo(s.maxLineLength/t.EXTENT*1024*i),256,y.maxTextureSize)}i.gradient=t.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:c,image:i.gradient||void 0,clips:s.lineClipsArray}),i.texture?i.texture.update(i.gradient):i.texture=new t.Texture(y,i.gradient,_.RGBA),i.version=r.gradientVersion,a=i.texture}y.activeTexture.set(_.TEXTURE1),a.bind(r.stepInterpolant?_.NEAREST:_.LINEAR,_.CLAMP_TO_EDGE)}h&&(y.activeTexture.set(_.TEXTURE0),i.lineAtlasTexture.bind(_.LINEAR,_.REPEAT),b.updatePaintBuffers()),d&&(y.activeTexture.set(_.TEXTURE0),i.imageAtlasTexture.bind(_.LINEAR,_.CLAMP_TO_EDGE),b.updatePaintBuffers()),e.prepareDrawProgram(y,w,o.toUnwrapped());const C=n=>{w.draw(y,_.TRIANGLES,a,n,c,t.CullFaceMode.disabled,I,r.id,s.layoutVertexBuffer,s.indexBuffer,s.segments,r.paint,e.transform.zoom,b,[s.layoutVertexBuffer2])};if(x){const n=e.stencilModeForClipping(o).ref;0===n&&e.terrain&&y.clear({stencil:0});const r={func:_.EQUAL,mask:255};I.u_alpha_discard_threshold=.8,C(new t.StencilMode(r,n,255,_.KEEP,_.KEEP,_.INVERT)),I.u_alpha_discard_threshold=0,C(new t.StencilMode(r,n,255,_.KEEP,_.KEEP,_.KEEP))}else C(e.stencilModeForClipping(o))}x&&(e.resetStencilClippingMasks(),e.terrain&&y.clear({stencil:0}))},fill:function(e,n,r,i){const o=r.paint.get("fill-color"),s=r.paint.get("fill-opacity");if(0===s.constantOr(1))return;const a=e.colorModeForRenderPass(),c=r.paint.get("fill-pattern"),l=e.opaquePassEnabledForLayer()&&!c.constantOr(1)&&1===o.constantOr(t.Color.transparent).a&&1===s.constantOr(0)?"opaque":"translucent";if(e.renderPass===l){const o=e.depthModeForSublayer(1,"opaque"===e.renderPass?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly);yr(e,n,r,i,o,a,!1)}if("translucent"===e.renderPass&&r.paint.get("fill-antialias")){const o=e.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,t.DepthMode.ReadOnly);yr(e,n,r,i,o,a,!0)}},"fill-extrusion":function(e,n,r,i){const o=r.paint.get("fill-extrusion-opacity");if(0!==o&&"translucent"===e.renderPass){const s=new t.DepthMode(e.context.gl.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);if(1!==o||r.paint.get("fill-extrusion-pattern").constantOr(1))_r(e,n,r,i,s,t.StencilMode.disabled,t.ColorMode.disabled),_r(e,n,r,i,s,e.stencilModeFor3D(),e.colorModeForRenderPass()),e.resetStencilClippingMasks();else{const o=e.colorModeForRenderPass();_r(e,n,r,i,s,t.StencilMode.disabled,o)}}},hillshade:function(e,n,r,i){if("offscreen"!==e.renderPass&&"translucent"!==e.renderPass)return;const o=e.context,s=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),a=e.colorModeForRenderPass(),c=e.terrain&&e.terrain.renderingToTexture,[l,u]="translucent"!==e.renderPass||c?[{},i]:e.stencilConfigForOverlap(i);for(const i of u){const o=n.getTile(i);if(o.needsHillshadePrepare&&"offscreen"===e.renderPass)_n(e,o,r,s,t.StencilMode.disabled,a);else if("translucent"===e.renderPass){const t=c&&e.terrain?e.terrain.stencilModeForRTTOverlap(i):l[i.overscaledZ];mn(e,i,o,r,s,t,a)}}o.viewport.set([0,0,e.width,e.height]),e.resetStencilClippingMasks()},raster:function(e,n,r,i,o,s){if("translucent"!==e.renderPass)return;if(0===r.paint.get("raster-opacity"))return;if(!i.length)return;const a=e.context,c=a.gl,l=n.getSource(),u=e.useProgram("raster"),h=e.colorModeForRenderPass(),p=e.terrain&&e.terrain.renderingToTexture,[f,d]=l instanceof It||p?[{},i]:e.stencilConfigForOverlap(i),g=d[d.length-1].overscaledZ,m=!e.options.moving;for(const i of d){const o=p?t.DepthMode.disabled:e.depthModeForSublayer(i.overscaledZ-g,1===r.paint.get("raster-opacity")?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly,c.LESS),d=i.toUnwrapped(),y=n.getTile(i);if(p&&(!y||!y.hasData()))continue;const _=p?i.projMatrix:e.transform.calculateProjMatrix(d,m),v=e.terrain&&p?e.terrain.stencilModeForRTTOverlap(i):f[i.overscaledZ],x=s?0:r.paint.get("raster-fade-duration");y.registerFadeDuration(x);const b=n.findLoadedParent(i,0),w=Mn(y,b,n,e.transform,x);let E,T;e.terrain&&e.terrain.prepareDrawTile();const S="nearest"===r.paint.get("raster-resampling")?c.NEAREST:c.LINEAR;a.activeTexture.set(c.TEXTURE0),y.texture.bind(S,c.CLAMP_TO_EDGE),a.activeTexture.set(c.TEXTURE1),b?(b.texture.bind(S,c.CLAMP_TO_EDGE),E=Math.pow(2,b.tileID.overscaledZ-y.tileID.overscaledZ),T=[y.tileID.canonical.x*E%1,y.tileID.canonical.y*E%1]):y.texture.bind(S,c.CLAMP_TO_EDGE),y.texture.useMipmap&&a.extTextureFilterAnisotropic&&e.transform.pitch>20&&c.texParameterf(c.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax);const k=tr(_,T||[0,0],E||1,w,r,l instanceof It?l.perspectiveTransform:[0,0]);if(e.prepareDrawProgram(a,u,d),l instanceof It)l.boundsBuffer&&l.boundsSegments&&u.draw(a,c.TRIANGLES,o,t.StencilMode.disabled,h,t.CullFaceMode.disabled,k,r.id,l.boundsBuffer,e.quadTriangleIndexBuffer,l.boundsSegments);else{const{tileBoundsBuffer:n,tileBoundsIndexBuffer:i,tileBoundsSegments:s}=e.getTileBoundsBuffers(y);u.draw(a,c.TRIANGLES,o,v,h,t.CullFaceMode.disabled,k,r.id,n,i,s)}}e.resetStencilClippingMasks()},background:function(e,n,r,i){const o=r.paint.get("background-color"),s=r.paint.get("background-opacity");if(0===s)return;const a=e.context,c=a.gl,l=e.transform,u=l.tileSize,h=r.paint.get("background-pattern");if(e.isPatternMissing(h))return;const p=!h&&1===o.a&&1===s&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass!==p)return;const f=t.StencilMode.disabled,d=e.depthModeForSublayer(0,"opaque"===p?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly),g=e.colorModeForRenderPass(),m=e.useProgram(h?"backgroundPattern":"background");let y,_=i;_||(y=e.getBackgroundTiles(),_=Object.values(y).map((t=>t.tileID))),h&&(a.activeTexture.set(c.TEXTURE0),e.imageManager.bind(e.context));for(const p of _){const _=p.toUnwrapped(),v=i?p.projMatrix:e.transform.calculateProjMatrix(_);e.prepareDrawTile();const x=n?n.getTile(p):y?y[p.key]:new t.Tile(p,u,l.zoom,e),b=h?ar(v,s,e,h,{tileID:p,tileSize:u}):sr(v,s,o);e.prepareDrawProgram(a,m,_);const{tileBoundsBuffer:w,tileBoundsIndexBuffer:E,tileBoundsSegments:T}=e.getTileBoundsBuffers(x);m.draw(a,c.TRIANGLES,d,f,g,t.CullFaceMode.disabled,b,r.id,w,E,T)}},sky:function(e,n,r){const i=e.transform,o="mercator"===i.projection.name||"globe"===i.projection.name?1:t.smoothstep(7,8,i.zoom),s=r.paint.get("sky-opacity")*o;if(0===s)return;const a=e.context,c=r.paint.get("sky-type"),l=new t.DepthMode(a.gl.LEQUAL,t.DepthMode.ReadOnly,[0,1]),u=e.frameCounter/1e3%1;"atmosphere"===c?"offscreen"===e.renderPass?r.needsSkyboxCapture(e)&&(function(e,n,r,i){const o=e.context,s=o.gl;let a=n.skyboxFbo;if(!a){a=n.skyboxFbo=o.createFramebuffer(32,32,!1),n.skyboxGeometry=new Pr(o),n.skyboxTexture=o.gl.createTexture(),s.bindTexture(s.TEXTURE_CUBE_MAP,n.skyboxTexture),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_MAG_FILTER,s.LINEAR);for(let t=0;t<6;++t)s.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,s.RGBA,32,32,0,s.RGBA,s.UNSIGNED_BYTE,null)}o.bindFramebuffer.set(a.framebuffer),o.viewport.set([0,0,32,32]);const c=n.getCenter(e,!0),l=e.useProgram("skyboxCapture"),u=new Float64Array(16);t.identity(u),t.rotateY(u,u,.5*-Math.PI),Lr(o,n,l,u,c,0),t.identity(u),t.rotateY(u,u,.5*Math.PI),Lr(o,n,l,u,c,1),t.identity(u),t.rotateX(u,u,.5*-Math.PI),Lr(o,n,l,u,c,2),t.identity(u),t.rotateX(u,u,.5*Math.PI),Lr(o,n,l,u,c,3),t.identity(u),Lr(o,n,l,u,c,4),t.identity(u),t.rotateY(u,u,Math.PI),Lr(o,n,l,u,c,5),o.viewport.set([0,0,e.width,e.height])}(e,r),r.markSkyboxValid(e)):"sky"===e.renderPass&&function(e,n,r,i,o){const s=e.context,a=s.gl,c=e.transform,l=e.useProgram("skybox");s.activeTexture.set(a.TEXTURE0),a.bindTexture(a.TEXTURE_CUBE_MAP,n.skyboxTexture);const u=((t,e,n,r,i)=>({u_matrix:t,u_sun_direction:e,u_cubemap:0,u_opacity:r,u_temporal_offset:i}))(c.skyboxMatrix,n.getCenter(e,!1),0,i,o);e.prepareDrawProgram(s,l),l.draw(s,a.TRIANGLES,r,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.backCW,u,"skybox",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(e,r,l,s,u):"gradient"===c&&"sky"===e.renderPass&&function(e,n,r,i,o){const s=e.context,a=s.gl,c=e.transform,l=e.useProgram("skyboxGradient");n.skyboxGeometry||(n.skyboxGeometry=new Pr(s)),s.activeTexture.set(a.TEXTURE0);let u=n.colorRampTexture;u||(u=n.colorRampTexture=new t.Texture(s,n.colorRamp,a.RGBA)),u.bind(a.LINEAR,a.CLAMP_TO_EDGE);const h=((e,n,r,i,o)=>({u_matrix:e,u_color_ramp:0,u_center_direction:n,u_radius:t.degToRad(r),u_opacity:i,u_temporal_offset:o}))(c.skyboxMatrix,n.getCenter(e,!1),n.paint.get("sky-gradient-radius"),i,o);e.prepareDrawProgram(s,l),l.draw(s,a.TRIANGLES,r,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.backCW,h,"skyboxGradient",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(e,r,l,s,u)},debug:function(t,e,n){for(let r=0;r<n.length;r++)Sr(t,e,n[r])},custom:function(e,n,r,i){const o=e.context,s=r.implementation;if(!e.transform.projection.unsupportedLayers||!e.transform.projection.unsupportedLayers.includes("custom")||e.terrain&&(e.terrain.renderingToTexture||"offscreen"===e.renderPass)&&r.isLayerDraped()){if("offscreen"===e.renderPass){const n=s.prerender;if(n){if(e.setCustomLayerDefaults(),o.setColorMode(e.colorModeForRenderPass()),"globe"===e.transform.projection.name){const r=e.transform.pointMerc;n.call(s,o.gl,e.transform.customLayerMatrix(),e.transform.getProjection(),e.transform.globeToMercatorMatrix(),t.globeToMercatorTransition(e.transform.zoom),[r.x,r.y],e.transform.pixelsPerMeterRatio)}else n.call(s,o.gl,e.transform.customLayerMatrix());o.setDirty(),e.setBaseState()}}else if("translucent"===e.renderPass){if(e.terrain&&e.terrain.renderingToTexture){const n=s.renderToTile;if(n){const r=i[0].canonical,a=new t.MercatorCoordinate(r.x+i[0].wrap*(1<<r.z),r.y,r.z);o.setDepthMode(t.DepthMode.disabled),o.setStencilMode(t.StencilMode.disabled),o.setColorMode(e.colorModeForRenderPass()),e.setCustomLayerDefaults(),n.call(s,o.gl,a),o.setDirty(),e.setBaseState()}return}e.setCustomLayerDefaults(),o.setColorMode(e.colorModeForRenderPass()),o.setStencilMode(t.StencilMode.disabled);const n="3d"===s.renderingMode?new t.DepthMode(e.context.gl.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D):e.depthModeForSublayer(0,t.DepthMode.ReadOnly);if(o.setDepthMode(n),"globe"===e.transform.projection.name){const n=e.transform.pointMerc;s.render(o.gl,e.transform.customLayerMatrix(),e.transform.getProjection(),e.transform.globeToMercatorMatrix(),t.globeToMercatorTransition(e.transform.zoom),[n.x,n.y],e.transform.pixelsPerMeterRatio)}else s.render(o.gl,e.transform.customLayerMatrix());o.setDirty(),e.setBaseState(),o.bindFramebuffer.set(null)}}else t.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class jr{constructor(e,n,r=!1){this.context=new St(e,r),this.transform=n,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=t.SourceCache.maxUnderzooming+t.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(t,e){const n=!!t&&!!t.terrain&&this.transform.projection.supportsTerrain;if(!(n||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Pn(this,t));const r=this._terrain;this.transform.elevation=n?r:null,r.update(t,this.transform,e)}_updateFog(t){const e=t.fog;if(!e||"globe"===this.transform.projection.name||e.getOpacity(this.transform.pitch)<1||e.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[n,r]=e.getFovAdjustedRange(this.transform._fov);if(n>r)return void(this.transform.fogCullDistSq=null);const i=n+.78*(r-n);this.transform.fogCullDistSq=i*i}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(e,n){if(this.width=e*t.exported.devicePixelRatio,this.height=n*t.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const t of this.style.order)this.style._layers[t].resize()}setup(){const e=this.context,n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(n,t.posAttributes.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);const r=new t.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(t.EXTENT,0),r.emplaceBack(0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(r,t.posAttributes.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);const i=new t.StructArrayLayout2i4;i.emplaceBack(-1,-1),i.emplaceBack(1,-1),i.emplaceBack(-1,1),i.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(i,t.posAttributes.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);const o=new t.StructArrayLayout4i8;o.emplaceBack(0,0,0,0),o.emplaceBack(t.EXTENT,0,t.EXTENT,0),o.emplaceBack(0,t.EXTENT,0,t.EXTENT),o.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.mercatorBoundsBuffer=e.createVertexBuffer(o,t.boundsAttributes.members),this.mercatorBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);const s=new t.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s);const a=new t.StructArrayLayout1ui2;for(const t of[0,1,3,2,0])a.emplaceBack(t);this.debugIndexBuffer=e.createIndexBuffer(a),this.emptyTexture=new t.Texture(e,new t.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),e.gl.RGBA),this.identityMat=t.create();const c=this.context.gl;this.stencilClearMode=new t.StencilMode({func:c.ALWAYS,mask:0},0,255,c.ZERO,c.ZERO,c.ZERO),this.loadTimeStamps.push(t.window.performance.now()),this.atmosphereBuffer=new Rr(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(t){return t._makeTileBoundsBuffers(this.context,this.transform.projection),t._tileBoundsBuffer?{tileBoundsBuffer:t._tileBoundsBuffer,tileBoundsIndexBuffer:t._tileBoundsIndexBuffer,tileBoundsSegments:t._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const e=this.context,n=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(e,n.TRIANGLES,t.DepthMode.disabled,this.stencilClearMode,t.ColorMode.disabled,t.CullFaceMode.disabled,An(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(e,n,r){if(!n||this.currentStencilSource===n.id||!e.isTileClipped()||!r||0===r.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let t=!1;for(const e of r)if(void 0===this._tileClippingMaskIDs[e.key]){t=!0;break}if(!t)return}this.currentStencilSource=n.id;const i=this.context,o=i.gl;this.nextStencilID+r.length>256&&this.clearStencil(),i.setColorMode(t.ColorMode.disabled),i.setDepthMode(t.DepthMode.disabled);const s=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const e of r){const r=n.getTile(e),a=this._tileClippingMaskIDs[e.key]=this.nextStencilID++,{tileBoundsBuffer:c,tileBoundsIndexBuffer:l,tileBoundsSegments:u}=this.getTileBoundsBuffers(r);s.draw(i,o.TRIANGLES,t.DepthMode.disabled,new t.StencilMode({func:o.ALWAYS,mask:0},a,255,o.KEEP,o.KEEP,o.REPLACE),t.ColorMode.disabled,t.CullFaceMode.disabled,An(e.projMatrix),"$clipping",c,l,u)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,n=this.context.gl;return new t.StencilMode({func:n.NOTEQUAL,mask:255},e,255,n.KEEP,n.KEEP,n.REPLACE)}stencilModeForClipping(e){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(e);const n=this.context.gl;return new t.StencilMode({func:n.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,n.KEEP,n.KEEP,n.REPLACE)}stencilConfigForOverlap(e){const n=this.context.gl,r=e.sort(((t,e)=>e.overscaledZ-t.overscaledZ)),i=r[r.length-1].overscaledZ,o=r[0].overscaledZ-i+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();const e={};for(let r=0;r<o;r++)e[r+i]=new t.StencilMode({func:n.GEQUAL,mask:255},r+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=o,[e,r]}return[{[i]:t.StencilMode.disabled},r]}colorModeForRenderPass(){const e=this.context.gl;if(this._showOverdrawInspector){const n=1/8;return new t.ColorMode([e.CONSTANT_COLOR,e.ONE],new t.Color(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?t.ColorMode.unblended:t.ColorMode.alphaBlended}depthModeForSublayer(e,n,r){if(!this.opaquePassEnabledForLayer())return t.DepthMode.disabled;const i=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new t.DepthMode(r||this.context.gl.LEQUAL,n,[i,i])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,n){this.style=e,this.options=n,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.exported.now()),this.imageManager.beginFrame();const r=this.style.order,i=this.style._sourceCaches;for(const t in i){const e=i[t];e.used&&e.prepare(this.context)}const o={},s={},a={};for(const t in i){const e=i[t];o[t]=e.getVisibleCoordinates(),s[t]=o[t].slice().reverse(),a[t]=e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let t=0;t<r.length;t++)if(this.style._layers[r[t]].is3D()){this.opaquePassCutoff=t;break}if(this.terrain&&(this.terrain.updateTileBinding(a),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new t.GlobeSharedBuffers(this.context)),!t.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const t of r){const n=this.style._layers[t],r=e._getLayerSourceCache(n);if(!n.hasOffscreenPass()||n.isHidden(this.transform.zoom))continue;const i=r?s[r.id]:void 0;("custom"===n.type||n.isSky()||i&&i.length)&&this.renderLayer(this,r,n,i)}this.depthRangeFor3D=[0,1-(e.order.length+2)*this.numSublayers*this.depthEpsilon];const c=this.terrain;if(c&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&c.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:n.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){const t=this.style._layers[r[this.currentLayer]],n=e._getLayerSourceCache(t);if(t.isSky())continue;const i=n?s[n.id]:void 0;this._renderTileClippingMasks(t,n,i),this.renderLayer(this,n,t,i)}if(this.style.fog&&this.transform.projection.supportsFog&&function(e,n){const r=e.context,i=r.gl,o=e.transform,s=new t.DepthMode(i.LEQUAL,t.DepthMode.ReadOnly,[0,1]),a=e.useProgram("globeAtmosphere",null,"globe"===o.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),c=t.globeToMercatorTransition(o.zoom),l=n.properties.get("color").toArray01(),u=n.properties.get("high-color").toArray01(),h=n.properties.get("space-color").toArray01PremultipliedAlpha(),p=t.identity$1([]);t.rotateY$1(p,p,-t.degToRad(o._center.lng)),t.rotateX$1(p,p,t.degToRad(o._center.lat)),t.rotateZ$1(p,p,o.angle),t.rotateX$1(p,p,-o._pitch);const f=t.fromQuat(new Float32Array(16),p),d=t.mapValue(n.properties.get("star-intensity"),0,1,0,.25),g=5e-4,m=t.mapValue(n.properties.get("horizon-blend"),0,1,g,.25),y=t.globeUseCustomAntiAliasing(e,r,o)&&m===g?o.worldSize/(2*Math.PI*1.025)-1:o.globeRadius,_=e.frameCounter/1e3%1,v=t.length(o.globeCenterInViewSpace),x=Math.sqrt(Math.pow(v,2)-Math.pow(y,2)),b=Math.acos(x/v),w=((e,n,r,i,o,s,a,c,l,u,h,p,f,d)=>({u_frustum_tl:e,u_frustum_tr:n,u_frustum_br:r,u_frustum_bl:i,u_horizon:o,u_transition:s,u_fadeout_range:a,u_color:c,u_high_color:l,u_space_color:u,u_star_intensity:h,u_star_size:5*t.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:p,u_horizon_angle:f,u_rotation_matrix:d}))(o.frustumCorners.TL,o.frustumCorners.TR,o.frustumCorners.BR,o.frustumCorners.BL,o.frustumCorners.horizon,c,m,l,u,h,d,_,b,f);e.prepareDrawProgram(r,a);const E=e.atmosphereBuffer;E&&a.draw(r,i.TRIANGLES,s,t.StencilMode.disabled,t.ColorMode.alphaBlended,t.CullFaceMode.backCW,w,"skybox",E.vertexBuffer,E.indexBuffer,E.segments)}(this,this.style.fog),this.renderPass="sky",(t.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){const t=this.style._layers[r[this.currentLayer]],n=e._getLayerSourceCache(t);t.isSky()&&this.renderLayer(this,n,t,n?s[n.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;){const t=this.style._layers[r[this.currentLayer]],n=e._getLayerSourceCache(t);if(t.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(t)){if(t.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const i=n?("symbol"===t.type?a:s)[n.id]:void 0;this._renderTileClippingMasks(t,n,n?o[n.id]:void 0),this.renderLayer(this,n,t,i),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let n=null;t.values(this.style._layers).forEach((t=>{const r=e._getLayerSourceCache(t);r&&!t.isHidden(this.transform.zoom)&&(!n||n.getSource().maxzoom<r.getSource().maxzoom)&&(n=r)})),n&&this.options.showTileBoundaries&&Nr.debug(this,n,n.getVisibleCoordinates())}this.options.showPadding&&function(t){const e=t.transform.padding;kr(t,t.transform.height-(e.top||0),3,xr),kr(t,e.bottom||0,3,br),Ar(t,e.left||0,3,wr),Ar(t,t.transform.width-(e.right||0),3,Er);const n=t.transform.centerPoint;!function(t,e,n,r){Mr(t,e-1,n-10,2,20,r),Mr(t,e-10,n-1,20,2,r)}(t,n.x,t.transform.height-n.y,Tr)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(t.window.performance.now()),this.saveCanvasCopy())}renderLayer(t,e,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"sky"===n.type||"custom"===n.type||r&&r.length)&&(this.id=n.id,this.gpuTimingStart(n),(!t.transform.projection.unsupportedLayers||!t.transform.projection.unsupportedLayers.includes(n.type)||t.terrain&&"custom"===n.type)&&Nr[n.type](t,e,n,r,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(t){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;let n=this.gpuTimers[t.id];n||(n=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),n.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,n.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const t=this.context.extTimerQuery,e=t.createQueryEXT();this.deferredRenderGpuTimeQueries.push(e),t.beginQueryEXT(t.TIME_ELAPSED_EXT,e)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}collectGpuTimers(){const t=this.gpuTimers;return this.gpuTimers={},t}collectDeferredRenderGpuQueries(){const t=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],t}queryGpuTimers(t){const e={};for(const n in t){const r=t[n],i=this.context.extTimerQuery,o=i.getQueryObjectEXT(r.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(r.query),e[n]=o}return e}queryGpuTimeDeferredRender(t){if(!this.options.gpuTimingDeferredRender)return 0;const e=this.context.extTimerQuery;let n=0;for(const r of t)n+=e.getQueryObjectEXT(r,e.QUERY_RESULT_EXT)/1e6,e.deleteQueryEXT(r);return n}translatePosMatrix(e,n,r,i,o){if(!r[0]&&!r[1])return e;const s=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(s){const t=Math.sin(s),e=Math.cos(s);r=[r[0]*e-r[1]*t,r[0]*t+r[1]*e]}const a=[o?r[0]:O(n,r[0],this.transform.zoom),o?r[1]:O(n,r[1],this.transform.zoom),0],c=new Float32Array(16);return t.translate(c,e,a),c}saveTileTexture(t){const e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const e=this._tileTextures[t];return e&&e.length>0?e.pop():null}isPatternMissing(t){return null===t||void 0!==t&&!this.imageManager.getPattern(t.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const t=this.terrain&&this.terrain.renderingToTexture,e=this.terrain&&0===this.terrain.exaggeration(),n=this.style&&this.style.fog,r=[];return this.terrainRenderModeElevated()&&r.push("TERRAIN"),"globe"===this.transform.projection.name&&r.push("GLOBE"),e&&r.push("ZERO_EXAGGERATION"),n&&!t&&0!==n.getOpacity(this.transform.pitch)&&r.push("FOG"),t&&r.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&r.push("OVERDRAW_INSPECTOR"),r}useProgram(t,e,n){this.cache=this.cache||{};const r=n||[],i=this.currentGlobalDefines().concat(r),o=Ln.cacheKey(hn[t],t,i,e);return this.cache[o]||(this.cache[o]=new Ln(this.context,t,hn[t],e,cr[t],i)),this.cache[o]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(e,n,r){if(this.terrain&&this.terrain.renderingToTexture)return;const i=this.style.fog;if(i){const o=i.getOpacity(this.transform.pitch),s=((e,n,r,i,o,s,a,c,l,u,h)=>{const p=e.transform,f=n.properties.get("color").toArray01();f[3]=i;const d=e.frameCounter/1e3%1;return{u_fog_matrix:r?p.calculateFogTileMatrix(r):e.identityMat,u_fog_range:n.getFovAdjustedRange(p._fov),u_fog_color:f,u_fog_horizon_blend:n.properties.get("horizon-blend"),u_fog_temporal_offset:d,u_frustum_tl:o,u_frustum_tr:s,u_frustum_br:a,u_frustum_bl:c,u_globe_pos:l,u_globe_radius:u,u_viewport:h,u_globe_transition:t.globeToMercatorTransition(p.zoom),u_is_globe:+("globe"===p.projection.name)}})(this,i,r,o,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*t.exported.devicePixelRatio,this.transform.height*t.exported.devicePixelRatio]);n.setFogUniformValues(e,s)}}setTileLoadedFlag(t){this.tileLoaded=t}saveCanvasCopy(){const t=this.canvasCopy();t&&(this.frameCopies.push(t),this.tileLoaded=!1)}canvasCopy(){const t=this.context.gl,e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,0,0,t.drawingBufferWidth,t.drawingBufferHeight,0),e}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const t=this.style&&this.style.fog;return!!t&&0!==t.getOpacity(this.transform.pitch)}getBackgroundTiles(){const e=this._backgroundTiles,n=this._backgroundTiles={},r=this.transform.coveringTiles({tileSize:512});for(const i of r)n[i.key]=e[i.key]||new t.Tile(i,512,this.transform.tileZoom,this);return n}clearBackgroundTiles(){this._backgroundTiles={}}}class zr{constructor(t=0,e=0,n=0,r=0){if(isNaN(t)||t<0||isNaN(e)||e<0||isNaN(n)||n<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=n,this.right=r}interpolate(e,n,r){return null!=n.top&&null!=e.top&&(this.top=t.number(e.top,n.top,r)),null!=n.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,n.bottom,r)),null!=n.left&&null!=e.left&&(this.left=t.number(e.left,n.left,r)),null!=n.right&&null!=e.right&&(this.right=t.number(e.right,n.right,r)),this}getCenter(e,n){const r=t.clamp((this.left+e-this.right)/2,0,e),i=t.clamp((this.top+n-this.bottom)/2,0,n);return new t.Point(r,i)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new zr(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Br(e,n){const r=t.getColumn(e,3);t.fromQuat(e,n),t.setColumn(e,3,r)}function Fr(e,n){const r=t.identity$1([]);return t.rotateZ$1(r,r,-n),t.rotateX$1(r,r,-e),r}function Ur(e,n){const r=[e[0],e[1],0],i=[n[0],n[1],0];if(t.length(r)>=1e-15){const e=t.normalize([],r);t.scale$2(i,e,t.dot(i,e)),n[0]=i[0],n[1]=i[1]}const o=t.cross([],n,e);if(t.len(o)<1e-15)return null;const s=Math.atan2(-o[1],o[0]);return Fr(Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2]),s)}class Vr{constructor(t,e){this.position=t,this.orientation=e}get position(){return this._position}set position(e){if(e){const n=e instanceof t.MercatorCoordinate?e:new t.MercatorCoordinate(e[0],e[1],e[2]);this._renderWorldCopies&&(n.x=t.wrap(n.x,0,1)),this._position=n}else this._position=null}lookAtPoint(e,n){if(this.orientation=null,!this.position)return;const r=this.position,i=this._elevation?this._elevation.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(e)):0,o=t.MercatorCoordinate.fromLngLat(e,i),s=[o.x-r.x,o.y-r.y,o.z-r.z];n||(n=[0,0,1]),n[2]=Math.abs(n[2]),this.orientation=Ur(s,n)}setPitchBearing(e,n){this.orientation=Fr(t.degToRad(e),t.degToRad(-n))}}class qr{constructor(e,n){this._transform=t.identity([]),this.orientation=n,this.position=e}get mercatorPosition(){const e=this.position;return new t.MercatorCoordinate(e[0],e[1],e[2])}get position(){const e=t.getColumn(this._transform,3);return[e[0],e[1],e[2]]}set position(e){var n;e&&t.setColumn(this._transform,3,[(n=e)[0],n[1],n[2],1])}get orientation(){return this._orientation}set orientation(e){this._orientation=e||t.identity$1([]),e&&Br(this._transform,this._orientation)}getPitchBearing(){const t=this.forward(),e=this.right();return{bearing:Math.atan2(-e[1],e[0]),pitch:Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2])}}setPitchBearing(t,e){this._orientation=Fr(t,e),Br(this._transform,this._orientation)}forward(){const e=t.getColumn(this._transform,2);return[-e[0],-e[1],-e[2]]}up(){const e=t.getColumn(this._transform,1);return[-e[0],-e[1],-e[2]]}right(){const e=t.getColumn(this._transform,0);return[e[0],e[1],e[2]]}getCameraToWorld(e,n){const r=new Float64Array(16);return t.invert(r,this.getWorldToCamera(e,n)),r}getWorldToCameraPosition(e,n,r){const i=this.position;t.scale$2(i,i,-e);const o=new Float64Array(16);return t.fromScaling(o,[r,r,r]),t.translate(o,o,i),o[10]*=n,o}getWorldToCamera(e,n){const r=new Float64Array(16),i=new Float64Array(4),o=this.position;return t.conjugate(i,this._orientation),t.scale$2(o,o,-e),t.fromQuat(r,i),t.translate(r,r,o),r[1]*=-1,r[5]*=-1,r[9]*=-1,r[13]*=-1,r[8]*=n,r[9]*=n,r[10]*=n,r[11]*=n,r}getCameraToClipPerspective(e,n,r,i){const o=new Float64Array(16);return t.perspective(o,e,n,r,i),o}getDistanceToElevation(e,n=!1){const r=0===e?0:t.mercatorZfromAltitude(e,n?t.latFromMercatorY(this.position[1]):this.position[1]),i=this.forward();return(r-this.position[2])/i[2]}clone(){return new qr([...this.position],[...this.orientation])}}function Wr(e,n){const r=$r(e.projection,e.zoom,e.width,e.height),i=function(e,n,r,i,o){const s=new t.LngLat(r.lng-180*Hr,r.lat),a=new t.LngLat(r.lng+180*Hr,r.lat),c=e.project(s.lng,s.lat),l=e.project(a.lng,a.lat),u=-Math.atan2(l.y-c.y,l.x-c.x),h=t.MercatorCoordinate.fromLngLat(r);h.y=t.clamp(h.y,-1+Hr,1-Hr);const p=h.toLngLat(),f=e.project(p.lng,p.lat),d=t.MercatorCoordinate.fromLngLat(p);d.x+=Hr;const g=d.toLngLat(),m=e.project(g.lng,g.lat),y=Yr(m.x-f.x,m.y-f.y,u),_=t.MercatorCoordinate.fromLngLat(p);_.y+=Hr;const v=_.toLngLat(),x=e.project(v.lng,v.lat),b=Yr(x.x-f.x,x.y-f.y,u),w=Math.abs(y.x)/Math.abs(b.y),E=t.identity([]);t.rotateZ(E,E,-u*(1-(o?0:i)));const T=t.identity([]);return t.scale(T,T,[1,1-(1-w)*i,1]),T[4]=-b.x/b.y*i,t.rotateZ(T,T,u),t.multiply(T,E,T),T}(e.projection,0,e.center,r,n),o=Gr(e);return t.scale(i,i,[o,o,1]),i}function Gr(e){const n=e.projection,r=$r(e.projection,e.zoom,e.width,e.height),i=Zr(n,e.center),o=Zr(n,t.LngLat.convert(n.center));return Math.pow(2,i*r+(1-r)*o)}function $r(e,n,r,i,o=1/0){const s=e.range;if(!s)return 0;const a=Math.min(o,Math.max(r,i)),c=Math.log(a/1024)/Math.LN2;return t.smoothstep(s[0]+c,s[1]+c,n)}const Hr=1/4e4;function Zr(e,n){const r=t.clamp(n.lat,-t.MAX_MERCATOR_LATITUDE,t.MAX_MERCATOR_LATITUDE),i=new t.LngLat(n.lng-180*Hr,r),o=new t.LngLat(n.lng+180*Hr,r),s=e.project(i.lng,r),a=e.project(o.lng,r),c=t.MercatorCoordinate.fromLngLat(i),l=t.MercatorCoordinate.fromLngLat(o),u=a.x-s.x,h=a.y-s.y,p=l.x-c.x,f=l.y-c.y,d=Math.sqrt((p*p+f*f)/(u*u+h*h));return Math.log(d)/Math.LN2}function Yr(t,e,n){const r=Math.cos(n),i=Math.sin(n);return{x:t*r-e*i,y:t*i+e*r}}class Xr{constructor(e,n,r,i,o,s,a){this.tileSize=512,this._renderWorldCopies=void 0===o||o,this._minZoom=e||0,this._maxZoom=n||22,this._minPitch=null==r?0:r,this._maxPitch=null==i?60:i,this.setProjection(s),this.setMaxBounds(a),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new zr,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new qr,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const t=new Xr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return t._elevation=this._elevation,t._centerAltitude=this._centerAltitude,t._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,t.tileSize=this.tileSize,t.mercatorFromTransition=this.mercatorFromTransition,t.width=this.width,t.height=this.height,t.cameraElevationReference=this.cameraElevationReference,t._center=this._center,t._setZoom(this.zoom),t._seaLevelZoom=this._seaLevelZoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._nearZ=this._nearZ,t._farZ=this._farZ,t._averageElevation=this._averageElevation,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._camera=this._camera.clone(),t._calcMatrices(),t.freezeTileCoverage=this.freezeTileCoverage,t.frustumCorners=this.frustumCorners,t}get elevation(){return this._elevation}set elevation(t){this._elevation!==t&&(this._elevation=t,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(t,e=!1){const n=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||n)&&this._updateCameraOnTerrain(),(t||n)&&this._constrainCamera(e),this._calcMatrices()}getProjection(){return t.pick(this.projection,["name","center","parallels"])}setProjection(n){this.projectionOptions=n||{name:"mercator"};const r=this.projection?this.getProjection():void 0;this.projection=t.getProjection(this.projectionOptions);const i=!e(r,this.getProjection());return i&&this._calcMatrices(),this.mercatorFromTransition=!1,i}setMercatorFromTransition(){const e=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=t.getProjection({name:"mercator"});const n=e!==this.projection.name;return n&&this._calcMatrices(),n}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const t=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(t))}get cameraWorldSize(){const t=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(t))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return t.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new t.Point(this.width,this.height)}get bearing(){return t.wrap(this.rotation,-180,180)}set bearing(t){this.rotation=t}get rotation(){return-this.angle/Math.PI*180}set rotation(e){const n=-e*Math.PI/180;var r;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=(r=new t.ARRAY_TYPE(4),t.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r),function(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(n),c=Math.cos(n);t[0]=r*c+o*a,t[1]=i*c+s*a,t[2]=r*-a+o*c,t[3]=i*-a+s*c}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const n=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const t=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/t)}set fov(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=t.degToRad(e),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(t){this._averageElevation=t,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(t){const e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._setZoom(e),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(t){this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const t=this._elevation;this._centerAltitude=t.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=t.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const e=this._elevation,n=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],r=this.horizonLineFromTop();let i=0,o=0;for(let s=0;s<n.length;s++){const a=new t.Point(n[s][0]*this.width,r+n[s][1]*(this.height-r)),c=e.pointCoordinate(a);if(!c)continue;const l=1/Math.hypot(c[0]-this._camera.position[0],c[1]-this._camera.position[1]);i+=c[3]*l,o+=l}return 0===o?NaN:i/o}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const t=this._seaLevelZoom,e=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),n=this.pixelsPerMeter/this.worldSize*e,r=this._mercatorZfromZoom(t),i=this._mercatorZfromZoom(this._maxZoom),o=Math.max(r-n,i);this._setZoom(this._zoomFromMercatorZ(o))}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}computeZoomRelativeTo(e){const n=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,e.toAltitude()));let r;r=e.z<this._camera.position[2]?[n.x,n.y,n.z]:[e.x,e.y,e.z];const i=t.length(t.sub([],this._camera.position,r));return t.clamp(this._zoomFromMercatorZ(i),this._minZoom,this._maxZoom)}setFreeCameraOptions(e){if(!this.height)return;if(!e.position&&!e.orientation)return;this._updateCameraState();let n=!1;if(e.orientation&&!t.exactEquals(e.orientation,this._camera.orientation)&&(n=this._setCameraOrientation(e.orientation)),e.position){const r=[e.position.x,e.position.y,e.position.z];t.exactEquals$1(r,this._camera.position)||(this._setCameraPosition(r),n=!0)}n&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const e=this._camera.position,n=new Vr;return n.position=new t.MercatorCoordinate(e[0],e[1],e[2]),n.orientation=this._camera.orientation,n._elevation=this.elevation,n._renderWorldCopies=this.renderWorldCopies,n}_setCameraOrientation(e){if(!t.length$1(e))return!1;t.normalize$1(e,e);const n=t.transformQuat([],[0,0,-1],e),r=t.transformQuat([],[0,-1,0],e);if(r[2]<0)return!1;const i=Ur(n,r);return!!i&&(this._camera.orientation=i,!0)}_setCameraPosition(e){const n=this.zoomScale(this.minZoom)*this.tileSize,r=this.zoomScale(this.maxZoom)*this.tileSize,i=this.cameraToCenterDistance;e[2]=t.clamp(e[2],i/r,i/n),this._camera.position=e}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,e,n){this._unmodified=!1,this._edgeInsets.interpolate(t,e,n),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){const e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)}getVisibleUnwrappedCoordinates(e){const n=[new t.UnwrappedTileID(0,e)];if(this.renderWorldCopies){const r=this.pointCoordinate(new t.Point(0,0)),i=this.pointCoordinate(new t.Point(this.width,0)),o=this.pointCoordinate(new t.Point(this.width,this.height)),s=this.pointCoordinate(new t.Point(0,this.height)),a=Math.floor(Math.min(r.x,i.x,o.x,s.x)),c=Math.floor(Math.max(r.x,i.x,o.x,s.x)),l=1;for(let r=a-l;r<=c+l;r++)0!==r&&n.push(new t.UnwrappedTileID(r,e))}return n}coveringTiles(e){let n=this.coveringZoomLevel(e);const r=n,i=this.elevation&&!e.isTerrainDEM,o="mercator"===this.projection.name;if(void 0!==e.minzoom&&n<e.minzoom)return[];void 0!==e.maxzoom&&n>e.maxzoom&&(n=e.maxzoom);const s=this.locationCoordinate(this.center),a=this.center.lat,c=1<<n,l=[c*s.x,c*s.y,0],u="globe"===this.projection.name,h=!u,p=t.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n,h),f=u?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),d=c*t.mercatorZfromAltitude(1,this.center.lat),g=this._camera.position[2]/t.mercatorZfromAltitude(1,this.center.lat),m=[c*f.x,c*f.y,g*(h?1:d)],y=this.cameraToCenterDistance/e.tileSize*(e.roundZoom?1:.502),_=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?n:0,v=e.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,x=e.isTerrainDEM?-v:this._elevation?this._elevation.getMinElevationBelowMSL():0,b=this.projection.isReprojectedInTileSpace?Gr(this):1,w=e=>{const n=1/4e4,r=new t.MercatorCoordinate(e.x+n,e.y,e.z),i=new t.MercatorCoordinate(e.x,e.y+n,e.z),o=e.toLngLat(),s=r.toLngLat(),a=i.toLngLat(),c=this.locationCoordinate(o),l=this.locationCoordinate(s),u=this.locationCoordinate(a),h=Math.hypot(l.x-c.x,l.y-c.y),p=Math.hypot(u.x-c.x,u.y-c.y);return Math.sqrt(h*p)*b/n},E=e=>{const n=v,r=x;return{aabb:t.tileAABB(this,c,0,0,0,e,r,n,this.projection),zoom:0,x:0,y:0,minZ:r,maxZ:n,wrap:e,fullyVisible:!1}},T=[];let S=[];const k=n,A=e.reparseOverscaled?r:n,M=t=>t*t,I=M((g-this._centerAltitude)*d),C=t=>{if(!this._elevation||!t.tileID||!o)return;const e=this._elevation.getMinMaxForTile(t.tileID),n=t.aabb;e?(n.min[2]=e.min,n.max[2]=e.max,n.center[2]=(n.min[2]+n.max[2])/2):(t.shouldSplit=O(t),t.shouldSplit||(n.min[2]=n.max[2]=n.center[2]=this._centerAltitude))},O=e=>{if(e.zoom<_)return!0;if(e.zoom===k)return!1;if(null!=e.shouldSplit)return e.shouldSplit;const n=e.aabb.distanceX(m),o=e.aabb.distanceY(m);let s=I,c=1;if(u){s=M(e.aabb.distanceZ(m));const n=Math.pow(2,e.zoom),r=t.latFromMercatorY((e.y+1)/n),i=t.latFromMercatorY(e.y/n),o=Math.min(Math.max(a,r),i),l=t.circumferenceAtLatitude(o)/t.circumferenceAtLatitude(a);if(c=o===a?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,l/this._mercatorScaleRatio),this.zoom<=t.GLOBE_ZOOM_THRESHOLD_MIN&&e.zoom===k-1&&l>=.9)return!0}else if(i&&(s=M(e.aabb.distanceZ(m)*d)),this.projection.isReprojectedInTileSpace&&r<=5){const n=Math.pow(2,e.zoom),r=w(new t.MercatorCoordinate((e.x+.5)/n,(e.y+.5)/n));c=r>.85?1:r}const l=n*n+o*o+s,h=M((1<<k-e.zoom)*y*c*((t,e)=>{if(e*M(.707)<t)return 1;const n=Math.sqrt(e/t);return n/(1.4144271570014144+(Math.pow(1.1,n-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(s,I),l));return l<h};if(this.renderWorldCopies)for(let t=1;t<=3;t++)T.push(E(-t)),T.push(E(t));for(T.push(E(0));T.length>0;){const r=T.pop(),s=r.x,a=r.y;let h=r.fullyVisible;if(!h){const t=r.aabb.intersects(p);if(0===t)continue;h=2===t}if(r.zoom!==k&&O(r))for(let e=0;e<4;e++){const n=(s<<1)+e%2,l=(a<<1)+(e>>1),p={aabb:o?r.aabb.quadrant(e):t.tileAABB(this,c,r.zoom+1,n,l,r.wrap,r.minZ,r.maxZ,this.projection),zoom:r.zoom+1,x:n,y:l,wrap:r.wrap,fullyVisible:h,tileID:void 0,shouldSplit:void 0,minZ:r.minZ,maxZ:r.maxZ};i&&!u&&(p.tileID=new t.OverscaledTileID(r.zoom+1===k?A:r.zoom+1,r.wrap,r.zoom+1,n,l),C(p)),T.push(p)}else{const i=r.zoom===k?A:r.zoom;if(e.minzoom&&e.minzoom>i)continue;const o=l[0]-(.5+s+(r.wrap<<r.zoom))*(1<<n-r.zoom),c=l[1]-.5-a,u=r.tileID?r.tileID:new t.OverscaledTileID(i,r.wrap,r.zoom,s,a);S.push({tileID:u,distanceSq:o*o+c*c})}}if(this.fogCullDistSq){const n=this.fogCullDistSq,r=this.horizonLineFromTop();S=S.filter((i=>{const o=[0,0,0,1],s=[t.EXTENT,t.EXTENT,0,1],a=this.calculateFogTileMatrix(i.tileID.toUnwrapped());t.transformMat4$1(o,o,a),t.transformMat4$1(s,s,a);const c=t.getAABBPointSquareDist(o,s);if(0===c)return!0;let l=!1;const u=this._elevation;if(u&&c>n&&0!==r){const n=this.calculateProjMatrix(i.tileID.toUnwrapped());let o;e.isTerrainDEM||(o=u.getMinMaxForTile(i.tileID)),o||(o={min:x,max:v});const s=t.furthestTileCorner(this.rotation),a=[s[0]*t.EXTENT,s[1]*t.EXTENT,o.max];t.transformMat4(a,a,n),l=(1-a[1])*this.height*.5<r}return c<n||l}))}return S.sort(((t,e)=>t.distanceSq-e.distanceSq)).map((t=>t.tileID))}resize(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(e){const n=t.clamp(e.lat,-t.MAX_MERCATOR_LATITUDE,t.MAX_MERCATOR_LATITUDE),r=this.projection.project(e.lng,n);return new t.Point(r.x*this.worldSize,r.y*this.worldSize)}unproject(t){return this.projection.unproject(t.x/this.worldSize,t.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/t.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(e,n){let r,i;const o=this.centerPoint;if("globe"===this.projection.name){const t=this.worldSize;r=(n.x-o.x)/t,i=(n.y-o.y)/t}else{const t=this.pointCoordinate(n),e=this.pointCoordinate(o);r=t.x-e.x,i=t.y-e.y}const s=this.locationCoordinate(e);this.setLocation(new t.MercatorCoordinate(s.x-r,s.y-i))}setLocation(t){this.center=this.coordinateLocation(t),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(t){return this.projection.locationPoint(this,t)}locationPoint3D(t){return this.projection.locationPoint(this,t,!0)}pointLocation(t){return this.coordinateLocation(this.pointCoordinate(t))}pointLocation3D(t){return this.coordinateLocation(this.pointCoordinate3D(t))}locationCoordinate(e,n){const r=n?t.mercatorZfromAltitude(n,e.lat):void 0,i=this.projection.project(e.lng,e.lat);return new t.MercatorCoordinate(i.x,i.y,r)}coordinateLocation(t){return this.projection.unproject(t.x,t.y)}pointRayIntersection(e,n){const r=null!=n?n:this._centerAltitude,i=[e.x,e.y,0,1],o=[e.x,e.y,1,1];t.transformMat4$1(i,i,this.pixelMatrixInverse),t.transformMat4$1(o,o,this.pixelMatrixInverse);const s=o[3];t.scale$1(i,i,1/i[3]),t.scale$1(o,o,1/s);const a=i[2],c=o[2];return{p0:i,p1:o,t:a===c?0:(r-a)/(c-a)}}screenPointToMercatorRay(e){const n=[e.x,e.y,0,1],r=[e.x,e.y,1,1];return t.transformMat4$1(n,n,this.pixelMatrixInverse),t.transformMat4$1(r,r,this.pixelMatrixInverse),t.scale$1(n,n,1/n[3]),t.scale$1(r,r,1/r[3]),n[2]=t.mercatorZfromAltitude(n[2],this._center.lat)*this.worldSize,r[2]=t.mercatorZfromAltitude(r[2],this._center.lat)*this.worldSize,t.scale$1(n,n,1/this.worldSize),t.scale$1(r,r,1/this.worldSize),new t.Ray([n[0],n[1],n[2]],t.normalize([],t.sub([],r,n)))}rayIntersectionCoordinate(e){const{p0:n,p1:r,t:i}=e,o=t.mercatorZfromAltitude(n[2],this._center.lat),s=t.mercatorZfromAltitude(r[2],this._center.lat);return new t.MercatorCoordinate(t.number(n[0],r[0],i)/this.worldSize,t.number(n[1],r[1],i)/this.worldSize,t.number(o,s,i))}pointCoordinate(t,e=this._centerAltitude){return this.projection.pointCoordinate(this,t.x,t.y,e)}pointCoordinate3D(e){if(!this.elevation)return this.pointCoordinate(e);let n=this.projection.pointCoordinate3D(this,e.x,e.y);if(n)return new t.MercatorCoordinate(n[0],n[1],n[2]);let r=0,i=this.horizonLineFromTop();if(e.y>i)return this.pointCoordinate(e);const o=.02*i,s=e.clone();for(let e=0;e<10&&i-r>o;e++){s.y=t.number(r,i,.66);const e=this.projection.pointCoordinate3D(this,s.x,s.y);e?(i=s.y,n=e):r=s.y}return n?new t.MercatorCoordinate(n[0],n[1],n[2]):this.pointCoordinate(e)}isPointAboveHorizon(t){return this.projection.isPointAboveHorizon(this,t)}isPointOnSurface(e){if(e.y<0||e.y>this.height||e.x<0||e.x>this.width)return!1;if(this.elevation||this.zoom>=t.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(e);const n=this.pointCoordinate(e);return n.y>=0&&n.y<=1}_coordinatePoint(e,n){const r=n&&this.elevation?this.elevation.getAtPointOrZero(e,this._centerAltitude):this._centerAltitude,i=[e.x*this.worldSize,e.y*this.worldSize,r+e.toAltitude(),1];return t.transformMat4$1(i,i,this.pixelMatrix),i[3]>0?new t.Point(i[0]/i[3],i[1]/i[3]):new t.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:e,left:n}=this._edgeInsets,r=this.height-this._edgeInsets.bottom,i=this.width-this._edgeInsets.right,o=this.pointLocation3D(new t.Point(n,e)),s=this.pointLocation3D(new t.Point(i,e)),a=this.pointLocation3D(new t.Point(i,r)),c=this.pointLocation3D(new t.Point(n,r));let l=Math.min(o.lng,s.lng,a.lng,c.lng),u=Math.max(o.lng,s.lng,a.lng,c.lng),h=Math.min(o.lat,s.lat,a.lat,c.lat),p=Math.max(o.lat,s.lat,a.lat,c.lat);const f=Math.pow(2,-this.zoom)/16*270,d="globe"===this.projection.name?1:4,g=(e,n,r,i,o)=>{const s=(e+r)/2,a=(n+i)/2,c=new t.Point(s,a),{lng:m,lat:y}=this.pointLocation3D(c),_=Math.max(0,l-m,h-y,m-u,y-p);l=Math.min(l,m),u=Math.max(u,m),h=Math.min(h,y),p=Math.max(p,y),(o<d||_>f)&&(g(e,n,s,a,o+1),g(s,a,r,i,o+1))};if(g(n,e,i,e,1),g(i,e,i,r,1),g(i,r,n,r,1),g(n,r,n,e,1),"globe"===this.projection.name){const[e,n]=t.polesInViewport(this);e?(p=90,u=180,l=-180):n&&(h=-90,u=180,l=-180)}return new t.LngLatBounds(new t.LngLat(l,h),new t.LngLat(u,p))}_getBoundsRectangular(e,n){const{top:r,left:i}=this._edgeInsets,o=this.height-this._edgeInsets.bottom,s=this.width-this._edgeInsets.right,a=new t.Point(i,r),c=new t.Point(s,r),l=new t.Point(s,o),u=new t.Point(i,o);let h=this.pointCoordinate(a,e),p=this.pointCoordinate(c,e);const f=this.pointCoordinate(l,n),d=this.pointCoordinate(u,n),g=(t,e)=>(e.y-t.y)/(e.x-t.x);return h.y>1&&p.y>=0?h=new t.MercatorCoordinate((1-d.y)/g(d,h)+d.x,1):h.y<0&&p.y<=1&&(h=new t.MercatorCoordinate(-d.y/g(d,h)+d.x,0)),p.y>1&&h.y>=0?p=new t.MercatorCoordinate((1-f.y)/g(f,p)+f.x,1):p.y<0&&h.y<=1&&(p=new t.MercatorCoordinate(-f.y/g(f,p)+f.x,0)),(new t.LngLatBounds).extend(this.coordinateLocation(h)).extend(this.coordinateLocation(p)).extend(this.coordinateLocation(d)).extend(this.coordinateLocation(f))}_getBoundsRectangularTerrain(){const t=this.elevation;if(!t.visibleDemTiles.length||t.isUsingMockSource())return this._getBoundsRectangular(0,0);const e=t.visibleDemTiles.reduce(((t,e)=>{if(e.dem){const n=e.dem.tree;t.min=Math.min(t.min,n.minimums[0]),t.max=Math.max(t.max,n.maximums[0])}return t}),{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(e.min*t.exaggeration(),e.max*t.exaggeration())}getBounds(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(t=!0){const e=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,n=this.height/2-e*(1-this._horizonShift);return t?Math.max(0,n):n}getMaxBounds(){return this.maxBounds}setMaxBounds(e){this.maxBounds=e,this.minLat=-t.MAX_MERCATOR_LATITUDE,this.maxLat=t.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,e&&(this.minLat=e.getSouth(),this.maxLat=e.getNorth(),this.minLng=e.getWest(),this.maxLng=e.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=t.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=t.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=t.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=t.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(t,e){return this.projection.createTileMatrix(this,e,t)}calculateDistanceTileData(e){const n=e.key,r=this._distanceTileDataCache;if(r[n])return r[n];const i=e.canonical,o=1/this.height,s=this.cameraWorldSize,a=s/this.zoomScale(i.z),c=(i.x+Math.pow(2,i.z)*e.wrap)*a,l=i.y*a,u=this.point;u.x*=s/this.worldSize,u.y*=s/this.worldSize;const h=this.angle,p=Math.sin(-h),f=-Math.cos(-h);return r[n]={bearing:[p,f],center:[(u.x-c)*o,(u.y-l)*o],scale:a/t.EXTENT*o},r[n]}calculateFogTileMatrix(e){const n=e.key,r=this._fogTileMatrixCache;if(r[n])return r[n];const i=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,e);return t.multiply(i,this.worldToFogMatrix,i),r[n]=new Float32Array(i),r[n]}calculateProjMatrix(e,n=!1){const r=e.key,i=n?this._alignedProjMatrixCache:this._projMatrixCache;if(i[r])return i[r];const o=this.calculatePosMatrix(e,this.worldSize);return t.multiply(o,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:n?this.alignedProjMatrix:this.projMatrix,o),i[r]=new Float32Array(o),i[r]}calculatePixelsToTileUnitsMatrix(e){const n=e.tileID.key,r=this._pixelsToTileUnitsCache;if(r[n])return r[n];const i=function(e,n){const{scale:r}=e.tileTransform,i=r*t.EXTENT/(e.tileSize*Math.pow(2,n.zoom-e.tileID.overscaledZ+e.tileID.canonical.z));return o=new Float32Array(4),c=(s=n.inverseAdjustmentMatrix)[1],l=s[2],u=s[3],p=(a=[i,i])[1],o[0]=s[0]*(h=a[0]),o[1]=c*h,o[2]=l*p,o[3]=u*p,o;var o,s,a,c,l,u,h,p}(e,this);return r[n]=i,r[n]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if("globe"===this.projection.name){const e=1/this.worldSize,n=t.fromScaling([],[e,e,e]);return t.multiply(n,n,this.globeMatrix),n}}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const e=this._elevation;this._updateCameraState();const n=t.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,r=this._computeCameraPosition(n),i=this._camera.forward(),o=t.mercatorZfromAltitude(1,this._center.lat);r[2]/=o,i[2]/=o,t.normalize(i,i);const s=e.raycast(r,i,e.exaggeration());if(s){const e=t.scaleAndAdd([],r,i,s),n=new t.MercatorCoordinate(e[0],e[1],t.mercatorZfromAltitude(e[2],t.latFromMercatorY(e[1]))),a=(n.z+t.length([n.x-r[0],n.y-r[1],n.z-r[2]*o]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(a),this._centerAltitude=n.toAltitude(),this._center=this.coordinateLocation(n),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(e=!1){if(!this._elevation)return;const n=this._elevation,r=t.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,i=this._computeCameraPosition(r),o=n.getAtPointOrZero(new t.MercatorCoordinate(...i)),s=this.pixelsPerMeter/this.worldSize*o,a=this._minimumHeightOverTerrain(),c=i[2]-s;if(c<=a)if(c<0||e){const e=this.locationCoordinate(this._center,this._centerAltitude),n=[i[0],i[1],e.z-i[2]],r=t.length(n);n[2]-=(a-c)/this._pixelsPerMercatorPixel;const o=t.length(n);if(0===o)return;t.scale$2(n,n,r/o*this._pixelsPerMercatorPixel),this._camera.position=[i[0],i[1],e.z*this._pixelsPerMercatorPixel-n[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const e="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||e){const n=this.center;return n.lat=t.clamp(n.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!e)&&(n.lng=t.clamp(n.lng,this.minLng,this.maxLng)),this.center=n,void(this._constraining=!1)}const n=this._unmodified,{x:r,y:i}=this.point;let o=0,s=r,a=i;const c=this.width/2,l=this.height/2,u=this.worldMinY*this.scale,h=this.worldMaxY*this.scale;if(i-l<u&&(a=u+l),i+l>h&&(a=h-l),h-u<this.height&&(o=Math.max(o,this.height/(h-u)),a=(h+u)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const t=this.worldMinX*this.scale,e=this.worldMaxX*this.scale,n=this.worldSize/2-(t+e)/2;s=(r+n+this.worldSize)%this.worldSize-n,s-c<t&&(s=t+c),s+c>e&&(s=e-c),e-t<this.width&&(o=Math.max(o,this.width/(e-t)),s=(e+t)/2)}s===r&&a===i||(this.center=this.unproject(new t.Point(s,a))),o&&(this.zoom+=this.scaleZoom(o)),this._constrainCamera(),this._unmodified=n,this._constraining=!1}_minZoomForBounds(){let t=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(t=Math.max(t,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),t}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const e=this.centerOffset,n=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=t.mercatorZfromAltitude(1,this.center.lat)/t.mercatorZfromAltitude(1,t.GLOBE_SCALE_MATCH_LATITUDE));const r=$r(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,r),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const i="meters"===this.projection.zAxisUnit?n:1,o=this._camera.getWorldToCamera(this.worldSize,i),s=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);s[8]=2*-e.x/this.width,s[9]=2*e.y/this.height;let a=t.mul([],s,o);if(this.projection.isReprojectedInTileSpace){const e=this.locationCoordinate(this.center),n=t.identity([]);t.translate(n,n,[e.x*this.worldSize,e.y*this.worldSize,0]),t.multiply(n,n,Wr(this)),t.translate(n,n,[-e.x*this.worldSize,-e.y*this.worldSize,0]),t.multiply(a,a,n),this.inverseAdjustmentMatrix=function(t){const e=Wr(t,!0);return v([],[e[0],e[1],e[4],e[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=t.scale([],a,[this.worldSize,this.worldSize,this.worldSize/i,1]),this.projMatrix=a,this.invProjMatrix=t.invert(new Float64Array(16),this.projMatrix);const c=t.invert([],s);this.frustumCorners=t.FrustumCorners.fromInvProjectionMatrix(c,this.horizonLineFromTop(),this.height);const l=new Float32Array(16);t.identity(l),t.scale(l,l,[1,-1,1]),t.rotateX(l,l,this._pitch),t.rotateZ(l,l,this.angle);const u=t.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),h=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;u[8]=2*-e.x/this.width,u[9]=2*(e.y+h)/this.height,this.skyboxMatrix=t.multiply(l,u,l);const p=this.point,f=p.x,d=p.y,g=this.width%2/2,m=this.height%2/2,y=Math.cos(this.angle),_=Math.sin(this.angle),x=f-Math.round(f)+y*g+_*m,b=d-Math.round(d)+y*m+_*g,w=new Float64Array(a);if(t.translate(w,w,[x>.5?x-1:x,b>.5?b-1:b,0]),this.alignedProjMatrix=w,a=t.create(),t.scale(a,a,[this.width/2,-this.height/2,1]),t.translate(a,a,[1,-1,0]),this.labelPlaneMatrix=a,a=t.create(),t.scale(a,a,[1,-1,1]),t.translate(a,a,[-1,-1,0]),t.scale(a,a,[2/this.width,2/this.height,1]),this.glCoordMatrix=a,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},a=t.invert(new Float64Array(16),this.pixelMatrix),!a)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=a,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=t.calculateGlobeMatrix(this);const e=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=t.transformMat4(e,e,o),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=a;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const e=this.cameraWorldSizeForFog,n=this.cameraPixelsPerMeter,r=this._camera.position,i=1/this.height/this._pixelsPerMercatorPixel,o=[e,e,n];t.scale$2(o,o,i),t.scale$2(r,r,-1),t.multiply$2(r,r,o);const s=t.create();t.translate(s,s,r),t.scale(s,s,o),this.mercatorFogMatrix=s,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(e,n,i)}_computeCameraPosition(t){const e=(t=t||this.pixelsPerMeter)/this.pixelsPerMeter,n=this._camera.forward(),r=this.point,i=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*e-t/this.worldSize*this._centerAltitude;return[r.x/this.worldSize-n[0]*i,r.y/this.worldSize-n[1]*i,t/this.worldSize*this._centerAltitude-n[2]*i]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(e){const n=this._maxCameraBoundsDistance()*Math.cos(this._pitch),r=this._camera.position[2],i=e[2];let o=1;this.projection.wrap&&(this.center=this.center.wrap()),i>0&&(o=Math.min((n-r)/i,1)),this._camera.position=t.scaleAndAdd([],this._camera.position,e,o),this._updateStateFromCamera()}_updateStateFromCamera(){const e=this._camera.position,n=this._camera.forward(),{pitch:r,bearing:i}=this._camera.getPitchBearing(),o=t.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,s=this._mercatorZfromZoom(this._maxZoom)*Math.cos(t.degToRad(this._maxPitch)),a=Math.max((e[2]-o)/Math.cos(r),s),c=this._zoomFromMercatorZ(a);t.scaleAndAdd(e,e,n,a),this._pitch=t.clamp(r,t.degToRad(this.minPitch),t.degToRad(this.maxPitch)),this.angle=t.wrap(i,-Math.PI,Math.PI),this._setZoom(t.clamp(c,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new t.MercatorCoordinate(e[0],e[1],e[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(t){return Math.pow(2,t)*this.tileSize}_mercatorZfromZoom(t){return this.cameraToCenterDistance/this._worldSizeFromZoom(t)}_minimumHeightOverTerrain(){const t=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(t)}_zoomFromMercatorZ(t){return this.scaleZoom(this.cameraToCenterDistance/(t*this.tileSize))}zoomFromMercatorZAdjusted(e){let n=0,r=t.GLOBE_ZOOM_THRESHOLD_MAX,i=0,o=1/0;for(;r-n>1e-6&&r>n;){const t=n+.5*(r-n),s=this.tileSize*Math.pow(2,t),a=this.getCameraToCenterDistance(this.projection,t,s),c=this.scaleZoom(a/(e*this.tileSize)),l=Math.abs(t-c);l<o&&(o=l,i=t),t<c?n=t:r=t}return i}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(t.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(e,n){const r=Math.min(e.x,n.x),i=Math.max(e.x,n.x),o=Math.min(e.y,n.y),s=Math.max(e.y,n.y);if(o<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const a=[new t.Point(r,o),new t.Point(i,s),new t.Point(r,s),new t.Point(i,o)],c=this.renderWorldCopies?-3:0,l=this.renderWorldCopies?4:1;for(const t of a){const e=this.pointRayIntersection(t);if(e.t<0)return!0;const n=this.rayIntersectionCoordinate(e);if(n.x<c||n.y<0||n.x>l||n.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+t.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new t.Point(0,0),new t.Point(this.width,this.height))}zoomDeltaToMovement(e,n){const r=t.length(t.sub([],this._camera.position,e)),i=this._zoomFromMercatorZ(r)+n;return r-this._mercatorZfromZoom(i)}getCameraPoint(){if("globe"===this.projection.name){const e=function([e,n,r],i){const o=[e,n,r,1];t.transformMat4$1(o,o,i);const s=o[3]=Math.max(o[3],1e-6);return o[0]/=s,o[1]/=s,o[2]/=s,o}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new t.Point(e[0],e[1])}{const e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,e))}}getCameraToCenterDistance(t,e=this.zoom,n=this.worldSize){const r=$r(t,e,this.width,this.height,1024),i=t.pixelSpaceConversion(this.center.lat,n,r);return.5/Math.tan(.5*this._fov)*this.height*i}getWorldToCameraMatrix(){const e=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&t.multiply(e,e,this.globeMatrix),e}}function Kr(t,e){let n=!1,r=null;const i=()=>{r=null,n&&(t(),r=setTimeout(i,e),n=!1)};return()=>(n=!0,r||i(),r)}class Jr{constructor(e){this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Kr(this._updateHashUnthrottled.bind(this),300)}addTo(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),e.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),t.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const e=this._map;if(!e)return"";const n=Qr(e);if(this._hashName){const e=this._hashName;let r=!1;const i=t.window.location.hash.slice(1).split("&").map((t=>{const i=t.split("=")[0];return i===e?(r=!0,`${i}=${n}`):t})).filter((t=>t));return r||i.push(`${e}=${n}`),`#${i.join("&")}`}return`#${n}`}_getCurrentHash(){const e=t.window.location.hash.replace("#","");if(this._hashName){let t;return e.split("&").map((t=>t.split("="))).forEach((e=>{e[0]===this._hashName&&(t=e)})),(t&&t[1]||"").split("/")}return e.split("/")}_onHashChange(){const t=this._map;if(!t)return!1;const e=this._getCurrentHash();if(e.length>=3&&!e.some((t=>isNaN(t)))){const n=t.dragRotate.isEnabled()&&t.touchZoomRotate.isEnabled()?+(e[3]||0):t.getBearing();return t.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:n,pitch:+(e[4]||0)}),!0}return!1}_updateHashUnthrottled(){const e=t.window.location.href.replace(/(#.+)?$/,this.getHashString());t.window.history.replaceState(t.window.history.state,null,e)}}function Qr(t,e){const n=t.getCenter(),r=Math.round(100*t.getZoom())/100,i=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,i),s=Math.round(n.lng*o)/o,a=Math.round(n.lat*o)/o,c=t.getBearing(),l=t.getPitch();let u=e?`/${s}/${a}/${r}`:`${r}/${a}/${s}`;return(c||l)&&(u+="/"+Math.round(10*c)/10),l&&(u+=`/${Math.round(l)}`),u}const ti={linearity:.3,easing:t.bezier(0,0,.3,1)},ei=t.extend({deceleration:2500,maxSpeed:1400},ti),ni=t.extend({deceleration:20,maxSpeed:1400},ti),ri=t.extend({deceleration:1e3,maxSpeed:360},ti),ii=t.extend({deceleration:1e3,maxSpeed:90},ti);class oi{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.exported.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,n=t.exported.now();for(;e.length>0&&n-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._map._prefersReducedMotion())return;if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const n={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:t}of this._inertiaBuffer)n.zoom+=t.zoomDelta||0,n.bearing+=t.bearingDelta||0,n.pitch+=t.pitchDelta||0,t.panDelta&&n.pan._add(t.panDelta),t.around&&(n.around=t.around),t.pinchAround&&(n.pinchAround=t.pinchAround);const r=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,i={};if(n.pan.mag()){const o=ai(n.pan.mag(),r,t.extend({},ei,e||{}));i.offset=n.pan.mult(o.amount/n.pan.mag()),i.center=this._map.transform.center,si(i,o)}if(n.zoom){const t=ai(n.zoom,r,ni);i.zoom=this._map.transform.zoom+t.amount,si(i,t)}if(n.bearing){const e=ai(n.bearing,r,ri);i.bearing=this._map.transform.bearing+t.clamp(e.amount,-179,179),si(i,e)}if(n.pitch){const t=ai(n.pitch,r,ii);i.pitch=this._map.transform.pitch+t.amount,si(i,t)}if(i.zoom||i.bearing){const t=void 0===n.pinchAround?n.around:n.pinchAround;i.around=t?this._map.unproject(t):this._map.getCenter()}return this.clear(),i.noMoveStart=!0,i}}function si(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function ai(e,n,r){const{maxSpeed:i,linearity:o,deceleration:s}=r,a=t.clamp(e*o/(n/1e3),-i,i),c=Math.abs(a)/(s*o);return{easing:r.easing,duration:1e3*c,amount:a*(c/2)}}class ci extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,r,i={}){const o=g(n.getCanvasContainer(),r),s=n.unproject(o);super(e,t.extend({point:o,lngLat:s,originalEvent:r},i)),this._defaultPrevented=!1,this.target=n}}class li extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,r){const i="touchend"===e?r.changedTouches:r.touches,o=m(n.getCanvasContainer(),i),s=o.map((t=>n.unproject(t))),a=o.reduce(((t,e,n,r)=>t.add(e.div(r.length))),new t.Point(0,0));super(e,{points:o,point:a,lngLats:s,lngLat:n.unproject(a),originalEvent:r}),this._defaultPrevented=!1}}class ui extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,e,n){super(t,{originalEvent:n}),this._defaultPrevented=!1}}class hi{constructor(t,e){this._map=t,this._clickTolerance=e.clickTolerance}reset(){this._mousedownPos=void 0}wheel(t){return this._firePreventable(new ui(t.type,this._map,t))}mousedown(t,e){return this._mousedownPos=e,this._firePreventable(new ci(t.type,this._map,t))}mouseup(t){this._map.fire(new ci(t.type,this._map,t))}preclick(e){const n=t.extend({},e);n.type="preclick",this._map.fire(new ci(n.type,this._map,n))}click(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||(this.preclick(t),this._map.fire(new ci(t.type,this._map,t)))}dblclick(t){return this._firePreventable(new ci(t.type,this._map,t))}mouseover(t){this._map.fire(new ci(t.type,this._map,t))}mouseout(t){this._map.fire(new ci(t.type,this._map,t))}touchstart(t){return this._firePreventable(new li(t.type,this._map,t))}touchmove(t){this._map.fire(new li(t.type,this._map,t))}touchend(t){this._map.fire(new li(t.type,this._map,t))}touchcancel(t){this._map.fire(new li(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class pi{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(t){this._map.fire(new ci(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ci("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new ci(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class fi{constructor(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(h(),this._startPos=this._lastPos=e,this._active=!0)}mousemoveWindow(t,e){if(!this._active)return;const n=e,r=this._startPos,i=this._lastPos;if(!r||!i||i.equals(n)||!this._box&&n.dist(r)<this._clickTolerance)return;this._lastPos=n,this._box||(this._box=s("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));const o=Math.min(r.x,n.x),a=Math.max(r.x,n.x),c=Math.min(r.y,n.y),l=Math.max(r.y,n.y);this._map._requestDomTask((()=>{this._box&&(this._box.style.transform=`translate(${o}px,${c}px)`,this._box.style.width=a-o+"px",this._box.style.height=l-c+"px")}))}mouseupWindow(e,n){if(!this._active)return;const r=this._startPos,i=n;if(r&&0===e.button){if(this.reset(),d(),r.x!==i.x||r.y!==i.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:t=>t.fitScreenCoordinates(r,i,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",e)}}keydown(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),p(),delete this._startPos,delete this._lastPos}_fireEvent(e,n){return this._map.fire(new t.Event(e,{originalEvent:n}))}}function di(t,e){const n={};for(let r=0;r<t.length;r++)n[t[r].identifier]=e[r];return n}class gi{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(e,n,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=e.timeStamp),r.length===this.numTouches&&(this.centroid=function(e){const n=new t.Point(0,0);for(const t of e)n._add(t);return n.div(e.length)}(n),this.touches=di(r,n)))}touchmove(t,e,n){if(this.aborted||!this.centroid)return;const r=di(n,e);for(const t in this.touches){const e=r[t];(!e||e.dist(this.touches[t])>30)&&(this.aborted=!0)}}touchend(t,e,n){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){const t=!this.aborted&&this.centroid;if(this.reset(),t)return t}}}class mi{constructor(t){this.singleTap=new gi(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(t,e,n){this.singleTap.touchstart(t,e,n)}touchmove(t,e,n){this.singleTap.touchmove(t,e,n)}touchend(t,e,n){const r=this.singleTap.touchend(t,e,n);if(r){const e=t.timeStamp-this.lastTime<500,n=!this.lastTap||this.lastTap.dist(r)<30;if(e&&n||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}class yi{constructor(){this._zoomIn=new mi({numTouches:1,numTaps:2}),this._zoomOut=new mi({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,e,n){this._zoomIn.touchstart(t,e,n),this._zoomOut.touchstart(t,e,n)}touchmove(t,e,n){this._zoomIn.touchmove(t,e,n),this._zoomOut.touchmove(t,e,n)}touchend(t,e,n){const r=this._zoomIn.touchend(t,e,n),i=this._zoomOut.touchend(t,e,n);return r?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(r)},{originalEvent:t})}):i?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(i)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const _i={0:1,2:2};class vi{constructor(t){this.reset(),this._clickTolerance=t.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(t,e){return!1}_move(t,e){return{}}mousedown(t,e){if(this._lastPoint)return;const n=y(t);this._correctButton(t,n)&&(this._lastPoint=e,this._eventButton=n)}mousemoveWindow(t,e){const n=this._lastPoint;if(n)if(t.preventDefault(),null!=this._eventButton&&function(t,e){const n=_i[e];return void 0===t.buttons||(t.buttons&n)!==n}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(n,e)}mouseupWindow(t){this._lastPoint&&y(t)===this._eventButton&&(this._moved&&d(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xi extends vi{mousedown(t,e){super.mousedown(t,e),this._lastPoint&&(this._active=!0)}_correctButton(t,e){return 0===e&&!t.ctrlKey}_move(t,e){return{around:e,panDelta:e.sub(t)}}}class bi extends vi{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const n=.8*(e.x-t.x);if(n)return this._active=!0,{bearingDelta:n}}contextmenu(t){t.preventDefault()}}class wi extends vi{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const n=-.5*(e.y-t.y);if(n)return this._active=!0,{pitchDelta:n}}contextmenu(t){t.preventDefault()}}class Ei{constructor(e,n){this._map=e,this._el=e.getCanvasContainer(),this._minTouches=1,this._clickTolerance=n.clickTolerance||1,this.reset(),t.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)}touchstart(t,e,n){return this._calculateTransform(t,e,n)}touchmove(e,n,r){if(this._active&&!(r.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===r.length&&!t.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return e.cancelable&&e.preventDefault(),this._calculateTransform(e,n,r)}}touchend(t,e,n){this._calculateTransform(t,e,n),this._active&&n.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,n,r){r.length>0&&(this._active=!0);const i=di(r,n),o=new t.Point(0,0),s=new t.Point(0,0);let a=0;for(const t in i){const e=i[t],n=this._touches[t];n&&(o._add(e),s._add(e.sub(n)),a++,i[t]=e)}if(this._touches=i,a<this._minTouches||!s.mag())return;const c=s.div(a);return this._sum._add(c),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(a),panDelta:c}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=s("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")}),500)}}class Ti{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(t){}_move(t,e,n){return{}}touchstart(t,e,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([e[0],e[1]]))}touchmove(t,e,n){const r=this._firstTwoTouches;if(!r)return;t.preventDefault();const[i,o]=r,s=Si(n,e,i),a=Si(n,e,o);if(!s||!a)return;const c=this._aroundCenter?null:s.add(a).div(2);return this._move([s,a],c,t)}touchend(t,e,n){if(!this._firstTwoTouches)return;const[r,i]=this._firstTwoTouches,o=Si(n,e,r),s=Si(n,e,i);o&&s||(this._active&&d(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Si(t,e,n){for(let r=0;r<t.length;r++)if(t[r].identifier===n)return e[r]}function ki(t,e){return Math.log(t/e)/Math.LN2}class Ai extends Ti{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,e){const n=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(ki(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ki(this._distance,n),pinchAround:e}}}function Mi(t,e){return 180*t.angleWith(e)/Math.PI}class Ii extends Ti{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,e){const n=this._vector;if(this._vector=t[0].sub(t[1]),n&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Mi(this._vector,n),pinchAround:e}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const e=25/(Math.PI*this._minDiameter)*360,n=this._startVector;if(!n)return!1;const r=Mi(t,n);return Math.abs(r)<e}}function Ci(t){return Math.abs(t.y)>Math.abs(t.x)}class Oi extends Ti{constructor(t){super(),this._map=t}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(t){this._lastPoints=t,Ci(t[0].sub(t[1]))&&(this._valid=!1)}_move(e,n,r){const i=this._lastPoints;if(!i)return;const o=e[0].sub(i[0]),s=e[1].sub(i[1]);return this._map._cooperativeGestures&&!t.isFullscreen()&&r.touches.length<3||(this._valid=this.gestureBeginsVertically(o,s,r.timeStamp),!this._valid)?void 0:(this._lastPoints=e,this._active=!0,{pitchDelta:(o.y+s.y)/2*-.5})}gestureBeginsVertically(t,e,n){if(void 0!==this._valid)return this._valid;const r=t.mag()>=2,i=e.mag()>=2;if(!r&&!i)return;if(!r||!i)return null==this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;const o=t.y>0==e.y>0;return Ci(t)&&Ci(e)&&o}}const Pi={panStep:100,bearingStep:15,pitchStep:10};class Li{constructor(){const t=Pi;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let e=0,n=0,r=0,i=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),i=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),i=1);break;case 38:t.shiftKey?r=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?r=-1:(t.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(n=0,r=0),{cameraAnimation:s=>{const a=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:Di,zoom:e?Math.round(a)+e*(t.shiftKey?2:1):a,bearing:s.getBearing()+n*this._bearingStep,pitch:s.getPitch()+r*this._pitchStep,offset:[-i*this._panStep,-o*this._panStep],center:s.getCenter()},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Di(t){return t*(2-t)}const Ri=4.000244140625;class Ni{constructor(e,n){this._map=e,this._el=e.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,t.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(e){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(e.ctrlKey||e.metaKey||this.isZooming()||t.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let n=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const r=t.exported.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%Ri==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this._active||this._start(e)),e.preventDefault()}_onTimeout(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const e=g(this._el,t);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:e,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const e=this._map.transform;"wheel"===this._type&&e.projection.wrap&&(e._center.lng>=180||e._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const n=()=>e._terrainEnabled()&&this._aroundCoord?e.computeZoomRelativeTo(this._aroundCoord):e.zoom;if(0!==this._delta){const t="wheel"===this._type&&Math.abs(this._delta)>Ri?this._wheelZoomRate:this._defaultZoomRate;let r=2/(1+Math.exp(-Math.abs(this._delta*t)));this._delta<0&&0!==r&&(r=1/r);const i=n(),o=Math.pow(2,i),s="number"==typeof this._targetZoom?e.zoomScale(this._targetZoom):o;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(s*r))),"wheel"===this._type&&(this._startZoom=i,this._easing=this._smoothOutEasing(200)),this._delta=0}const r="number"==typeof this._targetZoom?this._targetZoom:n(),i=this._startZoom,o=this._easing;let s,a=!1;if("wheel"===this._type&&i&&o){const e=Math.min((t.exported.now()-this._lastWheelEventTime)/200,1),n=o(e);s=t.number(i,r,n),e<1?this._frameId||(this._frameId=!0):a=!0}else s=r,a=!0;return this._active=!0,a&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!a,zoomDelta:s-n(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let n=t.ease;if(this._prevEase){const e=this._prevEase,r=(t.exported.now()-e.start)/e.duration,i=e.easing(r+.01)-e.easing(r),o=.27/Math.sqrt(i*i+1e-4)*.01,s=Math.sqrt(.0729-o*o);n=t.bezier(o,s,.25,1)}return this._prevEase={start:t.exported.now(),duration:e,easing:n},n}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=s("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(t.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")}),200)}}class ji{constructor(t,e){this._clickZoom=t,this._tapZoom=e}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class zi{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(t,e){return t.preventDefault(),{cameraAnimation:n=>{n.easeTo({duration:300,zoom:n.getZoom()+(t.shiftKey?-1:1),around:n.unproject(e)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Bi{constructor(){this._tap=new mi({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(t,e,n){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=e[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(t,e,n))}touchmove(t,e,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;const r=e[0],i=r.y-this._swipePoint.y;return this._swipePoint=r,t.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(t,e,n)}touchend(t,e,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(t,e,n)&&(this._tapTime=t.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Fi{constructor(t,e,n){this._el=t,this._mousePan=e,this._touchPan=n}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ui{constructor(t,e,n){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=n}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Vi{constructor(t,e,n,r){this._el=t,this._touchZoom=e,this._touchRotate=n,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const qi=t=>t.zoom||t.drag||t.pitch||t.rotate;class Wi extends t.Event{}class Gi{constructor(){this.constants=[1,1,.01],this.radius=0}setup(e,n){const r=t.sub([],n,e);this.radius=t.length(r[2]<0?t.div([],r,this.constants):[r[0],r[1],0])}projectRay(e){t.div(e,e,this.constants),t.normalize(e,e),t.mul$1(e,e,this.constants);const n=t.scale$2([],e,this.radius);if(n[2]>0){const e=t.scale$2([],[0,0,1],t.dot(n,[0,0,1])),r=t.scale$2([],t.normalize([],[n[0],n[1],0]),this.radius),i=t.add([],n,t.scale$2([],t.sub([],t.add([],r,e),n),2));n[0]=i[0],n[1]=i[1]}return n}}function $i(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}class Hi{constructor(e,n){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new oi(e),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Gi,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(n),t.bindAll(["handleEvent","handleWindowEvent"],this);const r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[t.window,"blur",void 0]];for(const[e,n,r]of this._listeners)e.addEventListener(n,e===t.window.document?this.handleWindowEvent:this.handleEvent,r)}destroy(){for(const[e,n,r]of this._listeners)e.removeEventListener(n,e===t.window.document?this.handleWindowEvent:this.handleEvent,r)}_addDefaultHandlers(t){const e=this._map,n=e.getCanvasContainer();this._add("mapEvent",new hi(e,t));const r=e.boxZoom=new fi(e,t);this._add("boxZoom",r);const i=new yi,o=new zi;e.doubleClickZoom=new ji(o,i),this._add("tapZoom",i),this._add("clickZoom",o);const s=new Bi;this._add("tapDragZoom",s);const a=e.touchPitch=new Oi(e);this._add("touchPitch",a);const c=new bi(t),l=new wi(t);e.dragRotate=new Ui(t,c,l),this._add("mouseRotate",c,["mousePitch"]),this._add("mousePitch",l,["mouseRotate"]);const u=new xi(t),h=new Ei(e,t);e.dragPan=new Fi(n,u,h),this._add("mousePan",u),this._add("touchPan",h,["touchZoom","touchRotate"]);const p=new Ii,f=new Ai;e.touchZoomRotate=new Vi(n,f,p,s),this._add("touchRotate",p,["touchPan","touchZoom"]),this._add("touchZoom",f,["touchPan","touchRotate"]),this._add("blockableMapEvent",new pi(e));const d=e.scrollZoom=new Ni(e,this);this._add("scrollZoom",d,["mousePan"]);const g=e.keyboard=new Li;this._add("keyboard",g);for(const n of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])t.interactive&&t[n]&&e[n].enable(t[n])}_add(t,e,n){this._handlers.push({handlerName:t,handler:e,allowed:n}),this._handlersById[t]=e}stop(t){if(!this._updatingCamera){for(const{handler:t}of this._handlers)t.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!qi(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(t,e,n){for(const r in t)if(r!==n&&(!e||e.indexOf(r)<0))return!0;return!1}handleWindowEvent(t){this.handleEvent(t,`${t.type}Window`)}_getMapTouches(t){const e=[];for(const n of t)this._el.contains(n.target)&&e.push(n);return e}handleEvent(t,e){this._updatingCamera=!0;const n="renderFrame"===t.type,r=n?void 0:t,i={needsRenderFrame:!1},o={},s={},a=t.touches?this._getMapTouches(t.touches):void 0,c=a?m(this._el,a):n?void 0:g(this._el,t);for(const{handlerName:n,handler:l,allowed:u}of this._handlers){if(!l.isEnabled())continue;let h;this._blockedByActive(s,u,n)?l.reset():l[e||t.type]&&(h=l[e||t.type](t,c,a),this.mergeHandlerResult(i,o,h,n,r),h&&h.needsRenderFrame&&this._triggerRenderFrame()),(h||l.isActive())&&(s[n]=l)}const l={};for(const t in this._previousActiveHandlers)s[t]||(l[t]=r);this._previousActiveHandlers=s,(Object.keys(l).length||$i(i))&&(this._changes.push([i,o,l]),this._triggerRenderFrame()),(Object.keys(s).length||$i(i))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:u}=i;u&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],u(this._map))}mergeHandlerResult(e,n,r,i,o){if(!r)return;t.extend(e,r);const s={handlerName:i,originalEvent:r.originalEvent||o};void 0!==r.zoomDelta&&(n.zoom=s),void 0!==r.panDelta&&(n.drag=s),void 0!==r.pitchDelta&&(n.pitch=s),void 0!==r.bearingDelta&&(n.rotate=s)}_applyChanges(){const e={},n={},r={};for(const[i,o,s]of this._changes)i.panDelta&&(e.panDelta=(e.panDelta||new t.Point(0,0))._add(i.panDelta)),i.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+i.zoomDelta),i.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+i.bearingDelta),i.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+i.pitchDelta),void 0!==i.around&&(e.around=i.around),void 0!==i.aroundCoord&&(e.aroundCoord=i.aroundCoord),void 0!==i.pinchAround&&(e.pinchAround=i.pinchAround),i.noInertia&&(e.noInertia=i.noInertia),t.extend(n,o),t.extend(r,s);this._updateMapTransform(e,n,r),this._changes=[]}_updateMapTransform(e,n,r){const i=this._map,o=i.transform,s=t=>[t.x,t.y,t.z];if((t=>{const e=this._eventsInProgress.drag;return e&&!this._handlersById[e.handlerName].isActive()})()&&!$i(e)){const t=o.zoom;o.cameraElevationReference="sea",o.recenterOnTerrain(),o.cameraElevationReference="ground",t!==o.zoom&&this._map._update(!0)}if(o._isCameraConstrained&&i._stop(!0),!$i(e))return void this._fireEvents(n,r,!0);let{panDelta:a,zoomDelta:c,bearingDelta:l,pitchDelta:u,around:h,aroundCoord:p,pinchAround:f}=e;o._isCameraConstrained&&(c>0&&(c=0),o._isCameraConstrained=!1),void 0!==f&&(h=f),(c||(t=>n[t]&&!this._eventsInProgress[t])("drag"))&&h&&(this._dragOrigin=s(o.pointCoordinate3D(h)),this._trackingEllipsoid.setup(o._camera.position,this._dragOrigin)),o.cameraElevationReference="sea",i._stop(!0),h=h||i.transform.centerPoint,l&&(o.bearing+=l),u&&(o.pitch+=u),o._updateCameraState();const d=[0,0,0];if(a)if("mercator"===o.projection.name){const t=this._trackingEllipsoid.projectRay(o.screenPointToMercatorRay(h).dir),e=this._trackingEllipsoid.projectRay(o.screenPointToMercatorRay(h.sub(a)).dir);d[0]=e[0]-t[0],d[1]=e[1]-t[1]}else{const e=o.pointCoordinate(h);if("globe"===o.projection.name){a=a.rotate(-o.angle);const n=o._pixelsPerMercatorPixel/o.worldSize;d[0]=-a.x*t.mercatorScale(t.latFromMercatorY(e.y))*n,d[1]=-a.y*t.mercatorScale(o.center.lat)*n}else{const t=o.pointCoordinate(h.sub(a));e&&t&&(d[0]=t.x-e.x,d[1]=t.y-e.y)}}const g=o.zoom,m=[0,0,0];if(c){const e=s(p||o.pointCoordinate3D(h)),n={dir:t.normalize([],t.sub([],e,o._camera.position))};if(n.dir[2]<0){const r=o.zoomDeltaToMovement(e,c);t.scale$2(m,n.dir,r)}}const y=t.add(d,d,m);o._translateCameraConstrained(y),c&&Math.abs(o.zoom-g)>1e-4&&o.recenterOnTerrain(),o.cameraElevationReference="ground",this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(n,r,!0)}_fireEvents(e,n,r){const i=qi(this._eventsInProgress),o=qi(e),s={};for(const t in e){const{originalEvent:n}=e[t];this._eventsInProgress[t]||(s[`${t}start`]=n),this._eventsInProgress[t]=e[t]}!i&&o&&this._fireEvent("movestart",o.originalEvent);for(const t in s)this._fireEvent(t,s[t]);o&&this._fireEvent("move",o.originalEvent);for(const t in e){const{originalEvent:n}=e[t];this._fireEvent(t,n)}const a={};let c;for(const t in this._eventsInProgress){const{handlerName:e,originalEvent:r}=this._eventsInProgress[t];this._handlersById[e].isActive()||(delete this._eventsInProgress[t],c=n[e]||r,a[`${t}end`]=c)}for(const t in a)this._fireEvent(t,a[t]);const l=qi(this._eventsInProgress);if(r&&(i||o)&&!l){this._updatingCamera=!0;const e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),n=t=>0!==t&&-this._bearingSnap<t&&t<this._bearingSnap;e?(n(e.bearing||this._map.getBearing())&&(e.bearing=0),this._map.easeTo(e,{originalEvent:c})):(this._map.fire(new t.Event("moveend",{originalEvent:c})),n(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(e,n){this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((t=>{this._frameId=void 0,this.handleEvent(new Wi("renderFrame",{timeStamp:t})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Zi="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Yi extends t.Evented{constructor(e,n){super(),this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=n.bearingSnap,this._respectPrefersReducedMotion=!1!==n.respectPrefersReducedMotion,t.bindAll(["_renderFrameCallback"],this)}getCenter(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(t,e){return this.jumpTo({center:t},e)}panBy(e,n,r){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},n),r)}panTo(e,n,r){return this.easeTo(t.extend({center:e},n),r)}getZoom(){return this.transform.zoom}setZoom(t,e){return this.jumpTo({zoom:t},e),this}zoomTo(e,n,r){return this.easeTo(t.extend({zoom:e},n),r)}zoomIn(t,e){return this.zoomTo(this.getZoom()+1,t,e),this}zoomOut(t,e){return this.zoomTo(this.getZoom()-1,t,e),this}getBearing(){return this.transform.bearing}setBearing(t,e){return this.jumpTo({bearing:t},e),this}getPadding(){return this.transform.padding}setPadding(t,e){return this.jumpTo({padding:t},e),this}rotateTo(e,n,r){return this.easeTo(t.extend({bearing:e},n),r)}resetNorth(e,n){return this.rotateTo(0,t.extend({duration:1e3},e),n),this}resetNorthPitch(e,n){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),n),this}snapToNorth(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this}getPitch(){return this.transform.pitch}setPitch(t,e){return this.jumpTo({pitch:t},e),this}cameraForBounds(e,n){e=t.LngLatBounds.convert(e);const r=n&&n.bearing||0,i=n&&n.pitch||0,o=e.getNorthWest(),s=e.getSouthEast();return this._cameraForBounds(this.transform,o,s,r,i,n)}_extendCameraOptions(e){const n={top:0,bottom:0,right:0,left:0};if("number"==typeof(e=t.extend({padding:n,offset:[0,0],maxZoom:this.transform.maxZoom},e)).padding){const t=e.padding;e.padding={top:t,bottom:t,right:t,left:t}}return e.padding=t.extend(n,e.padding),e}_minimumAABBFrustumDistance(t,e){const n=e.max[0]-e.min[0],r=e.max[1]-e.min[1];return n/r>t.aspect?n/(2*Math.tan(.5*t.fovX)*t.aspect):r/(2*Math.tan(.5*t.fovY)*t.aspect)}_cameraForBoundsOnGlobe(e,n,r,i,o,s){const a=e.clone(),c=this._extendCameraOptions(s);a.bearing=i,a.pitch=o;const l=t.LngLat.convert(n),u=t.LngLat.convert(r),h=.5*(l.lat+u.lat),p=.5*(l.lng+u.lng),f=t.latLngToECEF(h,p),d=t.normalize([],f),g=t.normalize([],t.cross([],d,[0,1,0])),m=t.cross([],g,d),y=[g[0],g[1],g[2],0,m[0],m[1],m[2],0,d[0],d[1],d[2],0,0,0,0,1],_=[f,t.latLngToECEF(l.lat,l.lng),t.latLngToECEF(u.lat,l.lng),t.latLngToECEF(u.lat,u.lng),t.latLngToECEF(l.lat,u.lng),t.latLngToECEF(h,l.lng),t.latLngToECEF(h,u.lng),t.latLngToECEF(l.lat,p),t.latLngToECEF(u.lat,p)];let v=t.Aabb.fromPoints(_.map((e=>[t.dot(g,e),t.dot(m,e),t.dot(d,e)])));const x=t.transformMat4([],v.center,y);0===t.squaredLength(x)&&t.set(x,0,0,1),t.normalize(x,x),t.scale$2(x,x,t.GLOBE_RADIUS),a.center=t.ecefToLatLng(x);const b=a.getWorldToCameraMatrix(),w=t.invert(new Float64Array(16),b);v=t.Aabb.applyTransform(v,t.multiply([],b,y)),t.transformMat4(x,x,b);const E=.5*(v.max[2]-v.min[2]),T=this._minimumAABBFrustumDistance(a,v),S=t.scale$2([],[0,0,1],E),k=t.add(S,x,S),A=T+(0===a.pitch?0:t.distance(x,k)),M=a.globeCenterInViewSpace,I=t.sub([],x,[M[0],M[1],M[2]]);t.normalize(I,I),t.scale$2(I,I,A);const C=t.add([],x,I);t.transformMat4(C,C,w);const O=t.earthRadius/t.GLOBE_RADIUS,P=t.length(C),L=t.mercatorZfromAltitude(Math.max(P*O-t.earthRadius,Number.EPSILON),0),D=Math.min(a.zoomFromMercatorZAdjusted(L),c.maxZoom);return D>.5*(t.GLOBE_ZOOM_THRESHOLD_MIN+t.GLOBE_ZOOM_THRESHOLD_MAX)?(a.setProjection({name:"mercator"}),a.zoom=D,this._cameraForBounds(a,n,r,i,o,s)):{center:a.center,zoom:D,bearing:i,pitch:o}}queryTerrainElevation(e,n){const r=this.transform.elevation;return r?(n=t.extend({},{exaggerated:!0},n),r.getAtPoint(t.MercatorCoordinate.fromLngLat(e),null,n.exaggerated)):null}_cameraForBounds(e,n,r,i,o,s){if("globe"===e.projection.name)return this._cameraForBoundsOnGlobe(e,n,r,i,o,s);const a=e.clone(),c=this._extendCameraOptions(s),l=a.padding;a.bearing=i,a.pitch=o;const u=t.LngLat.convert(n),h=t.LngLat.convert(r),p=new t.LngLat(u.lng,h.lat),f=new t.LngLat(h.lng,u.lat),d=a.project(u),g=a.project(h),m=this.queryTerrainElevation(u),y=this.queryTerrainElevation(h),_=this.queryTerrainElevation(p),v=this.queryTerrainElevation(f),x=[[d.x,d.y,Math.min(m||0,y||0,_||0,v||0)],[g.x,g.y,Math.max(m||0,y||0,_||0,v||0)]];let b=t.Aabb.fromPoints(x);const w=a.getWorldToCameraMatrix(),E=t.invert(new Float64Array(16),w);b=t.Aabb.applyTransform(b,w);const T=t.sub([],b.max,b.min),S=l.left||0,k=l.right||0,A=l.bottom||0,M=l.top||0,{left:I,right:C,top:O,bottom:P}=c.padding,L=.5*(S+k),D=.5*(M+A),R=Math.min(a.scaleZoom(a.scale*Math.min((a.width-(S+k+I+C))/T[0],(a.height-(A+M+P+O))/T[1])),c.maxZoom),N=a.scale/a.zoomScale(R);b=new t.Aabb([b.min[0]-(I+L)*N,b.min[1]-(P+D)*N,b.min[2]],[b.max[0]+(C+L)*N,b.max[1]+(O+D)*N,b.max[2]]);const j=.5*T[2],z=this._minimumAABBFrustumDistance(a,b),B=[0,0,1,0];t.transformMat4$1(B,B,w),t.normalize$2(B,B);const F=t.scale$2([],B,z+j),U=t.add([],b.center,F),V=("number"==typeof c.offset.x&&"number"==typeof c.offset.y?new t.Point(c.offset.x,c.offset.y):t.Point.convert(c.offset)).rotate(-t.degToRad(i));b.center[0]-=V.x*N,b.center[1]+=V.y*N,t.transformMat4(b.center,b.center,E),t.transformMat4(U,U,E);const q=[b.center[0],b.center[1],U[2]*a.pixelsPerMeter];t.scale$2(q,q,1/a.worldSize);const W=t.lngFromMercatorX(q[0]),G=t.latFromMercatorY(q[1]),$=Math.min(a._zoomFromMercatorZ(q[2]),c.maxZoom),H=new t.LngLat(W,G);return a.mercatorFromTransition&&$<.5*(t.GLOBE_ZOOM_THRESHOLD_MIN+t.GLOBE_ZOOM_THRESHOLD_MAX)?(a.setProjection({name:"globe"}),a.zoom=$,this._cameraForBounds(a,n,r,i,o,s)):{center:H,zoom:$,bearing:i,pitch:o}}fitBounds(t,e,n){const r=this.cameraForBounds(t,e);return this._fitInternal(r,e,n)}fitScreenCoordinates(e,n,r,i,o){const s=t.Point.convert(e),a=t.Point.convert(n),c=new t.Point(Math.min(s.x,a.x),Math.min(s.y,a.y)),l=new t.Point(Math.max(s.x,a.x),Math.max(s.y,a.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(s,a))return this;const u=this.transform.pointLocation3D(c),h=this.transform.pointLocation3D(l),p=this.transform.pointLocation3D(new t.Point(c.x,l.y)),f=this.transform.pointLocation3D(new t.Point(l.x,c.y)),d=[Math.min(u.lng,h.lng,p.lng,f.lng),Math.min(u.lat,h.lat,p.lat,f.lat)],g=[Math.max(u.lng,h.lng,p.lng,f.lng),Math.max(u.lat,h.lat,p.lat,f.lat)],m=i&&i.pitch?i.pitch:this.getPitch(),y=this._cameraForBounds(this.transform,d,g,r,m,i);return this._fitInternal(y,i,o)}_fitInternal(e,n,r){return e?(delete(n=t.extend(e,n)).padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this}jumpTo(e,n){this.stop();const r=e.preloadOnly?this.transform.clone():this.transform;let i=!1,o=!1,s=!1;return"zoom"in e&&r.zoom!==+e.zoom&&(i=!0,r.zoom=+e.zoom),void 0!==e.center&&(r.center=t.LngLat.convert(e.center)),"bearing"in e&&r.bearing!==+e.bearing&&(o=!0,r.bearing=+e.bearing),"pitch"in e&&r.pitch!==+e.pitch&&(s=!0,r.pitch=+e.pitch),null==e.padding||r.isPaddingEqual(e.padding)||(r.padding=e.padding),e.preloadOnly?(this._preloadTiles(r),this):(this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),i&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),o&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),s&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||t.warnOnce(Zi),this.transform.getFreeCameraOptions()}setFreeCameraOptions(e,n){const r=this.transform;if(!r.projection.supportsFreeCamera)return t.warnOnce(Zi),this;this.stop();const i=r.zoom,o=r.pitch,s=r.bearing;r.setFreeCameraOptions(e);const a=i!==r.zoom,c=o!==r.pitch,l=s!==r.bearing;return this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),a&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),l&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),c&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n)),this}easeTo(e,n){this._stop(!1,e.easeId),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||this._prefersReducedMotion(e))&&(e.duration=0);const r=this.transform,i=this.getZoom(),o=this.getBearing(),s=this.getPitch(),a=this.getPadding(),c="zoom"in e?+e.zoom:i,l="bearing"in e?this._normalizeBearing(e.bearing,o):o,u="pitch"in e?+e.pitch:s,h="padding"in e?e.padding:r.padding,p=t.Point.convert(e.offset);let f,d,g;if("globe"===r.projection.name){const n=t.MercatorCoordinate.fromLngLat(r.center),i=p.rotate(-r.angle);n.x+=i.x/r.worldSize,n.y+=i.y/r.worldSize;const o=n.toLngLat(),s=t.LngLat.convert(e.center||o);this._normalizeCenter(s),f=r.centerPoint.add(i),d=new t.Point(n.x,n.y).mult(r.worldSize),g=new t.Point(t.mercatorXfromLng(s.lng),t.mercatorYfromLat(s.lat)).mult(r.worldSize).sub(d)}else{f=r.centerPoint.add(p);const n=r.pointLocation(f),i=t.LngLat.convert(e.center||n);this._normalizeCenter(i),d=r.project(n),g=r.project(i).sub(d)}const m=r.zoomScale(c-i);let y,_;e.around&&(y=t.LngLat.convert(e.around),_=r.locationPoint(y));const v=this._zooming||c!==i,x=this._rotating||o!==l,b=this._pitching||u!==s,w=!r.isPaddingEqual(h),E=r=>E=>{if(v&&(r.zoom=t.number(i,c,E)),x&&(r.bearing=t.number(o,l,E)),b&&(r.pitch=t.number(s,u,E)),w&&(r.interpolatePadding(a,h,E),f=r.centerPoint.add(p)),y)r.setLocationAtPoint(y,_);else{const t=r.zoomScale(r.zoom-i),e=c>i?Math.min(2,m):Math.max(.5,m),n=Math.pow(e,1-E),o=r.unproject(d.add(g.mult(E*n)).mult(t));r.setLocationAtPoint(r.renderWorldCopies?o.wrap():o,f)}return e.preloadOnly||this._fireMoveEvents(n),r};if(e.preloadOnly){const t=this._emulate(E,e.duration,r);return this._preloadTiles(t),this}const T={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=v,this._rotating=x,this._pitching=b,this._padding=w,this._easeId=e.easeId,this._prepareEase(n,e.noMoveStart,T),this._ease(E(r),(t=>{r.recenterOnTerrain(),this._afterEase(n,t)}),e),this}_prepareEase(e,n,r={}){this._moving=!0,this.transform.cameraElevationReference="sea",n||r.moving||this.fire(new t.Event("movestart",e)),this._zooming&&!r.zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&!r.rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&!r.pitching&&this.fire(new t.Event("pitchstart",e))}_fireMoveEvents(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))}_afterEase(e,n){if(this._easeId&&n&&this._easeId===n)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const r=this._zooming,i=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new t.Event("zoomend",e)),i&&this.fire(new t.Event("rotateend",e)),o&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))}flyTo(e,n){if(this._prefersReducedMotion(e)){const r=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,n)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);const r=this.transform,i=this.getZoom(),o=this.getBearing(),s=this.getPitch(),a=this.getPadding(),c="zoom"in e?t.clamp(+e.zoom,r.minZoom,r.maxZoom):i,l="bearing"in e?this._normalizeBearing(e.bearing,o):o,u="pitch"in e?+e.pitch:s,h="padding"in e?e.padding:r.padding,p=r.zoomScale(c-i),f=t.Point.convert(e.offset);let d=r.centerPoint.add(f);const g=r.pointLocation(d),m=t.LngLat.convert(e.center||g);this._normalizeCenter(m);const y=r.project(g),_=r.project(m).sub(y);let v=e.curve;const x=Math.max(r.width,r.height),b=x/p,w=_.mag();if("minZoom"in e){const n=t.clamp(Math.min(e.minZoom,i,c),r.minZoom,r.maxZoom),o=x/r.zoomScale(n-i);v=Math.sqrt(o/w*2)}const E=v*v;function T(t){const e=(b*b-x*x+(t?-1:1)*E*E*w*w)/(2*(t?b:x)*E*w);return Math.log(Math.sqrt(e*e+1)-e)}function S(t){return(Math.exp(t)-Math.exp(-t))/2}function k(t){return(Math.exp(t)+Math.exp(-t))/2}const A=T(0);let M=function(t){return k(A)/k(A+v*t)},I=function(t){return x*((k(A)*(S(e=A+v*t)/k(e))-S(A))/E)/w;var e},C=(T(1)-A)/v;if(Math.abs(w)<1e-6||!isFinite(C)){if(Math.abs(x-b)<1e-6)return this.easeTo(e,n);const t=b<x?-1:1;C=Math.abs(Math.log(b/x))/v,I=function(){return 0},M=function(e){return Math.exp(t*v*e)}}e.duration="duration"in e?+e.duration:1e3*C/("screenSpeed"in e?+e.screenSpeed/v:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0);const O=o!==l,P=u!==s,L=!r.isPaddingEqual(h),D=r=>p=>{const g=p*C,v=1/M(g);r.zoom=1===p?c:i+r.scaleZoom(v),O&&(r.bearing=t.number(o,l,p)),P&&(r.pitch=t.number(s,u,p)),L&&(r.interpolatePadding(a,h,p),d=r.centerPoint.add(f));const x=1===p?m:r.unproject(y.add(_.mult(I(g))).mult(v));return r.setLocationAtPoint(r.renderWorldCopies?x.wrap():x,d),r._updateCameraOnTerrain(),e.preloadOnly||this._fireMoveEvents(n),r};if(e.preloadOnly){const t=this._emulate(D,e.duration,r);return this._preloadTiles(t),this}return this._zooming=!0,this._rotating=O,this._pitching=P,this._padding=L,this._prepareEase(n,!1),this._ease(D(r),(()=>this._afterEase(n)),e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const t=this._onEaseEnd;this._onEaseEnd=void 0,t.call(this,e)}if(!t){const t=this.handlers;t&&t.stop(!1)}return this}_ease(e,n,r){!1===r.animate||0===r.duration?(e(1),n()):(this._easeStart=t.exported.now(),this._easeOptions=r,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const e=Math.min((t.exported.now()-this._easeStart)/this._easeOptions.duration,1),n=this._onEaseFrame;n&&n(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(e,n){e=t.wrap(e,-180,180);const r=Math.abs(e-n);return Math.abs(e-360-n)<r&&(e-=360),Math.abs(e+360-n)<r&&(e+=360),e}_normalizeCenter(t){const e=this.transform;if(!e.renderWorldCopies||e.maxBounds)return;const n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}_prefersReducedMotion(e){return this._respectPrefersReducedMotion&&t.exported.prefersReducedMotion&&!(e&&e.essential)}_emulate(t,e,n){const r=Math.ceil(15*e/1e3),i=[],o=t(n.clone());for(let t=0;t<=r;t++){const e=o(t/r);i.push(e.clone())}return i}}class Xi{constructor(e={}){this.options=e,t.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(t){const e=this.options&&this.options.compact;return this._map=t,this._container=s("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=s("button","mapboxgl-ctrl-attrib-button",this._container),s("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=s("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(t,e){const n=this._map._getUIString(`AttributionControl.${e}`);t.setAttribute("aria-label",n),t.removeAttribute("title"),t.firstElementChild&&t.firstElementChild.setAttribute("title",n)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));const n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(e){const r=n.reduce(((t,e,r)=>(e.value&&(t+=`${e.key}=${e.value}${r<n.length-1?"&":""}`),t)),"?");e.href=`${t.config.FEEDBACK_URL}/${r}#${Qr(this._map,!0)}`,e.rel="noopener nofollow",this._setElementTitle(e,"MapFeedback")}}_updateData(t){!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let t=[];if(this._map.style.stylesheet){const t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}const e=this._map.style._sourceCaches;for(const n in e){const r=e[n];if(r.used){const e=r.getSource();e.attribution&&t.indexOf(e.attribution)<0&&t.push(e.attribution)}}t.sort(((t,e)=>t.length-e.length)),t=t.filter(((e,n)=>{for(let r=n+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0})),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=[...this.options.customAttribution,...t]:t.unshift(this.options.customAttribution));const n=t.join(" | ");n!==this._attribHTML&&(this._attribHTML=n,t.length?(this._innerContainer.innerHTML=n,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Ki{constructor(){t.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(t){this._map=t,this._container=s("div","mapboxgl-ctrl");const e=s("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const t=this._map.style._sourceCaches;if(0===Object.entries(t).length)return!0;for(const e in t){const n=t[e].getSource();if(n.hasOwnProperty("mapbox_logo")&&!n.mapbox_logo)return!1}return!0}_updateCompact(){const t=this._container.children;if(t.length){const e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}}}class Ji{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e}remove(t){const e=this._currentlyRunning,n=e?this._queue.concat(e):this._queue;for(const e of n)if(e.id===t)return void(e.cancelled=!0)}run(t=0){const e=this._currentlyRunning=this._queue;this._queue=[];for(const n of e)if(!n.cancelled&&(n.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Qi(e,n,r){if(e=new t.LngLat(e.lng,e.lat),n){const i=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),s=360*Math.ceil(Math.abs(e.lng-r.center.lng)/360),a=r.locationPoint(e).distSqr(n),c=n.x<0||n.y<0||n.x>r.width||n.y>r.height;r.locationPoint(i).distSqr(n)<a&&(c||Math.abs(i.lng-r.center.lng)<s)?e=i:r.locationPoint(o).distSqr(n)<a&&(c||Math.abs(o.lng-r.center.lng)<s)&&(e=o)}for(;Math.abs(e.lng-r.center.lng)>180;){const t=r.locationPoint(e);if(t.x>=0&&t.y>=0&&t.x<=r.width&&t.y<=r.height)break;e.lng>r.center.lng?e.lng-=360:e.lng+=360}return e}const to={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class eo extends t.Evented{constructor(e,n){if(super(),(e instanceof t.window.HTMLElement||n)&&(e=t.extend({element:e},n)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&e.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=e&&e.occludedOpacity||.2,e&&e.element)this._element=e.element,this._offset=t.Point.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=s("div");const n=41,r=27,i=a("svg",{display:"block",height:n*this._scale+"px",width:r*this._scale+"px",viewBox:`0 0 ${r} ${n}`},this._element),o=a("radialGradient",{id:"shadowGradient"},a("defs",{},i));a("stop",{offset:"10%","stop-opacity":.4},o),a("stop",{offset:"100%","stop-opacity":.05},o),a("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},i),a("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},i),a("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},i),a("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},i),this._offset=t.Point.convert(e&&e.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(t=>{t.preventDefault()})),this._element.addEventListener("mousedown",(t=>{t.preventDefault()}));const r=this._element.classList;for(const t in to)r.remove(`mapboxgl-marker-anchor-${t}`);r.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(t){return t===this._map||(this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._updateMoving),t.on("moveend",this._update),t.on("remove",this._clearFadeTimer),t._addMarker(this),this.setDraggable(this._draggable),this._update(),t.on("click",this._onMapClick)),this}remove(){const t=this._map;return t&&(t.off("click",this._onMapClick),t.off("move",this._updateMoving),t.off("moveend",this._update),t.off("mousedown",this._addDragHandler),t.off("touchstart",this._addDragHandler),t.off("mouseup",this._onUp),t.off("touchend",this._onUp),t.off("mousemove",this._onMove),t.off("touchmove",this._onMove),t.off("remove",this._clearFadeTimer),t._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const e=38.1,n=13.5,r=Math.sqrt(Math.pow(n,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-e],"bottom-left":[r,-1*(e-n+r)],"bottom-right":[-r,-1*(e-n+r)],left:[n,-1*(e-n)],right:[-n,-1*(e-n)]}:this._offset}this._popup=t,t._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(t){const e=t.code,n=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==n&&13!==n||this.togglePopup()}_onMapClick(t){const e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const t=this._popup;return t?(t.isOpen()?(t.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(t.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const t=this._map,e=this._pos;if(!t||!e)return!1;const n=t.unproject(e),r=t.getFreeCameraOptions();if(!r.position)return!1;const i=r.position.toLngLat();return i.distanceTo(n)<.9*i.distanceTo(this._lngLat)}_evaluateOpacity(){const e=this._map;if(!e)return;const n=this._pos;if(!n||n.x<0||n.x>e.transform.width||n.y<0||n.y>e.transform.height)return void this._clearFadeTimer();const r=e.unproject(n);let i;e._showingGlobe()&&t.isLngLatBehindGlobe(e.transform,this._lngLat)?i=0:(i=1-e._queryFogOpacity(r),e.transform._terrainEnabled()&&e.getTerrain()&&this._behindTerrain()&&(i*=this._occludedOpacity)),this._element.style.opacity=`${i}`,this._element.style.pointerEvents=i>0?"auto":"none",this._popup&&this._popup._setOpacity(i),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const t=this._pos;if(!t||!this._map)return;const e=this._offset.mult(this._scale);this._element.style.transform=`\n            translate(${t.x}px,${t.y}px)\n            ${to[this._anchor]}\n            ${this._calculateXYTransform()} ${this._calculateZTransform()}\n            translate(${e.x}px,${e.y}px)\n        `}_calculateXYTransform(){const e=this._pos,n=this._map,r=this.getPitchAlignment();if(!n||!e||"map"!==r)return"";if(!n._showingGlobe()){const t=n.getPitch();return t?`rotateX(${t}deg)`:""}const i=t.radToDeg(t.globeTiltAtLngLat(n.transform,this._lngLat)),o=e.sub(t.globeCenterToScreenPoint(n.transform)),s=Math.abs(o.x)+Math.abs(o.y);if(0===s)return"";const a=i/s;return`rotateX(${-o.y*a}deg) rotateY(${o.x*a}deg)`}_calculateZTransform(){const e=this._pos,n=this._map;if(!n||!e)return"";let r=0;const i=this.getRotationAlignment();if("map"===i)if(n._showingGlobe()){const e=n.project(new t.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),i=n.project(new t.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(e);r=t.radToDeg(Math.atan2(i.y,i.x))-90}else r=-n.getBearing();else if("horizon"===i){const i=t.smoothstep(4,6,n.getZoom()),o=t.globeCenterToScreenPoint(n.transform);o.y+=i*n.transform.height;const s=e.sub(o),a=t.radToDeg(Math.atan2(s.y,s.x));r=(a>90?a-270:a+90)*(1-i)}return r+=this._rotation,r?`rotateZ(${r}deg)`:""}_update(e){t.window.cancelAnimationFrame(this._updateFrameId);const n=this._map;n&&(n.transform.renderWorldCopies&&(this._lngLat=Qi(this._lngLat,this._pos,n.transform)),this._pos=n.project(this._lngLat),!0===e?this._updateFrameId=t.window.requestAnimationFrame((()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())})):this._pos=this._pos.round(),n._requestDomTask((()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(n._showingGlobe()||n.getTerrain()||n.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))})))}getOffset(){return this._offset}setOffset(e){return this._offset=t.Point.convert(e),this._update(),this}_onMove(e){const n=this._map;if(!n)return;const r=this._pointerdownPos,i=this._positionDelta;if(r&&i){if(!this._isDragging){const t=this._clickTolerance||n._clickTolerance;if(e.point.dist(r)<t)return;this._isDragging=!0}this._pos=e.point.sub(i),this._lngLat=n.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const e=this._map;e&&(e.off("mousemove",this._onMove),e.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"}_addDragHandler(t){const e=this._map,n=this._pos;e&&n&&this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(n),this._pointerdownPos=t.point,this._state="pending",e.on("mousemove",this._onMove),e.on("touchmove",this._onMove),e.once("mouseup",this._onUp),e.once("touchend",this._onUp))}setDraggable(t){this._draggable=!!t;const e=this._map;return e&&(t?(e.on("mousedown",this._addDragHandler),e.on("touchstart",this._addDragHandler)):(e.off("mousedown",this._addDragHandler),e.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(t){return this._occludedOpacity=t||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const no={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ro=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function io(e=new t.Point(0,0),n="bottom"){if("number"==typeof e){const r=Math.round(Math.sqrt(.5*Math.pow(e,2)));switch(n){case"top":return new t.Point(0,e);case"top-left":return new t.Point(r,r);case"top-right":return new t.Point(-r,r);case"bottom":return new t.Point(0,-e);case"bottom-left":return new t.Point(r,-r);case"bottom-right":return new t.Point(-r,-r);case"left":return new t.Point(e,0);case"right":return new t.Point(-e,0)}return new t.Point(0,0)}return e instanceof t.Point||Array.isArray(e)?t.Point.convert(e):t.Point.convert(e[n]||[0,0])}class oo{constructor(t){this.jumpTo(t)}getValue(e){if(e<=this._startTime)return this._start;if(e>=this._endTime)return this._end;const n=t.easeCubicInOut((e-this._startTime)/(this._endTime-this._startTime));return this._start*(1-n)+this._end*n}isEasing(t){return t>=this._startTime&&t<=this._endTime}jumpTo(t){this._startTime=-1/0,this._endTime=-1/0,this._start=t,this._end=t}easeTo(t,e,n){this._start=this.getValue(e),this._end=t,this._startTime=e,this._endTime=e+n}}const so={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use ⌘ + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},ao={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},co={showCompass:!0,showZoom:!0,visualizePitch:!1};class lo{constructor(e,n,r=!1){this._clickTolerance=10,this.element=n,this.mouseRotate=new bi({clickTolerance:e.dragRotate._mouseRotate._clickTolerance}),this.map=e,r&&(this.mousePitch=new wi({clickTolerance:e.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener("mousedown",this.mousedown),n.addEventListener("touchstart",this.touchstart,{passive:!1}),n.addEventListener("touchmove",this.touchmove),n.addEventListener("touchend",this.touchend),n.addEventListener("touchcancel",this.reset)}down(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),h()}move(t,e){const n=this.map,r=this.mouseRotate.mousemoveWindow(t,e),i=r&&r.bearingDelta;if(i&&n.setBearing(n.getBearing()+i),this.mousePitch){const r=this.mousePitch.mousemoveWindow(t,e),i=r&&r.pitchDelta;i&&n.setPitch(n.getPitch()+i)}}off(){const t=this.element;t.removeEventListener("mousedown",this.mousedown),t.removeEventListener("touchstart",this.touchstart,{passive:!1}),t.removeEventListener("touchmove",this.touchmove),t.removeEventListener("touchend",this.touchend),t.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){p(),t.window.removeEventListener("mousemove",this.mousemove),t.window.removeEventListener("mouseup",this.mouseup)}mousedown(e){this.down(t.extend({},e,{ctrlKey:!0,preventDefault:()=>e.preventDefault()}),g(this.element,e)),t.window.addEventListener("mousemove",this.mousemove),t.window.addEventListener("mouseup",this.mouseup)}mousemove(t){this.move(t,g(this.element,t))}mouseup(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()}touchstart(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=m(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>t.preventDefault()},this._startPos))}touchmove(t){1!==t.targetTouches.length?this.reset():(this._lastPos=m(this.element,t.targetTouches)[0],this.move({preventDefault:()=>t.preventDefault()},this._lastPos))}touchend(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const uo={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},ho={maxWidth:100,unit:"metric"},po={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},fo={version:t.version,supported:n,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:class extends Yi{constructor(e){if(t.LivePerformanceUtils.mark(t.PerformanceMarkers.create),null!=(e=t.extend({},ao,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(e.antialias&&t.isSafariWithAntialiasingBug(t.window)&&(e.antialias=!1,t.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Xr(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),e),this._interactive=e.interactive,this._minTileCacheSize=e.minTileCacheSize,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._useWebGL2=e.useWebGL2,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=e.crossSourceCollisions,this._collectResourceTiming=e.collectResourceTiming,this._optimizeForTerrain=e.optimizeForTerrain,this._language=this._parseLanguage(e.language),this._worldview=e.worldview,this._renderTaskQueue=new Ji,this._domRenderTaskQueue=new Ji,this._controls=[],this._markers=[],this._popups=[],this._mapId=t.uniqueId(),this._locale=t.extend({},so,e.locale),this._clickTolerance=e.clickTolerance,this._cooperativeGestures=e.cooperativeGestures,this._performanceMetricsCollection=e.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new oo(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new t.RequestManager(e.transformRequest,e.accessToken,e.testMode),this._silenceAuthErrors=!!e.testMode,"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error(`Container '${e.container}' not found.`)}else{if(!(e.container instanceof t.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(this._container.childNodes.length>0&&t.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1),t.window.addEventListener("orientationchange",this._onWindowResize,!1),t.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),t.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new Hi(this,e),this._localFontFamily=e.localFontFamily,this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),e.projection&&this.setProjection(e.projection),this._hash=e.hash&&new Jr("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),e.attributionControl&&this.addControl(new Xi({customAttribution:e.customAttribution})),this._logoControl=new Ki,this.addControl(this._logoControl,e.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(e=>{this._update("style"===e.dataType),this.fire(new t.Event(`${e.dataType}data`,e))})),this.on("dataloading",(e=>{this.fire(new t.Event(`${e.dataType}dataloading`,e))}))}_getMapId(){return this._mapId}addControl(e,n){if(void 0===n&&(n=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const r=e.onAdd(this);this._controls.push(e);const i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this}removeControl(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this}hasControl(t){return this._controls.indexOf(t)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(e){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const n=!this._moving;return n&&this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)),this.fire(new t.Event("resize",e)),n&&this.fire(new t.Event("moveend",e)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()}setMinZoom(e){if((e=null==e?-2:e)>=-2&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e?this.setZoom(e):this.fire(new t.Event("zoomstart")).fire(new t.Event("zoom")).fire(new t.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e?this.setZoom(e):this.fire(new t.Event("zoomstart")).fire(new t.Event("zoom")).fire(new t.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(e){if((e=null==e?0:e)<0)throw new Error("minPitch must be greater than or equal to 0");if(e>=0&&e<=this.transform.maxPitch)return this.transform.minPitch=e,this._update(),this.getPitch()<e?this.setPitch(e):this.fire(new t.Event("pitchstart")).fire(new t.Event("pitch")).fire(new t.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(e){if((e=null==e?85:e)>85)throw new Error("maxPitch must be less than or equal to 85");if(e>=this.transform.minPitch)return this.transform.maxPitch=e,this._update(),this.getPitch()>e?this.setPitch(e):this.fire(new t.Event("pitchstart")).fire(new t.Event("pitch")).fire(new t.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(t){return this.transform.renderWorldCopies=t,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(e){return"auto"===e?t.window.navigator.language:Array.isArray(e)?0===e.length?void 0:e.map((e=>"auto"===e?t.window.navigator.language:e)):e}setLanguage(t){const e=this._parseLanguage(t);if(!this.style||e===this._language)return this;this._language=e,this.style._reloadSources();for(const t of this._controls)t._setLanguage&&t._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(t){return this.style&&t!==this._worldview?(this._worldview=t,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(t){return this._lazyInitEmptyStyle(),t?"string"==typeof t&&(t={name:t}):t=null,this._useExplicitProjection=!!t,this._prioritizeAndUpdateProjection(t,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const e=this.transform,n=e.projection.name;let r;"globe"===n&&e.zoom>=t.GLOBE_ZOOM_THRESHOLD_MAX?(e.setMercatorFromTransition(),r=!0):"mercator"===n&&e.zoom<t.GLOBE_ZOOM_THRESHOLD_MAX&&(e.setProjection({name:"globe"}),r=!0),r&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(t,e){return this._updateProjection(t||e||{name:"mercator"})}_updateProjection(e){let n;if(n="globe"===e.name&&this.transform.zoom>=t.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(e),this.style.applyProjectionUpdate(),n){this.painter.clearBackgroundTiles();for(const t in this.style._sourceCaches)this.style._sourceCaches[t].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(e){return this.transform.locationPoint3D(t.LngLat.convert(e))}unproject(e){return this.transform.pointLocation3D(t.Point.convert(e))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(t,e,n){if("mouseenter"===t||"mouseover"===t){let r=!1;const i=i=>{const o=e.filter((t=>this.getLayer(t))),s=o.length?this.queryRenderedFeatures(i.point,{layers:o}):[];s.length?r||(r=!0,n.call(this,new ci(t,this,i.originalEvent,{features:s}))):r=!1},o=()=>{r=!1};return{layers:new Set(e),listener:n,delegates:{mousemove:i,mouseout:o}}}if("mouseleave"===t||"mouseout"===t){let r=!1;const i=i=>{const o=e.filter((t=>this.getLayer(t)));(o.length?this.queryRenderedFeatures(i.point,{layers:o}):[]).length?r=!0:r&&(r=!1,n.call(this,new ci(t,this,i.originalEvent)))},o=e=>{r&&(r=!1,n.call(this,new ci(t,this,e.originalEvent)))};return{layers:new Set(e),listener:n,delegates:{mousemove:i,mouseout:o}}}{const r=t=>{const r=e.filter((t=>this.getLayer(t))),i=r.length?this.queryRenderedFeatures(t.point,{layers:r}):[];i.length&&(t.features=i,n.call(this,t),delete t.features)};return{layers:new Set(e),listener:n,delegates:{[t]:r}}}}on(t,e,n){if(void 0===n)return super.on(t,e);Array.isArray(e)||(e=[e]);const r=this._createDelegatedListener(t,e,n);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(r);for(const t in r.delegates)this.on(t,r.delegates[t]);return this}once(t,e,n){if(void 0===n)return super.once(t,e);Array.isArray(e)||(e=[e]);const r=this._createDelegatedListener(t,e,n);for(const t in r.delegates)this.once(t,r.delegates[t]);return this}off(t,e,n){if(void 0===n)return super.off(t,e);e=new Set(Array.isArray(e)?e:[e]);const r=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0},i=this._delegatedListeners?this._delegatedListeners[t]:void 0;return i&&(t=>{for(let i=0;i<t.length;i++){const o=t[i];if(o.listener===n&&r(o.layers,e)){for(const t in o.delegates)this.off(t,o.delegates[t]);return t.splice(i,1),this}}})(i),this}queryRenderedFeatures(e,n){return this.style?(void 0!==n||void 0===e||e instanceof t.Point||Array.isArray(e)||(n=e,e=void 0),this.style.queryRenderedFeatures(e=e||[[0,0],[this.transform.width,this.transform.height]],n=n||{},this.transform)):[]}querySourceFeatures(t,e){return this.style.querySourceFeatures(t,e)}isPointOnSurface(e){const{name:n}=this.transform.projection;return"globe"!==n&&"mercator"!==n&&t.warnOnce(`${n} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(t.Point.convert(e))}setStyle(e,n){return!1!==(n=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&n.localFontFamily===this._localFontFamily&&this.style&&e?(this._diffStyle(e,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._localFontFamily=n.localFontFamily,this._updateStyle(e,n))}_getUIString(t){const e=this._locale[t];if(null==e)throw new Error(`Missing UI string '${t}'`);return e}_updateStyle(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),t&&(this.style=new Je(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Je(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(e,n){if("string"==typeof e){const r=this._requestManager.normalizeStyleURL(e),i=this._requestManager.transformRequest(r,t.ResourceType.Style);t.getJSON(i,((e,r)=>{e?this.fire(new t.ErrorEvent(e)):r&&this._updateDiff(r,n)}))}else"object"==typeof e&&this._updateDiff(e,n)}_updateDiff(e,n){try{this.style.setState(e)&&this._update(!0)}catch(r){t.warnOnce(`Unable to perform style diff: ${r.message||r.error||r}.  Rebuilding the style from scratch.`),this._updateStyle(e,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(t.warnOnce("There is no style added to the map."),!1)}addSource(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)}isSourceLoaded(t){return!!this.style&&this.style._isSourceCacheLoaded(t)}areTilesLoaded(){const t=this.style&&this.style._sourceCaches;for(const e in t){const n=t[e]._tiles;for(const t in n){const e=n[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}}return!0}addSourceType(t,e,n){this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,n)}removeSource(t){return this.style.removeSource(t),this._updateTerrain(),this._update(!0)}getSource(t){return this.style.getSource(t)}addImage(e,n,{pixelRatio:r=1,sdf:i=!1,stretchX:o,stretchY:s,content:a}={}){if(this._lazyInitEmptyStyle(),n instanceof t.window.HTMLImageElement||t.window.ImageBitmap&&n instanceof t.window.ImageBitmap){const{width:c,height:l,data:u}=t.exported.getImageData(n);this.style.addImage(e,{data:new t.RGBAImage({width:c,height:l},u),pixelRatio:r,stretchX:o,stretchY:s,content:a,sdf:i,version:0})}else if(void 0===n.width||void 0===n.height)this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:c,height:l}=n,u=n;this.style.addImage(e,{data:new t.RGBAImage({width:c,height:l},new Uint8Array(u.data)),pixelRatio:r,stretchX:o,stretchY:s,content:a,sdf:i,version:0,userImage:u}),u.onAdd&&u.onAdd(this,e)}}updateImage(e,n){const r=this.style.getImage(e);if(!r)return void this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const i=n instanceof t.window.HTMLImageElement||t.window.ImageBitmap&&n instanceof t.window.ImageBitmap?t.exported.getImageData(n):n,{width:o,height:s}=i;void 0!==o&&void 0!==s?o===r.data.width&&s===r.data.height?(r.data.replace(i.data,!(n instanceof t.window.HTMLImageElement||t.window.ImageBitmap&&n instanceof t.window.ImageBitmap)),this.style.updateImage(e,r)):this.fire(new t.ErrorEvent(new Error(`The width and height of the updated image (${o}, ${s})\n                must be that same as the previous version of the image\n                (${r.data.width}, ${r.data.height})`))):this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(t){this.style.removeImage(t)}loadImage(e,n){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),((e,r)=>{n(e,r instanceof t.window.HTMLImageElement?t.exported.getImageData(r):r)}))}listImages(){return this.style.listImages()}addLayer(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)}moveLayer(t,e){return this.style.moveLayer(t,e),this._update(!0)}removeLayer(t){return this.style.removeLayer(t),this._update(!0)}getLayer(t){return this.style.getLayer(t)}setLayerZoomRange(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0)}setFilter(t,e,n={}){return this.style.setFilter(t,e,n),this._update(!0)}getFilter(t){return this.style.getFilter(t)}setPaintProperty(t,e,n,r={}){return this.style.setPaintProperty(t,e,n,r),this._update(!0)}getPaintProperty(t,e){return this.style.getPaintProperty(t,e)}setLayoutProperty(t,e,n,r={}){return this.style.setLayoutProperty(t,e,n,r),this._update(!0)}getLayoutProperty(t,e){return this.style.getLayoutProperty(t,e)}setLight(t,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(t){return this._lazyInitEmptyStyle(),!t&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(t),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(t){return this._lazyInitEmptyStyle(),this.style.setFog(t),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(e){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(t.LngLat.convert(e),this.transform):0}setFeatureState(t,e){return this.style.setFeatureState(t,e),this._update()}removeFeatureState(t,e){return this.style.removeFeatureState(t,e),this._update()}getFeatureState(t){return this.style.getFeatureState(t)}_updateContainerDimensions(){if(!this._container)return;const e=this._container.getBoundingClientRect().width||400,n=this._container.getBoundingClientRect().height||300;let r,i,o,s=this._container;for(;s&&(!i||!o);){const e=t.window.getComputedStyle(s).transform;e&&"none"!==e&&(r=e.match(/matrix.*\((.+)\)/)[1].split(", "),r[0]&&"0"!==r[0]&&"1"!==r[0]&&(i=r[0]),r[3]&&"0"!==r[3]&&"1"!==r[3]&&(o=r[3])),s=s.parentElement}this._containerWidth=i?Math.abs(e/i):e,this._containerHeight=o?Math.abs(n/o):n}_detectMissingCSS(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=s("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();const e=this._canvasContainer=s("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=s("canvas","mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const n=this._controlContainer=s("div","mapboxgl-control-container",t),r=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((t=>{r[t]=s("div",`mapboxgl-ctrl-${t}`,n)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(e,n){const r=t.exported.devicePixelRatio||1;this._canvas.width=r*Math.ceil(e),this._canvas.height=r*Math.ceil(n),this._canvas.style.width=`${e}px`,this._canvas.style.height=`${n}px`}_addMarker(t){this._markers.push(t)}_removeMarker(t){const e=this._markers.indexOf(t);-1!==e&&this._markers.splice(e,1)}_addPopup(t){this._popups.push(t)}_removePopup(t){const e=this._popups.indexOf(t);-1!==e&&this._popups.splice(e,1)}_setupPainter(){const e=t.extend({},n.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._useWebGL2&&this._canvas.getContext("webgl2",e),i=r||this._canvas.getContext("webgl",e)||this._canvas.getContext("experimental-webgl",e);i?(this._useWebGL2&&!r&&t.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),t.storeAuthState(i,!0),this.painter=new jr(i,this.transform,!!r),this.on("data",(t=>{"source"===t.dataType&&this.painter.setTileLoadedFlag(!0)})),t.exported$1.testSupport(i)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))}_contextRestored(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))}_onMapScroll(t){if(t.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(t){return this._update(),this._renderTaskQueue.add(t)}_cancelRenderFrame(t){this._renderTaskQueue.remove(t)}_requestDomTask(t){!this.loaded()||this.loaded()&&!this.isMoving()?t():this._domRenderTaskQueue.add(t)}_render(e){let n;const r=this.painter.context.extTimerQuery,i=t.exported.now();if(this.listens("gpu-timing-frame")&&(n=r.createQueryEXT(),r.beginQueryEXT(r.TIME_ELAPSED_EXT,n)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],t.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],t.window.performance.now())),this._renderTaskQueue.run(e),this._domRenderTaskQueue.run(e),this._removed)return;this._updateProjectionTransition();const o=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const e=this.transform.zoom,n=this.transform.pitch,r=t.exported.now(),i=new t.EvaluationParameters(e,{now:r,fadeDuration:o,pitch:n,transition:this.style.getTransition()});this.style.update(i)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let s=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),s=this._updateAverageElevation(i),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):s=this._updateAverageElevation(i),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,o,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:o,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),n){const e=t.exported.now()-i;r.endQueryEXT(r.TIME_ELAPSED_EXT,n),setTimeout((()=>{const o=r.getQueryObjectEXT(n,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(n),this.fire(new t.Event("gpu-timing-frame",{cpuTime:e,gpuTime:o})),t.window.performance.mark("frame-gpu",{startTime:i,detail:{gpuTime:o}})}),50)}if(this.listens("gpu-timing-layer")){const e=this.painter.collectGpuTimers();setTimeout((()=>{const n=this.painter.queryGpuTimers(e);this.fire(new t.Event("gpu-timing-layer",{layerTimes:n}))}),50)}if(this.listens("gpu-timing-deferred-render")){const e=this.painter.collectDeferredRenderGpuQueries();setTimeout((()=>{const n=this.painter.queryGpuTimeDeferredRender(e);this.fire(new t.Event("gpu-timing-deferred-render",{gpuTime:n}))}),50)}const a=this._sourcesDirty||this._styleDirty||this._placementDirty||s;if(a||this._repaint)this.triggerRepaint();else{const e=!this.isMoving()&&this.loaded();if(e&&(s=this._updateAverageElevation(i,!0)),s)this.triggerRepaint();else if(this._triggerFrame(!1),e&&(this.fire(new t.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const e=this._calculateSpeedIndex();this.fire(new t.Event("speedindexcompleted",{speedIndex:e})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||a||(this._fullyLoaded=!0,t.LivePerformanceUtils.mark(t.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&t.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(t){for(const e of this._markers)t&&!this.getRenderWorldCopies()&&(e._lngLat=e._lngLat.wrap()),e._update();for(const e of this._popups)!t||this.getRenderWorldCopies()||e._trackPointer||(e._lngLat=e._lngLat.wrap()),e._update()}_updateAverageElevation(t,e=!1){const n=t=>(this.transform.averageElevation=t,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&n(0);if((e||t-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(t)){const e=this.transform.averageElevation;let r=this.transform.sampleAverageElevation(),i=!1;this.transform.elevation&&(i=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(r)?r=0:this._averageElevationLastSampledAt=t;const o=Math.abs(e-r);if(o>1){if(this._isInitialLoad||i)return this._averageElevation.jumpTo(r),n(r);this._averageElevation.easeTo(r,t,300)}else if(o>1e-4)return this._averageElevation.jumpTo(r),n(r)}return!!this._averageElevation.isEasing(t)&&n(this._averageElevation.getValue(t))}_authenticate(){t.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(e=>{if(e&&(e.message===t.AUTH_ERR_MSG||401===e.status)){const e=this.painter.context.gl;t.storeAuthState(e,!1),this._logoControl instanceof Ki&&this._logoControl._updateLogo(),e&&e.clear(e.DEPTH_BUFFER_BIT|e.COLOR_BUFFER_BIT|e.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new t.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),t.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(()=>{}))}_updateTerrain(){const t=this._isDragging();this.painter.updateTerrain(this.style,t)}_calculateSpeedIndex(){const t=this.painter.canvasCopy(),e=this.painter.getCanvasCopiesAndTimestamps();e.timeStamps.push(performance.now());const n=this.painter.context.gl,r=n.createFramebuffer();function i(t){n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0);const e=new Uint8Array(n.drawingBufferWidth*n.drawingBufferHeight*4);return n.readPixels(0,0,n.drawingBufferWidth,n.drawingBufferHeight,n.RGBA,n.UNSIGNED_BYTE,e),e}return n.bindFramebuffer(n.FRAMEBUFFER,r),this._canvasPixelComparison(i(t),e.canvasCopies.map(i),e.timeStamps)}_canvasPixelComparison(t,e,n){let r=n[1]-n[0];const i=t.length/4;for(let o=0;o<e.length;o++){const s=e[o];let a=0;for(let e=0;e<s.length;e+=4)s[e]===t[e]&&s[e+1]===t[e+1]&&s[e+2]===t[e+2]&&s[e+3]===t[e+3]&&(a+=1);r+=(n[o+2]-n[o+1])*(1-a/i)}return r}remove(){this._hash&&this._hash.remove();for(const t of this._controls)t.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("orientationchange",this._onWindowResize,!1),t.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1),t.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e&&e.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),t.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new t.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(e){this._renderNextFrame=this._renderNextFrame||e,this.style&&!this._frame&&(this._frame=t.exported.frame((t=>{const e=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,e&&this._render(t)})))}_preloadTiles(e){const n=this.style?Object.values(this.style._sourceCaches):[];return t.asyncAll(n,((t,n)=>t._preloadTiles(e,n)),(()=>{this.triggerRepaint()})),this}_onWindowOnline(){this._update()}_onWindowResize(t){this._trackResize&&this.resize({originalEvent:t})._update()}_onVisibilityChange(){"hidden"===t.window.document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(t){this._showTerrainWireframe!==t&&(this._showTerrainWireframe=t,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(t){this._speedIndexTiming!==t&&(this._speedIndexTiming=t,this._update())}get showPadding(){return!!this._showPadding}set showPadding(t){this._showPadding!==t&&(this._showPadding=t,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())}get repaint(){return!!this._repaint}set repaint(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(t){this._vertices=t,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(t){this._showTileAABBs!==t&&(this._showTileAABBs=t,t&&this._update())}_setCacheLimits(e,n){t.setCacheLimits(e,n)}get version(){return t.version}},NavigationControl:class{constructor(e){this.options=t.extend({},co,e),this._container=s("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(t=>{this._map&&this._map.zoomIn({},{originalEvent:t})})),s("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(t=>{this._map&&this._map.zoomOut({},{originalEvent:t})})),s("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(t=>{const e=this._map;e&&(this.options.visualizePitch?e.resetNorthPitch({},{originalEvent:t}):e.resetNorth({},{originalEvent:t}))})),this._compassIcon=s("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const t=this._map;if(!t)return;const e=t.getZoom(),n=e===t.getMaxZoom(),r=e===t.getMinZoom();this._zoomInButton.disabled=n,this._zoomOutButton.disabled=r,this._zoomInButton.setAttribute("aria-disabled",n.toString()),this._zoomOutButton.setAttribute("aria-disabled",r.toString())}_rotateCompassArrow(){const t=this._map;if(!t)return;const e=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(t.transform.pitch*(Math.PI/180)),.5)}) rotateX(${t.transform.pitch}deg) rotateZ(${t.transform.angle*(180/Math.PI)}deg)`:`rotate(${t.transform.angle*(180/Math.PI)}deg)`;t._requestDomTask((()=>{this._compassIcon&&(this._compassIcon.style.transform=e)}))}onAdd(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),t.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&t.on("pitch",this._rotateCompassArrow),t.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new lo(t,this._compass,this.options.visualizePitch)),this._container}onRemove(){const t=this._map;t&&(this._container.remove(),this.options.showZoom&&t.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&t.off("pitch",this._rotateCompassArrow),t.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(t,e){const n=s("button",t,this._container);return n.type="button",n.addEventListener("click",e),n}_setButtonTitle(t,e){if(!this._map)return;const n=this._map._getUIString(`NavigationControl.${e}`);t.setAttribute("aria-label",n),t.firstElementChild&&t.firstElementChild.setAttribute("title",n)}},GeolocateControl:class extends t.Evented{constructor(e){super(),this.options=t.extend({geolocation:t.window.navigator.geolocation},uo,e),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Kr(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(t){return this._map=t,this._container=s("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(e){const n=(t=!!this.options.geolocation)=>{this._supportsGeolocation=t,e(t)};void 0!==this._supportsGeolocation?e(this._supportsGeolocation):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then((t=>n("denied"!==t.state))).catch((()=>n())):n()}_isOutOfMapMaxBounds(t){const e=this._map.getMaxBounds(),n=t.coords;return!!e&&(n.longitude<e.getWest()||n.longitude>e.getEast()||n.latitude<e.getSouth()||n.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}}_updateCamera(e){const n=new t.LngLat(e.coords.longitude,e.coords.latitude),r=e.coords.accuracy,i=this._map.getBearing(),o=t.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(r),o,{geolocateSource:!0})}_updateMarker(e){if(e){const n=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const e=this._map.transform,n=t.mercatorZfromAltitude(1,e._center.lat)*e.worldSize,r=Math.ceil(2*this._accuracy*n);this._circleElement.style.width=`${r}px`,this._circleElement.style.height=`${r}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(e){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this._geolocateButton=s("button","mapboxgl-ctrl-geolocate",this._container),s("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e)}else{const t=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=s("div","mapboxgl-user-location"),this._dotElement.appendChild(s("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(s("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new eo({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=s("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new eo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(e=>{e.geolocateSource||"ACTIVE_LOCK"!==this._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new t.Event("trackuserlocationend")))}))}}_onDeviceOrientation(t){this._userLocationDotMarker&&(t.webkitCompassHeading?this._heading=t.webkitCompassHeading:!0===t.absolute&&(this._heading=-1*t.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let t;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(t={maximumAge:6e5,timeout:0},this._noTimeout=!0):(t=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,t),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const e=()=>{t.window.addEventListener("ondeviceorientationabsolute"in t.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==t.window.DeviceMotionEvent&&"function"==typeof t.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((t=>{"granted"===t&&e()})).catch(i.error):e()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),t.window.removeEventListener("deviceorientation",this._onDeviceOrientation),t.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Xi,ScaleControl:class{constructor(e){this.options=t.extend({},ho,e),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch(t){return!1}}(),t.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const t=this.options.maxWidth||100,e=this._map,n=e._containerHeight/2,r=e._containerWidth/2-t/2,i=e.unproject([r,n]),o=e.unproject([r+t,n]),s=i.distanceTo(o);if("imperial"===this.options.unit){const e=3.2808*s;e>5280?this._setScale(t,e/5280,"mile"):this._setScale(t,e,"foot")}else"nautical"===this.options.unit?this._setScale(t,s/1852,"nautical-mile"):s>=1e3?this._setScale(t,s/1e3,"kilometer"):this._setScale(t,s,"meter")}_setScale(t,e,n){this._map._requestDomTask((()=>{const r=function(t){const e=Math.pow(10,`${Math.floor(t)}`.length-1);let n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(t){const e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(n),e*n}(e),i=r/e;this._container.innerHTML=this._isNumberFormatSupported&&"nautical-mile"!==n?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:n}).format(r):`${r}&nbsp;${po[n]}`,this._container.style.width=t*i+"px"}))}onAdd(t){return this._map=t,this._language=t.getLanguage(),this._container=s("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(t){this._language=t,this._update()}setUnit(t){this.options.unit=t,this._update()}},FullscreenControl:class{constructor(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in t.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=s("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!t.window.document.fullscreenEnabled&&!t.window.document.webkitFullscreenEnabled)}_setupUI(){const e=this._fullscreenButton=s("button","mapboxgl-ctrl-fullscreen",this._controlContainer);s("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden","true"),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",t)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(t.window.document.fullscreenElement||t.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends t.Evented{constructor(e){super(),this.options=t.extend(Object.create(no),e),t.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(e&&e.className?e.className.trim().split(/\s+/):[])}addTo(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&e.on("preclick",this._onClose),this.options.closeOnMove&&e.on("move",this._onClose),e.on("remove",this.remove),this._update(),e._addPopup(this),this._focusFirstElement(),this._trackPointer?(e.on("mousemove",this._onMouseEvent),e.on("mouseup",this._onMouseEvent),e._canvasContainer.classList.add("mapboxgl-track-pointer")):e.on("move",this._update),this.fire(new t.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const e=this._map;return e&&(e.off("move",this._update),e.off("move",this._onClose),e.off("preclick",this._onClose),e.off("click",this._onClose),e.off("remove",this.remove),e.off("mousemove",this._onMouseEvent),e.off("mouseup",this._onMouseEvent),e.off("drag",this._onMouseEvent),e._canvasContainer&&e._canvasContainer.classList.remove("mapboxgl-track-pointer"),e._removePopup(this),this._map=void 0),this.fire(new t.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(e){this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update();const n=this._map;return n&&(n.on("move",this._update),n.off("mousemove",this._onMouseEvent),n._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const t=this._map;return t&&(t.off("move",this._update),t.on("mousemove",this._onMouseEvent),t.on("drag",this._onMouseEvent),t._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(e){return this.setDOMContent(t.window.document.createTextNode(e))}setHTML(e){const n=t.window.document.createDocumentFragment(),r=t.window.document.createElement("body");let i;for(r.innerHTML=e;i=r.firstChild,i;)n.appendChild(i);return this.setDOMContent(n)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(t){return this.options.maxWidth=t,this._update(),this}setDOMContent(t){let e=this._content;if(e)for(;e.hasChildNodes();)e.firstChild&&e.removeChild(e.firstChild);else e=this._content=s("div","mapboxgl-popup-content",this._container||void 0);if(e.appendChild(t),this.options.closeButton){const t=this._closeButton=s("button","mapboxgl-popup-close-button",e);t.type="button",t.setAttribute("aria-label","Close popup"),t.setAttribute("aria-hidden","true"),t.innerHTML="&#215;",t.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(t){return this._classList.add(t),this._updateClassList(),this}removeClassName(t){return this._classList.delete(t),this._updateClassList(),this}setOffset(t){return this.options.offset=t,this._update(),this}toggleClassName(t){let e;return this._classList.delete(t)?e=!1:(this._classList.add(t),e=!0),this._updateClassList(),e}_onMouseEvent(t){this._update(t.point)}_getAnchor(t){if(this.options.anchor)return this.options.anchor;const e=this._map,n=this._container,r=this._pos;if(!e||!n||!r)return"bottom";const i=n.offsetWidth,o=n.offsetHeight,s=r.x<i/2,a=r.x>e.transform.width-i/2;if(r.y+t<o)return s?"top-left":a?"top-right":"top";if(r.y>e.transform.height-o){if(s)return"bottom-left";if(a)return"bottom-right"}return s?"left":a?"right":"bottom"}_updateClassList(){const t=this._container;if(!t)return;const e=[...this._classList];e.push("mapboxgl-popup"),this._anchor&&e.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&e.push("mapboxgl-popup-track-pointer"),t.className=e.join(" ")}_update(e){const n=this._map,r=this._content;if(!n||!this._lngLat&&!this._trackPointer||!r)return;let i=this._container;if(i||(i=this._container=s("div","mapboxgl-popup",n.getContainer()),this._tip=s("div","mapboxgl-popup-tip",i),i.appendChild(r)),this.options.maxWidth&&i.style.maxWidth!==this.options.maxWidth&&(i.style.maxWidth=this.options.maxWidth),n.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Qi(this._lngLat,this._pos,n.transform)),!this._trackPointer||e){const t=this._pos=this._trackPointer&&e?e:n.project(this._lngLat),r=io(this.options.offset),i=this._anchor=this._getAnchor(r.y),o=io(this.options.offset,i),s=t.add(o).round();n._requestDomTask((()=>{this._container&&i&&(this._container.style.transform=`${to[i]} translate(${s.x}px,${s.y}px)`)}))}if(!this._marker&&n._showingGlobe()){const e=t.isLngLatBehindGlobe(n.transform,this._lngLat)?0:1;this._setOpacity(e)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const t=this._container.querySelector(ro);t&&t.focus()}_onClose(){this.remove()}_setOpacity(t){this._container&&(this._container.style.opacity=`${t}`),this._content&&(this._content.style.pointerEvents=t?"auto":"none")}},Marker:eo,Style:Je,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,FreeCameraOptions:Vr,Evented:t.Evented,config:t.config,prewarm:function(){Ft().acquire(jt)},clearPrewarmedResources:function(){const t=Bt;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(jt),Bt=null):i.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return zt.workerCount},set workerCount(t){zt.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage(e){t.clearTileCache(e)},workerUrl:"",workerClass:null,setNow:t.exported.setNow,restoreNow:t.exported.restoreNow};return fo})),n}()},33730:function(t,e,n){!function(t){"use strict";t.defineLocale("ko",{months:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),monthsShort:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),weekdays:"일요일_월요일_화요일_수요일_목요일_금요일_토요일".split("_"),weekdaysShort:"일_월_화_수_목_금_토".split("_"),weekdaysMin:"일_월_화_수_목_금_토".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY년 MMMM D일",LLL:"YYYY년 MMMM D일 A h:mm",LLLL:"YYYY년 MMMM D일 dddd A h:mm",l:"YYYY.MM.DD.",ll:"YYYY년 MMMM D일",lll:"YYYY년 MMMM D일 A h:mm",llll:"YYYY년 MMMM D일 dddd A h:mm"},calendar:{sameDay:"오늘 LT",nextDay:"내일 LT",nextWeek:"dddd LT",lastDay:"어제 LT",lastWeek:"지난주 dddd LT",sameElse:"L"},relativeTime:{future:"%s 후",past:"%s 전",s:"몇 초",ss:"%d초",m:"1분",mm:"%d분",h:"한 시간",hh:"%d시간",d:"하루",dd:"%d일",M:"한 달",MM:"%d달",y:"일 년",yy:"%d년"},dayOfMonthOrdinalParse:/\d{1,2}(일|월|주)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"일";case"M":return t+"월";case"w":case"W":return t+"주";default:return t}},meridiemParse:/오전|오후/,isPM:function(t){return"오후"===t},meridiem:function(t,e,n){return t<12?"오전":"오후"}})}(n(30381))},35251:function(t,e,n){var r={"./ko":33730,"./ko.js":33730};function i(t){var e=o(t);return n(e)}function o(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id=35251},30381:function(t,e,n){t=n.nmd(t);var r=n(25108);t.exports=function(){"use strict";var e,i;function o(){return e.apply(null,arguments)}function s(t){e=t}function a(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function c(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function l(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function u(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(l(t,e))return!1;return!0}function h(t){return void 0===t}function p(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function f(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function d(t,e){var n,r=[],i=t.length;for(n=0;n<i;++n)r.push(e(t[n],n));return r}function g(t,e){for(var n in e)l(e,n)&&(t[n]=e[n]);return l(e,"toString")&&(t.toString=e.toString),l(e,"valueOf")&&(t.valueOf=e.valueOf),t}function m(t,e,n,r){return Xn(t,e,n,r,!0).utc()}function y(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function _(t){return null==t._pf&&(t._pf=y()),t._pf}function v(t){if(null==t._isValid){var e=_(t),n=i.call(e.parsedDateParts,(function(t){return null!=t})),r=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n);if(t._strict&&(r=r&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return r;t._isValid=r}return t._isValid}function x(t){var e=m(NaN);return null!=t?g(_(e),t):_(e).userInvalidated=!0,e}i=Array.prototype.some?Array.prototype.some:function(t){var e,n=Object(this),r=n.length>>>0;for(e=0;e<r;e++)if(e in n&&t.call(this,n[e],e,n))return!0;return!1};var b=o.momentProperties=[],w=!1;function E(t,e){var n,r,i,o=b.length;if(h(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),h(e._i)||(t._i=e._i),h(e._f)||(t._f=e._f),h(e._l)||(t._l=e._l),h(e._strict)||(t._strict=e._strict),h(e._tzm)||(t._tzm=e._tzm),h(e._isUTC)||(t._isUTC=e._isUTC),h(e._offset)||(t._offset=e._offset),h(e._pf)||(t._pf=_(e)),h(e._locale)||(t._locale=e._locale),o>0)for(n=0;n<o;n++)h(i=e[r=b[n]])||(t[r]=i);return t}function T(t){E(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===w&&(w=!0,o.updateOffset(this),w=!1)}function S(t){return t instanceof T||null!=t&&null!=t._isAMomentObject}function k(t){!1===o.suppressDeprecationWarnings&&void 0!==r&&r.warn&&r.warn("Deprecation warning: "+t)}function A(t,e){var n=!0;return g((function(){if(null!=o.deprecationHandler&&o.deprecationHandler(null,t),n){var r,i,s,a=[],c=arguments.length;for(i=0;i<c;i++){if(r="","object"==typeof arguments[i]){for(s in r+="\n["+i+"] ",arguments[0])l(arguments[0],s)&&(r+=s+": "+arguments[0][s]+", ");r=r.slice(0,-2)}else r=arguments[i];a.push(r)}k(t+"\nArguments: "+Array.prototype.slice.call(a).join("")+"\n"+(new Error).stack),n=!1}return e.apply(this,arguments)}),e)}var M,I={};function C(t,e){null!=o.deprecationHandler&&o.deprecationHandler(t,e),I[t]||(k(e),I[t]=!0)}function O(t){return"undefined"!=typeof Function&&t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function P(t){var e,n;for(n in t)l(t,n)&&(O(e=t[n])?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function L(t,e){var n,r=g({},t);for(n in e)l(e,n)&&(c(t[n])&&c(e[n])?(r[n]={},g(r[n],t[n]),g(r[n],e[n])):null!=e[n]?r[n]=e[n]:delete r[n]);for(n in t)l(t,n)&&!l(e,n)&&c(t[n])&&(r[n]=g({},r[n]));return r}function D(t){null!=t&&this.set(t)}o.suppressDeprecationWarnings=!1,o.deprecationHandler=null,M=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)l(t,e)&&n.push(e);return n};var R={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function N(t,e,n){var r=this._calendar[t]||this._calendar.sameElse;return O(r)?r.call(e,n):r}function j(t,e,n){var r=""+Math.abs(t),i=e-r.length;return(t>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var z=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,B=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,F={},U={};function V(t,e,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),t&&(U[t]=i),e&&(U[e[0]]=function(){return j(i.apply(this,arguments),e[1],e[2])}),n&&(U[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function q(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function W(t){var e,n,r=t.match(z);for(e=0,n=r.length;e<n;e++)U[r[e]]?r[e]=U[r[e]]:r[e]=q(r[e]);return function(e){var i,o="";for(i=0;i<n;i++)o+=O(r[i])?r[i].call(e,t):r[i];return o}}function G(t,e){return t.isValid()?(e=$(e,t.localeData()),F[e]=F[e]||W(e),F[e](t)):t.localeData().invalidDate()}function $(t,e){var n=5;function r(t){return e.longDateFormat(t)||t}for(B.lastIndex=0;n>=0&&B.test(t);)t=t.replace(B,r),B.lastIndex=0,n-=1;return t}var H={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Z(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(z).map((function(t){return"MMMM"===t||"MM"===t||"DD"===t||"dddd"===t?t.slice(1):t})).join(""),this._longDateFormat[t])}var Y="Invalid date";function X(){return this._invalidDate}var K="%d",J=/\d{1,2}/;function Q(t){return this._ordinal.replace("%d",t)}var tt={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function et(t,e,n,r){var i=this._relativeTime[n];return O(i)?i(t,e,n,r):i.replace(/%d/i,t)}function nt(t,e){var n=this._relativeTime[t>0?"future":"past"];return O(n)?n(e):n.replace(/%s/i,e)}var rt={};function it(t,e){var n=t.toLowerCase();rt[n]=rt[n+"s"]=rt[e]=t}function ot(t){return"string"==typeof t?rt[t]||rt[t.toLowerCase()]:void 0}function st(t){var e,n,r={};for(n in t)l(t,n)&&(e=ot(n))&&(r[e]=t[n]);return r}var at={};function ct(t,e){at[t]=e}function lt(t){var e,n=[];for(e in t)l(t,e)&&n.push({unit:e,priority:at[e]});return n.sort((function(t,e){return t.priority-e.priority})),n}function ut(t){return t%4==0&&t%100!=0||t%400==0}function ht(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function pt(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=ht(e)),n}function ft(t,e){return function(n){return null!=n?(gt(this,t,n),o.updateOffset(this,e),this):dt(this,t)}}function dt(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function gt(t,e,n){t.isValid()&&!isNaN(n)&&("FullYear"===e&&ut(t.year())&&1===t.month()&&29===t.date()?(n=pt(n),t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),ee(n,t.month()))):t._d["set"+(t._isUTC?"UTC":"")+e](n))}function mt(t){return O(this[t=ot(t)])?this[t]():this}function yt(t,e){if("object"==typeof t){var n,r=lt(t=st(t)),i=r.length;for(n=0;n<i;n++)this[r[n].unit](t[r[n].unit])}else if(O(this[t=ot(t)]))return this[t](e);return this}var _t,vt=/\d/,xt=/\d\d/,bt=/\d{3}/,wt=/\d{4}/,Et=/[+-]?\d{6}/,Tt=/\d\d?/,St=/\d\d\d\d?/,kt=/\d\d\d\d\d\d?/,At=/\d{1,3}/,Mt=/\d{1,4}/,It=/[+-]?\d{1,6}/,Ct=/\d+/,Ot=/[+-]?\d+/,Pt=/Z|[+-]\d\d:?\d\d/gi,Lt=/Z|[+-]\d\d(?::?\d\d)?/gi,Dt=/[+-]?\d+(\.\d{1,3})?/,Rt=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function Nt(t,e,n){_t[t]=O(e)?e:function(t,r){return t&&n?n:e}}function jt(t,e){return l(_t,t)?_t[t](e._strict,e._locale):new RegExp(zt(t))}function zt(t){return Bt(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(t,e,n,r,i){return e||n||r||i})))}function Bt(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}_t={};var Ft={};function Ut(t,e){var n,r,i=e;for("string"==typeof t&&(t=[t]),p(e)&&(i=function(t,n){n[e]=pt(t)}),r=t.length,n=0;n<r;n++)Ft[t[n]]=i}function Vt(t,e){Ut(t,(function(t,n,r,i){r._w=r._w||{},e(t,r._w,r,i)}))}function qt(t,e,n){null!=e&&l(Ft,t)&&Ft[t](e,n._a,n,t)}var Wt,Gt=0,$t=1,Ht=2,Zt=3,Yt=4,Xt=5,Kt=6,Jt=7,Qt=8;function te(t,e){return(t%e+e)%e}function ee(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=te(e,12);return t+=(e-n)/12,1===n?ut(t)?29:28:31-n%7%2}Wt=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},V("M",["MM",2],"Mo",(function(){return this.month()+1})),V("MMM",0,0,(function(t){return this.localeData().monthsShort(this,t)})),V("MMMM",0,0,(function(t){return this.localeData().months(this,t)})),it("month","M"),ct("month",8),Nt("M",Tt),Nt("MM",Tt,xt),Nt("MMM",(function(t,e){return e.monthsShortRegex(t)})),Nt("MMMM",(function(t,e){return e.monthsRegex(t)})),Ut(["M","MM"],(function(t,e){e[$t]=pt(t)-1})),Ut(["MMM","MMMM"],(function(t,e,n,r){var i=n._locale.monthsParse(t,r,n._strict);null!=i?e[$t]=i:_(n).invalidMonth=t}));var ne="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),re="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ie=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,oe=Rt,se=Rt;function ae(t,e){return t?a(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||ie).test(e)?"format":"standalone"][t.month()]:a(this._months)?this._months:this._months.standalone}function ce(t,e){return t?a(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[ie.test(e)?"format":"standalone"][t.month()]:a(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function le(t,e,n){var r,i,o,s=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=m([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===e?-1!==(i=Wt.call(this._shortMonthsParse,s))?i:null:-1!==(i=Wt.call(this._longMonthsParse,s))?i:null:"MMM"===e?-1!==(i=Wt.call(this._shortMonthsParse,s))||-1!==(i=Wt.call(this._longMonthsParse,s))?i:null:-1!==(i=Wt.call(this._longMonthsParse,s))||-1!==(i=Wt.call(this._shortMonthsParse,s))?i:null}function ue(t,e,n){var r,i,o;if(this._monthsParseExact)return le.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=m([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[r].test(t))return r;if(n&&"MMM"===e&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}}function he(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=pt(e);else if(!p(e=t.localeData().monthsParse(e)))return t;return n=Math.min(t.date(),ee(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function pe(t){return null!=t?(he(this,t),o.updateOffset(this,!0),this):dt(this,"Month")}function fe(){return ee(this.year(),this.month())}function de(t){return this._monthsParseExact?(l(this,"_monthsRegex")||me.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=oe),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function ge(t){return this._monthsParseExact?(l(this,"_monthsRegex")||me.call(this),t?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=se),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function me(){function t(t,e){return e.length-t.length}var e,n,r=[],i=[],o=[];for(e=0;e<12;e++)n=m([2e3,e]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(r.sort(t),i.sort(t),o.sort(t),e=0;e<12;e++)r[e]=Bt(r[e]),i[e]=Bt(i[e]);for(e=0;e<24;e++)o[e]=Bt(o[e]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function ye(t){return ut(t)?366:365}V("Y",0,0,(function(){var t=this.year();return t<=9999?j(t,4):"+"+t})),V(0,["YY",2],0,(function(){return this.year()%100})),V(0,["YYYY",4],0,"year"),V(0,["YYYYY",5],0,"year"),V(0,["YYYYYY",6,!0],0,"year"),it("year","y"),ct("year",1),Nt("Y",Ot),Nt("YY",Tt,xt),Nt("YYYY",Mt,wt),Nt("YYYYY",It,Et),Nt("YYYYYY",It,Et),Ut(["YYYYY","YYYYYY"],Gt),Ut("YYYY",(function(t,e){e[Gt]=2===t.length?o.parseTwoDigitYear(t):pt(t)})),Ut("YY",(function(t,e){e[Gt]=o.parseTwoDigitYear(t)})),Ut("Y",(function(t,e){e[Gt]=parseInt(t,10)})),o.parseTwoDigitYear=function(t){return pt(t)+(pt(t)>68?1900:2e3)};var _e=ft("FullYear",!0);function ve(){return ut(this.year())}function xe(t,e,n,r,i,o,s){var a;return t<100&&t>=0?(a=new Date(t+400,e,n,r,i,o,s),isFinite(a.getFullYear())&&a.setFullYear(t)):a=new Date(t,e,n,r,i,o,s),a}function be(t){var e,n;return t<100&&t>=0?((n=Array.prototype.slice.call(arguments))[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function we(t,e,n){var r=7+e-n;return-(7+be(t,0,r).getUTCDay()-e)%7+r-1}function Ee(t,e,n,r,i){var o,s,a=1+7*(e-1)+(7+n-r)%7+we(t,r,i);return a<=0?s=ye(o=t-1)+a:a>ye(t)?(o=t+1,s=a-ye(t)):(o=t,s=a),{year:o,dayOfYear:s}}function Te(t,e,n){var r,i,o=we(t.year(),e,n),s=Math.floor((t.dayOfYear()-o-1)/7)+1;return s<1?r=s+Se(i=t.year()-1,e,n):s>Se(t.year(),e,n)?(r=s-Se(t.year(),e,n),i=t.year()+1):(i=t.year(),r=s),{week:r,year:i}}function Se(t,e,n){var r=we(t,e,n),i=we(t+1,e,n);return(ye(t)-r+i)/7}function ke(t){return Te(t,this._week.dow,this._week.doy).week}V("w",["ww",2],"wo","week"),V("W",["WW",2],"Wo","isoWeek"),it("week","w"),it("isoWeek","W"),ct("week",5),ct("isoWeek",5),Nt("w",Tt),Nt("ww",Tt,xt),Nt("W",Tt),Nt("WW",Tt,xt),Vt(["w","ww","W","WW"],(function(t,e,n,r){e[r.substr(0,1)]=pt(t)}));var Ae={dow:0,doy:6};function Me(){return this._week.dow}function Ie(){return this._week.doy}function Ce(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function Oe(t){var e=Te(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function Pe(t,e){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}function Le(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function De(t,e){return t.slice(e,7).concat(t.slice(0,e))}V("d",0,"do","day"),V("dd",0,0,(function(t){return this.localeData().weekdaysMin(this,t)})),V("ddd",0,0,(function(t){return this.localeData().weekdaysShort(this,t)})),V("dddd",0,0,(function(t){return this.localeData().weekdays(this,t)})),V("e",0,0,"weekday"),V("E",0,0,"isoWeekday"),it("day","d"),it("weekday","e"),it("isoWeekday","E"),ct("day",11),ct("weekday",11),ct("isoWeekday",11),Nt("d",Tt),Nt("e",Tt),Nt("E",Tt),Nt("dd",(function(t,e){return e.weekdaysMinRegex(t)})),Nt("ddd",(function(t,e){return e.weekdaysShortRegex(t)})),Nt("dddd",(function(t,e){return e.weekdaysRegex(t)})),Vt(["dd","ddd","dddd"],(function(t,e,n,r){var i=n._locale.weekdaysParse(t,r,n._strict);null!=i?e.d=i:_(n).invalidWeekday=t})),Vt(["d","e","E"],(function(t,e,n,r){e[r]=pt(t)}));var Re="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ne="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),je="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),ze=Rt,Be=Rt,Fe=Rt;function Ue(t,e){var n=a(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?De(n,this._week.dow):t?n[t.day()]:n}function Ve(t){return!0===t?De(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function qe(t){return!0===t?De(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function We(t,e,n){var r,i,o,s=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=m([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===e?-1!==(i=Wt.call(this._weekdaysParse,s))?i:null:"ddd"===e?-1!==(i=Wt.call(this._shortWeekdaysParse,s))?i:null:-1!==(i=Wt.call(this._minWeekdaysParse,s))?i:null:"dddd"===e?-1!==(i=Wt.call(this._weekdaysParse,s))||-1!==(i=Wt.call(this._shortWeekdaysParse,s))||-1!==(i=Wt.call(this._minWeekdaysParse,s))?i:null:"ddd"===e?-1!==(i=Wt.call(this._shortWeekdaysParse,s))||-1!==(i=Wt.call(this._weekdaysParse,s))||-1!==(i=Wt.call(this._minWeekdaysParse,s))?i:null:-1!==(i=Wt.call(this._minWeekdaysParse,s))||-1!==(i=Wt.call(this._weekdaysParse,s))||-1!==(i=Wt.call(this._shortWeekdaysParse,s))?i:null}function Ge(t,e,n){var r,i,o;if(this._weekdaysParseExact)return We.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=m([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[r].test(t))return r;if(n&&"ddd"===e&&this._shortWeekdaysParse[r].test(t))return r;if(n&&"dd"===e&&this._minWeekdaysParse[r].test(t))return r;if(!n&&this._weekdaysParse[r].test(t))return r}}function $e(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=Pe(t,this.localeData()),this.add(t-e,"d")):e}function He(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function Ze(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=Le(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7}function Ye(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Je.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=ze),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function Xe(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Je.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Be),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Ke(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Je.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Fe),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Je(){function t(t,e){return e.length-t.length}var e,n,r,i,o,s=[],a=[],c=[],l=[];for(e=0;e<7;e++)n=m([2e3,1]).day(e),r=Bt(this.weekdaysMin(n,"")),i=Bt(this.weekdaysShort(n,"")),o=Bt(this.weekdays(n,"")),s.push(r),a.push(i),c.push(o),l.push(r),l.push(i),l.push(o);s.sort(t),a.sort(t),c.sort(t),l.sort(t),this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Qe(){return this.hours()%12||12}function tn(){return this.hours()||24}function en(t,e){V(t,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)}))}function nn(t,e){return e._meridiemParse}function rn(t){return"p"===(t+"").toLowerCase().charAt(0)}V("H",["HH",2],0,"hour"),V("h",["hh",2],0,Qe),V("k",["kk",2],0,tn),V("hmm",0,0,(function(){return""+Qe.apply(this)+j(this.minutes(),2)})),V("hmmss",0,0,(function(){return""+Qe.apply(this)+j(this.minutes(),2)+j(this.seconds(),2)})),V("Hmm",0,0,(function(){return""+this.hours()+j(this.minutes(),2)})),V("Hmmss",0,0,(function(){return""+this.hours()+j(this.minutes(),2)+j(this.seconds(),2)})),en("a",!0),en("A",!1),it("hour","h"),ct("hour",13),Nt("a",nn),Nt("A",nn),Nt("H",Tt),Nt("h",Tt),Nt("k",Tt),Nt("HH",Tt,xt),Nt("hh",Tt,xt),Nt("kk",Tt,xt),Nt("hmm",St),Nt("hmmss",kt),Nt("Hmm",St),Nt("Hmmss",kt),Ut(["H","HH"],Zt),Ut(["k","kk"],(function(t,e,n){var r=pt(t);e[Zt]=24===r?0:r})),Ut(["a","A"],(function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t})),Ut(["h","hh"],(function(t,e,n){e[Zt]=pt(t),_(n).bigHour=!0})),Ut("hmm",(function(t,e,n){var r=t.length-2;e[Zt]=pt(t.substr(0,r)),e[Yt]=pt(t.substr(r)),_(n).bigHour=!0})),Ut("hmmss",(function(t,e,n){var r=t.length-4,i=t.length-2;e[Zt]=pt(t.substr(0,r)),e[Yt]=pt(t.substr(r,2)),e[Xt]=pt(t.substr(i)),_(n).bigHour=!0})),Ut("Hmm",(function(t,e,n){var r=t.length-2;e[Zt]=pt(t.substr(0,r)),e[Yt]=pt(t.substr(r))})),Ut("Hmmss",(function(t,e,n){var r=t.length-4,i=t.length-2;e[Zt]=pt(t.substr(0,r)),e[Yt]=pt(t.substr(r,2)),e[Xt]=pt(t.substr(i))}));var on=/[ap]\.?m?\.?/i,sn=ft("Hours",!0);function an(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}var cn,ln={calendar:R,longDateFormat:H,invalidDate:Y,ordinal:K,dayOfMonthOrdinalParse:J,relativeTime:tt,months:ne,monthsShort:re,week:Ae,weekdays:Re,weekdaysMin:je,weekdaysShort:Ne,meridiemParse:on},un={},hn={};function pn(t,e){var n,r=Math.min(t.length,e.length);for(n=0;n<r;n+=1)if(t[n]!==e[n])return n;return r}function fn(t){return t?t.toLowerCase().replace("_","-"):t}function dn(t){for(var e,n,r,i,o=0;o<t.length;){for(e=(i=fn(t[o]).split("-")).length,n=(n=fn(t[o+1]))?n.split("-"):null;e>0;){if(r=mn(i.slice(0,e).join("-")))return r;if(n&&n.length>=e&&pn(i,n)>=e-1)break;e--}o++}return cn}function gn(t){return null!=t.match("^[^/\\\\]*$")}function mn(e){var r=null;if(void 0===un[e]&&t&&t.exports&&gn(e))try{r=cn._abbr,n(35251)("./"+e),yn(r)}catch(t){un[e]=null}return un[e]}function yn(t,e){var n;return t&&((n=h(e)?xn(t):_n(t,e))?cn=n:void 0!==r&&r.warn&&r.warn("Locale "+t+" not found. Did you forget to load it?")),cn._abbr}function _n(t,e){if(null!==e){var n,r=ln;if(e.abbr=t,null!=un[t])C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=un[t]._config;else if(null!=e.parentLocale)if(null!=un[e.parentLocale])r=un[e.parentLocale]._config;else{if(null==(n=mn(e.parentLocale)))return hn[e.parentLocale]||(hn[e.parentLocale]=[]),hn[e.parentLocale].push({name:t,config:e}),null;r=n._config}return un[t]=new D(L(r,e)),hn[t]&&hn[t].forEach((function(t){_n(t.name,t.config)})),yn(t),un[t]}return delete un[t],null}function vn(t,e){if(null!=e){var n,r,i=ln;null!=un[t]&&null!=un[t].parentLocale?un[t].set(L(un[t]._config,e)):(null!=(r=mn(t))&&(i=r._config),e=L(i,e),null==r&&(e.abbr=t),(n=new D(e)).parentLocale=un[t],un[t]=n),yn(t)}else null!=un[t]&&(null!=un[t].parentLocale?(un[t]=un[t].parentLocale,t===yn()&&yn(t)):null!=un[t]&&delete un[t]);return un[t]}function xn(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return cn;if(!a(t)){if(e=mn(t))return e;t=[t]}return dn(t)}function bn(){return M(un)}function wn(t){var e,n=t._a;return n&&-2===_(t).overflow&&(e=n[$t]<0||n[$t]>11?$t:n[Ht]<1||n[Ht]>ee(n[Gt],n[$t])?Ht:n[Zt]<0||n[Zt]>24||24===n[Zt]&&(0!==n[Yt]||0!==n[Xt]||0!==n[Kt])?Zt:n[Yt]<0||n[Yt]>59?Yt:n[Xt]<0||n[Xt]>59?Xt:n[Kt]<0||n[Kt]>999?Kt:-1,_(t)._overflowDayOfYear&&(e<Gt||e>Ht)&&(e=Ht),_(t)._overflowWeeks&&-1===e&&(e=Jt),_(t)._overflowWeekday&&-1===e&&(e=Qt),_(t).overflow=e),t}var En=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Tn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Sn=/Z|[+-]\d\d(?::?\d\d)?/,kn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],An=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Mn=/^\/?Date\((-?\d+)/i,In=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Cn={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function On(t){var e,n,r,i,o,s,a=t._i,c=En.exec(a)||Tn.exec(a),l=kn.length,u=An.length;if(c){for(_(t).iso=!0,e=0,n=l;e<n;e++)if(kn[e][1].exec(c[1])){i=kn[e][0],r=!1!==kn[e][2];break}if(null==i)return void(t._isValid=!1);if(c[3]){for(e=0,n=u;e<n;e++)if(An[e][1].exec(c[3])){o=(c[2]||" ")+An[e][0];break}if(null==o)return void(t._isValid=!1)}if(!r&&null!=o)return void(t._isValid=!1);if(c[4]){if(!Sn.exec(c[4]))return void(t._isValid=!1);s="Z"}t._f=i+(o||"")+(s||""),qn(t)}else t._isValid=!1}function Pn(t,e,n,r,i,o){var s=[Ln(t),re.indexOf(e),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return o&&s.push(parseInt(o,10)),s}function Ln(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function Dn(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Rn(t,e,n){return!t||Ne.indexOf(t)===new Date(e[0],e[1],e[2]).getDay()||(_(n).weekdayMismatch=!0,n._isValid=!1,!1)}function Nn(t,e,n){if(t)return Cn[t];if(e)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}function jn(t){var e,n=In.exec(Dn(t._i));if(n){if(e=Pn(n[4],n[3],n[2],n[5],n[6],n[7]),!Rn(n[1],e,t))return;t._a=e,t._tzm=Nn(n[8],n[9],n[10]),t._d=be.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),_(t).rfc2822=!0}else t._isValid=!1}function zn(t){var e=Mn.exec(t._i);null===e?(On(t),!1===t._isValid&&(delete t._isValid,jn(t),!1===t._isValid&&(delete t._isValid,t._strict?t._isValid=!1:o.createFromInputFallback(t)))):t._d=new Date(+e[1])}function Bn(t,e,n){return null!=t?t:null!=e?e:n}function Fn(t){var e=new Date(o.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Un(t){var e,n,r,i,o,s=[];if(!t._d){for(r=Fn(t),t._w&&null==t._a[Ht]&&null==t._a[$t]&&Vn(t),null!=t._dayOfYear&&(o=Bn(t._a[Gt],r[Gt]),(t._dayOfYear>ye(o)||0===t._dayOfYear)&&(_(t)._overflowDayOfYear=!0),n=be(o,0,t._dayOfYear),t._a[$t]=n.getUTCMonth(),t._a[Ht]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=s[e]=r[e];for(;e<7;e++)t._a[e]=s[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[Zt]&&0===t._a[Yt]&&0===t._a[Xt]&&0===t._a[Kt]&&(t._nextDay=!0,t._a[Zt]=0),t._d=(t._useUTC?be:xe).apply(null,s),i=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Zt]=24),t._w&&void 0!==t._w.d&&t._w.d!==i&&(_(t).weekdayMismatch=!0)}}function Vn(t){var e,n,r,i,o,s,a,c,l;null!=(e=t._w).GG||null!=e.W||null!=e.E?(o=1,s=4,n=Bn(e.GG,t._a[Gt],Te(Kn(),1,4).year),r=Bn(e.W,1),((i=Bn(e.E,1))<1||i>7)&&(c=!0)):(o=t._locale._week.dow,s=t._locale._week.doy,l=Te(Kn(),o,s),n=Bn(e.gg,t._a[Gt],l.year),r=Bn(e.w,l.week),null!=e.d?((i=e.d)<0||i>6)&&(c=!0):null!=e.e?(i=e.e+o,(e.e<0||e.e>6)&&(c=!0)):i=o),r<1||r>Se(n,o,s)?_(t)._overflowWeeks=!0:null!=c?_(t)._overflowWeekday=!0:(a=Ee(n,r,i,o,s),t._a[Gt]=a.year,t._dayOfYear=a.dayOfYear)}function qn(t){if(t._f!==o.ISO_8601)if(t._f!==o.RFC_2822){t._a=[],_(t).empty=!0;var e,n,r,i,s,a,c,l=""+t._i,u=l.length,h=0;for(c=(r=$(t._f,t._locale).match(z)||[]).length,e=0;e<c;e++)i=r[e],(n=(l.match(jt(i,t))||[])[0])&&((s=l.substr(0,l.indexOf(n))).length>0&&_(t).unusedInput.push(s),l=l.slice(l.indexOf(n)+n.length),h+=n.length),U[i]?(n?_(t).empty=!1:_(t).unusedTokens.push(i),qt(i,n,t)):t._strict&&!n&&_(t).unusedTokens.push(i);_(t).charsLeftOver=u-h,l.length>0&&_(t).unusedInput.push(l),t._a[Zt]<=12&&!0===_(t).bigHour&&t._a[Zt]>0&&(_(t).bigHour=void 0),_(t).parsedDateParts=t._a.slice(0),_(t).meridiem=t._meridiem,t._a[Zt]=Wn(t._locale,t._a[Zt],t._meridiem),null!==(a=_(t).era)&&(t._a[Gt]=t._locale.erasConvertYear(a,t._a[Gt])),Un(t),wn(t)}else jn(t);else On(t)}function Wn(t,e,n){var r;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?((r=t.isPM(n))&&e<12&&(e+=12),r||12!==e||(e=0),e):e}function Gn(t){var e,n,r,i,o,s,a=!1,c=t._f.length;if(0===c)return _(t).invalidFormat=!0,void(t._d=new Date(NaN));for(i=0;i<c;i++)o=0,s=!1,e=E({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[i],qn(e),v(e)&&(s=!0),o+=_(e).charsLeftOver,o+=10*_(e).unusedTokens.length,_(e).score=o,a?o<r&&(r=o,n=e):(null==r||o<r||s)&&(r=o,n=e,s&&(a=!0));g(t,n||e)}function $n(t){if(!t._d){var e=st(t._i),n=void 0===e.day?e.date:e.day;t._a=d([e.year,e.month,n,e.hour,e.minute,e.second,e.millisecond],(function(t){return t&&parseInt(t,10)})),Un(t)}}function Hn(t){var e=new T(wn(Zn(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Zn(t){var e=t._i,n=t._f;return t._locale=t._locale||xn(t._l),null===e||void 0===n&&""===e?x({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),S(e)?new T(wn(e)):(f(e)?t._d=e:a(n)?Gn(t):n?qn(t):Yn(t),v(t)||(t._d=null),t))}function Yn(t){var e=t._i;h(e)?t._d=new Date(o.now()):f(e)?t._d=new Date(e.valueOf()):"string"==typeof e?zn(t):a(e)?(t._a=d(e.slice(0),(function(t){return parseInt(t,10)})),Un(t)):c(e)?$n(t):p(e)?t._d=new Date(e):o.createFromInputFallback(t)}function Xn(t,e,n,r,i){var o={};return!0!==e&&!1!==e||(r=e,e=void 0),!0!==n&&!1!==n||(r=n,n=void 0),(c(t)&&u(t)||a(t)&&0===t.length)&&(t=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=i,o._l=n,o._i=t,o._f=e,o._strict=r,Hn(o)}function Kn(t,e,n,r){return Xn(t,e,n,r,!1)}o.createFromInputFallback=A("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))})),o.ISO_8601=function(){},o.RFC_2822=function(){};var Jn=A("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Kn.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:x()})),Qn=A("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Kn.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:x()}));function tr(t,e){var n,r;if(1===e.length&&a(e[0])&&(e=e[0]),!e.length)return Kn();for(n=e[0],r=1;r<e.length;++r)e[r].isValid()&&!e[r][t](n)||(n=e[r]);return n}function er(){return tr("isBefore",[].slice.call(arguments,0))}function nr(){return tr("isAfter",[].slice.call(arguments,0))}var rr=function(){return Date.now?Date.now():+new Date},ir=["year","quarter","month","week","day","hour","minute","second","millisecond"];function or(t){var e,n,r=!1,i=ir.length;for(e in t)if(l(t,e)&&(-1===Wt.call(ir,e)||null!=t[e]&&isNaN(t[e])))return!1;for(n=0;n<i;++n)if(t[ir[n]]){if(r)return!1;parseFloat(t[ir[n]])!==pt(t[ir[n]])&&(r=!0)}return!0}function sr(){return this._isValid}function ar(){return Cr(NaN)}function cr(t){var e=st(t),n=e.year||0,r=e.quarter||0,i=e.month||0,o=e.week||e.isoWeek||0,s=e.day||0,a=e.hour||0,c=e.minute||0,l=e.second||0,u=e.millisecond||0;this._isValid=or(e),this._milliseconds=+u+1e3*l+6e4*c+1e3*a*60*60,this._days=+s+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=xn(),this._bubble()}function lr(t){return t instanceof cr}function ur(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function hr(t,e,n){var r,i=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),s=0;for(r=0;r<i;r++)(n&&t[r]!==e[r]||!n&&pt(t[r])!==pt(e[r]))&&s++;return s+o}function pr(t,e){V(t,0,0,(function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+j(~~(t/60),2)+e+j(~~t%60,2)}))}pr("Z",":"),pr("ZZ",""),Nt("Z",Lt),Nt("ZZ",Lt),Ut(["Z","ZZ"],(function(t,e,n){n._useUTC=!0,n._tzm=dr(Lt,t)}));var fr=/([\+\-]|\d\d)/gi;function dr(t,e){var n,r,i=(e||"").match(t);return null===i?null:0===(r=60*(n=((i[i.length-1]||[])+"").match(fr)||["-",0,0])[1]+pt(n[2]))?0:"+"===n[0]?r:-r}function gr(t,e){var n,r;return e._isUTC?(n=e.clone(),r=(S(t)||f(t)?t.valueOf():Kn(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),o.updateOffset(n,!1),n):Kn(t).local()}function mr(t){return-Math.round(t._d.getTimezoneOffset())}function yr(t,e,n){var r,i=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=dr(Lt,t)))return this}else Math.abs(t)<16&&!n&&(t*=60);return!this._isUTC&&e&&(r=mr(this)),this._offset=t,this._isUTC=!0,null!=r&&this.add(r,"m"),i!==t&&(!e||this._changeInProgress?Rr(this,Cr(t-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,o.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?i:mr(this)}function _r(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function vr(t){return this.utcOffset(0,t)}function xr(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(mr(this),"m")),this}function br(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=dr(Pt,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this}function wr(t){return!!this.isValid()&&(t=t?Kn(t).utcOffset():0,(this.utcOffset()-t)%60==0)}function Er(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Tr(){if(!h(this._isDSTShifted))return this._isDSTShifted;var t,e={};return E(e,this),(e=Zn(e))._a?(t=e._isUTC?m(e._a):Kn(e._a),this._isDSTShifted=this.isValid()&&hr(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Sr(){return!!this.isValid()&&!this._isUTC}function kr(){return!!this.isValid()&&this._isUTC}function Ar(){return!!this.isValid()&&this._isUTC&&0===this._offset}o.updateOffset=function(){};var Mr=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Ir=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Cr(t,e){var n,r,i,o=t,s=null;return lr(t)?o={ms:t._milliseconds,d:t._days,M:t._months}:p(t)||!isNaN(+t)?(o={},e?o[e]=+t:o.milliseconds=+t):(s=Mr.exec(t))?(n="-"===s[1]?-1:1,o={y:0,d:pt(s[Ht])*n,h:pt(s[Zt])*n,m:pt(s[Yt])*n,s:pt(s[Xt])*n,ms:pt(ur(1e3*s[Kt]))*n}):(s=Ir.exec(t))?(n="-"===s[1]?-1:1,o={y:Or(s[2],n),M:Or(s[3],n),w:Or(s[4],n),d:Or(s[5],n),h:Or(s[6],n),m:Or(s[7],n),s:Or(s[8],n)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(i=Lr(Kn(o.from),Kn(o.to)),(o={}).ms=i.milliseconds,o.M=i.months),r=new cr(o),lr(t)&&l(t,"_locale")&&(r._locale=t._locale),lr(t)&&l(t,"_isValid")&&(r._isValid=t._isValid),r}function Or(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Pr(t,e){var n={};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Lr(t,e){var n;return t.isValid()&&e.isValid()?(e=gr(e,t),t.isBefore(e)?n=Pr(t,e):((n=Pr(e,t)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Dr(t,e){return function(n,r){var i;return null===r||isNaN(+r)||(C(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),Rr(this,Cr(n,r),t),this}}function Rr(t,e,n,r){var i=e._milliseconds,s=ur(e._days),a=ur(e._months);t.isValid()&&(r=null==r||r,a&&he(t,dt(t,"Month")+a*n),s&&gt(t,"Date",dt(t,"Date")+s*n),i&&t._d.setTime(t._d.valueOf()+i*n),r&&o.updateOffset(t,s||a))}Cr.fn=cr.prototype,Cr.invalid=ar;var Nr=Dr(1,"add"),jr=Dr(-1,"subtract");function zr(t){return"string"==typeof t||t instanceof String}function Br(t){return S(t)||f(t)||zr(t)||p(t)||Ur(t)||Fr(t)||null==t}function Fr(t){var e,n,r=c(t)&&!u(t),i=!1,o=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],s=o.length;for(e=0;e<s;e+=1)n=o[e],i=i||l(t,n);return r&&i}function Ur(t){var e=a(t),n=!1;return e&&(n=0===t.filter((function(e){return!p(e)&&zr(t)})).length),e&&n}function Vr(t){var e,n,r=c(t)&&!u(t),i=!1,o=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(e=0;e<o.length;e+=1)n=o[e],i=i||l(t,n);return r&&i}function qr(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Wr(t,e){1===arguments.length&&(arguments[0]?Br(arguments[0])?(t=arguments[0],e=void 0):Vr(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var n=t||Kn(),r=gr(n,this).startOf("day"),i=o.calendarFormat(this,r)||"sameElse",s=e&&(O(e[i])?e[i].call(this,n):e[i]);return this.format(s||this.localeData().calendar(i,this,Kn(n)))}function Gr(){return new T(this)}function $r(t,e){var n=S(t)?t:Kn(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=ot(e)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())}function Hr(t,e){var n=S(t)?t:Kn(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=ot(e)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())}function Zr(t,e,n,r){var i=S(t)?t:Kn(t),o=S(e)?e:Kn(e);return!!(this.isValid()&&i.isValid()&&o.isValid())&&("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(o,n):!this.isAfter(o,n))}function Yr(t,e){var n,r=S(t)?t:Kn(t);return!(!this.isValid()||!r.isValid())&&("millisecond"===(e=ot(e)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))}function Xr(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function Kr(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function Jr(t,e,n){var r,i,o;if(!this.isValid())return NaN;if(!(r=gr(t,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),e=ot(e)){case"year":o=Qr(this,r)/12;break;case"month":o=Qr(this,r);break;case"quarter":o=Qr(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-i)/864e5;break;case"week":o=(this-r-i)/6048e5;break;default:o=this-r}return n?o:ht(o)}function Qr(t,e){if(t.date()<e.date())return-Qr(e,t);var n=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(n,"months");return-(n+(e-r<0?(e-r)/(r-t.clone().add(n-1,"months")):(e-r)/(t.clone().add(n+1,"months")-r)))||0}function ti(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ei(t){if(!this.isValid())return null;var e=!0!==t,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?G(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):O(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",G(n,"Z")):G(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function ni(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t,e,n,r,i="moment",o="";return this.isLocal()||(i=0===this.utcOffset()?"moment.utc":"moment.parseZone",o="Z"),t="["+i+'("]',e=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",r=o+'[")]',this.format(t+e+n+r)}function ri(t){t||(t=this.isUtc()?o.defaultFormatUtc:o.defaultFormat);var e=G(this,t);return this.localeData().postformat(e)}function ii(t,e){return this.isValid()&&(S(t)&&t.isValid()||Kn(t).isValid())?Cr({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function oi(t){return this.from(Kn(),t)}function si(t,e){return this.isValid()&&(S(t)&&t.isValid()||Kn(t).isValid())?Cr({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function ai(t){return this.to(Kn(),t)}function ci(t){var e;return void 0===t?this._locale._abbr:(null!=(e=xn(t))&&(this._locale=e),this)}o.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",o.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var li=A("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(t){return void 0===t?this.localeData():this.locale(t)}));function ui(){return this._locale}var hi=1e3,pi=60*hi,fi=60*pi,di=3506328*fi;function gi(t,e){return(t%e+e)%e}function mi(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-di:new Date(t,e,n).valueOf()}function yi(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-di:Date.UTC(t,e,n)}function _i(t){var e,n;if(void 0===(t=ot(t))||"millisecond"===t||!this.isValid())return this;switch(n=this._isUTC?yi:mi,t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=gi(e+(this._isUTC?0:this.utcOffset()*pi),fi);break;case"minute":e=this._d.valueOf(),e-=gi(e,pi);break;case"second":e=this._d.valueOf(),e-=gi(e,hi)}return this._d.setTime(e),o.updateOffset(this,!0),this}function vi(t){var e,n;if(void 0===(t=ot(t))||"millisecond"===t||!this.isValid())return this;switch(n=this._isUTC?yi:mi,t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=fi-gi(e+(this._isUTC?0:this.utcOffset()*pi),fi)-1;break;case"minute":e=this._d.valueOf(),e+=pi-gi(e,pi)-1;break;case"second":e=this._d.valueOf(),e+=hi-gi(e,hi)-1}return this._d.setTime(e),o.updateOffset(this,!0),this}function xi(){return this._d.valueOf()-6e4*(this._offset||0)}function bi(){return Math.floor(this.valueOf()/1e3)}function wi(){return new Date(this.valueOf())}function Ei(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function Ti(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Si(){return this.isValid()?this.toISOString():null}function ki(){return v(this)}function Ai(){return g({},_(this))}function Mi(){return _(this).overflow}function Ii(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Ci(t,e){var n,r,i,s=this._eras||xn("en")._eras;for(n=0,r=s.length;n<r;++n)switch("string"==typeof s[n].since&&(i=o(s[n].since).startOf("day"),s[n].since=i.valueOf()),typeof s[n].until){case"undefined":s[n].until=1/0;break;case"string":i=o(s[n].until).startOf("day").valueOf(),s[n].until=i.valueOf()}return s}function Oi(t,e,n){var r,i,o,s,a,c=this.eras();for(t=t.toUpperCase(),r=0,i=c.length;r<i;++r)if(o=c[r].name.toUpperCase(),s=c[r].abbr.toUpperCase(),a=c[r].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(s===t)return c[r];break;case"NNNN":if(o===t)return c[r];break;case"NNNNN":if(a===t)return c[r]}else if([o,s,a].indexOf(t)>=0)return c[r]}function Pi(t,e){var n=t.since<=t.until?1:-1;return void 0===e?o(t.since).year():o(t.since).year()+(e-t.offset)*n}function Li(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until)return r[t].name;if(r[t].until<=n&&n<=r[t].since)return r[t].name}return""}function Di(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until)return r[t].narrow;if(r[t].until<=n&&n<=r[t].since)return r[t].narrow}return""}function Ri(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until)return r[t].abbr;if(r[t].until<=n&&n<=r[t].since)return r[t].abbr}return""}function Ni(){var t,e,n,r,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t)if(n=i[t].since<=i[t].until?1:-1,r=this.clone().startOf("day").valueOf(),i[t].since<=r&&r<=i[t].until||i[t].until<=r&&r<=i[t].since)return(this.year()-o(i[t].since).year())*n+i[t].offset;return this.year()}function ji(t){return l(this,"_erasNameRegex")||Wi.call(this),t?this._erasNameRegex:this._erasRegex}function zi(t){return l(this,"_erasAbbrRegex")||Wi.call(this),t?this._erasAbbrRegex:this._erasRegex}function Bi(t){return l(this,"_erasNarrowRegex")||Wi.call(this),t?this._erasNarrowRegex:this._erasRegex}function Fi(t,e){return e.erasAbbrRegex(t)}function Ui(t,e){return e.erasNameRegex(t)}function Vi(t,e){return e.erasNarrowRegex(t)}function qi(t,e){return e._eraYearOrdinalRegex||Ct}function Wi(){var t,e,n=[],r=[],i=[],o=[],s=this.eras();for(t=0,e=s.length;t<e;++t)r.push(Bt(s[t].name)),n.push(Bt(s[t].abbr)),i.push(Bt(s[t].narrow)),o.push(Bt(s[t].name)),o.push(Bt(s[t].abbr)),o.push(Bt(s[t].narrow));this._erasRegex=new RegExp("^("+o.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+r.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}function Gi(t,e){V(0,[t,t.length],0,e)}function $i(t){return Ji.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Hi(t){return Ji.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function Zi(){return Se(this.year(),1,4)}function Yi(){return Se(this.isoWeekYear(),1,4)}function Xi(){var t=this.localeData()._week;return Se(this.year(),t.dow,t.doy)}function Ki(){var t=this.localeData()._week;return Se(this.weekYear(),t.dow,t.doy)}function Ji(t,e,n,r,i){var o;return null==t?Te(this,r,i).year:(e>(o=Se(t,r,i))&&(e=o),Qi.call(this,t,e,n,r,i))}function Qi(t,e,n,r,i){var o=Ee(t,e,n,r,i),s=be(o.year,0,o.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}function to(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}V("N",0,0,"eraAbbr"),V("NN",0,0,"eraAbbr"),V("NNN",0,0,"eraAbbr"),V("NNNN",0,0,"eraName"),V("NNNNN",0,0,"eraNarrow"),V("y",["y",1],"yo","eraYear"),V("y",["yy",2],0,"eraYear"),V("y",["yyy",3],0,"eraYear"),V("y",["yyyy",4],0,"eraYear"),Nt("N",Fi),Nt("NN",Fi),Nt("NNN",Fi),Nt("NNNN",Ui),Nt("NNNNN",Vi),Ut(["N","NN","NNN","NNNN","NNNNN"],(function(t,e,n,r){var i=n._locale.erasParse(t,r,n._strict);i?_(n).era=i:_(n).invalidEra=t})),Nt("y",Ct),Nt("yy",Ct),Nt("yyy",Ct),Nt("yyyy",Ct),Nt("yo",qi),Ut(["y","yy","yyy","yyyy"],Gt),Ut(["yo"],(function(t,e,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[Gt]=n._locale.eraYearOrdinalParse(t,i):e[Gt]=parseInt(t,10)})),V(0,["gg",2],0,(function(){return this.weekYear()%100})),V(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),Gi("gggg","weekYear"),Gi("ggggg","weekYear"),Gi("GGGG","isoWeekYear"),Gi("GGGGG","isoWeekYear"),it("weekYear","gg"),it("isoWeekYear","GG"),ct("weekYear",1),ct("isoWeekYear",1),Nt("G",Ot),Nt("g",Ot),Nt("GG",Tt,xt),Nt("gg",Tt,xt),Nt("GGGG",Mt,wt),Nt("gggg",Mt,wt),Nt("GGGGG",It,Et),Nt("ggggg",It,Et),Vt(["gggg","ggggg","GGGG","GGGGG"],(function(t,e,n,r){e[r.substr(0,2)]=pt(t)})),Vt(["gg","GG"],(function(t,e,n,r){e[r]=o.parseTwoDigitYear(t)})),V("Q",0,"Qo","quarter"),it("quarter","Q"),ct("quarter",7),Nt("Q",vt),Ut("Q",(function(t,e){e[$t]=3*(pt(t)-1)})),V("D",["DD",2],"Do","date"),it("date","D"),ct("date",9),Nt("D",Tt),Nt("DD",Tt,xt),Nt("Do",(function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient})),Ut(["D","DD"],Ht),Ut("Do",(function(t,e){e[Ht]=pt(t.match(Tt)[0])}));var eo=ft("Date",!0);function no(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}V("DDD",["DDDD",3],"DDDo","dayOfYear"),it("dayOfYear","DDD"),ct("dayOfYear",4),Nt("DDD",At),Nt("DDDD",bt),Ut(["DDD","DDDD"],(function(t,e,n){n._dayOfYear=pt(t)})),V("m",["mm",2],0,"minute"),it("minute","m"),ct("minute",14),Nt("m",Tt),Nt("mm",Tt,xt),Ut(["m","mm"],Yt);var ro=ft("Minutes",!1);V("s",["ss",2],0,"second"),it("second","s"),ct("second",15),Nt("s",Tt),Nt("ss",Tt,xt),Ut(["s","ss"],Xt);var io,oo,so=ft("Seconds",!1);for(V("S",0,0,(function(){return~~(this.millisecond()/100)})),V(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),V(0,["SSS",3],0,"millisecond"),V(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),V(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),V(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),V(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),V(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),V(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),it("millisecond","ms"),ct("millisecond",16),Nt("S",At,vt),Nt("SS",At,xt),Nt("SSS",At,bt),io="SSSS";io.length<=9;io+="S")Nt(io,Ct);function ao(t,e){e[Kt]=pt(1e3*("0."+t))}for(io="S";io.length<=9;io+="S")Ut(io,ao);function co(){return this._isUTC?"UTC":""}function lo(){return this._isUTC?"Coordinated Universal Time":""}oo=ft("Milliseconds",!1),V("z",0,0,"zoneAbbr"),V("zz",0,0,"zoneName");var uo=T.prototype;function ho(t){return Kn(1e3*t)}function po(){return Kn.apply(null,arguments).parseZone()}function fo(t){return t}uo.add=Nr,uo.calendar=Wr,uo.clone=Gr,uo.diff=Jr,uo.endOf=vi,uo.format=ri,uo.from=ii,uo.fromNow=oi,uo.to=si,uo.toNow=ai,uo.get=mt,uo.invalidAt=Mi,uo.isAfter=$r,uo.isBefore=Hr,uo.isBetween=Zr,uo.isSame=Yr,uo.isSameOrAfter=Xr,uo.isSameOrBefore=Kr,uo.isValid=ki,uo.lang=li,uo.locale=ci,uo.localeData=ui,uo.max=Qn,uo.min=Jn,uo.parsingFlags=Ai,uo.set=yt,uo.startOf=_i,uo.subtract=jr,uo.toArray=Ei,uo.toObject=Ti,uo.toDate=wi,uo.toISOString=ei,uo.inspect=ni,"undefined"!=typeof Symbol&&null!=Symbol.for&&(uo[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),uo.toJSON=Si,uo.toString=ti,uo.unix=bi,uo.valueOf=xi,uo.creationData=Ii,uo.eraName=Li,uo.eraNarrow=Di,uo.eraAbbr=Ri,uo.eraYear=Ni,uo.year=_e,uo.isLeapYear=ve,uo.weekYear=$i,uo.isoWeekYear=Hi,uo.quarter=uo.quarters=to,uo.month=pe,uo.daysInMonth=fe,uo.week=uo.weeks=Ce,uo.isoWeek=uo.isoWeeks=Oe,uo.weeksInYear=Xi,uo.weeksInWeekYear=Ki,uo.isoWeeksInYear=Zi,uo.isoWeeksInISOWeekYear=Yi,uo.date=eo,uo.day=uo.days=$e,uo.weekday=He,uo.isoWeekday=Ze,uo.dayOfYear=no,uo.hour=uo.hours=sn,uo.minute=uo.minutes=ro,uo.second=uo.seconds=so,uo.millisecond=uo.milliseconds=oo,uo.utcOffset=yr,uo.utc=vr,uo.local=xr,uo.parseZone=br,uo.hasAlignedHourOffset=wr,uo.isDST=Er,uo.isLocal=Sr,uo.isUtcOffset=kr,uo.isUtc=Ar,uo.isUTC=Ar,uo.zoneAbbr=co,uo.zoneName=lo,uo.dates=A("dates accessor is deprecated. Use date instead.",eo),uo.months=A("months accessor is deprecated. Use month instead",pe),uo.years=A("years accessor is deprecated. Use year instead",_e),uo.zone=A("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",_r),uo.isDSTShifted=A("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Tr);var go=D.prototype;function mo(t,e,n,r){var i=xn(),o=m().set(r,e);return i[n](o,t)}function yo(t,e,n){if(p(t)&&(e=t,t=void 0),t=t||"",null!=e)return mo(t,e,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=mo(t,r,n,"month");return i}function _o(t,e,n,r){"boolean"==typeof t?(p(e)&&(n=e,e=void 0),e=e||""):(n=e=t,t=!1,p(e)&&(n=e,e=void 0),e=e||"");var i,o=xn(),s=t?o._week.dow:0,a=[];if(null!=n)return mo(e,(n+s)%7,r,"day");for(i=0;i<7;i++)a[i]=mo(e,(i+s)%7,r,"day");return a}function vo(t,e){return yo(t,e,"months")}function xo(t,e){return yo(t,e,"monthsShort")}function bo(t,e,n){return _o(t,e,n,"weekdays")}function wo(t,e,n){return _o(t,e,n,"weekdaysShort")}function Eo(t,e,n){return _o(t,e,n,"weekdaysMin")}go.calendar=N,go.longDateFormat=Z,go.invalidDate=X,go.ordinal=Q,go.preparse=fo,go.postformat=fo,go.relativeTime=et,go.pastFuture=nt,go.set=P,go.eras=Ci,go.erasParse=Oi,go.erasConvertYear=Pi,go.erasAbbrRegex=zi,go.erasNameRegex=ji,go.erasNarrowRegex=Bi,go.months=ae,go.monthsShort=ce,go.monthsParse=ue,go.monthsRegex=ge,go.monthsShortRegex=de,go.week=ke,go.firstDayOfYear=Ie,go.firstDayOfWeek=Me,go.weekdays=Ue,go.weekdaysMin=qe,go.weekdaysShort=Ve,go.weekdaysParse=Ge,go.weekdaysRegex=Ye,go.weekdaysShortRegex=Xe,go.weekdaysMinRegex=Ke,go.isPM=rn,go.meridiem=an,yn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===pt(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),o.lang=A("moment.lang is deprecated. Use moment.locale instead.",yn),o.langData=A("moment.langData is deprecated. Use moment.localeData instead.",xn);var To=Math.abs;function So(){var t=this._data;return this._milliseconds=To(this._milliseconds),this._days=To(this._days),this._months=To(this._months),t.milliseconds=To(t.milliseconds),t.seconds=To(t.seconds),t.minutes=To(t.minutes),t.hours=To(t.hours),t.months=To(t.months),t.years=To(t.years),this}function ko(t,e,n,r){var i=Cr(e,n);return t._milliseconds+=r*i._milliseconds,t._days+=r*i._days,t._months+=r*i._months,t._bubble()}function Ao(t,e){return ko(this,t,e,1)}function Mo(t,e){return ko(this,t,e,-1)}function Io(t){return t<0?Math.floor(t):Math.ceil(t)}function Co(){var t,e,n,r,i,o=this._milliseconds,s=this._days,a=this._months,c=this._data;return o>=0&&s>=0&&a>=0||o<=0&&s<=0&&a<=0||(o+=864e5*Io(Po(a)+s),s=0,a=0),c.milliseconds=o%1e3,t=ht(o/1e3),c.seconds=t%60,e=ht(t/60),c.minutes=e%60,n=ht(e/60),c.hours=n%24,s+=ht(n/24),a+=i=ht(Oo(s)),s-=Io(Po(i)),r=ht(a/12),a%=12,c.days=s,c.months=a,c.years=r,this}function Oo(t){return 4800*t/146097}function Po(t){return 146097*t/4800}function Lo(t){if(!this.isValid())return NaN;var e,n,r=this._milliseconds;if("month"===(t=ot(t))||"quarter"===t||"year"===t)switch(e=this._days+r/864e5,n=this._months+Oo(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(Po(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return 24*e+r/36e5;case"minute":return 1440*e+r/6e4;case"second":return 86400*e+r/1e3;case"millisecond":return Math.floor(864e5*e)+r;default:throw new Error("Unknown unit "+t)}}function Do(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*pt(this._months/12):NaN}function Ro(t){return function(){return this.as(t)}}var No=Ro("ms"),jo=Ro("s"),zo=Ro("m"),Bo=Ro("h"),Fo=Ro("d"),Uo=Ro("w"),Vo=Ro("M"),qo=Ro("Q"),Wo=Ro("y");function Go(){return Cr(this)}function $o(t){return t=ot(t),this.isValid()?this[t+"s"]():NaN}function Ho(t){return function(){return this.isValid()?this._data[t]:NaN}}var Zo=Ho("milliseconds"),Yo=Ho("seconds"),Xo=Ho("minutes"),Ko=Ho("hours"),Jo=Ho("days"),Qo=Ho("months"),ts=Ho("years");function es(){return ht(this.days()/7)}var ns=Math.round,rs={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function is(t,e,n,r,i){return i.relativeTime(e||1,!!n,t,r)}function os(t,e,n,r){var i=Cr(t).abs(),o=ns(i.as("s")),s=ns(i.as("m")),a=ns(i.as("h")),c=ns(i.as("d")),l=ns(i.as("M")),u=ns(i.as("w")),h=ns(i.as("y")),p=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||s<=1&&["m"]||s<n.m&&["mm",s]||a<=1&&["h"]||a<n.h&&["hh",a]||c<=1&&["d"]||c<n.d&&["dd",c];return null!=n.w&&(p=p||u<=1&&["w"]||u<n.w&&["ww",u]),(p=p||l<=1&&["M"]||l<n.M&&["MM",l]||h<=1&&["y"]||["yy",h])[2]=e,p[3]=+t>0,p[4]=r,is.apply(null,p)}function ss(t){return void 0===t?ns:"function"==typeof t&&(ns=t,!0)}function as(t,e){return void 0!==rs[t]&&(void 0===e?rs[t]:(rs[t]=e,"s"===t&&(rs.ss=e-1),!0))}function cs(t,e){if(!this.isValid())return this.localeData().invalidDate();var n,r,i=!1,o=rs;return"object"==typeof t&&(e=t,t=!1),"boolean"==typeof t&&(i=t),"object"==typeof e&&(o=Object.assign({},rs,e),null!=e.s&&null==e.ss&&(o.ss=e.s-1)),r=os(this,!i,o,n=this.localeData()),i&&(r=n.pastFuture(+this,r)),n.postformat(r)}var ls=Math.abs;function us(t){return(t>0)-(t<0)||+t}function hs(){if(!this.isValid())return this.localeData().invalidDate();var t,e,n,r,i,o,s,a,c=ls(this._milliseconds)/1e3,l=ls(this._days),u=ls(this._months),h=this.asSeconds();return h?(t=ht(c/60),e=ht(t/60),c%=60,t%=60,n=ht(u/12),u%=12,r=c?c.toFixed(3).replace(/\.?0+$/,""):"",i=h<0?"-":"",o=us(this._months)!==us(h)?"-":"",s=us(this._days)!==us(h)?"-":"",a=us(this._milliseconds)!==us(h)?"-":"",i+"P"+(n?o+n+"Y":"")+(u?o+u+"M":"")+(l?s+l+"D":"")+(e||t||c?"T":"")+(e?a+e+"H":"")+(t?a+t+"M":"")+(c?a+r+"S":"")):"P0D"}var ps=cr.prototype;return ps.isValid=sr,ps.abs=So,ps.add=Ao,ps.subtract=Mo,ps.as=Lo,ps.asMilliseconds=No,ps.asSeconds=jo,ps.asMinutes=zo,ps.asHours=Bo,ps.asDays=Fo,ps.asWeeks=Uo,ps.asMonths=Vo,ps.asQuarters=qo,ps.asYears=Wo,ps.valueOf=Do,ps._bubble=Co,ps.clone=Go,ps.get=$o,ps.milliseconds=Zo,ps.seconds=Yo,ps.minutes=Xo,ps.hours=Ko,ps.days=Jo,ps.weeks=es,ps.months=Qo,ps.years=ts,ps.humanize=cs,ps.toISOString=hs,ps.toString=hs,ps.toJSON=hs,ps.locale=ci,ps.localeData=ui,ps.toIsoString=A("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",hs),ps.lang=li,V("X",0,0,"unix"),V("x",0,0,"valueOf"),Nt("x",Ot),Nt("X",Dt),Ut("X",(function(t,e,n){n._d=new Date(1e3*parseFloat(t))})),Ut("x",(function(t,e,n){n._d=new Date(pt(t))})),o.version="2.29.4",s(Kn),o.fn=uo,o.min=er,o.max=nr,o.now=rr,o.utc=m,o.unix=ho,o.months=vo,o.isDate=f,o.locale=yn,o.invalid=x,o.duration=Cr,o.isMoment=S,o.weekdays=bo,o.parseZone=po,o.localeData=xn,o.isDuration=lr,o.monthsShort=xo,o.weekdaysMin=Eo,o.defineLocale=_n,o.updateLocale=vn,o.locales=bn,o.weekdaysShort=wo,o.normalizeUnits=ot,o.relativeTimeRounding=ss,o.relativeTimeThreshold=as,o.calendarFormat=qr,o.prototype=uo,o.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},o}()},27418:function(t){"use strict";var e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,i){for(var o,s,a=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(a[l]=o[l]);if(e){s=e(o);for(var u=0;u<s.length;u++)r.call(o,s[u])&&(a[s[u]]=o[s[u]])}}return a}},24244:function(t){"use strict";var e=function(t){return t!=t};t.exports=function(t,n){return 0===t&&0===n?1/t==1/n:t===n||!(!e(t)||!e(n))}},20609:function(t,e,n){"use strict";var r=n(4289),i=n(55559),o=n(24244),s=n(75624),a=n(52281),c=i(s(),Object);r(c,{getPolyfill:s,implementation:o,shim:a}),t.exports=c},75624:function(t,e,n){"use strict";var r=n(24244);t.exports=function(){return"function"==typeof Object.is?Object.is:r}},52281:function(t,e,n){"use strict";var r=n(75624),i=n(4289);t.exports=function(){var t=r();return i(Object,{is:t},{is:function(){return Object.is!==t}}),t}},18987:function(t,e,n){"use strict";var r;if(!Object.keys){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,s=n(21414),a=Object.prototype.propertyIsEnumerable,c=!a.call({toString:null},"toString"),l=a.call((function(){}),"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=function(t){var e=t.constructor;return e&&e.prototype===t},p={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!p["$"+t]&&i.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{h(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();r=function(t){var e=null!==t&&"object"==typeof t,n="[object Function]"===o.call(t),r=s(t),a=e&&"[object String]"===o.call(t),p=[];if(!e&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var d=l&&n;if(a&&t.length>0&&!i.call(t,0))for(var g=0;g<t.length;++g)p.push(String(g));if(r&&t.length>0)for(var m=0;m<t.length;++m)p.push(String(m));else for(var y in t)d&&"prototype"===y||!i.call(t,y)||p.push(String(y));if(c)for(var _=function(t){if("undefined"==typeof window||!f)return h(t);try{return h(t)}catch(t){return!1}}(t),v=0;v<u.length;++v)_&&"constructor"===u[v]||!i.call(t,u[v])||p.push(u[v]);return p}}t.exports=r},82215:function(t,e,n){"use strict";var r=Array.prototype.slice,i=n(21414),o=Object.keys,s=o?function(t){return o(t)}:n(18987),a=Object.keys;s.shim=function(){if(Object.keys){var t=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);t||(Object.keys=function(t){return i(t)?a(r.call(t)):a(t)})}else Object.keys=s;return Object.keys||s},t.exports=s},21414:function(t){"use strict";var e=Object.prototype.toString;t.exports=function(t){var n=e.call(t),r="[object Arguments]"===n;return r||(r="[object Array]"!==n&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===e.call(t.callee)),r}},92837:function(t,e,n){"use strict";var r=n(82215),i=n(55419)(),o=n(21924),s=Object,a=o("Array.prototype.push"),c=o("Object.prototype.propertyIsEnumerable"),l=i?Object.getOwnPropertySymbols:null;t.exports=function(t,e){if(null==t)throw new TypeError("target must be an object");var n=s(t);if(1===arguments.length)return n;for(var o=1;o<arguments.length;++o){var u=s(arguments[o]),h=r(u),p=i&&(Object.getOwnPropertySymbols||l);if(p)for(var f=p(u),d=0;d<f.length;++d){var g=f[d];c(u,g)&&a(h,g)}for(var m=0;m<h.length;++m){var y=h[m];if(c(u,y)){var _=u[y];n[y]=_}}}return n}},28162:function(t,e,n){"use strict";var r=n(92837);t.exports=function(){return Object.assign?function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),n={},r=0;r<e.length;++r)n[e[r]]=e[r];var i=Object.assign({},n),o="";for(var s in i)o+=s;return t!==o}()||function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch(e){return"y"===t[1]}return!1}()?r:Object.assign:r}},81725:function(t){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},2974:function(t){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},18059:function(t,e,n){var r=n(34155),i=n(25108),o=/%[sdj%]/g;e.format=function(t){if(!_(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(c(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,i=r.length,s=String(t).replace(o,(function(t){if("%%"===t)return"%";if(n>=i)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}})),a=r[n];n<i;a=r[++n])m(a)||!b(a)?s+=" "+a:s+=" "+c(a);return s},e.deprecate=function(t,o){if(v(n.g.process))return function(){return e.deprecate(t,o).apply(this,arguments)};if(!0===r.noDeprecation)return t;var s=!1;return function(){if(!s){if(r.throwDeprecation)throw new Error(o);r.traceDeprecation?i.trace(o):i.error(o),s=!0}return t.apply(this,arguments)}};var s,a={};function c(t,n){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(n)?r.showHidden=n:n&&e._extend(r,n),v(r.showHidden)&&(r.showHidden=!1),v(r.depth)&&(r.depth=2),v(r.colors)&&(r.colors=!1),v(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=l),h(r,t,r.depth)}function l(t,e){var n=c.styles[e];return n?"["+c.colors[n][0]+"m"+t+"["+c.colors[n][1]+"m":t}function u(t,e){return t}function h(t,n,r){if(t.customInspect&&n&&T(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return _(i)||(i=h(t,i,r)),i}var o=function(t,e){if(v(e))return t.stylize("undefined","undefined");if(_(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(y(e))return t.stylize(""+e,"number");if(g(e))return t.stylize(""+e,"boolean");if(m(e))return t.stylize("null","null")}(t,n);if(o)return o;var s=Object.keys(n),a=function(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(n)),E(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return p(n);if(0===s.length){if(T(n)){var c=n.name?": "+n.name:"";return t.stylize("[Function"+c+"]","special")}if(x(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(w(n))return t.stylize(Date.prototype.toString.call(n),"date");if(E(n))return p(n)}var l,u="",b=!1,S=["{","}"];(d(n)&&(b=!0,S=["[","]"]),T(n))&&(u=" [Function"+(n.name?": "+n.name:"")+"]");return x(n)&&(u=" "+RegExp.prototype.toString.call(n)),w(n)&&(u=" "+Date.prototype.toUTCString.call(n)),E(n)&&(u=" "+p(n)),0!==s.length||b&&0!=n.length?r<0?x(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),l=b?function(t,e,n,r,i){for(var o=[],s=0,a=e.length;s<a;++s)M(e,String(s))?o.push(f(t,e,n,r,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(f(t,e,n,r,i,!0))})),o}(t,n,r,a,s):s.map((function(e){return f(t,n,r,a,e,b)})),t.seen.pop(),function(t,e,n){var r=t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0);if(r>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(l,u,S)):S[0]+u+S[1]}function p(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,n,r,i,o){var s,a,c;if((c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),M(r,i)||(s="["+i+"]"),a||(t.seen.indexOf(c.value)<0?(a=m(n)?h(t,c.value,null):h(t,c.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),v(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function d(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function m(t){return null===t}function y(t){return"number"==typeof t}function _(t){return"string"==typeof t}function v(t){return void 0===t}function x(t){return b(t)&&"[object RegExp]"===S(t)}function b(t){return"object"==typeof t&&null!==t}function w(t){return b(t)&&"[object Date]"===S(t)}function E(t){return b(t)&&("[object Error]"===S(t)||t instanceof Error)}function T(t){return"function"==typeof t}function S(t){return Object.prototype.toString.call(t)}function k(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(v(s)&&(s=r.env.NODE_DEBUG||""),t=t.toUpperCase(),!a[t])if(new RegExp("\\b"+t+"\\b","i").test(s)){var n=r.pid;a[t]=function(){var r=e.format.apply(e,arguments);i.error("%s %d: %s",t,n,r)}}else a[t]=function(){};return a[t]},e.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=g,e.isNull=m,e.isNullOrUndefined=function(t){return null==t},e.isNumber=y,e.isString=_,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=v,e.isRegExp=x,e.isObject=b,e.isDate=w,e.isError=E,e.isFunction=T,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(2974);var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function M(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){var t,n;i.log("%s - %s",(t=new Date,n=[k(t.getHours()),k(t.getMinutes()),k(t.getSeconds())].join(":"),[t.getDate(),A[t.getMonth()],n].join(" ")),e.format.apply(e,arguments))},e.inherits=n(81725),e._extend=function(t,e){if(!e||!b(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}},62520:function(t,e,n){"use strict";var r=n(34155),i="win32"===r.platform,o=n(18059);function s(t,e){for(var n=[],r=0;r<t.length;r++){var i=t[r];i&&"."!==i&&(".."===i?n.length&&".."!==n[n.length-1]?n.pop():e&&n.push(".."):n.push(i))}return n}function a(t){for(var e=t.length-1,n=0;n<=e&&!t[n];n++);for(var r=e;r>=0&&!t[r];r--);return 0===n&&r===e?t:n>r?[]:t.slice(n,r+1)}var c=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,l=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,u={};function h(t){var e=c.exec(t),n=(e[1]||"")+(e[2]||""),r=e[3]||"",i=l.exec(r);return[n,i[1],i[2],i[3]]}function p(t){var e=c.exec(t),n=e[1]||"",r=!!n&&":"!==n[1];return{device:n,isUnc:r,isAbsolute:r||!!e[2],tail:e[3]}}function f(t){return"\\\\"+t.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}u.resolve=function(){for(var t="",e="",n=!1,i=arguments.length-1;i>=-1;i--){var a;if(i>=0?a=arguments[i]:t?(a=r.env["="+t])&&a.substr(0,3).toLowerCase()===t.toLowerCase()+"\\"||(a=t+"\\"):a=r.cwd(),!o.isString(a))throw new TypeError("Arguments to path.resolve must be strings");if(a){var c=p(a),l=c.device,u=c.isUnc,h=c.isAbsolute,d=c.tail;if((!l||!t||l.toLowerCase()===t.toLowerCase())&&(t||(t=l),n||(e=d+"\\"+e,n=h),t&&n))break}}return u&&(t=f(t)),t+(n?"\\":"")+(e=s(e.split(/[\\\/]+/),!n).join("\\"))||"."},u.normalize=function(t){var e=p(t),n=e.device,r=e.isUnc,i=e.isAbsolute,o=e.tail,a=/[\\\/]$/.test(o);return(o=s(o.split(/[\\\/]+/),!i).join("\\"))||i||(o="."),o&&a&&(o+="\\"),r&&(n=f(n)),n+(i?"\\":"")+o},u.isAbsolute=function(t){return p(t).isAbsolute},u.join=function(){for(var t=[],e=0;e<arguments.length;e++){var n=arguments[e];if(!o.isString(n))throw new TypeError("Arguments to path.join must be strings");n&&t.push(n)}var r=t.join("\\");return/^[\\\/]{2}[^\\\/]/.test(t[0])||(r=r.replace(/^[\\\/]{2,}/,"\\")),u.normalize(r)},u.relative=function(t,e){t=u.resolve(t),e=u.resolve(e);for(var n=t.toLowerCase(),r=e.toLowerCase(),i=a(e.split("\\")),o=a(n.split("\\")),s=a(r.split("\\")),c=Math.min(o.length,s.length),l=c,h=0;h<c;h++)if(o[h]!==s[h]){l=h;break}if(0==l)return e;var p=[];for(h=l;h<o.length;h++)p.push("..");return(p=p.concat(i.slice(l))).join("\\")},u._makeLong=function(t){if(!o.isString(t))return t;if(!t)return"";var e=u.resolve(t);return/^[a-zA-Z]\:\\/.test(e)?"\\\\?\\"+e:/^\\\\[^?.]/.test(e)?"\\\\?\\UNC\\"+e.substring(2):t},u.dirname=function(t){var e=h(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},u.basename=function(t,e){var n=h(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},u.extname=function(t){return h(t)[3]},u.format=function(t){if(!o.isObject(t))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof t);var e=t.root||"";if(!o.isString(e))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof t.root);var n=t.dir,r=t.base||"";return n?n[n.length-1]===u.sep?n+r:n+u.sep+r:r},u.parse=function(t){if(!o.isString(t))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e=h(t);if(!e||4!==e.length)throw new TypeError("Invalid path '"+t+"'");return{root:e[0],dir:e[0]+e[1].slice(0,-1),base:e[2],ext:e[3],name:e[2].slice(0,e[2].length-e[3].length)}},u.sep="\\",u.delimiter=";";var d=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,g={};function m(t){return d.exec(t).slice(1)}g.resolve=function(){for(var t="",e=!1,n=arguments.length-1;n>=-1&&!e;n--){var i=n>=0?arguments[n]:r.cwd();if(!o.isString(i))throw new TypeError("Arguments to path.resolve must be strings");i&&(t=i+"/"+t,e="/"===i[0])}return(e?"/":"")+(t=s(t.split("/"),!e).join("/"))||"."},g.normalize=function(t){var e=g.isAbsolute(t),n=t&&"/"===t[t.length-1];return(t=s(t.split("/"),!e).join("/"))||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t},g.isAbsolute=function(t){return"/"===t.charAt(0)},g.join=function(){for(var t="",e=0;e<arguments.length;e++){var n=arguments[e];if(!o.isString(n))throw new TypeError("Arguments to path.join must be strings");n&&(t+=t?"/"+n:n)}return g.normalize(t)},g.relative=function(t,e){t=g.resolve(t).substr(1),e=g.resolve(e).substr(1);for(var n=a(t.split("/")),r=a(e.split("/")),i=Math.min(n.length,r.length),o=i,s=0;s<i;s++)if(n[s]!==r[s]){o=s;break}var c=[];for(s=o;s<n.length;s++)c.push("..");return(c=c.concat(r.slice(o))).join("/")},g._makeLong=function(t){return t},g.dirname=function(t){var e=m(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},g.basename=function(t,e){var n=m(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},g.extname=function(t){return m(t)[3]},g.format=function(t){if(!o.isObject(t))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof t);var e=t.root||"";if(!o.isString(e))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof t.root);return(t.dir?t.dir+g.sep:"")+(t.base||"")},g.parse=function(t){if(!o.isString(t))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e=m(t);if(!e||4!==e.length)throw new TypeError("Invalid path '"+t+"'");return e[1]=e[1]||"",e[2]=e[2]||"",e[3]=e[3]||"",{root:e[0],dir:e[0]+e[1].slice(0,-1),base:e[2],ext:e[3],name:e[2].slice(0,e[2].length-e[3].length)}},g.sep="/",g.delimiter=":",t.exports=i?u:g,t.exports.posix=g,t.exports.win32=u},11895:function(t){t.exports=function(t,e,n,r){var i=t[0],o=t[1],s=!1;void 0===n&&(n=0),void 0===r&&(r=e.length);for(var a=(r-n)/2,c=0,l=a-1;c<a;l=c++){var u=e[n+2*c+0],h=e[n+2*c+1],p=e[n+2*l+0],f=e[n+2*l+1];h>o!=f>o&&i<(p-u)*(o-h)/(f-h)+u&&(s=!s)}return s}},26960:function(t,e,n){var r=n(11895),i=n(88139);t.exports=function(t,e,n,o){return e.length>0&&Array.isArray(e[0])?i(t,e,n,o):r(t,e,n,o)},t.exports.nested=i,t.exports.flat=r},88139:function(t){t.exports=function(t,e,n,r){var i=t[0],o=t[1],s=!1;void 0===n&&(n=0),void 0===r&&(r=e.length);for(var a=r-n,c=0,l=a-1;c<a;l=c++){var u=e[c+n][0],h=e[c+n][1],p=e[l+n][0],f=e[l+n][1];h>o!=f>o&&i<(p-u)*(o-h)/(f-h)+u&&(s=!s)}return s}},32676:function(t,e,n){var r=n(34155);t.exports=function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}var i=function(){function t(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null}return t}();function o(t,e){return t>e?1:t<e?-1:0}function s(t,e,n){for(var r=new i(null,null),o=r,s=r;;){var a=n(t,e.key);if(a<0){if(null===e.left)break;if(n(t,e.left.key)<0){var c=e.left;if(e.left=c.right,c.right=e,null===(e=c).left)break}s.left=e,s=e,e=e.left}else{if(!(a>0))break;if(null===e.right)break;if(n(t,e.right.key)>0&&(c=e.right,e.right=c.left,c.left=e,null===(e=c).right))break;o.right=e,o=e,e=e.right}}return o.right=e.left,s.left=e.right,e.left=r.right,e.right=r.left,e}function a(t,e,n,r){var o=new i(t,e);if(null===n)return o.left=o.right=null,o;var a=r(t,(n=s(t,n,r)).key);return a<0?(o.left=n.left,o.right=n,n.left=null):a>=0&&(o.right=n.right,o.left=n,n.right=null),o}function c(t,e,n){var r=null,i=null;if(e){var o=n((e=s(t,e,n)).key,t);0===o?(r=e.left,i=e.right):o<0?(i=e.right,e.right=null,r=e):(r=e.left,e.left=null,i=e)}return{left:r,right:i}}function l(t,e,n){return null===e?t:(null===t||((e=s(t.key,e,n)).left=t),e)}function u(t,e,n,r,i){if(t){r(e+(n?"└── ":"├── ")+i(t)+"\n");var o=e+(n?"    ":"│   ");t.left&&u(t.left,o,!1,r,i),t.right&&u(t.right,o,!0,r,i)}}var h=function(){function t(t){void 0===t&&(t=o),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=a(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var n=new i(t,e);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var r=this._comparator,o=s(t,this._root,r),a=r(t,o.key);return 0===a?this._root=o:(a<0?(n.left=o.left,n.right=o,o.left=null):a>0&&(n.right=o.right,n.left=o,o.right=null),this._size++,this._root=n),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,n){var r;return null===e?null:0===n(t,(e=s(t,e,n)).key)?(null===e.left?r=e.right:(r=s(t,e.left,n)).right=e.right,this._size--,r):e},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=s(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return e;e=r<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=s(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return!0;e=r<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var n=this._root,r=[],i=!1;!i;)null!==n?(r.push(n),n=n.left):0!==r.length?(n=r.pop(),t.call(e,n),n=n.right):i=!0;return this},t.prototype.range=function(t,e,n,r){for(var i=[],o=this._comparator,s=this._root;0!==i.length||s;)if(s)i.push(s),s=s.left;else{if(o((s=i.pop()).key,e)>0)break;if(o(s.key,t)>=0&&n.call(r,s))return this;s=s.right}return this},t.prototype.keys=function(){var t=[];return this.forEach((function(e){var n=e.key;return t.push(n)})),t},t.prototype.values=function(){var t=[];return this.forEach((function(e){var n=e.data;return t.push(n)})),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,n=!1,r=0,i=[];!n;)if(e)i.push(e),e=e.left;else if(i.length>0){if(e=i.pop(),r===t)return e;r++,e=e.right}else n=!0;return null},t.prototype.next=function(t){var e=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?(n=e,e=e.left):e=e.right}return n},t.prototype.prev=function(t){var e=this._root,n=null;if(null!==t.left){for(n=t.left;n.right;)n=n.right;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?e=e.left:(n=e,e=e.right)}return n},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return d(this._root)},t.prototype.load=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1);var r=t.length,i=this._comparator;if(n&&y(t,e,0,r-1,i),null===this._root)this._root=p(t,e,0,r),this._size=r;else{var o=m(this.toList(),f(t,e),i);r=this._size+r,this._root=g({head:o},0,r)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return u(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},t.prototype.update=function(t,e,n){var r=this._comparator,i=c(t,this._root,r),o=i.left,s=i.right;r(t,e)<0?s=a(e,n,s,r):o=a(e,n,o,r),this._root=l(o,s,r)},t.prototype.split=function(t){return c(t,this._root,this._comparator)},t}();function p(t,e,n,r){var o=r-n;if(o>0){var s=n+Math.floor(o/2),a=t[s],c=e[s],l=new i(a,c);return l.left=p(t,e,n,s),l.right=p(t,e,s+1,r),l}return null}function f(t,e){for(var n=new i(null,null),r=n,o=0;o<t.length;o++)r=r.next=new i(t[o],e[o]);return r.next=null,n.next}function d(t){for(var e=t,n=[],r=!1,o=new i(null,null),s=o;!r;)e?(n.push(e),e=e.left):n.length>0?e=(e=s=s.next=n.pop()).right:r=!0;return s.next=null,o.next}function g(t,e,n){var r=n-e;if(r>0){var i=e+Math.floor(r/2),o=g(t,e,i),s=t.head;return s.left=o,t.head=t.head.next,s.right=g(t,i+1,n),s}return null}function m(t,e,n){for(var r=new i(null,null),o=r,s=t,a=e;null!==s&&null!==a;)n(s.key,a.key)<0?(o.next=s,s=s.next):(o.next=a,a=a.next),o=o.next;return null!==s?o.next=s:null!==a&&(o.next=a),r.next}function y(t,e,n,r,i){if(!(n>=r)){for(var o=t[n+r>>1],s=n-1,a=r+1;;){do{s++}while(i(t[s],o)<0);do{a--}while(i(t[a],o)>0);if(s>=a)break;var c=t[s];t[s]=t[a],t[a]=c,c=e[s],e[s]=e[a],e[a]=c}y(t,e,n,a,i),y(t,e,a+1,r,i)}}var _=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},v=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,r=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:r,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},x=Number.EPSILON;void 0===x&&(x=Math.pow(2,-52));var b=x*x,w=function(t,e){if(-x<t&&t<x&&-x<e&&e<x)return 0;var n=t-e;return n*n<b*t*e?0:t<e?-1:1},E=function(){function e(){t(this,e),this.reset()}return n(e,[{key:"reset",value:function(){this.xRounder=new T,this.yRounder=new T}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),e}(),T=function(){function e(){t(this,e),this.tree=new h,this.round(0)}return n(e,[{key:"round",value:function(t){var e=this.tree.add(t),n=this.tree.prev(e);if(null!==n&&0===w(e.key,n.key))return this.tree.remove(t),n.key;var r=this.tree.next(e);return null!==r&&0===w(e.key,r.key)?(this.tree.remove(t),r.key):t}}]),e}(),S=new E,k=function(t,e){return t.x*e.y-t.y*e.x},A=function(t,e){return t.x*e.x+t.y*e.y},M=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y},o=k(r,i);return w(o,0)},I=function(t){return Math.sqrt(A(t,t))},C=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return k(i,r)/I(i)/I(r)},O=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return A(i,r)/I(i)/I(r)},P=function(t,e,n){return 0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},L=function(t,e,n){return 0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},D=function(t,e,n,r){if(0===e.x)return L(n,r,t.x);if(0===r.x)return L(t,e,n.x);if(0===e.y)return P(n,r,t.y);if(0===r.y)return P(t,e,n.y);var i=k(e,r);if(0==i)return null;var o={x:n.x-t.x,y:n.y-t.y},s=k(o,e)/i,a=k(o,r)/i;return{x:(t.x+a*e.x+(n.x+s*r.x))/2,y:(t.y+a*e.y+(n.y+s*r.y))/2}},R=function(){function e(n,r){t(this,e),void 0===n.events?n.events=[this]:n.events.push(this),this.point=n,this.isLeft=r}return n(e,null,[{key:"compare",value:function(t,n){var r=e.comparePoints(t.point,n.point);return 0!==r?r:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:j.compare(t.segment,n.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),n(e,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,n=0,r=e.length;n<r;n++){var i=e[n];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var r=e+1;r<t;r++){var i=this.point.events[r];void 0===i.consumedBy&&n.otherSE.point.events===i.otherSE.point.events&&n.segment.consume(i.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var r=this.point.events[e];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&t.push(r)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,n=new Map,r=function(r){var i=r.otherSE;n.set(r,{sine:C(e.point,t.point,i.point),cosine:O(e.point,t.point,i.point)})};return function(t,e){n.has(t)||r(t),n.has(e)||r(e);var i=n.get(t),o=i.sine,s=i.cosine,a=n.get(e),c=a.sine,l=a.cosine;return o>=0&&c>=0?s<l?1:s>l?-1:0:o<0&&c<0?s<l?-1:s>l?1:0:c<o?-1:c>o?1:0}}}]),e}(),N=0,j=function(){function e(n,r,i,o){t(this,e),this.id=++N,this.leftSE=n,n.segment=this,n.otherSE=r,this.rightSE=r,r.segment=this,r.otherSE=n,this.rings=i,this.windings=o}return n(e,null,[{key:"compare",value:function(t,e){var n=t.leftSE.point.x,r=e.leftSE.point.x,i=t.rightSE.point.x,o=e.rightSE.point.x;if(o<n)return 1;if(i<r)return-1;var s=t.leftSE.point.y,a=e.leftSE.point.y,c=t.rightSE.point.y,l=e.rightSE.point.y;if(n<r){if(a<s&&a<c)return 1;if(a>s&&a>c)return-1;var u=t.comparePoint(e.leftSE.point);if(u<0)return 1;if(u>0)return-1;var h=e.comparePoint(t.rightSE.point);return 0!==h?h:-1}if(n>r){if(s<a&&s<l)return-1;if(s>a&&s>l)return 1;var p=e.comparePoint(t.leftSE.point);if(0!==p)return p;var f=t.comparePoint(e.rightSE.point);return f<0?1:f>0?-1:1}if(s<a)return-1;if(s>a)return 1;if(i<o){var d=e.comparePoint(t.rightSE.point);if(0!==d)return d}if(i>o){var g=t.comparePoint(e.rightSE.point);if(g<0)return 1;if(g>0)return-1}if(i!==o){var m=c-s,y=i-n,_=l-a,v=o-r;if(m>y&&_<v)return 1;if(m<y&&_>v)return-1}return i>o?1:i<o||c<l?-1:c>l?1:t.id<e.id?-1:t.id>e.id?1:0}}]),n(e,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,n=this.rightSE.point,r=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;var i=(t.y-e.y)/r.y,o=e.x+i*r.x;if(t.x===o)return 0;var s=(t.x-e.x)/r.x,a=e.y+s*r.y;return t.y===a?0:t.y<a?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),r=v(e,n);if(null===r)return null;var i=this.leftSE.point,o=this.rightSE.point,s=t.leftSE.point,a=t.rightSE.point,c=_(e,s)&&0===this.comparePoint(s),l=_(n,i)&&0===t.comparePoint(i),u=_(e,a)&&0===this.comparePoint(a),h=_(n,o)&&0===t.comparePoint(o);if(l&&c)return h&&!u?o:!h&&u?a:null;if(l)return u&&i.x===a.x&&i.y===a.y?null:i;if(c)return h&&o.x===s.x&&o.y===s.y?null:s;if(h&&u)return null;if(h)return o;if(u)return a;var p=D(i,this.vector(),s,t.vector());return null===p?null:_(r,p)?S.round(p.x,p.y):null}},{key:"split",value:function(t){var n=[],r=void 0!==t.events,i=new R(t,!0),o=new R(t,!1),s=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var a=new e(i,s,this.rings.slice(),this.windings.slice());return R.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),R.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:"consume",value:function(t){for(var n=this,r=t;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var i=e.compare(n,r);if(0!==i){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var s=n;n=r,r=s}for(var a=0,c=r.rings.length;a<c;a++){var l=r.rings[a],u=r.windings[a],h=n.rings.indexOf(l);-1===h?(n.rings.push(l),n.windings.push(u)):n.windings[h]+=u}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var s=this.rings[i],a=this.windings[i],c=e.indexOf(s);-1===c?(e.push(s),n.push(a)):n[c]+=a}for(var l=[],u=[],h=0,p=e.length;h<p;h++)if(0!==n[h]){var f=e[h],d=f.poly;if(-1===u.indexOf(d))if(f.isExterior)l.push(d);else{-1===u.indexOf(d)&&u.push(d);var g=l.indexOf(f.poly);-1!==g&&l.splice(g,1)}}for(var m=0,y=l.length;m<y;m++){var _=l[m].multiPoly;-1===r.indexOf(_)&&r.push(_)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(H.type){case"union":var n=0===t.length,r=0===e.length;this._isInResult=n!==r;break;case"intersection":var i,o;t.length<e.length?(i=t.length,o=e.length):(i=e.length,o=t.length),this._isInResult=o===H.numMultiPolys&&i<o;break;case"xor":var s=Math.abs(t.length-e.length);this._isInResult=s%2==1;break;case"difference":var a=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=a(t)!==a(e);break;default:throw new Error("Unrecognized operation type found ".concat(H.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,n,r){var i,o,s,a=R.comparePoints(t,n);if(a<0)i=t,o=n,s=1;else{if(!(a>0))throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));i=n,o=t,s=-1}return new e(new R(i,!0),new R(o,!1),[r],[s])}}]),e}(),z=function(){function e(n,r,i){if(t(this,e),!Array.isArray(n)||0===n.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=i,this.segments=[],"number"!=typeof n[0][0]||"number"!=typeof n[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var o=S.round(n[0][0],n[0][1]);this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var s=o,a=1,c=n.length;a<c;a++){if("number"!=typeof n[a][0]||"number"!=typeof n[a][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var l=S.round(n[a][0],n[a][1]);l.x===s.x&&l.y===s.y||(this.segments.push(j.fromRing(s,l,this)),l.x<this.bbox.ll.x&&(this.bbox.ll.x=l.x),l.y<this.bbox.ll.y&&(this.bbox.ll.y=l.y),l.x>this.bbox.ur.x&&(this.bbox.ur.x=l.x),l.y>this.bbox.ur.y&&(this.bbox.ur.y=l.y),s=l)}o.x===s.x&&o.y===s.y||this.segments.push(j.fromRing(s,o,this))}return n(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}}]),e}(),B=function(){function e(n,r){if(t(this,e),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new z(n[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var i=1,o=n.length;i<o;i++){var s=new z(n[i],this,!1);s.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=s.bbox.ur.y),this.interiorRings.push(s)}this.multiPoly=r}return n(e,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var r=this.interiorRings[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),e}(),F=function(){function e(n,r){if(t(this,e),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof n[0][0][0]&&(n=[n])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var i=0,o=n.length;i<o;i++){var s=new B(n[i],this);s.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=s.bbox.ur.y),this.polys.push(s)}this.isSubject=r}return n(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var r=this.polys[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),e}(),U=function(){function e(n){t(this,e),this.events=n;for(var r=0,i=n.length;r<i;r++)n[r].segment.ringOut=this;this.poly=null}return n(e,null,[{key:"factory",value:function(t){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];if(o.isInResult()&&!o.ringOut){for(var s=null,a=o.leftSE,c=o.rightSE,l=[a],u=a.point,h=[];s=a,a=c,l.push(a),a.point!==u;)for(;;){var p=a.getAvailableLinkedEvents();if(0===p.length){var f=l[0].point,d=l[l.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(f.x,",")+" ".concat(f.y,"]. Last matching segment found ends at")+" [".concat(d.x,", ").concat(d.y,"]."))}if(1===p.length){c=p[0].otherSE;break}for(var g=null,m=0,y=h.length;m<y;m++)if(h[m].point===a.point){g=m;break}if(null===g){h.push({index:l.length,point:a.point});var _=a.getLeftmostComparator(s);c=p.sort(_)[0].otherSE;break}var v=h.splice(g)[0],x=l.splice(v.index);x.unshift(x[0].otherSE),n.push(new e(x.reverse()))}n.push(new e(l))}}return n}}]),n(e,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],n=1,r=this.events.length-1;n<r;n++){var i=this.events[n].point,o=this.events[n+1].point;0!==M(i,t,o)&&(e.push(i),t=i)}if(1===e.length)return null;var s=e[0],a=e[1];0===M(s,t,a)&&e.shift(),e.push(e[0]);for(var c=this.isExteriorRing()?1:-1,l=this.isExteriorRing()?0:e.length-1,u=this.isExteriorRing()?e.length:-1,h=[],p=l;p!=u;p+=c)h.push([e[p].x,e[p].y]);return h}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,n=this.events.length;e<n;e++){var r=this.events[e];R.compare(t,r)>0&&(t=r)}for(var i=t.segment.prevInResult(),o=i?i.prevInResult():null;;){if(!i)return null;if(!o)return i.ringOut;if(o.ringOut!==i.ringOut)return o.ringOut.enclosingRing()!==i.ringOut?i.ringOut:i.ringOut.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}]),e}(),V=function(){function e(n){t(this,e),this.exteriorRing=n,n.poly=this,this.interiorRings=[]}return n(e,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,n=this.interiorRings.length;e<n;e++){var r=this.interiorRings[e].getGeom();null!==r&&t.push(r)}return t}}]),e}(),q=function(){function e(n){t(this,e),this.rings=n,this.polys=this._composePolys(n)}return n(e,[{key:"getGeom",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var r=this.polys[e].getGeom();null!==r&&t.push(r)}return t}},{key:"_composePolys",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];if(!i.poly)if(i.isExteriorRing())e.push(new V(i));else{var o=i.enclosingRing();o.poly||e.push(new V(o)),o.poly.addInterior(i)}}return e}}]),e}(),W=function(){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j.compare;t(this,e),this.queue=n,this.tree=new h(r),this.segments=[]}return n(e,[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;var r=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!r)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var i=r,o=r,s=void 0,a=void 0;void 0===s;)null===(i=this.tree.prev(i))?s=null:void 0===i.key.consumedBy&&(s=i.key);for(;void 0===a;)null===(o=this.tree.next(o))?a=null:void 0===o.key.consumedBy&&(a=o.key);if(t.isLeft){var c=null;if(s){var l=s.getIntersection(e);if(null!==l&&(e.isAnEndpoint(l)||(c=l),!s.isAnEndpoint(l)))for(var u=this._splitSafely(s,l),h=0,p=u.length;h<p;h++)n.push(u[h])}var f=null;if(a){var d=a.getIntersection(e);if(null!==d&&(e.isAnEndpoint(d)||(f=d),!a.isAnEndpoint(d)))for(var g=this._splitSafely(a,d),m=0,y=g.length;m<y;m++)n.push(g[m])}if(null!==c||null!==f){var _=null;_=null===c?f:null===f||R.comparePoints(c,f)<=0?c:f,this.queue.remove(e.rightSE),n.push(e.rightSE);for(var v=e.split(_),x=0,b=v.length;x<b;x++)n.push(v[x])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=s)}else{if(s&&a){var w=s.getIntersection(a);if(null!==w){if(!s.isAnEndpoint(w))for(var E=this._splitSafely(s,w),T=0,S=E.length;T<S;T++)n.push(E[T]);if(!a.isAnEndpoint(w))for(var k=this._splitSafely(a,w),A=0,M=k.length;A<M;A++)n.push(k[A])}}this.tree.remove(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var n=t.rightSE;this.queue.remove(n);var r=t.split(e);return r.push(n),void 0===t.consumedBy&&this.tree.insert(t),r}}]),e}(),G=void 0!==r&&r.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,$=void 0!==r&&r.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,H=new(function(){function e(){t(this,e)}return n(e,[{key:"run",value:function(t,e,n){H.type=t,S.reset();for(var r=[new F(e,!0)],i=0,o=n.length;i<o;i++)r.push(new F(n[i],!1));if(H.numMultiPolys=r.length,"difference"===H.type)for(var s=r[0],a=1;a<r.length;)null!==v(r[a].bbox,s.bbox)?a++:r.splice(a,1);if("intersection"===H.type)for(var c=0,l=r.length;c<l;c++)for(var u=r[c],p=c+1,f=r.length;p<f;p++)if(null===v(u.bbox,r[p].bbox))return[];for(var d=new h(R.compare),g=0,m=r.length;g<m;g++)for(var y=r[g].getSweepEvents(),_=0,x=y.length;_<x;_++)if(d.insert(y[_]),d.size>G)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var b=new W(d),w=d.size,E=d.pop();E;){var T=E.key;if(d.size===w){var k=T.segment;throw new Error("Unable to pop() ".concat(T.isLeft?"left":"right"," SweepEvent ")+"[".concat(T.point.x,", ").concat(T.point.y,"] from segment #").concat(k.id," ")+"[".concat(k.leftSE.point.x,", ").concat(k.leftSE.point.y,"] -> ")+"[".concat(k.rightSE.point.x,", ").concat(k.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(d.size>G)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(b.segments.length>$)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var A=b.process(T),M=0,I=A.length;M<I;M++){var C=A[M];void 0===C.consumedBy&&d.insert(C)}w=d.size,E=d.pop()}S.reset();var O=U.factory(b.segments);return new q(O).getGeom()}}]),e}()),Z=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return H.run("union",t,n)},Y=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return H.run("intersection",t,n)},X=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return H.run("xor",t,n)},K=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return H.run("difference",t,n)};return{union:Z,intersection:Y,xor:X,difference:K}}()},34155:function(t){var e,n,r=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:i}catch(t){e=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var a,c=[],l=!1,u=-1;function h(){l&&a&&(l=!1,a.length?c=a.concat(c):u=-1,c.length&&p())}function p(){if(!l){var t=s(h);l=!0;for(var e=c.length;e;){for(a=c,c=[];++u<e;)a&&a[u].run();u=-1,e=c.length}a=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{return n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function d(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new f(t,e)),1!==c.length||l||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=d,r.addListener=d,r.once=d,r.off=d,r.removeListener=d,r.removeAllListeners=d,r.emit=d,r.prependListener=d,r.prependOnceListener=d,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},57129:function(t,e){"use strict";var n=Object.prototype.hasOwnProperty;function r(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(t){return null}}function i(t){try{return encodeURIComponent(t)}catch(t){return null}}e.stringify=function(t,e){e=e||"";var r,o,s=[];for(o in"string"!=typeof e&&(e="?"),t)if(n.call(t,o)){if((r=t[o])||null!=r&&!isNaN(r)||(r=""),o=i(o),r=i(r),null===o||null===r)continue;s.push(o+"="+r)}return s.length?e+s.join("&"):""},e.parse=function(t){for(var e,n=/([^=?#&]+)=?([^&]*)/g,i={};e=n.exec(t);){var o=r(e[1]),s=r(e[2]);null===o||null===s||o in i||(i[o]=s)}return i}},65510:function(t,e,n){"use strict";t.exports=i,t.exports.default=i;var r=n(84291);function i(t,e){if(!(this instanceof i))return new i(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function o(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function s(t,e){a(t,0,t.children.length,e,t)}function a(t,e,n,r,i){i||(i=g(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],c(i,t.leaf?r(o):o);return i}function c(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function d(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(t,e,n,i,o){for(var s,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=i||(s=e+Math.ceil((n-e)/i/2)*i,r(t,s,e,n,o),a.push(e,s,s,n))}i.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!d(t,e))return n;for(var i,o,s,a,c=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],d(t,a=e.leaf?r(s):s)&&(e.leaf?n.push(s):f(t,a)?this._all(s,n):c.push(s));e=c.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!d(t,e))return!1;for(var r,i,o,s,a=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],d(t,s=e.leaf?n(o):o)){if(e.leaf||f(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,s,a=this.data,c=this.toBBox(t),l=[],u=[];a||l.length;){if(a||(a=l.pop(),r=l[l.length-1],n=u.pop(),s=!0),a.leaf&&-1!==(i=o(t,a.children,e)))return a.children.splice(i,1),l.push(a),this._condense(l),this;s||a.leaf||!f(a,c)?r?(n++,a=r.children[n],s=!1):a=null:(l.push(a),u.push(n),n=0,r=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:l,compareMinY:u,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,a=this._maxEntries;if(o<=a)return s(i=g(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(i=g([])).leaf=!1,i.height=r;var c,l,u,h,p=Math.ceil(o/a),f=p*Math.ceil(Math.sqrt(a));for(m(t,e,n,f,this.compareMinX),c=e;c<=n;c+=f)for(m(t,c,u=Math.min(c+f-1,n),p,this.compareMinY),l=c;l<=u;l+=p)h=Math.min(l+p-1,u),i.children.push(this._build(t,l,h,r-1));return s(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,s,a,c,l,u,p,f,d;r.push(e),!e.leaf&&r.length-1!==n;){for(u=p=1/0,i=0,o=e.children.length;i<o;i++)c=h(s=e.children[i]),f=t,d=s,(l=(Math.max(d.maxX,f.maxX)-Math.min(d.minX,f.minX))*(Math.max(d.maxY,f.maxY)-Math.min(d.minY,f.minY))-c)<p?(p=l,u=c<u?c:u,a=s):l===p&&c<u&&(u=c,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],s=this._chooseSubtree(i,this.data,e,o);for(s.children.push(t),c(s,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),a=g(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,s(n,this.toBBox),s(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,s,c,l,u,p,f,d,g,m,y,_;for(l=u=1/0,r=e;r<=n-e;r++)i=a(t,0,r,this.toBBox),o=a(t,r,n,this.toBBox),f=i,d=o,g=void 0,m=void 0,y=void 0,_=void 0,g=Math.max(f.minX,d.minX),m=Math.max(f.minY,d.minY),y=Math.min(f.maxX,d.maxX),_=Math.min(f.maxY,d.maxY),s=Math.max(0,y-g)*Math.max(0,_-m),c=h(i)+h(o),s<l?(l=s,p=r,u=c<u?c:u):s===l&&c<u&&(u=c,p=r);return p},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:l,i=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,s=this.toBBox,l=a(t,0,e,s),u=a(t,n-e,n,s),h=p(l)+p(u);for(i=e;i<n-e;i++)o=t.children[i],c(l,t.leaf?s(o):o),h+=p(l);for(i=n-e-1;i>=e;i--)o=t.children[i],c(u,t.leaf?s(o):o),h+=p(u);return h},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)c(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():s(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},84291:function(t){t.exports=function(){"use strict";function t(t,n,i,o,s){e(t,n,i||0,o||t.length-1,s||r)}function e(t,r,i,o,s){for(;o>i;){if(o-i>600){var a=o-i+1,c=r-i+1,l=Math.log(a),u=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*u*(a-u)/a)*(c-a/2<0?-1:1);e(t,r,Math.max(i,Math.floor(r-c*u/a+h)),Math.min(o,Math.floor(r+(a-c)*u/a+h)),s)}var p=t[r],f=i,d=o;for(n(t,i,r),s(t[o],p)>0&&n(t,i,o);f<d;){for(n(t,f,d),f++,d--;s(t[f],p)<0;)f++;for(;s(t[d],p)>0;)d--}0===s(t[i],p)?n(t,i,d):n(t,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}function n(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function r(t,e){return t<e?-1:t>e?1:0}return t}()},53697:function(t,e,n){"use strict";var r=n(58052),i=Object,o=TypeError;t.exports=r((function(){if(null!=this&&this!==i(this))throw new o("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.unicodeSets&&(t+="v"),this.sticky&&(t+="y"),t}),"get flags",!0)},2847:function(t,e,n){"use strict";var r=n(4289),i=n(55559),o=n(53697),s=n(71721),a=n(32753),c=i(s());r(c,{getPolyfill:s,implementation:o,shim:a}),t.exports=c},71721:function(t,e,n){"use strict";var r=n(53697),i=n(4289).supportsDescriptors,o=Object.getOwnPropertyDescriptor;t.exports=function(){if(i&&"gim"===/a/gim.flags){var t=o(RegExp.prototype,"flags");if(t&&"function"==typeof t.get&&"boolean"==typeof RegExp.prototype.dotAll&&"boolean"==typeof RegExp.prototype.hasIndices){var e="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){e+="d"}}),Object.defineProperty(n,"sticky",{get:function(){e+="y"}}),"dy"===e)return t.get}}return r}},32753:function(t,e,n){"use strict";var r=n(4289).supportsDescriptors,i=n(71721),o=Object.getOwnPropertyDescriptor,s=Object.defineProperty,a=TypeError,c=Object.getPrototypeOf,l=/a/;t.exports=function(){if(!r||!c)throw new a("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=i(),e=c(l),n=o(e,"flags");return n&&n.get===t||s(e,"flags",{configurable:!0,enumerable:!1,get:t}),t}},47418:function(t){"use strict";t.exports=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},88639:function(t,e){!function(t){"use strict";const e=134217729,n=33306690738754706e-32;function r(t,e,n,r,i){let o,s,a,c,l=e[0],u=r[0],h=0,p=0;u>l==u>-l?(o=l,l=e[++h]):(o=u,u=r[++p]);let f=0;if(h<t&&p<n)for(u>l==u>-l?(a=o-((s=l+o)-l),l=e[++h]):(a=o-((s=u+o)-u),u=r[++p]),o=s,0!==a&&(i[f++]=a);h<t&&p<n;)u>l==u>-l?(a=o-((s=o+l)-(c=s-o))+(l-c),l=e[++h]):(a=o-((s=o+u)-(c=s-o))+(u-c),u=r[++p]),o=s,0!==a&&(i[f++]=a);for(;h<t;)a=o-((s=o+l)-(c=s-o))+(l-c),l=e[++h],o=s,0!==a&&(i[f++]=a);for(;p<n;)a=o-((s=o+u)-(c=s-o))+(u-c),u=r[++p],o=s,0!==a&&(i[f++]=a);return 0===o&&0!==f||(i[f++]=o),f}function i(t){return new Float64Array(t)}const o=33306690738754716e-32,s=22204460492503146e-32,a=11093356479670487e-47,c=i(4),l=i(8),u=i(12),h=i(16),p=i(4);t.orient2d=function(t,i,f,d,g,m){const y=(i-m)*(f-g),_=(t-g)*(d-m),v=y-_;if(0===y||0===_||y>0!=_>0)return v;const x=Math.abs(y+_);return Math.abs(v)>=o*x?v:-function(t,i,o,f,d,g,m){let y,_,v,x,b,w,E,T,S,k,A,M,I,C,O,P,L,D;const R=t-d,N=o-d,j=i-g,z=f-g;b=(O=(T=R-(E=(w=e*R)-(w-R)))*(k=z-(S=(w=e*z)-(w-z)))-((C=R*z)-E*S-T*S-E*k))-(A=O-(L=(T=j-(E=(w=e*j)-(w-j)))*(k=N-(S=(w=e*N)-(w-N)))-((P=j*N)-E*S-T*S-E*k))),c[0]=O-(A+b)+(b-L),b=(I=C-((M=C+A)-(b=M-C))+(A-b))-(A=I-P),c[1]=I-(A+b)+(b-P),b=(D=M+A)-M,c[2]=M-(D-b)+(A-b),c[3]=D;let B=function(t,e){let n=e[0];for(let r=1;r<t;r++)n+=e[r];return n}(4,c),F=s*m;if(B>=F||-B>=F)return B;if(y=t-(R+(b=t-R))+(b-d),v=o-(N+(b=o-N))+(b-d),_=i-(j+(b=i-j))+(b-g),x=f-(z+(b=f-z))+(b-g),0===y&&0===_&&0===v&&0===x)return B;if(F=a*m+n*Math.abs(B),(B+=R*x+z*y-(j*v+N*_))>=F||-B>=F)return B;b=(O=(T=y-(E=(w=e*y)-(w-y)))*(k=z-(S=(w=e*z)-(w-z)))-((C=y*z)-E*S-T*S-E*k))-(A=O-(L=(T=_-(E=(w=e*_)-(w-_)))*(k=N-(S=(w=e*N)-(w-N)))-((P=_*N)-E*S-T*S-E*k))),p[0]=O-(A+b)+(b-L),b=(I=C-((M=C+A)-(b=M-C))+(A-b))-(A=I-P),p[1]=I-(A+b)+(b-P),b=(D=M+A)-M,p[2]=M-(D-b)+(A-b),p[3]=D;const U=r(4,c,4,p,l);b=(O=(T=R-(E=(w=e*R)-(w-R)))*(k=x-(S=(w=e*x)-(w-x)))-((C=R*x)-E*S-T*S-E*k))-(A=O-(L=(T=j-(E=(w=e*j)-(w-j)))*(k=v-(S=(w=e*v)-(w-v)))-((P=j*v)-E*S-T*S-E*k))),p[0]=O-(A+b)+(b-L),b=(I=C-((M=C+A)-(b=M-C))+(A-b))-(A=I-P),p[1]=I-(A+b)+(b-P),b=(D=M+A)-M,p[2]=M-(D-b)+(A-b),p[3]=D;const V=r(U,l,4,p,u);b=(O=(T=y-(E=(w=e*y)-(w-y)))*(k=x-(S=(w=e*x)-(w-x)))-((C=y*x)-E*S-T*S-E*k))-(A=O-(L=(T=_-(E=(w=e*_)-(w-_)))*(k=v-(S=(w=e*v)-(w-v)))-((P=_*v)-E*S-T*S-E*k))),p[0]=O-(A+b)+(b-L),b=(I=C-((M=C+A)-(b=M-C))+(A-b))-(A=I-P),p[1]=I-(A+b)+(b-P),b=(D=M+A)-M,p[2]=M-(D-b)+(A-b),p[3]=D;const q=r(V,u,4,p,h);return h[q-1]}(t,i,f,d,g,m,x)},t.orient2dfast=function(t,e,n,r,i,o){return(e-o)*(n-i)-(t-i)*(r-o)},Object.defineProperty(t,"__esModule",{value:!0})}(e)},58052:function(t,e,n){"use strict";var r=n(12296),i=n(31044)(),o=n(25972).functionsHaveConfigurableNames(),s=TypeError;t.exports=function(t,e){if("function"!=typeof t)throw new s("`fn` is not a function");return arguments.length>2&&!!arguments[2]&&!o||(i?r(t,"name",e,!0,!0):r(t,"name",e)),t}},86851:function(t,e,n){"use strict";var r=n(89594),i=Array.prototype.concat,o=Array.prototype.slice,s=t.exports=function(t){for(var e=[],n=0,s=t.length;n<s;n++){var a=t[n];r(a)?e=i.call(e,o.call(a)):e.push(a)}return e};s.wrap=function(t){return function(){return t(s(arguments))}}},89594:function(t){t.exports=function(t){return!(!t||"string"==typeof t)&&(t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&"String"!==t.constructor.name))}},85697:function(t){"use strict";t.exports={eudist:function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++){var s=(t[o]||0)-(e[o]||0);i+=s*s}return n?Math.sqrt(i):i},mandist:function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++)i+=Math.abs((t[o]||0)-(e[o]||0));return n?Math.sqrt(i):i},dist:function(t,e,n){var r=Math.abs(t-e);return n?r:r*r}}},97035:function(t,e,n){"use strict";var r=n(85697),i=r.eudist,o=r.dist;t.exports={kmrand:function(t,e){for(var n={},r=[],i=e<<2,o=t.length,s=t[0].length>0;r.length<e&&i-- >0;){var a=t[Math.floor(Math.random()*o)],c=s?a.join("_"):""+a;n[c]||(n[c]=!0,r.push(a))}if(r.length<e)throw new Error("Error initializating clusters");return r},kmpp:function(t,e){var n=t[0].length?i:o,r=[],s=t.length,a=t[0].length>0,c=t[Math.floor(Math.random()*s)];a&&c.join("_");for(r.push(c);r.length<e;){for(var l=[],u=r.length,h=0,p=[],f=0;f<s;f++){for(var d=1/0,g=0;g<u;g++){var m=n(t[f],r[g]);m<=d&&(d=m)}l[f]=d}for(var y=0;y<s;y++)h+=l[y];for(var _=0;_<s;_++)p[_]={i:_,v:t[_],pr:l[_]/h,cs:0};p.sort((function(t,e){return t.pr-e.pr})),p[0].cs=p[0].pr;for(var v=1;v<s;v++)p[v].cs=p[v-1].cs+p[v].pr;for(var x=Math.random(),b=0;b<s-1&&p[b++].cs<x;);r.push(p[b-1].v)}return r}}},21160:function(t,e,n){"use strict";var r=n(85697),i=n(97035),o=r.eudist,s=(r.mandist,r.dist,i.kmrand),a=i.kmpp;function c(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}t.exports=function(t,e,n,r){var i=[],l=[],u=[],h=[],p=!1,f=r||1e4,d=t.length,g=t[0].length,m=g>0,y=[];if(n)i="kmrand"==n?s(t,e):"kmpp"==n?a(t,e):n;else for(var _={};i.length<e;){var v=Math.floor(Math.random()*d);_[v]||(_[v]=!0,i.push(t[v]))}do{c(e,0,y);for(var x=0;x<d;x++){for(var b=1/0,w=0,E=0;E<e;E++){(h=m?o(t[x],i[E]):Math.abs(t[x]-i[E]))<=b&&(b=h,w=E)}u[x]=w,y[w]++}for(var T=[],S=(l=[],0);S<e;S++)T[S]=m?c(g,0,T[S]):0,l[S]=i[S];if(m){for(var k=0;k<e;k++)i[k]=[];for(var A=0;A<d;A++)for(var M=T[u[A]],I=t[A],C=0;C<g;C++)M[C]+=I[C];p=!0;for(var O=0;O<e;O++){for(var P=i[O],L=T[O],D=l[O],R=y[O],N=0;N<g;N++)P[N]=L[N]/R||0;if(p)for(var j=0;j<g;j++)if(D[j]!=P[j]){p=!1;break}}}else{for(var z=0;z<d;z++){T[u[z]]+=t[z]}for(var B=0;B<e;B++)i[B]=T[B]/y[B]||0;p=!0;for(var F=0;F<e;F++)if(l[F]!=i[F]){p=!1;break}}p=p||--f<=0}while(!p);return{it:1e4-f,k:e,idxs:u,centroids:i}}},28e3:function(t,e,n){"use strict";var r=n(87581);t.exports=n(93626)(r),"_sockjs_onload"in n.g&&setTimeout(n.g._sockjs_onload,1)},12530:function(t,e,n){"use strict";var r=n(35717),i=n(20685);function o(){i.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}r(o,i),t.exports=o},63212:function(t,e,n){"use strict";var r=n(35717),i=n(53184);function o(){i.call(this)}r(o,i),o.prototype.removeAllListeners=function(t){t?delete this._listeners[t]:this._listeners={}},o.prototype.once=function(t,e){var n=this,r=!1;this.on(t,(function i(){n.removeListener(t,i),r||(r=!0,e.apply(this,arguments))}))},o.prototype.emit=function(){var t=arguments[0],e=this._listeners[t];if(e){for(var n=arguments.length,r=new Array(n-1),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=0;o<e.length;o++)e[o].apply(this,r)}},o.prototype.on=o.prototype.addListener=i.prototype.addEventListener,o.prototype.removeListener=i.prototype.removeEventListener,t.exports.v=o},20685:function(t){"use strict";function e(t){this.type=t}e.prototype.initEvent=function(t,e,n){return this.type=t,this.bubbles=e,this.cancelable=n,this.timeStamp=+new Date,this},e.prototype.stopPropagation=function(){},e.prototype.preventDefault=function(){},e.CAPTURING_PHASE=1,e.AT_TARGET=2,e.BUBBLING_PHASE=3,t.exports=e},53184:function(t){"use strict";function e(){this._listeners={}}e.prototype.addEventListener=function(t,e){t in this._listeners||(this._listeners[t]=[]);var n=this._listeners[t];-1===n.indexOf(e)&&(n=n.concat([e])),this._listeners[t]=n},e.prototype.removeEventListener=function(t,e){var n=this._listeners[t];if(n){var r=n.indexOf(e);-1===r||(n.length>1?this._listeners[t]=n.slice(0,r).concat(n.slice(r+1)):delete this._listeners[t])}},e.prototype.dispatchEvent=function(){var t=arguments[0],e=t.type,n=1===arguments.length?[t]:Array.apply(null,arguments);if(this["on"+e]&&this["on"+e].apply(this,n),e in this._listeners)for(var r=this._listeners[e],i=0;i<r.length;i++)r[i].apply(this,n)},t.exports=e},13326:function(t,e,n){"use strict";var r=n(35717),i=n(20685);function o(t){i.call(this),this.initEvent("message",!1,!1),this.data=t}r(o,i),t.exports=o},80691:function(t,e,n){"use strict";var r=n(3683);function i(t){this._transport=t,t.on("message",this._transportMessage.bind(this)),t.on("close",this._transportClose.bind(this))}i.prototype._transportClose=function(t,e){r.postMessage("c",JSON.stringify([t,e]))},i.prototype._transportMessage=function(t){r.postMessage("t",t)},i.prototype._send=function(t){this._transport.send(t)},i.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},t.exports=i},80551:function(t,e,n){"use strict";var r=n(70273),i=n(97705),o=n(80691),s=n(16311),a=n(3683),c=n(47486);t.exports=function(t,e){var n,l={};e.forEach((function(t){t.facadeTransport&&(l[t.facadeTransport.transportName]=t.facadeTransport)})),l[s.transportName]=s,t.bootstrap_iframe=function(){var e;a.currentWindowId=c.hash.slice(1);i.attachEvent("message",(function(i){if(i.source===parent&&(void 0===n&&(n=i.origin),i.origin===n)){var s;try{s=JSON.parse(i.data)}catch(t){return void i.data}if(s.windowId===a.currentWindowId)switch(s.type){case"s":var u;try{u=JSON.parse(s.data)}catch(t){s.data;break}var h=u[0],p=u[1],f=u[2],d=u[3];if(h!==t.version)throw new Error('Incompatible SockJS! Main site uses: "'+h+'", the iframe: "'+t.version+'".');if(!r.isOriginEqual(f,c.href)||!r.isOriginEqual(d,c.href))throw new Error("Can't connect to different domain from within an iframe. ("+c.href+", "+f+", "+d+")");e=new o(new l[p](f,d));break;case"m":e._send(s.data);break;case"c":e&&e._close(),e=null}}})),a.postMessage("s")}}},32550:function(t,e,n){"use strict";var r=n(63212).v,i=n(35717),o=n(72217);function s(t,e){r.call(this);var n=this,i=+new Date;this.xo=new e("GET",t),this.xo.once("finish",(function(t,e){var r,s;if(200===t){if(s=+new Date-i,e)try{r=JSON.parse(e)}catch(t){}o.isObject(r)||(r={})}n.emit("finish",r,s),n.removeAllListeners()}))}i(s,r),s.prototype.close=function(){this.removeAllListeners(),this.xo.close()},t.exports=s},16311:function(t,e,n){"use strict";var r=n(35717),i=n(63212).v,o=n(43515),s=n(32550);function a(t){var e=this;i.call(this),this.ir=new s(t,o),this.ir.once("finish",(function(t,n){e.ir=null,e.emit("message",JSON.stringify([t,n]))}))}r(a,i),a.transportName="iframe-info-receiver",a.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},t.exports=a},93616:function(t,e,n){"use strict";var r=n(63212).v,i=n(35717),o=n(97705),s=n(55088),a=n(16311);function c(t,e){var i=this;r.call(this);var c=function(){var n=i.ifr=new s(a.transportName,e,t);n.once("message",(function(t){if(t){var e;try{e=JSON.parse(t)}catch(t){return i.emit("finish"),void i.close()}var n=e[0],r=e[1];i.emit("finish",n,r)}i.close()})),n.once("close",(function(){i.emit("finish"),i.close()}))};n.g.document.body?c():o.attachEvent("load",c)}i(c,r),c.enabled=function(){return s.enabled()},c.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},t.exports=c},85172:function(t,e,n){"use strict";var r=n(63212).v,i=n(35717),o=n(70273),s=n(56073),a=n(79033),c=n(43515),l=n(57103),u=n(93616),h=n(32550);function p(t,e){var n=this;r.call(this),setTimeout((function(){n.doXhr(t,e)}),0)}i(p,r),p._getReceiver=function(t,e,n){return n.sameOrigin?new h(e,c):a.enabled?new h(e,a):s.enabled&&n.sameScheme?new h(e,s):u.enabled()?new u(t,e):new h(e,l)},p.prototype.doXhr=function(t,e){var n=this,r=o.addPath(t,"/info");this.xo=p._getReceiver(t,r,e),this.timeoutRef=setTimeout((function(){n._cleanup(!1),n.emit("finish")}),p.timeout),this.xo.once("finish",(function(t,e){n._cleanup(!0),n.emit("finish",t,e)}))},p.prototype._cleanup=function(t){clearTimeout(this.timeoutRef),this.timeoutRef=null,!t&&this.xo&&this.xo.close(),this.xo=null},p.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)},p.timeout=8e3,t.exports=p},47486:function(t,e,n){"use strict";t.exports=n.g.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}},93626:function(t,e,n){"use strict";n(21247);var r,i=n(84564),o=n(35717),s=n(28915),a=n(98028),c=n(70273),l=n(97705),u=n(95581),h=n(72217),p=n(38510),f=n(54886),d=n(20685),g=n(53184),m=n(47486),y=n(12530),_=n(13326),v=n(85172);function x(t,e,n){if(!(this instanceof x))return new x(t,e,n);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");g.call(this),this.readyState=x.CONNECTING,this.extensions="",this.protocol="",(n=n||{}).protocols_whitelist&&f.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=n.transports,this._transportOptions=n.transportOptions||{},this._timeout=n.timeout||0;var r=n.sessionId||8;if("function"==typeof r)this._generateSessionId=r;else{if("number"!=typeof r)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return s.string(r)}}this._server=n.server||s.numberString(1e3);var o=new i(t);if(!o.host||!o.protocol)throw new SyntaxError("The URL '"+t+"' is invalid");if(o.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==o.protocol&&"https:"!==o.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+o.protocol+"' is not allowed.");var a="https:"===o.protocol;if("https:"===m.protocol&&!a&&!c.isLoopbackAddr(o.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");e?Array.isArray(e)||(e=[e]):e=[];var l=e.sort();l.forEach((function(t,e){if(!t)throw new SyntaxError("The protocols entry '"+t+"' is invalid.");if(e<l.length-1&&t===l[e+1])throw new SyntaxError("The protocols entry '"+t+"' is duplicated.")}));var u=c.getOrigin(m.href);this._origin=u?u.toLowerCase():null,o.set("pathname",o.pathname.replace(/\/+$/,"")),this.url=o.href,this.url,this._urlInfo={nullOrigin:!p.hasDomain(),sameOrigin:c.isOriginEqual(this.url,m.href),sameScheme:c.isSchemeEqual(this.url,m.href)},this._ir=new v(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function b(t){return 1e3===t||t>=3e3&&t<=4999}o(x,g),x.prototype.close=function(t,e){if(t&&!b(t))throw new Error("InvalidAccessError: Invalid code");if(e&&e.length>123)throw new SyntaxError("reason argument has an invalid length");if(this.readyState!==x.CLOSING&&this.readyState!==x.CLOSED){this._close(t||1e3,e||"Normal closure",!0)}},x.prototype.send=function(t){if("string"!=typeof t&&(t=""+t),this.readyState===x.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===x.OPEN&&this._transport.send(a.quote(t))},x.version=n(32828),x.CONNECTING=0,x.OPEN=1,x.CLOSING=2,x.CLOSED=3,x.prototype._receiveInfo=function(t,e){if(this._ir=null,t){this._rto=this.countRTO(e),this._transUrl=t.base_url?t.base_url:this.url,t=h.extend(t,this._urlInfo);var n=r.filterToEnabled(this._transportsWhitelist,t);this._transports=n.main,this._transports.length,this._connect()}else this._close(1002,"Cannot connect to server")},x.prototype._connect=function(){for(var t=this._transports.shift();t;t=this._transports.shift()){if(t.transportName,t.needBody&&(!n.g.document.body||void 0!==n.g.document.readyState&&"complete"!==n.g.document.readyState&&"interactive"!==n.g.document.readyState))return this._transports.unshift(t),void l.attachEvent("load",this._connect.bind(this));var e=Math.max(this._timeout,this._rto*t.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),e);var r=c.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),i=this._transportOptions[t.transportName],o=new t(r,this._transUrl,i);return o.on("message",this._transportMessage.bind(this)),o.once("close",this._transportClose.bind(this)),o.transportName=t.transportName,void(this._transport=o)}this._close(2e3,"All transports failed",!1)},x.prototype._transportTimeout=function(){this.readyState===x.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},x.prototype._transportMessage=function(t){var e,n=this,r=t.slice(0,1),i=t.slice(1);switch(r){case"o":return void this._open();case"h":return this.dispatchEvent(new d("heartbeat")),void this.transport}if(i)try{e=JSON.parse(i)}catch(t){}if(void 0!==e)switch(r){case"a":Array.isArray(e)&&e.forEach((function(t){n.transport,n.dispatchEvent(new _(t))}));break;case"m":this.transport,this.dispatchEvent(new _(e));break;case"c":Array.isArray(e)&&2===e.length&&this._close(e[0],e[1],!0)}},x.prototype._transportClose=function(t,e){this.transport,this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),b(t)||2e3===t||this.readyState!==x.CONNECTING?this._close(t,e):this._connect()},x.prototype._open=function(){this._transport&&this._transport.transportName,this.readyState,this.readyState===x.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=x.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new d("open")),this.transport):this._close(1006,"Server lost session")},x.prototype._close=function(t,e,n){this.transport,this.readyState;var r=!1;if(this._ir&&(r=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===x.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=x.CLOSING,setTimeout(function(){this.readyState=x.CLOSED,r&&this.dispatchEvent(new d("error"));var i=new y("close");i.wasClean=n||!1,i.code=t||1e3,i.reason=e,this.dispatchEvent(i),this.onmessage=this.onclose=this.onerror=null}.bind(this),0)},x.prototype.countRTO=function(t){return t>100?4*t:300+t},t.exports=function(t){return r=u(t),n(80551)(x,t),x}},21247:function(){"use strict";var t,e=Array.prototype,n=Object.prototype,r=Function.prototype,i=String.prototype,o=e.slice,s=n.toString,a=function(t){return"[object Function]"===n.toString.call(t)},c=function(t){return"[object String]"===s.call(t)},l=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(t){return!1}}();t=l?function(t,e,n,r){!r&&e in t||Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(t,e,n,r){!r&&e in t||(t[e]=n)};var u=function(e,r,i){for(var o in r)n.hasOwnProperty.call(r,o)&&t(e,o,r[o],i)},h=function(t){if(null==t)throw new TypeError("can't convert "+t+" to object");return Object(t)};function p(){}u(r,{bind:function(t){var e=this;if(!a(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var n=o.call(arguments,1),r=Math.max(0,e.length-n.length),i=[],s=0;s<r;s++)i.push("$"+s);var c=Function("binder","return function ("+i.join(",")+"){ return binder.apply(this, arguments); }")((function(){if(this instanceof c){var r=e.apply(this,n.concat(o.call(arguments)));return Object(r)===r?r:this}return e.apply(t,n.concat(o.call(arguments)))}));return e.prototype&&(p.prototype=e.prototype,c.prototype=new p,p.prototype=null),c}}),u(Array,{isArray:function(t){return"[object Array]"===s.call(t)}});var f,d,g,m=Object("a"),y="a"!==m[0]||!(0 in m);u(e,{forEach:function(t){var e=h(this),n=y&&c(this)?this.split(""):e,r=arguments[1],i=-1,o=n.length>>>0;if(!a(t))throw new TypeError;for(;++i<o;)i in n&&t.call(r,n[i],i,e)}},(f=e.forEach,d=!0,g=!0,f&&(f.call("foo",(function(t,e,n){"object"!=typeof n&&(d=!1)})),f.call([1],(function(){g="string"==typeof this}),"x")),!(f&&d&&g)));var _=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);u(e,{indexOf:function(t){var e=y&&c(this)?this.split(""):h(this),n=e.length>>>0;if(!n)return-1;var r,i=0;for(arguments.length>1&&((r=+arguments[1])!=r?r=0:0!==r&&r!==1/0&&r!==-1/0&&(r=(r>0||-1)*Math.floor(Math.abs(r))),i=r),i=i>=0?i:Math.max(0,n+i);i<n;i++)if(i in e&&e[i]===t)return i;return-1}},_);var v,x=i.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?(v=void 0===/()??/.exec("")[1],i.split=function(t,n){var r=this;if(void 0===t&&0===n)return[];if("[object RegExp]"!==s.call(t))return x.call(this,t,n);var i,o,a,c,l=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),h=0;for(t=new RegExp(t.source,u+"g"),r+="",v||(i=new RegExp("^"+t.source+"$(?!\\s)",u)),n=void 0===n?-1>>>0:n>>>0;(o=t.exec(r))&&!((a=o.index+o[0].length)>h&&(l.push(r.slice(h,o.index)),!v&&o.length>1&&o[0].replace(i,(function(){for(var t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(o[t]=void 0)})),o.length>1&&o.index<r.length&&e.push.apply(l,o.slice(1)),c=o[0].length,h=a,l.length>=n));)t.lastIndex===o.index&&t.lastIndex++;return h===r.length?!c&&t.test("")||l.push(""):l.push(r.slice(h)),l.length>n?l.slice(0,n):l}):"0".split(void 0,0).length&&(i.split=function(t,e){return void 0===t&&0===e?[]:x.call(this,t,e)});var b=i.substr,w="".substr&&"b"!=="0b".substr(-1);u(i,{substr:function(t,e){return b.call(this,t<0&&(t=this.length+t)<0?0:t,e)}},w)},87581:function(t,e,n){"use strict";t.exports=[n(22412),n(69842),n(94620),n(43004),n(40882)(n(43004)),n(65616),n(40882)(n(65616)),n(62387),n(69998),n(40882)(n(62387)),n(95375)]},82940:function(t,e,n){"use strict";var r=n(63212).v,i=n(35717),o=n(97705),s=n(70273),a=n.g.XMLHttpRequest;function c(t,e,n,i){var o=this;r.call(this),setTimeout((function(){o._start(t,e,n,i)}),0)}i(c,r),c.prototype._start=function(t,e,n,r){var i=this;try{this.xhr=new a}catch(t){}if(!this.xhr)return this.emit("finish",0,"no xhr support"),void this._cleanup();e=s.addQuery(e,"t="+ +new Date),this.unloadRef=o.unloadAdd((function(){i._cleanup(!0)}));try{this.xhr.open(t,e,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){i.emit("finish",0,""),i._cleanup(!1)})}catch(t){return this.emit("finish",0,""),void this._cleanup(!1)}if(r&&r.noCredentials||!c.supportsCORS||(this.xhr.withCredentials=!0),r&&r.headers)for(var l in r.headers)this.xhr.setRequestHeader(l,r.headers[l]);this.xhr.onreadystatechange=function(){if(i.xhr){var t,e,n=i.xhr;switch(n.readyState,n.readyState){case 3:try{e=n.status,t=n.responseText}catch(t){}1223===e&&(e=204),200===e&&t&&t.length>0&&i.emit("chunk",e,t);break;case 4:1223===(e=n.status)&&(e=204),12005!==e&&12029!==e||(e=0),n.responseText,i.emit("finish",e,n.responseText),i._cleanup(!1)}}};try{i.xhr.send(n)}catch(t){i.emit("finish",0,""),i._cleanup(!1)}},c.prototype._cleanup=function(t){if(this.xhr){if(this.removeAllListeners(),o.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),t)try{this.xhr.abort()}catch(t){}this.unloadRef=this.xhr=null}},c.prototype.close=function(){this._cleanup(!0)},c.enabled=!!a;var l=["Active"].concat("Object").join("X");!c.enabled&&l in n.g&&(a=function(){try{return new n.g[l]("Microsoft.XMLHTTP")}catch(t){return null}},c.enabled=!!new a);var u=!1;try{u="withCredentials"in new a}catch(t){}c.supportsCORS=u,t.exports=c},3759:function(t,e,n){t.exports=n.g.EventSource},69334:function(t,e,n){"use strict";var r=n.g.WebSocket||n.g.MozWebSocket;t.exports=r?function(t){return new r(t)}:void 0},43004:function(t,e,n){"use strict";var r=n(35717),i=n(99395),o=n(46709),s=n(79033),a=n(3759);function c(t){if(!c.enabled())throw new Error("Transport created when disabled");i.call(this,t,"/eventsource",o,s)}r(c,i),c.enabled=function(){return!!a},c.transportName="eventsource",c.roundTrips=2,t.exports=c},65616:function(t,e,n){"use strict";var r=n(35717),i=n(53608),o=n(43515),s=n(99395);function a(t){if(!i.enabled)throw new Error("Transport created when disabled");s.call(this,t,"/htmlfile",i,o)}r(a,s),a.enabled=function(t){return i.enabled&&t.sameOrigin},a.transportName="htmlfile",a.roundTrips=2,t.exports=a},55088:function(t,e,n){"use strict";var r=n(35717),i=n(63212).v,o=n(32828),s=n(70273),a=n(3683),c=n(97705),l=n(28915);function u(t,e,n){if(!u.enabled())throw new Error("Transport created when disabled");i.call(this);var r=this;this.origin=s.getOrigin(n),this.baseUrl=n,this.transUrl=e,this.transport=t,this.windowId=l.string(8);var o=s.addPath(n,"/iframe.html")+"#"+this.windowId;this.iframeObj=a.createIframe(o,(function(t){r.emit("close",1006,"Unable to load an iframe ("+t+")"),r.close()})),this.onmessageCallback=this._message.bind(this),c.attachEvent("message",this.onmessageCallback)}r(u,i),u.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){c.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(t){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},u.prototype._message=function(t){if(t.data,!s.isOriginEqual(t.origin,this.origin))return t.origin,void this.origin;var e;try{e=JSON.parse(t.data)}catch(e){return void t.data}if(e.windowId!==this.windowId)return e.windowId,void this.windowId;switch(e.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([o,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",e.data);break;case"c":var n;try{n=JSON.parse(e.data)}catch(t){return void e.data}this.emit("close",n[0],n[1]),this.close()}},u.prototype.postMessage=function(t,e){this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:t,data:e||""}),this.origin)},u.prototype.send=function(t){this.postMessage("m",t)},u.enabled=function(){return a.iframeEnabled},u.transportName="iframe",u.roundTrips=2,t.exports=u},95375:function(t,e,n){"use strict";var r=n(35717),i=n(48347),o=n(514),s=n(20771);function a(t){if(!a.enabled())throw new Error("Transport created when disabled");i.call(this,t,"/jsonp",s,o)}r(a,i),a.enabled=function(){return!!n.g.document},a.transportName="jsonp-polling",a.roundTrips=1,a.needBody=!0,t.exports=a},99395:function(t,e,n){"use strict";var r=n(35717),i=n(70273),o=n(48347),s=function(){};function a(t,e,n,r){o.call(this,t,e,function(t){return function(e,n,r){s("create ajax sender",e,n);var o={};"string"==typeof n&&(o.headers={"Content-type":"text/plain"});var a=i.addPath(e,"/xhr_send"),c=new t("POST",a,n,o);return c.once("finish",(function(t){if(s("finish",t),c=null,200!==t&&204!==t)return r(new Error("http status "+t));r()})),function(){s("abort"),c.close(),c=null;var t=new Error("Aborted");t.code=1e3,r(t)}}}(r),n,r)}r(a,o),t.exports=a},31851:function(t,e,n){"use strict";var r=n(35717),i=n(63212).v;function o(t,e){i.call(this),this.sendBuffer=[],this.sender=e,this.url=t}r(o,i),o.prototype.send=function(t){this.sendBuffer.push(t),this.sendStop||this.sendSchedule()},o.prototype.sendScheduleWait=function(){var t,e=this;this.sendStop=function(){e.sendStop=null,clearTimeout(t)},t=setTimeout((function(){e.sendStop=null,e.sendSchedule()}),25)},o.prototype.sendSchedule=function(){this.sendBuffer.length;var t=this;if(this.sendBuffer.length>0){var e="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,e,(function(e){t.sendStop=null,e?(t.emit("close",e.code||1006,"Sending error: "+e),t.close()):t.sendScheduleWait()})),this.sendBuffer=[]}},o.prototype._cleanup=function(){this.removeAllListeners()},o.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},t.exports=o},40882:function(t,e,n){"use strict";var r=n(35717),i=n(55088),o=n(72217);t.exports=function(t){function e(e,n){i.call(this,t.transportName,e,n)}return r(e,i),e.enabled=function(e,r){if(!n.g.document)return!1;var s=o.extend({},r);return s.sameOrigin=!0,t.enabled(s)&&i.enabled()},e.transportName="iframe-"+t.transportName,e.needBody=!0,e.roundTrips=i.roundTrips+t.roundTrips-1,e.facadeTransport=t,e}},61265:function(t,e,n){"use strict";var r=n(35717),i=n(63212).v;function o(t,e,n){i.call(this),this.Receiver=t,this.receiveUrl=e,this.AjaxObject=n,this._scheduleReceiver()}r(o,i),o.prototype._scheduleReceiver=function(){var t=this,e=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);e.on("message",(function(e){t.emit("message",e)})),e.once("close",(function(n,r){t.pollIsClosing,t.poll=e=null,t.pollIsClosing||("network"===r?t._scheduleReceiver():(t.emit("close",n||1006,r),t.removeAllListeners()))}))},o.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},t.exports=o},48347:function(t,e,n){"use strict";var r=n(35717),i=n(70273),o=n(31851),s=n(61265);function a(t,e,n,r,a){var c=i.addPath(t,e),l=this;o.call(this,t,n),this.poll=new s(r,c,a),this.poll.on("message",(function(t){l.emit("message",t)})),this.poll.once("close",(function(t,e){l.poll=null,l.emit("close",t,e),l.close()}))}r(a,o),a.prototype.close=function(){o.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},t.exports=a},46709:function(t,e,n){"use strict";var r=n(35717),i=n(63212).v,o=n(3759);function s(t){i.call(this);var e=this,n=this.es=new o(t);n.onmessage=function(t){t.data,e.emit("message",decodeURI(t.data))},n.onerror=function(t){n.readyState;var r=2!==n.readyState?"network":"permanent";e._cleanup(),e._close(r)}}r(s,i),s.prototype.abort=function(){this._cleanup(),this._close("user")},s.prototype._cleanup=function(){var t=this.es;t&&(t.onmessage=t.onerror=null,t.close(),this.es=null)},s.prototype._close=function(t){var e=this;setTimeout((function(){e.emit("close",null,t),e.removeAllListeners()}),200)},t.exports=s},53608:function(t,e,n){"use strict";var r=n(35717),i=n(3683),o=n(70273),s=n(63212).v,a=n(28915);function c(t){s.call(this);var e=this;i.polluteGlobalNamespace(),this.id="a"+a.string(6),t=o.addQuery(t,"c="+decodeURIComponent(i.WPrefix+"."+this.id)),c.htmlfileEnabled;var r=c.htmlfileEnabled?i.createHtmlfile:i.createIframe;n.g[i.WPrefix][this.id]={start:function(){e.iframeObj.loaded()},message:function(t){e.emit("message",t)},stop:function(){e._cleanup(),e._close("network")}},this.iframeObj=r(t,(function(){e._cleanup(),e._close("permanent")}))}r(c,s),c.prototype.abort=function(){this._cleanup(),this._close("user")},c.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete n.g[i.WPrefix][this.id]},c.prototype._close=function(t){this.emit("close",null,t),this.removeAllListeners()},c.htmlfileEnabled=!1;var l=["Active"].concat("Object").join("X");if(l in n.g)try{c.htmlfileEnabled=!!new n.g[l]("htmlfile")}catch(t){}c.enabled=c.htmlfileEnabled||i.iframeEnabled,t.exports=c},514:function(t,e,n){"use strict";var r=n(3683),i=n(28915),o=n(38510),s=n(70273),a=n(35717),c=n(63212).v;function l(t){var e=this;c.call(this),r.polluteGlobalNamespace(),this.id="a"+i.string(6);var o=s.addQuery(t,"c="+encodeURIComponent(r.WPrefix+"."+this.id));n.g[r.WPrefix][this.id]=this._callback.bind(this),this._createScript(o),this.timeoutId=setTimeout((function(){e._abort(new Error("JSONP script loaded abnormally (timeout)"))}),l.timeout)}a(l,c),l.prototype.abort=function(){if(n.g[r.WPrefix][this.id]){var t=new Error("JSONP user aborted read");t.code=1e3,this._abort(t)}},l.timeout=35e3,l.scriptErrorTimeout=1e3,l.prototype._callback=function(t){this._cleanup(),this.aborting||(t&&this.emit("message",t),this.emit("close",null,"network"),this.removeAllListeners())},l.prototype._abort=function(t){this._cleanup(),this.aborting=!0,this.emit("close",t.code,t.message),this.removeAllListeners()},l.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var t=this.script;t.parentNode.removeChild(t),t.onreadystatechange=t.onerror=t.onload=t.onclick=null,this.script=null}delete n.g[r.WPrefix][this.id]},l.prototype._scriptError=function(){var t=this;this.errorTimer||(this.errorTimer=setTimeout((function(){t.loadedOkay||t._abort(new Error("JSONP script loaded abnormally (onerror)"))}),l.scriptErrorTimeout))},l.prototype._createScript=function(t){var e,r=this,s=this.script=n.g.document.createElement("script");if(s.id="a"+i.string(8),s.src=t,s.type="text/javascript",s.charset="UTF-8",s.onerror=this._scriptError.bind(this),s.onload=function(){r._abort(new Error("JSONP script loaded abnormally (onload)"))},s.onreadystatechange=function(){if(s.readyState,/loaded|closed/.test(s.readyState)){if(s&&s.htmlFor&&s.onclick){r.loadedOkay=!0;try{s.onclick()}catch(t){}}s&&r._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},void 0===s.async&&n.g.document.attachEvent)if(o.isOpera())(e=this.script2=n.g.document.createElement("script")).text="try{var a = document.getElementById('"+s.id+"'); if(a)a.onerror();}catch(x){};",s.async=e.async=!1;else{try{s.htmlFor=s.id,s.event="onclick"}catch(t){}s.async=!0}void 0!==s.async&&(s.async=!0);var a=n.g.document.getElementsByTagName("head")[0];a.insertBefore(s,a.firstChild),e&&a.insertBefore(e,a.firstChild)},t.exports=l},75370:function(t,e,n){"use strict";var r=n(35717),i=n(63212).v;function o(t,e){i.call(this);var n=this;this.bufferPosition=0,this.xo=new e("POST",t,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",(function(t,e){n._chunkHandler(t,e),n.xo=null;var r=200===t?"network":"permanent";n.emit("close",null,r),n._cleanup()}))}r(o,i),o.prototype._chunkHandler=function(t,e){if(200===t&&e)for(var n=-1;;this.bufferPosition+=n+1){var r=e.slice(this.bufferPosition);if(-1===(n=r.indexOf("\n")))break;var i=r.slice(0,n);i&&this.emit("message",i)}},o.prototype._cleanup=function(){this.removeAllListeners()},o.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()},t.exports=o},20771:function(t,e,n){"use strict";var r,i,o=n(28915),s=n(70273);t.exports=function(t,e,a){r||((r=n.g.document.createElement("form")).style.display="none",r.style.position="absolute",r.method="POST",r.enctype="application/x-www-form-urlencoded",r.acceptCharset="UTF-8",(i=n.g.document.createElement("textarea")).name="d",r.appendChild(i),n.g.document.body.appendChild(r));var c="a"+o.string(8);r.target=c,r.action=s.addQuery(s.addPath(t,"/jsonp_send"),"i="+c);var l=function(t){try{return n.g.document.createElement('<iframe name="'+t+'">')}catch(r){var e=n.g.document.createElement("iframe");return e.name=t,e}}(c);l.id=c,l.style.display="none",r.appendChild(l);try{i.value=e}catch(t){}r.submit();var u=function(t){l.onerror&&(l.onreadystatechange=l.onerror=l.onload=null,setTimeout((function(){l.parentNode.removeChild(l),l=null}),500),i.value="",a(t))};return l.onerror=function(){u()},l.onload=function(){u()},l.onreadystatechange=function(t){l.readyState,"complete"===l.readyState&&u()},function(){u(new Error("Aborted"))}}},56073:function(t,e,n){"use strict";var r=n(63212).v,i=n(35717),o=n(97705),s=n(38510),a=n(70273);function c(t,e,n){var i=this;r.call(this),setTimeout((function(){i._start(t,e,n)}),0)}i(c,r),c.prototype._start=function(t,e,r){var i=this,s=new n.g.XDomainRequest;e=a.addQuery(e,"t="+ +new Date),s.onerror=function(){i._error()},s.ontimeout=function(){i._error()},s.onprogress=function(){s.responseText,i.emit("chunk",200,s.responseText)},s.onload=function(){i.emit("finish",200,s.responseText),i._cleanup(!1)},this.xdr=s,this.unloadRef=o.unloadAdd((function(){i._cleanup(!0)}));try{this.xdr.open(t,e),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(r)}catch(t){this._error()}},c.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},c.prototype._cleanup=function(t){if(this.xdr){if(this.removeAllListeners(),o.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,t)try{this.xdr.abort()}catch(t){}this.unloadRef=this.xdr=null}},c.prototype.close=function(){this._cleanup(!0)},c.enabled=!(!n.g.XDomainRequest||!s.hasDomain()),t.exports=c},79033:function(t,e,n){"use strict";var r=n(35717),i=n(82940);function o(t,e,n,r){i.call(this,t,e,n,r)}r(o,i),o.enabled=i.enabled&&i.supportsCORS,t.exports=o},57103:function(t,e,n){"use strict";var r=n(63212).v;function i(){var t=this;r.call(this),this.to=setTimeout((function(){t.emit("finish",200,"{}")}),i.timeout)}n(35717)(i,r),i.prototype.close=function(){clearTimeout(this.to)},i.timeout=2e3,t.exports=i},43515:function(t,e,n){"use strict";var r=n(35717),i=n(82940);function o(t,e,n){i.call(this,t,e,n,{noCredentials:!0})}r(o,i),o.enabled=i.enabled,t.exports=o},22412:function(t,e,n){"use strict";var r=n(97705),i=n(70273),o=n(35717),s=n(63212).v,a=n(69334);function c(t,e,n){if(!c.enabled())throw new Error("Transport created when disabled");s.call(this);var o=this,l=i.addPath(t,"/websocket");l="https"===l.slice(0,5)?"wss"+l.slice(5):"ws"+l.slice(4),this.url=l,this.ws=new a(this.url,[],n),this.ws.onmessage=function(t){t.data,o.emit("message",t.data)},this.unloadRef=r.unloadAdd((function(){o.ws.close()})),this.ws.onclose=function(t){t.code,t.reason,o.emit("close",t.code,t.reason),o._cleanup()},this.ws.onerror=function(t){o.emit("close",1006,"WebSocket connection broken"),o._cleanup()}}o(c,s),c.prototype.send=function(t){var e="["+t+"]";this.ws.send(e)},c.prototype.close=function(){var t=this.ws;this._cleanup(),t&&t.close()},c.prototype._cleanup=function(){var t=this.ws;t&&(t.onmessage=t.onclose=t.onerror=null),r.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},c.enabled=function(){return!!a},c.transportName="websocket",c.roundTrips=2,t.exports=c},69998:function(t,e,n){"use strict";var r=n(35717),i=n(99395),o=n(94620),s=n(75370),a=n(56073);function c(t){if(!a.enabled)throw new Error("Transport created when disabled");i.call(this,t,"/xhr",s,a)}r(c,i),c.enabled=o.enabled,c.transportName="xdr-polling",c.roundTrips=2,t.exports=c},94620:function(t,e,n){"use strict";var r=n(35717),i=n(99395),o=n(75370),s=n(56073);function a(t){if(!s.enabled)throw new Error("Transport created when disabled");i.call(this,t,"/xhr_streaming",o,s)}r(a,i),a.enabled=function(t){return!t.cookie_needed&&!t.nullOrigin&&(s.enabled&&t.sameScheme)},a.transportName="xdr-streaming",a.roundTrips=2,t.exports=a},62387:function(t,e,n){"use strict";var r=n(35717),i=n(99395),o=n(75370),s=n(79033),a=n(43515);function c(t){if(!a.enabled&&!s.enabled)throw new Error("Transport created when disabled");i.call(this,t,"/xhr",o,s)}r(c,i),c.enabled=function(t){return!t.nullOrigin&&(!(!a.enabled||!t.sameOrigin)||s.enabled)},c.transportName="xhr-polling",c.roundTrips=2,t.exports=c},69842:function(t,e,n){"use strict";var r=n(35717),i=n(99395),o=n(75370),s=n(79033),a=n(43515),c=n(38510);function l(t){if(!a.enabled&&!s.enabled)throw new Error("Transport created when disabled");i.call(this,t,"/xhr_streaming",o,s)}r(l,i),l.enabled=function(t){return!t.nullOrigin&&(!c.isOpera()&&s.enabled)},l.transportName="xhr-streaming",l.roundTrips=2,l.needBody=!!n.g.document,t.exports=l},92017:function(t,e,n){"use strict";n.g.crypto&&n.g.crypto.getRandomValues?t.exports.randomBytes=function(t){var e=new Uint8Array(t);return n.g.crypto.getRandomValues(e),e}:t.exports.randomBytes=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=Math.floor(256*Math.random());return e}},38510:function(t,e,n){"use strict";t.exports={isOpera:function(){return n.g.navigator&&/opera/i.test(n.g.navigator.userAgent)},isKonqueror:function(){return n.g.navigator&&/konqueror/i.test(n.g.navigator.userAgent)},hasDomain:function(){if(!n.g.document)return!0;try{return!!n.g.document.domain}catch(t){return!1}}}},98028:function(t){"use strict";var e,n=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g;t.exports={quote:function(t){var r=JSON.stringify(t);return n.lastIndex=0,n.test(r)?(e||(e=function(t){var e,n={},r=[];for(e=0;e<65536;e++)r.push(String.fromCharCode(e));return t.lastIndex=0,r.join("").replace(t,(function(t){return n[t]="\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4),""})),t.lastIndex=0,n}(n)),r.replace(n,(function(t){return e[t]}))):r}}},97705:function(t,e,n){"use strict";var r=n(28915),i={},o=!1,s=n.g.chrome&&n.g.chrome.app&&n.g.chrome.app.runtime;t.exports={attachEvent:function(t,e){void 0!==n.g.addEventListener?n.g.addEventListener(t,e,!1):n.g.document&&n.g.attachEvent&&(n.g.document.attachEvent("on"+t,e),n.g.attachEvent("on"+t,e))},detachEvent:function(t,e){void 0!==n.g.addEventListener?n.g.removeEventListener(t,e,!1):n.g.document&&n.g.detachEvent&&(n.g.document.detachEvent("on"+t,e),n.g.detachEvent("on"+t,e))},unloadAdd:function(t){if(s)return null;var e=r.string(8);return i[e]=t,o&&setTimeout(this.triggerUnloadCallbacks,0),e},unloadDel:function(t){t in i&&delete i[t]},triggerUnloadCallbacks:function(){for(var t in i)i[t](),delete i[t]}};s||t.exports.attachEvent("unload",(function(){o||(o=!0,t.exports.triggerUnloadCallbacks())}))},3683:function(t,e,n){"use strict";var r=n(97705),i=n(38510);t.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){t.exports.WPrefix in n.g||(n.g[t.exports.WPrefix]={})},postMessage:function(e,r){n.g.parent!==n.g&&n.g.parent.postMessage(JSON.stringify({windowId:t.exports.currentWindowId,type:e,data:r||""}),"*")},createIframe:function(t,e){var i,o,s=n.g.document.createElement("iframe"),a=function(){clearTimeout(i);try{s.onload=null}catch(t){}s.onerror=null},c=function(){s&&(a(),setTimeout((function(){s&&s.parentNode.removeChild(s),s=null}),0),r.unloadDel(o))},l=function(t){s&&(c(),e(t))};return s.src=t,s.style.display="none",s.style.position="absolute",s.onerror=function(){l("onerror")},s.onload=function(){clearTimeout(i),i=setTimeout((function(){l("onload timeout")}),2e3)},n.g.document.body.appendChild(s),i=setTimeout((function(){l("timeout")}),15e3),o=r.unloadAdd(c),{post:function(t,e){setTimeout((function(){try{s&&s.contentWindow&&s.contentWindow.postMessage(t,e)}catch(t){}}),0)},cleanup:c,loaded:a}},createHtmlfile:function(e,i){var o,s,a,c=["Active"].concat("Object").join("X"),l=new n.g[c]("htmlfile"),u=function(){clearTimeout(o),a.onerror=null},h=function(){l&&(u(),r.unloadDel(s),a.parentNode.removeChild(a),a=l=null,CollectGarbage())},p=function(t){l&&(h(),i(t))};l.open(),l.write('<html><script>document.domain="'+n.g.document.domain+'";<\/script></html>'),l.close(),l.parentWindow[t.exports.WPrefix]=n.g[t.exports.WPrefix];var f=l.createElement("div");return l.body.appendChild(f),a=l.createElement("iframe"),f.appendChild(a),a.src=e,a.onerror=function(){p("onerror")},o=setTimeout((function(){p("timeout")}),15e3),s=r.unloadAdd(h),{post:function(t,e){try{setTimeout((function(){a&&a.contentWindow&&a.contentWindow.postMessage(t,e)}),0)}catch(t){}},cleanup:h,loaded:u}}},t.exports.iframeEnabled=!1,n.g.document&&(t.exports.iframeEnabled=("function"==typeof n.g.postMessage||"object"==typeof n.g.postMessage)&&!i.isKonqueror())},54886:function(t,e,n){"use strict";var r={};["log","debug","warn"].forEach((function(t){var e;try{e=n.g.console&&n.g.console[t]&&n.g.console[t].apply}catch(t){}r[t]=e?function(){return n.g.console[t].apply(n.g.console,arguments)}:"log"===t?function(){}:r.log})),t.exports=r},72217:function(t){"use strict";t.exports={isObject:function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},extend:function(t){if(!this.isObject(t))return t;for(var e,n,r=1,i=arguments.length;r<i;r++)for(n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}}},28915:function(t,e,n){"use strict";var r=n(92017),i="abcdefghijklmnopqrstuvwxyz012345";t.exports={string:function(t){for(var e=r.randomBytes(t),n=[],o=0;o<t;o++)n.push(i.substr(e[o]%32,1));return n.join("")},number:function(t){return Math.floor(Math.random()*t)},numberString:function(t){var e=(""+(t-1)).length;return(new Array(e+1).join("0")+this.number(t)).slice(-e)}}},95581:function(t){"use strict";t.exports=function(t){return{filterToEnabled:function(e,n){var r={main:[],facade:[]};return e?"string"==typeof e&&(e=[e]):e=[],t.forEach((function(t){t&&("websocket"===t.transportName&&!1===n.websocket||(e.length&&-1===e.indexOf(t.transportName)?t.transportName:t.enabled(n)?(t.transportName,r.main.push(t),t.facadeTransport&&r.facade.push(t.facadeTransport)):t.transportName))})),r}}}},70273:function(t,e,n){"use strict";var r=n(84564);t.exports={getOrigin:function(t){if(!t)return null;var e=new r(t);if("file:"===e.protocol)return null;var n=e.port;return n||(n="https:"===e.protocol?"443":"80"),e.protocol+"//"+e.hostname+":"+n},isOriginEqual:function(t,e){var n=this.getOrigin(t)===this.getOrigin(e);return n},isSchemeEqual:function(t,e){return t.split(":")[0]===e.split(":")[0]},addPath:function(t,e){var n=t.split("?");return n[0]+e+(n[1]?"?"+n[1]:"")},addQuery:function(t,e){return t+(-1===t.indexOf("?")?"?"+e:"&"+e)},isLoopbackAddr:function(t){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(t)||/^\[::1\]$/.test(t)}}},32828:function(t){t.exports="1.6.1"},13572:function(t,e){"use strict";var n="undefined"!=typeof window?window:null,r=null===n,i=r?void 0:n.document,o="addEventListener",s="removeEventListener",a="getBoundingClientRect",c="_a",l="_b",u="_c",h="horizontal",p=function(){return!1},f=r?"calc":["","-webkit-","-moz-","-o-"].filter((function(t){var e=i.createElement("div");return e.style.cssText="width:"+t+"calc(9px)",!!e.style.length})).shift()+"calc",d=function(t){return"string"==typeof t||t instanceof String},g=function(t){if(d(t)){var e=i.querySelector(t);if(!e)throw new Error("Selector "+t+" did not match a DOM element");return e}return t},m=function(t,e,n){var r=t[e];return void 0!==r?r:n},y=function(t,e,n,r){if(e){if("end"===r)return 0;if("center"===r)return t/2}else if(n){if("start"===r)return 0;if("center"===r)return t/2}return t},_=function(t,e){var n=i.createElement("div");return n.className="gutter gutter-"+e,n},v=function(t,e,n){var r={};return d(e)?r[t]=e:r[t]=f+"("+e+"% - "+n+"px)",r},x=function(t,e){var n;return(n={})[t]=e+"px",n};e.Z=function(t,e){if(void 0===e&&(e={}),r)return{};var f,d,b,w,E,T,S=t;Array.from&&(S=Array.from(S));var k=g(S[0]).parentNode,A=getComputedStyle?getComputedStyle(k):null,M=A?A.flexDirection:null,I=m(e,"sizes")||S.map((function(){return 100/S.length})),C=m(e,"minSize",100),O=Array.isArray(C)?C:S.map((function(){return C})),P=m(e,"maxSize",1/0),L=Array.isArray(P)?P:S.map((function(){return P})),D=m(e,"expandToMin",!1),R=m(e,"gutterSize",10),N=m(e,"gutterAlign","center"),j=m(e,"snapOffset",30),z=Array.isArray(j)?j:S.map((function(){return j})),B=m(e,"dragInterval",1),F=m(e,"direction",h),U=m(e,"cursor",F===h?"col-resize":"row-resize"),V=m(e,"gutter",_),q=m(e,"elementStyle",v),W=m(e,"gutterStyle",x);function G(t,e,n,r){var i=q(f,e,n,r);Object.keys(i).forEach((function(e){t.style[e]=i[e]}))}function $(){return T.map((function(t){return t.size}))}function H(t){return"touches"in t?t.touches[0][d]:t[d]}function Z(t){var e=T[this.a],n=T[this.b],r=e.size+n.size;e.size=t/this.size*r,n.size=r-t/this.size*r,G(e.element,e.size,this[l],e.i),G(n.element,n.size,this[u],n.i)}function Y(t){var n,r=T[this.a],i=T[this.b];this.dragging&&(n=H(t)-this.start+(this[l]-this.dragOffset),B>1&&(n=Math.round(n/B)*B),n<=r.minSize+r.snapOffset+this[l]?n=r.minSize+this[l]:n>=this.size-(i.minSize+i.snapOffset+this[u])&&(n=this.size-(i.minSize+this[u])),n>=r.maxSize-r.snapOffset+this[l]?n=r.maxSize+this[l]:n<=this.size-(i.maxSize-i.snapOffset+this[u])&&(n=this.size-(i.maxSize+this[u])),Z.call(this,n),m(e,"onDrag",p)($()))}function X(){var t=T[this.a].element,e=T[this.b].element,n=t[a](),r=e[a]();this.size=n[f]+r[f]+this[l]+this[u],this.start=n[b],this.end=n[w]}function K(t){var e=function(t){if(!getComputedStyle)return null;var e=getComputedStyle(t);if(!e)return null;var n=t[E];return 0===n?null:n-=F===h?parseFloat(e.paddingLeft)+parseFloat(e.paddingRight):parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)}(k);if(null===e)return t;if(O.reduce((function(t,e){return t+e}),0)>e)return t;var n=0,r=[],i=t.map((function(i,o){var s=e*i/100,a=y(R,0===o,o===t.length-1,N),c=O[o]+a;return s<c?(n+=c-s,r.push(0),c):(r.push(s-c),s)}));return 0===n?t:i.map((function(t,i){var o=t;if(n>0&&r[i]-n>0){var s=Math.min(n,r[i]-n);n-=s,o=t-s}return o/e*100}))}function J(){var t=this,r=T[t.a].element,o=T[t.b].element;t.dragging&&m(e,"onDragEnd",p)($()),t.dragging=!1,n[s]("mouseup",t.stop),n[s]("touchend",t.stop),n[s]("touchcancel",t.stop),n[s]("mousemove",t.move),n[s]("touchmove",t.move),t.stop=null,t.move=null,r[s]("selectstart",p),r[s]("dragstart",p),o[s]("selectstart",p),o[s]("dragstart",p),r.style.userSelect="",r.style.webkitUserSelect="",r.style.MozUserSelect="",r.style.pointerEvents="",o.style.userSelect="",o.style.webkitUserSelect="",o.style.MozUserSelect="",o.style.pointerEvents="",t.gutter.style.cursor="",t.parent.style.cursor="",i.body.style.cursor=""}function Q(t){if(!("button"in t)||0===t.button){var r=this,s=T[r.a].element,a=T[r.b].element;r.dragging||m(e,"onDragStart",p)($()),t.preventDefault(),r.dragging=!0,r.move=Y.bind(r),r.stop=J.bind(r),n[o]("mouseup",r.stop),n[o]("touchend",r.stop),n[o]("touchcancel",r.stop),n[o]("mousemove",r.move),n[o]("touchmove",r.move),s[o]("selectstart",p),s[o]("dragstart",p),a[o]("selectstart",p),a[o]("dragstart",p),s.style.userSelect="none",s.style.webkitUserSelect="none",s.style.MozUserSelect="none",s.style.pointerEvents="none",a.style.userSelect="none",a.style.webkitUserSelect="none",a.style.MozUserSelect="none",a.style.pointerEvents="none",r.gutter.style.cursor=U,r.parent.style.cursor=U,i.body.style.cursor=U,X.call(r),r.dragOffset=H(t)-r.end}}F===h?(f="width",d="clientX",b="left",w="right",E="clientWidth"):"vertical"===F&&(f="height",d="clientY",b="top",w="bottom",E="clientHeight"),I=K(I);var tt=[];function et(t){var e=t.i===tt.length,n=e?tt[t.i-1]:tt[t.i];X.call(n);var r=e?n.size-t.minSize-n[u]:t.minSize+n[l];Z.call(n,r)}return(T=S.map((function(t,e){var n,r={element:g(t),size:I[e],minSize:O[e],maxSize:L[e],snapOffset:z[e],i:e};if(e>0&&((n={a:e-1,b:e,dragging:!1,direction:F,parent:k})[l]=y(R,e-1==0,!1,N),n[u]=y(R,!1,e===S.length-1,N),"row-reverse"===M||"column-reverse"===M)){var i=n.a;n.a=n.b,n.b=i}if(e>0){var s=V(e,F,r.element);!function(t,e,n){var r=W(f,e,n);Object.keys(r).forEach((function(e){t.style[e]=r[e]}))}(s,R,e),n[c]=Q.bind(n),s[o]("mousedown",n[c]),s[o]("touchstart",n[c]),k.insertBefore(s,r.element),n.gutter=s}return G(r.element,r.size,y(R,0===e,e===S.length-1,N),e),e>0&&tt.push(n),r}))).forEach((function(t){var e=t.element[a]()[f];e<t.minSize&&(D?et(t):t.minSize=e)})),{setSizes:function(t){var e=K(t);e.forEach((function(t,n){if(n>0){var r=tt[n-1],i=T[r.a],o=T[r.b];i.size=e[n-1],o.size=t,G(i.element,i.size,r[l],i.i),G(o.element,o.size,r[u],o.i)}}))},getSizes:$,collapse:function(t){et(T[t])},destroy:function(t,e){tt.forEach((function(n){if(!0!==e?n.parent.removeChild(n.gutter):(n.gutter[s]("mousedown",n[c]),n.gutter[s]("touchstart",n[c])),!0!==t){var r=q(f,n.a.size,n[l]);Object.keys(r).forEach((function(t){T[n.a].element.style[t]="",T[n.b].element.style[t]=""}))}}))},parent:k,pairs:tt}}},49964:function(t,e,n){"use strict";var r=n(93379),i=n.n(r),o=n(7795),s=n.n(o),a=n(90569),c=n.n(a),l=n(3565),u=n.n(l),h=n(19216),p=n.n(h),f=n(44589),d=n.n(f),g=n(14286),m={};m.styleTagTransform=d(),m.setAttributes=u(),m.insert=c().bind(null,"head"),m.domAPI=s(),m.insertStyleElement=p();var y=i()(g.default,m);if(!g.default.locals||t.hot.invalidate){var _=!g.default.locals,v=_?g:g.default.locals;t.hot.accept(14286,function(e){g=n(14286),function(t,e,n){if(!t&&e||t&&!e)return!1;var r;for(r in t)if((!n||"default"!==r)&&t[r]!==e[r])return!1;for(r in e)if(!(n&&"default"===r||t[r]))return!1;return!0}(v,_?g:g.default.locals,_)?(v=_?g:g.default.locals,y(g.default)):t.hot.invalidate()}.bind(this))}t.hot.dispose((function(){y()}));g.default&&g.default.locals&&g.default.locals},60432:function(t,e,n){"use strict";var r=n(93379),i=n.n(r),o=n(7795),s=n.n(o),a=n(90569),c=n.n(a),l=n(3565),u=n.n(l),h=n(19216),p=n.n(h),f=n(44589),d=n.n(f),g=n(34660),m={};m.styleTagTransform=d(),m.setAttributes=u(),m.insert=c().bind(null,"head"),m.domAPI=s(),m.insertStyleElement=p();var y=i()(g.default,m);if(!g.default.locals||t.hot.invalidate){var _=!g.default.locals,v=_?g:g.default.locals;t.hot.accept(34660,function(e){g=n(34660),function(t,e,n){if(!t&&e||t&&!e)return!1;var r;for(r in t)if((!n||"default"!==r)&&t[r]!==e[r])return!1;for(r in e)if(!(n&&"default"===r||t[r]))return!1;return!0}(v,_?g:g.default.locals,_)?(v=_?g:g.default.locals,y(g.default)):t.hot.invalidate()}.bind(this))}t.hot.dispose((function(){y()}));g.default&&g.default.locals&&g.default.locals},37030:function(t,e,n){"use strict";var r=n(93379),i=n.n(r),o=n(7795),s=n.n(o),a=n(90569),c=n.n(a),l=n(3565),u=n.n(l),h=n(19216),p=n.n(h),f=n(44589),d=n.n(f),g=n(26607),m={};m.styleTagTransform=d(),m.setAttributes=u(),m.insert=c().bind(null,"head"),m.domAPI=s(),m.insertStyleElement=p();var y=i()(g.default,m);if(!g.default.locals||t.hot.invalidate){var _=!g.default.locals,v=_?g:g.default.locals;t.hot.accept(26607,function(e){g=n(26607),function(t,e,n){if(!t&&e||t&&!e)return!1;var r;for(r in t)if((!n||"default"!==r)&&t[r]!==e[r])return!1;for(r in e)if(!(n&&"default"===r||t[r]))return!1;return!0}(v,_?g:g.default.locals,_)?(v=_?g:g.default.locals,y(g.default)):t.hot.invalidate()}.bind(this))}t.hot.dispose((function(){y()}));g.default&&g.default.locals&&g.default.locals},13499:function(t,e,n){"use strict";var r=n(93379),i=n.n(r),o=n(7795),s=n.n(o),a=n(90569),c=n.n(a),l=n(3565),u=n.n(l),h=n(19216),p=n.n(h),f=n(44589),d=n.n(f),g=n(86646),m={};m.styleTagTransform=d(),m.setAttributes=u(),m.insert=c().bind(null,"head"),m.domAPI=s(),m.insertStyleElement=p();var y=i()(g.default,m);if(!g.default.locals||t.hot.invalidate){var _=!g.default.locals,v=_?g:g.default.locals;t.hot.accept(86646,function(e){g=n(86646),function(t,e,n){if(!t&&e||t&&!e)return!1;var r;for(r in t)if((!n||"default"!==r)&&t[r]!==e[r])return!1;for(r in e)if(!(n&&"default"===r||t[r]))return!1;return!0}(v,_?g:g.default.locals,_)?(v=_?g:g.default.locals,y(g.default)):t.hot.invalidate()}.bind(this))}t.hot.dispose((function(){y()}));g.default&&g.default.locals&&g.default.locals},59414:function(t,e,n){"use strict";var r=n(93379),i=n.n(r),o=n(7795),s=n.n(o),a=n(90569),c=n.n(a),l=n(3565),u=n.n(l),h=n(19216),p=n.n(h),f=n(44589),d=n.n(f),g=n(89650),m={};m.styleTagTransform=d(),m.setAttributes=u(),m.insert=c().bind(null,"head"),m.domAPI=s(),m.insertStyleElement=p();var y=i()(g.default,m);if(!g.default.locals||t.hot.invalidate){var _=!g.default.locals,v=_?g:g.default.locals;t.hot.accept(89650,function(e){g=n(89650),function(t,e,n){if(!t&&e||t&&!e)return!1;var r;for(r in t)if((!n||"default"!==r)&&t[r]!==e[r])return!1;for(r in e)if(!(n&&"default"===r||t[r]))return!1;return!0}(v,_?g:g.default.locals,_)?(v=_?g:g.default.locals,y(g.default)):t.hot.invalidate()}.bind(this))}t.hot.dispose((function(){y()}));g.default&&g.default.locals&&g.default.locals},59690:function(t,e,n){"use strict";var r=n(93379),i=n.n(r),o=n(7795),s=n.n(o),a=n(90569),c=n.n(a),l=n(3565),u=n.n(l),h=n(19216),p=n.n(h),f=n(44589),d=n.n(f),g=n(73397),m={};m.styleTagTransform=d(),m.setAttributes=u(),m.insert=c().bind(null,"head"),m.domAPI=s(),m.insertStyleElement=p();var y=i()(g.default,m);if(!g.default.locals||t.hot.invalidate){var _=!g.default.locals,v=_?g:g.default.locals;t.hot.accept(73397,function(e){g=n(73397),function(t,e,n){if(!t&&e||t&&!e)return!1;var r;for(r in t)if((!n||"default"!==r)&&t[r]!==e[r])return!1;for(r in e)if(!(n&&"default"===r||t[r]))return!1;return!0}(v,_?g:g.default.locals,_)?(v=_?g:g.default.locals,y(g.default)):t.hot.invalidate()}.bind(this))}t.hot.dispose((function(){y()}));g.default&&g.default.locals&&g.default.locals},93379:function(t){"use strict";var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var o={},s=[],a=0;a<t.length;a++){var c=t[a],l=r.base?c[0]+r.base:c[0],u=o[l]||0,h="".concat(l," ").concat(u);o[l]=u+1;var p=n(h),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)e[p].references++,e[p].updater(f);else{var d=i(f,r);r.byIndex=a,e.splice(a,0,{identifier:h,updater:d,references:1})}s.push(h)}return s}function i(t,e){var n=e.domAPI(e);n.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var o=r(t=t||[],i=i||{});return function(t){t=t||[];for(var s=0;s<o.length;s++){var a=n(o[s]);e[a].references--}for(var c=r(t,i),l=0;l<o.length;l++){var u=n(o[l]);0===e[u].references&&(e[u].updater(),e.splice(u,1))}o=c}}},90569:function(t){"use strict";var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},19216:function(t){"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},3565:function(t,e,n){"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},7795:function(t){"use strict";t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},44589:function(t){"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},43842:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return r}});class r{constructor(t=[],e=i){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let t=(this.length>>1)-1;t>=0;t--)this._down(t)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:n}=this,r=e[t];for(;t>0;){const i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r}_down(t){const{data:e,compare:n}=this,r=this.length>>1,i=e[t];for(;t<r;){let r=1+(t<<1),o=e[r];const s=r+1;if(s<this.length&&n(e[s],o)<0&&(r=s,o=e[s]),n(o,i)>=0)break;e[t]=o,t=r}e[t]=i}}function i(t,e){return t<e?-1:t>e?1:0}},8178:function(t,e,n){"use strict";n(28514)},68129:function(t,e,n){"use strict";n(71818)},51953:function(t,e,n){"use strict";n(77509)},33690:function(t,e,n){"use strict";n(28514)},77509:function(){"use strict";var t=new ArrayBuffer(16);new Float64Array(t),new Uint32Array(t)},12485:function(t,e,n){"use strict";n(65443)},71818:function(t,e,n){"use strict";n(77509)},28514:function(t,e,n){"use strict";Object.prototype.hasOwnProperty},35279:function(t,e,n){"use strict";n(28514)},65443:function(t,e,n){"use strict";n(8178),n(68129),n(51953),n(33690),n(28514),n(35279)},20675:function(t,e){!function(t){"use strict";function e(){}function n(t){this.message=t||""}function r(t){this.message=t||""}function i(t){this.message=t||""}function o(){}function s(t){return null===t?Dt:t.color}function a(t){return null===t?null:t.parent}function c(t,e){null!==t&&(t.color=e)}function l(t){return null===t?null:t.left}function u(t){return null===t?null:t.right}function h(){this.root_=null,this.size_=0}function p(){}function f(){this.array_=[],arguments[0]instanceof xt&&this.addAll(arguments[0])}function d(){}function g(t){this.message=t||""}function m(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var y=function(){};y.prototype.interfaces_=function(){return[]},y.prototype.getClass=function(){return y},y.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var _=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),v=function(){},x={MAX_VALUE:{configurable:!0}};v.isNaN=function(t){return Number.isNaN(t)},v.doubleToLongBits=function(t){return t},v.longBitsToDouble=function(t){return t},v.isInfinite=function(t){return!Number.isFinite(t)},x.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(v,x);var b=function(){},w=function(){},E=function(){},T=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},S={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};T.prototype.setOrdinate=function(t,e){switch(t){case T.X:this.x=e;break;case T.Y:this.y=e;break;case T.Z:this.z=e;break;default:throw new _("Invalid ordinate index: "+t)}},T.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!y.equalsWithTolerance(this.x,e.x,n)&&!!y.equalsWithTolerance(this.y,e.y,n)}},T.prototype.getOrdinate=function(t){switch(t){case T.X:return this.x;case T.Y:return this.y;case T.Z:return this.z}throw new _("Invalid ordinate index: "+t)},T.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||v.isNaN(this.z))&&v.isNaN(t.z)},T.prototype.equals=function(t){return t instanceof T&&this.equals2D(t)},T.prototype.equalInZ=function(t,e){return y.equalsWithTolerance(this.z,t.z,e)},T.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},T.prototype.clone=function(){},T.prototype.copy=function(){return new T(this)},T.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},T.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},T.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},T.prototype.hashCode=function(){var t=17;return 37*(t=37*t+T.hashCode(this.x))+T.hashCode(this.y)},T.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},T.prototype.interfaces_=function(){return[b,w,e]},T.prototype.getClass=function(){return T},T.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=v.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},S.DimensionalComparator.get=function(){return k},S.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},S.NULL_ORDINATE.get=function(){return v.NaN},S.X.get=function(){return 0},S.Y.get=function(){return 1},S.Z.get=function(){return 2},Object.defineProperties(T,S);var k=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new _("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};k.prototype.compare=function(t,e){var n=t,r=e,i=k.compare(n.x,r.x);if(0!==i)return i;var o=k.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:k.compare(n.z,r.z)},k.prototype.interfaces_=function(){return[E]},k.prototype.getClass=function(){return k},k.compare=function(t,e){return t<e?-1:t>e?1:v.isNaN(t)?v.isNaN(e)?0:-1:v.isNaN(e)?1:0};var A=function(){};A.prototype.create=function(){},A.prototype.interfaces_=function(){return[]},A.prototype.getClass=function(){return A};var M=function(){},I={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};M.prototype.interfaces_=function(){return[]},M.prototype.getClass=function(){return M},M.toLocationSymbol=function(t){switch(t){case M.EXTERIOR:return"e";case M.BOUNDARY:return"b";case M.INTERIOR:return"i";case M.NONE:return"-"}throw new _("Unknown location value: "+t)},I.INTERIOR.get=function(){return 0},I.BOUNDARY.get=function(){return 1},I.EXTERIOR.get=function(){return 2},I.NONE.get=function(){return-1},Object.defineProperties(M,I);var C=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},O=function(){},P={LOG_10:{configurable:!0}};O.prototype.interfaces_=function(){return[]},O.prototype.getClass=function(){return O},O.log10=function(t){var e=Math.log(t);return v.isInfinite(e)||v.isNaN(e)?e:e/O.LOG_10},O.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},O.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},O.wrap=function(t,e){return t<0?e- -t%e:t%e},O.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var r=arguments[1],i=arguments[2],o=arguments[3],s=arguments[0];return r>s&&(s=r),i>s&&(s=i),o>s&&(s=o),s}},O.average=function(t,e){return(t+e)/2},P.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(O,P);var L=function(t){this.str=t};L.prototype.append=function(t){this.str+=t},L.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},L.prototype.toString=function(t){return this.str};var D=function(t){this.value=t};D.prototype.intValue=function(){return this.value},D.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},D.isNaN=function(t){return Number.isNaN(t)};var R=function(){};R.isWhitespace=function(t){return t<=32&&t>=0||127===t},R.toUpperCase=function(t){return t.toUpperCase()};var N=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length)if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0]));else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r,i)}},j={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};N.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},N.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=N.magnitude(n._hi),i=N.TEN.pow(r);(n=n.divide(i)).gt(N.TEN)?(n=n.divide(N.TEN),r+=1):n.lt(N.ONE)&&(n=n.multiply(N.TEN),r-=1);for(var o=r+1,s=new L,a=N.MAX_PRINT_DIGITS-1,c=0;c<=a;c++){t&&c===o&&s.append(".");var l=Math.trunc(n._hi);if(l<0)break;var u=!1,h=0;l>9?(u=!0,h="9"):h="0"+l,s.append(h),n=n.subtract(N.valueOf(l)).multiply(N.TEN),u&&n.selfAdd(N.TEN);var p=!0,f=N.magnitude(n._hi);if(f<0&&Math.abs(f)>=a-c&&(p=!1),!p)break}return e[0]=r,s.toString()},N.prototype.sqr=function(){return this.multiply(this)},N.prototype.doubleValue=function(){return this._hi+this._lo},N.prototype.subtract=function(){if(arguments[0]instanceof N){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},N.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},N.prototype.isZero=function(){return 0===this._hi&&0===this._lo},N.prototype.selfSubtract=function(){if(arguments[0]instanceof N){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},N.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},N.prototype.min=function(t){return this.le(t)?this:t},N.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof N){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,c=null,l=null,u=null,h=null;return c=this._hi/n,h=(i=(l=N.SPLIT*c)-(i=l-c))*(s=(h=N.SPLIT*n)-(s=h-n))-(u=c*n)+i*(a=n-s)+(o=c-i)*s+o*a,h=c+(l=(this._hi-u-h+this._lo-c*r)/n),this._hi=h,this._lo=c-h+l,this}},N.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},N.prototype.divide=function(){if(arguments[0]instanceof N){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,s=null,a=null,c=null;return n=(o=this._hi/t._hi)-(e=(s=N.SPLIT*o)-(e=s-o)),c=e*(r=(c=N.SPLIT*t._hi)-(r=c-t._hi))-(a=o*t._hi)+e*(i=t._hi-r)+n*r+n*i,s=(this._hi-a-c+this._lo-o*t._lo)/t._hi,new N(c=o+s,o-c+s)}if("number"==typeof arguments[0]){var l=arguments[0];return v.isNaN(l)?N.createNaN():N.copy(this).selfDivide(l,0)}},N.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},N.prototype.pow=function(t){if(0===t)return N.valueOf(1);var e=new N(this),n=N.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},N.prototype.ceil=function(){if(this.isNaN())return N.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new N(t,e)},N.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},N.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},N.prototype.setValue=function(){if(arguments[0]instanceof N){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},N.prototype.max=function(t){return this.ge(t)?this:t},N.prototype.sqrt=function(){if(this.isZero())return N.valueOf(0);if(this.isNegative())return N.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=N.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},N.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof N){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,s=null,a=null;return o=(i=this._hi+e)-(s=i-this._hi),r=(a=(o=e-s+(this._hi-o))+this._lo)+(i-(n=i+a)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var c=arguments[0],l=arguments[1],u=null,h=null,p=null,f=null,d=null,g=null,m=null;f=this._hi+c,h=this._lo+l,d=f-(g=f-this._hi),p=h-(m=h-this._lo);var y=(u=f+(g=(d=c-g+(this._hi-d))+h))+(g=(p=l-m+(this._lo-p))+(g+(f-u))),_=g+(u-y);return this._hi=y,this._lo=_,this}},N.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof N){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,c=null,l=null;i=(c=N.SPLIT*this._hi)-this._hi,l=N.SPLIT*n,i=c-i,o=this._hi-i,s=l-n;var u=(c=this._hi*n)+(l=i*(s=l-s)-c+i*(a=n-s)+o*s+o*a+(this._hi*r+this._lo*n)),h=l+(i=c-u);return this._hi=u,this._lo=h,this}},N.prototype.selfSqr=function(){return this.selfMultiply(this)},N.prototype.floor=function(){if(this.isNaN())return N.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new N(t,e)},N.prototype.negate=function(){return this.isNaN()?this:new N(-this._hi,-this._lo)},N.prototype.clone=function(){},N.prototype.multiply=function(){if(arguments[0]instanceof N){var t=arguments[0];return t.isNaN()?N.createNaN():N.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return v.isNaN(e)?N.createNaN():N.copy(this).selfMultiply(e,0)}},N.prototype.isNaN=function(){return v.isNaN(this._hi)},N.prototype.intValue=function(){return Math.trunc(this._hi)},N.prototype.toString=function(){var t=N.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},N.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+N.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+N.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},N.prototype.reciprocal=function(){var t=null,e=null,n=null,r=null,i=null,o=null,s=null,a=null;e=(i=1/this._hi)-(t=(o=N.SPLIT*i)-(t=o-i)),n=(a=N.SPLIT*this._hi)-this._hi;var c=i+(o=(1-(s=i*this._hi)-(a=t*(n=a-n)-s+t*(r=this._hi-n)+e*n+e*r)-i*this._lo)/this._hi);return new N(c,i-c+o)},N.prototype.toSciNotation=function(){if(this.isZero())return N.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=N.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},N.prototype.abs=function(){return this.isNaN()?N.NaN:this.isNegative()?this.negate():new N(this)},N.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},N.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},N.prototype.add=function(){if(arguments[0]instanceof N){var t=arguments[0];return N.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return N.copy(this).selfAdd(e)}},N.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof N){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},N.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},N.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},N.prototype.trunc=function(){return this.isNaN()?N.NaN:this.isPositive()?this.floor():this.ceil()},N.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},N.prototype.interfaces_=function(){return[e,b,w]},N.prototype.getClass=function(){return N},N.sqr=function(t){return N.valueOf(t).selfMultiply(t)},N.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return N.parse(t)}if("number"==typeof arguments[0])return new N(arguments[0])},N.sqrt=function(t){return N.valueOf(t).sqrt()},N.parse=function(t){for(var e=0,n=t.length;R.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new N,s=0,a=0,c=0;!(e>=n);){var l=t.charAt(e);if(e++,R.isDigit(l)){var u=l-"0";o.selfMultiply(N.TEN),o.selfAdd(u),s++}else{if("."!==l){if("e"===l||"E"===l){var h=t.substring(e);try{c=D.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+l+"' at position "+e+" in string "+t)}a=s}}var p=o,f=s-a-c;if(0===f)p=o;else if(f>0){var d=N.TEN.pow(f);p=o.divide(d)}else if(f<0){var g=N.TEN.pow(-f);p=o.multiply(g)}return r?p.negate():p},N.createNaN=function(){return new N(v.NaN,v.NaN)},N.copy=function(t){return new N(t)},N.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},N.stringOfChar=function(t,e){for(var n=new L,r=0;r<e;r++)n.append(t);return n.toString()},j.PI.get=function(){return new N(3.141592653589793,12246467991473532e-32)},j.TWO_PI.get=function(){return new N(6.283185307179586,24492935982947064e-32)},j.PI_2.get=function(){return new N(1.5707963267948966,6123233995736766e-32)},j.E.get=function(){return new N(2.718281828459045,14456468917292502e-32)},j.NaN.get=function(){return new N(v.NaN,v.NaN)},j.EPS.get=function(){return 123259516440783e-46},j.SPLIT.get=function(){return 134217729},j.MAX_PRINT_DIGITS.get=function(){return 32},j.TEN.get=function(){return N.valueOf(10)},j.ONE.get=function(){return N.valueOf(1)},j.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},j.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(N,j);var z=function(){},B={DP_SAFE_EPSILON:{configurable:!0}};z.prototype.interfaces_=function(){return[]},z.prototype.getClass=function(){return z},z.orientationIndex=function(t,e,n){var r=z.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=N.valueOf(e.x).selfAdd(-t.x),o=N.valueOf(e.y).selfAdd(-t.y),s=N.valueOf(n.x).selfAdd(-e.x),a=N.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},z.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},z.intersection=function(t,e,n,r){var i=N.valueOf(r.y).selfSubtract(n.y).selfMultiply(N.valueOf(e.x).selfSubtract(t.x)),o=N.valueOf(r.x).selfSubtract(n.x).selfMultiply(N.valueOf(e.y).selfSubtract(t.y)),s=i.subtract(o),a=N.valueOf(r.x).selfSubtract(n.x).selfMultiply(N.valueOf(t.y).selfSubtract(n.y)),c=N.valueOf(r.y).selfSubtract(n.y).selfMultiply(N.valueOf(t.x).selfSubtract(n.x)),l=a.subtract(c).selfDivide(s).doubleValue(),u=N.valueOf(t.x).selfAdd(N.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),h=N.valueOf(e.x).selfSubtract(t.x).selfMultiply(N.valueOf(t.y).selfSubtract(n.y)),p=N.valueOf(e.y).selfSubtract(t.y).selfMultiply(N.valueOf(t.x).selfSubtract(n.x)),f=h.subtract(p).selfDivide(s).doubleValue(),d=N.valueOf(n.y).selfAdd(N.valueOf(r.y).selfSubtract(n.y).selfMultiply(f)).doubleValue();return new T(u,d)},z.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=i-o;if(i>0){if(o<=0)return z.signum(s);r=i+o}else{if(!(i<0))return z.signum(s);if(o>=0)return z.signum(s);r=-i-o}var a=z.DP_SAFE_EPSILON*r;return s>=a||-s>=a?z.signum(s):2},z.signum=function(t){return t>0?1:t<0?-1:0},B.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(z,B);var F=function(){},U={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};U.X.get=function(){return 0},U.Y.get=function(){return 1},U.Z.get=function(){return 2},U.M.get=function(){return 3},F.prototype.setOrdinate=function(t,e,n){},F.prototype.size=function(){},F.prototype.getOrdinate=function(t,e){},F.prototype.getCoordinate=function(){},F.prototype.getCoordinateCopy=function(t){},F.prototype.getDimension=function(){},F.prototype.getX=function(t){},F.prototype.clone=function(){},F.prototype.expandEnvelope=function(t){},F.prototype.copy=function(){},F.prototype.getY=function(t){},F.prototype.toCoordinateArray=function(){},F.prototype.interfaces_=function(){return[w]},F.prototype.getClass=function(){return F},Object.defineProperties(F,U);var V=function(){},q=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(V),W=function(){};W.arraycopy=function(t,e,n,r,i){for(var o=0,s=e;s<e+i;s++)n[r+o]=t[s],o++},W.getProperty=function(t){return{"line.separator":"\n"}[t]};var G=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof T&&arguments[1]instanceof T){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var c=arguments[0],l=arguments[1],u=arguments[2];this.x=c,this.y=l,this.w=u}else if(4===arguments.length){var h=arguments[0],p=arguments[1],f=arguments[2],d=arguments[3],g=h.y-p.y,m=p.x-h.x,y=h.x*p.y-p.x*h.y,_=f.y-d.y,v=d.x-f.x,x=f.x*d.y-d.x*f.y;this.x=m*x-v*y,this.y=_*y-g*x,this.w=g*v-_*m}};G.prototype.getY=function(){var t=this.y/this.w;if(v.isNaN(t)||v.isInfinite(t))throw new q;return t},G.prototype.getX=function(){var t=this.x/this.w;if(v.isNaN(t)||v.isInfinite(t))throw new q;return t},G.prototype.getCoordinate=function(){var t=new T;return t.x=this.getX(),t.y=this.getY(),t},G.prototype.interfaces_=function(){return[]},G.prototype.getClass=function(){return G},G.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-r.y,c=r.x-n.x,l=n.x*r.y-r.x*n.y,u=i*c-a*o,h=(o*l-c*s)/u,p=(a*s-i*l)/u;if(v.isNaN(h)||v.isInfinite(h)||v.isNaN(p)||v.isInfinite(p))throw new q;return new T(h,p)};var $=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof T){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],c=arguments[3];this.init(o,s,a,c)}},H={serialVersionUID:{configurable:!0}};$.prototype.getArea=function(){return this.getWidth()*this.getHeight()},$.prototype.equals=function(t){if(!(t instanceof $))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},$.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new $;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new $(e,r,n,i)},$.prototype.isNull=function(){return this._maxx<this._minx},$.prototype.getMaxX=function(){return this._maxx},$.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof T){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof $){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},$.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof $){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof T){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},$.prototype.getMinY=function(){return this._miny},$.prototype.getMinX=function(){return this._minx},$.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof T){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof $){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},$.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},$.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},$.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},$.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},$.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},$.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},$.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},$.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},$.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},$.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof $){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof T){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},$.prototype.centre=function(){return this.isNull()?null:new T((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},$.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof T){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof $){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},$.prototype.getMaxY=function(){return this._maxy},$.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},$.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+T.hashCode(this._minx))+T.hashCode(this._maxx))+T.hashCode(this._miny))+T.hashCode(this._maxy)},$.prototype.interfaces_=function(){return[b,e]},$.prototype.getClass=function(){return $},$.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),c=Math.max(o.x,s.x),l=Math.min(r.x,i.x),u=Math.max(r.x,i.x);return!(l>c||u<a||(a=Math.min(o.y,s.y),c=Math.max(o.y,s.y),l=Math.min(r.y,i.y),u=Math.max(r.y,i.y),l>c||u<a))}},H.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties($,H);var Z={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Y=function(t){this.geometryFactory=t||new ye};Y.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=Z.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=Z.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],K[n]&&(e=K[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},Y.prototype.write=function(t){return this.extractGeometry(t)},Y.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!X[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+X[e].apply(this,[t])+")"};var X={coordinate:function(t){return t.x+" "+t.y},point:function(t){return X.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+X.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(X.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(X.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+X.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+X.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+X.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+X.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},K={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Z.spaces);return this.geometryFactory.createPoint(new T(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Z.trimParens,"$1"),r.push(K.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Z.spaces),r.push(new T(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Z.spaces),r.push(new T(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(Z.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Z.trimParens,"$1"),r.push(K.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,r,i,o=t.trim().split(Z.parenComma),s=[],a=0,c=o.length;a<c;++a)e=o[a].replace(Z.trimParens,"$1"),n=K.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===a?i=r:s.push(r);return this.geometryFactory.createPolygon(i,s)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(Z.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Z.trimParens,"$1"),r.push(K.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},J=function(t){this.parser=new Y(t)};J.prototype.write=function(t){return this.parser.write(t)},J.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var Q=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),tt=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Q),et=function(){};et.prototype.interfaces_=function(){return[]},et.prototype.getClass=function(){return et},et.shouldNeverReachHere=function(){if(0===arguments.length)et.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new tt("Should never reach here"+(null!==t?": "+t:""))}},et.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],et.isTrue(t,null);else if(2===arguments.length&&(e=arguments[1],!(t=arguments[0])))throw null===e?new tt:new tt(e)},et.equals=function(){var t,e,n;if(2===arguments.length)t=arguments[0],e=arguments[1],et.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new tt("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var nt=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new T,this._intPt[1]=new T,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},rt={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};nt.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},nt.prototype.getTopologySummary=function(){var t=new L;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},nt.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},nt.prototype.getIntersectionNum=function(){return this._result},nt.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},nt.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},nt.prototype.setPrecisionModel=function(t){this._precisionModel=t},nt.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},nt.prototype.getIntersection=function(t){return this._intPt[t]},nt.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},nt.prototype.hasIntersection=function(){return this._result!==nt.NO_INTERSECTION},nt.prototype.getEdgeDistance=function(t,e){return nt.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},nt.prototype.isCollinear=function(){return this._result===nt.COLLINEAR_INTERSECTION},nt.prototype.toString=function(){return J.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+J.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},nt.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},nt.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},nt.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},nt.prototype.interfaces_=function(){return[]},nt.prototype.getClass=function(){return nt},nt.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=r>i?s:a)||t.equals(e)||(o=Math.max(s,a))}return et.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},nt.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return et.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},rt.DONT_INTERSECT.get=function(){return 0},rt.DO_INTERSECT.get=function(){return 1},rt.COLLINEAR.get=function(){return 2},rt.NO_INTERSECTION.get=function(){return 0},rt.POINT_INTERSECTION.get=function(){return 1},rt.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(nt,rt);var it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new $(this._inputLines[0][0],this._inputLines[0][1]),n=new $(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,$.intersects(n,r,e)&&0===at.orientationIndex(n,r,e)&&0===at.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=G.intersection(t,n,r,i)}catch(s){if(!(s instanceof q))throw s;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new T(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=z.intersection(t,e,n,r),s=this.isInSegmentEnvelopes(o);W.out.println("DD in env = "+s+"  --------------------- "+o),i.distance(o)>1e-4&&W.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new T(t),o=new T(e),s=new T(n),a=new T(r),c=new T;this.normalizeToEnvCentre(i,o,s,a,c);var l=this.safeHCoordinateIntersection(i,o,s,a);return l.x+=c.x,l.y+=c.y,l},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=$.intersects(e,n,r),s=$.intersects(e,n,i),a=$.intersects(r,i,e),c=$.intersects(r,i,n);return o&&s?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):a&&c?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||s||c?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&c?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||c?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&c?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,c=t.y>e.y?t.y:e.y,l=n.x<r.x?n.x:r.x,u=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,p=n.y>r.y?n.y:r.y,f=((o>l?o:l)+(a<h?a:h))/2,d=((s>u?s:u)+(c<p?c:p))/2;i.x=f,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!$.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=at.orientationIndex(e,n,r),s=at.orientationIndex(e,n,i);if(o>0&&s>0||o<0&&s<0)return t.NO_INTERSECTION;var a=at.orientationIndex(r,i,e),c=at.orientationIndex(r,i,n);return a>0&&c>0||a<0&&c<0?t.NO_INTERSECTION:0===o&&0===s&&0===a&&0===c?this.computeCollinearIntersection(e,n,r,i):(0===o||0===s||0===a||0===c?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new T(r):0===s?this._intPt[0]=new T(i):0===a?this._intPt[0]=new T(e):0===c&&(this._intPt[0]=new T(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=at.distancePointLine(t,n,r),s=at.distancePointLine(e,n,r);return s<o&&(o=s,i=e),(s=at.distancePointLine(n,t,e))<o&&(o=s,i=n),(s=at.distancePointLine(r,t,e))<o&&(o=s,i=r),i},e}(nt),ot=function(){};ot.prototype.interfaces_=function(){return[]},ot.prototype.getClass=function(){return ot},ot.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,s=n.y-e.y;return ot.signOfDet2x2(r,i,o,s)},ot.signOfDet2x2=function(t,e,n,r){var i=null,o=null,s=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(s=Math.floor(n/t))*e)<0)return-i;if(r>e)return i;if(t>(n-=s*t)+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(s=Math.floor(t/n))*r)<0)return i;if(e>r)return-i;if(n>(t-=s*n)+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var st=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};st.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,c=ot.signOfDet2x2(i,o,s,a);if(0===c)return this._isPointOnSegment=!0,null;a<o&&(c=-c),c>0&&this._crossingCount++}},st.prototype.isPointInPolygon=function(){return this.getLocation()!==M.EXTERIOR},st.prototype.getLocation=function(){return this._isPointOnSegment?M.BOUNDARY:this._crossingCount%2==1?M.INTERIOR:M.EXTERIOR},st.prototype.isOnSegment=function(){return this._isPointOnSegment},st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st},st.locatePointInRing=function(){if(arguments[0]instanceof T&&C(arguments[1],F)){for(var t=arguments[1],e=new st(arguments[0]),n=new T,r=new T,i=1;i<t.size();i++)if(t.getCoordinate(i,n),t.getCoordinate(i-1,r),e.countSegment(n,r),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof T&&arguments[1]instanceof Array){for(var o=arguments[1],s=new st(arguments[0]),a=1;a<o.length;a++){var c=o[a],l=o[a-1];if(s.countSegment(c,l),s.isOnSegment())return s.getLocation()}return s.getLocation()}};var at=function(){},ct={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};at.prototype.interfaces_=function(){return[]},at.prototype.getClass=function(){return at},at.orientationIndex=function(t,e,n){return z.orientationIndex(t,e,n)},at.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(C(arguments[0],F)){var s=arguments[0],a=s.size();if(a<3)return 0;var c=new T,l=new T,u=new T;s.getCoordinate(0,l),s.getCoordinate(1,u);var h=l.x;u.x-=h;for(var p=0,f=1;f<a-1;f++)c.y=l.y,l.x=u.x,l.y=u.y,s.getCoordinate(f+1,u),u.x-=h,p+=l.x*(c.y-u.y);return p/2}},at.distanceLineLine=function(t,e,n,r){if(t.equals(e))return at.distancePointLine(t,n,r);if(n.equals(r))return at.distancePointLine(r,t,e);var i=!1;if($.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var s=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,c=s/o;(c<0||c>1||a<0||a>1)&&(i=!0)}}else i=!0;return i?O.min(at.distancePointLine(t,n,r),at.distancePointLine(e,n,r),at.distancePointLine(n,t,e),at.distancePointLine(r,t,e)):0},at.isPointInRing=function(t,e){return at.locatePointInRing(t,e)!==M.EXTERIOR},at.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new T;t.getCoordinate(0,r);for(var i=r.x,o=r.y,s=1;s<e;s++){t.getCoordinate(s,r);var a=r.x,c=r.y,l=a-i,u=c-o;n+=Math.sqrt(l*l+u*u),i=a,o=c}return n},at.isCCW=function(t){var e=t.length-1;if(e<3)throw new _("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var s=r;do{(s-=1)<0&&(s=e)}while(t[s].equals2D(n)&&s!==r);var a=r;do{a=(a+1)%e}while(t[a].equals2D(n)&&a!==r);var c=t[s],l=t[a];if(c.equals2D(n)||l.equals2D(n)||c.equals2D(l))return!1;var u=at.computeOrientation(c,n,l);return 0===u?c.x>l.x:u>0},at.locatePointInRing=function(t,e){return st.locatePointInRing(t,e)},at.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},at.computeOrientation=function(t,e,n){return at.orientationIndex(t,e,n)},at.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new _("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=at.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var c=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),l=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/c;if(l<=0)return o.distance(s);if(l>=1)return o.distance(a);var u=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/c;return Math.abs(u)*Math.sqrt(c)}},at.isOnLine=function(t,e){for(var n=new it,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},ct.CLOCKWISE.get=function(){return-1},ct.RIGHT.get=function(){return at.CLOCKWISE},ct.COUNTERCLOCKWISE.get=function(){return 1},ct.LEFT.get=function(){return at.COUNTERCLOCKWISE},ct.COLLINEAR.get=function(){return 0},ct.STRAIGHT.get=function(){return at.COLLINEAR},Object.defineProperties(at,ct);var lt=function(){};lt.prototype.filter=function(t){},lt.prototype.interfaces_=function(){return[]},lt.prototype.getClass=function(){return lt};var ut=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},ht={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};ut.prototype.isGeometryCollection=function(){return this.getSortIndex()===ut.SORTINDEX_GEOMETRYCOLLECTION},ut.prototype.getFactory=function(){return this._factory},ut.prototype.getGeometryN=function(t){return this},ut.prototype.getArea=function(){return 0},ut.prototype.isRectangle=function(){return!1},ut.prototype.equals=function(){if(arguments[0]instanceof ut){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof ut))return!1;var n=e;return this.equalsExact(n)}},ut.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},ut.prototype.geometryChanged=function(){this.apply(ut.geometryChangedFilter)},ut.prototype.geometryChangedAction=function(){this._envelope=null},ut.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},ut.prototype.getLength=function(){return 0},ut.prototype.getNumGeometries=function(){return 1},ut.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},ut.prototype.getUserData=function(){return this._userData},ut.prototype.getSRID=function(){return this._SRID},ut.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},ut.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===ut.SORTINDEX_GEOMETRYCOLLECTION)throw new _("This method does not support GeometryCollection arguments")},ut.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},ut.prototype.norm=function(){var t=this.copy();return t.normalize(),t},ut.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},ut.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new $(this._envelope)},ut.prototype.setSRID=function(t){this._SRID=t},ut.prototype.setUserData=function(t){this._userData=t},ut.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),s=i.compareTo(o);if(0!==s)return s}return n.hasNext()?1:r.hasNext()?-1:0},ut.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},ut.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===ut.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===ut.SORTINDEX_MULTIPOINT||this.getSortIndex()===ut.SORTINDEX_MULTILINESTRING||this.getSortIndex()===ut.SORTINDEX_MULTIPOLYGON},ut.prototype.interfaces_=function(){return[w,b,e]},ut.prototype.getClass=function(){return ut},ut.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},ut.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},ht.serialVersionUID.get=function(){return 0x799ea46522854c00},ht.SORTINDEX_POINT.get=function(){return 0},ht.SORTINDEX_MULTIPOINT.get=function(){return 1},ht.SORTINDEX_LINESTRING.get=function(){return 2},ht.SORTINDEX_LINEARRING.get=function(){return 3},ht.SORTINDEX_MULTILINESTRING.get=function(){return 4},ht.SORTINDEX_POLYGON.get=function(){return 5},ht.SORTINDEX_MULTIPOLYGON.get=function(){return 6},ht.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},ht.geometryChangedFilter.get=function(){return pt},Object.defineProperties(ut,ht);var pt=function(){};pt.interfaces_=function(){return[lt]},pt.filter=function(t){t.geometryChangedAction()};var ft=function(){};ft.prototype.filter=function(t){},ft.prototype.interfaces_=function(){return[]},ft.prototype.getClass=function(){return ft};var dt=function(){},gt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};dt.prototype.isInBoundary=function(t){},dt.prototype.interfaces_=function(){return[]},dt.prototype.getClass=function(){return dt},gt.Mod2BoundaryNodeRule.get=function(){return mt},gt.EndPointBoundaryNodeRule.get=function(){return yt},gt.MultiValentEndPointBoundaryNodeRule.get=function(){return _t},gt.MonoValentEndPointBoundaryNodeRule.get=function(){return vt},gt.MOD2_BOUNDARY_RULE.get=function(){return new mt},gt.ENDPOINT_BOUNDARY_RULE.get=function(){return new yt},gt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new _t},gt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new vt},gt.OGC_SFS_BOUNDARY_RULE.get=function(){return dt.MOD2_BOUNDARY_RULE},Object.defineProperties(dt,gt);var mt=function(){};mt.prototype.isInBoundary=function(t){return t%2==1},mt.prototype.interfaces_=function(){return[dt]},mt.prototype.getClass=function(){return mt};var yt=function(){};yt.prototype.isInBoundary=function(t){return t>0},yt.prototype.interfaces_=function(){return[dt]},yt.prototype.getClass=function(){return yt};var _t=function(){};_t.prototype.isInBoundary=function(t){return t>1},_t.prototype.interfaces_=function(){return[dt]},_t.prototype.getClass=function(){return _t};var vt=function(){};vt.prototype.isInBoundary=function(t){return 1===t},vt.prototype.interfaces_=function(){return[dt]},vt.prototype.getClass=function(){return vt};var xt=function(){};xt.prototype.add=function(){},xt.prototype.addAll=function(){},xt.prototype.isEmpty=function(){},xt.prototype.iterator=function(){},xt.prototype.size=function(){},xt.prototype.toArray=function(){},xt.prototype.remove=function(){},(n.prototype=new Error).name="IndexOutOfBoundsException";var bt=function(){};bt.prototype.hasNext=function(){},bt.prototype.next=function(){},bt.prototype.remove=function(){};var wt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(xt);(r.prototype=new Error).name="NoSuchElementException";var Et=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof xt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,xt]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new Tt(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new n;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(wt),Tt=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new r;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(bt),St=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[1],n=!1,r=arguments[0].iterator();r.hasNext();)this.add(r.next(),e),n=!0;return n}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],r=arguments[1];return this.add(n,r,!0),!0}if(arguments[0]instanceof T&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(i))return null;t.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1];return this.add(o,s),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var a=arguments[0],c=arguments[1];if(arguments[2])for(var l=0;l<a.length;l++)this.add(a[l],c);else for(var u=a.length-1;u>=0;u--)this.add(a[u],c);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof T){var h=arguments[0],p=arguments[1];if(!arguments[2]){var f=this.size();if(f>0){if(h>0&&this.get(h-1).equals2D(p))return null;if(h<f&&this.get(h).equals2D(p))return null}}t.prototype.add.call(this,h,p)}}else if(4===arguments.length){var d=arguments[0],g=arguments[1],m=arguments[2],y=arguments[3],_=1;m>y&&(_=-1);for(var v=m;v!==y;v+=_)this.add(d[v],g);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new T(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(Et),kt=function(){},At={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};At.ForwardComparator.get=function(){return Mt},At.BidirectionalComparator.get=function(){return It},At.coordArrayType.get=function(){return new Array(0).fill(null)},kt.prototype.interfaces_=function(){return[]},kt.prototype.getClass=function(){return kt},kt.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},kt.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(kt.indexOf(r,e)<0)return r}return null},kt.scroll=function(t,e){var n=kt.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);W.arraycopy(t,n,r,0,t.length-n),W.arraycopy(t,0,r,t.length-n,n),W.arraycopy(r,0,t,0,t.length)},kt.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(0!==o.compare(r[s],i[s]))return!1;return!0}},kt.intersection=function(t,e){for(var n=new St,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},kt.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},kt.removeRepeatedPoints=function(t){return kt.hasRepeatedPoints(t)?new St(t,!1).toCoordinateArray():t},kt.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},kt.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},kt.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new T(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],c=0;c<a;c++)o[s+c]=new T(r[i+c])},kt.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},kt.envelope=function(t){for(var e=new $,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},kt.toCoordinateArray=function(t){return t.toArray(kt.coordArrayType)},kt.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},kt.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},kt.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},kt.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},kt.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},kt.extract=function(t,e,n){e=O.clamp(e,0,t.length);var r=(n=O.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,s=e;s<=n;s++)i[o++]=t[s];return i},Object.defineProperties(kt,At);var Mt=function(){};Mt.prototype.compare=function(t,e){return kt.compare(t,e)},Mt.prototype.interfaces_=function(){return[E]},Mt.prototype.getClass=function(){return Mt};var It=function(){};It.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=kt.compare(n,r);return kt.isEqualReversed(n,r)?0:i},It.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=kt.increasingDirection(n),o=kt.increasingDirection(r),s=i>0?0:n.length-1,a=o>0?0:n.length-1,c=0;c<n.length;c++){var l=n[s].compareTo(r[a]);if(0!==l)return l;s+=i,a+=o}return 0},It.prototype.interfaces_=function(){return[E]},It.prototype.getClass=function(){return It};var Ct=function(){};Ct.prototype.get=function(){},Ct.prototype.put=function(){},Ct.prototype.size=function(){},Ct.prototype.values=function(){},Ct.prototype.entrySet=function(){};var Ot=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ct);(i.prototype=new Error).name="OperationNotSupported",(o.prototype=new xt).contains=function(){};var Pt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof xt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Lt(this)},e}(o),Lt=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new r;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new i},e}(bt),Dt=0;(h.prototype=new Ot).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},h.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Dt,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var s={key:t,left:null,right:null,value:e,parent:n,color:Dt,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},h.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(a(t)===l(a(a(t)))){var e=u(a(a(t)));1===s(e)?(c(a(t),Dt),c(e,Dt),c(a(a(t)),1),t=a(a(t))):(t===u(a(t))&&(t=a(t),this.rotateLeft(t)),c(a(t),Dt),c(a(a(t)),1),this.rotateRight(a(a(t))))}else{var n=l(a(a(t)));1===s(n)?(c(a(t),Dt),c(n,Dt),c(a(a(t)),1),t=a(a(t))):(t===l(a(t))&&(t=a(t),this.rotateRight(t)),c(a(t),Dt),c(a(a(t)),1),this.rotateLeft(a(a(t))))}this.root_.color=Dt},h.prototype.values=function(){var t=new Et,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=h.successor(e));)t.add(e.value);return t},h.prototype.entrySet=function(){var t=new Pt,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=h.successor(e));)t.add(e);return t},h.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},h.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},h.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},h.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},h.prototype.size=function(){return this.size_};var Rt=function(){};Rt.prototype.interfaces_=function(){return[]},Rt.prototype.getClass=function(){return Rt},p.prototype=new o,(f.prototype=new p).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},f.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},f.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},f.prototype.remove=function(t){throw new i},f.prototype.size=function(){return this.array_.length},f.prototype.isEmpty=function(){return 0===this.array_.length},f.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},f.prototype.iterator=function(){return new Nt(this)};var Nt=function(t){this.treeSet_=t,this.position_=0};Nt.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new r;return this.treeSet_.array_[this.position_++]},Nt.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Nt.prototype.remove=function(){throw new i};var jt=function(){};jt.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},jt.asList=function(t){for(var e=new Et,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var zt=function(){},Bt={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Bt.P.get=function(){return 0},Bt.L.get=function(){return 1},Bt.A.get=function(){return 2},Bt.FALSE.get=function(){return-1},Bt.TRUE.get=function(){return-2},Bt.DONTCARE.get=function(){return-3},Bt.SYM_FALSE.get=function(){return"F"},Bt.SYM_TRUE.get=function(){return"T"},Bt.SYM_DONTCARE.get=function(){return"*"},Bt.SYM_P.get=function(){return"0"},Bt.SYM_L.get=function(){return"1"},Bt.SYM_A.get=function(){return"2"},zt.prototype.interfaces_=function(){return[]},zt.prototype.getClass=function(){return zt},zt.toDimensionSymbol=function(t){switch(t){case zt.FALSE:return zt.SYM_FALSE;case zt.TRUE:return zt.SYM_TRUE;case zt.DONTCARE:return zt.SYM_DONTCARE;case zt.P:return zt.SYM_P;case zt.L:return zt.SYM_L;case zt.A:return zt.SYM_A}throw new _("Unknown dimension value: "+t)},zt.toDimensionValue=function(t){switch(R.toUpperCase(t)){case zt.SYM_FALSE:return zt.FALSE;case zt.SYM_TRUE:return zt.TRUE;case zt.SYM_DONTCARE:return zt.DONTCARE;case zt.SYM_P:return zt.P;case zt.SYM_L:return zt.L;case zt.SYM_A:return zt.A}throw new _("Unknown dimension symbol: "+t)},Object.defineProperties(zt,Bt);var Ft=function(){};Ft.prototype.filter=function(t){},Ft.prototype.interfaces_=function(){return[]},Ft.prototype.getClass=function(){return Ft};var Ut=function(){};Ut.prototype.filter=function(t,e){},Ut.prototype.isDone=function(){},Ut.prototype.isGeometryChanged=function(){},Ut.prototype.interfaces_=function(){return[]},Ut.prototype.getClass=function(){return Ut};var Vt=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new _("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new $,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._geometries.length!==r._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(r._geometries[i],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();jt.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=zt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=zt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new f(jt.asList(this._geometries)),n=new f(jt.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[1],i=arguments[0],o=this.getNumGeometries(),s=i.getNumGeometries(),a=0;a<o&&a<s;){var c=this.getGeometryN(a),l=i.getGeometryN(a),u=c.compareToSameClass(l,r);if(0!==u)return u;a++}return a<o?1:a<s?-1:0}},e.prototype.apply=function(){if(C(arguments[0],ft))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(C(arguments[0],Ut)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(C(arguments[0],Ft)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(C(arguments[0],lt)){var s=arguments[0];s.filter(this);for(var a=0;a<this._geometries.length;a++)this._geometries[a].apply(s)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),et.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(ut),qt=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ut.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?zt.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Wt(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Rt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(Vt),Wt=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=dt.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};Wt.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Wt.prototype.getBoundary=function(){return this._geom instanceof Yt?this.boundaryLineString(this._geom):this._geom instanceof qt?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Wt.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Wt.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Wt.prototype.computeBoundaryCoordinates=function(t){var e=new Et;this._endpointMap=new h;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),s=o.getValue().count;this._bnRule.isInBoundary(s)&&e.add(o.getKey())}return kt.toCoordinateArray(e)},Wt.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Gt,this._endpointMap.put(t,e)),e.count++},Wt.prototype.interfaces_=function(){return[]},Wt.prototype.getClass=function(){return Wt},Wt.getBoundary=function(){return 1===arguments.length?new Wt(arguments[0]).getBoundary():2===arguments.length?new Wt(arguments[0],arguments[1]).getBoundary():void 0};var Gt=function(){this.count=null};Gt.prototype.interfaces_=function(){return[]},Gt.prototype.getClass=function(){return Gt};var $t=function(){},Ht={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};$t.prototype.interfaces_=function(){return[]},$t.prototype.getClass=function(){return $t},$t.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},$t.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",s=new function(){}(new function(){}($t.getStackTrace(r))),a=0;a<i;a++)try{o+=s.readLine()+$t.NEWLINE}catch(t){if(!(t instanceof d))throw t;et.shouldNeverReachHere()}return o}},$t.split=function(t,e){for(var n=e.length,r=new Et,i=""+t,o=i.indexOf(e);o>=0;){var s=i.substring(0,o);r.add(s),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var a=new Array(r.size()).fill(null),c=0;c<a.length;c++)a[c]=r.get(c);return a},$t.toString=function(){if(1===arguments.length){var t=arguments[0];return $t.SIMPLE_ORDINATE_FORMAT.format(t)}},$t.spaces=function(t){return $t.chars(" ",t)},Ht.NEWLINE.get=function(){return W.getProperty("line.separator")},Ht.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties($t,Ht);var Zt=function(){};Zt.prototype.interfaces_=function(){return[]},Zt.prototype.getClass=function(){return Zt},Zt.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},Zt.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,F.X)===t.getOrdinate(e-1,F.X)&&t.getOrdinate(0,F.Y)===t.getOrdinate(e-1,F.Y)},Zt.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var s=t.getOrdinate(i,o),a=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||v.isNaN(s)&&v.isNaN(a)))return!1}return!0},Zt.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(Zt.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)Zt.copy(e,i-1,r,o,1);return r},Zt.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)Zt.swap(t,r,e-r)},Zt.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},Zt.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)Zt.copyCoord(t,e+o,n,r+o)},Zt.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new L;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append($t.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},Zt.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Zt.createClosedRing(t,e,4):e.getOrdinate(0,F.X)===e.getOrdinate(n-1,F.X)&&e.getOrdinate(0,F.Y)===e.getOrdinate(n-1,F.Y)?e:Zt.createClosedRing(t,e,n+1)},Zt.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();Zt.copy(e,0,r,0,i);for(var o=i;o<n;o++)Zt.copy(e,0,r,o,1);return r};var Yt=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new $:this._points.expandEnvelope(new $)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._points.size()!==r._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),r._points.getCoordinate(i),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Zt.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?zt.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return at.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Zt.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(C(arguments[0],ft))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(C(arguments[0],Ut)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else(C(arguments[0],Ft)||C(arguments[0],lt))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Wt(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new _("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Rt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(ut),Xt=function(){};Xt.prototype.interfaces_=function(){return[]},Xt.prototype.getClass=function(){return Xt};var Kt=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new $;var t=new $;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return zt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(C(arguments[0],ft)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(C(arguments[0],Ut)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(C(arguments[0],Ft)||C(arguments[0],lt))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),et.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Xt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(ut),Jt=function(){};Jt.prototype.interfaces_=function(){return[]},Jt.prototype.getClass=function(){return Jt};var Qt=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new _("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new _("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(at.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(at.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var c=t.getX(a),l=t.getY(a);if(c!==o==(l!==s))return!1;o=c,s=l}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e,i=this._shell,o=r._shell;if(!i.equalsExact(o,n))return!1;if(this._holes.length!==r._holes.length)return!1;for(var s=0;s<this._holes.length;s++)if(!this._holes[s].equalsExact(r._holes[s],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);jt.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);W.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=kt.minCoordinate(e.getCoordinates());kt.scroll(r,i),W.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],at.isCCW(e.getCoordinates())===n&&kt.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[1],i=arguments[0],o=this._shell,s=i._shell,a=o.compareToSameClass(s,r);if(0!==a)return a;for(var c=this.getNumInteriorRing(),l=i.getNumInteriorRing(),u=0;u<c&&u<l;){var h=this.getInteriorRingN(u),p=i.getInteriorRingN(u),f=h.compareToSameClass(p,r);if(0!==f)return f;u++}return u<c?1:u<l?-1:0}},e.prototype.apply=function(t){if(C(t,ft)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(C(t,Ut)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(C(t,Ft))t.filter(this);else if(C(t,lt)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Jt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(ut),te=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ut.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return zt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Xt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(Vt),ee=function(t){function e(e,n){e instanceof T&&n instanceof ye&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ut.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return zt.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Zt.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new _("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new _("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Yt),ne=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ut.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new Et,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Jt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(Vt),re=function(t){this._factory=t||null,this._isUserDataCopied=!1},ie={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};re.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},re.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},re.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof Vt?this.editGeometryCollection(t,e):t instanceof Qt?this.editPolygon(t,e):t instanceof Kt||t instanceof Yt?e.edit(t,this._factory):(et.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},re.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new Et,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===te?this._factory.createMultiPoint(r.toArray([])):n.getClass()===qt?this._factory.createMultiLineString(r.toArray([])):n.getClass()===ne?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},re.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new Et,o=0;o<n.getNumInteriorRing();o++){var s=this.edit(n.getInteriorRingN(o),e);null===s||s.isEmpty()||i.add(s)}return this._factory.createPolygon(r,i.toArray([]))},re.prototype.interfaces_=function(){return[]},re.prototype.getClass=function(){return re},re.GeometryEditorOperation=function(){},ie.NoOpGeometryOperation.get=function(){return oe},ie.CoordinateOperation.get=function(){return se},ie.CoordinateSequenceOperation.get=function(){return ae},Object.defineProperties(re,ie);var oe=function(){};oe.prototype.edit=function(t,e){return t},oe.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},oe.prototype.getClass=function(){return oe};var se=function(){};se.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof ee?e.createLinearRing(n):t instanceof Yt?e.createLineString(n):t instanceof Kt?n.length>0?e.createPoint(n[0]):e.createPoint():t},se.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},se.prototype.getClass=function(){return se};var ae=function(){};ae.prototype.edit=function(t,e){return t instanceof ee?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Yt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Kt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},ae.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},ae.prototype.getClass=function(){return ae};var ce=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new T}else if(C(arguments[0],F)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=n.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],a=arguments[1];this._coordinates=new Array(s).fill(null),this._dimension=a;for(var c=0;c<s;c++)this._coordinates[c]=new T}},le={serialVersionUID:{configurable:!0}};ce.prototype.setOrdinate=function(t,e,n){switch(e){case F.X:this._coordinates[t].x=n;break;case F.Y:this._coordinates[t].y=n;break;case F.Z:this._coordinates[t].z=n;break;default:throw new _("invalid ordinateIndex")}},ce.prototype.size=function(){return this._coordinates.length},ce.prototype.getOrdinate=function(t,e){switch(e){case F.X:return this._coordinates[t].x;case F.Y:return this._coordinates[t].y;case F.Z:return this._coordinates[t].z}return v.NaN},ce.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},ce.prototype.getCoordinateCopy=function(t){return new T(this._coordinates[t])},ce.prototype.getDimension=function(){return this._dimension},ce.prototype.getX=function(t){return this._coordinates[t].x},ce.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new ce(t,this._dimension)},ce.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},ce.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new ce(t,this._dimension)},ce.prototype.toString=function(){if(this._coordinates.length>0){var t=new L(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},ce.prototype.getY=function(t){return this._coordinates[t].y},ce.prototype.toCoordinateArray=function(){return this._coordinates},ce.prototype.interfaces_=function(){return[F,e]},ce.prototype.getClass=function(){return ce},le.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(ce,le);var ue=function(){},he={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};ue.prototype.readResolve=function(){return ue.instance()},ue.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new ce(arguments[0]);if(C(arguments[0],F))return new ce(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new ce(t):new ce(t,e)}},ue.prototype.interfaces_=function(){return[A,e]},ue.prototype.getClass=function(){return ue},ue.instance=function(){return ue.instanceObject},he.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},he.instanceObject.get=function(){return new ue},Object.defineProperties(ue,he);var pe=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new Et,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new Pt;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(Ct),fe=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof ge){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},de={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};fe.prototype.equals=function(t){if(!(t instanceof fe))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},fe.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new D(n).compareTo(new D(r))},fe.prototype.getScale=function(){return this._scale},fe.prototype.isFloating=function(){return this._modelType===fe.FLOATING||this._modelType===fe.FLOATING_SINGLE},fe.prototype.getType=function(){return this._modelType},fe.prototype.toString=function(){var t="UNKNOWN";return this._modelType===fe.FLOATING?t="Floating":this._modelType===fe.FLOATING_SINGLE?t="Floating-Single":this._modelType===fe.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},fe.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return v.isNaN(t)||this._modelType===fe.FLOATING_SINGLE?t:this._modelType===fe.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof T){var e=arguments[0];if(this._modelType===fe.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},fe.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===fe.FLOATING?t=16:this._modelType===fe.FLOATING_SINGLE?t=6:this._modelType===fe.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},fe.prototype.setScale=function(t){this._scale=Math.abs(t)},fe.prototype.interfaces_=function(){return[e,b]},fe.prototype.getClass=function(){return fe},fe.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},de.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},de.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(fe,de);var ge=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},me={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};ge.prototype.readResolve=function(){return ge.nameToTypeMap.get(this._name)},ge.prototype.toString=function(){return this._name},ge.prototype.interfaces_=function(){return[e]},ge.prototype.getClass=function(){return ge},me.serialVersionUID.get=function(){return-552860263173159e4},me.nameToTypeMap.get=function(){return new pe},Object.defineProperties(ge,me),fe.Type=ge,fe.FIXED=new ge("FIXED"),fe.FLOATING=new ge("FLOATING"),fe.FLOATING_SINGLE=new ge("FLOATING SINGLE");var ye=function t(){this._precisionModel=new fe,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?C(arguments[0],A)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof fe&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},_e={serialVersionUID:{configurable:!0}};ye.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new T(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new T(t.getMinX(),t.getMinY()),new T(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new T(t.getMinX(),t.getMinY()),new T(t.getMinX(),t.getMaxY()),new T(t.getMaxX(),t.getMaxY()),new T(t.getMaxX(),t.getMinY()),new T(t.getMinX(),t.getMinY())]),null)},ye.prototype.createLineString=function(t){return t?t instanceof Array?new Yt(this.getCoordinateSequenceFactory().create(t),this):C(t,F)?new Yt(t,this):void 0:new Yt(this.getCoordinateSequenceFactory().create([]),this)},ye.prototype.createMultiLineString=function(){return 0===arguments.length?new qt(null,this):1===arguments.length?new qt(arguments[0],this):void 0},ye.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),s=o.getClass();null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(ye.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof Qt)return this.createMultiPolygon(ye.toPolygonArray(t));if(a instanceof Yt)return this.createMultiLineString(ye.toLineStringArray(t));if(a instanceof Kt)return this.createMultiPoint(ye.toPointArray(t));et.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},ye.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},ye.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof T){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(C(arguments[0],F))return new Kt(arguments[0],this)}},ye.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},ye.prototype.createPolygon=function(){if(0===arguments.length)return new Qt(null,null,this);if(1===arguments.length){if(C(arguments[0],F)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ee){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new Qt(arguments[0],arguments[1],this)},ye.prototype.getSRID=function(){return this._SRID},ye.prototype.createGeometryCollection=function(){return 0===arguments.length?new Vt(null,this):1===arguments.length?new Vt(arguments[0],this):void 0},ye.prototype.createGeometry=function(t){return new re(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},ye.prototype.getPrecisionModel=function(){return this._precisionModel},ye.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(C(arguments[0],F))return new ee(arguments[0],this)}},ye.prototype.createMultiPolygon=function(){return 0===arguments.length?new ne(null,this):1===arguments.length?new ne(arguments[0],this):void 0},ye.prototype.createMultiPoint=function(){if(0===arguments.length)return new te(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new te(arguments[0],this);if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(C(arguments[0],F)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(e.size()).fill(null),r=0;r<e.size();r++){var i=this.getCoordinateSequenceFactory().create(1,e.getDimension());Zt.copy(e,r,i,0,1),n[r]=this.createPoint(i)}return this.createMultiPoint(n)}}},ye.prototype.interfaces_=function(){return[e]},ye.prototype.getClass=function(){return ye},ye.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.getDefaultCoordinateSequenceFactory=function(){return ue.instance()},ye.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},_e.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(ye,_e);var ve=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],xe=function(t){this.geometryFactory=t||new ye};xe.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!be[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==ve.indexOf(n)?be[n].apply(this,[e.coordinates]):"GeometryCollection"===n?be[n].apply(this,[e.geometries]):be[n].apply(this,[e])},xe.prototype.write=function(t){var e=t.getGeometryType();if(!we[e])throw new Error("Geometry is not supported");return we[e].apply(this,[t])};var be={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!be[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=be.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new T(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new T(t[0],t[1]),new T(t[2],t[1]),new T(t[2],t[3]),new T(t[0],t[3]),new T(t[0],t[1])])},Point:function(t){var e=new T(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(be.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=be.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(be.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=be.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],s=be.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s);r.push(a)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(be.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},we={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:we.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=we.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(we.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=we.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=we.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=we.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=we.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(we[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},Ee=function(t){this.geometryFactory=t||new ye,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new xe(this.geometryFactory)};Ee.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===fe.FIXED&&this.reducePrecision(e),e},Ee.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Te=function(){this.parser=new xe(this.geometryFactory)};Te.prototype.write=function(t){return this.parser.write(t)};var Se=function(){},ke={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Se.prototype.interfaces_=function(){return[]},Se.prototype.getClass=function(){return Se},Se.opposite=function(t){return t===Se.LEFT?Se.RIGHT:t===Se.RIGHT?Se.LEFT:t},ke.ON.get=function(){return 0},ke.LEFT.get=function(){return 1},ke.RIGHT.get=function(){return 2},Object.defineProperties(Se,ke),(g.prototype=new Error).name="EmptyStackException",(m.prototype=new wt).add=function(t){return this.array_.push(t),!0},m.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},m.prototype.push=function(t){return this.array_.push(t),t},m.prototype.pop=function(t){if(0===this.array_.length)throw new g;return this.array_.pop()},m.prototype.peek=function(){if(0===this.array_.length)throw new g;return this.array_[this.array_.length-1]},m.prototype.empty=function(){return 0===this.array_.length},m.prototype.isEmpty=function(){return this.empty()},m.prototype.search=function(t){return this.array_.indexOf(t)},m.prototype.size=function(){return this.array_.length},m.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Ae=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Ae.prototype.getCoordinate=function(){return this._minCoord},Ae.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Ae.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();et.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=at.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===at.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===at.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Ae.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Se.LEFT;return n[e].y<n[e+1].y&&(r=Se.RIGHT),r},Ae.prototype.getEdge=function(){return this._orientedDe},Ae.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Ae.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Ae.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}et.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Se.LEFT&&(this._orientedDe=this._minDe.getSym())},Ae.prototype.interfaces_=function(){return[]},Ae.prototype.getClass=function(){return Ae};var Me=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new T(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(Q),Ie=function(){this.array_=[]};Ie.prototype.addLast=function(t){this.array_.push(t)},Ie.prototype.removeFirst=function(){return this.array_.shift()},Ie.prototype.isEmpty=function(){return 0===this.array_.length};var Ce=function(){this._finder=null,this._dirEdgeList=new Et,this._nodes=new Et,this._rightMostCoord=null,this._env=null,this._finder=new Ae};Ce.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Ce.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Ce.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Me("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Ce.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Se.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Ce.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Ce.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Se.RIGHT)>=1&&e.getDepth(Se.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Ce.prototype.computeDepths=function(t){var e=new Pt,n=new Ie,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}},Ce.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Ce.prototype.getEnvelope=function(){if(null===this._env){for(var t=new $,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Ce.prototype.addReachable=function(t){var e=new m;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Ce.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Se.LEFT,t.getDepth(Se.RIGHT)),e.setDepth(Se.RIGHT,t.getDepth(Se.LEFT))},Ce.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Ce.prototype.getNodes=function(){return this._nodes},Ce.prototype.getDirectedEdges=function(){return this._dirEdgeList},Ce.prototype.interfaces_=function(){return[b]},Ce.prototype.getClass=function(){return Ce};var Oe=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Se.ON]=n}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.init(3),this.location[Se.ON]=o,this.location[Se.LEFT]=s,this.location[Se.RIGHT]=a}};Oe.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Oe.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==M.NONE)return!1;return!0},Oe.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===M.NONE&&(this.location[e]=t)},Oe.prototype.isLine=function(){return 1===this.location.length},Oe.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Se.ON]=this.location[Se.ON],e[Se.LEFT]=M.NONE,e[Se.RIGHT]=M.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===M.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Oe.prototype.getLocations=function(){return this.location},Oe.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Se.LEFT];this.location[Se.LEFT]=this.location[Se.RIGHT],this.location[Se.RIGHT]=t},Oe.prototype.toString=function(){var t=new L;return this.location.length>1&&t.append(M.toLocationSymbol(this.location[Se.LEFT])),t.append(M.toLocationSymbol(this.location[Se.ON])),this.location.length>1&&t.append(M.toLocationSymbol(this.location[Se.RIGHT])),t.toString()},Oe.prototype.setLocations=function(t,e,n){this.location[Se.ON]=t,this.location[Se.LEFT]=e,this.location[Se.RIGHT]=n},Oe.prototype.get=function(t){return t<this.location.length?this.location[t]:M.NONE},Oe.prototype.isArea=function(){return this.location.length>1},Oe.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===M.NONE)return!0;return!1},Oe.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Se.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Oe.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(M.NONE)},Oe.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Oe.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Oe.prototype.interfaces_=function(){return[]},Oe.prototype.getClass=function(){return Oe};var Pe=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Oe(e),this.elt[1]=new Oe(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Oe(n.elt[0]),this.elt[1]=new Oe(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Oe(M.NONE),this.elt[1]=new Oe(M.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new Oe(o,s,a),this.elt[1]=new Oe(o,s,a)}else if(4===arguments.length){var c=arguments[0],l=arguments[1],u=arguments[2],h=arguments[3];this.elt[0]=new Oe(M.NONE,M.NONE,M.NONE),this.elt[1]=new Oe(M.NONE,M.NONE,M.NONE),this.elt[c].setLocations(l,u,h)}};Pe.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Pe.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Pe.prototype.isNull=function(t){return this.elt[t].isNull()},Pe.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Pe.prototype.isLine=function(t){return this.elt[t].isLine()},Pe.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Oe(t.elt[e]):this.elt[e].merge(t.elt[e])},Pe.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Pe.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Se.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Pe.prototype.toString=function(){var t=new L;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Pe.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Pe.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Pe.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Se.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},Pe.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Pe.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Pe.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Oe(this.elt[t].location[0]))},Pe.prototype.interfaces_=function(){return[]},Pe.prototype.getClass=function(){return Pe},Pe.toLineLabel=function(t){for(var e=new Pe(M.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var Le=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Et,this._pts=new Et,this._label=new Pe(M.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Et,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Le.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=at.isCCW(this._ring.getCoordinates())},Le.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Le.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new Me("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Me("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();et.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},Le.prototype.getLinearRing=function(){return this._ring},Le.prototype.getCoordinate=function(t){return this._pts.get(t)},Le.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},Le.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var s=r.length-2;n&&(s=r.length-1);for(var a=s;a>=0;a--)this._pts.add(r[a])}},Le.prototype.isHole=function(){return this._isHole},Le.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Le.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!at.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},Le.prototype.addHole=function(t){this._holes.add(t)},Le.prototype.isShell=function(){return null===this._shell},Le.prototype.getLabel=function(){return this._label},Le.prototype.getEdges=function(){return this._edges},Le.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Le.prototype.getShell=function(){return this._shell},Le.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,Se.RIGHT);if(n===M.NONE)return null;if(this._label.getLocation(e)===M.NONE)return this._label.setLocation(e,n),null}},Le.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Le.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Le.prototype.interfaces_=function(){return[]},Le.prototype.getClass=function(){return Le};var De=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Le),Re=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new Et,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new De(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Le),Ne=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};Ne.prototype.setVisited=function(t){this._isVisited=t},Ne.prototype.setInResult=function(t){this._isInResult=t},Ne.prototype.isCovered=function(){return this._isCovered},Ne.prototype.isCoveredSet=function(){return this._isCoveredSet},Ne.prototype.setLabel=function(t){this._label=t},Ne.prototype.getLabel=function(){return this._label},Ne.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Ne.prototype.updateIM=function(t){et.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},Ne.prototype.isInResult=function(){return this._isInResult},Ne.prototype.isVisited=function(){return this._isVisited},Ne.prototype.interfaces_=function(){return[]},Ne.prototype.getClass=function(){return Ne};var je=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Pe(0,M.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=M.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==M.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Pe(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Pe)for(var n=arguments[0],r=0;r<2;r++){var i=this.computeMergedLocation(n,r);this._label.getLocation(r)===M.NONE&&this._label.setLocation(r,i)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=M.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case M.BOUNDARY:n=M.INTERIOR;break;case M.INTERIOR:default:n=M.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ne),ze=function(){this.nodeMap=new h,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};ze.prototype.find=function(t){return this.nodeMap.get(t)},ze.prototype.addNode=function(){if(arguments[0]instanceof T){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof je){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},ze.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},ze.prototype.iterator=function(){return this.nodeMap.values().iterator()},ze.prototype.values=function(){return this.nodeMap.values()},ze.prototype.getBoundaryNodes=function(t){for(var e=new Et,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===M.BOUNDARY&&e.add(r)}return e},ze.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},ze.prototype.interfaces_=function(){return[]},ze.prototype.getClass=function(){return ze};var Be=function(){},Fe={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Be.prototype.interfaces_=function(){return[]},Be.prototype.getClass=function(){return Be},Be.isNorthern=function(t){return t===Be.NE||t===Be.NW},Be.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},Be.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},Be.isInHalfPlane=function(t,e){return e===Be.SE?t===Be.SE||t===Be.SW:t===e||t===e+1},Be.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new _("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Be.NE:Be.SE:e>=0?Be.NW:Be.SW}if(arguments[0]instanceof T&&arguments[1]instanceof T){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new _("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?Be.NE:Be.SE:r.y>=n.y?Be.NW:Be.SW}},Fe.NE.get=function(){return 0},Fe.NW.get=function(){return 1},Fe.SW.get=function(){return 2},Fe.SE.get=function(){return 3},Object.defineProperties(Be,Fe);var Ue=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._edge=e,this.init(n,r),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this._edge=i,this.init(o,s),this._label=a}};Ue.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:at.computeOrientation(t._p0,t._p1,this._p1)},Ue.prototype.getDy=function(){return this._dy},Ue.prototype.getCoordinate=function(){return this._p0},Ue.prototype.setNode=function(t){this._node=t},Ue.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Ue.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Ue.prototype.getDirectedCoordinate=function(){return this._p1},Ue.prototype.getDx=function(){return this._dx},Ue.prototype.getLabel=function(){return this._label},Ue.prototype.getEdge=function(){return this._edge},Ue.prototype.getQuadrant=function(){return this._quadrant},Ue.prototype.getNode=function(){return this._node},Ue.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Ue.prototype.computeLabel=function(t){},Ue.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Be.quadrant(this._dx,this._dy),et.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Ue.prototype.interfaces_=function(){return[b]},Ue.prototype.getClass=function(){return Ue};var Ve=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Pe(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Me("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Se.LEFT)===M.INTERIOR&&this._label.getLocation(e,Se.RIGHT)===M.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Se.LEFT]+"/"+this._depth[Se.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,M.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,M.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Se.LEFT&&(r=-1);var i=Se.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===M.EXTERIOR&&e===M.INTERIOR?1:t===M.INTERIOR&&e===M.EXTERIOR?-1:0},e}(Ue),qe=function(){};qe.prototype.createNode=function(t){return new je(t,null)},qe.prototype.interfaces_=function(){return[]},qe.prototype.getClass=function(){return qe};var We=function(){if(this._edges=new Et,this._nodes=null,this._edgeEndList=new Et,0===arguments.length)this._nodes=new ze(new qe);else if(1===arguments.length){var t=arguments[0];this._nodes=new ze(t)}};We.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},We.prototype.find=function(t){return this._nodes.find(t)},We.prototype.addNode=function(){if(arguments[0]instanceof je){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof T){var e=arguments[0];return this._nodes.addNode(e)}},We.prototype.getNodeIterator=function(){return this._nodes.iterator()},We.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},We.prototype.debugPrintln=function(t){W.out.println(t)},We.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===M.BOUNDARY},We.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},We.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&at.computeOrientation(t,e,r)===at.COLLINEAR&&Be.quadrant(t,e)===Be.quadrant(n,r)},We.prototype.getEdgeEnds=function(){return this._edgeEndList},We.prototype.debugPrint=function(t){W.out.print(t)},We.prototype.getEdgeIterator=function(){return this._edges.iterator()},We.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},We.prototype.insertEdge=function(t){this._edges.add(t)},We.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},We.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new Ve(n,!0),i=new Ve(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},We.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},We.prototype.getNodes=function(){return this._nodes.values()},We.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},We.prototype.interfaces_=function(){return[]},We.prototype.getClass=function(){return We},We.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Ge=function(){this._geometryFactory=null,this._shellList=new Et;var t=arguments[0];this._geometryFactory=t};Ge.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},Ge.prototype.computePolygons=function(t){for(var e=new Et,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},Ge.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Me("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},Ge.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new Et,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else r.add(o)}return r},Ge.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Ge.prototype.buildMaximalEdgeRings=function(t){for(var e=new Et,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new Re(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},Ge.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},Ge.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Ge.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var c=a.next(),l=c.getLinearRing(),u=l.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var h=!1;u.contains(r)&&at.isPointInRing(i,l.getCoordinates())&&(h=!0),h&&(null===o||s.contains(u))&&(o=c)}return o},Ge.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return et.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Ge.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];We.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new Et,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},Ge.prototype.interfaces_=function(){return[]},Ge.prototype.getClass=function(){return Ge};var $e=function(){};$e.prototype.getBounds=function(){},$e.prototype.interfaces_=function(){return[]},$e.prototype.getClass=function(){return $e};var He=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};He.prototype.getItem=function(){return this._item},He.prototype.getBounds=function(){return this._bounds},He.prototype.interfaces_=function(){return[$e,e]},He.prototype.getClass=function(){return He};var Ze=function(){this._size=null,this._items=null,this._size=0,this._items=new Et,this._items.add(null)};Ze.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Ze.prototype.size=function(){return this._size},Ze.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},Ze.prototype.clear=function(){this._size=0,this._items.clear()},Ze.prototype.isEmpty=function(){return 0===this._size},Ze.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Ze.prototype.interfaces_=function(){return[]},Ze.prototype.getClass=function(){return Ze};var Ye=function(){};Ye.prototype.visitItem=function(t){},Ye.prototype.interfaces_=function(){return[]},Ye.prototype.getClass=function(){return Ye};var Xe=function(){};Xe.prototype.insert=function(t,e){},Xe.prototype.remove=function(t,e){},Xe.prototype.query=function(){},Xe.prototype.interfaces_=function(){return[]},Xe.prototype.getClass=function(){return Xe};var Ke=function(){if(this._childBoundables=new Et,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Je={serialVersionUID:{configurable:!0}};Ke.prototype.getLevel=function(){return this._level},Ke.prototype.size=function(){return this._childBoundables.size()},Ke.prototype.getChildBoundables=function(){return this._childBoundables},Ke.prototype.addChildBoundable=function(t){et.isTrue(null===this._bounds),this._childBoundables.add(t)},Ke.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Ke.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Ke.prototype.interfaces_=function(){return[$e,e]},Ke.prototype.getClass=function(){return Ke},Je.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Ke,Je);var Qe=function(){};Qe.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},Qe.min=function(t){return Qe.sort(t),t.get(0)},Qe.sort=function(t,e){var n=t.toArray();e?jt.sort(n,e):jt.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},Qe.singletonList=function(t){var e=new Et;return e.add(t),e};var tn=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};tn.prototype.expandToQueue=function(t,e){var n=tn.isComposite(this._boundable1),r=tn.isComposite(this._boundable2);if(n&&r)return tn.area(this._boundable1)>tn.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new _("neither boundable is composite")},tn.prototype.isLeaves=function(){return!(tn.isComposite(this._boundable1)||tn.isComposite(this._boundable2))},tn.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},tn.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),s=new tn(o,e,this._itemDistance);s.getDistance()<r&&n.add(s)}},tn.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},tn.prototype.getDistance=function(){return this._distance},tn.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},tn.prototype.interfaces_=function(){return[b]},tn.prototype.getClass=function(){return tn},tn.area=function(t){return t.getBounds().getArea()},tn.isComposite=function(t){return t instanceof Ke};var en=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new Et,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];et.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},nn={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};en.prototype.getNodeCapacity=function(){return this._nodeCapacity},en.prototype.lastNode=function(t){return t.get(t.size()-1)},en.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Ke?t+=this.size(n):n instanceof He&&(t+=1)}return t}},en.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof He&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},en.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new Et:t}if(1===arguments.length){for(var e=arguments[0],n=new Et,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Ke){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof He?n.add(i.getItem()):et.shouldNeverReachHere()}return n.size()<=0?null:n}},en.prototype.insert=function(t,e){et.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new He(t,e))},en.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new Et;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(et.isTrue(n>-2),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof Ke?this.boundablesAtLevel(n,s,i):(et.isTrue(s instanceof He),-1===n&&i.add(s))}return null}},en.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new Et;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r)}else if(3===arguments.length)if(C(arguments[2],Ye)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke)for(var i=arguments[0],o=arguments[2],s=arguments[1].getChildBoundables(),a=0;a<s.size();a++){var c=s.get(a);this.getIntersectsOp().intersects(c.getBounds(),i)&&(c instanceof Ke?this.query(i,c,o):c instanceof He?o.visitItem(c.getItem()):et.shouldNeverReachHere())}else if(C(arguments[2],wt)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke)for(var l=arguments[0],u=arguments[2],h=arguments[1].getChildBoundables(),p=0;p<h.size();p++){var f=h.get(p);this.getIntersectsOp().intersects(f.getBounds(),l)&&(f instanceof Ke?this.query(l,f,u):f instanceof He?u.add(f.getItem()):et.shouldNeverReachHere())}},en.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},en.prototype.getRoot=function(){return this.build(),this._root},en.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var s=null,a=r.getChildBoundables().iterator();a.hasNext();){var c=a.next();if(this.getIntersectsOp().intersects(c.getBounds(),n)&&c instanceof Ke&&(o=this.remove(n,c,i))){s=c;break}}return null!==s&&s.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(s),o}},en.prototype.createHigherLevels=function(t,e){et.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},en.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Ke){var r=this.depth(n);r>t&&(t=r)}}return t+1}},en.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var n=new Et;n.add(this.createNode(e));var r=new Et(t);Qe.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},en.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},en.prototype.interfaces_=function(){return[e]},en.prototype.getClass=function(){return en},en.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},nn.IntersectsOp.get=function(){return rn},nn.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},nn.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(en,nn);var rn=function(){},on=function(){};on.prototype.distance=function(t,e){},on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on};var sn=function(t){function n(e){e=e||n.DEFAULT_NODE_CAPACITY,t.call(this,e)}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var r={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return n.prototype.createParentBoundablesFromVerticalSlices=function(t,e){et.isTrue(t.length>0);for(var n=new Et,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},n.prototype.createNode=function(t){return new an(t)},n.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},n.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},n.prototype.getIntersectsOp=function(){return n.intersectsOp},n.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new Et;for(var s=0;i.hasNext()&&s<n;){var a=i.next();r[o].add(a),s++}}return r},n.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(C(arguments[2],Ye)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke){var i=arguments[0],o=arguments[1],s=arguments[2];t.prototype.query.call(this,i,o,s)}else if(C(arguments[2],wt)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke){var a=arguments[0],c=arguments[1],l=arguments[2];t.prototype.query.call(this,a,c,l)}},n.prototype.getComparator=function(){return n.yComparator},n.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},n.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},n.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},n.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new Et(t);Qe.sort(i,n.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,e)},n.prototype.nearestNeighbour=function(){if(1===arguments.length){if(C(arguments[0],on)){var t=arguments[0],e=new tn(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof tn){var r=arguments[0];return this.nearestNeighbour(r,v.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof n&&C(arguments[1],on)){var i=arguments[0],o=arguments[1],s=new tn(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(s)}if(arguments[0]instanceof tn&&"number"==typeof arguments[1]){var a=arguments[0],c=arguments[1],l=null,u=new Ze;for(u.add(a);!u.isEmpty()&&c>0;){var h=u.poll(),p=h.getDistance();if(p>=c)break;h.isLeaves()?(c=p,l=h):h.expandToQueue(u,c)}return[l.getBoundable(0).getItem(),l.getBoundable(1).getItem()]}}else if(3===arguments.length){var f=arguments[2],d=new He(arguments[0],arguments[1]),g=new tn(this.getRoot(),d,f);return this.nearestNeighbour(g)[0]}},n.prototype.interfaces_=function(){return[Xe,e]},n.prototype.getClass=function(){return n},n.centreX=function(t){return n.avg(t.getMinX(),t.getMaxX())},n.avg=function(t,e){return(t+e)/2},n.centreY=function(t){return n.avg(t.getMinY(),t.getMaxY())},r.STRtreeNode.get=function(){return an},r.serialVersionUID.get=function(){return 0x39920f7d5f261e0},r.xComparator.get=function(){return{interfaces_:function(){return[E]},compare:function(e,r){return t.compareDoubles(n.centreX(e.getBounds()),n.centreX(r.getBounds()))}}},r.yComparator.get=function(){return{interfaces_:function(){return[E]},compare:function(e,r){return t.compareDoubles(n.centreY(e.getBounds()),n.centreY(r.getBounds()))}}},r.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},r.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(n,r),n}(en),an=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new $(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ke),cn=function(){};cn.prototype.interfaces_=function(){return[]},cn.prototype.getClass=function(){return cn},cn.relativeSign=function(t,e){return t<e?-1:t>e?1:0},cn.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=cn.relativeSign(e.x,n.x),i=cn.relativeSign(e.y,n.y);switch(t){case 0:return cn.compareValue(r,i);case 1:return cn.compareValue(i,r);case 2:return cn.compareValue(i,-r);case 3:return cn.compareValue(-r,i);case 4:return cn.compareValue(-r,-i);case 5:return cn.compareValue(-i,-r);case 6:return cn.compareValue(-i,r);case 7:return cn.compareValue(r,-i)}return et.shouldNeverReachHere("invalid octant value"),0},cn.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var ln=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new T(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};ln.prototype.getCoordinate=function(){return this.coord},ln.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},ln.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:cn.compare(this._segmentOctant,this.coord,e.coord)},ln.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},ln.prototype.isInterior=function(){return this._isInterior},ln.prototype.interfaces_=function(){return[b]},ln.prototype.getClass=function(){return ln};var un=function(){this._nodeMap=new h,this._edge=null;var t=arguments[0];this._edge=t};un.prototype.getSplitCoordinates=function(){var t=new St;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},un.prototype.addCollapsedNodes=function(){var t=new Et;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},un.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},un.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new D(e+1))}},un.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new T(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new T(e.coord))},un.prototype.iterator=function(){return this._nodeMap.values().iterator()},un.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},un.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},un.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new D(e[0])),r=i}},un.prototype.getEdge=function(){return this._edge},un.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},un.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new T(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return i&&(o[s]=new T(e.coord)),new dn(o,this._edge.getData())},un.prototype.add=function(t,e){var n=new ln(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(et.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},un.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new Q("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new Q("bad split edge end point at "+i)},un.prototype.interfaces_=function(){return[]},un.prototype.getClass=function(){return un};var hn=function(){};hn.prototype.interfaces_=function(){return[]},hn.prototype.getClass=function(){return hn},hn.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new _("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof T&&arguments[1]instanceof T){var i=arguments[0],o=arguments[1],s=o.x-i.x,a=o.y-i.y;if(0===s&&0===a)throw new _("Cannot compute the octant for two identical points "+i);return hn.octant(s,a)}};var pn=function(){};pn.prototype.getCoordinates=function(){},pn.prototype.size=function(){},pn.prototype.getCoordinate=function(t){},pn.prototype.isClosed=function(){},pn.prototype.setData=function(t){},pn.prototype.getData=function(){},pn.prototype.interfaces_=function(){return[]},pn.prototype.getClass=function(){return pn};var fn=function(){};fn.prototype.addIntersection=function(t,e){},fn.prototype.interfaces_=function(){return[pn]},fn.prototype.getClass=function(){return fn};var dn=function(){this._nodeList=new un(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};dn.prototype.getCoordinates=function(){return this._pts},dn.prototype.size=function(){return this._pts.length},dn.prototype.getCoordinate=function(t){return this._pts[t]},dn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},dn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},dn.prototype.setData=function(t){this._data=t},dn.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:hn.octant(t,e)},dn.prototype.getData=function(){return this._data},dn.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[1],r=arguments[3],i=new T(arguments[0].getIntersection(r));this.addIntersection(i,n)}},dn.prototype.toString=function(){return J.toLineString(new ce(this._pts))},dn.prototype.getNodeList=function(){return this._nodeList},dn.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},dn.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},dn.prototype.interfaces_=function(){return[fn]},dn.prototype.getClass=function(){return dn},dn.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new Et;return dn.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(n)};var gn=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new T,this.p1=new T;else if(1===arguments.length){var t=arguments[0];this.p0=new T(t.p0),this.p1=new T(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new T(e,n),this.p1=new T(r,i)}},mn={serialVersionUID:{configurable:!0}};gn.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},gn.prototype.orientationIndex=function(){if(arguments[0]instanceof gn){var t=arguments[0],e=at.orientationIndex(this.p0,this.p1,t.p0),n=at.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof T){var r=arguments[0];return at.orientationIndex(this.p0,this.p1,r)}},gn.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},gn.prototype.isVertical=function(){return this.p0.x===this.p1.x},gn.prototype.equals=function(t){if(!(t instanceof gn))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},gn.prototype.intersection=function(t){var e=new it;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},gn.prototype.project=function(){if(arguments[0]instanceof T){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new T(t);var e=this.projectionFactor(t),n=new T;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof gn){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var s=this.project(r.p0);i<0&&(s=this.p0),i>1&&(s=this.p1);var a=this.project(r.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new gn(s,a)}},gn.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},gn.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},gn.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},gn.prototype.distancePerpendicular=function(t){return at.distancePointLinePerpendicular(t,this.p0,this.p1)},gn.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},gn.prototype.midPoint=function(){return gn.midPoint(this.p0,this.p1)},gn.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?v.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},gn.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=v.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);(i=s.distance(t.p1))<r&&(r=i,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(i=a.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=a);var c=t.closestPoint(this.p1);return(i=c.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=c),n},gn.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},gn.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},gn.prototype.getLength=function(){return this.p0.distance(this.p1)},gn.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},gn.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},gn.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},gn.prototype.lineIntersection=function(t){try{return G.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof q))throw t}return null},gn.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},gn.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(i*i+o*o),a=0,c=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*i/s,c=e*o/s}return new T(n-c,r+a)},gn.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},gn.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||v.isNaN(e))&&(e=1),e},gn.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},gn.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},gn.prototype.distance=function(){if(arguments[0]instanceof gn){var t=arguments[0];return at.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof T){var e=arguments[0];return at.distancePointLine(e,this.p0,this.p1)}},gn.prototype.pointAlong=function(t){var e=new T;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},gn.prototype.hashCode=function(){var t=v.doubleToLongBits(this.p0.x);t^=31*v.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=v.doubleToLongBits(this.p1.x);return n^=31*v.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},gn.prototype.interfaces_=function(){return[b,e]},gn.prototype.getClass=function(){return gn},gn.midPoint=function(t,e){return new T((t.x+e.x)/2,(t.y+e.y)/2)},mn.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(gn,mn);var yn=function(){this.tempEnv1=new $,this.tempEnv2=new $,this._overlapSeg1=new gn,this._overlapSeg2=new gn};yn.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},yn.prototype.interfaces_=function(){return[]},yn.prototype.getClass=function(){return yn};var _n=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};_n.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},_n.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,r),s<n&&this.computeSelect(t,s,n,r)},_n.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},_n.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},_n.prototype.setId=function(t){this._id=t},_n.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},_n.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new $(t,e)}return this._env},_n.prototype.getEndIndex=function(){return this._end},_n.prototype.getStartIndex=function(){return this._start},_n.prototype.getContext=function(){return this._context},_n.prototype.getId=function(){return this._id},_n.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var s=this._pts[t],a=this._pts[e],c=n._pts[r],l=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(c,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var u=Math.trunc((t+e)/2),h=Math.trunc((r+i)/2);t<u&&(r<h&&this.computeOverlapsInternal(t,u,n,r,h,o),h<i&&this.computeOverlapsInternal(t,u,n,h,i,o)),u<e&&(r<h&&this.computeOverlapsInternal(u,e,n,r,h,o),h<i&&this.computeOverlapsInternal(u,e,n,h,i,o))},_n.prototype.interfaces_=function(){return[]},_n.prototype.getClass=function(){return _n};var vn=function(){};vn.prototype.interfaces_=function(){return[]},vn.prototype.getClass=function(){return vn},vn.getChainStartIndices=function(t){var e=0,n=new Et;n.add(new D(e));do{var r=vn.findChainEnd(t,e);n.add(new D(r)),e=r}while(e<t.length-1);return vn.toIntArray(n)},vn.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=Be.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||Be.quadrant(t[i-1],t[i])===r);)i++;return i-1},vn.getChains=function(){if(1===arguments.length){var t=arguments[0];return vn.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new Et,i=vn.getChainStartIndices(e),o=0;o<i.length-1;o++){var s=new _n(e,i[o],i[o+1],n);r.add(s)}return r}},vn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var xn=function(){};xn.prototype.computeNodes=function(t){},xn.prototype.getNodedSubstrings=function(){},xn.prototype.interfaces_=function(){return[]},xn.prototype.getClass=function(){return xn};var bn=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};bn.prototype.setSegmentIntersector=function(t){this._segInt=t},bn.prototype.interfaces_=function(){return[xn]},bn.prototype.getClass=function(){return bn};var wn=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new Et,this._index=new sn,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=vn.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new En(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return En},Object.defineProperties(e,n),e}(bn),En=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[1],n=arguments[2],r=arguments[3],i=arguments[0].getContext(),o=n.getContext();this._si.processIntersections(i,e,o,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(yn),Tn=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}},Sn={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Tn.prototype.getEndCapStyle=function(){return this._endCapStyle},Tn.prototype.isSingleSided=function(){return this._isSingleSided},Tn.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Tn.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Tn.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Tn.JOIN_ROUND&&(this._quadrantSegments=Tn.DEFAULT_QUADRANT_SEGMENTS)},Tn.prototype.getJoinStyle=function(){return this._joinStyle},Tn.prototype.setJoinStyle=function(t){this._joinStyle=t},Tn.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Tn.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Tn.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Tn.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Tn.prototype.getMitreLimit=function(){return this._mitreLimit},Tn.prototype.setMitreLimit=function(t){this._mitreLimit=t},Tn.prototype.setSingleSided=function(t){this._isSingleSided=t},Tn.prototype.interfaces_=function(){return[]},Tn.prototype.getClass=function(){return Tn},Tn.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Sn.CAP_ROUND.get=function(){return 1},Sn.CAP_FLAT.get=function(){return 2},Sn.CAP_SQUARE.get=function(){return 3},Sn.JOIN_ROUND.get=function(){return 1},Sn.JOIN_MITRE.get=function(){return 2},Sn.JOIN_BEVEL.get=function(){return 3},Sn.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Sn.DEFAULT_MITRE_LIMIT.get=function(){return 5},Sn.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Tn,Sn);var kn=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=at.COUNTERCLOCKWISE,this._inputLine=t||null},An={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};kn.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(i,o,s)&&!!this.isShallow(i,o,s,r)&&this.isShallowSampled(i,o,t,n,r)},kn.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=kn.DELETE,i=!0,r=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},kn.prototype.isShallowConcavity=function(t,e,n,r){return at.computeOrientation(t,e,n)===this._angleOrientation&&at.distancePointLine(e,t,n)<r},kn.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/kn.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=n;s<r;s+=o)if(!this.isShallow(t,e,this._inputLine[s],i))return!1;return!0},kn.prototype.isConcave=function(t,e,n){return at.computeOrientation(t,e,n)===this._angleOrientation},kn.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=at.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},kn.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===kn.DELETE;)e++;return e},kn.prototype.isShallow=function(t,e,n,r){return at.distancePointLine(e,t,n)<r},kn.prototype.collapseLine=function(){for(var t=new St,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==kn.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},kn.prototype.interfaces_=function(){return[]},kn.prototype.getClass=function(){return kn},kn.simplify=function(t,e){return new kn(t).simplify(e)},An.INIT.get=function(){return 0},An.DELETE.get=function(){return 1},An.KEEP.get=function(){return 1},An.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(kn,An);var Mn=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Et},In={COORDINATE_ARRAY_TYPE:{configurable:!0}};Mn.prototype.getCoordinates=function(){return this._ptList.toArray(Mn.COORDINATE_ARRAY_TYPE)},Mn.prototype.setPrecisionModel=function(t){this._precisionModel=t},Mn.prototype.addPt=function(t){var e=new T(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Mn.prototype.revere=function(){},Mn.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},Mn.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Mn.prototype.toString=function(){return(new ye).createLineString(this.getCoordinates()).toString()},Mn.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new T(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Mn.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Mn.prototype.interfaces_=function(){return[]},Mn.prototype.getClass=function(){return Mn},In.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Mn,In);var Cn=function(){},On={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Cn.prototype.interfaces_=function(){return[]},Cn.prototype.getClass=function(){return Cn},Cn.toDegrees=function(t){return 180*t/Math.PI},Cn.normalize=function(t){for(;t>Math.PI;)t-=Cn.PI_TIMES_2;for(;t<=-Math.PI;)t+=Cn.PI_TIMES_2;return t},Cn.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},Cn.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},Cn.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},Cn.interiorAngle=function(t,e,n){var r=Cn.angle(e,t),i=Cn.angle(e,n);return Math.abs(i-r)},Cn.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Cn.PI_TIMES_2;t>=Cn.PI_TIMES_2&&(t=0)}else{for(;t>=Cn.PI_TIMES_2;)t-=Cn.PI_TIMES_2;t<0&&(t=0)}return t},Cn.angleBetween=function(t,e,n){var r=Cn.angle(e,t),i=Cn.angle(e,n);return Cn.diff(r,i)},Cn.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Cn.toRadians=function(t){return t*Math.PI/180},Cn.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Cn.COUNTERCLOCKWISE:n<0?Cn.CLOCKWISE:Cn.NONE},Cn.angleBetweenOriented=function(t,e,n){var r=Cn.angle(e,t),i=Cn.angle(e,n)-r;return i<=-Math.PI?i+Cn.PI_TIMES_2:i>Math.PI?i-Cn.PI_TIMES_2:i},On.PI_TIMES_2.get=function(){return 2*Math.PI},On.PI_OVER_2.get=function(){return Math.PI/2},On.PI_OVER_4.get=function(){return Math.PI/4},On.COUNTERCLOCKWISE.get=function(){return at.COUNTERCLOCKWISE},On.CLOCKWISE.get=function(){return at.CLOCKWISE},On.NONE.get=function(){return at.COLLINEAR},Object.defineProperties(Cn,On);var Pn=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new gn,this._seg1=new gn,this._offset0=new gn,this._offset1=new gn,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new it,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Tn.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},Ln={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Pn.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=at.computeOrientation(this._s0,this._s1,this._s2),r=n===at.CLOCKWISE&&this._side===Se.LEFT||n===at.COUNTERCLOCKWISE&&this._side===Se.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Pn.prototype.addLineEndCap=function(t,e){var n=new gn(t,e),r=new gn;this.computeOffsetSegment(n,Se.LEFT,this._distance,r);var i=new gn;this.computeOffsetSegment(n,Se.RIGHT,this._distance,i);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case Tn.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,at.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Tn.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case Tn.CAP_SQUARE:var c=new T;c.x=Math.abs(this._distance)*Math.cos(a),c.y=Math.abs(this._distance)*Math.sin(a);var l=new T(r.p1.x+c.x,r.p1.y+c.y),u=new T(i.p1.x+c.x,i.p1.y+c.y);this._segList.addPt(l),this._segList.addPt(u)}},Pn.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Pn.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=G.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof q))throw t;o=new T(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},Pn.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),c=n.x-t.x,l=n.y-t.y,u=Math.atan2(l,c);r===at.CLOCKWISE?a<=u&&(a+=2*Math.PI):a>=u&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,u,r,i),this._segList.addPt(n)},Pn.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Pn.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Tn.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Tn.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Pn.prototype.createSquare=function(t){this._segList.addPt(new T(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new T(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new T(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new T(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Pn.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Pn.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Pn.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Pn.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Pn.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=Cn.angle(i,this._seg0.p0),s=Cn.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,a=Cn.normalize(o+s),c=Cn.normalize(a+Math.PI),l=r*n,u=n-l*Math.abs(Math.sin(s)),h=i.x+l*Math.cos(c),p=i.y+l*Math.sin(c),f=new T(h,p),d=new gn(i,f),g=d.pointAlongOffset(1,u),m=d.pointAlongOffset(1,-u);this._side===Se.LEFT?(this._segList.addPt(g),this._segList.addPt(m)):(this._segList.addPt(m),this._segList.addPt(g))},Pn.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Se.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),c=i*n*o/a,l=i*n*s/a;r.p0.x=t.p0.x-l,r.p0.y=t.p0.y+c,r.p1.x=t.p1.x-l,r.p1.y=t.p1.y+c},Pn.prototype.addFilletArc=function(t,e,n,r,i){var o=r===at.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var c=s/a,l=0,u=new T;l<s;){var h=e+o*l;u.x=t.x+i*Math.cos(h),u.y=t.y+i*Math.sin(h),this._segList.addPt(u),l+=c}},Pn.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Pn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new T((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new T((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Pn.prototype.createCircle=function(t){var e=new T(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Pn.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Pn.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Mn,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Pn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Pn.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Tn.JOIN_BEVEL||this._bufParams.getJoinStyle()===Tn.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,at.CLOCKWISE,this._distance))},Pn.prototype.closeRing=function(){this._segList.closeRing()},Pn.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Pn.prototype.interfaces_=function(){return[]},Pn.prototype.getClass=function(){return Pn},Ln.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Ln.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Ln.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Ln.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Pn,Ln);var Dn=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Dn.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&kt.reverse(o),o},Dn.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=kn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Se.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{n.addSegments(t,!1);var a=kn.simplify(t,r),c=a.length-1;n.initSideSegments(a[0],a[1],Se.LEFT),n.addFirstSegment();for(var l=2;l<=c;l++)n.addNextSegment(a[l],!0)}n.addLastSegment(),n.closeRing()},Dn.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Se.RIGHT&&(r=-r);var i=kn.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var s=1;s<=o;s++){var a=1!==s;n.addNextSegment(i[s],a)}n.closeRing()},Dn.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=kn.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Se.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var s=kn.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],Se.LEFT);for(var c=a-2;c>=0;c--)e.addNextSegment(s[c],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},Dn.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Tn.CAP_ROUND:e.createCircle(t);break;case Tn.CAP_SQUARE:e.createSquare(t)}},Dn.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},Dn.prototype.getBufferParameters=function(){return this._bufParams},Dn.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Dn.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Dn.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},Dn.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=kn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Se.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{var a=kn.simplify(t,r),c=a.length-1;n.initSideSegments(a[0],a[1],Se.LEFT),n.addFirstSegment();for(var l=2;l<=c;l++)n.addNextSegment(a[l],!0)}n.addLastSegment()},Dn.prototype.getSegGen=function(t){return new Pn(this._precisionModel,this._bufParams,t)},Dn.prototype.interfaces_=function(){return[]},Dn.prototype.getClass=function(){return Dn},Dn.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new T(t[n]);return e};var Rn=function(){this._subgraphs=null,this._seg=new gn,this._cga=new at;var t=arguments[0];this._subgraphs=t},Nn={DepthSegment:{configurable:!0}};Rn.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new Et,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(C(arguments[2],wt)&&arguments[0]instanceof T&&arguments[1]instanceof Ve){for(var o=arguments[0],s=arguments[1],a=arguments[2],c=s.getEdge().getCoordinates(),l=0;l<c.length-1;l++)if(this._seg.p0=c[l],this._seg.p1=c[l+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||at.computeOrientation(this._seg.p0,this._seg.p1,o)===at.RIGHT)){var u=s.getDepth(Se.LEFT);this._seg.p0.equals(c[l])||(u=s.getDepth(Se.RIGHT));var h=new jn(this._seg,u);a.add(h)}}else if(C(arguments[2],wt)&&arguments[0]instanceof T&&C(arguments[1],wt))for(var p=arguments[0],f=arguments[2],d=arguments[1].iterator();d.hasNext();){var g=d.next();g.isForward()&&this.findStabbedSegments(p,g,f)}},Rn.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Qe.min(e)._leftDepth},Rn.prototype.interfaces_=function(){return[]},Rn.prototype.getClass=function(){return Rn},Nn.DepthSegment.get=function(){return jn},Object.defineProperties(Rn,Nn);var jn=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new gn(t),this._leftDepth=e};jn.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},jn.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},jn.prototype.toString=function(){return this._upwardSeg.toString()},jn.prototype.interfaces_=function(){return[b]},jn.prototype.getClass=function(){return jn};var zn=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};zn.prototype.area=function(){return zn.area(this.p0,this.p1,this.p2)},zn.prototype.signedArea=function(){return zn.signedArea(this.p0,this.p1,this.p2)},zn.prototype.interpolateZ=function(t){if(null===t)throw new _("Supplied point is null.");return zn.interpolateZ(t,this.p0,this.p1,this.p2)},zn.prototype.longestSideLength=function(){return zn.longestSideLength(this.p0,this.p1,this.p2)},zn.prototype.isAcute=function(){return zn.isAcute(this.p0,this.p1,this.p2)},zn.prototype.circumcentre=function(){return zn.circumcentre(this.p0,this.p1,this.p2)},zn.prototype.area3D=function(){return zn.area3D(this.p0,this.p1,this.p2)},zn.prototype.centroid=function(){return zn.centroid(this.p0,this.p1,this.p2)},zn.prototype.inCentre=function(){return zn.inCentre(this.p0,this.p1,this.p2)},zn.prototype.interfaces_=function(){return[]},zn.prototype.getClass=function(){return zn},zn.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},zn.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},zn.det=function(t,e,n,r){return t*r-e*n},zn.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,s=n.x-i,a=r.x-i,c=n.y-o,l=r.y-o,u=s*l-a*c,h=t.x-i,p=t.y-o,f=(l*h-a*p)/u,d=(-c*h+s*p)/u;return e.z+f*(n.z-e.z)+d*(r.z-e.z)},zn.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),s=r;return i>s&&(s=i),o>s&&(s=o),s},zn.isAcute=function(t,e,n){return!!Cn.isAcute(t,e,n)&&!!Cn.isAcute(e,n,t)&&!!Cn.isAcute(n,t,e)},zn.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,s=t.y-i,a=e.x-r,c=e.y-i,l=2*zn.det(o,s,a,c),u=zn.det(s,o*o+s*s,c,a*a+c*c),h=zn.det(o,o*o+s*s,a,a*a+c*c);return new T(r-u/l,i+h/l)},zn.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new G(t.x+n/2,t.y+r/2,1),o=new G(t.x-r+n/2,t.y+n+r/2,1);return new G(i,o)},zn.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,s=n.y-t.y;return new T(t.x+i*o,t.y+i*s)},zn.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,c=n.z-t.z,l=i*c-o*a,u=o*s-r*c,h=r*a-i*s,p=l*l+u*u+h*h;return Math.sqrt(p)/2},zn.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new T(r,i)},zn.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),s=r+i+o,a=(r*t.x+i*e.x+o*n.x)/s,c=(r*t.y+i*e.y+o*n.y)/s;return new T(a,c)};var Bn=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Et;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};Bn.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,M.EXTERIOR,M.INTERIOR)},Bn.prototype.addPolygon=function(t){var e=this._distance,n=Se.LEFT;this._distance<0&&(e=-this._distance,n=Se.RIGHT);var r=t.getExteriorRing(),i=kt.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,M.EXTERIOR,M.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var s=t.getInteriorRingN(o),a=kt.removeRepeatedPoints(s.getCoordinates());this._distance>0&&this.isErodedCompletely(s,-this._distance)||this.addPolygonRing(a,e,Se.opposite(n),M.INTERIOR,M.EXTERIOR)}},Bn.prototype.isTriangleErodedCompletely=function(t,e){var n=new zn(t[0],t[1],t[2]),r=n.inCentre();return at.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},Bn.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=kt.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,M.EXTERIOR,M.INTERIOR)},Bn.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new dn(t,new Pe(0,M.BOUNDARY,e,n));this._curveList.add(r)},Bn.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Bn.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<ee.MINIMUM_VALID_SIZE)return null;var o=r,s=i;t.length>=ee.MINIMUM_VALID_SIZE&&at.isCCW(t)&&(o=i,s=r,n=Se.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)},Bn.prototype.add=function(t){if(t.isEmpty())return null;t instanceof Qt?this.addPolygon(t):t instanceof Yt?this.addLineString(t):t instanceof Kt?this.addPoint(t):(t instanceof te||t instanceof qt||t instanceof ne||t instanceof Vt)&&this.addCollection(t)},Bn.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},Bn.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},Bn.prototype.interfaces_=function(){return[]},Bn.prototype.getClass=function(){return Bn};var Fn=function(){};Fn.prototype.locate=function(t){},Fn.prototype.interfaces_=function(){return[]},Fn.prototype.getClass=function(){return Fn};var Un=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Un.prototype.next=function(){if(this._atStart)return this._atStart=!1,Un.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new r;var t=this._parent.getGeometryN(this._index++);return t instanceof Vt?(this._subcollectionIterator=new Un(t),this._subcollectionIterator.next()):t},Un.prototype.remove=function(){throw new Error(this.getClass().getName())},Un.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Un.prototype.interfaces_=function(){return[bt]},Un.prototype.getClass=function(){return Un},Un.isAtomic=function(t){return!(t instanceof Vt)};var Vn=function(){this._geom=null;var t=arguments[0];this._geom=t};Vn.prototype.locate=function(t){return Vn.locate(t,this._geom)},Vn.prototype.interfaces_=function(){return[Fn]},Vn.prototype.getClass=function(){return Vn},Vn.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&at.isPointInRing(t,e.getCoordinates())},Vn.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Vn.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(Vn.isPointInRing(t,i))return!1}return!0},Vn.containsPoint=function(t,e){if(e instanceof Qt)return Vn.containsPointInPolygon(t,e);if(e instanceof Vt)for(var n=new Un(e);n.hasNext();){var r=n.next();if(r!==e&&Vn.containsPoint(t,r))return!0}return!1},Vn.locate=function(t,e){return e.isEmpty()?M.EXTERIOR:Vn.containsPoint(t,e)?M.INTERIOR:M.EXTERIOR};var qn=function(){this._edgeMap=new h,this._edgeList=null,this._ptInAreaLocation=[M.NONE,M.NONE]};qn.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},qn.prototype.propagateSideLabels=function(t){for(var e=M.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Se.LEFT)!==M.NONE&&(e=r.getLocation(t,Se.LEFT))}if(e===M.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,Se.ON)===M.NONE&&a.setLocation(t,Se.ON,i),a.isArea(t)){var c=a.getLocation(t,Se.LEFT),l=a.getLocation(t,Se.RIGHT);if(l!==M.NONE){if(l!==i)throw new Me("side location conflict",s.getCoordinate());c===M.NONE&&et.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),i=c}else et.isTrue(a.getLocation(t,Se.LEFT)===M.NONE,"found single null side"),a.setLocation(t,Se.RIGHT,i),a.setLocation(t,Se.LEFT,i)}}},qn.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},qn.prototype.print=function(t){W.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},qn.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},qn.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Se.LEFT);et.isTrue(r!==M.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var s=o.next().getLabel();et.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,Se.LEFT),c=s.getLocation(t,Se.RIGHT);if(a===c)return!1;if(c!==i)return!1;i=a}return!0},qn.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},qn.prototype.iterator=function(){return this.getEdges().iterator()},qn.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Et(this._edgeMap.values())),this._edgeList},qn.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===M.NONE&&(this._ptInAreaLocation[t]=Vn.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},qn.prototype.toString=function(){var t=new L;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},qn.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},qn.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===M.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),c=0;c<2;c++)if(a.isAnyNull(c)){var l=M.NONE;if(e[c])l=M.EXTERIOR;else{var u=s.getCoordinate();l=this.getLocation(c,u,t)}a.setAllLocationsIfNull(c,l)}},qn.prototype.getDegree=function(){return this._edgeMap.size()},qn.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},qn.prototype.interfaces_=function(){return[]},qn.prototype.getClass=function(){return qn};var Wn=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Me("no outgoing dirEdge found",this.getCoordinate());et.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return Be.isNorthern(i)&&Be.isNorthern(o)?n:Be.isNorthern(i)||Be.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(et.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){W.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Et;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Se.LEFT),r=t.getDepth(Se.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new Me("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],s=arguments[2],a=arguments[0];a<o;a++){var c=this._edgeList.get(a);c.setEdgeDepths(Se.RIGHT,s),s=c.getDepth(Se.LEFT)}return s}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),s=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;n=s,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(et.isTrue(null!==e,"found null for first outgoing dirEdge"),et.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=M.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=M.INTERIOR;break}if(r.isInResult()){t=M.EXTERIOR;break}}}if(t===M.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(i===M.INTERIOR):(s.isInResult()&&(i=M.EXTERIOR),a.isInResult()&&(i=M.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Pe(M.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==M.INTERIOR&&o!==M.BOUNDARY||this._label.setLocation(i,M.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(qn),Gn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new je(t,new Wn)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(qe),$n=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};$n.prototype.compareTo=function(t){var e=t;return $n.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},$n.prototype.interfaces_=function(){return[b]},$n.prototype.getClass=function(){return $n},$n.orientation=function(t){return 1===kt.increasingDirection(t)},$n.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,s=e?t.length:-1,a=r?n.length:-1,c=e?0:t.length-1,l=r?0:n.length-1;;){var u=t[c].compareTo(n[l]);if(0!==u)return u;var h=(c+=i)===s,p=(l+=o)===a;if(h&&!p)return-1;if(!h&&p)return 1;if(h&&p)return 0}};var Hn=function(){this._edges=new Et,this._ocaMap=new h};Hn.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},Hn.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Hn.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Hn.prototype.iterator=function(){return this._edges.iterator()},Hn.prototype.getEdges=function(){return this._edges},Hn.prototype.get=function(t){return this._edges.get(t)},Hn.prototype.findEqualEdge=function(t){var e=new $n(t.getCoordinates());return this._ocaMap.get(e)},Hn.prototype.add=function(t){this._edges.add(t);var e=new $n(t.getCoordinates());this._ocaMap.put(e,t)},Hn.prototype.interfaces_=function(){return[]},Hn.prototype.getClass=function(){return Hn};var Zn=function(){};Zn.prototype.processIntersections=function(t,e,n,r){},Zn.prototype.isDone=function(){},Zn.prototype.interfaces_=function(){return[]},Zn.prototype.getClass=function(){return Zn};var Yn=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Yn.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Yn.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Yn.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Yn.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Yn.prototype.getLineIntersector=function(){return this._li},Yn.prototype.hasProperIntersection=function(){return this._hasProper},Yn.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Yn.prototype.hasIntersection=function(){return this._hasIntersection},Yn.prototype.isDone=function(){return!1},Yn.prototype.hasInteriorIntersection=function(){return this._hasInterior},Yn.prototype.interfaces_=function(){return[Zn]},Yn.prototype.getClass=function(){return Yn},Yn.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Xn=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new T(t),this.segmentIndex=e,this.dist=n};Xn.prototype.getSegmentIndex=function(){return this.segmentIndex},Xn.prototype.getCoordinate=function(){return this.coord},Xn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Xn.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Xn.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Xn.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Xn.prototype.getDistance=function(){return this.dist},Xn.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Xn.prototype.interfaces_=function(){return[b]},Xn.prototype.getClass=function(){return Xn};var Kn=function(){this._nodeMap=new h,this.edge=null;var t=arguments[0];this.edge=t};Kn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Kn.prototype.iterator=function(){return this._nodeMap.values().iterator()},Kn.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Kn.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Kn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new T(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return i&&(o[s]=e.coord),new nr(o,new Pe(this.edge._label))},Kn.prototype.add=function(t,e,n){var r=new Xn(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},Kn.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Kn.prototype.interfaces_=function(){return[]},Kn.prototype.getClass=function(){return Kn};var Jn=function(){};Jn.prototype.getChainStartIndices=function(t){var e=0,n=new Et;n.add(new D(e));do{var r=this.findChainEnd(t,e);n.add(new D(r)),e=r}while(e<t.length-1);return Jn.toIntArray(n)},Jn.prototype.findChainEnd=function(t,e){for(var n=Be.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&Be.quadrant(t[r-1],t[r])===n;)r++;return r-1},Jn.prototype.interfaces_=function(){return[]},Jn.prototype.getClass=function(){return Jn},Jn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Qn=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new $,this.env2=new $;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Jn;this.startIndex=e.getChainStartIndices(this.pts)};Qn.prototype.getCoordinates=function(){return this.pts},Qn.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},Qn.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},Qn.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],c=arguments[4],l=arguments[5],u=this.pts[i],h=this.pts[o],p=s.pts[a],f=s.pts[c];if(o-i==1&&c-a==1)return l.addIntersections(this.e,i,s.e,a),null;if(this.env1.init(u,h),this.env2.init(p,f),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),g=Math.trunc((a+c)/2);i<d&&(a<g&&this.computeIntersectsForChain(i,d,s,a,g,l),g<c&&this.computeIntersectsForChain(i,d,s,g,c,l)),d<o&&(a<g&&this.computeIntersectsForChain(d,o,s,a,g,l),g<c&&this.computeIntersectsForChain(d,o,s,g,c,l))}},Qn.prototype.getStartIndexes=function(){return this.startIndex},Qn.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},Qn.prototype.interfaces_=function(){return[]},Qn.prototype.getClass=function(){return Qn};var tr=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},er={NULL_VALUE:{configurable:!0}};tr.prototype.getDepth=function(t,e){return this._depth[t][e]},tr.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},tr.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==tr.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===tr.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===tr.NULL_VALUE}},tr.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},tr.prototype.getDelta=function(t){return this._depth[t][Se.RIGHT]-this._depth[t][Se.LEFT]},tr.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?M.EXTERIOR:M.INTERIOR},tr.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},tr.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==M.EXTERIOR&&r!==M.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=tr.depthAtLocation(r):this._depth[e][n]+=tr.depthAtLocation(r))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===M.INTERIOR&&this._depth[i][o]++}},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr},tr.depthAtLocation=function(t){return t===M.EXTERIOR?0:t===M.INTERIOR?1:tr.NULL_VALUE},er.NULL_VALUE.get=function(){return-1},Object.defineProperties(tr,er);var nr=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Kn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new tr,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Pe.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(n.pts[s])||(r=!1),this.pts[s].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Qn(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new $;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new T(t.getIntersection(r)),o=e,s=t.getEdgeDistance(n,r),a=o+1;if(a<this.pts.length){var c=this.pts[a];i.equals2D(c)&&(o=a,s=0)}this.eiList.add(i,o,s)},e.prototype.toString=function(){var t=new L;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Se.ON),e.getLocation(1,Se.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Se.LEFT),e.getLocation(1,Se.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Se.RIGHT),e.getLocation(1,Se.RIGHT),2))},e}(Ne),rr=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Hn,this._bufParams=t||null};rr.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},rr.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Pe(t.getLabel())).flip(),n.merge(r);var i=rr.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(rr.depthDelta(t.getLabel()))},rr.prototype.buildSubgraphs=function(t,e){for(var n=new Et,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),s=new Rn(n).getDepth(o);i.computeDepth(s),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},rr.prototype.createSubgraphs=function(t){for(var e=new Et,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Ce;i.create(r),e.add(i)}}return Qe.sort(e,Qe.reverseOrder()),e},rr.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},rr.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new wn,n=new it;return n.setPrecisionModel(t),e.setSegmentIntersector(new Yn(n)),e},rr.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new Dn(n,this._bufParams),i=new Bn(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new We(new Gn),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new Ge(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},rr.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=i.getData(),a=new nr(i.getCoordinates(),new Pe(s));this.insertUniqueEdge(a)}}},rr.prototype.setNoder=function(t){this._workingNoder=t},rr.prototype.interfaces_=function(){return[]},rr.prototype.getClass=function(){return rr},rr.depthDelta=function(t){var e=t.getLocation(0,Se.LEFT),n=t.getLocation(0,Se.RIGHT);return e===M.INTERIOR&&n===M.EXTERIOR?1:e===M.EXTERIOR&&n===M.INTERIOR?-1:0},rr.convertSegStrings=function(t){for(var e=new ye,n=new Et;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var ir=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ir.prototype.rescale=function(){if(C(arguments[0],xt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&W.out.println(n)}},ir.prototype.scale=function(){if(C(arguments[0],xt)){for(var t=arguments[0],e=new Et,n=t.iterator();n.hasNext();){var r=n.next();e.add(new dn(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),s=0;s<i.length;s++)o[s]=new T(Math.round((i[s].x-this._offsetX)*this._scaleFactor),Math.round((i[s].y-this._offsetY)*this._scaleFactor),i[s].z);return kt.removeRepeatedPoints(o)}},ir.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ir.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ir.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ir.prototype.interfaces_=function(){return[xn]},ir.prototype.getClass=function(){return ir};var or=function(){this._li=new it,this._segStrings=null;var t=arguments[0];this._segStrings=t},sr={fact:{configurable:!0}};or.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new Q("found endpt/interior pt intersection at index "+o+" :pt "+n)},or.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],s=i.getCoordinates(),a=o.getCoordinates(),c=0;c<s.length-1;c++)for(var l=0;l<a.length-1;l++)this.checkInteriorIntersections(i,c,o,l);else if(4===arguments.length){var u=arguments[0],h=arguments[1],p=arguments[2],f=arguments[3];if(u===p&&h===f)return null;var d=u.getCoordinates()[h],g=u.getCoordinates()[h+1],m=p.getCoordinates()[f],y=p.getCoordinates()[f+1];if(this._li.computeIntersection(d,g,m,y),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,g)||this.hasInteriorIntersection(this._li,m,y)))throw new Q("found non-noded intersection at "+d+"-"+g+" and "+m+"-"+y)}},or.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},or.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},or.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},or.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new Q("found non-noded collapse at "+or.fact.createLineString([t,e,n]))},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},sr.fact.get=function(){return new ye},Object.defineProperties(or,sr);var ar=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new _("Scale factor must be non-zero");1!==e&&(this._pt=new T(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new T,this._p1Scaled=new T),this.initCorners(this._pt)},cr={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};ar.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return et.isTrue(!(s&&a),"Found bad envelope test"),a},ar.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new T(this._maxx,this._maxy),this._corner[1]=new T(this._minx,this._maxy),this._corner[2]=new T(this._minx,this._miny),this._corner[3]=new T(this._maxx,this._miny)},ar.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},ar.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},ar.prototype.getCoordinate=function(){return this._originalPt},ar.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},ar.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=ar.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new $(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},ar.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},ar.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&r||t.equals(this._pt)||e.equals(this._pt)))))},ar.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},ar.prototype.interfaces_=function(){return[]},ar.prototype.getClass=function(){return ar},cr.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(ar,cr);var lr=function(){this.tempEnv1=new $,this.selectedSegment=new gn};lr.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}},lr.prototype.interfaces_=function(){return[]},lr.prototype.getClass=function(){return lr};var ur=function(){this._index=null;var t=arguments[0];this._index=t},hr={HotPixelSnapAction:{configurable:!0}};ur.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new pr(e,n,r);return this._index.query(i,{interfaces_:function(){return[Ye]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},ur.prototype.interfaces_=function(){return[]},ur.prototype.getClass=function(){return ur},hr.HotPixelSnapAction.get=function(){return pr},Object.defineProperties(ur,hr);var pr=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(null!==this._parentEdge&&n===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,e)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(lr),fr=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new Et};fr.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var c=0;c<this._li.getIntersectionNum();c++)this._interiorIntersections.add(this._li.getIntersection(c));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},fr.prototype.isDone=function(){return!1},fr.prototype.getInteriorIntersections=function(){return this._interiorIntersections},fr.prototype.interfaces_=function(){return[Zn]},fr.prototype.getClass=function(){return fr};var dr=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new it,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};dr.prototype.checkCorrectness=function(t){var e=dn.getNodedSubstrings(t),n=new or(e);try{n.checkValid()}catch(t){if(!(t instanceof V))throw t;t.printStackTrace()}},dr.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},dr.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},dr.prototype.findInteriorIntersections=function(t,e){var n=new fr(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},dr.prototype.computeVertexSnaps=function(){if(C(arguments[0],xt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof dn)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new ar(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},dr.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new wn,this._pointSnapper=new ur(this._noder.getIndex()),this.snapRound(t,this._li)},dr.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new ar(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},dr.prototype.interfaces_=function(){return[xn]},dr.prototype.getClass=function(){return dr};var gr=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Tn,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},mr={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};gr.prototype.bufferFixedPrecision=function(t){var e=new ir(new dr(new fe(1)),t.getScale()),n=new rr(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},gr.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=gr.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Me))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=gr.precisionScaleFactor(this._argGeom,this._distance,n),i=new fe(r);this.bufferFixedPrecision(i)}},gr.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===fe.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},gr.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},gr.prototype.bufferOriginalPrecision=function(){try{var t=new rr(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Q))throw t;this._saveException=t}},gr.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},gr.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},gr.prototype.interfaces_=function(){return[]},gr.prototype.getClass=function(){return gr},gr.bufferOp=function(){if(2===arguments.length){var t=arguments[1];return new gr(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ut&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],r=new gr(arguments[0]);return r.setQuadrantSegments(n),r.getResultGeometry(e)}if(arguments[2]instanceof Tn&&arguments[0]instanceof ut&&"number"==typeof arguments[1]){var i=arguments[1];return new gr(arguments[0],arguments[2]).getResultGeometry(i)}}else if(4===arguments.length){var o=arguments[1],s=arguments[2],a=arguments[3],c=new gr(arguments[0]);return c.setQuadrantSegments(s),c.setEndCapStyle(a),c.getResultGeometry(o)}},gr.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=O.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},mr.CAP_ROUND.get=function(){return Tn.CAP_ROUND},mr.CAP_BUTT.get=function(){return Tn.CAP_FLAT},mr.CAP_FLAT.get=function(){return Tn.CAP_FLAT},mr.CAP_SQUARE.get=function(){return Tn.CAP_SQUARE},mr.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(gr,mr);var yr=function(){this._pt=[new T,new T],this._distance=v.NaN,this._isNull=!0};yr.prototype.getCoordinates=function(){return this._pt},yr.prototype.getCoordinate=function(t){return this._pt[t]},yr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},yr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},yr.prototype.getDistance=function(){return this._distance},yr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},yr.prototype.interfaces_=function(){return[]},yr.prototype.getClass=function(){return yr};var _r=function(){};_r.prototype.interfaces_=function(){return[]},_r.prototype.getClass=function(){return _r},_r.computeDistance=function(){if(arguments[2]instanceof yr&&arguments[0]instanceof Yt&&arguments[1]instanceof T)for(var t=arguments[1],e=arguments[2],n=arguments[0].getCoordinates(),r=new gn,i=0;i<n.length-1;i++){r.setCoordinates(n[i],n[i+1]);var o=r.closestPoint(t);e.setMinimum(o,t)}else if(arguments[2]instanceof yr&&arguments[0]instanceof Qt&&arguments[1]instanceof T){var s=arguments[0],a=arguments[1],c=arguments[2];_r.computeDistance(s.getExteriorRing(),a,c);for(var l=0;l<s.getNumInteriorRing();l++)_r.computeDistance(s.getInteriorRingN(l),a,c)}else if(arguments[2]instanceof yr&&arguments[0]instanceof ut&&arguments[1]instanceof T){var u=arguments[0],h=arguments[1],p=arguments[2];if(u instanceof Yt)_r.computeDistance(u,h,p);else if(u instanceof Qt)_r.computeDistance(u,h,p);else if(u instanceof Vt)for(var f=u,d=0;d<f.getNumGeometries();d++){var g=f.getGeometryN(d);_r.computeDistance(g,h,p)}else p.setMinimum(u.getCoordinate(),h)}else if(arguments[2]instanceof yr&&arguments[0]instanceof gn&&arguments[1]instanceof T){var m=arguments[1],y=arguments[2],_=arguments[0].closestPoint(m);y.setMinimum(_,m)}};var vr=function(t){this._maxPtDist=new yr,this._inputGeom=t||null},xr={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};vr.prototype.computeMaxMidpointDistance=function(t){var e=new wr(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},vr.prototype.computeMaxVertexDistance=function(t){var e=new br(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},vr.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},vr.prototype.getDistancePoints=function(){return this._maxPtDist},vr.prototype.interfaces_=function(){return[]},vr.prototype.getClass=function(){return vr},xr.MaxPointDistanceFilter.get=function(){return br},xr.MaxMidpointDistanceFilter.get=function(){return wr},Object.defineProperties(vr,xr);var br=function(t){this._maxPtDist=new yr,this._minPtDist=new yr,this._geom=t||null};br.prototype.filter=function(t){this._minPtDist.initialize(),_r.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},br.prototype.getMaxPointDistance=function(){return this._maxPtDist},br.prototype.interfaces_=function(){return[ft]},br.prototype.getClass=function(){return br};var wr=function(t){this._maxPtDist=new yr,this._minPtDist=new yr,this._geom=t||null};wr.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new T((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),_r.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},wr.prototype.isDone=function(){return!1},wr.prototype.isGeometryChanged=function(){return!1},wr.prototype.getMaxPointDistance=function(){return this._maxPtDist},wr.prototype.interfaces_=function(){return[Ut]},wr.prototype.getClass=function(){return wr};var Er=function(t){this._comps=t||null};Er.prototype.filter=function(t){t instanceof Qt&&this._comps.add(t)},Er.prototype.interfaces_=function(){return[Ft]},Er.prototype.getClass=function(){return Er},Er.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Er.getPolygons(t,new Et)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Qt?n.add(e):e instanceof Vt&&e.apply(new Er(n)),n}};var Tr=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Tr.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ee){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Yt&&this._lines.add(t)},Tr.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Tr.prototype.interfaces_=function(){return[lt]},Tr.prototype.getClass=function(){return Tr},Tr.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Tr.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Tr.getLines(e,n))}},Tr.getLines=function(){if(1===arguments.length){var t=arguments[0];return Tr.getLines(t,!1)}if(2===arguments.length){if(C(arguments[0],xt)&&C(arguments[1],xt)){for(var e=arguments[1],n=arguments[0].iterator();n.hasNext();){var r=n.next();Tr.getLines(r,e)}return e}if(arguments[0]instanceof ut&&"boolean"==typeof arguments[1]){var i=arguments[0],o=arguments[1],s=new Et;return i.apply(new Tr(s,o)),s}if(arguments[0]instanceof ut&&C(arguments[1],xt)){var a=arguments[0],c=arguments[1];return a instanceof Yt?c.add(a):a.apply(new Tr(c)),c}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&C(arguments[0],xt)&&C(arguments[1],xt)){for(var l=arguments[1],u=arguments[2],h=arguments[0].iterator();h.hasNext();){var p=h.next();Tr.getLines(p,l,u)}return l}if("boolean"==typeof arguments[2]&&arguments[0]instanceof ut&&C(arguments[1],xt)){var f=arguments[1],d=arguments[2];return arguments[0].apply(new Tr(f,d)),f}}};var Sr=function(){if(this._boundaryRule=dt.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new _("Rule must be non-null");this._boundaryRule=t}};Sr.prototype.locateInternal=function(){if(arguments[0]instanceof T&&arguments[1]instanceof Qt){var t=arguments[0],e=arguments[1];if(e.isEmpty())return M.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===M.EXTERIOR)return M.EXTERIOR;if(r===M.BOUNDARY)return M.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),s=this.locateInPolygonRing(t,o);if(s===M.INTERIOR)return M.EXTERIOR;if(s===M.BOUNDARY)return M.BOUNDARY}return M.INTERIOR}if(arguments[0]instanceof T&&arguments[1]instanceof Yt){var a=arguments[0],c=arguments[1];if(!c.getEnvelopeInternal().intersects(a))return M.EXTERIOR;var l=c.getCoordinates();return c.isClosed()||!a.equals(l[0])&&!a.equals(l[l.length-1])?at.isOnLine(a,l)?M.INTERIOR:M.EXTERIOR:M.BOUNDARY}if(arguments[0]instanceof T&&arguments[1]instanceof Kt){var u=arguments[0];return arguments[1].getCoordinate().equals2D(u)?M.INTERIOR:M.EXTERIOR}},Sr.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?at.locatePointInRing(t,e.getCoordinates()):M.EXTERIOR},Sr.prototype.intersects=function(t,e){return this.locate(t,e)!==M.EXTERIOR},Sr.prototype.updateLocationInfo=function(t){t===M.INTERIOR&&(this._isIn=!0),t===M.BOUNDARY&&this._numBoundaries++},Sr.prototype.computeLocation=function(t,e){if(e instanceof Kt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Yt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Qt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof qt)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof ne)for(var o=e,s=0;s<o.getNumGeometries();s++){var a=o.getGeometryN(s);this.updateLocationInfo(this.locateInternal(t,a))}else if(e instanceof Vt)for(var c=new Un(e);c.hasNext();){var l=c.next();l!==e&&this.computeLocation(t,l)}},Sr.prototype.locate=function(t,e){return e.isEmpty()?M.EXTERIOR:e instanceof Yt||e instanceof Qt?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?M.BOUNDARY:this._numBoundaries>0||this._isIn?M.INTERIOR:M.EXTERIOR)},Sr.prototype.interfaces_=function(){return[]},Sr.prototype.getClass=function(){return Sr};var kr=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._component=e,this._segIndex=n,this._pt=r}},Ar={INSIDE_AREA:{configurable:!0}};kr.prototype.isInsideArea=function(){return this._segIndex===kr.INSIDE_AREA},kr.prototype.getCoordinate=function(){return this._pt},kr.prototype.getGeometryComponent=function(){return this._component},kr.prototype.getSegmentIndex=function(){return this._segIndex},kr.prototype.interfaces_=function(){return[]},kr.prototype.getClass=function(){return kr},Ar.INSIDE_AREA.get=function(){return-1},Object.defineProperties(kr,Ar);var Mr=function(t){this._pts=t||null};Mr.prototype.filter=function(t){t instanceof Kt&&this._pts.add(t)},Mr.prototype.interfaces_=function(){return[Ft]},Mr.prototype.getClass=function(){return Mr},Mr.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Kt?Qe.singletonList(t):Mr.getPoints(t,new Et)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Kt?n.add(e):e instanceof Vt&&e.apply(new Mr(n)),n}};var Ir=function(){this._locations=null;var t=arguments[0];this._locations=t};Ir.prototype.filter=function(t){(t instanceof Kt||t instanceof Yt||t instanceof Qt)&&this._locations.add(new kr(t,0,t.getCoordinate()))},Ir.prototype.interfaces_=function(){return[Ft]},Ir.prototype.getClass=function(){return Ir},Ir.getLocations=function(t){var e=new Et;return t.apply(new Ir(e)),e};var Cr=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Sr,this._minDistanceLocation=null,this._minDistance=v.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Cr.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=1-e,i=Er.getPolygons(this._geom[e]);if(i.size()>0){var o=Ir.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&C(arguments[0],wt)&&C(arguments[1],wt)){for(var s=arguments[0],a=arguments[1],c=arguments[2],l=0;l<s.size();l++)for(var u=s.get(l),h=0;h<a.size();h++)if(this.computeContainmentDistance(u,a.get(h),c),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof kr&&arguments[1]instanceof Qt){var p=arguments[0],f=arguments[1],d=arguments[2],g=p.getCoordinate();if(M.EXTERIOR!==this._ptLocator.locate(g,f))return this._minDistance=0,d[0]=p,d[1]=new kr(f,g),null}},Cr.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(i,s,n),this._minDistance<=this._terminateDistance)return null}},Cr.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Tr.getLines(this._geom[0]),n=Tr.getLines(this._geom[1]),r=Mr.getPoints(this._geom[0]),i=Mr.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Cr.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Cr.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Cr.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Cr.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Yt&&arguments[1]instanceof Kt){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var r=t.getCoordinates(),i=e.getCoordinate(),o=0;o<r.length-1;o++){var s=at.distancePointLine(i,r[o],r[o+1]);if(s<this._minDistance){this._minDistance=s;var a=new gn(r[o],r[o+1]).closestPoint(i);n[0]=new kr(t,o,a),n[1]=new kr(e,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Yt&&arguments[1]instanceof Yt){var c=arguments[0],l=arguments[1],u=arguments[2];if(c.getEnvelopeInternal().distance(l.getEnvelopeInternal())>this._minDistance)return null;for(var h=c.getCoordinates(),p=l.getCoordinates(),f=0;f<h.length-1;f++)for(var d=0;d<p.length-1;d++){var g=at.distanceLineLine(h[f],h[f+1],p[d],p[d+1]);if(g<this._minDistance){this._minDistance=g;var m=new gn(h[f],h[f+1]),y=new gn(p[d],p[d+1]),_=m.closestPoints(y);u[0]=new kr(c,f,_[0]),u[1]=new kr(l,d,_[1])}if(this._minDistance<=this._terminateDistance)return null}}},Cr.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o),a=i.getCoordinate().distance(s.getCoordinate());if(a<this._minDistance&&(this._minDistance=a,n[0]=new kr(i,0,i.getCoordinate()),n[1]=new kr(s,0,s.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Cr.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new _("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Cr.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(i,s,n),this._minDistance<=this._terminateDistance)return null}},Cr.prototype.interfaces_=function(){return[]},Cr.prototype.getClass=function(){return Cr},Cr.distance=function(t,e){return new Cr(t,e).distance()},Cr.isWithinDistance=function(t,e,n){return new Cr(t,e,n).distance()<=n},Cr.nearestPoints=function(t,e){return new Cr(t,e).nearestPoints()};var Or=function(){this._pt=[new T,new T],this._distance=v.NaN,this._isNull=!0};Or.prototype.getCoordinates=function(){return this._pt},Or.prototype.getCoordinate=function(t){return this._pt[t]},Or.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Or.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Or.prototype.toString=function(){return J.toLineString(this._pt[0],this._pt[1])},Or.prototype.getDistance=function(){return this._distance},Or.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Or.prototype.interfaces_=function(){return[]},Or.prototype.getClass=function(){return Or};var Pr=function(){};Pr.prototype.interfaces_=function(){return[]},Pr.prototype.getClass=function(){return Pr},Pr.computeDistance=function(){if(arguments[2]instanceof Or&&arguments[0]instanceof Yt&&arguments[1]instanceof T)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new gn,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var s=r.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof Or&&arguments[0]instanceof Qt&&arguments[1]instanceof T){var a=arguments[0],c=arguments[1],l=arguments[2];Pr.computeDistance(a.getExteriorRing(),c,l);for(var u=0;u<a.getNumInteriorRing();u++)Pr.computeDistance(a.getInteriorRingN(u),c,l)}else if(arguments[2]instanceof Or&&arguments[0]instanceof ut&&arguments[1]instanceof T){var h=arguments[0],p=arguments[1],f=arguments[2];if(h instanceof Yt)Pr.computeDistance(h,p,f);else if(h instanceof Qt)Pr.computeDistance(h,p,f);else if(h instanceof Vt)for(var d=h,g=0;g<d.getNumGeometries();g++){var m=d.getGeometryN(g);Pr.computeDistance(m,p,f)}else f.setMinimum(h.getCoordinate(),p)}else if(arguments[2]instanceof Or&&arguments[0]instanceof gn&&arguments[1]instanceof T){var y=arguments[1],_=arguments[2],v=arguments[0].closestPoint(y);_.setMinimum(v,y)}};var Lr=function(){this._g0=null,this._g1=null,this._ptDist=new Or,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Dr={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Lr.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Lr.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new _("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Lr.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Lr.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Lr.prototype.computeOrientedDistance=function(t,e,n){var r=new Rr(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new Nr(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},Lr.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Lr.prototype.interfaces_=function(){return[]},Lr.prototype.getClass=function(){return Lr},Lr.distance=function(){if(2===arguments.length)return new Lr(arguments[0],arguments[1]).distance();if(3===arguments.length){var t=arguments[2],e=new Lr(arguments[0],arguments[1]);return e.setDensifyFraction(t),e.distance()}},Dr.MaxPointDistanceFilter.get=function(){return Rr},Dr.MaxDensifiedByFractionDistanceFilter.get=function(){return Nr},Object.defineProperties(Lr,Dr);var Rr=function(){this._maxPtDist=new Or,this._minPtDist=new Or,this._euclideanDist=new Pr,this._geom=null;var t=arguments[0];this._geom=t};Rr.prototype.filter=function(t){this._minPtDist.initialize(),Pr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Rr.prototype.getMaxPointDistance=function(){return this._maxPtDist},Rr.prototype.interfaces_=function(){return[ft]},Rr.prototype.getClass=function(){return Rr};var Nr=function(){this._maxPtDist=new Or,this._minPtDist=new Or,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Nr.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,s=0;s<this._numSubSegs;s++){var a=n.x+s*i,c=n.y+s*o,l=new T(a,c);this._minPtDist.initialize(),Pr.computeDistance(this._geom,l,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Nr.prototype.isDone=function(){return!1},Nr.prototype.isGeometryChanged=function(){return!1},Nr.prototype.getMaxPointDistance=function(){return this._maxPtDist},Nr.prototype.interfaces_=function(){return[Ut]},Nr.prototype.getClass=function(){return Nr};var jr=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},zr={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};jr.prototype.checkMaximumDistance=function(t,e,n){var r=new Lr(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+J.toLineString(i[0],i[1])+")"}},jr.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=jr.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),jr.VERBOSE&&W.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},jr.prototype.checkNegativeValid=function(){if(!(this._input instanceof Qt||this._input instanceof ne||this._input instanceof Vt))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},jr.prototype.getErrorIndicator=function(){return this._errorIndicator},jr.prototype.checkMinimumDistance=function(t,e,n){var r=new Cr(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+J.toLineString(i[0],i[1])+" )"}},jr.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},jr.prototype.getErrorLocation=function(){return this._errorLocation},jr.prototype.getPolygonLines=function(t){for(var e=new Et,n=new Tr(e),r=Er.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},jr.prototype.getErrorMessage=function(){return this._errMsg},jr.prototype.interfaces_=function(){return[]},jr.prototype.getClass=function(){return jr},zr.VERBOSE.get=function(){return!1},zr.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(jr,zr);var Br=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},Fr={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Br.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Br.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Br.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new $(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new $(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},Br.prototype.checkDistance=function(){var t=new jr(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Br.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Br.prototype.checkPolygonal=function(){this._result instanceof Qt||this._result instanceof ne||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Br.prototype.getErrorIndicator=function(){return this._errorIndicator},Br.prototype.getErrorLocation=function(){return this._errorLocation},Br.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Br.prototype.report=function(t){if(!Br.VERBOSE)return null;W.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Br.prototype.getErrorMessage=function(){return this._errorMsg},Br.prototype.interfaces_=function(){return[]},Br.prototype.getClass=function(){return Br},Br.isValidMsg=function(t,e,n){var r=new Br(t,e,n);return r.isValid()?null:r.getErrorMessage()},Br.isValid=function(t,e,n){return!!new Br(t,e,n).isValid()},Fr.VERBOSE.get=function(){return!1},Fr.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Br,Fr);var Ur=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Ur.prototype.getCoordinates=function(){return this._pts},Ur.prototype.size=function(){return this._pts.length},Ur.prototype.getCoordinate=function(t){return this._pts[t]},Ur.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Ur.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:hn.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Ur.prototype.setData=function(t){this._data=t},Ur.prototype.getData=function(){return this._data},Ur.prototype.toString=function(){return J.toLineString(new ce(this._pts))},Ur.prototype.interfaces_=function(){return[pn]},Ur.prototype.getClass=function(){return Ur};var Vr=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Et,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};Vr.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Vr.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Vr.prototype.getIntersectionSegments=function(){return this._intSegments},Vr.prototype.count=function(){return this._intersectionCount},Vr.prototype.getIntersections=function(){return this._intersections},Vr.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Vr.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Vr.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Vr.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Vr.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Vr.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Vr.prototype.interfaces_=function(){return[Zn]},Vr.prototype.getClass=function(){return Vr},Vr.createAllIntersectionsFinder=function(t){var e=new Vr(t);return e.setFindAllIntersections(!0),e},Vr.createAnyIntersectionFinder=function(t){return new Vr(t)},Vr.createIntersectionCounter=function(t){var e=new Vr(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var qr=function(){this._li=new it,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};qr.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},qr.prototype.getIntersections=function(){return this._segInt.getIntersections()},qr.prototype.isValid=function(){return this.execute(),this._isValid},qr.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},qr.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Vr(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new wn;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},qr.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Me(this.getErrorMessage(),this._segInt.getInteriorIntersection())},qr.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+J.toLineString(t[0],t[1])+" and "+J.toLineString(t[2],t[3])},qr.prototype.interfaces_=function(){return[]},qr.prototype.getClass=function(){return qr},qr.computeIntersections=function(t){var e=new qr(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Wr=function t(){this._nv=null;var e=arguments[0];this._nv=new qr(t.toSegmentStrings(e))};Wr.prototype.checkValid=function(){this._nv.checkValid()},Wr.prototype.interfaces_=function(){return[]},Wr.prototype.getClass=function(){return Wr},Wr.toSegmentStrings=function(t){for(var e=new Et,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Ur(r.getCoordinates(),r))}return e},Wr.checkValid=function(t){new Wr(t).checkValid()};var Gr=function(t){this._mapOp=t};Gr.prototype.map=function(t){for(var e=new Et,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(ye.toGeometryArray(e))},Gr.prototype.interfaces_=function(){return[]},Gr.prototype.getClass=function(){return Gr},Gr.map=function(t,e){return new Gr(e).map(t)};var $r=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Et,this._resultLineList=new Et;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};$r.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},$r.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},$r.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},$r.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!ki.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},$r.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},$r.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},$r.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},$r.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(et.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(ki.isResultOfOp(r,e)&&e===ki.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},$r.prototype.interfaces_=function(){return[]},$r.prototype.getClass=function(){return $r};var Hr=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Et;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Hr.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Hr.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==ki.INTERSECTION)){var r=n.getLabel();ki.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},Hr.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Hr.prototype.interfaces_=function(){return[]},Hr.prototype.getClass=function(){return Hr};var Zr=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Zr.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Zr.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof ee&&!r.isEmpty()||(n=!1);for(var i=new Et,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof ee||(n=!1),i.add(s))}if(n)return this._factory.createPolygon(r,i.toArray([]));var a=new Et;return null!==r&&a.add(r),a.addAll(i),this._factory.buildGeometry(a)},Zr.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Zr.prototype.getInputGeometry=function(){return this._inputGeom},Zr.prototype.transformMultiLineString=function(t,e){for(var n=new Et,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Zr.prototype.transformCoordinates=function(t,e){return this.copy(t)},Zr.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Zr.prototype.transformMultiPoint=function(t,e){for(var n=new Et,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Zr.prototype.transformMultiPolygon=function(t,e){for(var n=new Et,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Zr.prototype.copy=function(t){return t.copy()},Zr.prototype.transformGeometryCollection=function(t,e){for(var n=new Et,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(ye.toGeometryArray(n)):this._factory.buildGeometry(n)},Zr.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Kt)return this.transformPoint(t,null);if(t instanceof te)return this.transformMultiPoint(t,null);if(t instanceof ee)return this.transformLinearRing(t,null);if(t instanceof Yt)return this.transformLineString(t,null);if(t instanceof qt)return this.transformMultiLineString(t,null);if(t instanceof Qt)return this.transformPolygon(t,null);if(t instanceof ne)return this.transformMultiPolygon(t,null);if(t instanceof Vt)return this.transformGeometryCollection(t,null);throw new _("Unknown Geometry subtype: "+t.getClass().getName())},Zr.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Zr.prototype.interfaces_=function(){return[]},Zr.prototype.getClass=function(){return Zr};var Yr=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new gn,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Yt&&"number"==typeof arguments[1]){var e=arguments[1];t.call(this,arguments[0].getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=r}};Yr.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new T(o)),0===r&&this._isClosed&&t.set(t.size()-1,new T(o)))}},Yr.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Yr.prototype.snapTo=function(t){var e=new St(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Yr.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new T(i),!1)}},Yr.prototype.findSegmentIndexToSnap=function(t,e){for(var n=v.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},Yr.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Yr.prototype.interfaces_=function(){return[]},Yr.prototype.getClass=function(){return Yr},Yr.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Xr=function(t){this._srcGeom=t||null},Kr={SNAP_PRECISION_FACTOR:{configurable:!0}};Xr.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Jr(e,n).transform(this._srcGeom)},Xr.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new Jr(t,n,!0).transform(this._srcGeom),i=r;return e&&C(i,Jt)&&(i=r.buffer(0)),i},Xr.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Xr.prototype.extractTargetCoordinates=function(t){for(var e=new f,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},Xr.prototype.computeMinimumSegmentLength=function(t){for(var e=v.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},Xr.prototype.interfaces_=function(){return[]},Xr.prototype.getClass=function(){return Xr},Xr.snap=function(t,e,n){var r=new Array(2).fill(null),i=new Xr(t);r[0]=i.snapTo(e,n);var o=new Xr(e);return r[1]=o.snapTo(r[0],n),r},Xr.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Xr.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===fe.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(Xr.computeOverlaySnapTolerance(i),Xr.computeOverlaySnapTolerance(o))}},Xr.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Xr.SNAP_PRECISION_FACTOR},Xr.snapToSelf=function(t,e,n){return new Xr(t).snapToSelf(e,n)},Kr.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Xr,Kr);var Jr=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new Yr(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Zr),Qr=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Qr.prototype.getCommon=function(){return v.longBitsToDouble(this._commonBits)},Qr.prototype.add=function(t){var e=v.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=Qr.signExpBits(this._commonBits),this._isFirst=!1,null):Qr.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Qr.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=Qr.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Qr.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=v.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+v.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},Qr.prototype.interfaces_=function(){return[]},Qr.prototype.getClass=function(){return Qr},Qr.getBit=function(t,e){return 0!=(t&1<<e)?1:0},Qr.signExpBits=function(t){return t>>52},Qr.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},Qr.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(Qr.getBit(t,r)!==Qr.getBit(e,r))return n;n++}return 52};var ti=function(){this._commonCoord=null,this._ccFilter=new ni},ei={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};ti.prototype.addCommonBits=function(t){var e=new ri(this._commonCoord);t.apply(e),t.geometryChanged()},ti.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new T(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new ri(e);return t.apply(n),t.geometryChanged(),t},ti.prototype.getCommonCoordinate=function(){return this._commonCoord},ti.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},ti.prototype.interfaces_=function(){return[]},ti.prototype.getClass=function(){return ti},ei.CommonCoordinateFilter.get=function(){return ni},ei.Translater.get=function(){return ri},Object.defineProperties(ti,ei);var ni=function(){this._commonBitsX=new Qr,this._commonBitsY=new Qr};ni.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},ni.prototype.getCommonCoordinate=function(){return new T(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},ni.prototype.interfaces_=function(){return[ft]},ni.prototype.getClass=function(){return ni};var ri=function(){this.trans=null;var t=arguments[0];this.trans=t};ri.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},ri.prototype.isDone=function(){return!1},ri.prototype.isGeometryChanged=function(){return!0},ri.prototype.interfaces_=function(){return[Ut]},ri.prototype.getClass=function(){return ri};var ii=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};ii.prototype.selfSnap=function(t){return new Xr(t).snapTo(t,this._snapTolerance)},ii.prototype.removeCommonBits=function(t){this._cbr=new ti,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},ii.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},ii.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=ki.overlayOp(e[0],e[1],t);return this.prepareResult(n)},ii.prototype.checkValid=function(t){t.isValid()||W.out.println("Snapped geometry is invalid")},ii.prototype.computeSnapTolerance=function(){this._snapTolerance=Xr.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ii.prototype.snap=function(t){var e=this.removeCommonBits(t);return Xr.snap(e[0],e[1],this._snapTolerance)},ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii},ii.overlayOp=function(t,e,n){return new ii(t,e).getResultGeometry(n)},ii.union=function(t,e){return ii.overlayOp(t,e,ki.UNION)},ii.intersection=function(t,e){return ii.overlayOp(t,e,ki.INTERSECTION)},ii.symDifference=function(t,e){return ii.overlayOp(t,e,ki.SYMDIFFERENCE)},ii.difference=function(t,e){return ii.overlayOp(t,e,ki.DIFFERENCE)};var oi=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};oi.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=ki.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof Q))throw t;r=t}if(!n)try{e=ii.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof Q?r:t}return e},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi},oi.overlayOp=function(t,e,n){return new oi(t,e).getResultGeometry(n)},oi.union=function(t,e){return oi.overlayOp(t,e,ki.UNION)},oi.intersection=function(t,e){return oi.overlayOp(t,e,ki.INTERSECTION)},oi.symDifference=function(t,e){return oi.overlayOp(t,e,ki.SYMDIFFERENCE)},oi.difference=function(t,e){return oi.overlayOp(t,e,ki.DIFFERENCE)};var si=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};si.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},si.prototype.interfaces_=function(){return[]},si.prototype.getClass=function(){return si};var ai=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},ci={INSERT:{configurable:!0},DELETE:{configurable:!0}};ai.prototype.isDelete=function(){return this._eventType===ai.DELETE},ai.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},ai.prototype.getObject=function(){return this._obj},ai.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},ai.prototype.getInsertEvent=function(){return this._insertEvent},ai.prototype.isInsert=function(){return this._eventType===ai.INSERT},ai.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},ai.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},ai.prototype.interfaces_=function(){return[b]},ai.prototype.getClass=function(){return ai},ci.INSERT.get=function(){return 1},ci.DELETE.get=function(){return 2},Object.defineProperties(ai,ci);var li=function(){};li.prototype.interfaces_=function(){return[]},li.prototype.getClass=function(){return li};var ui=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};ui.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(ui.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},ui.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},ui.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},ui.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},ui.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},ui.prototype.hasProperIntersection=function(){return this._hasProper},ui.prototype.hasIntersection=function(){return this._hasIntersection},ui.prototype.isDone=function(){return this._isDone},ui.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},ui.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},ui.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},ui.prototype.interfaces_=function(){return[]},ui.prototype.getClass=function(){return ui},ui.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var hi=function(t){function e(){t.call(this),this.events=new Et,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){Qe.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof ui&&C(arguments[0],wt)&&C(arguments[1],wt)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&C(arguments[0],wt)&&arguments[1]instanceof ui){var s=arguments[0],a=arguments[1];arguments[2]?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(a)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new si(n,i),s=new ai(e,n.getMinX(i),o);this.events.add(s),this.events.add(new ai(n.getMaxX(i),s))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(i.computeIntersections(a,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();){var i=r.next();this.addEdge(i,n)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(li),pi=function(){this._min=v.POSITIVE_INFINITY,this._max=v.NEGATIVE_INFINITY},fi={NodeComparator:{configurable:!0}};pi.prototype.getMin=function(){return this._min},pi.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},pi.prototype.getMax=function(){return this._max},pi.prototype.toString=function(){return J.toLineString(new T(this._min,0),new T(this._max,0))},pi.prototype.interfaces_=function(){return[]},pi.prototype.getClass=function(){return pi},fi.NodeComparator.get=function(){return di},Object.defineProperties(pi,fi);var di=function(){};di.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},di.prototype.interfaces_=function(){return[E]},di.prototype.getClass=function(){return di};var gi=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pi),mi=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pi),yi=function(){this._leaves=new Et,this._root=null,this._level=0};yi.prototype.buildTree=function(){Qe.sort(this._leaves,new pi.NodeComparator);for(var t=this._leaves,e=null,n=new Et;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},yi.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new gi(t,e,n))},yi.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},yi.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},yi.prototype.printNode=function(t){W.out.println(J.toLineString(new T(t._min,this._level),new T(t._max,this._level)))},yi.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},yi.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new mi(t.get(n),t.get(n+1));e.add(i)}}},yi.prototype.interfaces_=function(){return[]},yi.prototype.getClass=function(){return yi};var _i=function(){this._items=new Et};_i.prototype.visitItem=function(t){this._items.add(t)},_i.prototype.getItems=function(){return this._items},_i.prototype.interfaces_=function(){return[Ye]},_i.prototype.getClass=function(){return _i};var vi=function(){this._index=null;var t=arguments[0];if(!C(t,Jt))throw new _("Argument must be Polygonal");this._index=new wi(t)},xi={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};vi.prototype.locate=function(t){var e=new st(t),n=new bi(e);return this._index.query(t.y,t.y,n),e.getLocation()},vi.prototype.interfaces_=function(){return[Fn]},vi.prototype.getClass=function(){return vi},xi.SegmentVisitor.get=function(){return bi},xi.IntervalIndexedGeometry.get=function(){return wi},Object.defineProperties(vi,xi);var bi=function(){this._counter=null;var t=arguments[0];this._counter=t};bi.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},bi.prototype.interfaces_=function(){return[Ye]},bi.prototype.getClass=function(){return bi};var wi=function(){this._index=new yi;var t=arguments[0];this.init(t)};wi.prototype.init=function(t){for(var e=Tr.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},wi.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new gn(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},wi.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new _i;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},wi.prototype.interfaces_=function(){return[]},wi.prototype.getClass=function(){return wi};var Ei=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new pe,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Sr,2===arguments.length){var e=arguments[0],n=arguments[1],r=dt.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=s,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;M.NONE,r.getLocation(t,Se.ON)===M.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[1],r=arguments[2],i=new ui(arguments[0],!0,!1);i.setIsDoneIfProperInt(r);var o=this.createEdgeSetIntersector(),s=this._parentGeom instanceof ee||this._parentGeom instanceof Qt||this._parentGeom instanceof ne,a=n||!s;return o.computeIntersections(this._edges,i,a),this.addSelfIntersectionNodes(this._argIndex),i}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new ui(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Kt){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,M.INTERIOR)}else if(arguments[0]instanceof T){var e=arguments[0];this.insertPoint(this._argIndex,e,M.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),M.EXTERIOR,M.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,M.INTERIOR,M.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],M.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],M.BOUNDARY)},e.prototype.addLineString=function(t){var e=kt.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new nr(e,new Pe(this._argIndex,M.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),et.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===M.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=kt.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;at.isCCW(r)&&(i=n,o=e);var s=new nr(r,new Pe(this._argIndex,M.BOUNDARY,i,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,r[0],M.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new Pe(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new hi},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ne&&(this._useBoundaryDeterminationRule=!1),e instanceof Qt)this.addPolygon(e);else if(e instanceof Yt)this.addLineString(e);else if(e instanceof Kt)this.addPoint(e);else if(e instanceof te)this.addCollection(e);else if(e instanceof qt)this.addCollection(e);else if(e instanceof ne)this.addCollection(e);else{if(!(e instanceof Vt))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return C(this._parentGeom,Jt)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new vi(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?M.BOUNDARY:M.INTERIOR},e}(We),Ti=function(){if(this._li=new it,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Ei(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=dt.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ei(0,e,r),this._arg[1]=new Ei(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ei(0,i,s),this._arg[1]=new Ei(1,o,s)}};Ti.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Ti.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Ti.prototype.interfaces_=function(){return[]},Ti.prototype.getClass=function(){return Ti};var Si=function(){};Si.prototype.interfaces_=function(){return[]},Si.prototype.getClass=function(){return Si},Si.map=function(){if(arguments[0]instanceof ut&&C(arguments[1],Si.MapOp)){for(var t=arguments[0],e=arguments[1],n=new Et,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(C(arguments[0],xt)&&C(arguments[1],Si.MapOp)){for(var o=arguments[0],s=arguments[1],a=new Et,c=o.iterator();c.hasNext();){var l=c.next(),u=s.map(l);null!==u&&a.add(u)}return a}},Si.MapOp=function(){};var ki=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Sr,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Hn,this._resultPolyList=new Et,this._resultLineList=new Et,this._resultPointList=new Et,this._graph=new We(new Gn),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Pe(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new Et;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==M.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new Et,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new Et;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Wr.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Ge(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new $r(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new Hr(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Se.RIGHT),i.getLocation(1,Se.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(et.isTrue(!r.isNull(i,Se.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Se.LEFT,r.getLocation(i,Se.LEFT)),et.isTrue(!r.isNull(i,Se.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Se.RIGHT,r.getLocation(i,Se.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ti);ki.overlayOp=function(t,e,n){return new ki(t,e).getResultGeometry(n)},ki.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return ki.createEmptyResult(ki.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Gr.map(t,{interfaces_:function(){return[Si.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,ki.INTERSECTION)},ki.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return ki.createEmptyResult(ki.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,ki.SYMDIFFERENCE)},ki.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case ki.INTERSECTION:o=Math.min(r,i);break;case ki.UNION:o=Math.max(r,i);break;case ki.DIFFERENCE:o=r;break;case ki.SYMDIFFERENCE:o=Math.max(r,i)}return o},ki.createEmptyResult=function(t,e,n,r){var i=null;switch(ki.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},ki.difference=function(t,e){return t.isEmpty()?ki.createEmptyResult(ki.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,ki.DIFFERENCE))},ki.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return ki.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];switch(i===M.BOUNDARY&&(i=M.INTERIOR),o===M.BOUNDARY&&(o=M.INTERIOR),s){case ki.INTERSECTION:return i===M.INTERIOR&&o===M.INTERIOR;case ki.UNION:return i===M.INTERIOR||o===M.INTERIOR;case ki.DIFFERENCE:return i===M.INTERIOR&&o!==M.INTERIOR;case ki.SYMDIFFERENCE:return i===M.INTERIOR&&o!==M.INTERIOR||i!==M.INTERIOR&&o===M.INTERIOR}return!1}},ki.INTERSECTION=1,ki.UNION=2,ki.DIFFERENCE=3,ki.SYMDIFFERENCE=4;var Ai=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Sr,this._seg=new gn;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Ai.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Ai.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?M.BOUNDARY:this._ptLocator.locate(t,this._g)},Ai.prototype.extractLinework=function(t){var e=new Mi;t.apply(e);var n=e.getLinework(),r=ye.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Ai.prototype.interfaces_=function(){return[]},Ai.prototype.getClass=function(){return Ai};var Mi=function(){this._linework=null,this._linework=new Et};Mi.prototype.getLinework=function(){return this._linework},Mi.prototype.filter=function(t){if(t instanceof Qt){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Mi.prototype.interfaces_=function(){return[Ft]},Mi.prototype.getClass=function(){return Mi};var Ii=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Ii.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Ii.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Ii.prototype.getPoints=function(t){for(var e=new Et,n=Tr.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Ii.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,s=Math.sqrt(i*i+o*o),a=n*i/s,c=n*o/s,l=(e.x+t.x)/2,u=(e.y+t.y)/2;if(this._doLeft){var h=new T(l-c,u+a);r.add(h)}if(this._doRight){var p=new T(l+c,u-a);r.add(p)}},Ii.prototype.interfaces_=function(){return[]},Ii.prototype.getClass=function(){return Ii};var Ci=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new Et;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Ai(this._geom[0],this._boundaryDistanceTolerance),new Ai(this._geom[1],this._boundaryDistanceTolerance),new Ai(this._geom[2],this._boundaryDistanceTolerance)]},Oi={TOLERANCE:{configurable:!0}};Ci.prototype.reportResult=function(t,e,n){W.out.println("Overlay result invalid - A:"+M.toLocationSymbol(e[0])+" B:"+M.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+M.toLocationSymbol(e[2]))},Ci.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Ci.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!Ci.hasLocation(this._location,M.BOUNDARY)||this.isValidResult(r,this._location)}},Ci.prototype.addTestPts=function(t){var e=new Ii(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Ci.prototype.isValidResult=function(t,e){var n=ki.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===M.INTERIOR);return r||this.reportResult(t,e,n),r},Ci.prototype.getInvalidLocation=function(){return this._invalidLocation},Ci.prototype.interfaces_=function(){return[]},Ci.prototype.getClass=function(){return Ci},Ci.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Ci.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Xr.computeSizeBasedSnapTolerance(t),Xr.computeSizeBasedSnapTolerance(e))},Ci.isValid=function(t,e,n,r){return new Ci(t,e,r).isValid(n)},Oi.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Ci,Oi);var Pi=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Pi.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Pi.prototype.combine=function(){for(var t=new Et,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Pi.prototype.interfaces_=function(){return[]},Pi.prototype.getClass=function(){return Pi},Pi.combine=function(){if(1===arguments.length)return new Pi(arguments[0]).combine();if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Pi(Pi.createList(t,e)).combine()}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];return new Pi(Pi.createList(n,r,i)).combine()}},Pi.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Pi.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Et;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=new Et;return s.add(r),s.add(i),s.add(o),s}};var Li=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new Et)},Di={STRTREE_NODE_CAPACITY:{configurable:!0}};Li.prototype.reduceToGeometries=function(t){for(var e=new Et,n=t.iterator();n.hasNext();){var r=n.next(),i=null;C(r,wt)?i=this.unionTree(r):r instanceof ut&&(i=r),e.add(i)}return e},Li.prototype.extractByEnvelope=function(t,e,n){for(var r=new Et,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Li.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Pi.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},Li.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new sn(Li.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},Li.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Li.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Li.getGeometry(e,n),Li.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),s=this.binaryUnion(e,n,o),a=this.binaryUnion(e,o,r);return this.unionSafe(s,a)}},Li.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},Li.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Li.prototype.unionActual=function(t,e){return Li.restrictToPolygons(t.union(e))},Li.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Li.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new Et,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),s=this.unionActual(i,o);return r.add(s),Pi.combine(r)},Li.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Li.prototype.interfaces_=function(){return[]},Li.prototype.getClass=function(){return Li},Li.restrictToPolygons=function(t){if(C(t,Jt))return t;var e=Er.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(ye.toPolygonArray(e))},Li.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Li.union=function(t){return new Li(t).union()},Di.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Li,Di);var Ri=function(){};Ri.prototype.interfaces_=function(){return[]},Ri.prototype.getClass=function(){return Ri},Ri.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return ki.createEmptyResult(ki.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,ki.UNION)},t.GeoJSONReader=Ee,t.GeoJSONWriter=Te,t.OverlayOp=ki,t.UnionOp=Ri,t.BufferOp=gr,Object.defineProperty(t,"__esModule",{value:!0})}(e)},89635:function(t,e,n){var r=(0,n(77566).twig)({id:"$resolved:9769c62e0ad544d0018f884140d0504a5bc420073dd8255625ca6a0d1cb493f0cc248628180a370b8b06d6c9a38f1e4b4b1c1c04c91572c44f7752f0dba7bf79:chat-action-item.twig",data:[{type:"raw",value:'<li class="item">\n    <article class="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"message",match:["message"]},{type:"Twig.expression.type.key.period",key:"css"}]},{type:"raw",value:'">\n        <section class="text-nowrap">\n            '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"message",match:["message"]},{type:"Twig.expression.type.key.period",key:"uuid"},{type:"Twig.expression.type.test",filter:"empty",modifier:"not"}],output:[{type:"raw",value:'                <div class="avatar"><img src="/icon/'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"message",match:["message"]},{type:"Twig.expression.type.key.period",key:"uuid"}]},{type:"raw",value:'"/></div>\n            '}]}},{type:"raw",value:'            <div class="author-info">\n                <div class="author">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"message",match:["message"]},{type:"Twig.expression.type.key.period",key:"senderName"}]},{type:"raw",value:'</div>\n                <div class="time">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"datesec",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.variable",value:"message",match:["message"]},{type:"Twig.expression.type.key.period",key:"time"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</div>\n            </div>\n        </section>\n        <div class="">\n            <div class="">\n                공격 명령이 수신되었습니다.\n            </div>\n        </div>\n    </article>\n</li>'}],allowInlineIncludes:!0,rethrow:!0});t.exports=function(t){return r.render(t)},t.exports.tokens=[{type:"raw",value:'<li class="item">\n    <article class="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"message",match:["message"]},{type:"Twig.expression.type.key.period",key:"css"}]},{type:"raw",value:'">\n        <section class="text-nowrap">\n            '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"message",match:["message"]},{type:"Twig.expression.type.key.period",key:"uuid"},{type:"Twig.expression.type.test",filter:"empty",modifier:"not"}],output:[{type:"raw",value:'                <div class="avatar"><img src="/icon/'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"message",match:["message"]},{type:"Twig.expression.type.key.period",key:"uuid"}]},{type:"raw",value:'"/></div>\n            '}]}},{type:"raw",value:'            <div class="author-info">\n                <div class="author">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"message",match:["message"]},{type:"Twig.expression.type.key.period",key:"senderName"}]},{type:"raw",value:'</div>\n                <div class="time">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"datesec",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.variable",value:"message",match:["message"]},{type:"Twig.expression.type.key.period",key:"time"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</div>\n            </div>\n        </section>\n        <div class="">\n            <div class="">\n                공격 명령이 수신되었습니다.\n            </div>\n        </div>\n    </article>\n</li>'}]},46185:function(t,e,n){var r=(0,n(77566).twig)({id:"$resolved:7d62fd5d0289556088a71567ab29b457eef9c37deabe4aec94e9aac2adc269ae6f0e61caeb5550547b43596ca9673ab6a6589cdb0358d8e57a3ce68c9ec4a778:chat-message-item.twig",data:[{type:"raw",value:'<li class="item">\n    <article class="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"css",match:["css"]}]},{type:"raw",value:'">\n        <section class="text-nowrap">\n            '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"uuid",match:["uuid"]},{type:"Twig.expression.type.test",filter:"empty",modifier:"not"}],output:[{type:"raw",value:'                <div class="avatar"><img src="/icon/'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"uuid",match:["uuid"]}]},{type:"raw",value:'"/></div>\n            '}]}},{type:"raw",value:'            <div class="author-info">\n                <div class="author">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"senderName",match:["senderName"]}]},{type:"raw",value:'</div>\n                <div class="time">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"datesec",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.variable",value:"time",match:["time"]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</div>\n            </div>\n        </section>\n        <div class="activity">\n            '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"message",match:["message"]},{type:"Twig.expression.type.filter",value:"newline2br",match:["| newline2br","newline2br"]}]},{type:"raw",value:"\n        </div>\n    </article>\n</li>"}],allowInlineIncludes:!0,rethrow:!0});t.exports=function(t){return r.render(t)},t.exports.tokens=[{type:"raw",value:'<li class="item">\n    <article class="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"css",match:["css"]}]},{type:"raw",value:'">\n        <section class="text-nowrap">\n            '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"uuid",match:["uuid"]},{type:"Twig.expression.type.test",filter:"empty",modifier:"not"}],output:[{type:"raw",value:'                <div class="avatar"><img src="/icon/'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"uuid",match:["uuid"]}]},{type:"raw",value:'"/></div>\n            '}]}},{type:"raw",value:'            <div class="author-info">\n                <div class="author">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"senderName",match:["senderName"]}]},{type:"raw",value:'</div>\n                <div class="time">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"datesec",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.variable",value:"time",match:["time"]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</div>\n            </div>\n        </section>\n        <div class="activity">\n            '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"message",match:["message"]},{type:"Twig.expression.type.filter",value:"newline2br",match:["| newline2br","newline2br"]}]},{type:"raw",value:"\n        </div>\n    </article>\n</li>"}]},78201:function(t,e,n){var r=(0,n(77566).twig)({id:"$resolved:95544c447b30aaec0fe49082b4ed634edaab817172ed44f43b757adaea50446442fb33dd6de9de900ddff593d88565e4af7f0feb5bd88f451990131d99b37e3d:result-direct.twig",data:[{type:"raw",value:'<tabs class="tab-left fade">\n    <headers class="narrow">\n        '},{type:"logic",token:{type:"Twig.logic.type.for",keyVar:null,valueVar:"peer",expression:[{type:"Twig.expression.type.variable",value:"p2p",match:["p2p"]}],output:[{type:"raw",value:'            <label class="tab-label">\n                <input name="direct_results_tab" type="radio" class="tab-input info" '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.string",value:'checked="checked"'},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:"/>\n                결과 "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"}]},{type:"raw",value:"\n            </label>\n        "}]}},{type:"raw",value:'    </headers>\n\n    <contents class="full">\n        '},{type:"logic",token:{type:"Twig.logic.type.for",keyVar:null,valueVar:"peer",expression:[{type:"Twig.expression.type.variable",value:"p2p",match:["p2p"]}],output:[{type:"raw",value:'            <content class="p0">\n                <tabs class="tab-bottom fade">\n                    <headers class="narrow">\n                        <label class="tab-label">\n                            <input name="direct_result_tab'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"}]},{type:"raw",value:'" type="radio" class="tab-input orange" checked="checked"/>\n                            매칭\n                        </label>\n                        <label class="tab-label text-yellow">\n                            <input name="direct_result_tab'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"}]},{type:"raw",value:'" type="radio" class="tab-input yellow">\n                            로그\n                        </label>\n                    </headers>\n\n                    <contents class="full">\n                        <content class="p0">\n                            <table class="styled fixed hover">\n                                <thead>\n                                <tr class="text-middle">\n                                    <th class="text-center" colspan="2">직접 사격</th>\n                                    <th class="text-right" colspan="6">\n                                        <button class="button warning" @click="checkDirectRoute" @click-data="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"-",precidence:6,associativity:"leftToRight",operator:"-"}]},{type:"raw",value:'"><i class="fa-solid fa-route"></i> 예상 경로 표시\n                                        </button>\n                                        <button class="button orange" @click="attackDirect" @click-data="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"-",precidence:6,associativity:"leftToRight",operator:"-"}]},{type:"raw",value:'"><i class="fa-regular fa-swords"></i> 공격 명령</button>\n                                    </th>\n                                </tr>\n                                <tr class="text-middle">\n                                    <th class="text-center" colspan="2">\n                                        아군\n                                    </th>\n                                    <th class="text-center" colspan="2">적군</th>\n                                    <th class="text-center">스코어</th>\n                                    <th class="text-center">소요시간</th>\n                                    <th class="text-center">비용</th>\n                                    <th class="text-center">공격효과</th>\n                                </tr>\n                                </thead>\n                                <tbody>\n                                '},{type:"logic",token:{type:"Twig.logic.type.for",keyVar:null,valueVar:"target",expression:[{type:"Twig.expression.type.variable",value:"peer",match:["peer"]},{type:"Twig.expression.type.key.period",key:"matches"}],output:[{type:"raw",value:'                                    <tr class="text-middle">\n                                        <td class="text-center">\n                                            <div class="text-small">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"target",match:["target"]},{type:"Twig.expression.type.key.period",key:"ally"},{type:"Twig.expression.type.key.period",key:"properties"},{type:"Twig.expression.type.key.period",key:"unit"},{type:"Twig.expression.type.key.period",key:"unitName"}]},{type:"raw",value:'</div>\n                                            <div class="text-info">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"target",match:["target"]},{type:"Twig.expression.type.key.period",key:"ally"},{type:"Twig.expression.type.key.period",key:"properties"},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:'</div>\n                                        </td>\n                                        <td class="text-center" @click="moveToAllyDirect" @click-data="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"target",match:["target"]},{type:"Twig.expression.type.filter",value:"stringify",match:["| stringify","stringify"]}]},{type:"raw",value:'"><img\n                                                    src="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"ctx",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"/icon/by-name/"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"target",match:["target"]},{type:"Twig.expression.type.key.period",key:"ally"},{type:"Twig.expression.type.key.period",key:"properties"},{type:"Twig.expression.type.key.period",key:"icon"}]},{type:"raw",value:'" height="48"/></td>\n                                        <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"target",match:["target"]},{type:"Twig.expression.type.key.period",key:"target"},{type:"Twig.expression.type.key.period",key:"properties"},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:'</td>\n                                        <td class="text-center" @click="moveToTargetDirect" @click-data="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"target",match:["target"]},{type:"Twig.expression.type.filter",value:"stringify",match:["| stringify","stringify"]}]},{type:"raw",value:'"><img\n                                                    src="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"ctx",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"/icon/by-name/"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"target",match:["target"]},{type:"Twig.expression.type.key.period",key:"target"},{type:"Twig.expression.type.key.period",key:"properties"},{type:"Twig.expression.type.key.period",key:"icon"}]},{type:"raw",value:'" height="48"/></td>\n                                        <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"target",match:["target"]},{type:"Twig.expression.type.key.period",key:"scoreValue"}]},{type:"raw",value:'</td>\n                                        <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"target",match:["target"]},{type:"Twig.expression.type.key.period",key:"durationValue"}]},{type:"raw",value:'</td>\n                                        <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"target",match:["target"]},{type:"Twig.expression.type.key.period",key:"cost"}]},{type:"raw",value:'</td>\n                                        <td class="text-left">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"target",match:["target"]},{type:"Twig.expression.type.key.period",key:"effect"}]},{type:"raw",value:"</td>\n                                    </tr>\n                                "}]}},{type:"raw",value:'                                </tbody>\n                                <tfoot>\n                                <tr class="text-middle">\n                                    <th class="text-center" colspan="2">직접 사격</th>\n                                    <th class="text-right" colspan="6">\n                                        <button class="button warning" @click="checkDirectRoute" @click-data="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"-",precidence:6,associativity:"leftToRight",operator:"-"}]},{type:"raw",value:'"><i class="fa-solid fa-route"></i></button>\n                                        <button class="button orange" @click="attackDirect" @click-data="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"-",precidence:6,associativity:"leftToRight",operator:"-"}]},{type:"raw",value:'"><i class="fa-regular fa-swords"></i> 공격 명령</button>\n                                    </th>\n                                </tr>\n                                </tfoot>\n                            </table>\n                        </content>\n                        <content class="font-cc">\n                            '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"peer",match:["peer"]},{type:"Twig.expression.type.key.period",key:"explanation"},{type:"Twig.expression.type.filter",value:"newline2br",match:["| newline2br","newline2br"]}]},{type:"raw",value:"\n                        </content>\n                    </contents>\n                </tabs>\n            </content>\n        "}]}},{type:"raw",value:"    </contents>\n</tabs>"}],allowInlineIncludes:!0,rethrow:!0});t.exports=function(t){return r.render(t)},t.exports.tokens=[{type:"raw",value:'<tabs class="tab-left fade">\n    <headers class="narrow">\n        '},{type:"logic",token:{type:"Twig.logic.type.for",keyVar:null,valueVar:"peer",expression:[{type:"Twig.expression.type.variable",value:"p2p",match:["p2p"]}],output:[{type:"raw",value:'            <label class="tab-label">\n                <input name="direct_results_tab" type="radio" class="tab-input info" '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.string",value:'checked="checked"'},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:"/>\n                결과 "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"}]},{type:"raw",value:"\n            </label>\n        "}]}},{type:"raw",value:'    </headers>\n\n    <contents class="full">\n        '},{type:"logic",token:{type:"Twig.logic.type.for",keyVar:null,valueVar:"peer",expression:[{type:"Twig.expression.type.variable",value:"p2p",match:["p2p"]}],output:[{type:"raw",value:'            <content class="p0">\n                <tabs class="tab-bottom fade">\n                    <headers class="narrow">\n                        <label class="tab-label">\n                            <input name="direct_result_tab'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"}]},{type:"raw",value:'" type="radio" class="tab-input orange" checked="checked"/>\n                            매칭\n                        </label>\n                        <label class="tab-label text-yellow">\n                            <input name="direct_result_tab'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"}]},{type:"raw",value:'" type="radio" class="tab-input yellow">\n                            로그\n                        </label>\n                    </headers>\n\n                    <contents class="full">\n                        <content class="p0">\n                            <table class="styled fixed hover">\n                                <thead>\n                                <tr class="text-middle">\n                                    <th class="text-center" colspan="2">직접 사격</th>\n                                    <th class="text-right" colspan="6">\n                                        <button class="button warning" @click="checkDirectRoute" @click-data="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"-",precidence:6,associativity:"leftToRight",operator:"-"}]},{type:"raw",value:'"><i class="fa-solid fa-route"></i> 예상 경로 표시\n                                        </button>\n                                        <button class="button orange" @click="attackDirect" @click-data="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"-",precidence:6,associativity:"leftToRight",operator:"-"}]},{type:"raw",value:'"><i class="fa-regular fa-swords"></i> 공격 명령</button>\n                                    </th>\n                                </tr>\n                                <tr class="text-middle">\n                                    <th class="text-center" colspan="2">\n                                        아군\n                                    </th>\n                                    <th class="text-center" colspan="2">적군</th>\n                                    <th class="text-center">스코어</th>\n                                    <th class="text-center">소요시간</th>\n                                    <th class="text-center">비용</th>\n                                    <th class="text-center">공격효과</th>\n                                </tr>\n                                </thead>\n                                <tbody>\n                                '},{type:"logic",token:{type:"Twig.logic.type.for",keyVar:null,valueVar:"target",expression:[{type:"Twig.expression.type.variable",value:"peer",match:["peer"]},{type:"Twig.expression.type.key.period",key:"matches"}],output:[{type:"raw",value:'                                    <tr class="text-middle">\n                                        <td class="text-center">\n                                            <div class="text-small">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"target",match:["target"]},{type:"Twig.expression.type.key.period",key:"ally"},{type:"Twig.expression.type.key.period",key:"properties"},{type:"Twig.expression.type.key.period",key:"unit"},{type:"Twig.expression.type.key.period",key:"unitName"}]},{type:"raw",value:'</div>\n                                            <div class="text-info">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"target",match:["target"]},{type:"Twig.expression.type.key.period",key:"ally"},{type:"Twig.expression.type.key.period",key:"properties"},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:'</div>\n                                        </td>\n                                        <td class="text-center" @click="moveToAllyDirect" @click-data="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"target",match:["target"]},{type:"Twig.expression.type.filter",value:"stringify",match:["| stringify","stringify"]}]},{type:"raw",value:'"><img\n                                                    src="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"ctx",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"/icon/by-name/"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"target",match:["target"]},{type:"Twig.expression.type.key.period",key:"ally"},{type:"Twig.expression.type.key.period",key:"properties"},{type:"Twig.expression.type.key.period",key:"icon"}]},{type:"raw",value:'" height="48"/></td>\n                                        <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"target",match:["target"]},{type:"Twig.expression.type.key.period",key:"target"},{type:"Twig.expression.type.key.period",key:"properties"},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:'</td>\n                                        <td class="text-center" @click="moveToTargetDirect" @click-data="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"target",match:["target"]},{type:"Twig.expression.type.filter",value:"stringify",match:["| stringify","stringify"]}]},{type:"raw",value:'"><img\n                                                    src="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"ctx",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"/icon/by-name/"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"target",match:["target"]},{type:"Twig.expression.type.key.period",key:"target"},{type:"Twig.expression.type.key.period",key:"properties"},{type:"Twig.expression.type.key.period",key:"icon"}]},{type:"raw",value:'" height="48"/></td>\n                                        <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"target",match:["target"]},{type:"Twig.expression.type.key.period",key:"scoreValue"}]},{type:"raw",value:'</td>\n                                        <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"target",match:["target"]},{type:"Twig.expression.type.key.period",key:"durationValue"}]},{type:"raw",value:'</td>\n                                        <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"target",match:["target"]},{type:"Twig.expression.type.key.period",key:"cost"}]},{type:"raw",value:'</td>\n                                        <td class="text-left">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"target",match:["target"]},{type:"Twig.expression.type.key.period",key:"effect"}]},{type:"raw",value:"</td>\n                                    </tr>\n                                "}]}},{type:"raw",value:'                                </tbody>\n                                <tfoot>\n                                <tr class="text-middle">\n                                    <th class="text-center" colspan="2">직접 사격</th>\n                                    <th class="text-right" colspan="6">\n                                        <button class="button warning" @click="checkDirectRoute" @click-data="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"-",precidence:6,associativity:"leftToRight",operator:"-"}]},{type:"raw",value:'"><i class="fa-solid fa-route"></i></button>\n                                        <button class="button orange" @click="attackDirect" @click-data="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"-",precidence:6,associativity:"leftToRight",operator:"-"}]},{type:"raw",value:'"><i class="fa-regular fa-swords"></i> 공격 명령</button>\n                                    </th>\n                                </tr>\n                                </tfoot>\n                            </table>\n                        </content>\n                        <content class="font-cc">\n                            '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"peer",match:["peer"]},{type:"Twig.expression.type.key.period",key:"explanation"},{type:"Twig.expression.type.filter",value:"newline2br",match:["| newline2br","newline2br"]}]},{type:"raw",value:"\n                        </content>\n                    </contents>\n                </tabs>\n            </content>\n        "}]}},{type:"raw",value:"    </contents>\n</tabs>"}]},29114:function(t,e,n){var r=(0,n(77566).twig)({id:"$resolved:863d725e0d19f2e81fff97f55566efb6e82d87085f6942ae6ff43a6325d37cc8eccd824e510b9a7670dc78b87cc98bb30b225e302c9f8872188f46459fa89825:result-indirect.twig",data:[{type:"raw",value:'<tabs class="tab-left fade">\n    <headers class="narrow">\n        '},{type:"logic",token:{type:"Twig.logic.type.for",keyVar:null,valueVar:"peer",expression:[{type:"Twig.expression.type.variable",value:"btcs",match:["btcs"]}],output:[{type:"raw",value:'            <label class="tab-label">\n                <input name="indirect_results_tab" type="radio" class="tab-input info" '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.string",value:'checked="checked"'},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:"/>\n                결과 "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"}]},{type:"raw",value:"\n            </label>\n        "}]}},{type:"raw",value:'    </headers>\n\n    <contents class="full">\n        '},{type:"logic",token:{type:"Twig.logic.type.for",keyVar:null,valueVar:"peer",expression:[{type:"Twig.expression.type.variable",value:"btcs",match:["btcs"]}],output:[{type:"raw",value:'            <content class="p0">\n                <tabs class="tab-bottom fade">\n                    <headers class="narrow">\n                        <label class="tab-label">\n                            <input name="indirect_result_tab'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"}]},{type:"raw",value:'" type="radio" class="tab-input blue" checked="checked"/>\n                            매칭\n                        </label>\n                        <label class="tab-label text-yellow">\n                            <input name="indirect_result_tab'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"}]},{type:"raw",value:'" type="radio" class="tab-input yellow">\n                            로그\n                        </label>\n                    </headers>\n\n                    <contents class="full">\n                        <content class="p0">\n                            <table class="styled fixed hover">\n                                <colgroup>\n                                    <col style="width: 200px"/>\n                                    <col style="width: 100px"/>\n                                </colgroup>\n                                <thead>\n                                <tr class="text-middle">\n                                    <th class="text-center">간접 사격</th>\n                                    <th class="text-right" colspan="5">\n                                        <button class="button warning" @click="checkIndirectRoute" @click-data="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"-",precidence:6,associativity:"leftToRight",operator:"-"}]},{type:"raw",value:'"><i class="fa-solid fa-route"></i> 포격 거리 표시\n                                        </button>\n                                        <button class="button orange" @click="attackIndirect" @click-data="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"-",precidence:6,associativity:"leftToRight",operator:"-"}]},{type:"raw",value:'"><i class="fa-regular fa-swords"></i> 포격 명령</button>\n                                    </th>\n                                </tr>\n                                <tr class="text-middle">\n                                    <th class="text-center">\n                                        아군\n                                    </th>\n                                    <th class="text-center">적군</th>\n                                    '},{type:"raw",value:'\n                                    <th class="text-center">스코어</th>\n                                    <th class="text-center">소요시간</th>\n                                    <th class="text-center">비용</th>\n                                    <th class="text-center">공격효과</th>\n                                </tr>\n                                </thead>\n                                <tbody>\n                                <tr class="text-middle">\n                                    <td class="text-center p0">\n                                        <table class="styled fixed">\n                                            <colgroup>\n                                                <col style="width: 100px"/>\n                                                <col style="width: 100px"/>\n                                            </colgroup>\n                                            <tbody>\n                                            '},{type:"logic",token:{type:"Twig.logic.type.for",keyVar:null,valueVar:"ally",expression:[{type:"Twig.expression.type.variable",value:"peer",match:["peer"]},{type:"Twig.expression.type.key.period",key:"allys"}],output:[{type:"raw",value:'                                                <tr>\n                                                    <td class="text-center p0">\n                                                        <div class="text-small">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"ally",match:["ally"]},{type:"Twig.expression.type.key.period",key:"properties"},{type:"Twig.expression.type.key.period",key:"unit"},{type:"Twig.expression.type.key.period",key:"unitName"}]},{type:"raw",value:'</div>\n                                                        <div class="text-info h7 m0">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"ally",match:["ally"]},{type:"Twig.expression.type.key.period",key:"properties"},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:'</div>\n                                                    </td>\n                                                    <td class="text-center p0" @click="moveToAllyIndirect" @click-data="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"ally",match:["ally"]},{type:"Twig.expression.type.filter",value:"stringify",match:["| stringify","stringify"]}]},{type:"raw",value:'">\n                                                        <img src="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"ctx",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"/icon/by-name/"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"ally",match:["ally"]},{type:"Twig.expression.type.key.period",key:"properties"},{type:"Twig.expression.type.key.period",key:"icon"}]},{type:"raw",value:'" height="48"/>\n                                                    </td>\n                                                </tr>\n                                            '}]}},{type:"raw",value:'                                            </tbody>\n                                        </table>\n                                    </td>\n                                    <td class="text-center text-top">\n                                        '},{type:"logic",token:{type:"Twig.logic.type.for",keyVar:null,valueVar:"target",expression:[{type:"Twig.expression.type.variable",value:"peer",match:["peer"]},{type:"Twig.expression.type.key.period",key:"targets"}],output:[{type:"raw",value:'                                            <img src="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"ctx",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"/icon/by-name/"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"target",match:["target"]},{type:"Twig.expression.type.key.period",key:"properties"},{type:"Twig.expression.type.key.period",key:"icon"}]},{type:"raw",value:'" height="40" @click="moveToTargetIndirect"\n                                                 @click-data="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"target",match:["target"]},{type:"Twig.expression.type.filter",value:"stringify",match:["| stringify","stringify"]}]},{type:"raw",value:'"/>\n                                        '}]}},{type:"raw",value:"                                    </td>\n                                    "},{type:"raw",value:'\n                                    <td class="text-center text-top">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"peer",match:["peer"]},{type:"Twig.expression.type.key.period",key:"scoreValue"}]},{type:"raw",value:'</td>\n                                    <td class="text-center text-top">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"peer",match:["peer"]},{type:"Twig.expression.type.key.period",key:"durationValue"}]},{type:"raw",value:'</td>\n                                    <td class="text-center text-top">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"peer",match:["peer"]},{type:"Twig.expression.type.key.period",key:"cost"}]},{type:"raw",value:'</td>\n                                    <td class="text-left text-top">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"peer",match:["peer"]},{type:"Twig.expression.type.key.period",key:"effect"}]},{type:"raw",value:'</td>\n                                </tr>\n                                </tbody>\n                                <tfoot>\n                                <tr class="text-middle">\n                                    <th class="text-center">간접 사격</th>\n                                    <th class="text-right" colspan="5">\n                                        <button class="button warning" @click="checkIndirectRoute" @click-data="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"-",precidence:6,associativity:"leftToRight",operator:"-"}]},{type:"raw",value:'"><i class="fa-solid fa-route"></i></button>\n                                        <button class="button orange" @click="attackIndirect" @click-data="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"-",precidence:6,associativity:"leftToRight",operator:"-"}]},{type:"raw",value:'"><i class="fa-regular fa-swords"></i> 포격 명령</button>\n                                    </th>\n                                </tr>\n                                </tfoot>\n                            </table>\n                        </content>\n                        <content class="font-cc">\n                            '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"peer",match:["peer"]},{type:"Twig.expression.type.key.period",key:"explanation"},{type:"Twig.expression.type.filter",value:"newline2br",match:["| newline2br","newline2br"]}]},{type:"raw",value:"\n                        </content>\n                    </contents>\n                </tabs>\n            </content>\n        "}]}},{type:"raw",value:"    </contents>\n</tabs>"}],allowInlineIncludes:!0,rethrow:!0});t.exports=function(t){return r.render(t)},t.exports.tokens=[{type:"raw",value:'<tabs class="tab-left fade">\n    <headers class="narrow">\n        '},{type:"logic",token:{type:"Twig.logic.type.for",keyVar:null,valueVar:"peer",expression:[{type:"Twig.expression.type.variable",value:"btcs",match:["btcs"]}],output:[{type:"raw",value:'            <label class="tab-label">\n                <input name="indirect_results_tab" type="radio" class="tab-input info" '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.string",value:'checked="checked"'},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:"/>\n                결과 "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"}]},{type:"raw",value:"\n            </label>\n        "}]}},{type:"raw",value:'    </headers>\n\n    <contents class="full">\n        '},{type:"logic",token:{type:"Twig.logic.type.for",keyVar:null,valueVar:"peer",expression:[{type:"Twig.expression.type.variable",value:"btcs",match:["btcs"]}],output:[{type:"raw",value:'            <content class="p0">\n                <tabs class="tab-bottom fade">\n                    <headers class="narrow">\n                        <label class="tab-label">\n                            <input name="indirect_result_tab'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"}]},{type:"raw",value:'" type="radio" class="tab-input blue" checked="checked"/>\n                            매칭\n                        </label>\n                        <label class="tab-label text-yellow">\n                            <input name="indirect_result_tab'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"}]},{type:"raw",value:'" type="radio" class="tab-input yellow">\n                            로그\n                        </label>\n                    </headers>\n\n                    <contents class="full">\n                        <content class="p0">\n                            <table class="styled fixed hover">\n                                <colgroup>\n                                    <col style="width: 200px"/>\n                                    <col style="width: 100px"/>\n                                </colgroup>\n                                <thead>\n                                <tr class="text-middle">\n                                    <th class="text-center">간접 사격</th>\n                                    <th class="text-right" colspan="5">\n                                        <button class="button warning" @click="checkIndirectRoute" @click-data="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"-",precidence:6,associativity:"leftToRight",operator:"-"}]},{type:"raw",value:'"><i class="fa-solid fa-route"></i> 포격 거리 표시\n                                        </button>\n                                        <button class="button orange" @click="attackIndirect" @click-data="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"-",precidence:6,associativity:"leftToRight",operator:"-"}]},{type:"raw",value:'"><i class="fa-regular fa-swords"></i> 포격 명령</button>\n                                    </th>\n                                </tr>\n                                <tr class="text-middle">\n                                    <th class="text-center">\n                                        아군\n                                    </th>\n                                    <th class="text-center">적군</th>\n                                    '},{type:"raw",value:'\n                                    <th class="text-center">스코어</th>\n                                    <th class="text-center">소요시간</th>\n                                    <th class="text-center">비용</th>\n                                    <th class="text-center">공격효과</th>\n                                </tr>\n                                </thead>\n                                <tbody>\n                                <tr class="text-middle">\n                                    <td class="text-center p0">\n                                        <table class="styled fixed">\n                                            <colgroup>\n                                                <col style="width: 100px"/>\n                                                <col style="width: 100px"/>\n                                            </colgroup>\n                                            <tbody>\n                                            '},{type:"logic",token:{type:"Twig.logic.type.for",keyVar:null,valueVar:"ally",expression:[{type:"Twig.expression.type.variable",value:"peer",match:["peer"]},{type:"Twig.expression.type.key.period",key:"allys"}],output:[{type:"raw",value:'                                                <tr>\n                                                    <td class="text-center p0">\n                                                        <div class="text-small">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"ally",match:["ally"]},{type:"Twig.expression.type.key.period",key:"properties"},{type:"Twig.expression.type.key.period",key:"unit"},{type:"Twig.expression.type.key.period",key:"unitName"}]},{type:"raw",value:'</div>\n                                                        <div class="text-info h7 m0">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"ally",match:["ally"]},{type:"Twig.expression.type.key.period",key:"properties"},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:'</div>\n                                                    </td>\n                                                    <td class="text-center p0" @click="moveToAllyIndirect" @click-data="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"ally",match:["ally"]},{type:"Twig.expression.type.filter",value:"stringify",match:["| stringify","stringify"]}]},{type:"raw",value:'">\n                                                        <img src="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"ctx",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"/icon/by-name/"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"ally",match:["ally"]},{type:"Twig.expression.type.key.period",key:"properties"},{type:"Twig.expression.type.key.period",key:"icon"}]},{type:"raw",value:'" height="48"/>\n                                                    </td>\n                                                </tr>\n                                            '}]}},{type:"raw",value:'                                            </tbody>\n                                        </table>\n                                    </td>\n                                    <td class="text-center text-top">\n                                        '},{type:"logic",token:{type:"Twig.logic.type.for",keyVar:null,valueVar:"target",expression:[{type:"Twig.expression.type.variable",value:"peer",match:["peer"]},{type:"Twig.expression.type.key.period",key:"targets"}],output:[{type:"raw",value:'                                            <img src="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"ctx",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"/icon/by-name/"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"target",match:["target"]},{type:"Twig.expression.type.key.period",key:"properties"},{type:"Twig.expression.type.key.period",key:"icon"}]},{type:"raw",value:'" height="40" @click="moveToTargetIndirect"\n                                                 @click-data="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"target",match:["target"]},{type:"Twig.expression.type.filter",value:"stringify",match:["| stringify","stringify"]}]},{type:"raw",value:'"/>\n                                        '}]}},{type:"raw",value:"                                    </td>\n                                    "},{type:"raw",value:'\n                                    <td class="text-center text-top">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"peer",match:["peer"]},{type:"Twig.expression.type.key.period",key:"scoreValue"}]},{type:"raw",value:'</td>\n                                    <td class="text-center text-top">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"peer",match:["peer"]},{type:"Twig.expression.type.key.period",key:"durationValue"}]},{type:"raw",value:'</td>\n                                    <td class="text-center text-top">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"peer",match:["peer"]},{type:"Twig.expression.type.key.period",key:"cost"}]},{type:"raw",value:'</td>\n                                    <td class="text-left text-top">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"peer",match:["peer"]},{type:"Twig.expression.type.key.period",key:"effect"}]},{type:"raw",value:'</td>\n                                </tr>\n                                </tbody>\n                                <tfoot>\n                                <tr class="text-middle">\n                                    <th class="text-center">간접 사격</th>\n                                    <th class="text-right" colspan="5">\n                                        <button class="button warning" @click="checkIndirectRoute" @click-data="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"-",precidence:6,associativity:"leftToRight",operator:"-"}]},{type:"raw",value:'"><i class="fa-solid fa-route"></i></button>\n                                        <button class="button orange" @click="attackIndirect" @click-data="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index"},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"-",precidence:6,associativity:"leftToRight",operator:"-"}]},{type:"raw",value:'"><i class="fa-regular fa-swords"></i> 포격 명령</button>\n                                    </th>\n                                </tr>\n                                </tfoot>\n                            </table>\n                        </content>\n                        <content class="font-cc">\n                            '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"peer",match:["peer"]},{type:"Twig.expression.type.key.period",key:"explanation"},{type:"Twig.expression.type.filter",value:"newline2br",match:["| newline2br","newline2br"]}]},{type:"raw",value:"\n                        </content>\n                    </contents>\n                </tabs>\n            </content>\n        "}]}},{type:"raw",value:"    </contents>\n</tabs>"}]},66128:function(t,e,n){var r=(0,n(77566).twig)({id:"$resolved:41e7f2c8390cf95455a0ee3d7cf3ac1d80979df3a62ac22c6bf36bc894848596bbdadbefa30f4835c0b7dfb9d4297a70ad1759e9c1fa5794871e217f3d78546e:setting.twig",data:[{type:"raw",value:'<div class="flex-box">\n    <div class="fz-row">\n        <card class="round full bg-transparent">\n            <article class="p0">\n\n                <div class="input-group mb4">\n                    <div class="input">\n                        <label class="skinned-switch on-green-darker off-red">\n                            <input type="checkbox" name="showUnitLabel" value="true" '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"showUnitLabel",match:["showUnitLabel"]},{type:"Twig.expression.type.string",value:'checked="checked"'},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:'/>\n                            <span data-on="부대 레이블 표시" data-off="부대 레이블 숨김"></span>\n                        </label>\n                    </div>\n                </div>\n\n                <div class="input-group mb4">\n                    <div class="input">\n                        <label class="skinned-switch on-green-darker off-red">\n                            <input type="checkbox" name="showWeaponLabel" value="true" '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"showWeaponLabel",match:["showWeaponLabel"]},{type:"Twig.expression.type.string",value:'checked="checked"'},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:'/>\n                            <span data-on="무기 레이블 표시" data-off="무기 레이블 숨김"></span>\n                        </label>\n                    </div>\n                </div>\n\n                <div class="input-group mb4">\n                    <div class="input">\n                        <label class="skinned-switch on-green-darker off-red">\n                            <input type="checkbox" name="showGridLayer" value="true" '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"showGridLayer",match:["showGridLayer"]},{type:"Twig.expression.type.string",value:'checked="checked"'},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:'/>\n                            <span data-on="그리드 표시" data-off="그리드 숨김"></span>\n                        </label>\n                    </div>\n                </div>\n            </article>\n            <footer>\n                <div></div>\n                <div>\n                    <button class="button green-darker" @click="applySetting"><i class="fa-duotone fa-check"></i> 적용</button>\n                </div>\n            </footer>\n        </card>\n    </div>\n</div>'}],allowInlineIncludes:!0,rethrow:!0});t.exports=function(t){return r.render(t)},t.exports.tokens=[{type:"raw",value:'<div class="flex-box">\n    <div class="fz-row">\n        <card class="round full bg-transparent">\n            <article class="p0">\n\n                <div class="input-group mb4">\n                    <div class="input">\n                        <label class="skinned-switch on-green-darker off-red">\n                            <input type="checkbox" name="showUnitLabel" value="true" '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"showUnitLabel",match:["showUnitLabel"]},{type:"Twig.expression.type.string",value:'checked="checked"'},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:'/>\n                            <span data-on="부대 레이블 표시" data-off="부대 레이블 숨김"></span>\n                        </label>\n                    </div>\n                </div>\n\n                <div class="input-group mb4">\n                    <div class="input">\n                        <label class="skinned-switch on-green-darker off-red">\n                            <input type="checkbox" name="showWeaponLabel" value="true" '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"showWeaponLabel",match:["showWeaponLabel"]},{type:"Twig.expression.type.string",value:'checked="checked"'},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:'/>\n                            <span data-on="무기 레이블 표시" data-off="무기 레이블 숨김"></span>\n                        </label>\n                    </div>\n                </div>\n\n                <div class="input-group mb4">\n                    <div class="input">\n                        <label class="skinned-switch on-green-darker off-red">\n                            <input type="checkbox" name="showGridLayer" value="true" '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"showGridLayer",match:["showGridLayer"]},{type:"Twig.expression.type.string",value:'checked="checked"'},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:'/>\n                            <span data-on="그리드 표시" data-off="그리드 숨김"></span>\n                        </label>\n                    </div>\n                </div>\n            </article>\n            <footer>\n                <div></div>\n                <div>\n                    <button class="button green-darker" @click="applySetting"><i class="fa-duotone fa-check"></i> 적용</button>\n                </div>\n            </footer>\n        </card>\n    </div>\n</div>'}]},1448:function(t,e,n){var r=(0,n(77566).twig)({id:"$resolved:78ce548807303448fb1af9c2a81e010fdc9089be0c628f473a93140e05304db8f7d3a361514d75416f4dc2122bc91a0455f4fb585f034f3df404faea9298dd21:styles.twig",data:[{type:"raw",value:'<div class="flex-box">\n    <div class="fz-row">\n        '},{type:"logic",token:{type:"Twig.logic.type.for",keyVar:null,valueVar:"tile",expression:[{type:"Twig.expression.type.variable",value:"tiles",match:["tiles"]}],output:[{type:"raw",value:'            <div class="fi6of12">\n                <div class="fz-card round">\n                    <div class="fz-card-header bg-primary">\n                        <span class="title menu">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"tile",match:["tile"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:'</span>\n                    </div>\n                    <div class="fz-card-body text-center bg-lighter">\n                        <img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"tile",match:["tile"]},{type:"Twig.expression.type.key.period",key:"image"}]},{type:"raw",value:'" style="border-radius: .25rem;">\n                    </div>\n                    <div class="fz-card-footer bg-lighter">\n                        <div></div>\n                        <div class="menu">\n                            <button class="button input primary" @click="selectStyle" @click-data="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"tile",match:["tile"]},{type:"Twig.expression.type.filter",value:"stringify",match:["| stringify","stringify"]}]},{type:"raw",value:'"><i class="fa-sharp fa-regular fa-earth-asia"></i> 선택</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        '}]}},{type:"raw",value:"    </div>\n</div>"}],allowInlineIncludes:!0,rethrow:!0});t.exports=function(t){return r.render(t)},t.exports.tokens=[{type:"raw",value:'<div class="flex-box">\n    <div class="fz-row">\n        '},{type:"logic",token:{type:"Twig.logic.type.for",keyVar:null,valueVar:"tile",expression:[{type:"Twig.expression.type.variable",value:"tiles",match:["tiles"]}],output:[{type:"raw",value:'            <div class="fi6of12">\n                <div class="fz-card round">\n                    <div class="fz-card-header bg-primary">\n                        <span class="title menu">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"tile",match:["tile"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:'</span>\n                    </div>\n                    <div class="fz-card-body text-center bg-lighter">\n                        <img src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"tile",match:["tile"]},{type:"Twig.expression.type.key.period",key:"image"}]},{type:"raw",value:'" style="border-radius: .25rem;">\n                    </div>\n                    <div class="fz-card-footer bg-lighter">\n                        <div></div>\n                        <div class="menu">\n                            <button class="button input primary" @click="selectStyle" @click-data="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"tile",match:["tile"]},{type:"Twig.expression.type.filter",value:"stringify",match:["| stringify","stringify"]}]},{type:"raw",value:'"><i class="fa-sharp fa-regular fa-earth-asia"></i> 선택</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        '}]}},{type:"raw",value:"    </div>\n</div>"}]},13427:function(t,e,n){var r=(0,n(77566).twig)({id:"$resolved:0795de7b222acd3c96c44a3126241ac3b3f36dc5f79dce14e41a5deec0b548ac538c9cac6c66572671d63ce94001673504b32f8a59929b235c92455854803ba6:targets.twig",data:[{type:"raw",value:'<table class="styled fixed hover">\n    <thead>\n    <tr class="text-middle">\n        <th class="text-center" colspan="2">적</th>\n        <th class="text-center">방어력</th>\n    </tr>\n    </thead>\n    <tbody>\n    '},{type:"logic",token:{type:"Twig.logic.type.for",keyVar:null,valueVar:"target",expression:[{type:"Twig.expression.type.variable",value:"targets",match:["targets"]}],output:[{type:"raw",value:'    <tr class="text-middle">\n        <th class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"target",match:["target"]},{type:"Twig.expression.type.key.period",key:"properties"},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:'</th>\n        <td class="text-center"><img src="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"ctx",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"/icon/"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"target",match:["target"]},{type:"Twig.expression.type.key.period",key:"properties"},{type:"Twig.expression.type.key.period",key:"icon"},{type:"Twig.expression.type.key.period",key:"uuid"}]},{type:"raw",value:'" height="48"></td>\n        <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"target",match:["target"]},{type:"Twig.expression.type.key.period",key:"properties"},{type:"Twig.expression.type.key.period",key:"weapon"},{type:"Twig.expression.type.key.period",key:"power"}]},{type:"raw",value:"</td>\n    </tr>\n    "}]}},{type:"raw",value:"    </tbody>\n</table>"}],allowInlineIncludes:!0,rethrow:!0});t.exports=function(t){return r.render(t)},t.exports.tokens=[{type:"raw",value:'<table class="styled fixed hover">\n    <thead>\n    <tr class="text-middle">\n        <th class="text-center" colspan="2">적</th>\n        <th class="text-center">방어력</th>\n    </tr>\n    </thead>\n    <tbody>\n    '},{type:"logic",token:{type:"Twig.logic.type.for",keyVar:null,valueVar:"target",expression:[{type:"Twig.expression.type.variable",value:"targets",match:["targets"]}],output:[{type:"raw",value:'    <tr class="text-middle">\n        <th class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"target",match:["target"]},{type:"Twig.expression.type.key.period",key:"properties"},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:'</th>\n        <td class="text-center"><img src="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"ctx",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"/icon/"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"target",match:["target"]},{type:"Twig.expression.type.key.period",key:"properties"},{type:"Twig.expression.type.key.period",key:"icon"},{type:"Twig.expression.type.key.period",key:"uuid"}]},{type:"raw",value:'" height="48"></td>\n        <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"target",match:["target"]},{type:"Twig.expression.type.key.period",key:"properties"},{type:"Twig.expression.type.key.period",key:"weapon"},{type:"Twig.expression.type.key.period",key:"power"}]},{type:"raw",value:"</td>\n    </tr>\n    "}]}},{type:"raw",value:"    </tbody>\n</table>"}]},35097:function(t,e,n){var r=(0,n(77566).twig)({id:"$resolved:68ee008bf5614850c00717868c92f1c482200c69faebf0698e19ed8224e0d80260ac64d6791b8c74b6fa319798f9d4eb1a765af14ce771927bef579899d248d4:video-images.twig",data:[{type:"raw",value:'<div class="video-images">\n    '},{type:"logic",token:{type:"Twig.logic.type.for",keyVar:null,valueVar:"image",expression:[{type:"Twig.expression.type.variable",value:"videoImages",match:["videoImages"]}],output:[{type:"raw",value:'        <div class="image">\n            <img src="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"ctx",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"/map/image/"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"image",match:["image"]},{type:"Twig.expression.type.key.period",key:"uuid"}]},{type:"raw",value:'" class="preview"/>\n        </div>\n    '}]}},{type:"raw",value:"</div>"}],allowInlineIncludes:!0,rethrow:!0});t.exports=function(t){return r.render(t)},t.exports.tokens=[{type:"raw",value:'<div class="video-images">\n    '},{type:"logic",token:{type:"Twig.logic.type.for",keyVar:null,valueVar:"image",expression:[{type:"Twig.expression.type.variable",value:"videoImages",match:["videoImages"]}],output:[{type:"raw",value:'        <div class="image">\n            <img src="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"ctx",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"/map/image/"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"image",match:["image"]},{type:"Twig.expression.type.key.period",key:"uuid"}]},{type:"raw",value:'" class="preview"/>\n        </div>\n    '}]}},{type:"raw",value:"</div>"}]},90702:function(t,e,n){var r=(0,n(77566).twig)({id:"$resolved:14399cedbbc8aee085b69d4a6e7829aed0ad90d25470aba3bf9d8eb877a50531a3abbbebca33e0c8a17eff5e8aaf9d8f85425cf2ba19f249d61856b21dc5ec51:videos.twig",data:[{type:"logic",token:{type:"Twig.logic.type.for",keyVar:null,valueVar:"video",expression:[{type:"Twig.expression.type.variable",value:"weapons",match:["weapons"]}],output:[{type:"raw",value:'    <div class="video-container">\n        <card class="mb0 '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"weapon",match:["weapon"]},{type:"Twig.expression.type.key.period",key:"unitWeaponNo"},{type:"Twig.expression.type.variable",value:"video",match:["video"]},{type:"Twig.expression.type.key.period",key:"unitWeaponNo"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.string",value:"shadow-blue"},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:'" @click="showImages" @click-data="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"pick",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.variable",value:"video",match:["video"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"unitWeaponNo"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"name"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"weapon"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"videoImages"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"stringify",match:["| stringify","stringify"]}]},{type:"raw",value:'">\n            <header class="round-top '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"weapon",match:["weapon"]},{type:"Twig.expression.type.key.period",key:"unitWeaponNo"},{type:"Twig.expression.type.variable",value:"video",match:["video"]},{type:"Twig.expression.type.key.period",key:"unitWeaponNo"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.string",value:"bg-info"},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:'">\n                <div><i class="fa-solid fa-circle-video mr5 fa-xl video-header" id="video-header-'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"video",match:["video"]},{type:"Twig.expression.type.key.period",key:"unitWeaponNo"}]},{type:"raw",value:'"></i> '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"video",match:["video"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:'</div>\n            </header>\n            <article class="p0 no video-panel">\n                <video id="video-window" autoplay="autoplay" loop="loop" muted="muted">\n                    <source src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"video",match:["video"]},{type:"Twig.expression.type.key.period",key:"videoUrl"}]},{type:"raw",value:'" type="video/mp4">\n                </video>\n            </article>\n        </card>\n    </div>\n'}]}}],allowInlineIncludes:!0,rethrow:!0});t.exports=function(t){return r.render(t)},t.exports.tokens=[{type:"logic",token:{type:"Twig.logic.type.for",keyVar:null,valueVar:"video",expression:[{type:"Twig.expression.type.variable",value:"weapons",match:["weapons"]}],output:[{type:"raw",value:'    <div class="video-container">\n        <card class="mb0 '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"weapon",match:["weapon"]},{type:"Twig.expression.type.key.period",key:"unitWeaponNo"},{type:"Twig.expression.type.variable",value:"video",match:["video"]},{type:"Twig.expression.type.key.period",key:"unitWeaponNo"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.string",value:"shadow-blue"},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:'" @click="showImages" @click-data="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"pick",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.variable",value:"video",match:["video"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"unitWeaponNo"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"name"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"weapon"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"videoImages"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]},{type:"Twig.expression.type.filter",value:"stringify",match:["| stringify","stringify"]}]},{type:"raw",value:'">\n            <header class="round-top '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"weapon",match:["weapon"]},{type:"Twig.expression.type.key.period",key:"unitWeaponNo"},{type:"Twig.expression.type.variable",value:"video",match:["video"]},{type:"Twig.expression.type.key.period",key:"unitWeaponNo"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.string",value:"bg-info"},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:'">\n                <div><i class="fa-solid fa-circle-video mr5 fa-xl video-header" id="video-header-'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"video",match:["video"]},{type:"Twig.expression.type.key.period",key:"unitWeaponNo"}]},{type:"raw",value:'"></i> '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"video",match:["video"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:'</div>\n            </header>\n            <article class="p0 no video-panel">\n                <video id="video-window" autoplay="autoplay" loop="loop" muted="muted">\n                    <source src="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"video",match:["video"]},{type:"Twig.expression.type.key.period",key:"videoUrl"}]},{type:"raw",value:'" type="video/mp4">\n                </video>\n            </article>\n        </card>\n    </div>\n'}]}}]},50438:function(t,e,n){var r=(0,n(77566).twig)({id:"$resolved:c0d0883214e53c5a99e085779afb2c8a942ecbf5478bd755b98af9595fca4e17311de94af8f47fe4339a99f5ac8bb87369b1d77f3925bdb3f2cbe75d62e6c281:weapon-details.twig",data:[{type:"raw",value:'<table class="styled fixed bg-purple mb15">\n    <thead>\n    <tr class="text-middle">\n        <th class="text-center" colspan="3">명칭</th>\n        <th class="text-center">피아 구분</th>\n        <th class="text-center">병과</th>\n        <th class="text-center">방어력</th>\n        <th class="text-center" colspan="2">부대</th>\n        <th class="text-center">상태</th>\n    </tr>\n    </thead>\n    <tbody>\n    <tr class="text-middle">\n        <td class="text-center">\n            <img src="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"ctx",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"/icon/by-name/"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"weapon",match:["weapon"]},{type:"Twig.expression.type.key.period",key:"icon"},{type:"Twig.expression.type.key.period",key:"mapId"}]},{type:"raw",value:'" height="100" @click="flyTo" @click-data="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"unitWeaponNo",match:["unitWeaponNo"]}]},{type:"raw",value:'"/>\n        </td>\n        <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"weapon",match:["weapon"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:'</td>\n        <td class="text-center">['},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"unitWeaponNo",match:["unitWeaponNo"]}]},{type:"raw",value:"] "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"name",match:["name"]}]},{type:"raw",value:'</td>\n        <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"peers",match:["peers"]},{type:"Twig.expression.type.filter",value:"peerType",match:["| peerType","peerType"]}]},{type:"raw",value:'</td>\n        <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"weapon",match:["weapon"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.filter",value:"weaponType",match:["| weaponType","weaponType"]}]},{type:"raw",value:'</td>\n        <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"weapon",match:["weapon"]},{type:"Twig.expression.type.key.period",key:"power"}]},{type:"raw",value:'</td>\n        <td class="text-center">\n            <img src="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"ctx",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"/icon/by-name/"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"unit",match:["unit"]},{type:"Twig.expression.type.key.period",key:"icon"},{type:"Twig.expression.type.key.period",key:"mapId"}]},{type:"raw",value:'" height="50" @click="flyTo" @click-data="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"unitWeaponNo",match:["unitWeaponNo"]}]},{type:"raw",value:'"/>\n        </td>\n        <td class="text-center">['},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"unitNo",match:["unitNo"]}]},{type:"raw",value:"] "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"unit",match:["unit"]},{type:"Twig.expression.type.key.period",key:"unitName"}]},{type:"raw",value:'</td>\n        <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"status",match:["status"]},{type:"Twig.expression.type.filter",value:"unitWeaponStatus",match:["| unitWeaponStatus","unitWeaponStatus"]}]},{type:"raw",value:'</td>\n    </tr>\n    <tr class="text-middle">\n        <td colspan="9">\n            <table class="styled fixed hover bg-blue">\n                <thead>\n                <tr class="text-middle">\n                    <th class="text-center">탄약</th>\n                    <th class="text-center">공격력</th>\n                    <th class="text-center">탄종</th>\n                    <th class="text-center">살상반경</th>\n                    <th class="text-center">사거리</th>\n                    <th class="text-center">탄속</th>\n                    <th class="text-center">관통력</th>\n                    <th class="text-center">공산 오차</th>\n                </tr>\n                </thead>\n                <tbody>\n                '},{type:"logic",token:{type:"Twig.logic.type.for",keyVar:null,valueVar:"ammo",expression:[{type:"Twig.expression.type.variable",value:"weapon",match:["weapon"]},{type:"Twig.expression.type.key.period",key:"ammos"}],output:[{type:"raw",value:'                <tr class="text-middle">\n                    <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"ammo",match:["ammo"]},{type:"Twig.expression.type.key.period",key:"ammo"},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:'</td>\n                    <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"ammo",match:["ammo"]},{type:"Twig.expression.type.key.period",key:"ammo"},{type:"Twig.expression.type.key.period",key:"power"}]},{type:"raw",value:'</td>\n                    <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"ammo",match:["ammo"]},{type:"Twig.expression.type.key.period",key:"ammo"},{type:"Twig.expression.type.key.period",key:"bullet"}]},{type:"raw",value:'</td>\n                    <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"ammo",match:["ammo"]},{type:"Twig.expression.type.key.period",key:"ammo"},{type:"Twig.expression.type.key.period",key:"radius"},{type:"Twig.expression.type.variable",value:"ammo",match:["ammo"]},{type:"Twig.expression.type.key.period",key:"ammo"},{type:"Twig.expression.type.key.period",key:"radius"},{type:"Twig.expression.type.string",value:"?"},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:' m</td>\n                    <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"ammo",match:["ammo"]},{type:"Twig.expression.type.key.period",key:"ammo"},{type:"Twig.expression.type.key.period",key:"range"},{type:"Twig.expression.type.variable",value:"ammo",match:["ammo"]},{type:"Twig.expression.type.key.period",key:"ammo"},{type:"Twig.expression.type.key.period",key:"range"},{type:"Twig.expression.type.string",value:"?"},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:' km</td>\n                    <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"ammo",match:["ammo"]},{type:"Twig.expression.type.key.period",key:"ammo"},{type:"Twig.expression.type.key.period",key:"muzzleVelocity"},{type:"Twig.expression.type.variable",value:"ammo",match:["ammo"]},{type:"Twig.expression.type.key.period",key:"ammo"},{type:"Twig.expression.type.key.period",key:"muzzleVelocity"},{type:"Twig.expression.type.string",value:"?"},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:' m/s</td>\n                    <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"ammo",match:["ammo"]},{type:"Twig.expression.type.key.period",key:"ammo"},{type:"Twig.expression.type.key.period",key:"penetration"},{type:"Twig.expression.type.variable",value:"ammo",match:["ammo"]},{type:"Twig.expression.type.key.period",key:"ammo"},{type:"Twig.expression.type.key.period",key:"penetration"},{type:"Twig.expression.type.string",value:"?"},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:' mm</td>\n                    <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"ammo",match:["ammo"]},{type:"Twig.expression.type.key.period",key:"ammo"},{type:"Twig.expression.type.key.period",key:"cep"},{type:"Twig.expression.type.variable",value:"ammo",match:["ammo"]},{type:"Twig.expression.type.key.period",key:"ammo"},{type:"Twig.expression.type.key.period",key:"cep"},{type:"Twig.expression.type.string",value:"?"},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:" m</td>\n                </tr>\n                "}]}},{type:"raw",value:"                </tbody>\n            </table>\n        </td>\n    </tr>\n    </tbody>\n</table>"}],allowInlineIncludes:!0,rethrow:!0});t.exports=function(t){return r.render(t)},t.exports.tokens=[{type:"raw",value:'<table class="styled fixed bg-purple mb15">\n    <thead>\n    <tr class="text-middle">\n        <th class="text-center" colspan="3">명칭</th>\n        <th class="text-center">피아 구분</th>\n        <th class="text-center">병과</th>\n        <th class="text-center">방어력</th>\n        <th class="text-center" colspan="2">부대</th>\n        <th class="text-center">상태</th>\n    </tr>\n    </thead>\n    <tbody>\n    <tr class="text-middle">\n        <td class="text-center">\n            <img src="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"ctx",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"/icon/by-name/"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"weapon",match:["weapon"]},{type:"Twig.expression.type.key.period",key:"icon"},{type:"Twig.expression.type.key.period",key:"mapId"}]},{type:"raw",value:'" height="100" @click="flyTo" @click-data="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"unitWeaponNo",match:["unitWeaponNo"]}]},{type:"raw",value:'"/>\n        </td>\n        <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"weapon",match:["weapon"]},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:'</td>\n        <td class="text-center">['},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"unitWeaponNo",match:["unitWeaponNo"]}]},{type:"raw",value:"] "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"name",match:["name"]}]},{type:"raw",value:'</td>\n        <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"peers",match:["peers"]},{type:"Twig.expression.type.filter",value:"peerType",match:["| peerType","peerType"]}]},{type:"raw",value:'</td>\n        <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"weapon",match:["weapon"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.filter",value:"weaponType",match:["| weaponType","weaponType"]}]},{type:"raw",value:'</td>\n        <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"weapon",match:["weapon"]},{type:"Twig.expression.type.key.period",key:"power"}]},{type:"raw",value:'</td>\n        <td class="text-center">\n            <img src="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"ctx",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"/icon/by-name/"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"unit",match:["unit"]},{type:"Twig.expression.type.key.period",key:"icon"},{type:"Twig.expression.type.key.period",key:"mapId"}]},{type:"raw",value:'" height="50" @click="flyTo" @click-data="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"unitWeaponNo",match:["unitWeaponNo"]}]},{type:"raw",value:'"/>\n        </td>\n        <td class="text-center">['},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"unitNo",match:["unitNo"]}]},{type:"raw",value:"] "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"unit",match:["unit"]},{type:"Twig.expression.type.key.period",key:"unitName"}]},{type:"raw",value:'</td>\n        <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"status",match:["status"]},{type:"Twig.expression.type.filter",value:"unitWeaponStatus",match:["| unitWeaponStatus","unitWeaponStatus"]}]},{type:"raw",value:'</td>\n    </tr>\n    <tr class="text-middle">\n        <td colspan="9">\n            <table class="styled fixed hover bg-blue">\n                <thead>\n                <tr class="text-middle">\n                    <th class="text-center">탄약</th>\n                    <th class="text-center">공격력</th>\n                    <th class="text-center">탄종</th>\n                    <th class="text-center">살상반경</th>\n                    <th class="text-center">사거리</th>\n                    <th class="text-center">탄속</th>\n                    <th class="text-center">관통력</th>\n                    <th class="text-center">공산 오차</th>\n                </tr>\n                </thead>\n                <tbody>\n                '},{type:"logic",token:{type:"Twig.logic.type.for",keyVar:null,valueVar:"ammo",expression:[{type:"Twig.expression.type.variable",value:"weapon",match:["weapon"]},{type:"Twig.expression.type.key.period",key:"ammos"}],output:[{type:"raw",value:'                <tr class="text-middle">\n                    <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"ammo",match:["ammo"]},{type:"Twig.expression.type.key.period",key:"ammo"},{type:"Twig.expression.type.key.period",key:"name"}]},{type:"raw",value:'</td>\n                    <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"ammo",match:["ammo"]},{type:"Twig.expression.type.key.period",key:"ammo"},{type:"Twig.expression.type.key.period",key:"power"}]},{type:"raw",value:'</td>\n                    <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"ammo",match:["ammo"]},{type:"Twig.expression.type.key.period",key:"ammo"},{type:"Twig.expression.type.key.period",key:"bullet"}]},{type:"raw",value:'</td>\n                    <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"ammo",match:["ammo"]},{type:"Twig.expression.type.key.period",key:"ammo"},{type:"Twig.expression.type.key.period",key:"radius"},{type:"Twig.expression.type.variable",value:"ammo",match:["ammo"]},{type:"Twig.expression.type.key.period",key:"ammo"},{type:"Twig.expression.type.key.period",key:"radius"},{type:"Twig.expression.type.string",value:"?"},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:' m</td>\n                    <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"ammo",match:["ammo"]},{type:"Twig.expression.type.key.period",key:"ammo"},{type:"Twig.expression.type.key.period",key:"range"},{type:"Twig.expression.type.variable",value:"ammo",match:["ammo"]},{type:"Twig.expression.type.key.period",key:"ammo"},{type:"Twig.expression.type.key.period",key:"range"},{type:"Twig.expression.type.string",value:"?"},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:' km</td>\n                    <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"ammo",match:["ammo"]},{type:"Twig.expression.type.key.period",key:"ammo"},{type:"Twig.expression.type.key.period",key:"muzzleVelocity"},{type:"Twig.expression.type.variable",value:"ammo",match:["ammo"]},{type:"Twig.expression.type.key.period",key:"ammo"},{type:"Twig.expression.type.key.period",key:"muzzleVelocity"},{type:"Twig.expression.type.string",value:"?"},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:' m/s</td>\n                    <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"ammo",match:["ammo"]},{type:"Twig.expression.type.key.period",key:"ammo"},{type:"Twig.expression.type.key.period",key:"penetration"},{type:"Twig.expression.type.variable",value:"ammo",match:["ammo"]},{type:"Twig.expression.type.key.period",key:"ammo"},{type:"Twig.expression.type.key.period",key:"penetration"},{type:"Twig.expression.type.string",value:"?"},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:' mm</td>\n                    <td class="text-center">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"ammo",match:["ammo"]},{type:"Twig.expression.type.key.period",key:"ammo"},{type:"Twig.expression.type.key.period",key:"cep"},{type:"Twig.expression.type.variable",value:"ammo",match:["ammo"]},{type:"Twig.expression.type.key.period",key:"ammo"},{type:"Twig.expression.type.key.period",key:"cep"},{type:"Twig.expression.type.string",value:"?"},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:" m</td>\n                </tr>\n                "}]}},{type:"raw",value:"                </tbody>\n            </table>\n        </td>\n    </tr>\n    </tbody>\n</table>"}]},20766:function(t){t.exports=function(t){"use strict";return t.ParseState.prototype.parseAsync=function(t,e){return this.parse(t,e,!0)},t.expression.parseAsync=function(e,n,r){return t.expression.parse.call(this,e,n,r,!0)},t.logic.parseAsync=function(e,n,r){return t.logic.parse.call(this,e,n,r,!0)},t.Template.prototype.renderAsync=function(t,e){return this.render(t,e,!0)},t.async={},t.isPromise=function(t){return t&&t.then&&"function"==typeof t.then},t.async.potentiallyAsync=function(e,n,r){return n?t.Promise.resolve(r.call(e)):function(e,n,r){let i=r.call(e),o=null,s=!0;if(!t.isPromise(i))return i;if(i.then((t=>{i=t,s=!1})).catch((t=>{o=t})),null!==o)throw o;if(s)throw new t.Error("You are using Twig.js in sync mode in combination with async extensions.");return i}(e,0,r)},t.Thenable=function(t,e,n){this.then=t,this._value=n?e:null,this._state=n||0},t.Thenable.prototype.catch=function(t){return 1===this._state?this:this.then(null,t)},t.Thenable.resolvedThen=function(e){try{return t.Promise.resolve(e(this._value))}catch(e){return t.Promise.reject(e)}},t.Thenable.rejectedThen=function(e,n){if(!n||"function"!=typeof n)return this;const r=this._value;let i;try{i=n(r)}catch(e){i=t.Promise.reject(e)}return t.Promise.resolve(i)},t.Promise=function(e){let n=0,r=null,i=function(t,e){n=t,r=e};return function(t,e,n){try{t(e,n)}catch(t){n(t)}}(e,(function(t){i(1,t)}),(function(t){i(2,t)})),1===n?t.Promise.resolve(r):2===n?t.Promise.reject(r):(i=new t.FullPromise,i.promise)},t.FullPromise=function(){let e=null;function n(t){t(s._value)}function r(t,e){e(s._value)}let i=function(t,n){e=function(t,e,n){const r=[e,n,-2];return t?-2===t[2]?t=[t,r]:t.push(r):t=r,t}(e,t,n)};function o(t,o){if(!s._state&&(s._value=o,s._state=t,i=1===t?n:r,e)){if(-2===e[2])return i(e[0],e[1]),void(e=null);e.forEach((t=>{i(t[0],t[1])})),e=null}}const s=new t.Thenable(((e,n)=>{const r="function"==typeof e;if(1===s._state&&!r)return t.Promise.resolve(s._value);if(1===s._state)try{return t.Promise.resolve(e(s._value))}catch(e){return t.Promise.reject(e)}const o="function"==typeof n;return new t.Promise(((t,s)=>{i(r?n=>{try{t(e(n))}catch(t){s(t)}}:t,o?e=>{try{t(n(e))}catch(t){s(t)}}:s)}))}));return o.promise=s,o},t.Promise.defaultResolved=new t.Thenable(t.Thenable.resolvedThen,void 0,1),t.Promise.emptyStringResolved=new t.Thenable(t.Thenable.resolvedThen,"",1),t.Promise.resolve=function(e){return 0===arguments.length||void 0===e?t.Promise.defaultResolved:t.isPromise(e)?e:""===e?t.Promise.emptyStringResolved:new t.Thenable(t.Thenable.resolvedThen,e,1)},t.Promise.reject=function(e){return new t.Thenable(t.Thenable.rejectedThen,e,2)},t.Promise.all=function(e){const n=new Array(e.length);return t.async.forEach(e,((e,r)=>{if(t.isPromise(e)){if(1!==e._state)return e.then((t=>{n[r]=t}));n[r]=e._value}else n[r]=e})).then((()=>n))},t.async.forEach=function(e,n){const r=e?e.length:0;let i=0;return function o(){let s=null;do{if(i===r)return t.Promise.resolve();s=n(e[i],i),i++}while(!s||!t.isPromise(s)||1===s._state);return s.then(o)}()},t}},75919:function(t){t.exports=function(t){return t.compiler={module:{}},t.compiler.compile=function(e,n){const r=JSON.stringify(e.tokens),{id:i}=e;let o=null;if(n.module){if(void 0===t.compiler.module[n.module])throw new t.Error("Unable to find module type "+n.module);o=t.compiler.module[n.module](i,r,n.twig)}else o=t.compiler.wrap(i,r);return o},t.compiler.module={amd:(e,n,r)=>'define(["'+r+'"], function (Twig) {\n\tvar twig, templates;\ntwig = Twig.twig;\ntemplates = '+t.compiler.wrap(e,n)+"\n\treturn templates;\n});",node:(e,n)=>'var twig = require("twig").twig;\nexports.template = '+t.compiler.wrap(e,n),cjs2:(e,n,r)=>'module.declare([{ twig: "'+r+'" }], function (require, exports, module) {\n\tvar twig = require("twig").twig;\n\texports.template = '+t.compiler.wrap(e,n)+"\n});"},t.compiler.wrap=function(t,e){return'twig({id:"'+t.replace('"','\\"')+'", data:'+e+", precompiled: true});\n"},t}},69530:function(t,e,n){var r=n(25108);t.exports=function(t){"use strict";function e(e,n){if(e.template.options.rethrow)throw"string"==typeof n&&(n=new t.Error(n)),"TwigException"!==n.type||n.file||(n.file=e.template.id),n;if(t.log.error("Error parsing twig template "+e.template.id+": "),n.stack?t.log.error(n.stack):t.log.error(n.toString()),t.debug)return n.toString()}return t.trace=!1,t.debug=!1,t.cache=!0,t.noop=function(){},t.merge=function(t,e,n){return Object.keys(e).forEach((r=>{n&&!(r in t)||(t[r]=e[r])})),t},t.Error=function(t,e){this.message=t,this.name="TwigException",this.type="TwigException",this.file=e},t.Error.prototype.toString=function(){return this.name+": "+this.message},t.log={trace(...e){t.trace&&r&&r.log(Array.prototype.slice.call(e))},debug(...e){t.debug&&r&&r.log(Array.prototype.slice.call(e))}},void 0===r?t.log.error=function(){}:void 0!==r.error?t.log.error=function(...t){r.error(...t)}:void 0!==r.log&&(t.log.error=function(...t){r.log(...t)}),t.token={},t.token.type={output:"output",logic:"logic",comment:"comment",raw:"raw",outputWhitespacePre:"output_whitespace_pre",outputWhitespacePost:"output_whitespace_post",outputWhitespaceBoth:"output_whitespace_both",logicWhitespacePre:"logic_whitespace_pre",logicWhitespacePost:"logic_whitespace_post",logicWhitespaceBoth:"logic_whitespace_both"},t.token.definitions=[{type:t.token.type.raw,open:"{% raw %}",close:"{% endraw %}"},{type:t.token.type.raw,open:"{% verbatim %}",close:"{% endverbatim %}"},{type:t.token.type.outputWhitespacePre,open:"{{-",close:"}}"},{type:t.token.type.outputWhitespacePost,open:"{{",close:"-}}"},{type:t.token.type.outputWhitespaceBoth,open:"{{-",close:"-}}"},{type:t.token.type.logicWhitespacePre,open:"{%-",close:"%}"},{type:t.token.type.logicWhitespacePost,open:"{%",close:"-%}"},{type:t.token.type.logicWhitespaceBoth,open:"{%-",close:"-%}"},{type:t.token.type.output,open:"{{",close:"}}"},{type:t.token.type.logic,open:"{%",close:"%}"},{type:t.token.type.comment,open:"{#",close:"#}"}],t.token.strings=['"',"'"],t.token.findStart=function(e){const n={position:null,def:null};let r=null;const i=t.token.definitions.length;let o,s,a,c;for(o=0;o<i;o++)s=t.token.definitions[o],a=e.indexOf(s.open),c=e.indexOf(s.close),t.log.trace("Twig.token.findStart: ","Searching for ",s.open," found at ",a),a>=0&&s.open.length!==s.close.length&&c<0||(a>=0&&(null===n.position||a<n.position)?(n.position=a,n.def=s,r=c):a>=0&&null!==n.position&&a===n.position&&(s.open.length>n.def.open.length?(n.position=a,n.def=s,r=c):s.open.length===n.def.open.length&&(s.close.length,n.def.close.length,c>=0&&c<r&&(n.position=a,n.def=s,r=c))));return n},t.token.findEnd=function(e,n,r){let i,o,s=null,a=!1,c=0,l=null,u=null,h=null,p=null,f=null,d=null;for(;!a;){if(l=null,u=null,h=e.indexOf(n.close,c),!(h>=0))throw new t.Error("Unable to find closing bracket '"+n.close+"' opened near template position "+r);if(s=h,a=!0,n.type===t.token.type.comment)break;if(n.type===t.token.type.raw)break;for(o=t.token.strings.length,i=0;i<o;i+=1)f=e.indexOf(t.token.strings[i],c),f>0&&f<h&&(null===l||f<l)&&(l=f,u=t.token.strings[i]);if(null!==l)for(p=l+1,s=null,a=!1;;){if(d=e.indexOf(u,p),d<0)throw t.Error("Unclosed string in template");if("\\"!==e.slice(d-1,d)){c=d+1;break}p=d+1}}return s},t.tokenize=function(e){const n=[];let r=0,i=null,o=null;for(;e.length>0;)if(i=t.token.findStart(e),t.log.trace("Twig.tokenize: ","Found token: ",i),null===i.position)n.push({type:t.token.type.raw,value:e}),e="";else{if(i.position>0&&n.push({type:t.token.type.raw,value:e.slice(0,Math.max(0,i.position))}),e=e.slice(i.position+i.def.open.length),r+=i.position+i.def.open.length,o=t.token.findEnd(e,i.def,r),t.log.trace("Twig.tokenize: ","Token ends at ",o),n.push({type:i.def.type,value:e.slice(0,Math.max(0,o)).trim()}),"\n"===e.slice(o+i.def.close.length,o+i.def.close.length+1))switch(i.def.type){case"logic_whitespace_pre":case"logic_whitespace_post":case"logic_whitespace_both":case"logic":o+=1}e=e.slice(o+i.def.close.length),r+=o+i.def.close.length}return n},t.compile=function(e){const n=this;try{const r=[],i=[];let o=[],s=null,a=null,c=null,l=null,u=null,h=null,p=null,f=null,d=null,g=null,m=null,y=null;const _=function(e){t.expression.compile.call(n,e),i.length>0?o.push(e):r.push(e)},v=function(e){if(a=t.logic.compile.call(n,e),g=a.type,m=t.logic.handler[g].open,y=t.logic.handler[g].next,t.log.trace("Twig.compile: ","Compiled logic token to ",a," next is: ",y," open is : ",m),void 0!==m&&!m){if(l=i.pop(),p=t.logic.handler[l.type],!p.next.includes(g))throw new Error(g+" not expected after a "+l.type);l.output=l.output||[],l.output=l.output.concat(o),o=[],d={type:t.token.type.logic,token:l},i.length>0?o.push(d):r.push(d)}void 0!==y&&y.length>0?(t.log.trace("Twig.compile: ","Pushing ",a," to logic stack."),i.length>0&&(l=i.pop(),l.output=l.output||[],l.output=l.output.concat(o),i.push(l),o=[]),i.push(a)):void 0!==m&&m&&(d={type:t.token.type.logic,token:a},i.length>0?o.push(d):r.push(d))};for(;e.length>0;){switch(s=e.shift(),u=r[r.length-1],h=o[o.length-1],f=e[0],t.log.trace("Compiling token ",s),s.type){case t.token.type.raw:i.length>0?o.push(s):r.push(s);break;case t.token.type.logic:v.call(n,s);break;case t.token.type.comment:break;case t.token.type.output:_.call(n,s);break;case t.token.type.logicWhitespacePre:case t.token.type.logicWhitespacePost:case t.token.type.logicWhitespaceBoth:case t.token.type.outputWhitespacePre:case t.token.type.outputWhitespacePost:case t.token.type.outputWhitespaceBoth:switch(s.type!==t.token.type.outputWhitespacePost&&s.type!==t.token.type.logicWhitespacePost&&(u&&u.type===t.token.type.raw&&(r.pop(),u.value=u.value.trimEnd(),r.push(u)),h&&h.type===t.token.type.raw&&(o.pop(),h.value=h.value.trimEnd(),o.push(h))),s.type){case t.token.type.outputWhitespacePre:case t.token.type.outputWhitespacePost:case t.token.type.outputWhitespaceBoth:_.call(n,s);break;case t.token.type.logicWhitespacePre:case t.token.type.logicWhitespacePost:case t.token.type.logicWhitespaceBoth:v.call(n,s)}s.type!==t.token.type.outputWhitespacePre&&s.type!==t.token.type.logicWhitespacePre&&f&&f.type===t.token.type.raw&&(e.shift(),f.value=f.value.trimStart(),e.unshift(f))}t.log.trace("Twig.compile: "," Output: ",r," Logic Stack: ",i," Pending Output: ",o)}if(i.length>0)throw c=i.pop(),new Error("Unable to find an end tag for "+c.type+", expecting one of "+c.next);return r}catch(e){if(n.options.rethrow)throw"TwigException"!==e.type||e.file||(e.file=n.id),e;t.log.error("Error compiling twig template "+n.id+": "),e.stack?t.log.error(e.stack):t.log.error(e.toString())}},t.prepare=function(e){t.log.debug("Twig.prepare: ","Tokenizing ",e);const n=t.tokenize.call(this,e);t.log.debug("Twig.prepare: ","Compiling ",n);const r=t.compile.call(this,n);return t.log.debug("Twig.prepare: ","Compiled ",r),r},t.output=function(e){const{autoescape:n}=this.options;if(!n)return e.join("");const r="string"==typeof n?n:"html",i=e.map((e=>(!e||!0===e.twigMarkup||e.twigMarkup===r||"html"===r&&"html_attr"===e.twigMarkup||(e=t.filters.escape(e,[r])),e)));if(0===i.length)return"";const o=i.join("");return 0===o.length?"":new t.Markup(o,!0)},t.Templates={loaders:{},parsers:{},registry:{}},t.validateId=function(e){if("prototype"===e)throw new t.Error(e+" is not a valid twig identifier");if(t.cache&&Object.hasOwnProperty.call(t.Templates.registry,e))throw new t.Error("There is already a template with the ID "+e);return!0},t.Templates.registerLoader=function(e,n,r){if("function"!=typeof n)throw new t.Error("Unable to add loader for "+e+": Invalid function reference given.");r&&(n=n.bind(r)),this.loaders[e]=n},t.Templates.unRegisterLoader=function(t){this.isRegisteredLoader(t)&&delete this.loaders[t]},t.Templates.isRegisteredLoader=function(t){return Object.hasOwnProperty.call(this.loaders,t)},t.Templates.registerParser=function(e,n,r){if("function"!=typeof n)throw new t.Error("Unable to add parser for "+e+": Invalid function regerence given.");r&&(n=n.bind(r)),this.parsers[e]=n},t.Templates.unRegisterParser=function(t){this.isRegisteredParser(t)&&delete this.parsers[t]},t.Templates.isRegisteredParser=function(t){return Object.hasOwnProperty.call(this.parsers,t)},t.Templates.save=function(e){if(void 0===e.id)throw new t.Error("Unable to save template with no id");t.Templates.registry[e.id]=e},t.Templates.load=function(e){return Object.hasOwnProperty.call(t.Templates.registry,e)?t.Templates.registry[e]:null},t.Templates.loadRemote=function(e,n,r,i){const o=void 0===n.id?e:n.id,s=t.Templates.registry[o];if(t.cache&&void 0!==s)return"function"==typeof r&&r(s),s;n.parser=n.parser||"twig",n.id=o,void 0===n.async&&(n.async=!0);return(this.loaders[n.method]||this.loaders.fs).call(this,e,n,r,i)},t.Block=function(t,e){this.template=t,this.token=e},t.Block.prototype.render=function(e,n){const r=e.template;let i;return e.template=this.template,i=this.token.expression?t.expression.parseAsync.call(e,this.token.output,n):e.parseAsync(this.token.output,n),i.then((r=>t.expression.parseAsync.call(e,{type:t.expression.type.string,value:r},n))).then((t=>(e.template=r,t)))},t.ParseState=function(t,e,n){this.renderedBlocks={},this.overrideBlocks=void 0===e?{}:e,this.context=void 0===n?{}:n,this.macros={},this.nestingStack=[],this.template=t},t.ParseState.prototype.getBlock=function(t,e){let n;return!0!==e&&(n=this.overrideBlocks[t]),void 0===n&&(n=this.template.getBlock(t,e)),void 0===n&&null!==this.template.parentTemplate&&(n=this.template.parentTemplate.getBlock(t)),n},t.ParseState.prototype.getBlocks=function(t){let e={};return!1!==t&&null!==this.template.parentTemplate&&this.template.parentTemplate!==this.template&&(e=this.template.parentTemplate.getBlocks()),e={...e,...this.template.getBlocks(),...this.overrideBlocks},e},t.ParseState.prototype.getNestingStackToken=function(t){let e;return this.nestingStack.forEach((n=>{void 0===e&&n.type===t&&(e=n)})),e},t.ParseState.prototype.parse=function(n,r,i){const o=this;let s=[],a=null,c=!0,l=null,u=!0;function h(t){s.push(t)}function p(t){void 0!==t.chain&&(u=t.chain),void 0!==t.context&&(o.context=t.context),void 0!==t.output&&s.push(t.output)}if(r&&(o.context=r),l=t.async.forEach(n,(e=>{switch(t.log.debug("Twig.ParseState.parse: ","Parsing token: ",e),e.type){case t.token.type.raw:s.push(t.filters.raw(e.value));break;case t.token.type.logic:return t.logic.parseAsync.call(o,e.token,o.context,u).then(p);case t.token.type.comment:break;case t.token.type.outputWhitespacePre:case t.token.type.outputWhitespacePost:case t.token.type.outputWhitespaceBoth:case t.token.type.output:return t.log.debug("Twig.ParseState.parse: ","Output token: ",e.stack),t.expression.parseAsync.call(o,e.stack,o.context).then(h)}})).then((()=>(s=t.output.call(o.template,s),c=!1,s))).catch((t=>{i&&e(o,t),a=t})),i)return l;if(null!==a)return e(o,a);if(c)throw new t.Error("You are using Twig.js in sync mode in combination with async extensions.");return s},t.Template=function(e){const{data:n,id:r,base:i,path:o,url:s,name:a,method:c,options:l}=e;this.base=i,this.blocks={defined:{},imported:{}},this.id=r,this.method=c,this.name=a,this.options=l,this.parentTemplate=null,this.path=o,this.url=s,!function(t,e){const n=Object.prototype.toString.call(e).slice(8,-1);return null!=e&&n===t}("String",n)?this.tokens=n:this.tokens=t.prepare.call(this,n),void 0!==r&&t.Templates.save(this)},t.Template.prototype.getBlock=function(t,e,n=!0){let r;return!0!==e&&(r=this.blocks.defined[t]),n&&void 0===r&&(r=this.blocks.imported[t]),void 0===r&&null!==this.parentTemplate&&(r=this.parentTemplate.getBlock(t,e,n=!1)),r},t.Template.prototype.getBlocks=function(){let t={};return t={...t,...this.blocks.imported,...this.blocks.defined},t},t.Template.prototype.render=function(e,n,r){const i=this;return n=n||{},t.async.potentiallyAsync(i,r,(()=>{const r=new t.ParseState(i,n.blocks,e);return r.parseAsync(i.tokens).then((e=>{let o,s;return null!==i.parentTemplate?(i.options.allowInlineIncludes&&(o=t.Templates.load(i.parentTemplate),o&&(o.options=i.options)),o||(s=t.path.parsePath(i,i.parentTemplate),o=t.Templates.loadRemote(s,{method:i.getLoaderMethod(),base:i.base,async:!1,id:s,options:i.options})),i.parentTemplate=o,i.parentTemplate.renderAsync(r.context,{blocks:r.getBlocks(!1),isInclude:!0})):!0===n.isInclude?e:e.valueOf()}))}))},t.Template.prototype.importFile=function(e){let n,r=null;if(!this.url&&this.options.allowInlineIncludes){if(e=this.path?t.path.parsePath(this,e):e,n=t.Templates.load(e),!n&&(n=t.Templates.loadRemote(r,{id:e,method:this.getLoaderMethod(),async:!1,path:e,options:this.options}),!n))throw new t.Error("Unable to find the template "+e);return n.options=this.options,n}return r=t.path.parsePath(this,e),n=t.Templates.loadRemote(r,{method:this.getLoaderMethod(),base:this.base,async:!1,options:this.options,id:r}),n},t.Template.prototype.getLoaderMethod=function(){return this.path?"fs":this.url?"ajax":this.method||"fs"},t.Template.prototype.compile=function(e){return t.compiler.compile(this,e)},t.Markup=function(t,e){if("string"!=typeof t)return t;const n=new String(t);return n.twigMarkup=void 0===e||e,n},t}},36921:function(t){t.exports=function(t){"use strict";return t.exports={VERSION:t.VERSION},t.exports.twig=function(e){const{id:n}=e,r={strictVariables:e.strict_variables||!1,autoescape:null!==e.autoescape&&e.autoescape||!1,allowInlineIncludes:e.allowInlineIncludes||!1,rethrow:e.rethrow||!1,namespaces:e.namespaces};if(t.cache&&n&&t.validateId(n),void 0!==e.debug&&(t.debug=e.debug),void 0!==e.trace&&(t.trace=e.trace),void 0!==e.data)return t.Templates.parsers.twig({data:e.data,path:Object.hasOwnProperty.call(e,"path")?e.path:void 0,module:e.module,id:n,options:r});if(void 0!==e.ref){if(void 0!==e.id)throw new t.Error("Both ref and id cannot be set on a twig.js template.");return t.Templates.load(e.ref)}if(void 0!==e.method){if(!t.Templates.isRegisteredLoader(e.method))throw new t.Error('Loader for "'+e.method+'" is not defined.');return t.Templates.loadRemote(e.name||e.href||e.path||n||void 0,{id:n,method:e.method,parser:e.parser||"twig",base:e.base,module:e.module,precompiled:e.precompiled,async:e.async,options:r},e.load,e.error)}return void 0!==e.href?t.Templates.loadRemote(e.href,{id:n,method:"ajax",parser:e.parser||"twig",base:e.base,module:e.module,precompiled:e.precompiled,async:e.async,options:r},e.load,e.error):void 0!==e.path?t.Templates.loadRemote(e.path,{id:n,method:"fs",parser:e.parser||"twig",base:e.base,module:e.module,precompiled:e.precompiled,async:e.async,options:r},e.load,e.error):void 0},t.exports.extendFilter=function(e,n){t.filter.extend(e,n)},t.exports.extendFunction=function(e,n){t._function.extend(e,n)},t.exports.extendTest=function(e,n){t.test.extend(e,n)},t.exports.extendTag=function(e){t.logic.extend(e)},t.exports.extend=function(e){e(t)},t.exports.compile=function(e,n){const r=n.filename,i=n.filename,o=new t.Template({data:e,path:i,id:r,options:n.settings["twig options"]});return function(t){return o.render(t)}},t.exports.renderFile=function(e,n,r){"function"==typeof n&&(r=n,n={});const i=(n=n||{}).settings||{},o=i["twig options"],s={path:e,base:i.views,load(t){o&&o.allowAsync?t.renderAsync(n).then((t=>r(null,t)),r):r(null,String(t.render(n)))},error(t){r(t)}};if(o)for(const t in o)Object.hasOwnProperty.call(o,t)&&(s[t]=o[t]);t.exports.twig(s)},t.exports.__express=t.exports.renderFile,t.exports.cache=function(e){t.cache=e},t.exports.path=t.path,t.exports.filters=t.filters,t.exports.tests=t.tests,t.exports.functions=t.functions,t.exports.Promise=t.Promise,t}},21794:function(t,e,n){t.exports=function(t){"use strict";function e(e,n,r){return n?t.expression.parseAsync.call(e,n,r):t.Promise.resolve(!1)}for(t.expression={},n(11815)(t),t.expression.reservedWords=["true","false","null","TRUE","FALSE","NULL","_context","and","b-and","or","b-or","b-xor","in","not in","if","matches","starts","ends","with"],t.expression.type={comma:"Twig.expression.type.comma",operator:{unary:"Twig.expression.type.operator.unary",binary:"Twig.expression.type.operator.binary"},string:"Twig.expression.type.string",bool:"Twig.expression.type.bool",slice:"Twig.expression.type.slice",array:{start:"Twig.expression.type.array.start",end:"Twig.expression.type.array.end"},object:{start:"Twig.expression.type.object.start",end:"Twig.expression.type.object.end"},parameter:{start:"Twig.expression.type.parameter.start",end:"Twig.expression.type.parameter.end"},subexpression:{start:"Twig.expression.type.subexpression.start",end:"Twig.expression.type.subexpression.end"},key:{period:"Twig.expression.type.key.period",brackets:"Twig.expression.type.key.brackets"},filter:"Twig.expression.type.filter",_function:"Twig.expression.type._function",variable:"Twig.expression.type.variable",number:"Twig.expression.type.number",_null:"Twig.expression.type.null",context:"Twig.expression.type.context",test:"Twig.expression.type.test"},t.expression.set={operations:[t.expression.type.filter,t.expression.type.operator.unary,t.expression.type.operator.binary,t.expression.type.array.end,t.expression.type.object.end,t.expression.type.parameter.end,t.expression.type.subexpression.end,t.expression.type.comma,t.expression.type.test],expressions:[t.expression.type._function,t.expression.type.bool,t.expression.type.string,t.expression.type.variable,t.expression.type.number,t.expression.type._null,t.expression.type.context,t.expression.type.parameter.start,t.expression.type.array.start,t.expression.type.object.start,t.expression.type.subexpression.start,t.expression.type.operator.unary]},t.expression.set.operationsExtended=t.expression.set.operations.concat([t.expression.type.key.period,t.expression.type.key.brackets,t.expression.type.slice]),t.expression.fn={compile:{push(t,e,n){n.push(t)},pushBoth(t,e,n){n.push(t),e.push(t)}},parse:{push(t,e){e.push(t)},pushValue(t,e){e.push(t.value)}}},t.expression.definitions=[{type:t.expression.type.test,regex:/^is\s+(not)?\s*([a-zA-Z_]\w*(\s?(?:as|by))?)/,next:t.expression.set.operations.concat([t.expression.type.parameter.start]),compile(t,e,n){t.filter=t.match[2],t.modifier=t.match[1],delete t.match,delete t.value,n.push(t)},parse(n,r,i){const o=r.pop();return e(this,n.params,i).then((e=>{const i=t.test(n.filter,o,e);"not"===n.modifier?r.push(!i):r.push(i)}))}},{type:t.expression.type.comma,regex:/^,/,next:t.expression.set.expressions.concat([t.expression.type.array.end,t.expression.type.object.end]),compile(e,n,r){let i,o=n.length-1;for(delete e.match,delete e.value;o>=0;o--){if(i=n.pop(),i.type===t.expression.type.object.start||i.type===t.expression.type.parameter.start||i.type===t.expression.type.array.start){n.push(i);break}r.push(i)}r.push(e)}},{type:t.expression.type.number,regex:/^-?\d+(\.\d+)?/,next:t.expression.set.operations,compile(t,e,n){t.value=Number(t.value),n.push(t)},parse:t.expression.fn.parse.pushValue},{type:t.expression.type.operator.binary,regex:/(^\?\?|^\?:|^(b-and)|^(b-or)|^(b-xor)|^[+\-~%?]|^[:](?!\d\])|^[!=]==?|^[!<>]=?|^\*\*?|^\/\/?|^(and)[(|\s+]|^(or)[(|\s+]|^(in)[(|\s+]|^(not in)[(|\s+]|^(matches)|^(starts with)|^(ends with)|^\.\.)/,next:t.expression.set.expressions,transform(t,e){switch(t[0]){case"and(":case"or(":case"in(":case"not in(":return e[e.length-1].value=t[2],t[0];default:return""}},compile(e,n,r){delete e.match,e.value=e.value.trim();const{value:i}=e,o=t.expression.operator.lookup(i,e);for(t.log.trace("Twig.expression.compile: ","Operator: ",o," from ",i);n.length>0&&(n[n.length-1].type===t.expression.type.operator.unary||n[n.length-1].type===t.expression.type.operator.binary)&&(o.associativity===t.expression.operator.leftToRight&&o.precidence>=n[n.length-1].precidence||o.associativity===t.expression.operator.rightToLeft&&o.precidence>n[n.length-1].precidence);){const t=n.pop();r.push(t)}if(":"===i)if(n[n.length-1]&&"?"===n[n.length-1].value);else{const n=r.pop();if(n.type===t.expression.type.string||n.type===t.expression.type.variable)e.key=n.value;else if(n.type===t.expression.type.number)e.key=n.value.toString();else{if(!n.expression||n.type!==t.expression.type.parameter.end&&n.type!==t.expression.type.subexpression.end)throw new t.Error("Unexpected value before ':' of "+n.type+" = "+n.value);e.params=n.params}r.push(e)}else n.push(o)},parse(e,n,r){const i=this;if(e.key)n.push(e);else{if(e.params)return t.expression.parseAsync.call(i,e.params,r).then((t=>{e.key=t,n.push(e),r.loop||delete e.params}));t.expression.operator.parse(e.value,n)}}},{type:t.expression.type.operator.unary,regex:/(^not\s+)/,next:t.expression.set.expressions,compile(e,n,r){delete e.match,e.value=e.value.trim();const{value:i}=e,o=t.expression.operator.lookup(i,e);for(t.log.trace("Twig.expression.compile: ","Operator: ",o," from ",i);n.length>0&&(n[n.length-1].type===t.expression.type.operator.unary||n[n.length-1].type===t.expression.type.operator.binary)&&(o.associativity===t.expression.operator.leftToRight&&o.precidence>=n[n.length-1].precidence||o.associativity===t.expression.operator.rightToLeft&&o.precidence>n[n.length-1].precidence);){const t=n.pop();r.push(t)}n.push(o)},parse(e,n){t.expression.operator.parse(e.value,n)}},{type:t.expression.type.string,regex:/^(["'])(?:(?=(\\?))\2[\s\S])*?\1/,next:t.expression.set.operationsExtended,compile(e,n,r){let{value:i}=e;delete e.match,i='"'===i.slice(0,1)?i.replace('\\"','"'):i.replace("\\'","'"),e.value=i.slice(1,-1).replace(/\\n/g,"\n").replace(/\\r/g,"\r"),t.log.trace("Twig.expression.compile: ","String value: ",e.value),r.push(e)},parse:t.expression.fn.parse.pushValue},{type:t.expression.type.subexpression.start,regex:/^\(/,next:t.expression.set.expressions.concat([t.expression.type.subexpression.end]),compile(t,e,n){t.value="(",n.push(t),e.push(t)},parse:t.expression.fn.parse.push},{type:t.expression.type.subexpression.end,regex:/^\)/,next:t.expression.set.operationsExtended,validate(e,n){let r=n.length-1,i=!1,o=!1,s=0;for(;!i&&r>=0;){const e=n[r];i=e.type===t.expression.type.subexpression.start,i&&o&&(o=!1,i=!1),e.type===t.expression.type.parameter.start?s++:e.type===t.expression.type.parameter.end?s--:e.type===t.expression.type.subexpression.end&&(o=!0),r--}return i&&0===s},compile(e,n,r){let i;const o=e;for(i=n.pop();n.length>0&&i.type!==t.expression.type.subexpression.start;)r.push(i),i=n.pop();const s=[];for(;e.type!==t.expression.type.subexpression.start;)s.unshift(e),e=r.pop();s.unshift(e),i=n[n.length-1],void 0===i||i.type!==t.expression.type._function&&i.type!==t.expression.type.filter&&i.type!==t.expression.type.test&&i.type!==t.expression.type.key.brackets?(o.expression=!0,s.pop(),s.shift(),o.params=s,r.push(o)):(o.expression=!1,i.params=s)},parse(e,n,r){const i=this;if(e.expression)return t.expression.parseAsync.call(i,e.params,r).then((t=>{n.push(t)}));throw new t.Error("Unexpected subexpression end when token is not marked as an expression")}},{type:t.expression.type.parameter.start,regex:/^\(/,next:t.expression.set.expressions.concat([t.expression.type.parameter.end]),validate(e,n){const r=n[n.length-1];return r&&!t.expression.reservedWords.includes(r.value.trim())},compile:t.expression.fn.compile.pushBoth,parse:t.expression.fn.parse.push},{type:t.expression.type.parameter.end,regex:/^\)/,next:t.expression.set.operationsExtended,compile(e,n,r){let i;const o=e;for(i=n.pop();n.length>0&&i.type!==t.expression.type.parameter.start;)r.push(i),i=n.pop();const s=[];for(;e.type!==t.expression.type.parameter.start;)s.unshift(e),e=r.pop();s.unshift(e),void 0===(e=r[r.length-1])||e.type!==t.expression.type._function&&e.type!==t.expression.type.filter&&e.type!==t.expression.type.test&&e.type!==t.expression.type.key.brackets?(o.expression=!0,s.pop(),s.shift(),o.params=s,r.push(o)):(o.expression=!1,e.params=s)},parse(e,n,r){const i=[];let o=!1,s=null;const a=this;if(e.expression)return t.expression.parseAsync.call(a,e.params,r).then((t=>{n.push(t)}));for(;n.length>0;){if(s=n.pop(),s&&s.type&&s.type===t.expression.type.parameter.start){o=!0;break}i.unshift(s)}if(!o)throw new t.Error("Expected end of parameter set.");n.push(i)}},{type:t.expression.type.slice,regex:/^\[(\d*:\d*)\]/,next:t.expression.set.operationsExtended,compile(t,e,n){const r=t.match[1].split(":"),i=r[0]?parseInt(r[0],10):void 0,o=r[1]?parseInt(r[1],10):void 0;t.value="slice",t.params=[i,o],o||(t.params=[i]),n.push(t)},parse(e,n){const r=n.pop(),{params:i}=e;n.push(t.filter.call(this,e.value,r,i))}},{type:t.expression.type.array.start,regex:/^\[/,next:t.expression.set.expressions.concat([t.expression.type.array.end]),compile:t.expression.fn.compile.pushBoth,parse:t.expression.fn.parse.push},{type:t.expression.type.array.end,regex:/^\]/,next:t.expression.set.operationsExtended,compile(e,n,r){let i,o=n.length-1;for(;o>=0&&(i=n.pop(),i.type!==t.expression.type.array.start);o--)r.push(i);r.push(e)},parse(e,n){const r=[];let i=!1,o=null;for(;n.length>0;){if(o=n.pop(),o&&o.type&&o.type===t.expression.type.array.start){i=!0;break}r.unshift(o)}if(!i)throw new t.Error("Expected end of array.");n.push(r)}},{type:t.expression.type.object.start,regex:/^\{/,next:t.expression.set.expressions.concat([t.expression.type.object.end]),compile:t.expression.fn.compile.pushBoth,parse:t.expression.fn.parse.push},{type:t.expression.type.object.end,regex:/^\}/,next:t.expression.set.operationsExtended,compile(e,n,r){let i,o=n.length-1;for(;o>=0&&(i=n.pop(),!i||i.type!==t.expression.type.object.start);o--)r.push(i);r.push(e)},parse(e,n){const r={};let i=!1,o=null,s=!1,a=null;for(;n.length>0;){if(o=n.pop(),o&&o.type&&o.type===t.expression.type.object.start){i=!0;break}if(o&&o.type&&(o.type===t.expression.type.operator.binary||o.type===t.expression.type.operator.unary)&&o.key){if(!s)throw new t.Error("Missing value for key '"+o.key+"' in object definition.");r[o.key]=a,void 0===r._keys&&(r._keys=[]),r._keys.unshift(o.key),a=null,s=!1}else s=!0,a=o}if(!i)throw new t.Error("Unexpected end of object.");n.push(r)}},{type:t.expression.type.filter,regex:/^\|\s?([a-zA-Z_][a-zA-Z0-9_-]*)/,next:t.expression.set.operationsExtended.concat([t.expression.type.parameter.start]),compile(t,e,n){t.value=t.match[1],n.push(t)},parse(n,r,i){const o=r.pop(),s=this;return e(s,n.params,i).then((e=>t.filter.call(s,n.value,o,e))).then((t=>{r.push(t)}))}},{type:t.expression.type._function,regex:/^([a-zA-Z_]\w*)\s*\(/,next:t.expression.type.parameter.start,validate:e=>e[1]&&!t.expression.reservedWords.includes(e[1]),transform:()=>"(",compile(t,e,n){const r=t.match[1];t.fn=r,delete t.match,delete t.value,n.push(t)},parse(n,r,i){const o=this,{fn:s}=n;let a;return e(o,n.params,i).then((e=>{if(t.functions[s])a=t.functions[s].apply(o,e);else{if("function"!=typeof i[s])throw new t.Error(s+" function does not exist and is not defined in the context");a=i[s](...e)}return a})).then((t=>{r.push(t)}))}},{type:t.expression.type.variable,regex:/^[a-zA-Z_]\w*/,next:t.expression.set.operationsExtended.concat([t.expression.type.parameter.start]),compile:t.expression.fn.compile.push,validate:e=>!t.expression.reservedWords.includes(e[0]),parse(e,n,r){const i=this;return t.expression.resolveAsync.call(i,r[e.value],r).then((r=>{if(i.template.options.strictVariables&&void 0===r)throw new t.Error('Variable "'+e.value+'" does not exist.');n.push(r)}))}},{type:t.expression.type.key.period,regex:/^\.(\w+)/,next:t.expression.set.operationsExtended.concat([t.expression.type.parameter.start]),compile(t,e,n){t.key=t.match[1],delete t.match,delete t.value,n.push(t)},parse(n,r,i,o){const s=this,{key:a}=n,c=r.pop();let l;if(c&&!Object.prototype.hasOwnProperty.call(c,a)&&s.template.options.strictVariables){throw Object.keys(c).length>0?new t.Error('Key "'+a+'" for object with keys "'+Object.keys(c).join(", ")+'" does not exist.'):new t.Error('Key "'+a+'" does not exist as the object is empty.')}return e(s,n.params,i).then((e=>{if(null==c)l=void 0;else{const t=function(t){return t.slice(0,1).toUpperCase()+t.slice(1)};l="object"==typeof c&&a in c?c[a]:c["get"+t(a)]?c["get"+t(a)]:c["is"+t(a)]?c["is"+t(a)]:void 0}return t.expression.resolveAsync.call(s,l,i,e,o,c)})).then((t=>{r.push(t)}))}},{type:t.expression.type.key.brackets,regex:/^\[([^\]:]*)\]/,next:t.expression.set.operationsExtended.concat([t.expression.type.parameter.start]),compile(e,n,r){const i=e.match[1];delete e.value,delete e.match,e.stack=t.expression.compile({value:i}).stack,r.push(e)},parse(n,r,i,o){const s=this;let a,c,l=null;return e(s,n.params,i).then((e=>(l=e,t.expression.parseAsync.call(s,n.stack,i)))).then((e=>{if(a=r.pop(),a&&!Object.prototype.hasOwnProperty.call(a,e)&&s.template.options.strictVariables){const n=Object.keys(a);throw n.length>0?new t.Error('Key "'+e+'" for array with keys "'+n.join(", ")+'" does not exist.'):new t.Error('Key "'+e+'" does not exist as the array is empty.')}return null==a?null:(c="object"==typeof a&&e in a?a[e]:null,t.expression.resolveAsync.call(s,c,a,l,o))})).then((t=>{r.push(t)}))}},{type:t.expression.type._null,regex:/^(null|NULL|none|NONE)/,next:t.expression.set.operations,compile(t,e,n){delete t.match,t.value=null,n.push(t)},parse:t.expression.fn.parse.pushValue},{type:t.expression.type.context,regex:/^_context/,next:t.expression.set.operationsExtended.concat([t.expression.type.parameter.start]),compile:t.expression.fn.compile.push,parse(t,e,n){e.push(n)}},{type:t.expression.type.bool,regex:/^(true|TRUE|false|FALSE)/,next:t.expression.set.operations,compile(t,e,n){t.value="true"===t.match[0].toLowerCase(),delete t.match,n.push(t)},parse:t.expression.fn.parse.pushValue}],t.expression.resolveAsync=function(e,n,r,i,o){const s=this;if("function"!=typeof e)return t.Promise.resolve(e);let a=t.Promise.resolve(r);if(i&&i.type===t.expression.type.parameter.end){const e=!0;a=a.then((()=>i.params&&t.expression.parseAsync.call(s,i.params,n,e))).then((t=>(i.cleanup=!0,t)))}return a.then((t=>e.apply(o||n,t||[])))},t.expression.resolve=function(e,n,r,i,o){return t.async.potentiallyAsync(this,!1,(function(){return t.expression.resolveAsync.call(this,e,n,r,i,o)}))},t.expression.handler={},t.expression.extendType=function(e){t.expression.type[e]="Twig.expression.type."+e},t.expression.extend=function(e){if(!e.type)throw new t.Error("Unable to extend logic definition. No type provided for "+e);t.expression.handler[e.type]=e};t.expression.definitions.length>0;)t.expression.extend(t.expression.definitions.shift());return t.expression.tokenize=function(e){const n=[];let r,i,o,s,a,c=0,l=null,u=[];const h=function(...e){let i=arguments.length-2;const o=new Array(i);for(;i-- >0;)o[i]=e[i];if(t.log.trace("Twig.expression.tokenize","Matched a ",r," regular expression of ",o),l&&!l.includes(r))return u.push(r+" cannot follow a "+n[n.length-1].type+" at template:"+c+" near '"+o[0].slice(0,20)+"...'"),o[0];const h=t.expression.handler[r];return h.validate&&!h.validate(o,n)?o[0]:(u=[],n.push({type:r,value:o[0],match:o}),a=!0,l=s,c+=o[0].length,h.transform?h.transform(o,n):"")};for(t.log.debug("Twig.expression.tokenize","Tokenizing expression ",e);e.length>0;){for(r in e=e.trim(),t.expression.handler)if(Object.hasOwnProperty.call(t.expression.handler,r)){if(s=t.expression.handler[r].next,i=t.expression.handler[r].regex,t.log.trace("Checking type ",r," on ",e),a=!1,Array.isArray(i))for(o=i.length;o-- >0;)e=e.replace(i[o],h);else e=e.replace(i,h);if(a)break}if(!a)throw u.length>0?new t.Error(u.join(" OR ")):new t.Error("Unable to parse '"+e+"' at template position"+c)}return t.log.trace("Twig.expression.tokenize","Tokenized to ",n),n},t.expression.compile=function(e){const n=e.value,r=t.expression.tokenize(n);let i=null;const o=[],s=[];let a=null;for(t.log.trace("Twig.expression.compile: ","Compiling ",n);r.length>0;)i=r.shift(),a=t.expression.handler[i.type],t.log.trace("Twig.expression.compile: ","Compiling ",i),a.compile(i,s,o),t.log.trace("Twig.expression.compile: ","Stack is",s),t.log.trace("Twig.expression.compile: ","Output is",o);for(;s.length>0;)o.push(s.pop());return t.log.trace("Twig.expression.compile: ","Final output is",o),e.stack=o,delete e.value,e},t.expression.parse=function(e,n,r,i){const o=this;Array.isArray(e)||(e=[e]);const s=[],a=[],c=t.expression.type.operator.binary;return t.async.potentiallyAsync(o,i,(()=>t.async.forEach(e,((r,i)=>{let l,u=null,h=null;if(!r.cleanup)return e.length>i+1&&(h=e[i+1]),u=t.expression.handler[r.type],u.parse&&(l=u.parse.call(o,r,s,n,h)),r.type===c&&n.loop&&a.push(r),l})).then((()=>{let t=a.length,e=null;for(;t-- >0;)e=a[t],e.params&&e.key&&delete e.key;if(r){const t=s.splice(0);s.push(t)}return s.pop()}))))},t}},11815:function(t){t.exports=function(t){"use strict";t.expression.operator={leftToRight:"leftToRight",rightToLeft:"rightToLeft"};const e=function(t,e){if(null==e)return null;if(void 0!==e.indexOf)return(t===e||""!==t)&&e.includes(t);let n;for(n in e)if(Object.hasOwnProperty.call(e,n)&&e[n]===t)return!0;return!1};return t.expression.operator.lookup=function(e,n){switch(e){case"..":n.precidence=20,n.associativity=t.expression.operator.leftToRight;break;case",":n.precidence=18,n.associativity=t.expression.operator.leftToRight;break;case"?:":case"?":case":":n.precidence=16,n.associativity=t.expression.operator.rightToLeft;break;case"??":n.precidence=15,n.associativity=t.expression.operator.rightToLeft;break;case"or":n.precidence=14,n.associativity=t.expression.operator.leftToRight;break;case"and":n.precidence=13,n.associativity=t.expression.operator.leftToRight;break;case"b-or":n.precidence=12,n.associativity=t.expression.operator.leftToRight;break;case"b-xor":n.precidence=11,n.associativity=t.expression.operator.leftToRight;break;case"b-and":n.precidence=10,n.associativity=t.expression.operator.leftToRight;break;case"==":case"!=":n.precidence=9,n.associativity=t.expression.operator.leftToRight;break;case"<":case"<=":case">":case">=":case"not in":case"in":case"matches":case"starts with":case"ends with":n.precidence=8,n.associativity=t.expression.operator.leftToRight;break;case"~":case"+":case"-":n.precidence=6,n.associativity=t.expression.operator.leftToRight;break;case"//":case"**":case"*":case"/":case"%":n.precidence=5,n.associativity=t.expression.operator.leftToRight;break;case"not":n.precidence=3,n.associativity=t.expression.operator.rightToLeft;break;default:throw new t.Error("Failed to lookup operator: "+e+" is an unknown operator.")}return n.operator=e,n},t.expression.operator.parse=function(n,r){let i,o,s;if(t.log.trace("Twig.expression.operator.parse: ","Handling ",n),"?"===n&&(s=r.pop()),o=r.pop(),"not"!==n&&(i=r.pop()),"in"!==n&&"not in"!==n&&"??"!==n&&(i&&Array.isArray(i)&&(i=i.length),"?"!==n&&o&&Array.isArray(o)&&(o=o.length)),"matches"===n&&o&&"string"==typeof o){const t=o.match(/^\/(.*)\/([gims]?)$/),e=t[1],n=t[2];o=new RegExp(e,n)}switch(n){case":":break;case"??":void 0===i&&(i=o,o=s,s=void 0),null!=i?r.push(i):r.push(o);break;case"?:":t.lib.boolval(i)?r.push(i):r.push(o);break;case"?":void 0===i&&(i=o,o=s,s=void 0),t.lib.boolval(i)?r.push(o):r.push(s);break;case"+":o=parseFloat(o),i=parseFloat(i),r.push(i+o);break;case"-":o=parseFloat(o),i=parseFloat(i),r.push(i-o);break;case"*":o=parseFloat(o),i=parseFloat(i),r.push(i*o);break;case"/":o=parseFloat(o),i=parseFloat(i),r.push(i/o);break;case"//":o=parseFloat(o),i=parseFloat(i),r.push(Math.floor(i/o));break;case"%":o=parseFloat(o),i=parseFloat(i),r.push(i%o);break;case"~":r.push((null!=i?i.toString():"")+(null!=o?o.toString():""));break;case"not":case"!":r.push(!t.lib.boolval(o));break;case"<":r.push(i<o);break;case"<=":r.push(i<=o);break;case">":r.push(i>o);break;case">=":r.push(i>=o);break;case"===":r.push(i===o);break;case"==":r.push(i==o);break;case"!==":r.push(i!==o);break;case"!=":r.push(i!=o);break;case"or":r.push(t.lib.boolval(i)||t.lib.boolval(o));break;case"b-or":r.push(i|o);break;case"b-xor":r.push(i^o);break;case"and":r.push(t.lib.boolval(i)&&t.lib.boolval(o));break;case"b-and":r.push(i&o);break;case"**":r.push(i**o);break;case"not in":r.push(!e(i,o));break;case"in":r.push(e(i,o));break;case"matches":r.push(o.test(i));break;case"starts with":r.push("string"==typeof i&&0===i.indexOf(o));break;case"ends with":r.push("string"==typeof i&&i.includes(o,i.length-o.length));break;case"..":r.push(t.functions.range(i,o));break;default:throw new t.Error("Failed to parse operator: "+n+" is an unknown operator.")}},t}},55846:function(t,e,n){t.exports=function t(){const e={VERSION:"1.16.0"};return n(69530)(e),n(75919)(e),n(21794)(e),n(81215)(e),n(92266)(e),n(13832)(e),n(62125)(e),n(56068)(e),n(89615)(e),n(76855)(e),n(56519)(e),n(63321)(e),n(30890)(e),n(20766)(e),n(36921)(e),e.exports.factory=t,e.exports}},81215:function(t){t.exports=function(t){function e(t,e){const n=Object.prototype.toString.call(e).slice(8,-1);return null!=e&&n===t}return t.filters={upper:t=>"string"!=typeof t?t:t.toUpperCase(),lower:t=>"string"!=typeof t?t:t.toLowerCase(),capitalize:t=>"string"!=typeof t?t:t.slice(0,1).toUpperCase()+t.toLowerCase().slice(1),title:t=>"string"!=typeof t?t:t.toLowerCase().replace(/(^|\s)([a-z])/g,((t,e,n)=>e+n.toUpperCase())),length:e=>t.lib.is("Array",e)||"string"==typeof e?e.length:t.lib.is("Object",e)?void 0===e._keys?Object.keys(e).length:e._keys.length:0,reverse(t){if(e("Array",t))return t.reverse();if(e("String",t))return t.split("").reverse().join("");if(e("Object",t)){const e=t._keys||Object.keys(t).reverse();return t._keys=e,t}},sort(t){if(e("Array",t))return t.sort();if(e("Object",t)){delete t._keys;const e=Object.keys(t).sort(((e,n)=>{let r,i;return t[e]>t[n]==!(t[e]<=t[n])?t[e]>t[n]?1:t[e]<t[n]?-1:0:isNaN(r=parseFloat(t[e]))||isNaN(i=parseFloat(t[n]))?"string"==typeof t[e]?t[e]>t[n].toString()?1:t[e]<t[n].toString()?-1:0:"string"==typeof t[n]?t[e].toString()>t[n]?1:t[e].toString()<t[n]?-1:0:null:r>i?1:r<i?-1:0}));return t._keys=e,t}},keys(t){if(null==t)return;const e=t._keys||Object.keys(t),n=[];return e.forEach((e=>{"_keys"!==e&&Object.hasOwnProperty.call(t,e)&&n.push(e)})),n},url_encode(e){if(null==e)return;if(t.lib.is("Object",e)){const n=function(e,r){const i=[];return(e._keys||Object.keys(e)).forEach((o=>{if(!Object.prototype.hasOwnProperty.call(e,o))return;const s=r?r+"["+o+"]":o,a=e[o];i.push(t.lib.is("Object",a)||Array.isArray(a)?n(a,s):encodeURIComponent(s)+"="+encodeURIComponent(a))})),i.join("&amp;")};return n(e)}let n=encodeURIComponent(e);return n=n.replace("'","%27"),n},join(t,n){if(null==t)return;let r="",i=[],o=null;return n&&n[0]&&(r=n[0]),e("Array",t)?i=t:(o=t._keys||Object.keys(t),o.forEach((e=>{"_keys"!==e&&Object.hasOwnProperty.call(t,e)&&i.push(t[e])}))),i.join(r)},default(e,n){if(void 0!==n&&n.length>1)throw new t.Error("default filter expects one argument");return null==e||""===e?void 0===n?"":n[0]:e},json_encode(n){if(null==n)return"null";if("object"==typeof n&&e("Array",n)){const e=[];return n.forEach((n=>{e.push(t.filters.json_encode(n))})),"["+e.join(",")+"]"}if("object"==typeof n&&e("Date",n))return'"'+n.toISOString()+'"';if("object"==typeof n){const e=n._keys||Object.keys(n),r=[];return e.forEach((e=>{r.push(JSON.stringify(e)+":"+t.filters.json_encode(n[e]))})),"{"+r.join(",")+"}"}return JSON.stringify(n)},merge(n,r){let i=[],o=0,s=[];if(e("Array",n)?r.forEach((t=>{e("Array",t)||(i={})})):i={},e("Array",i)||(i._keys=[]),e("Array",n)?n.forEach((t=>{i._keys&&i._keys.push(o),i[o]=t,o++})):(s=n._keys||Object.keys(n),s.forEach((t=>{i[t]=n[t],i._keys.push(t);const e=parseInt(t,10);!isNaN(e)&&e>=o&&(o=e+1)}))),r.forEach((t=>{e("Array",t)?t.forEach((t=>{i._keys&&i._keys.push(o),i[o]=t,o++})):(s=t._keys||Object.keys(t),s.forEach((e=>{i[e]||i._keys.push(e),i[e]=t[e];const n=parseInt(e,10);!isNaN(n)&&n>=o&&(o=n+1)})))})),0===r.length)throw new t.Error("Filter merge expects at least one parameter");return i},date(e,n){const r=t.functions.date(e),i=n&&Boolean(n.length)?n[0]:"F j, Y H:i";return t.lib.date(i.replace(/\\\\/g,"\\"),r)},date_modify(e,n){if(null==e)return;if(void 0===n||1!==n.length)throw new t.Error("date_modify filter expects 1 argument");const r=n[0];let i;return t.lib.is("Date",e)&&(i=t.lib.strtotime(r,e.getTime()/1e3)),t.lib.is("String",e)&&(i=t.lib.strtotime(r,t.lib.strtotime(e))),t.lib.is("Number",e)&&(i=t.lib.strtotime(r,e)),new Date(1e3*i)},replace(e,n){if(null==e)return;const r=n[0];let i;for(i in r)Object.hasOwnProperty.call(r,i)&&"_keys"!==i&&(e=t.lib.replaceAll(e,i,r[i]));return e},format(e,n){if(null!=e)return t.lib.vsprintf(e,n)},striptags(e,n){if(null!=e)return t.lib.stripTags(e,n)},escape(e,n){if(null==e||""===e)return;let r="html";if(n&&Boolean(n.length)&&!0!==n[0]&&(r=n[0]),"html"===r){const n=e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");return new t.Markup(n,"html")}if("js"===r){const n=e.toString();let r="";for(let e=0;e<n.length;e++)if(n[e].match(/^[a-zA-Z0-9,._]$/))r+=n[e];else{const i=n.charAt(e),o=n.charCodeAt(e),s={"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};s[i]?r+=s[i]:r+=t.lib.sprintf("\\u%04s",o.toString(16).toUpperCase())}return new t.Markup(r,"js")}if("css"===r){const n=e.toString();let r="";for(let t=0;t<n.length;t++)if(n[t].match(/^[a-zA-Z0-9]$/))r+=n[t];else{r+="\\"+n.charCodeAt(t).toString(16).toUpperCase()+" "}return new t.Markup(r,"css")}if("url"===r){const n=t.filters.url_encode(e);return new t.Markup(n,"url")}if("html_attr"===r){const n=e.toString();let r="";for(let e=0;e<n.length;e++)if(n[e].match(/^[a-zA-Z0-9,.\-_]$/))r+=n[e];else if(n[e].match(/^[&<>"]$/))r+=n[e].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");else{const i=n.charCodeAt(e);r+=i<=31&&9!==i&&10!==i&&13!==i?"&#xFFFD;":i<128?t.lib.sprintf("&#x%02s;",i.toString(16).toUpperCase()):t.lib.sprintf("&#x%04s;",i.toString(16).toUpperCase())}return new t.Markup(r,"html_attr")}throw new t.Error("escape strategy unsupported")},e:(e,n)=>t.filters.escape(e,n),nl2br(e){if(null==e||""===e)return;const n="BACKSLASH_n_replace",r="<br />"+n;return e=t.filters.escape(e).replace(/\r\n/g,r).replace(/\r/g,r).replace(/\n/g,r),e=t.lib.replaceAll(e,n,"\n"),new t.Markup(e)},number_format(t,e){let n=t;const r=e&&e[0]?e[0]:void 0,i=e&&void 0!==e[1]?e[1]:".",o=e&&void 0!==e[2]?e[2]:",";n=String(n).replace(/[^0-9+\-Ee.]/g,"");const s=isFinite(Number(n))?Number(n):0,a=isFinite(Number(r))?Math.abs(r):0;let c="";return c=(a?function(t,e){const n=10**e;return String(Math.round(t*n)/n)}(s,a):String(Math.round(s))).split("."),c[0].length>3&&(c[0]=c[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,o)),(c[1]||"").length<a&&(c[1]=c[1]||"",c[1]+=new Array(a-c[1].length+1).join("0")),c.join(i)},trim(t,e){if(null==t)return;let n,r=String(t);n=e&&e[0]?String(e[0]):" \n\r\t\f\v            ​\u2028\u2029　";for(let t=0;t<r.length;t++)if(!n.includes(r.charAt(t))){r=r.slice(Math.max(0,t));break}for(let t=r.length-1;t>=0;t--)if(!n.includes(r.charAt(t))){r=r.slice(0,Math.max(0,t+1));break}return n.includes(r.charAt(0))?"":r},truncate(t,e){let n=30,r=!1,i="...";if(t=String(t),e&&(e[0]&&(n=e[0]),e[1]&&(r=e[1]),e[2]&&(i=e[2])),t.length>n){if(r&&(n=t.indexOf(" ",n),-1===n))return t;t=t.slice(0,n)+i}return t},slice(e,n){if(null==e)return;if(void 0===n||0===n.length)throw new t.Error("slice filter expects at least 1 argument");const r=n[0]||0,i=n.length>1?n[1]:e.length,o=r>=0?r:Math.max(e.length+r,0);if(t.lib.is("Array",e)){const t=[];for(let n=o;n<o+i&&n<e.length;n++)t.push(e[n]);return t}if(t.lib.is("String",e))return e.slice(o,o+i);throw new t.Error("slice filter expects value to be an array or string")},abs(t){if(null!=t)return Math.abs(t)},first(t){if(e("Array",t))return t[0];if(e("Object",t)){if("_keys"in t)return t[t._keys[0]]}else if("string"==typeof t)return t.slice(0,1)},split(e,n){if(null!=e){if(void 0===n||0===n.length||n.length>2)throw new t.Error("split filter expects 1 or 2 argument");if(t.lib.is("String",e)){const t=n[0],r=n[1],i=e.split(t);if(void 0===r)return i;if(r<0)return e.split(t,i.length+r);const o=[];if(""===t)for(;i.length>0;){let t="";for(let e=0;e<r&&i.length>0;e++)t+=i.shift();o.push(t)}else{for(let t=0;t<r-1&&i.length>0;t++)o.push(i.shift());i.length>0&&o.push(i.join(t))}return o}throw new t.Error("split filter expects value to be a string")}},last(e){if(t.lib.is("Object",e)){let t;return t=void 0===e._keys?Object.keys(e):e._keys,e[t[t.length-1]]}return t.lib.is("Number",e)?e.toString().slice(-1):e[e.length-1]},raw:e=>new t.Markup(e||""),batch(e,n){let r=n.shift();const i=n.shift();let o,s;if(!t.lib.is("Array",e))throw new t.Error("batch filter expects items to be an array");if(!t.lib.is("Number",r))throw new t.Error("batch filter expects size to be a number");r=Math.ceil(r);const a=t.lib.chunkArray(e,r);if(i&&e.length%r!=0){for(o=a.pop(),s=r-o.length;s--;)o.push(i);a.push(o)}return a},round(e,n){const r=(n=n||[]).length>0?n[0]:0,i=n.length>1?n[1]:"common";if(e=parseFloat(e),r&&!t.lib.is("Number",r))throw new t.Error("round filter expects precision to be a number");if("common"===i)return t.lib.round(e,r);if(!t.lib.is("Function",Math[i]))throw new t.Error("round filter expects method to be 'floor', 'ceil', or 'common'");return Math[i](e*10**r)/10**r},spaceless:t=>t.replace(/>\s+</g,"><").trim()},t.filter=function(e,n,r){if(!t.filters[e])throw new t.Error("Unable to find filter "+e);return t.filters[e].call(this,n,r)},t.filter.extend=function(e,n){t.filters[e]=n},t}},92266:function(t){t.exports=function(e){return e.functions={range(t,e,n){const r=[];let i,o;const s=n||1;let a=!1;isNaN(t)||isNaN(e)?isNaN(t)&&isNaN(e)?(a=!0,i=t.charCodeAt(0),o=e.charCodeAt(0)):(i=isNaN(t)?0:t,o=isNaN(e)?0:e):(i=parseInt(t,10),o=parseInt(e,10));if(!(i>o))for(;i<=o;)r.push(a?String.fromCharCode(i):i),i+=s;else for(;i>=o;)r.push(a?String.fromCharCode(i):i),i-=s;return r},cycle:(t,e)=>t[e%t.length],dump(...t){const e=[...t],n=this,r="\n";let i=0,o="";const s=function(t){let e="";for(;t>0;)t--,e+="  ";return e},a=function(t){o+=s(i),"object"==typeof t?c(t):"function"==typeof t?o+="function()\n":"string"==typeof t?o+="string("+t.length+') "'+t+'"'+r:"number"==typeof t?o+="number("+t+")"+r:"boolean"==typeof t&&(o+="bool("+t+")"+r)},c=function(t){let e;if(null===t)o+="NULL\n";else if(void 0===t)o+="undefined\n";else if("object"==typeof t){for(e in o+=s(i)+typeof t,i++,o+="("+function(t){let e,n=0;for(e in t)Object.hasOwnProperty.call(t,e)&&n++;return n}(t)+") {"+r,t)Object.hasOwnProperty.call(t,e)&&(o+=s(i)+"["+e+"]=> "+r,a(t[e]));i--,o+=s(i)+"}"+r}else a(t)};return 0===e.length&&e.push(n.context),e.forEach((t=>{c(t)})),o},date(t){let n;if(null==t||""===t)n=new Date;else if(e.lib.is("Date",t))n=t;else if(e.lib.is("String",t))n=t.match(/^\d+$/)?new Date(1e3*t):new Date(1e3*e.lib.strtotime(t));else{if(!e.lib.is("Number",t))throw new e.Error("Unable to parse date "+t);n=new Date(1e3*t)}return n},block(t){const e=this,n=e.getBlock(t);if(void 0!==n)return n.render(e,e.context)},parent(){const t=this;return t.getBlock(t.getNestingStackToken(e.logic.type.block).blockName,!0).render(t,t.context)},attribute:(t,n,r)=>e.lib.is("Object",t)&&Object.hasOwnProperty.call(t,n)?"function"==typeof t[n]?t[n].apply(void 0,r):t[n]:t&&t[n]||void 0,max:(t,...n)=>e.lib.is("Object",t)?(delete t._keys,e.lib.max(t)):Reflect.apply(e.lib.max,null,[t,...n]),min:(t,...n)=>e.lib.is("Object",t)?(delete t._keys,e.lib.min(t)):Reflect.apply(e.lib.min,null,[t,...n]),template_from_string(t){return void 0===t&&(t=""),e.Templates.parsers.twig({options:this.template.options,data:t})},random(t){const n=2147483648;function r(t){const e=Math.floor(Math.random()*n),r=Math.min.call(null,0,t),i=Math.max.call(null,0,t);return r+Math.floor((i-r+1)*e/n)}if(e.lib.is("Number",t))return r(t);if(e.lib.is("String",t))return t.charAt(r(t.length-1));if(e.lib.is("Array",t))return t[r(t.length-1)];if(e.lib.is("Object",t)){const e=Object.keys(t);return t[e[r(e.length-1)]]}return r(2147483647)},source(n,r){const{namespaces:i}=this.template.options;let o,s=!1;const a=void 0!==t.exports&&"undefined"==typeof window;let c,l=n;i&&"object"==typeof i&&(l=e.path.expandNamespace(i,l)),c=a?"fs":"ajax";const u={id:n,path:l,method:c,parser:"source",async:!1,fetchTemplateSource:!0};void 0===r&&(r=!1);try{o=e.Templates.loadRemote(n,u),null==o?o="":s=!0}catch(t){e.log.debug("Twig.functions.source: ","Problem loading template  ",t)}return s||r?o:'Template "{name}" is not defined.'.replace("{name}",n)}},e._function=function(t,n,r){if(!e.functions[t])throw new e.Error("Unable to find function "+t);return e.functions[t](n,r)},e._function.extend=function(t,n){e.functions[t]=n},e}},77566:function(t,e,n){t.exports=n(55846)()},13832:function(t,e,n){t.exports=function(t){return t.lib={},t.lib.sprintf=n(28296),t.lib.vsprintf=n(19436),t.lib.round=n(718),t.lib.max=n(14673),t.lib.min=n(91004),t.lib.stripTags=n(64359),t.lib.strtotime=n(27195),t.lib.date=n(25190),t.lib.boolval=n(45315),t.lib.is=function(t,e){if(null==e)return!1;switch(t){case"Array":return Array.isArray(e);case"Date":return e instanceof Date;case"String":return"string"==typeof e||e instanceof String;case"Number":return"number"==typeof e||e instanceof Number;case"Function":return"function"==typeof e;case"Object":return e instanceof Object;default:return!1}},t.lib.replaceAll=function(t,e,n){const r="string"==typeof t?t:t.toString(),i=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return r.replace(new RegExp(i,"g"),n)},t.lib.chunkArray=function(t,e){const n=[];let r=0;const i=t.length;if(e<1||!Array.isArray(t))return[];for(;r<i;)n.push(t.slice(r,r+=e));return n},t}},62125:function(t){t.exports=function(t){"use strict";t.Templates.registerLoader("ajax",(function(e,n,r,i){let o;const{precompiled:s}=n,a=this.parsers[n.parser]||this.parser.twig;if("undefined"==typeof XMLHttpRequest)throw new t.Error('Unsupported platform: Unable to do ajax requests because there is no "XMLHTTPRequest" implementation');const c=new XMLHttpRequest;return c.onreadystatechange=function(){let l=null;4===c.readyState&&(200===c.status||window.cordova&&0===c.status?(t.log.debug("Got template ",c.responseText),l=!0===s?JSON.parse(c.responseText):c.responseText,n.url=e,n.data=l,o=a.call(this,n),"function"==typeof r&&r(o)):"function"==typeof i&&i(c))},c.open("GET",e,Boolean(n.async)),c.overrideMimeType("text/plain"),c.send(),!!n.async||o}))}},56068:function(t,e,n){var r=n(25108);t.exports=function(t){"use strict";let e,i;try{e=n(17828),i=n(62520)}catch(t){r.warn("Missing fs and path modules. "+t)}t.Templates.registerLoader("fs",(function(n,r,o,s){let a,c=null;const{precompiled:l}=r,u=this.parsers[r.parser]||this.parser.twig;if(!e||!i)throw new t.Error('Unsupported platform: Unable to load from file because there is no "fs" or "path" implementation');const h=function(t,e){t?"function"==typeof s&&s(t):(!0===l&&(e=JSON.parse(e)),r.data=e,r.path=r.path||n,a=u.call(this,r),"function"==typeof o&&o(a))};if(r.path=r.path||n,r.async)return e.stat(r.path,((n,i)=>{!n&&i.isFile()?e.readFile(r.path,"utf8",h):"function"==typeof s&&s(new t.Error("Unable to find template file "+r.path))})),!0;try{if(!e.statSync(r.path).isFile())throw new t.Error("Unable to find template file "+r.path)}catch(e){throw new t.Error("Unable to find template file "+r.path+". "+e)}return c=e.readFileSync(r.path,"utf8"),h(void 0,c),a}))}},89615:function(t,e,n){var r=n(25108);t.exports=function(t){"use strict";for(t.logic={},t.logic.type={if_:"Twig.logic.type.if",endif:"Twig.logic.type.endif",for_:"Twig.logic.type.for",endfor:"Twig.logic.type.endfor",else_:"Twig.logic.type.else",elseif:"Twig.logic.type.elseif",set:"Twig.logic.type.set",setcapture:"Twig.logic.type.setcapture",endset:"Twig.logic.type.endset",filter:"Twig.logic.type.filter",endfilter:"Twig.logic.type.endfilter",apply:"Twig.logic.type.apply",endapply:"Twig.logic.type.endapply",do:"Twig.logic.type.do",shortblock:"Twig.logic.type.shortblock",block:"Twig.logic.type.block",endblock:"Twig.logic.type.endblock",extends_:"Twig.logic.type.extends",use:"Twig.logic.type.use",include:"Twig.logic.type.include",spaceless:"Twig.logic.type.spaceless",endspaceless:"Twig.logic.type.endspaceless",macro:"Twig.logic.type.macro",endmacro:"Twig.logic.type.endmacro",import_:"Twig.logic.type.import",from:"Twig.logic.type.from",embed:"Twig.logic.type.embed",endembed:"Twig.logic.type.endembed",with:"Twig.logic.type.with",endwith:"Twig.logic.type.endwith",deprecated:"Twig.logic.type.deprecated"},t.logic.definitions=[{type:t.logic.type.if_,regex:/^if\s?([\s\S]+)$/,next:[t.logic.type.else_,t.logic.type.elseif,t.logic.type.endif],open:!0,compile(e){const n=e.match[1];return e.stack=t.expression.compile.call(this,{type:t.expression.type.expression,value:n}).stack,delete e.match,e},parse(e,n,r){const i=this;return t.expression.parseAsync.call(i,e.stack,n).then((o=>(r=!0,t.lib.boolval(o)?(r=!1,i.parseAsync(e.output,n)):""))).then((t=>({chain:r,output:t})))}},{type:t.logic.type.elseif,regex:/^elseif\s?([^\s].*)$/,next:[t.logic.type.else_,t.logic.type.elseif,t.logic.type.endif],open:!1,compile(e){const n=e.match[1];return e.stack=t.expression.compile.call(this,{type:t.expression.type.expression,value:n}).stack,delete e.match,e},parse(e,n,r){const i=this;return t.expression.parseAsync.call(i,e.stack,n).then((o=>r&&t.lib.boolval(o)?(r=!1,i.parseAsync(e.output,n)):"")).then((t=>({chain:r,output:t})))}},{type:t.logic.type.else_,regex:/^else$/,next:[t.logic.type.endif,t.logic.type.endfor],open:!1,parse(e,n,r){let i=t.Promise.resolve("");return r&&(i=this.parseAsync(e.output,n)),i.then((t=>({chain:r,output:t})))}},{type:t.logic.type.endif,regex:/^endif$/,next:[],open:!1},{type:t.logic.type.for_,regex:/^for\s+([a-zA-Z0-9_,\s]+)\s+in\s+([\S\s]+?)(?:\s+if\s+([^\s].*))?$/,next:[t.logic.type.else_,t.logic.type.endfor],open:!0,compile(e){const n=e.match[1],r=e.match[2],i=e.match[3];let o=null;if(e.keyVar=null,e.valueVar=null,n.includes(",")){if(o=n.split(","),2!==o.length)throw new t.Error("Invalid expression in for loop: "+n);e.keyVar=o[0].trim(),e.valueVar=o[1].trim()}else e.valueVar=n.trim();return e.expression=t.expression.compile.call(this,{type:t.expression.type.expression,value:r}).stack,i&&(e.conditional=t.expression.compile.call(this,{type:t.expression.type.expression,value:i}).stack),delete e.match,e},parse(e,n,r){const i=[];let o,s,a=0;const c=this,{conditional:l}=e,u=function(r,s){const u={...n};u[e.valueVar]=s,e.keyVar&&(u[e.keyVar]=r),u.loop=function(t,e){const r=void 0!==l;return{index:t+1,index0:t,revindex:r?void 0:e-t,revindex0:r?void 0:e-t-1,first:0===t,last:r?void 0:t===e-1,length:r?void 0:e,parent:n}}(a,o);return(void 0===l?t.Promise.resolve(!0):t.expression.parseAsync.call(c,l,u)).then((t=>{if(t)return c.parseAsync(e.output,u).then((t=>{i.push(t),a+=1}))})).then((()=>{delete u.loop,delete u[e.valueVar],delete u[e.keyVar],t.merge(n,u,!0)}))};return t.expression.parseAsync.call(c,e.expression,n).then((e=>Array.isArray(e)?(o=e.length,t.async.forEach(e,(t=>u(a,t)))):t.lib.is("Object",e)?(s=void 0===e._keys?Object.keys(e):e._keys,o=s.length,t.async.forEach(s,(t=>{if("_keys"!==t)return u(t,e[t])}))):void 0)).then((()=>({chain:0===i.length,context:n,output:t.output.call(c.template,i)})))}},{type:t.logic.type.endfor,regex:/^endfor$/,next:[],open:!1},{type:t.logic.type.set,regex:/^set\s+([a-zA-Z0-9_,\s]+)\s*=\s*([\s\S]+)$/,next:[],open:!0,compile(e){const n=e.match[1].trim(),r=e.match[2],i=t.expression.compile.call(this,{type:t.expression.type.expression,value:r}).stack;return e.key=n,e.expression=i,delete e.match,e},parse(e,n,r){const{key:i}=e;return t.expression.parseAsync.call(this,e.expression,n).then((t=>(t===n&&(t={...t}),n[i]=t,{chain:r,context:n})))}},{type:t.logic.type.setcapture,regex:/^set\s+([a-zA-Z0-9_,\s]+)$/,next:[t.logic.type.endset],open:!0,compile(t){const e=t.match[1].trim();return t.key=e,delete t.match,t},parse(t,e,n){const r=this,{key:i}=t;return r.parseAsync(t.output,e).then((t=>(r.context[i]=t,e[i]=t,{chain:n,context:e})))}},{type:t.logic.type.endset,regex:/^endset$/,next:[],open:!1},{type:t.logic.type.filter,regex:/^filter\s+(.+)$/,next:[t.logic.type.endfilter],open:!0,compile(e){const n="|"+e.match[1].trim();return e.stack=t.expression.compile.call(this,{type:t.expression.type.expression,value:n}).stack,delete e.match,e},parse(e,n,r){const i=this;return i.parseAsync(e.output,n).then((r=>{const o=[{type:t.expression.type.string,value:r}].concat(e.stack);return t.expression.parseAsync.call(i,o,n)})).then((t=>({chain:r,output:t})))}},{type:t.logic.type.endfilter,regex:/^endfilter$/,next:[],open:!1},{type:t.logic.type.apply,regex:/^apply\s+(.+)$/,next:[t.logic.type.endapply],open:!0,compile(e){const n="|"+e.match[1].trim();return e.stack=t.expression.compile.call(this,{type:t.expression.type.expression,value:n}).stack,delete e.match,e},parse(e,n,r){const i=this;return i.parseAsync(e.output,n).then((r=>{const o=[{type:t.expression.type.string,value:r}].concat(e.stack);return t.expression.parseAsync.call(i,o,n)})).then((t=>({chain:r,output:t})))}},{type:t.logic.type.endapply,regex:/^endapply$/,next:[],open:!1},{type:t.logic.type.do,regex:/^do\s+([\S\s]+)$/,next:[],open:!0,compile(e){const n=e.match[1],r=t.expression.compile.call(this,{type:t.expression.type.expression,value:n}).stack;return e.expression=r,delete e.match,e},parse(e,n,r){return t.expression.parseAsync.call(this,e.expression,n).then((()=>({chain:r,context:n})))}},{type:t.logic.type.block,regex:/^block\s+(\w+)$/,next:[t.logic.type.endblock],open:!0,compile:t=>(t.blockName=t.match[1].trim(),delete t.match,t),parse(e,n,r){const i=this;let o=t.Promise.resolve();return i.template.blocks.defined[e.blockName]=new t.Block(i.template,e),(null===i.template.parentTemplate||i.template.parentTemplate instanceof t.Template)&&(o=i.getBlock(e.blockName).render(i,n)),o.then((t=>({chain:r,output:t})))}},{type:t.logic.type.shortblock,regex:/^block\s+(\w+)\s+(.+)$/,next:[],open:!0,compile(e){return e.expression=e.match[2].trim(),e.output=t.expression.compile({type:t.expression.type.expression,value:e.expression}).stack,t.logic.handler[t.logic.type.block].compile.apply(this,[e])},parse(...e){return t.logic.handler[t.logic.type.block].parse.apply(this,e)}},{type:t.logic.type.endblock,regex:/^endblock(?:\s+(\w+))?$/,next:[],open:!1},{type:t.logic.type.extends_,regex:/^extends\s+(.+)$/,next:[],open:!0,compile(e){const n=e.match[1].trim();return delete e.match,e.stack=t.expression.compile.call(this,{type:t.expression.type.expression,value:n}).stack,e},parse(e,n,r){const i=this;return t.expression.parseAsync.call(i,e.stack,n).then((t=>{if(Array.isArray(t)){const e=t.reverse().reduce(((t,e)=>{try{return{render:i.template.importFile(e),fileName:e}}catch(e){return t}}),{render:null,fileName:null});null!==e.fileName&&(i.template.parentTemplate=e.fileName)}else i.template.parentTemplate=t;return{chain:r,output:""}}))}},{type:t.logic.type.use,regex:/^use\s+(.+)$/,next:[],open:!0,compile(e){const n=e.match[1].trim();return delete e.match,e.stack=t.expression.compile.call(this,{type:t.expression.type.expression,value:n}).stack,e},parse(e,n,r){const i=this;return t.expression.parseAsync.call(i,e.stack,n).then((e=>{const n=i.template.importFile(e),r=new t.ParseState(n);return r.parseAsync(n.tokens).then((()=>{i.template.blocks.imported={...i.template.blocks.imported,...r.getBlocks()}}))})).then((()=>({chain:r,output:""})))}},{type:t.logic.type.include,regex:/^include\s+(.+?)(?:\s|$)(ignore missing(?:\s|$))?(?:with\s+([\S\s]+?))?(?:\s|$)(only)?$/,next:[],open:!0,compile(e){const{match:n}=e,r=n[1].trim(),i=void 0!==n[2],o=n[3],s=void 0!==n[4]&&n[4].length;return delete e.match,e.only=s,e.ignoreMissing=i,e.stack=t.expression.compile.call(this,{type:t.expression.type.expression,value:r}).stack,void 0!==o&&(e.withStack=t.expression.compile.call(this,{type:t.expression.type.expression,value:o.trim()}).stack),e},parse(e,n,r){let i=e.only?{}:{...n};const{ignoreMissing:o}=e,s=this;let a=null;const c={chain:r,output:""};return a=void 0===e.withStack?t.Promise.resolve():t.expression.parseAsync.call(s,e.withStack,n).then((t=>{i={...i,...t}})),a.then((()=>t.expression.parseAsync.call(s,e.stack,n))).then((e=>{let n;n=Array.isArray(e)?e:[e];const r=n.reduce(((e,n)=>{if(null===e.render){if(n instanceof t.Template)return{render:n.renderAsync(i,{isInclude:!0}),lastError:null};try{return{render:s.template.importFile(n).renderAsync(i,{isInclude:!0}),lastError:null}}catch(t){return{render:null,lastError:t}}}return e}),{render:null,lastError:null});if(null!==r.render)return r.render;if(null===r.render&&o)return"";throw r.lastError})).then((t=>(""!==t&&(c.output=t),c)))}},{type:t.logic.type.spaceless,regex:/^spaceless$/,next:[t.logic.type.endspaceless],open:!0,parse(e,n,r){return this.parseAsync(e.output,n).then((e=>{let n=e.replace(/>\s+</g,"><").trim();return n=new t.Markup(n),{chain:r,output:n}}))}},{type:t.logic.type.endspaceless,regex:/^endspaceless$/,next:[],open:!1},{type:t.logic.type.macro,regex:/^macro\s+(\w+)\s*\(\s*((?:\w+(?:\s*=\s*([\s\S]+))?(?:,\s*)?)*)\s*\)$/,next:[t.logic.type.endmacro],open:!0,compile(e){const n=e.match[1],r=e.match[2].split(/\s*,\s*/),i=r.map((t=>t.split(/\s*=\s*/)[0])),o=i.length;if(o>1){const e={};for(let n=0;n<o;n++){const r=i[n];if(e[r])throw new t.Error("Duplicate arguments for parameter: "+r);e[r]=1}}return e.macroName=n,e.parameters=i,e.defaults=r.reduce((function(e,n){const r=n.split(/\s*=\s*/),i=r[0],o=r[1];return e[i]=o?t.expression.compile.call(this,{type:t.expression.type.expression,value:o}).stack:void 0,e}),{}),delete e.match,e},parse(e,n,r){const i=this;return i.macros[e.macroName]=function(...r){const o={...i.context,_self:i.macros};return t.async.forEach(e.parameters,(function(i,s){return void 0!==r[s]?(o[i]=r[s],!0):void 0!==e.defaults[i]?t.expression.parseAsync.call(this,e.defaults[i],n).then((e=>(o[i]=e,t.Promise.resolve()))):(o[i]=void 0,!0)})).then((()=>i.parseAsync(e.output,o)))},{chain:r,output:""}}},{type:t.logic.type.endmacro,regex:/^endmacro$/,next:[],open:!1},{type:t.logic.type.import_,regex:/^import\s+(.+)\s+as\s+(\w+)$/,next:[],open:!0,compile(e){const n=e.match[1].trim(),r=e.match[2].trim();return delete e.match,e.expression=n,e.contextName=r,e.stack=t.expression.compile.call(this,{type:t.expression.type.expression,value:n}).stack,e},parse(e,n,r){const i=this,o={chain:r,output:""};return"_self"===e.expression?(n[e.contextName]=i.macros,o):t.expression.parseAsync.call(i,e.stack,n).then((t=>i.template.importFile(t||e.expression))).then((r=>{const i=new t.ParseState(r);return i.parseAsync(r.tokens).then((()=>(n[e.contextName]=i.macros,o)))}))}},{type:t.logic.type.from,regex:/^from\s+(.+)\s+import\s+([a-zA-Z0-9_, ]+)$/,next:[],open:!0,compile(e){const n=e.match[1].trim(),r=e.match[2].trim().split(/\s*,\s*/),i={};for(const t of r){const e=t.match(/^(\w+)\s+as\s+(\w+)$/);e?i[e[1].trim()]=e[2].trim():t.match(/^(\w+)$/)&&(i[t]=t)}return delete e.match,e.expression=n,e.macroNames=i,e.stack=t.expression.compile.call(this,{type:t.expression.type.expression,value:n}).stack,e},parse(e,n,r){const i=this;let o;return o="_self"===e.expression?t.Promise.resolve(i.macros):t.expression.parseAsync.call(i,e.stack,n).then((t=>i.template.importFile(t||e.expression))).then((e=>{const n=new t.ParseState(e);return n.parseAsync(e.tokens).then((()=>n.macros))})),o.then((t=>{for(const r in e.macroNames)void 0!==t[r]&&(n[e.macroNames[r]]=t[r]);return{chain:r,output:""}}))}},{type:t.logic.type.embed,regex:/^embed\s+(.+?)(?:\s+(ignore missing))?(?:\s+with\s+([\S\s]+?))?(?:\s+(only))?$/,next:[t.logic.type.endembed],open:!0,compile(e){const{match:n}=e,r=n[1].trim(),i=void 0!==n[2],o=n[3],s=void 0!==n[4]&&n[4].length;return delete e.match,e.only=s,e.ignoreMissing=i,e.stack=t.expression.compile.call(this,{type:t.expression.type.expression,value:r}).stack,void 0!==o&&(e.withStack=t.expression.compile.call(this,{type:t.expression.type.expression,value:o.trim()}).stack),e},parse(e,n,r){let i={},o=t.Promise.resolve(),s=this;return e.only||(i={...n}),void 0!==e.withStack&&(o=t.expression.parseAsync.call(s,e.withStack,n).then((t=>{i={...i,...t}}))),o.then((()=>t.expression.parseAsync.call(s,e.stack,i))).then((n=>{const r=new t.Template({data:e.output,base:s.template.base,path:s.template.path,url:s.template.url,name:s.template.name,method:s.template.method,options:s.template.options});try{r.importFile(n)}catch(t){if(e.ignoreMissing)return"";throw s=null,t}return r.parentTemplate=n,r.renderAsync(i,{isInclude:!0})})).then((t=>({chain:r,output:t})))}},{type:t.logic.type.endembed,regex:/^endembed$/,next:[],open:!1},{type:t.logic.type.with,regex:/^(?:with(?:\s+([\S\s]+?))?)(?:\s|$)(only)?$/,next:[t.logic.type.endwith],open:!0,compile(e){const{match:n}=e,r=n[1],i=void 0!==n[2]&&n[2].length;return delete e.match,e.only=i,void 0!==r&&(e.withStack=t.expression.compile.call(this,{type:t.expression.type.expression,value:r.trim()}).stack),e},parse(e,n,r){let i,o={};const s=this;let a=t.Promise.resolve();e.only||(o={...n}),void 0!==e.withStack&&(a=t.expression.parseAsync.call(s,e.withStack,n).then((t=>{for(i in t)Object.hasOwnProperty.call(t,i)&&(o[i]=t[i])})));const c=new t.ParseState(s.template,void 0,o);return a.then((()=>c.parseAsync(e.output))).then((t=>({chain:r,output:t})))}},{type:t.logic.type.endwith,regex:/^endwith$/,next:[],open:!1},{type:t.logic.type.deprecated,regex:/^deprecated\s+(.+)$/,next:[],open:!0,compile:t=>(r.warn("Deprecation notice: "+t.match[1]),t),parse:()=>({})}],t.logic.handler={},t.logic.extendType=function(e,n){n=n||"Twig.logic.type"+e,t.logic.type[e]=n},t.logic.extend=function(e){if(!e.type)throw new t.Error("Unable to extend logic definition. No type provided for "+e);t.logic.extendType(e.type),t.logic.handler[e.type]=e};t.logic.definitions.length>0;)t.logic.extend(t.logic.definitions.shift());return t.logic.compile=function(e){const n=e.value.trim();let r=t.logic.tokenize.call(this,n);const i=t.logic.handler[r.type];return i.compile&&(r=i.compile.call(this,r),t.log.trace("Twig.logic.compile: ","Compiled logic token to ",r)),r},t.logic.tokenize=function(e){let n=null,r=null,i=null,o=null,s=null,a=null,c=null;for(n in e=e.trim(),t.logic.handler)if(Object.hasOwnProperty.call(t.logic.handler,n))for(r=t.logic.handler[n].type,i=t.logic.handler[n].regex,o=i,Array.isArray(i)||(o=[i]),s=o.length,a=0;a<s;a++)if(c=o[a].exec(e),null!==c)return t.log.trace("Twig.logic.tokenize: ","Matched a ",r," regular expression of ",c),{type:r,match:c};throw new t.Error("Unable to parse '"+e.trim()+"'")},t.logic.parse=function(e,n,r,i){return t.async.potentiallyAsync(this,i,(function(){t.log.debug("Twig.logic.parse: ","Parsing logic token ",e);const i=t.logic.handler[e.type];let o;const s=this;return i.parse?(s.nestingStack.unshift(e),o=i.parse.call(s,e,n||{},r),t.isPromise(o)?o=o.then((t=>(s.nestingStack.shift(),t))):s.nestingStack.shift(),o):""}))},t}},76855:function(t){t.exports=function(t){"use strict";t.Templates.registerParser("source",(t=>t.data||""))}},56519:function(t){t.exports=function(t){"use strict";t.Templates.registerParser("twig",(e=>new t.Template(e)))}},63321:function(t,e,n){t.exports=function(t){"use strict";return t.path={},t.path.expandNamespace=function(t,e){const n=Object.keys(t),r=new RegExp(`^(?:@(${n.join("|")})/|(${n.join("|")})::)`);return e.replace(r,((e,n,r)=>`${t[void 0===n?r:n]}/`))},t.path.parsePath=function(e,n){const{namespaces:r}=e.options,i=n||"";let o=r&&"object"==typeof r?t.path.expandNamespace(r,i):i;return o===i&&(o=t.path.relativePath(e,i)),o},t.path.relativePath=function(e,r){let i,o,s="/";const a=[];let c,l=r||"";if(e.url)i=void 0===e.base?e.url:e.base.replace(/([^/])$/,"$1/");else if(e.path){const t=n(62520),r=t.sep||s,o=new RegExp("^\\.{1,2}"+r.replace("\\","\\\\"));l=l.replace(/\//g,r),void 0!==e.base&&null===l.match(o)?(l=l.replace(e.base,""),i=e.base+r):i=t.normalize(e.path),i=i.replace(r+r,r),s=r}else{if(!e.name&&!e.id||!e.method||"fs"===e.method||"ajax"===e.method)throw new t.Error("Cannot extend an inline template.");i=e.base||e.name||e.id}for(o=i.split(s),o.pop(),o=o.concat(l.split(s));o.length>0;)c=o.shift(),"."===c||(".."===c&&a.length>0&&".."!==a[a.length-1]?a.pop():a.push(c));return a.join(s)},t}},30890:function(t,e,n){var r=n(25108);t.exports=function(t){"use strict";return t.tests={empty(t){if(null==t)return!0;if("number"==typeof t)return!1;if(t.length>0)return!1;for(const e in t)if(Object.hasOwnProperty.call(t,e))return!1;return!0},odd:t=>t%2==1,even:t=>t%2==0,"divisible by":(t,e)=>t%e[0]==0,divisibleby:(e,n)=>(r.warn("`divisibleby` is deprecated use `divisible by`"),t.tests["divisible by"](e,n)),defined:t=>void 0!==t,none:t=>null===t,null(t){return this.none(t)},"same as":(t,e)=>t===e[0],sameas:(e,n)=>(r.warn("`sameas` is deprecated use `same as`"),t.tests["same as"](e,n)),iterable:e=>e&&(t.lib.is("Array",e)||t.lib.is("Object",e))},t.test=function(e,n,r){if(!t.tests[e])throw t.Error("Test "+e+" is not defined.");return t.tests[e](n,r)},t.test.extend=function(e,n){t.tests[e]=n},t}},84564:function(t,e,n){"use strict";var r=n(47418),i=n(57129),o=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,s=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,u=/^[a-zA-Z]:/;function h(t){return(t||"").toString().replace(o,"")}var p=[["#","hash"],["?","query"],function(t,e){return g(e.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],f={hash:1,query:1};function d(t){var e,r=("undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{}).location||{},i={},o=typeof(t=t||r);if("blob:"===t.protocol)i=new y(unescape(t.pathname),{});else if("string"===o)for(e in i=new y(t,{}),f)delete i[e];else if("object"===o){for(e in t)e in f||(i[e]=t[e]);void 0===i.slashes&&(i.slashes=a.test(t.href))}return i}function g(t){return"file:"===t||"ftp:"===t||"http:"===t||"https:"===t||"ws:"===t||"wss:"===t}function m(t,e){t=(t=h(t)).replace(s,""),e=e||{};var n,r=l.exec(t),i=r[1]?r[1].toLowerCase():"",o=!!r[2],a=!!r[3],c=0;return o?a?(n=r[2]+r[3]+r[4],c=r[2].length+r[3].length):(n=r[2]+r[4],c=r[2].length):a?(n=r[3]+r[4],c=r[3].length):n=r[4],"file:"===i?c>=2&&(n=n.slice(2)):g(i)?n=r[4]:i?o&&(n=n.slice(2)):c>=2&&g(e.protocol)&&(n=r[4]),{protocol:i,slashes:o||g(i),slashesCount:c,rest:n}}function y(t,e,n){if(t=(t=h(t)).replace(s,""),!(this instanceof y))return new y(t,e,n);var o,a,c,l,f,_,v=p.slice(),x=typeof e,b=this,w=0;for("object"!==x&&"string"!==x&&(n=e,e=null),n&&"function"!=typeof n&&(n=i.parse),o=!(a=m(t||"",e=d(e))).protocol&&!a.slashes,b.slashes=a.slashes||o&&e.slashes,b.protocol=a.protocol||e.protocol||"",t=a.rest,("file:"===a.protocol&&(2!==a.slashesCount||u.test(t))||!a.slashes&&(a.protocol||a.slashesCount<2||!g(b.protocol)))&&(v[3]=[/(.*)/,"pathname"]);w<v.length;w++)"function"!=typeof(l=v[w])?(c=l[0],_=l[1],c!=c?b[_]=t:"string"==typeof c?~(f="@"===c?t.lastIndexOf(c):t.indexOf(c))&&("number"==typeof l[2]?(b[_]=t.slice(0,f),t=t.slice(f+l[2])):(b[_]=t.slice(f),t=t.slice(0,f))):(f=c.exec(t))&&(b[_]=f[1],t=t.slice(0,f.index)),b[_]=b[_]||o&&l[3]&&e[_]||"",l[4]&&(b[_]=b[_].toLowerCase())):t=l(t,b);n&&(b.query=n(b.query)),o&&e.slashes&&"/"!==b.pathname.charAt(0)&&(""!==b.pathname||""!==e.pathname)&&(b.pathname=function(t,e){if(""===t)return e;for(var n=(e||"/").split("/").slice(0,-1).concat(t.split("/")),r=n.length,i=n[r-1],o=!1,s=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),s++):s&&(0===r&&(o=!0),n.splice(r,1),s--);return o&&n.unshift(""),"."!==i&&".."!==i||n.push(""),n.join("/")}(b.pathname,e.pathname)),"/"!==b.pathname.charAt(0)&&g(b.protocol)&&(b.pathname="/"+b.pathname),r(b.port,b.protocol)||(b.host=b.hostname,b.port=""),b.username=b.password="",b.auth&&(~(f=b.auth.indexOf(":"))?(b.username=b.auth.slice(0,f),b.username=encodeURIComponent(decodeURIComponent(b.username)),b.password=b.auth.slice(f+1),b.password=encodeURIComponent(decodeURIComponent(b.password))):b.username=encodeURIComponent(decodeURIComponent(b.auth)),b.auth=b.password?b.username+":"+b.password:b.username),b.origin="file:"!==b.protocol&&g(b.protocol)&&b.host?b.protocol+"//"+b.host:"null",b.href=b.toString()}y.prototype={set:function(t,e,n){var o=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(n||i.parse)(e)),o[t]=e;break;case"port":o[t]=e,r(e,o.protocol)?e&&(o.host=o.hostname+":"+e):(o.host=o.hostname,o[t]="");break;case"hostname":o[t]=e,o.port&&(e+=":"+o.port),o.host=e;break;case"host":o[t]=e,c.test(e)?(e=e.split(":"),o.port=e.pop(),o.hostname=e.join(":")):(o.hostname=e,o.port="");break;case"protocol":o.protocol=e.toLowerCase(),o.slashes=!n;break;case"pathname":case"hash":if(e){var s="pathname"===t?"/":"#";o[t]=e.charAt(0)!==s?s+e:e}else o[t]=e;break;case"username":case"password":o[t]=encodeURIComponent(e);break;case"auth":var a=e.indexOf(":");~a?(o.username=e.slice(0,a),o.username=encodeURIComponent(decodeURIComponent(o.username)),o.password=e.slice(a+1),o.password=encodeURIComponent(decodeURIComponent(o.password))):o.username=encodeURIComponent(decodeURIComponent(e))}for(var l=0;l<p.length;l++){var u=p[l];u[4]&&(o[u[1]]=o[u[1]].toLowerCase())}return o.auth=o.password?o.username+":"+o.password:o.username,o.origin="file:"!==o.protocol&&g(o.protocol)&&o.host?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(t){t&&"function"==typeof t||(t=i.stringify);var e,n=this,r=n.host,o=n.protocol;o&&":"!==o.charAt(o.length-1)&&(o+=":");var s=o+(n.protocol&&n.slashes||g(n.protocol)?"//":"");return n.username?(s+=n.username,n.password&&(s+=":"+n.password),s+="@"):n.password?(s+=":"+n.password,s+="@"):"file:"!==n.protocol&&g(n.protocol)&&!r&&"/"!==n.pathname&&(s+="@"),(":"===r[r.length-1]||c.test(n.hostname)&&!n.port)&&(r+=":"),s+=r+n.pathname,(e="object"==typeof n.query?t(n.query):n.query)&&(s+="?"!==e.charAt(0)?"?"+e:e),n.hash&&(s+=n.hash),s}},y.extractProtocol=m,y.location=d,y.trimLeft=h,y.qs=i,t.exports=y},20384:function(t){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},55955:function(t,e,n){"use strict";var r=n(82584),i=n(48662),o=n(86430),s=n(85692);function a(t){return t.call.bind(t)}var c="undefined"!=typeof BigInt,l="undefined"!=typeof Symbol,u=a(Object.prototype.toString),h=a(Number.prototype.valueOf),p=a(String.prototype.valueOf),f=a(Boolean.prototype.valueOf);if(c)var d=a(BigInt.prototype.valueOf);if(l)var g=a(Symbol.prototype.valueOf);function m(t,e){if("object"!=typeof t)return!1;try{return e(t),!0}catch(t){return!1}}function y(t){return"[object Map]"===u(t)}function _(t){return"[object Set]"===u(t)}function v(t){return"[object WeakMap]"===u(t)}function x(t){return"[object WeakSet]"===u(t)}function b(t){return"[object ArrayBuffer]"===u(t)}function w(t){return"undefined"!=typeof ArrayBuffer&&(b.working?b(t):t instanceof ArrayBuffer)}function E(t){return"[object DataView]"===u(t)}function T(t){return"undefined"!=typeof DataView&&(E.working?E(t):t instanceof DataView)}e.isArgumentsObject=r,e.isGeneratorFunction=i,e.isTypedArray=s,e.isPromise=function(t){return"undefined"!=typeof Promise&&t instanceof Promise||null!==t&&"object"==typeof t&&"function"==typeof t.then&&"function"==typeof t.catch},e.isArrayBufferView=function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):s(t)||T(t)},e.isUint8Array=function(t){return"Uint8Array"===o(t)},e.isUint8ClampedArray=function(t){return"Uint8ClampedArray"===o(t)},e.isUint16Array=function(t){return"Uint16Array"===o(t)},e.isUint32Array=function(t){return"Uint32Array"===o(t)},e.isInt8Array=function(t){return"Int8Array"===o(t)},e.isInt16Array=function(t){return"Int16Array"===o(t)},e.isInt32Array=function(t){return"Int32Array"===o(t)},e.isFloat32Array=function(t){return"Float32Array"===o(t)},e.isFloat64Array=function(t){return"Float64Array"===o(t)},e.isBigInt64Array=function(t){return"BigInt64Array"===o(t)},e.isBigUint64Array=function(t){return"BigUint64Array"===o(t)},y.working="undefined"!=typeof Map&&y(new Map),e.isMap=function(t){return"undefined"!=typeof Map&&(y.working?y(t):t instanceof Map)},_.working="undefined"!=typeof Set&&_(new Set),e.isSet=function(t){return"undefined"!=typeof Set&&(_.working?_(t):t instanceof Set)},v.working="undefined"!=typeof WeakMap&&v(new WeakMap),e.isWeakMap=function(t){return"undefined"!=typeof WeakMap&&(v.working?v(t):t instanceof WeakMap)},x.working="undefined"!=typeof WeakSet&&x(new WeakSet),e.isWeakSet=function(t){return x(t)},b.working="undefined"!=typeof ArrayBuffer&&b(new ArrayBuffer),e.isArrayBuffer=w,E.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&E(new DataView(new ArrayBuffer(1),0,1)),e.isDataView=T;var S="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function k(t){return"[object SharedArrayBuffer]"===u(t)}function A(t){return void 0!==S&&(void 0===k.working&&(k.working=k(new S)),k.working?k(t):t instanceof S)}function M(t){return m(t,h)}function I(t){return m(t,p)}function C(t){return m(t,f)}function O(t){return c&&m(t,d)}function P(t){return l&&m(t,g)}e.isSharedArrayBuffer=A,e.isAsyncFunction=function(t){return"[object AsyncFunction]"===u(t)},e.isMapIterator=function(t){return"[object Map Iterator]"===u(t)},e.isSetIterator=function(t){return"[object Set Iterator]"===u(t)},e.isGeneratorObject=function(t){return"[object Generator]"===u(t)},e.isWebAssemblyCompiledModule=function(t){return"[object WebAssembly.Module]"===u(t)},e.isNumberObject=M,e.isStringObject=I,e.isBooleanObject=C,e.isBigIntObject=O,e.isSymbolObject=P,e.isBoxedPrimitive=function(t){return M(t)||I(t)||C(t)||O(t)||P(t)},e.isAnyArrayBuffer=function(t){return"undefined"!=typeof Uint8Array&&(w(t)||A(t))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(t){Object.defineProperty(e,t,{enumerable:!1,value:function(){throw new Error(t+" is not supported in userland")}})}))},89539:function(t,e,n){var r=n(34155),i=n(25108),o=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return n},s=/%[sdj%]/g;e.format=function(t){if(!x(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(u(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,i=r.length,o=String(t).replace(s,(function(t){if("%%"===t)return"%";if(n>=i)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}})),a=r[n];n<i;a=r[++n])_(a)||!E(a)?o+=" "+a:o+=" "+u(a);return o},e.deprecate=function(t,n){if(void 0!==r&&!0===r.noDeprecation)return t;if(void 0===r)return function(){return e.deprecate(t,n).apply(this,arguments)};var o=!1;return function(){if(!o){if(r.throwDeprecation)throw new Error(n);r.traceDeprecation?i.trace(n):i.error(n),o=!0}return t.apply(this,arguments)}};var a={},c=/^$/;if(r.env.NODE_DEBUG){var l=r.env.NODE_DEBUG;l=l.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),c=new RegExp("^"+l+"$","i")}function u(t,n){var r={seen:[],stylize:p};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),y(n)?r.showHidden=n:n&&e._extend(r,n),b(r.showHidden)&&(r.showHidden=!1),b(r.depth)&&(r.depth=2),b(r.colors)&&(r.colors=!1),b(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=h),f(r,t,r.depth)}function h(t,e){var n=u.styles[e];return n?"["+u.colors[n][0]+"m"+t+"["+u.colors[n][1]+"m":t}function p(t,e){return t}function f(t,n,r){if(t.customInspect&&n&&k(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return x(i)||(i=f(t,i,r)),i}var o=function(t,e){if(b(e))return t.stylize("undefined","undefined");if(x(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(v(e))return t.stylize(""+e,"number");if(y(e))return t.stylize(""+e,"boolean");if(_(e))return t.stylize("null","null")}(t,n);if(o)return o;var s=Object.keys(n),a=function(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(n)),S(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return d(n);if(0===s.length){if(k(n)){var c=n.name?": "+n.name:"";return t.stylize("[Function"+c+"]","special")}if(w(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(T(n))return t.stylize(Date.prototype.toString.call(n),"date");if(S(n))return d(n)}var l,u="",h=!1,p=["{","}"];(m(n)&&(h=!0,p=["[","]"]),k(n))&&(u=" [Function"+(n.name?": "+n.name:"")+"]");return w(n)&&(u=" "+RegExp.prototype.toString.call(n)),T(n)&&(u=" "+Date.prototype.toUTCString.call(n)),S(n)&&(u=" "+d(n)),0!==s.length||h&&0!=n.length?r<0?w(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),l=h?function(t,e,n,r,i){for(var o=[],s=0,a=e.length;s<a;++s)C(e,String(s))?o.push(g(t,e,n,r,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(g(t,e,n,r,i,!0))})),o}(t,n,r,a,s):s.map((function(e){return g(t,n,r,a,e,h)})),t.seen.pop(),function(t,e,n){var r=t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0);if(r>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(l,u,p)):p[0]+u+p[1]}function d(t){return"["+Error.prototype.toString.call(t)+"]"}function g(t,e,n,r,i,o){var s,a,c;if((c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),C(r,i)||(s="["+i+"]"),a||(t.seen.indexOf(c.value)<0?(a=_(n)?f(t,c.value,null):f(t,c.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(t){return"  "+t})).join("\n").slice(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),b(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.slice(1,-1),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function m(t){return Array.isArray(t)}function y(t){return"boolean"==typeof t}function _(t){return null===t}function v(t){return"number"==typeof t}function x(t){return"string"==typeof t}function b(t){return void 0===t}function w(t){return E(t)&&"[object RegExp]"===A(t)}function E(t){return"object"==typeof t&&null!==t}function T(t){return E(t)&&"[object Date]"===A(t)}function S(t){return E(t)&&("[object Error]"===A(t)||t instanceof Error)}function k(t){return"function"==typeof t}function A(t){return Object.prototype.toString.call(t)}function M(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(t=t.toUpperCase(),!a[t])if(c.test(t)){var n=r.pid;a[t]=function(){var r=e.format.apply(e,arguments);i.error("%s %d: %s",t,n,r)}}else a[t]=function(){};return a[t]},e.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.types=n(55955),e.isArray=m,e.isBoolean=y,e.isNull=_,e.isNullOrUndefined=function(t){return null==t},e.isNumber=v,e.isString=x,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=b,e.isRegExp=w,e.types.isRegExp=w,e.isObject=E,e.isDate=T,e.types.isDate=T,e.isError=S,e.types.isNativeError=S,e.isFunction=k,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(20384);var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){var t,n;i.log("%s - %s",(t=new Date,n=[M(t.getHours()),M(t.getMinutes()),M(t.getSeconds())].join(":"),[t.getDate(),I[t.getMonth()],n].join(" ")),e.format.apply(e,arguments))},e.inherits=n(35717),e._extend=function(t,e){if(!e||!E(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t};var O="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function P(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(O&&t[O]){var e;if("function"!=typeof(e=t[O]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,O,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,n,r=new Promise((function(t,r){e=t,n=r})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(t,r){t?n(t):e(r)}));try{t.apply(this,i)}catch(t){n(t)}return r}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),O&&Object.defineProperty(e,O,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,o(t))},e.promisify.custom=O,e.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function e(){for(var e=[],n=0;n<arguments.length;n++)e.push(arguments[n]);var i=e.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};t.apply(this,e).then((function(t){r.nextTick(s.bind(null,null,t))}),(function(t){r.nextTick(P.bind(null,t,s))}))}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,o(t)),e}},86430:function(t,e,n){"use strict";var r=n(94029),i=n(63083),o=n(55559),s=n(21924),a=n(27296),c=s("Object.prototype.toString"),l=n(96410)(),u="undefined"==typeof globalThis?n.g:globalThis,h=i(),p=s("String.prototype.slice"),f=Object.getPrototypeOf,d=s("Array.prototype.indexOf",!0)||function(t,e){for(var n=0;n<t.length;n+=1)if(t[n]===e)return n;return-1},g={__proto__:null};r(h,l&&a&&f?function(t){var e=new u[t];if(Symbol.toStringTag in e){var n=f(e),r=a(n,Symbol.toStringTag);if(!r){var i=f(n);r=a(i,Symbol.toStringTag)}g["$"+t]=o(r.get)}}:function(t){var e=new u[t];g["$"+t]=o(e.slice)});t.exports=function(t){if(!t||"object"!=typeof t)return!1;if(!l){var e=p(c(t),8,-1);return d(h,e)>-1?e:"Object"===e&&function(t){var e=!1;return r(g,(function(n,r){if(!e)try{n(t),e=p(r,1)}catch(t){}})),e}(t)}return a?function(t){var e=!1;return r(g,(function(n,r){if(!e)try{"$"+n(t)===r&&(e=p(r,1))}catch(t){}})),e}(t):null}},24397:function(t){"use strict";t.exports="/app/images/decc014b5cf7ae6cd3b1.png"},17828:function(){},17061:function(t,e,n){var r=n(18698).default;function i(){"use strict";t.exports=i=function(){return n},t.exports.__esModule=!0,t.exports.default=t.exports;var e,n={},o=Object.prototype,s=o.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},c="function"==typeof Symbol?Symbol:{},l=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",h=c.toStringTag||"@@toStringTag";function p(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{p({},"")}catch(e){p=function(t,e,n){return t[e]=n}}function f(t,e,n,r){var i=e&&e.prototype instanceof x?e:x,o=Object.create(i.prototype),s=new L(r||[]);return a(o,"_invoke",{value:I(t,n,s)}),o}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}n.wrap=f;var g="suspendedStart",m="suspendedYield",y="executing",_="completed",v={};function x(){}function b(){}function w(){}var E={};p(E,l,(function(){return this}));var T=Object.getPrototypeOf,S=T&&T(T(D([])));S&&S!==o&&s.call(S,l)&&(E=S);var k=w.prototype=x.prototype=Object.create(E);function A(t){["next","throw","return"].forEach((function(e){p(t,e,(function(t){return this._invoke(e,t)}))}))}function M(t,e){function n(i,o,a,c){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==r(h)&&s.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,c)}))}c(l.arg)}var i;a(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}})}function I(t,n,r){var i=g;return function(o,s){if(i===y)throw new Error("Generator is already running");if(i===_){if("throw"===o)throw s;return{value:e,done:!0}}for(r.method=o,r.arg=s;;){var a=r.delegate;if(a){var c=C(a,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===g)throw i=_,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=y;var l=d(t,n,r);if("normal"===l.type){if(i=r.done?_:m,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=_,r.method="throw",r.arg=l.arg)}}}function C(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var s=o.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function D(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(s.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(r(t)+" is not iterable")}return b.prototype=w,a(k,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:b,configurable:!0}),b.displayName=p(w,h,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,p(t,h,"GeneratorFunction")),t.prototype=Object.create(k),t},n.awrap=function(t){return{__await:t}},A(M.prototype),p(M.prototype,u,(function(){return this})),n.AsyncIterator=M,n.async=function(t,e,r,i,o){void 0===o&&(o=Promise);var s=new M(f(t,e,r,i),o);return n.isGeneratorFunction(e)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},A(k),p(k,h,"Generator"),p(k,l,(function(){return this})),p(k,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},n.values=D,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&s.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=s.call(o,"catchLoc"),l=s.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&s.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:D(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},n}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},18698:function(t){function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},64687:function(t,e,n){var r=n(17061)();t.exports=r;try{regeneratorRuntime=r}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},63083:function(t,e,n){"use strict";var r=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],i="undefined"==typeof globalThis?n.g:globalThis;t.exports=function(){for(var t=[],e=0;e<r.length;e++)"function"==typeof i[r[e]]&&(t[t.length]=r[e]);return t}},15671:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,{Z:function(){return r}})},66274:function(t,e,n){"use strict";function r(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}n.d(e,{Z:function(){return r}})},99359:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=0;function i(t){return"__private_"+r+++"_"+t}},43144:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(49142);function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(0,r.Z)(i.key),i)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}},15785:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(e,{Z:function(){return i}})},49142:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(71002);function i(t){var e=function(t,e){if("object"!==(0,r.Z)(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==(0,r.Z)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===(0,r.Z)(e)?e:String(e)}},71002:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}n.d(e,{Z:function(){return r}})},34446:function(t,e,n){"use strict";n.d(e,{L:function(){return y}});class r{constructor(t){this.versions=t}supportedVersions(){return this.versions.join(",")}protocolVersions(){return this.versions.map((t=>`v${t.replace(".","")}.stomp`))}}r.V1_0="1.0",r.V1_1="1.1",r.V1_2="1.2",r.default=new r([r.V1_2,r.V1_1,r.V1_0]);const i="\n",o="\0";class s{constructor(t){const{command:e,headers:n,body:r,binaryBody:i,escapeHeaderValues:o,skipContentLengthHeader:s}=t;this.command=e,this.headers=Object.assign({},n||{}),i?(this._binaryBody=i,this.isBinaryBody=!0):(this._body=r||"",this.isBinaryBody=!1),this.escapeHeaderValues=o||!1,this.skipContentLengthHeader=s||!1}get body(){return!this._body&&this.isBinaryBody&&(this._body=(new TextDecoder).decode(this._binaryBody)),this._body||""}get binaryBody(){return this._binaryBody||this.isBinaryBody||(this._binaryBody=(new TextEncoder).encode(this._body)),this._binaryBody}static fromRawFrame(t,e){const n={},r=t=>t.replace(/^\s+|\s+$/g,"");for(const i of t.headers.reverse()){i.indexOf(":");const o=r(i[0]);let a=r(i[1]);e&&"CONNECT"!==t.command&&"CONNECTED"!==t.command&&(a=s.hdrValueUnEscape(a)),n[o]=a}return new s({command:t.command,headers:n,binaryBody:t.binaryBody,escapeHeaderValues:e})}toString(){return this.serializeCmdAndHeaders()}serialize(){const t=this.serializeCmdAndHeaders();return this.isBinaryBody?s.toUnit8Array(t,this._binaryBody).buffer:t+this._body+o}serializeCmdAndHeaders(){const t=[this.command];this.skipContentLengthHeader&&delete this.headers["content-length"];for(const e of Object.keys(this.headers||{})){const n=this.headers[e];this.escapeHeaderValues&&"CONNECT"!==this.command&&"CONNECTED"!==this.command?t.push(`${e}:${s.hdrValueEscape(`${n}`)}`):t.push(`${e}:${n}`)}return(this.isBinaryBody||!this.isBodyEmpty()&&!this.skipContentLengthHeader)&&t.push(`content-length:${this.bodyLength()}`),t.join(i)+i+i}isBodyEmpty(){return 0===this.bodyLength()}bodyLength(){const t=this.binaryBody;return t?t.length:0}static sizeOfUTF8(t){return t?(new TextEncoder).encode(t).length:0}static toUnit8Array(t,e){const n=(new TextEncoder).encode(t),r=new Uint8Array([0]),i=new Uint8Array(n.length+e.length+r.length);return i.set(n),i.set(e,n.length),i.set(r,n.length+e.length),i}static marshall(t){return new s(t).serialize()}static hdrValueEscape(t){return t.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/:/g,"\\c")}static hdrValueUnEscape(t){return t.replace(/\\r/g,"\r").replace(/\\n/g,"\n").replace(/\\c/g,":").replace(/\\\\/g,"\\")}}var a=n(25108);class c{constructor(t,e){this.onFrame=t,this.onIncomingPing=e,this._encoder=new TextEncoder,this._decoder=new TextDecoder,this._token=[],this._initState()}parseChunk(t,e=!1){let n;if(n="string"==typeof t?this._encoder.encode(t):new Uint8Array(t),e&&0!==n[n.length-1]){const t=new Uint8Array(n.length+1);t.set(n,0),t[n.length]=0,n=t}for(let t=0;t<n.length;t++){const e=n[t];this._onByte(e)}}_collectFrame(t){0!==t&&13!==t&&(10!==t?(this._onByte=this._collectCommand,this._reinjectByte(t)):this.onIncomingPing())}_collectCommand(t){if(13!==t)return 10===t?(this._results.command=this._consumeTokenAsUTF8(),void(this._onByte=this._collectHeaders)):void this._consumeByte(t)}_collectHeaders(t){13!==t&&(10!==t?(this._onByte=this._collectHeaderKey,this._reinjectByte(t)):this._setupCollectBody())}_reinjectByte(t){this._onByte(t)}_collectHeaderKey(t){if(58===t)return this._headerKey=this._consumeTokenAsUTF8(),void(this._onByte=this._collectHeaderValue);this._consumeByte(t)}_collectHeaderValue(t){if(13!==t)return 10===t?(this._results.headers.push([this._headerKey,this._consumeTokenAsUTF8()]),this._headerKey=void 0,void(this._onByte=this._collectHeaders)):void this._consumeByte(t)}_setupCollectBody(){const t=this._results.headers.filter((t=>"content-length"===t[0]))[0];t?(this._bodyBytesRemaining=parseInt(t[1],10),this._onByte=this._collectBodyFixedSize):this._onByte=this._collectBodyNullTerminated}_collectBodyNullTerminated(t){0!==t?this._consumeByte(t):this._retrievedBody()}_collectBodyFixedSize(t){0!=this._bodyBytesRemaining--?this._consumeByte(t):this._retrievedBody()}_retrievedBody(){this._results.binaryBody=this._consumeTokenAsRaw();try{this.onFrame(this._results)}catch(t){a.log("Ignoring an exception thrown by a frame handler. Original exception: ",t)}this._initState()}_consumeByte(t){this._token.push(t)}_consumeTokenAsUTF8(){return this._decoder.decode(this._consumeTokenAsRaw())}_consumeTokenAsRaw(){const t=new Uint8Array(this._token);return this._token=[],t}_initState(){this._results={command:void 0,headers:[],binaryBody:void 0},this._token=[],this._headerKey=void 0,this._onByte=this._collectFrame}}var l,u;!function(t){t[t.CONNECTING=0]="CONNECTING",t[t.OPEN=1]="OPEN",t[t.CLOSING=2]="CLOSING",t[t.CLOSED=3]="CLOSED"}(l=l||(l={})),function(t){t[t.ACTIVE=0]="ACTIVE",t[t.DEACTIVATING=1]="DEACTIVATING",t[t.INACTIVE=2]="INACTIVE"}(u=u||(u={}));class h{constructor(t,e,n){this._client=t,this._webSocket=e,this._connected=!1,this._serverFrameHandlers={CONNECTED:t=>{this.debug(`connected to server ${t.headers.server}`),this._connected=!0,this._connectedVersion=t.headers.version,this._connectedVersion===r.V1_2&&(this._escapeHeaderValues=!0),this._setupHeartbeat(t.headers),this.onConnect(t)},MESSAGE:t=>{const e=t.headers.subscription,n=this._subscriptions[e]||this.onUnhandledMessage,i=t,o=this,s=this._connectedVersion===r.V1_2?i.headers.ack:i.headers["message-id"];i.ack=(t={})=>o.ack(s,e,t),i.nack=(t={})=>o.nack(s,e,t),n(i)},RECEIPT:t=>{const e=this._receiptWatchers[t.headers["receipt-id"]];e?(e(t),delete this._receiptWatchers[t.headers["receipt-id"]]):this.onUnhandledReceipt(t)},ERROR:t=>{this.onStompError(t)}},this._counter=0,this._subscriptions={},this._receiptWatchers={},this._partialData="",this._escapeHeaderValues=!1,this._lastServerActivityTS=Date.now(),this.debug=n.debug,this.stompVersions=n.stompVersions,this.connectHeaders=n.connectHeaders,this.disconnectHeaders=n.disconnectHeaders,this.heartbeatIncoming=n.heartbeatIncoming,this.heartbeatOutgoing=n.heartbeatOutgoing,this.splitLargeFrames=n.splitLargeFrames,this.maxWebSocketChunkSize=n.maxWebSocketChunkSize,this.forceBinaryWSFrames=n.forceBinaryWSFrames,this.logRawCommunication=n.logRawCommunication,this.appendMissingNULLonIncoming=n.appendMissingNULLonIncoming,this.discardWebsocketOnCommFailure=n.discardWebsocketOnCommFailure,this.onConnect=n.onConnect,this.onDisconnect=n.onDisconnect,this.onStompError=n.onStompError,this.onWebSocketClose=n.onWebSocketClose,this.onWebSocketError=n.onWebSocketError,this.onUnhandledMessage=n.onUnhandledMessage,this.onUnhandledReceipt=n.onUnhandledReceipt,this.onUnhandledFrame=n.onUnhandledFrame}get connectedVersion(){return this._connectedVersion}get connected(){return this._connected}start(){const t=new c((t=>{const e=s.fromRawFrame(t,this._escapeHeaderValues);this.logRawCommunication||this.debug(`<<< ${e}`);(this._serverFrameHandlers[e.command]||this.onUnhandledFrame)(e)}),(()=>{this.debug("<<< PONG")}));this._webSocket.onmessage=e=>{if(this.debug("Received data"),this._lastServerActivityTS=Date.now(),this.logRawCommunication){const t=e.data instanceof ArrayBuffer?(new TextDecoder).decode(e.data):e.data;this.debug(`<<< ${t}`)}t.parseChunk(e.data,this.appendMissingNULLonIncoming)},this._webSocket.onclose=t=>{this.debug(`Connection closed to ${this._webSocket.url}`),this._cleanUp(),this.onWebSocketClose(t)},this._webSocket.onerror=t=>{this.onWebSocketError(t)},this._webSocket.onopen=()=>{const t=Object.assign({},this.connectHeaders);this.debug("Web Socket Opened..."),t["accept-version"]=this.stompVersions.supportedVersions(),t["heart-beat"]=[this.heartbeatOutgoing,this.heartbeatIncoming].join(","),this._transmit({command:"CONNECT",headers:t})}}_setupHeartbeat(t){if(t.version!==r.V1_1&&t.version!==r.V1_2)return;if(!t["heart-beat"])return;const[e,n]=t["heart-beat"].split(",").map((t=>parseInt(t,10)));if(0!==this.heartbeatOutgoing&&0!==n){const t=Math.max(this.heartbeatOutgoing,n);this.debug(`send PING every ${t}ms`),this._pinger=setInterval((()=>{this._webSocket.readyState===l.OPEN&&(this._webSocket.send(i),this.debug(">>> PING"))}),t)}if(0!==this.heartbeatIncoming&&0!==e){const t=Math.max(this.heartbeatIncoming,e);this.debug(`check PONG every ${t}ms`),this._ponger=setInterval((()=>{const e=Date.now()-this._lastServerActivityTS;e>2*t&&(this.debug(`did not receive server activity for the last ${e}ms`),this._closeOrDiscardWebsocket())}),t)}}_closeOrDiscardWebsocket(){this.discardWebsocketOnCommFailure?(this.debug("Discarding websocket, the underlying socket may linger for a while"),this.discardWebsocket()):(this.debug("Issuing close on the websocket"),this._closeWebsocket())}forceDisconnect(){this._webSocket&&(this._webSocket.readyState!==l.CONNECTING&&this._webSocket.readyState!==l.OPEN||this._closeOrDiscardWebsocket())}_closeWebsocket(){this._webSocket.onmessage=()=>{},this._webSocket.close()}discardWebsocket(){var t,e;"function"!=typeof this._webSocket.terminate&&(t=this._webSocket,e=t=>this.debug(t),t.terminate=function(){const n=()=>{};this.onerror=n,this.onmessage=n,this.onopen=n;const r=new Date,i=Math.random().toString().substring(2,8),o=this.onclose;this.onclose=t=>{const n=(new Date).getTime()-r.getTime();e(`Discarded socket (#${i})  closed after ${n}ms, with code/reason: ${t.code}/${t.reason}`)},this.close(),o?.call(t,{code:4001,reason:`Quick discarding socket (#${i}) without waiting for the shutdown sequence.`,wasClean:!1})}),this._webSocket.terminate()}_transmit(t){const{command:e,headers:n,body:r,binaryBody:i,skipContentLengthHeader:o}=t,a=new s({command:e,headers:n,body:r,binaryBody:i,escapeHeaderValues:this._escapeHeaderValues,skipContentLengthHeader:o});let c=a.serialize();if(this.logRawCommunication?this.debug(`>>> ${c}`):this.debug(`>>> ${a}`),this.forceBinaryWSFrames&&"string"==typeof c&&(c=(new TextEncoder).encode(c)),"string"==typeof c&&this.splitLargeFrames){let t=c;for(;t.length>0;){const e=t.substring(0,this.maxWebSocketChunkSize);t=t.substring(this.maxWebSocketChunkSize),this._webSocket.send(e),this.debug(`chunk sent = ${e.length}, remaining = ${t.length}`)}}else this._webSocket.send(c)}dispose(){if(this.connected)try{const t=Object.assign({},this.disconnectHeaders);t.receipt||(t.receipt="close-"+this._counter++),this.watchForReceipt(t.receipt,(t=>{this._closeWebsocket(),this._cleanUp(),this.onDisconnect(t)})),this._transmit({command:"DISCONNECT",headers:t})}catch(t){this.debug(`Ignoring error during disconnect ${t}`)}else this._webSocket.readyState!==l.CONNECTING&&this._webSocket.readyState!==l.OPEN||this._closeWebsocket()}_cleanUp(){this._connected=!1,this._pinger&&(clearInterval(this._pinger),this._pinger=void 0),this._ponger&&(clearInterval(this._ponger),this._ponger=void 0)}publish(t){const{destination:e,headers:n,body:r,binaryBody:i,skipContentLengthHeader:o}=t,s=Object.assign({destination:e},n);this._transmit({command:"SEND",headers:s,body:r,binaryBody:i,skipContentLengthHeader:o})}watchForReceipt(t,e){this._receiptWatchers[t]=e}subscribe(t,e,n={}){(n=Object.assign({},n)).id||(n.id="sub-"+this._counter++),n.destination=t,this._subscriptions[n.id]=e,this._transmit({command:"SUBSCRIBE",headers:n});const r=this;return{id:n.id,unsubscribe:t=>r.unsubscribe(n.id,t)}}unsubscribe(t,e={}){e=Object.assign({},e),delete this._subscriptions[t],e.id=t,this._transmit({command:"UNSUBSCRIBE",headers:e})}begin(t){const e=t||"tx-"+this._counter++;this._transmit({command:"BEGIN",headers:{transaction:e}});const n=this;return{id:e,commit(){n.commit(e)},abort(){n.abort(e)}}}commit(t){this._transmit({command:"COMMIT",headers:{transaction:t}})}abort(t){this._transmit({command:"ABORT",headers:{transaction:t}})}ack(t,e,n={}){n=Object.assign({},n),this._connectedVersion===r.V1_2?n.id=t:n["message-id"]=t,n.subscription=e,this._transmit({command:"ACK",headers:n})}nack(t,e,n={}){return n=Object.assign({},n),this._connectedVersion===r.V1_2?n.id=t:n["message-id"]=t,n.subscription=e,this._transmit({command:"NACK",headers:n})}}class p{constructor(t={}){this.stompVersions=r.default,this.connectionTimeout=0,this.reconnectDelay=5e3,this.heartbeatIncoming=1e4,this.heartbeatOutgoing=1e4,this.splitLargeFrames=!1,this.maxWebSocketChunkSize=8192,this.forceBinaryWSFrames=!1,this.appendMissingNULLonIncoming=!1,this.discardWebsocketOnCommFailure=!1,this.state=u.INACTIVE;const e=()=>{};this.debug=e,this.beforeConnect=e,this.onConnect=e,this.onDisconnect=e,this.onUnhandledMessage=e,this.onUnhandledReceipt=e,this.onUnhandledFrame=e,this.onStompError=e,this.onWebSocketClose=e,this.onWebSocketError=e,this.logRawCommunication=!1,this.onChangeState=e,this.connectHeaders={},this._disconnectHeaders={},this.configure(t)}get webSocket(){return this._stompHandler?._webSocket}get disconnectHeaders(){return this._disconnectHeaders}set disconnectHeaders(t){this._disconnectHeaders=t,this._stompHandler&&(this._stompHandler.disconnectHeaders=this._disconnectHeaders)}get connected(){return!!this._stompHandler&&this._stompHandler.connected}get connectedVersion(){return this._stompHandler?this._stompHandler.connectedVersion:void 0}get active(){return this.state===u.ACTIVE}_changeState(t){this.state=t,this.onChangeState(t)}configure(t){Object.assign(this,t)}activate(){const t=()=>{this.active?this.debug("Already ACTIVE, ignoring request to activate"):(this._changeState(u.ACTIVE),this._connect())};this.state===u.DEACTIVATING?(this.debug("Waiting for deactivation to finish before activating"),this.deactivate().then((()=>{t()}))):t()}async _connect(){if(await this.beforeConnect(),this._stompHandler)return void this.debug("There is already a stompHandler, skipping the call to connect");if(!this.active)return void this.debug("Client has been marked inactive, will not attempt to connect");this.connectionTimeout>0&&(this._connectionWatcher&&clearTimeout(this._connectionWatcher),this._connectionWatcher=setTimeout((()=>{this.connected||(this.debug(`Connection not established in ${this.connectionTimeout}ms, closing socket`),this.forceDisconnect())}),this.connectionTimeout)),this.debug("Opening Web Socket...");const t=this._createWebSocket();this._stompHandler=new h(this,t,{debug:this.debug,stompVersions:this.stompVersions,connectHeaders:this.connectHeaders,disconnectHeaders:this._disconnectHeaders,heartbeatIncoming:this.heartbeatIncoming,heartbeatOutgoing:this.heartbeatOutgoing,splitLargeFrames:this.splitLargeFrames,maxWebSocketChunkSize:this.maxWebSocketChunkSize,forceBinaryWSFrames:this.forceBinaryWSFrames,logRawCommunication:this.logRawCommunication,appendMissingNULLonIncoming:this.appendMissingNULLonIncoming,discardWebsocketOnCommFailure:this.discardWebsocketOnCommFailure,onConnect:t=>{if(this._connectionWatcher&&(clearTimeout(this._connectionWatcher),this._connectionWatcher=void 0),!this.active)return this.debug("STOMP got connected while deactivate was issued, will disconnect now"),void this._disposeStompHandler();this.onConnect(t)},onDisconnect:t=>{this.onDisconnect(t)},onStompError:t=>{this.onStompError(t)},onWebSocketClose:t=>{this._stompHandler=void 0,this.state===u.DEACTIVATING&&this._changeState(u.INACTIVE),this.onWebSocketClose(t),this.active&&this._schedule_reconnect()},onWebSocketError:t=>{this.onWebSocketError(t)},onUnhandledMessage:t=>{this.onUnhandledMessage(t)},onUnhandledReceipt:t=>{this.onUnhandledReceipt(t)},onUnhandledFrame:t=>{this.onUnhandledFrame(t)}}),this._stompHandler.start()}_createWebSocket(){let t;if(this.webSocketFactory)t=this.webSocketFactory();else{if(!this.brokerURL)throw new Error("Either brokerURL or webSocketFactory must be provided");t=new WebSocket(this.brokerURL,this.stompVersions.protocolVersions())}return t.binaryType="arraybuffer",t}_schedule_reconnect(){this.reconnectDelay>0&&(this.debug(`STOMP: scheduling reconnection in ${this.reconnectDelay}ms`),this._reconnector=setTimeout((()=>{this._connect()}),this.reconnectDelay))}async deactivate(t={}){const e=t.force||!1,n=this.active;let r;if(this.state===u.INACTIVE)return this.debug("Already INACTIVE, nothing more to do"),Promise.resolve();if(this._changeState(u.DEACTIVATING),this._reconnector&&(clearTimeout(this._reconnector),this._reconnector=void 0),!this._stompHandler||this.webSocket.readyState===l.CLOSED)return this._changeState(u.INACTIVE),Promise.resolve();{const t=this._stompHandler.onWebSocketClose;r=new Promise(((e,n)=>{this._stompHandler.onWebSocketClose=n=>{t(n),e()}}))}return e?this._stompHandler?.discardWebsocket():n&&this._disposeStompHandler(),r}forceDisconnect(){this._stompHandler&&this._stompHandler.forceDisconnect()}_disposeStompHandler(){this._stompHandler&&this._stompHandler.dispose()}publish(t){this._checkConnection(),this._stompHandler.publish(t)}_checkConnection(){if(!this.connected)throw new TypeError("There is no underlying STOMP connection")}watchForReceipt(t,e){this._checkConnection(),this._stompHandler.watchForReceipt(t,e)}subscribe(t,e,n={}){return this._checkConnection(),this._stompHandler.subscribe(t,e,n)}unsubscribe(t,e={}){this._checkConnection(),this._stompHandler.unsubscribe(t,e)}begin(t){return this._checkConnection(),this._stompHandler.begin(t)}commit(t){this._checkConnection(),this._stompHandler.commit(t)}abort(t){this._checkConnection(),this._stompHandler.abort(t)}ack(t,e,n={}){this._checkConnection(),this._stompHandler.ack(t,e,n)}nack(t,e,n={}){this._checkConnection(),this._stompHandler.nack(t,e,n)}}class f{constructor(t){this.client=t}get outgoing(){return this.client.heartbeatOutgoing}set outgoing(t){this.client.heartbeatOutgoing=t}get incoming(){return this.client.heartbeatIncoming}set incoming(t){this.client.heartbeatIncoming=t}}var d=n(25108);class g extends p{constructor(t){super(),this.maxWebSocketFrameSize=16384,this._heartbeatInfo=new f(this),this.reconnect_delay=0,this.webSocketFactory=t,this.debug=(...t)=>{d.log(...t)}}_parseConnect(...t){let e,n,r,i={};if(t.length<2)throw new Error("Connect requires at least 2 arguments");if("function"==typeof t[1])[i,n,r,e]=t;else if(6===t.length)[i.login,i.passcode,n,r,e,i.host]=t;else[i.login,i.passcode,n,r,e]=t;return[i,n,r,e]}connect(...t){const e=this._parseConnect(...t);e[0]&&(this.connectHeaders=e[0]),e[1]&&(this.onConnect=e[1]),e[2]&&(this.onStompError=e[2]),e[3]&&(this.onWebSocketClose=e[3]),super.activate()}disconnect(t,e={}){t&&(this.onDisconnect=t),this.disconnectHeaders=e,super.deactivate()}send(t,e={},n=""){const r=!1===(e=Object.assign({},e))["content-length"];r&&delete e["content-length"],this.publish({destination:t,headers:e,body:n,skipContentLengthHeader:r})}set reconnect_delay(t){this.reconnectDelay=t}get ws(){return this.webSocket}get version(){return this.connectedVersion}get onreceive(){return this.onUnhandledMessage}set onreceive(t){this.onUnhandledMessage=t}get onreceipt(){return this.onUnhandledReceipt}set onreceipt(t){this.onUnhandledReceipt=t}get heartbeat(){return this._heartbeatInfo}set heartbeat(t){this.heartbeatIncoming=t.incoming,this.heartbeatOutgoing=t.outgoing}}var m=n(25108);class y{static client(t,e){null==e&&(e=r.default.protocolVersions());return new g((()=>new(y.WebSocketClass||WebSocket)(t,e)))}static over(t){let e;return"function"==typeof t?e=t:(m.warn("Stomp.over did not receive a factory, auto reconnect will not work. Please see https://stomp-js.github.io/api-docs/latest/classes/Stomp.html#over"),e=()=>t),new g(e)}}y.WebSocketClass=null},82861:function(t,e,n){"use strict";n.d(e,{Z:function(){return c}});var r=n(87189),i=n(12148),o=n(92964),s=n(1449),a=n(36987);function c(t,e,n){void 0===n&&(n={});for(var c=(0,a.wA)(t).coordinates,l=0,u=0;u<c.length&&!(e>=l&&u===c.length-1);u++){if(l>=e){var h=e-l;if(h){var p=(0,r.Z)(c[u],c[u-1])-180;return(0,i.Z)(c[u],h,p,n)}return(0,s.xm)(c[u])}l+=(0,o.Z)(c[u],c[u+1],n)}return(0,s.xm)(c[c.length-1])}},8624:function(t,e,n){"use strict";n(87189),n(1449),n(31025)},51256:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(39034),i=6378137;function o(t){return(0,r.mm)(t,(function(t,e){return t+function(t){var e,n=0;switch(t.type){case"Polygon":return s(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=s(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)}),0)}function s(t){var e=0;if(t&&t.length>0){e+=Math.abs(a(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(a(t[n]))}return e}function a(t){var e,n,r,o,s,a,l=0,u=t.length;if(u>2){for(a=0;a<u;a++)a===u-2?(r=u-2,o=u-1,s=0):a===u-1?(r=u-1,o=0,s=1):(r=a,o=a+1,s=a+2),e=t[r],n=t[o],l+=(c(t[s][0])-c(e[0]))*Math.sin(c(n[1]));l=l*i*i/2}return l}function c(t){return t*Math.PI/180}},33806:function(t,e,n){"use strict";n(1449),n(36987)},95:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(1449);function i(t,e){void 0===e&&(e={});var n=Number(t[0]),i=Number(t[1]),o=Number(t[2]),s=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[n,i],c=[n,s],l=[o,s],u=[o,i];return(0,r.yu)([[a,u,l,c,a]],e.properties,{bbox:t,id:e.id})}},62096:function(t,e,n){"use strict";var r=n(39034);function i(t){var e=[1/0,1/0,-1/0,-1/0];return(0,r.pZ)(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}i.default=i,e.Z=i},87189:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(1449),i=n(36987);function o(t,e,n){if(void 0===n&&(n={}),!0===n.final)return function(t,e){var n=o(e,t);return n=(n+180)%360}(t,e);var s=(0,i.c9)(t),a=(0,i.c9)(e),c=(0,r.Ht)(s[0]),l=(0,r.Ht)(a[0]),u=(0,r.Ht)(s[1]),h=(0,r.Ht)(a[1]),p=Math.sin(l-c)*Math.cos(h),f=Math.cos(u)*Math.sin(h)-Math.sin(u)*Math.cos(h)*Math.cos(l-c);return(0,r.vi)(Math.atan2(p,f))}},5861:function(t,e,n){"use strict";var r=n(1449),i=n(36987),o=n(54074);e.Z=function(t,e){void 0===e&&(e={});for(var n=e.resolution||1e4,s=e.sharpness||.85,a=[],c=(0,i.wA)(t).coordinates.map((function(t){return{x:t[0],y:t[1]}})),l=new o.Z({duration:n,points:c,sharpness:s}),u=function(t){var e=l.pos(t);Math.floor(t/100)%2==0&&a.push([e.x,e.y])},h=0;h<l.duration;h+=10)u(h);return u(l.duration),(0,r.Tu)(a,e.properties)}},54074:function(t,e){"use strict";var n=function(){function t(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],r=this.points[e+1];this.centers.push({x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:(n.z+r.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(e=0;e<this.centers.length-1;e++){var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return t.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))>t&&(e.push(r),n=i)}return e},t.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},t.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*n);return function(t,e,n,r,i){var o=function(t){var e=t*t,n=e*t;return[n,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:i.x*o[0]+r.x*o[1]+n.x*o[2]+e.x*o[3],y:i.y*o[0]+r.y*o[1]+n.y*o[2]+e.y*o[3],z:i.z*o[0]+r.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])},t}();e.Z=n},77944:function(t,e,n){"use strict";n(36987)},66640:function(t,e,n){"use strict";n.d(e,{ZP:function(){return a}});var r=n(62096),i=n(82037),o=n(86237),s=n(36987);function a(t,e){var n=(0,s.wA)(t),a=(0,s.wA)(e),h=n.type,p=a.type,f=n.coordinates,d=a.coordinates;switch(h){case"Point":if("Point"===p)return l(f,d);throw new Error("feature2 "+p+" geometry not supported");case"MultiPoint":switch(p){case"Point":return function(t,e){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(l(t.coordinates[n],e.coordinates)){r=!0;break}return r}(n,a);case"MultiPoint":return function(t,e){for(var n=0,r=e.coordinates;n<r.length;n++){for(var i=r[n],o=!1,s=0,a=t.coordinates;s<a.length;s++){if(l(i,a[s])){o=!0;break}}if(!o)return!1}return!0}(n,a);default:throw new Error("feature2 "+p+" geometry not supported")}case"LineString":switch(p){case"Point":return(0,o.Z)(a,n,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var n=!1,r=0,i=e.coordinates;r<i.length;r++){var s=i[r];if((0,o.Z)({type:"Point",coordinates:s},t,{ignoreEndVertices:!0})&&(n=!0),!(0,o.Z)({type:"Point",coordinates:s},t,{ignoreEndVertices:!1}))return!1}return n}(n,a);case"MultiPoint":return function(t,e){for(var n=!1,r=0,i=e.coordinates;r<i.length;r++){var s=i[r];if((0,o.Z)(s,t,{ignoreEndVertices:!0})&&(n=!0),!(0,o.Z)(s,t))return!1}if(n)return!0;return!1}(n,a);default:throw new Error("feature2 "+p+" geometry not supported")}case"Polygon":switch(p){case"Point":return(0,i.Z)(a,n,{ignoreBoundary:!0});case"LineString":return function(t,e){var n=!1,o=0,s=(0,r.Z)(t),a=(0,r.Z)(e);if(!c(s,a))return!1;for(;o<e.coordinates.length-1;o++){var l=u(e.coordinates[o],e.coordinates[o+1]);if((0,i.Z)({type:"Point",coordinates:l},t,{ignoreBoundary:!0})){n=!0;break}}return n}(n,a);case"Polygon":return function(t,e){if("Feature"===t.type&&null===t.geometry)return!1;if("Feature"===e.type&&null===e.geometry)return!1;var n=(0,r.Z)(t),o=(0,r.Z)(e);if(!c(n,o))return!1;for(var a=(0,s.wA)(e).coordinates,l=0,u=a;l<u.length;l++)for(var h=0,p=u[l];h<p.length;h++){var f=p[h];if(!(0,i.Z)(f,t))return!1}return!0}(n,a);case"MultiPoint":return function(t,e){for(var n=0,r=e.coordinates;n<r.length;n++){var o=r[n];if(!(0,i.Z)(o,t,{ignoreBoundary:!0}))return!1}return!0}(n,a);default:throw new Error("feature2 "+p+" geometry not supported")}default:throw new Error("feature1 "+h+" geometry not supported")}}function c(t,e){return!(t[0]>e[0])&&(!(t[2]<e[2])&&(!(t[1]>e[1])&&!(t[3]<e[3])))}function l(t,e){return t[0]===e[0]&&t[1]===e[1]}function u(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}},63829:function(t,e,n){"use strict";n(62585),n(39428),n(82037),n(36987),n(1449)},16433:function(t,e,n){"use strict";var r=n(82037),i=n(62585),o=n(39034),s=n(39428);function a(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(l(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function c(t,e){for(var n=0,o=e.coordinates;n<o.length;n++){var a=o[n];if((0,r.Z)(a,t))return!0}return(0,i.Z)(e,(0,s.ZP)(t)).features.length>0}function l(t,e,n){var r=n[0]-t[0],i=n[1]-t[1],o=e[0]-t[0],s=e[1]-t[1];return 0==r*s-i*o&&(Math.abs(o)>=Math.abs(s)?o>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:s>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}e.Z=function(t,e){var n=!0;return(0,o.nG)(t,(function(t){(0,o.nG)(e,(function(e){if(!1===n)return!1;n=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return n=t.coordinates,o=e.coordinates,!(n[0]===o[0]&&n[1]===o[1]);case"LineString":return!a(e,t);case"Polygon":return!(0,r.Z)(t,e)}break;case"LineString":switch(e.type){case"Point":return!a(t,e);case"LineString":return!function(t,e){if((0,i.Z)(t,e).features.length>0)return!0;return!1}(t,e);case"Polygon":return!c(e,t)}break;case"Polygon":switch(e.type){case"Point":return!(0,r.Z)(e,t);case"LineString":return!c(t,e);case"Polygon":return!function(t,e){for(var n=0,o=t.coordinates[0];n<o.length;n++){var a=o[n];if((0,r.Z)(a,e))return!0}for(var c=0,l=e.coordinates[0];c<l.length;c++){var u=l[c];if((0,r.Z)(u,t))return!0}var h=(0,i.Z)((0,s.ZP)(t),(0,s.ZP)(e));if(h.features.length>0)return!0;return!1}(e,t)}}var n,o;return!1}(t.geometry,e.geometry)}))})),n}},61982:function(t,e,n){"use strict";n(29657),n(51062),n(36987)},26916:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(16433),i=n(39034);function o(t,e){var n=!1;return(0,i.nG)(t,(function(t){(0,i.nG)(e,(function(e){if(!0===n)return!0;n=!(0,r.Z)(t.geometry,e.geometry)}))})),n}},3510:function(t,e,n){"use strict";n(39034),n(36987),n(88212),n(62585),n(29657)},22777:function(t,e,n){"use strict";n(51062),n(55271),n(31025),n(1449)},82037:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(36987);function i(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i=(0,r.c9)(t),s=(0,r.wA)(e),a=s.type,c=e.bbox,l=s.coordinates;if(c&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(i,c))return!1;"Polygon"===a&&(l=[l]);for(var u=!1,h=0;h<l.length&&!u;h++)if(o(i,l[h][0],n.ignoreBoundary)){for(var p=!1,f=1;f<l[h].length&&!p;)o(i,l[h][f],!n.ignoreBoundary)&&(p=!0),f++;p||(u=!0)}return u}function o(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var s=e[i][0],a=e[i][1],c=e[o][0],l=e[o][1];if(t[1]*(s-c)+a*(c-t[0])+l*(t[0]-s)==0&&(s-t[0])*(c-t[0])<=0&&(a-t[1])*(l-t[1])<=0)return!n;a>t[1]!=l>t[1]&&t[0]<(c-s)*(t[1]-a)/(l-a)+s&&(r=!r)}return r}},86237:function(t,e,n){"use strict";var r=n(36987);function i(t,e,n,r,i){var o=n[0],s=n[1],a=t[0],c=t[1],l=e[0],u=e[1],h=l-a,p=u-c,f=(n[0]-a)*p-(n[1]-c)*h;if(null!==i){if(Math.abs(f)>i)return!1}else if(0!==f)return!1;return r?"start"===r?Math.abs(h)>=Math.abs(p)?h>0?a<o&&o<=l:l<=o&&o<a:p>0?c<s&&s<=u:u<=s&&s<c:"end"===r?Math.abs(h)>=Math.abs(p)?h>0?a<=o&&o<l:l<o&&o<=a:p>0?c<=s&&s<u:u<s&&s<=c:"both"===r&&(Math.abs(h)>=Math.abs(p)?h>0?a<o&&o<l:l<o&&o<a:p>0?c<s&&s<u:u<s&&s<c):Math.abs(h)>=Math.abs(p)?h>0?a<=o&&o<=l:l<=o&&o<=a:p>0?c<=s&&s<=u:u<=s&&s<=c}e.Z=function(t,e,n){void 0===n&&(n={});for(var o=(0,r.c9)(t),s=(0,r.r7)(e),a=0;a<s.length-1;a++){var c=!1;if(n.ignoreEndVertices&&(0===a&&(c="start"),a===s.length-2&&(c="end"),0===a&&a+1===s.length-1&&(c="both")),i(s[a],s[a+1],o,c,void 0===n.epsilon?null:n.epsilon))return!0}return!1}},63986:function(t,e,n){"use strict";var r=n(62096),i=n(86237),o=n(82037),s=n(36987);function a(t,e){return!(t[0]>e[0])&&(!(t[2]<e[2])&&(!(t[1]>e[1])&&!(t[3]<e[3])))}function c(t,e){return t[0]===e[0]&&t[1]===e[1]}function l(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}e.Z=function(t,e){var n=(0,s.wA)(t),u=(0,s.wA)(e),h=n.type,p=u.type;switch(h){case"Point":switch(p){case"MultiPoint":return function(t,e){var n,r=!1;for(n=0;n<e.coordinates.length;n++)if(c(e.coordinates[n],t.coordinates)){r=!0;break}return r}(n,u);case"LineString":return(0,i.Z)(n,u,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return(0,o.Z)(n,u,{ignoreBoundary:!0});default:throw new Error("feature2 "+p+" geometry not supported")}case"MultiPoint":switch(p){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var r=!1,i=0;i<e.coordinates.length;i++)c(t.coordinates[n],e.coordinates[i])&&(r=!0);if(!r)return!1}return!0}(n,u);case"LineString":return function(t,e){for(var n=!1,r=0;r<t.coordinates.length;r++){if(!(0,i.Z)(t.coordinates[r],e))return!1;n||(n=(0,i.Z)(t.coordinates[r],e,{ignoreEndVertices:!0}))}return n}(n,u);case"Polygon":case"MultiPolygon":return function(t,e){for(var n=!0,r=!1,i=!1,s=0;s<t.coordinates.length;s++){if(!(i=(0,o.Z)(t.coordinates[1],e))){n=!1;break}r||(i=(0,o.Z)(t.coordinates[1],e,{ignoreBoundary:!0}))}return n&&i}(n,u);default:throw new Error("feature2 "+p+" geometry not supported")}case"LineString":switch(p){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!(0,i.Z)(t.coordinates[n],e))return!1;return!0}(n,u);case"Polygon":case"MultiPolygon":return function(t,e){var n=(0,r.Z)(e),i=(0,r.Z)(t);if(!a(n,i))return!1;for(var s=!1,c=0;c<t.coordinates.length-1;c++){if(!(0,o.Z)(t.coordinates[c],e))return!1;if(s||(s=(0,o.Z)(t.coordinates[c],e,{ignoreBoundary:!0})),!s){var u=l(t.coordinates[c],t.coordinates[c+1]);s=(0,o.Z)(u,e,{ignoreBoundary:!0})}}return s}(n,u);default:throw new Error("feature2 "+p+" geometry not supported")}case"Polygon":switch(p){case"Polygon":case"MultiPolygon":return function(t,e){var n=(0,r.Z)(t);if(!a((0,r.Z)(e),n))return!1;for(var i=0;i<t.coordinates[0].length;i++)if(!(0,o.Z)(t.coordinates[0][i],e))return!1;return!0}(n,u);default:throw new Error("feature2 "+p+" geometry not supported")}default:throw new Error("feature1 "+h+" geometry not supported")}}},75859:function(t,e,n){"use strict";var r=n(81012),i=n(20675),o=n(39034),s=n(27140),a=n(1449);function c(t,e,n,p){var f=t.properties||{},d="Feature"===t.type?t.geometry:t;if("GeometryCollection"===d.type){var g=[];return(0,o.on)(t,(function(t){var r=c(t,e,n,p);r&&g.push(r)})),(0,a.uf)(g)}var m=function(t){var e=(0,r.Z)(t).geometry.coordinates,n=[-e[0],-e[1]];return(0,s.aM)().rotate(n).scale(a.rQ)}(d),y={type:d.type,coordinates:u(d.coordinates,m)},_=(new i.GeoJSONReader).read(y),v=(0,a.DL)((0,a.lF)(e,n),"meters"),x=i.BufferOp.bufferOp(_,v,p);if(!l((x=(new i.GeoJSONWriter).write(x)).coordinates)){var b={type:x.type,coordinates:h(x.coordinates,m)};return(0,a.zL)(b,f)}}function l(t){return Array.isArray(t[0])?l(t[0]):isNaN(t[0])}function u(t,e){return"object"!=typeof t[0]?e(t):t.map((function(t){return u(t,e)}))}function h(t,e){return"object"!=typeof t[0]?e.invert(t):t.map((function(t){return h(t,e)}))}e.Z=function(t,e,n){var r=(n=n||{}).units||"kilometers",i=n.steps||8;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var s=[];switch(t.type){case"GeometryCollection":return(0,o.on)(t,(function(t){var n=c(t,e,r,i);n&&s.push(n)})),(0,a.uf)(s);case"FeatureCollection":return(0,o.By)(t,(function(t){var n=c(t,e,r,i);n&&(0,o.By)(n,(function(t){t&&s.push(t)}))})),(0,a.uf)(s)}return c(t,e,r,i)}},63412:function(t,e,n){"use strict";n(39034),n(1449)},44544:function(t,e,n){"use strict";n(63412),n(92964),n(44369),n(1449),n(39034)},32798:function(t,e,n){"use strict";var r=n(36952),i=n(44369),o=n(1449),s=n(36987),a=n(39034);e.Z=function t(e,n){switch(void 0===n&&(n={}),(0,s.oL)(e)){case"Point":return(0,o.xm)((0,s.c9)(e),n.properties);case"Polygon":var c=[];(0,a.pZ)(e,(function(t){c.push(t)}));var l,u,h,p,f,d,g,m,y=(0,i.Z)(e,{properties:n.properties}),_=y.geometry.coordinates,v=0,x=0,b=0,w=c.map((function(t){return[t[0]-_[0],t[1]-_[1]]}));for(l=0;l<c.length-1;l++)p=(u=w[l])[0],d=u[1],f=(h=w[l+1])[0],b+=m=p*(g=h[1])-f*d,v+=(p+f)*m,x+=(d+g)*m;if(0===b)return y;var E=1/(6*(.5*b));return(0,o.xm)([_[0]+E*v,_[1]+E*x],n.properties);default:var T=(0,r.Z)(e);return T?t(T,{properties:n.properties}):(0,i.Z)(e,{properties:n.properties})}}},81012:function(t,e,n){"use strict";var r=n(62096),i=n(1449);e.Z=function(t,e){void 0===e&&(e={});var n=(0,r.Z)(t),o=(n[0]+n[2])/2,s=(n[1]+n[3])/2;return(0,i.xm)([o,s],e.properties,e)}},44369:function(t,e,n){"use strict";var r=n(39034),i=n(1449);e.Z=function(t,e){void 0===e&&(e={});var n=0,o=0,s=0;return(0,r.pZ)(t,(function(t){n+=t[0],o+=t[1],s++}),!0),(0,i.xm)([n/s,o/s],e.properties)}},93395:function(t,e,n){"use strict";var r=n(12148),i=n(1449);e.Z=function(t,e,n){void 0===n&&(n={});for(var o=n.steps||64,s=n.properties?n.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},a=[],c=0;c<o;c++)a.push((0,r.Z)(t,e,-360*c/o,n).geometry.coordinates);return a.push(a[0]),(0,i.yu)([a],s)}},51062:function(t,e,n){"use strict";n(1449),n(36987)},17769:function(t,e,n){"use strict";n(92964),n(39034),n(1449),n(52606)},28046:function(t,e,n){"use strict";n(39034),n(21160)},10294:function(t,e,n){"use strict";n(39034),n(1449)},55314:function(t,e,n){"use strict";n(62096),n(82037),n(65510)},69169:function(t,e,n){"use strict";n(1449),n(39034)},2187:function(t,e,n){"use strict";n(92964),n(1449),n(39034),n(16066),n(1226)},1226:function(t,e,n){"use strict";n(1449),n(36987),n(39034),n(96403),n(72183)},96403:function(t,e,n){"use strict";n(1449),n(36987),n(39034)},72183:function(t,e,n){"use strict";n(1449),n(36987),n(39034),n(12485)},36952:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r=n(1449),i=n(39034),o=n(72273);function s(t,e){void 0===e&&(e={}),e.concavity=e.concavity||1/0;var n=[];if((0,i.pZ)(t,(function(t){n.push([t[0],t[1]])})),!n.length)return null;var s=o(n,e.concavity);return s.length>3?(0,r.yu)([s]):null}},12148:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(1449),i=n(36987);function o(t,e,n,o){void 0===o&&(o={});var s=(0,i.c9)(t),a=(0,r.Ht)(s[0]),c=(0,r.Ht)(s[1]),l=(0,r.Ht)(n),u=(0,r.lF)(e,o.units),h=Math.asin(Math.sin(c)*Math.cos(u)+Math.cos(c)*Math.sin(u)*Math.cos(l)),p=a+Math.atan2(Math.sin(l)*Math.sin(u)*Math.cos(c),Math.cos(u)-Math.sin(c)*Math.sin(h)),f=(0,r.vi)(p),d=(0,r.vi)(h);return(0,r.xm)([f,d],o.properties)}},97973:function(t,e,n){"use strict";n(32676),n(1449),n(36987)},69382:function(t,e,n){"use strict";n(1449),n(36987),n(39034),n(63938),n(32676)},88002:function(t,e,n){"use strict";n(44369),n(36987),n(39034)},92964:function(t,e,n){"use strict";var r=n(36987),i=n(1449);e.Z=function(t,e,n){void 0===n&&(n={});var o=(0,r.c9)(t),s=(0,r.c9)(e),a=(0,i.Ht)(s[1]-o[1]),c=(0,i.Ht)(s[0]-o[0]),l=(0,i.Ht)(o[1]),u=(0,i.Ht)(s[1]),h=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(c/2),2)*Math.cos(l)*Math.cos(u);return(0,i.DL)(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)),n.units)}},40890:function(t,e,n){"use strict";n(1449),n(26566),n(85294),n(36987)},78445:function(t,e,n){"use strict";var r=n(62096),i=n(95);e.Z=function(t){return(0,i.Z)((0,r.Z)(t))}},11821:function(t,e,n){"use strict";n(39034),n(1449)},63938:function(t,e,n){"use strict";n(39034),n(1449)},76402:function(t,e,n){"use strict";n(39034),n(1449)},98772:function(t,e,n){"use strict";n(36987);var r=Math.PI/180,i=180/Math.PI,o=function(t,e){this.lon=t,this.lat=e,this.x=r*t,this.y=r*e};o.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},o.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new o(e,t)};var s=function(){this.coords=[],this.length=0};s.prototype.move_to=function(t){this.length++,this.coords.push(t)};var a=function(t){this.properties=t||{},this.geometries=[]};a.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},a.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var c=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new o(t.x,t.y),this.end=new o(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,i=this.start.y-this.end.y,s=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(s)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};c.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),o=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),s=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),a=i*Math.atan2(s,Math.sqrt(Math.pow(r,2)+Math.pow(o,2)));return[i*Math.atan2(o,r),a]},c.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),i=0;i<t;++i){var o=r*i,c=this.interpolate(o);n.push(c)}for(var l=!1,u=0,h=e&&e.offset?e.offset:10,p=180-h,f=-180+h,d=360-h,g=1;g<n.length;++g){var m=n[g-1][0],y=n[g][0],_=Math.abs(y-m);_>d&&(y>p&&m<f||m>p&&y<f)?l=!0:_>u&&(u=_)}var v=[];if(l&&u<h){var x=[];v.push(x);for(var b=0;b<n.length;++b){var w=parseFloat(n[b][0]);if(b>0&&Math.abs(w-n[b-1][0])>d){var E=parseFloat(n[b-1][0]),T=parseFloat(n[b-1][1]),S=parseFloat(n[b][0]),k=parseFloat(n[b][1]);if(E>-180&&E<f&&180===S&&b+1<n.length&&n[b-1][0]>-180&&n[b-1][0]<f){x.push([-180,n[b][1]]),b++,x.push([n[b][0],n[b][1]]);continue}if(E>p&&E<180&&-180===S&&b+1<n.length&&n[b-1][0]>p&&n[b-1][0]<180){x.push([180,n[b][1]]),b++,x.push([n[b][0],n[b][1]]);continue}if(E<f&&S>p){var A=E;E=S,S=A;var M=T;T=k,k=M}if(E>p&&S<f&&(S+=360),E<=180&&S>=180&&E<S){var I=(180-E)/(S-E),C=I*k+(1-I)*T;x.push([n[b-1][0]>p?180:-180,C]),(x=[]).push([n[b-1][0]>p?-180:180,C]),v.push(x)}else x=[],v.push(x);x.push([w,n[b][1]])}else x.push([n[b][0],n[b][1]])}}else{var O=[];v.push(O);for(var P=0;P<n.length;++P)O.push([n[P][0],n[P][1]])}for(var L=new a(this.properties),D=0;D<v.length;++D){var R=new s;L.geometries.push(R);for(var N=v[D],j=0;j<N.length;++j)R.move_to(N[j])}return L}},1449:function(t,e,n){"use strict";n.d(e,{DL:function(){return f},Ht:function(){return m},Tu:function(){return l},Ym:function(){return a},_R:function(){return h},lF:function(){return d},ot:function(){return p},rQ:function(){return r},uf:function(){return u},vi:function(){return g},xm:function(){return s},yu:function(){return c},zL:function(){return o}});var r=6371008.8,i={centimeters:100*r,centimetres:100*r,degrees:r/111325,feet:3.28084*r,inches:39.37*r,kilometers:r/1e3,kilometres:r/1e3,meters:r,metres:r,miles:r/1609.344,millimeters:1e3*r,millimetres:1e3*r,nauticalmiles:r/1852,radians:1,yards:1.0936*r};function o(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function s(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!y(t[0])||!y(t[1]))throw new Error("coordinates must contain numbers");return o({type:"Point",coordinates:t},e,n)}function a(t,e,n){return void 0===n&&(n={}),u(t.map((function(t){return s(t,e)})),n)}function c(t,e,n){void 0===n&&(n={});for(var r=0,i=t;r<i.length;r++){var s=i[r];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return o({type:"Polygon",coordinates:t},e,n)}function l(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return o({type:"LineString",coordinates:t},e,n)}function u(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function h(t,e,n){return void 0===n&&(n={}),o({type:"MultiLineString",coordinates:t},e,n)}function p(t,e,n){return void 0===n&&(n={}),o({type:"MultiPoint",coordinates:t},e,n)}function f(t,e){void 0===e&&(e="kilometers");var n=i[e];if(!n)throw new Error(e+" units is invalid");return t*n}function d(t,e){void 0===e&&(e="kilometers");var n=i[e];if(!n)throw new Error(e+" units is invalid");return t/n}function g(t){return 180*(t%(2*Math.PI))/Math.PI}function m(t){return t%360*Math.PI/180}function y(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}},76791:function(t,e,n){"use strict";n(92964),n(79590),n(1449)},41384:function(t,e,n){"use strict";n(62096),n(76791),n(35360),n(92964),n(44369),n(24143),n(22052),n(1449),n(39034),n(36987)},79590:function(t,e,n){"use strict";n(1449),n(36987),n(32676)},36987:function(t,e,n){"use strict";n.d(e,{c9:function(){return r},nK:function(){return o},oL:function(){return a},r7:function(){return i},wA:function(){return s}});n(1449);function r(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function i(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function o(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function s(t){return"Feature"===t.type?t.geometry:t}function a(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}},27945:function(t,e,n){"use strict";n(62096),n(51256),n(82037),n(11821),n(36987),n(1449),n(27418),n(39034),n(25108);var r=[],i=[],o=[],s=[],a=[],c=[],l=[],u=[],h=[],p=[],f=[],d=[],g=[],m=[],y=[],_=[],v=[],x=[],b=[],w=[],E=[],T=[],S=[],k=[];l[85]=p[85]=-1,u[85]=f[85]=0,h[85]=d[85]=1,b[85]=T[85]=1,w[85]=S[85]=0,E[85]=k[85]=1,r[85]=s[85]=0,i[85]=a[85]=-1,o[85]=y[85]=0,_[85]=g[85]=0,v[85]=m[85]=1,c[85]=x[85]=1,T[1]=T[169]=0,S[1]=S[169]=-1,k[1]=k[169]=0,g[1]=g[169]=-1,m[1]=m[169]=0,y[1]=y[169]=0,p[4]=p[166]=0,f[4]=f[166]=-1,d[4]=d[166]=1,_[4]=_[166]=1,v[4]=v[166]=0,x[4]=x[166]=0,l[16]=l[154]=0,u[16]=u[154]=1,h[16]=h[154]=1,s[16]=s[154]=1,a[16]=a[154]=0,c[16]=c[154]=1,b[64]=b[106]=0,w[64]=w[106]=1,E[64]=E[106]=0,r[64]=r[106]=-1,i[64]=i[106]=0,o[64]=o[106]=1,b[2]=b[168]=0,w[2]=w[168]=-1,E[2]=E[168]=1,T[2]=T[168]=0,S[2]=S[168]=-1,k[2]=k[168]=0,g[2]=g[168]=-1,m[2]=m[168]=0,y[2]=y[168]=0,_[2]=_[168]=-1,v[2]=v[168]=0,x[2]=x[168]=1,l[8]=l[162]=0,u[8]=u[162]=-1,h[8]=h[162]=0,p[8]=p[162]=0,f[8]=f[162]=-1,d[8]=d[162]=1,g[8]=g[162]=1,m[8]=m[162]=0,y[8]=y[162]=1,_[8]=_[162]=1,v[8]=v[162]=0,x[8]=x[162]=0,l[32]=l[138]=0,u[32]=u[138]=1,h[32]=h[138]=1,p[32]=p[138]=0,f[32]=f[138]=1,d[32]=d[138]=0,r[32]=r[138]=1,i[32]=i[138]=0,o[32]=o[138]=0,s[32]=s[138]=1,a[32]=a[138]=0,c[32]=c[138]=1,T[128]=T[42]=0,S[128]=S[42]=1,k[128]=k[42]=1,b[128]=b[42]=0,w[128]=w[42]=1,E[128]=E[42]=0,r[128]=r[42]=-1,i[128]=i[42]=0,o[128]=o[42]=1,s[128]=s[42]=-1,a[128]=a[42]=0,c[128]=c[42]=0,p[5]=p[165]=-1,f[5]=f[165]=0,d[5]=d[165]=0,T[5]=T[165]=1,S[5]=S[165]=0,k[5]=k[165]=0,_[20]=_[150]=0,v[20]=v[150]=1,x[20]=x[150]=1,s[20]=s[150]=0,a[20]=a[150]=-1,c[20]=c[150]=1,l[80]=l[90]=-1,u[80]=u[90]=0,h[80]=h[90]=1,b[80]=b[90]=1,w[80]=w[90]=0,E[80]=E[90]=1,g[65]=g[105]=0,m[65]=m[105]=1,y[65]=y[105]=0,r[65]=r[105]=0,i[65]=i[105]=-1,o[65]=o[105]=0,l[160]=l[10]=-1,u[160]=u[10]=0,h[160]=h[10]=1,p[160]=p[10]=-1,f[160]=f[10]=0,d[160]=d[10]=0,T[160]=T[10]=1,S[160]=S[10]=0,k[160]=k[10]=0,b[160]=b[10]=1,w[160]=w[10]=0,E[160]=E[10]=1,_[130]=_[40]=0,v[130]=v[40]=1,x[130]=x[40]=1,g[130]=g[40]=0,m[130]=m[40]=1,y[130]=y[40]=0,r[130]=r[40]=0,i[130]=i[40]=-1,o[130]=o[40]=0,s[130]=s[40]=0,a[130]=a[40]=-1,c[130]=c[40]=1,p[37]=p[133]=0,f[37]=f[133]=1,d[37]=d[133]=1,T[37]=T[133]=0,S[37]=S[133]=1,k[37]=k[133]=0,r[37]=r[133]=-1,i[37]=i[133]=0,o[37]=o[133]=0,s[37]=s[133]=1,a[37]=a[133]=0,c[37]=c[133]=0,_[148]=_[22]=-1,v[148]=v[22]=0,x[148]=x[22]=0,T[148]=T[22]=0,S[148]=S[22]=-1,k[148]=k[22]=1,b[148]=b[22]=0,w[148]=w[22]=1,E[148]=E[22]=1,s[148]=s[22]=-1,a[148]=a[22]=0,c[148]=c[22]=1,l[82]=l[88]=0,u[82]=u[88]=-1,h[82]=h[88]=1,_[82]=_[88]=1,v[82]=v[88]=0,x[82]=x[88]=1,g[82]=g[88]=-1,m[82]=m[88]=0,y[82]=y[88]=1,b[82]=b[88]=0,w[82]=w[88]=-1,E[82]=E[88]=0,l[73]=l[97]=0,u[73]=u[97]=1,h[73]=h[97]=0,p[73]=p[97]=0,f[73]=f[97]=-1,d[73]=d[97]=0,g[73]=g[97]=1,m[73]=m[97]=0,y[73]=y[97]=0,r[73]=r[97]=1,i[73]=i[97]=0,o[73]=o[97]=1,l[145]=l[25]=0,u[145]=u[25]=-1,h[145]=h[25]=0,g[145]=g[25]=1,m[145]=m[25]=0,y[145]=y[25]=1,T[145]=T[25]=0,S[145]=S[25]=1,k[145]=k[25]=1,s[145]=s[25]=-1,a[145]=a[25]=0,c[145]=c[25]=0,p[70]=p[100]=0,f[70]=f[100]=1,d[70]=d[100]=0,_[70]=_[100]=-1,v[70]=v[100]=0,x[70]=x[100]=1,b[70]=b[100]=0,w[70]=w[100]=-1,E[70]=E[100]=1,r[70]=r[100]=1,i[70]=i[100]=0,o[70]=o[100]=0,p[101]=p[69]=0,f[101]=f[69]=1,d[101]=d[69]=0,r[101]=r[69]=1,i[101]=i[69]=0,o[101]=o[69]=0,T[149]=T[21]=0,S[149]=S[21]=1,k[149]=k[21]=1,s[149]=s[21]=-1,a[149]=a[21]=0,c[149]=c[21]=0,_[86]=_[84]=-1,v[86]=v[84]=0,x[86]=x[84]=1,b[86]=b[84]=0,w[86]=w[84]=-1,E[86]=E[84]=1,l[89]=l[81]=0,u[89]=u[81]=-1,h[89]=h[81]=0,g[89]=g[81]=1,m[89]=m[81]=0,y[89]=y[81]=1,l[96]=l[74]=0,u[96]=u[74]=1,h[96]=h[74]=0,p[96]=p[74]=-1,f[96]=f[74]=0,d[96]=d[74]=1,b[96]=b[74]=1,w[96]=w[74]=0,E[96]=E[74]=0,r[96]=r[74]=1,i[96]=i[74]=0,o[96]=o[74]=1,l[24]=l[146]=0,u[24]=u[146]=-1,h[24]=h[146]=1,_[24]=_[146]=1,v[24]=v[146]=0,x[24]=x[146]=1,g[24]=g[146]=0,m[24]=m[146]=1,y[24]=y[146]=1,s[24]=s[146]=0,a[24]=a[146]=-1,c[24]=c[146]=0,p[6]=p[164]=-1,f[6]=f[164]=0,d[6]=d[164]=1,_[6]=_[164]=-1,v[6]=v[164]=0,x[6]=x[164]=0,T[6]=T[164]=0,S[6]=S[164]=-1,k[6]=k[164]=1,b[6]=b[164]=1,w[6]=w[164]=0,E[6]=E[164]=0,g[129]=g[41]=0,m[129]=m[41]=1,y[129]=y[41]=1,T[129]=T[41]=0,S[129]=S[41]=1,k[129]=k[41]=0,r[129]=r[41]=-1,i[129]=i[41]=0,o[129]=o[41]=0,s[129]=s[41]=0,a[129]=a[41]=-1,c[129]=c[41]=0,_[66]=_[104]=0,v[66]=v[104]=1,x[66]=x[104]=0,g[66]=g[104]=-1,m[66]=m[104]=0,y[66]=y[104]=1,b[66]=b[104]=0,w[66]=w[104]=-1,E[66]=E[104]=0,r[66]=r[104]=0,i[66]=i[104]=-1,o[66]=o[104]=1,l[144]=l[26]=-1,u[144]=u[26]=0,h[144]=h[26]=0,T[144]=T[26]=1,S[144]=S[26]=0,k[144]=k[26]=1,b[144]=b[26]=0,w[144]=w[26]=1,E[144]=E[26]=1,s[144]=s[26]=-1,a[144]=a[26]=0,c[144]=c[26]=1,p[36]=p[134]=0,f[36]=f[134]=1,d[36]=d[134]=1,_[36]=_[134]=0,v[36]=v[134]=1,x[36]=x[134]=0,r[36]=r[134]=0,i[36]=i[134]=-1,o[36]=o[134]=1,s[36]=s[134]=1,a[36]=a[134]=0,c[36]=c[134]=0,l[9]=l[161]=-1,u[9]=u[161]=0,h[9]=h[161]=0,p[9]=p[161]=0,f[9]=f[161]=-1,d[9]=d[161]=0,g[9]=g[161]=1,m[9]=m[161]=0,y[9]=y[161]=0,T[9]=T[161]=1,S[9]=S[161]=0,k[9]=k[161]=1,l[136]=0,u[136]=1,h[136]=1,p[136]=0,f[136]=1,d[136]=0,_[136]=-1,v[136]=0,x[136]=1,g[136]=-1,m[136]=0,y[136]=0,T[136]=0,S[136]=-1,k[136]=0,b[136]=0,w[136]=-1,E[136]=1,r[136]=1,i[136]=0,o[136]=0,s[136]=1,a[136]=0,c[136]=1,l[34]=0,u[34]=-1,h[34]=0,p[34]=0,f[34]=-1,d[34]=1,_[34]=1,v[34]=0,x[34]=0,g[34]=1,m[34]=0,y[34]=1,T[34]=0,S[34]=1,k[34]=1,b[34]=0,w[34]=1,E[34]=0,r[34]=-1,i[34]=0,o[34]=1,s[34]=-1,a[34]=0,c[34]=0,l[35]=0,u[35]=1,h[35]=1,p[35]=0,f[35]=-1,d[35]=1,_[35]=1,v[35]=0,x[35]=0,g[35]=-1,m[35]=0,y[35]=0,T[35]=0,S[35]=-1,k[35]=0,b[35]=0,w[35]=1,E[35]=0,r[35]=-1,i[35]=0,o[35]=1,s[35]=1,a[35]=0,c[35]=1,l[153]=0,u[153]=1,h[153]=1,g[153]=-1,m[153]=0,y[153]=0,T[153]=0,S[153]=-1,k[153]=0,s[153]=1,a[153]=0,c[153]=1,p[102]=0,f[102]=-1,d[102]=1,_[102]=1,v[102]=0,x[102]=0,b[102]=0,w[102]=1,E[102]=0,r[102]=-1,i[102]=0,o[102]=1,l[155]=0,u[155]=-1,h[155]=0,g[155]=1,m[155]=0,y[155]=1,T[155]=0,S[155]=1,k[155]=1,s[155]=-1,a[155]=0,c[155]=0,p[103]=0,f[103]=1,d[103]=0,_[103]=-1,v[103]=0,x[103]=1,b[103]=0,w[103]=-1,E[103]=1,r[103]=1,i[103]=0,o[103]=0,l[152]=0,u[152]=1,h[152]=1,_[152]=-1,v[152]=0,x[152]=1,g[152]=-1,m[152]=0,y[152]=0,T[152]=0,S[152]=-1,k[152]=0,b[152]=0,w[152]=-1,E[152]=1,s[152]=1,a[152]=0,c[152]=1,l[156]=0,u[156]=-1,h[156]=1,_[156]=1,v[156]=0,x[156]=1,g[156]=-1,m[156]=0,y[156]=0,T[156]=0,S[156]=-1,k[156]=0,b[156]=0,w[156]=1,E[156]=1,s[156]=-1,a[156]=0,c[156]=1,l[137]=0,u[137]=1,h[137]=1,p[137]=0,f[137]=1,d[137]=0,g[137]=-1,m[137]=0,y[137]=0,T[137]=0,S[137]=-1,k[137]=0,r[137]=1,i[137]=0,o[137]=0,s[137]=1,a[137]=0,c[137]=1,l[139]=0,u[139]=1,h[139]=1,p[139]=0,f[139]=-1,d[139]=0,g[139]=1,m[139]=0,y[139]=0,T[139]=0,S[139]=1,k[139]=0,r[139]=-1,i[139]=0,o[139]=0,s[139]=1,a[139]=0,c[139]=1,l[98]=0,u[98]=-1,h[98]=0,p[98]=0,f[98]=-1,d[98]=1,_[98]=1,v[98]=0,x[98]=0,g[98]=1,m[98]=0,y[98]=1,b[98]=0,w[98]=1,E[98]=0,r[98]=-1,i[98]=0,o[98]=1,l[99]=0,u[99]=1,h[99]=0,p[99]=0,f[99]=-1,d[99]=1,_[99]=1,v[99]=0,x[99]=0,g[99]=-1,m[99]=0,y[99]=1,b[99]=0,w[99]=-1,E[99]=0,r[99]=1,i[99]=0,o[99]=1,p[38]=0,f[38]=-1,d[38]=1,_[38]=1,v[38]=0,x[38]=0,T[38]=0,S[38]=1,k[38]=1,b[38]=0,w[38]=1,E[38]=0,r[38]=-1,i[38]=0,o[38]=1,s[38]=-1,a[38]=0,c[38]=0,p[39]=0,f[39]=1,d[39]=1,_[39]=-1,v[39]=0,x[39]=0,T[39]=0,S[39]=-1,k[39]=1,b[39]=0,w[39]=1,E[39]=0,r[39]=-1,i[39]=0,o[39]=1,s[39]=1,a[39]=0,c[39]=0;var A=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},M=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},I=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},C=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},O=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},P=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},L=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},D=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},R=[],N=[],j=[],z=[],B=[],F=[],U=[],V=[];z[1]=B[1]=18,z[169]=B[169]=18,j[4]=N[4]=12,j[166]=N[166]=12,R[16]=V[16]=4,R[154]=V[154]=4,F[64]=U[64]=22,F[106]=U[106]=22,j[2]=F[2]=17,z[2]=B[2]=18,j[168]=F[168]=17,z[168]=B[168]=18,R[8]=z[8]=9,N[8]=j[8]=12,R[162]=z[162]=9,N[162]=j[162]=12,R[32]=V[32]=4,N[32]=U[32]=1,R[138]=V[138]=4,N[138]=U[138]=1,B[128]=V[128]=21,F[128]=U[128]=22,B[42]=V[42]=21,F[42]=U[42]=22,N[5]=B[5]=14,N[165]=B[165]=14,j[20]=V[20]=6,j[150]=V[150]=6,R[80]=F[80]=11,R[90]=F[90]=11,z[65]=U[65]=3,z[105]=U[105]=3,R[160]=F[160]=11,N[160]=B[160]=14,R[10]=F[10]=11,N[10]=B[10]=14,j[130]=V[130]=6,z[130]=U[130]=3,j[40]=V[40]=6,z[40]=U[40]=3,N[101]=U[101]=1,N[69]=U[69]=1,B[149]=V[149]=21,B[21]=V[21]=21,j[86]=F[86]=17,j[84]=F[84]=17,R[89]=z[89]=9,R[81]=z[81]=9,R[96]=U[96]=0,N[96]=F[96]=15,R[74]=U[74]=0,N[74]=F[74]=15,R[24]=j[24]=8,z[24]=V[24]=7,R[146]=j[146]=8,z[146]=V[146]=7,N[6]=F[6]=15,j[6]=B[6]=16,N[164]=F[164]=15,j[164]=B[164]=16,z[129]=V[129]=7,B[129]=U[129]=20,z[41]=V[41]=7,B[41]=U[41]=20,j[66]=U[66]=2,z[66]=F[66]=19,j[104]=U[104]=2,z[104]=F[104]=19,R[144]=B[144]=10,F[144]=V[144]=23,R[26]=B[26]=10,F[26]=V[26]=23,N[36]=V[36]=5,j[36]=U[36]=2,N[134]=V[134]=5,j[134]=U[134]=2,R[9]=B[9]=10,N[9]=z[9]=13,R[161]=B[161]=10,N[161]=z[161]=13,N[37]=V[37]=5,B[37]=U[37]=20,N[133]=V[133]=5,B[133]=U[133]=20,j[148]=B[148]=16,F[148]=V[148]=23,j[22]=B[22]=16,F[22]=V[22]=23,R[82]=j[82]=8,z[82]=F[82]=19,R[88]=j[88]=8,z[88]=F[88]=19,R[73]=U[73]=0,N[73]=z[73]=13,R[97]=U[97]=0,N[97]=z[97]=13,R[145]=z[145]=9,B[145]=V[145]=21,R[25]=z[25]=9,B[25]=V[25]=21,N[70]=U[70]=1,j[70]=F[70]=17,N[100]=U[100]=1,j[100]=F[100]=17,R[34]=z[34]=9,N[34]=j[34]=12,B[34]=V[34]=21,F[34]=U[34]=22,R[136]=V[136]=4,N[136]=U[136]=1,j[136]=F[136]=17,z[136]=B[136]=18,R[35]=V[35]=4,N[35]=j[35]=12,z[35]=B[35]=18,F[35]=U[35]=22,R[153]=V[153]=4,z[153]=B[153]=18,N[102]=j[102]=12,F[102]=U[102]=22,R[155]=z[155]=9,B[155]=V[155]=23,N[103]=U[103]=1,j[103]=F[103]=17,R[152]=V[152]=4,j[152]=F[152]=17,z[152]=B[152]=18,R[156]=j[156]=8,z[156]=B[156]=18,F[156]=V[156]=23,R[137]=V[137]=4,N[137]=U[137]=1,z[137]=B[137]=18,R[139]=V[139]=4,N[139]=z[139]=13,B[139]=U[139]=20,R[98]=z[98]=9,N[98]=j[98]=12,F[98]=U[98]=22,R[99]=U[99]=0,N[99]=j[99]=12,z[99]=F[99]=19,N[38]=j[38]=12,B[38]=V[38]=21,F[38]=U[38]=22,N[39]=V[39]=5,j[39]=B[39]=16,F[39]=U[39]=22;var q=[];q[1]=q[169]=A,q[4]=q[166]=M,q[16]=q[154]=I,q[64]=q[106]=C,q[168]=q[2]=O,q[162]=q[8]=P,q[138]=q[32]=L,q[42]=q[128]=D,q[5]=q[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},q[20]=q[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},q[80]=q[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},q[65]=q[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},q[160]=q[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},q[130]=q[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},q[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},q[101]=q[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},q[149]=q[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},q[86]=q[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},q[89]=q[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},q[96]=q[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},q[24]=q[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},q[6]=q[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},q[129]=q[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},q[66]=q[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},q[144]=q[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},q[36]=q[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},q[9]=q[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},q[37]=q[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},q[148]=q[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},q[82]=q[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},q[73]=q[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},q[145]=q[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},q[70]=q[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},q[34]=function(t){return[D(t),P(t)]},q[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},q[136]=function(t){return[L(t),O(t)]},q[153]=function(t){return[I(t),A(t)]},q[102]=function(t){return[M(t),C(t)]},q[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},q[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},q[152]=function(t){return[I(t),O(t)]},q[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},q[137]=function(t){return[L(t),A(t)]},q[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},q[98]=function(t){return[P(t),C(t)]},q[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},q[38]=function(t){return[M(t),D(t)]},q[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]}},5509:function(t,e,n){"use strict";n(62096),n(39034),n(36987),n(1449),n(27418),n(25108)},32700:function(t,e,n){"use strict";n(1449)},5776:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(92964),i=n(39034);function o(t,e){return void 0===e&&(e={}),(0,i.hE)(t,(function(t,n){var i=n.geometry.coordinates;return t+(0,r.Z)(i[0],i[1],e)}),0)}},52515:function(t,e,n){"use strict";n(93395),n(12148),n(1449)},25841:function(t,e,n){"use strict";n(5776),n(45882),n(39034),n(1449)},62585:function(t,e,n){"use strict";var r=n(1449),i=n(36987),o=n(55271),s=n(39034),a=n(51787);function c(t,e){var n=(0,i.r7)(t),o=(0,i.r7)(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==o.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var s=n[0][0],a=n[0][1],c=n[1][0],l=n[1][1],u=o[0][0],h=o[0][1],p=o[1][0],f=o[1][1],d=(f-h)*(c-s)-(p-u)*(l-a),g=(p-u)*(a-h)-(f-h)*(s-u),m=(c-s)*(a-h)-(l-a)*(s-u);if(0===d)return null;var y=g/d,_=m/d;if(y>=0&&y<=1&&_>=0&&_<=1){var v=s+y*(c-s),x=a+y*(l-a);return(0,r.xm)([v,x])}return null}e.Z=function(t,e){var n={},l=[];if("LineString"===t.type&&(t=(0,r.zL)(t)),"LineString"===e.type&&(e=(0,r.zL)(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var u=c(t,e);return u&&l.push(u),(0,r.uf)(l)}var h=a();return h.load((0,o.Z)(e)),(0,s.By)((0,o.Z)(t),(function(t){(0,s.By)(h.search(t),(function(e){var r=c(t,e);if(r){var o=(0,i.r7)(r).join(",");n[o]||(n[o]=!0,l.push(r))}}))})),(0,r.uf)(l)}},55883:function(t,e,n){"use strict";n(39034),n(36987),n(1449)},88212:function(t,e,n){"use strict";n(51787),n(55271),n(73701),n(86237),n(36987),n(39034),n(1449),n(10251)},55271:function(t,e,n){"use strict";var r=n(1449),i=n(36987),o=n(39034);e.Z=function(t){if(!t)throw new Error("geojson is required");var e=[];return(0,o.nG)(t,(function(t){!function(t,e){var n=[],o=t.geometry;if(null!==o){switch(o.type){case"Polygon":n=(0,i.r7)(o);break;case"LineString":n=[(0,i.r7)(o)]}n.forEach((function(n){var i=function(t,e){var n=[];return t.reduce((function(t,i){var o,s,a,c,l,u,h=(0,r.Tu)([t,i],e);return h.bbox=(s=i,a=(o=t)[0],c=o[1],l=s[0],u=s[1],[a<l?a:l,c<u?c:u,a>l?a:l,c>u?c:u]),n.push(h),i})),n}(n,t.properties);i.forEach((function(t){t.id=e.length,e.push(t)}))}))}}(t,e)})),(0,r.uf)(e)}},45882:function(t,e,n){"use strict";n(87189),n(92964),n(12148),n(1449)},45789:function(t,e,n){"use strict";var r=n(36987),i=n(1449),o=n(73701);e.Z=function(t,e,n){var s=(0,r.r7)(n);if("LineString"!==(0,r.oL)(n))throw new Error("line must be a LineString");for(var a,c=(0,o.Z)(n,t),l=(0,o.Z)(n,e),u=[(a=c.properties.index<=l.properties.index?[c,l]:[l,c])[0].geometry.coordinates],h=a[0].properties.index+1;h<a[1].properties.index+1;h++)u.push(s[h]);return u.push(a[1].geometry.coordinates),(0,i.Tu)(u,n.properties)}},82611:function(t,e,n){"use strict";n(51787),n(14864),n(62096),n(47230),n(55271),n(62585),n(73701),n(36987),n(39034),n(1449)},80592:function(t,e,n){"use strict";n(62096),n(36987),n(1449)},45082:function(t,e,n){"use strict";n(1449),n(32676)},39034:function(t,e,n){"use strict";n.d(e,{By:function(){return s},Lo:function(){return o},hE:function(){return u},mm:function(){return c},nG:function(){return l},on:function(){return a},pZ:function(){return i}});var r=n(1449);function i(t,e,n){if(null!==t)for(var r,o,s,a,c,l,u,h,p=0,f=0,d=t.type,g="FeatureCollection"===d,m="Feature"===d,y=g?t.features.length:1,_=0;_<y;_++){c=(h=!!(u=g?t.features[_].geometry:m?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var v=0;v<c;v++){var x=0,b=0;if(null!==(a=h?u.geometries[v]:u)){l=a.coordinates;var w=a.type;switch(p=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(l,f,_,x,b))return!1;f++,x++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],f,_,x,b))return!1;f++,"MultiPoint"===w&&x++}"LineString"===w&&x++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(o=0;o<l[r].length-p;o++){if(!1===e(l[r][o],f,_,x,b))return!1;f++}"MultiLineString"===w&&x++,"Polygon"===w&&b++}"Polygon"===w&&x++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(b=0,o=0;o<l[r].length;o++){for(s=0;s<l[r][o].length-p;s++){if(!1===e(l[r][o][s],f,_,x,b))return!1;f++}b++}x++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===i(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e,n,r){var o=n;return i(t,(function(t,r,i,s,a){o=0===r&&void 0===n?t:e(o,t,r,i,s,a)}),r),o}function s(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function a(t,e){var n,r,i,o,s,a,c,l,u,h,p=0,f="FeatureCollection"===t.type,d="Feature"===t.type,g=f?t.features.length:1;for(n=0;n<g;n++){for(a=f?t.features[n].geometry:d?t.geometry:t,l=f?t.features[n].properties:d?t.properties:{},u=f?t.features[n].bbox:d?t.bbox:void 0,h=f?t.features[n].id:d?t.id:void 0,s=(c=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=c?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,l,u,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],p,l,u,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,l,u,h))return!1;p++}}function c(t,e,n){var r=n;return a(t,(function(t,i,o,s,a){r=0===i&&void 0===n?t:e(r,t,i,o,s,a)})),r}function l(t,e){a(t,(function(t,n,i,o,s){var a,c=null===t?null:t.type;switch(c){case null:case"Point":case"LineString":case"Polygon":return!1!==e((0,r.zL)(t,i,{bbox:o,id:s}),n,0)&&void 0}switch(c){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<t.coordinates.length;l++){var u={type:a,coordinates:t.coordinates[l]};if(!1===e((0,r.zL)(u,i),n,l))return!1}}))}function u(t,e,n){var o=n,s=!1;return function(t,e){l(t,(function(t,n,o){var s=0;if(t.geometry){var a=t.geometry.type;if("Point"!==a&&"MultiPoint"!==a){var c,l=0,u=0,h=0;return!1!==i(t,(function(i,a,p,f,d){if(void 0===c||n>l||f>u||d>h)return c=i,l=n,u=f,h=d,void(s=0);var g=(0,r.Tu)([c,i],t.properties);if(!1===e(g,n,o,d,s))return!1;s++,c=i}))&&void 0}}}))}(t,(function(t,r,i,a,c){o=!1===s&&void 0===n?t:e(o,t,r,i,a,c),s=!0})),o}},24871:function(t,e,n){"use strict";n(87189),n(12148),n(92964)},34872:function(t,e,n){"use strict";n(88002),n(39034)},73701:function(t,e,n){"use strict";var r=n(87189),i=n(92964),o=n(12148),s=n(62585),a=n(39034),c=n(1449),l=n(36987);e.Z=function(t,e,n){void 0===n&&(n={});var u=(0,c.xm)([1/0,1/0],{dist:1/0}),h=0;return(0,a.nG)(t,(function(t){for(var a=(0,l.r7)(t),p=0;p<a.length-1;p++){var f=(0,c.xm)(a[p]);f.properties.dist=(0,i.Z)(e,f,n);var d=(0,c.xm)(a[p+1]);d.properties.dist=(0,i.Z)(e,d,n);var g=(0,i.Z)(f,d,n),m=Math.max(f.properties.dist,d.properties.dist),y=(0,r.Z)(f,d),_=(0,o.Z)(e,m,y+90,n),v=(0,o.Z)(e,m,y-90,n),x=(0,s.Z)((0,c.Tu)([_.geometry.coordinates,v.geometry.coordinates]),(0,c.Tu)([f.geometry.coordinates,d.geometry.coordinates])),b=null;x.features.length>0&&((b=x.features[0]).properties.dist=(0,i.Z)(e,b,n),b.properties.location=h+(0,i.Z)(f,b,n)),f.properties.dist<u.properties.dist&&((u=f).properties.index=p,u.properties.location=h),d.properties.dist<u.properties.dist&&((u=d).properties.index=p+1,u.properties.location=h+g),b&&b.properties.dist<u.properties.dist&&((u=b).properties.index=p),h+=g}})),u}},26124:function(t,e,n){"use strict";n(36987),n(39034),n(40985),n(27418)},33338:function(t,e,n){"use strict";n(92964),n(39034)},93935:function(t,e,n){"use strict";n(36987)},35360:function(t,e,n){"use strict";n(63986),n(92964),n(1449)},3197:function(t,e,n){"use strict";n(11821),n(81012),n(33338),n(82037),n(1449)},40985:function(t,e,n){"use strict";n(92964),n(1449),n(36987),n(39034),n(85290)},12138:function(t,e,n){"use strict";n(82037),n(1449),n(39034)},20827:function(t,e,n){"use strict";n(39034),n(1449)},79438:function(t,e,n){"use strict";n(36987),n(1449),n(62096),n(11821),n(33338)},39428:function(t,e,n){"use strict";n.d(e,{ZP:function(){return o}});var r=n(1449),i=n(36987);function o(t,e){void 0===e&&(e={});var n=(0,i.wA)(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),n.type){case"Polygon":return function(t,e){void 0===e&&(e={});var n=(0,i.wA)(t),r=n.coordinates,o=e.properties?e.properties:"Feature"===t.type?t.properties:{};return s(r,o)}(n,e);case"MultiPolygon":return function(t,e){void 0===e&&(e={});var n=(0,i.wA)(t),o=n.coordinates,a=e.properties?e.properties:"Feature"===t.type?t.properties:{},c=[];return o.forEach((function(t){c.push(s(t,a))})),(0,r.uf)(c)}(n,e);default:throw new Error("invalid poly")}}function s(t,e){return t.length>1?(0,r._R)(t,e):(0,r.Tu)(t[0],e)}},13087:function(t,e,n){"use strict";n(1449),n(54728),n(37575)},23266:function(t,e,n){"use strict";var r=n(1449),i=n(6050),o=function(){function t(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return(0,r.Tu)([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(t){return(0,i.hD)(t.from.coordinates,t.to.coordinates,this.to.coordinates)},t}();e.Z=o},37575:function(t,e,n){"use strict";var r=n(6050),i=n(1449),o=n(78445),s=n(82037),a=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return t.prototype.push=function(t){this.edges.push(t),this.polygon=this.envelope=void 0},t.prototype.get=function(t){return this.edges[t]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.edges.forEach(t)},t.prototype.map=function(t){return this.edges.map(t)},t.prototype.some=function(t){return this.edges.some(t)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var t=this,e=this.edges.reduce((function(e,n,r){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=r),e}),0),n=(0===e?this.length:e)-1,i=(e+1)%this.length,o=(0,r.hD)(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[i].from.coordinates);return 0===o?this.edges[n].from.coordinates[0]>this.edges[i].from.coordinates[0]:o>0},t.prototype.toMultiPoint=function(){return(0,i.ot)(this.edges.map((function(t){return t.from.coordinates})))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map((function(t){return t.from.coordinates}));return t.push(this.edges[0].from.coordinates),this.polygon=(0,i.yu)([t])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=(0,o.Z)(this.toPolygon())},t.findEdgeRingContaining=function(t,e){var n,o,s=t.getEnvelope();return e.forEach((function(e){var a=e.getEnvelope();if(o&&(n=o.getEnvelope()),!(0,r.sy)(a,s)&&(0,r.W_)(a,s)){for(var c=t.map((function(t){return t.from.coordinates})),l=void 0,u=function(t){e.some((function(e){return(0,r.aL)(t,e.from.coordinates)}))||(l=t)},h=0,p=c;h<p.length;h++){u(p[h])}l&&e.inside((0,i.xm)(l))&&(o&&!(0,r.W_)(n,a)||(o=e))}})),o},t.prototype.inside=function(t){return(0,s.Z)(t,this.toPolygon())},t}();e.Z=a},54728:function(t,e,n){"use strict";var r=n(12635),i=n(23266),o=n(37575),s=n(39034),a=n(36987);!function(){function t(){this.edges=[],this.nodes={}}t.fromGeoJson=function(e){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var n=new t;return(0,s.nG)(e,(function(t){(0,a.nK)(t,"LineString","Graph::fromGeoJson"),(0,s.Lo)(t,(function(t,e){if(t){var r=n.getNode(t),i=n.getNode(e);n.addEdge(r,i)}return e}))})),n},t.prototype.getNode=function(t){var e=r.Z.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new r.Z(t)),n},t.prototype.addEdge=function(t,e){var n=new i.Z(t,e),r=n.getSymetric();this.edges.push(n),this.edges.push(r)},t.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map((function(e){return t.nodes[e]})).forEach((function(e){return t._removeIfDangle(e)}))},t.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map((function(t){return t.to}));this.removeNode(t),n.forEach((function(t){return e._removeIfDangle(t)}))}},t.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach((function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))}))},t.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach((function(t){return e._computeNextCWEdges(e.nodes[t])})):t.getOuterEdges().forEach((function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e}))},t.prototype._computeNextCCWEdges=function(t,e){for(var n,r,i=t.getOuterEdges(),o=i.length-1;o>=0;--o){var s=i[o],a=s.symetric,c=void 0,l=void 0;s.label===e&&(c=s),a.label===e&&(l=a),c&&l&&(l&&(r=l),c&&(r&&(r.next=c,r=void 0),n||(n=c)))}r&&(r.next=n)},t.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach((function(n){if(!(n.label>=0)){t.push(n);var r=n;do{r.label=e,r=r.next}while(!n.isEqual(r));e++}})),t},t.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach((function(t){t.label=void 0})),this._findLabeledEdgeRings().forEach((function(e){t._findIntersectionNodes(e).forEach((function(n){t._computeNextCCWEdges(n,e.label)}))}));var e=[];return this.edges.forEach((function(n){n.ring||e.push(t._findEdgeRing(n))})),e},t.prototype._findIntersectionNodes=function(t){var e=[],n=t,r=function(){var r=0;n.from.getOuterEdges().forEach((function(e){e.label===t.label&&++r})),r>1&&e.push(n.from),n=n.next};do{r()}while(!t.isEqual(n));return e},t.prototype._findEdgeRing=function(t){var e=t,n=new o.Z;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n},t.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach((function(t){return e.removeEdge(t)})),t.innerEdges.forEach((function(t){return e.removeEdge(t)})),delete this.nodes[t.id]},t.prototype.removeEdge=function(t){this.edges=this.edges.filter((function(e){return!e.isEqual(t)})),t.deleteEdge()}}()},12635:function(t,e,n){"use strict";var r=n(6050),i=function(){function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(t){return t.join(",")},t.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter((function(e){return e.from.id!==t.from.id}))},t.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter((function(e){return e.to.id!==t.to.id}))},t.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort((function(e,n){var i=e.to,o=n.to;if(i.coordinates[0]-t.coordinates[0]>=0&&o.coordinates[0]-t.coordinates[0]<0)return 1;if(i.coordinates[0]-t.coordinates[0]<0&&o.coordinates[0]-t.coordinates[0]>=0)return-1;if(i.coordinates[0]-t.coordinates[0]==0&&o.coordinates[0]-t.coordinates[0]==0)return i.coordinates[1]-t.coordinates[1]>=0||o.coordinates[1]-t.coordinates[1]>=0?i.coordinates[1]-o.coordinates[1]:o.coordinates[1]-i.coordinates[1];var s=(0,r.hD)(t.coordinates,i.coordinates,o.coordinates);return s<0?1:s>0?-1:Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2)-(Math.pow(o.coordinates[0]-t.coordinates[0],2)+Math.pow(o.coordinates[1]-t.coordinates[1],2))})),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},t.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},t}();e.Z=i},6050:function(t,e,n){"use strict";n.d(e,{W_:function(){return a},aL:function(){return c},hD:function(){return o},sy:function(){return s}});var r=n(82037),i=n(1449);function o(t,e,n){var r,i=e[0]-t[0],o=e[1]-t[1],s=n[0]-e[0],a=n[1]-e[1];return((r=i*a-s*o)>0)-(r<0)||+r}function s(t,e){var n=t.geometry.coordinates[0].map((function(t){return t[0]})),r=t.geometry.coordinates[0].map((function(t){return t[1]})),i=e.geometry.coordinates[0].map((function(t){return t[0]})),o=e.geometry.coordinates[0].map((function(t){return t[1]}));return Math.max.apply(null,n)===Math.max.apply(null,i)&&Math.max.apply(null,r)===Math.max.apply(null,o)&&Math.min.apply(null,n)===Math.min.apply(null,i)&&Math.min.apply(null,r)===Math.min.apply(null,o)}function a(t,e){return e.geometry.coordinates[0].every((function(e){return(0,r.Z)((0,i.xm)(e),t)}))}function c(t,e){return t[0]===e[0]&&t[1]===e[1]}},20493:function(t,e,n){"use strict";n(39034),n(1449)},75830:function(t,e,n){"use strict";n(1449)},62946:function(t,e,n){"use strict";var r=n(26916),i=n(92964),o=n(1449);e.Z=function(t,e,n,s){void 0===s&&(s={});for(var a=[],c=t[0],l=t[1],u=t[2],h=t[3],p=e/(0,i.Z)([c,l],[u,l],s)*(u-c),f=n/(0,i.Z)([c,l],[c,h],s)*(h-l),d=u-c,g=h-l,m=Math.floor(d/p),y=Math.floor(g/f),_=(g-y*f)/2,v=c+(d-m*p)/2,x=0;x<m;x++){for(var b=l+_,w=0;w<y;w++){var E=(0,o.yu)([[[v,b],[v,b+f],[v+p,b+f],[v+p,b],[v,b]]],s.properties);s.mask?(0,r.Z)(s.mask,E)&&a.push(E):a.push(E),b+=f}v+=p}return(0,o.uf)(a)}},5901:function(t,e,n){"use strict";n(77944),n(39034),n(36987),n(1449)},31025:function(t,e,n){"use strict";n(1449),n(36987)},26566:function(t,e,n){"use strict";n(1449),n(36987)},85290:function(t,e,n){"use strict";n(1449),n(36987)},4554:function(t,e,n){"use strict";n(1449)},72123:function(t,e,n){"use strict";n(93395),n(52515),n(39034),n(1449),n(36987)},78410:function(t,e,n){"use strict";n(62096),n(82037),n(92964),n(25384),n(51062),n(95),n(36987),n(1449);function r(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}var i={search:function(t,e,n,o){t.cleanDirty();var s=(o=o||{}).heuristic||i.heuristics.manhattan,c=o.closest||!1,l=new a((function(t){return t.f})),u=e;for(e.h=s(e,n),l.push(e);l.size()>0;){var h=l.pop();if(h===n)return r(h);h.closed=!0;for(var p=t.neighbors(h),f=0,d=p.length;f<d;++f){var g=p[f];if(!g.closed&&!g.isWall()){var m=h.g+g.getCost(h),y=g.visited;(!y||m<g.g)&&(g.visited=!0,g.parent=h,g.h=g.h||s(g,n),g.g=m,g.f=g.g+g.h,t.markDirty(g),c&&(g.h<u.h||g.h===u.h&&g.g<u.g)&&(u=g),y?l.rescoreElement(g):l.push(g))}}}return c?r(u):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function o(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,i=t[n];r<i.length;r++){var o=new s(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function s(t,e,n){this.x=t,this.y=e,this.weight=n}function a(t){this.content=[],this.scoreFunction=t}o.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)i.cleanNode(this.nodes[t])},o.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)i.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},o.prototype.markDirty=function(t){this.dirtyNodes.push(t)},o.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,i=this.grid;return i[n-1]&&i[n-1][r]&&e.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&e.push(i[n+1][r]),i[n]&&i[n][r-1]&&e.push(i[n][r-1]),i[n]&&i[n][r+1]&&e.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&e.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&e.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&e.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&e.push(i[n+1][r+1])),e},o.prototype.toString=function(){for(var t,e,n,r,i=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],n=0,r=(e=o[s]).length;n<r;n++)t.push(e[n].weight);i.push(t.join(" "))}return i.join("\n")},s.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},s.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},s.prototype.isWall=function(){return 0===this.weight},a.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i,o=t+1<<1,s=o-1,a=null;if(s<e){var c=this.content[s];(i=this.scoreFunction(c))<r&&(a=s)}if(o<e){var l=this.content[o];this.scoreFunction(l)<(null===a?r:i)&&(a=o)}if(null===a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}}},3165:function(t,e,n){"use strict";n(51062),n(39034),n(1449)},24143:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(62946);function i(t,e,n){return void 0===n&&(n={}),(0,r.Z)(t,e,e,n)}},14864:function(t,e,n){"use strict";n(92964)},82094:function(t,e,n){"use strict";n(39034),n(36987),n(1449),n(63412),n(12138),n(40890)},42395:function(t,e,n){"use strict";n(82037),n(39034)},7396:function(t,e,n){"use strict";n(9187),n(1449)},16066:function(t,e,n){"use strict";n(1449)},85294:function(t,e,n){"use strict";n(44369),n(31025),n(85290),n(26566),n(39034),n(36987),n(1449)},25384:function(t,e,n){"use strict";n(81012),n(44369),n(62096),n(31025),n(85290),n(26566),n(39034),n(1449),n(36987)},61347:function(t,e,n){"use strict";n(39034),n(1449),n(36987),n(26566)},22052:function(t,e,n){"use strict";n(92964),n(79590),n(1449)},47230:function(t,e,n){"use strict";n(39034)},77170:function(t,e,n){"use strict";n.d(e,{$1t:function(){return p.Z},$ZQ:function(){return m.ZP},Dhe:function(){return x.Z},Exj:function(){return d.Z},Fpf:function(){return y.Z},HLN:function(){return g.Z},MqI:function(){return a.Z},SOn:function(){return h.Z},TuJ:function(){return _.Tu},VWR:function(){return c.Z},Xwo:function(){return o.Z},Y2u:function(){return r.Z},Y30:function(){return u.Z},YmM:function(){return _.Ym},bAF:function(){return l.Z},beQ:function(){return s.Z},f3b:function(){return v.Z},kE:function(){return f.Z},uf4:function(){return _.uf},v4B:function(){return i.Z},xmu:function(){return _.xm}});n(5509),n(36952),n(12138),n(2187),n(55314),n(76402),n(3165);var r=n(5861),i=(n(42395),n(4554),n(78445)),o=(n(14864),n(93395)),s=(n(24871),n(81012)),a=n(32798),c=(n(44369),n(69169),n(92964),n(11821),n(62096)),l=(n(7396),n(95)),u=(n(82037),n(33338),n(73701),n(26124),n(93935),n(16066),n(87189)),h=(n(12148),n(32700),n(3197),n(51256)),p=n(82861),f=n(5776),d=n(45789),g=(n(45882),n(35360),n(47230),n(63938),n(62585)),m=(n(25841),n(11483),n(98772),n(55271),n(82611),n(52515),n(39428),n(80592),n(33806),n(88212),n(72123),n(31025),n(85290),n(26566),n(79438),n(5901),n(27945),n(85294),n(25384),n(61347),n(55883),n(13087),n(16433),n(66640)),y=(n(63829),n(77944),n(3510),n(86237),n(61982),n(63986)),_=(n(26916),n(51062),n(17769),n(28046),n(40985),n(22777),n(78410),n(68368),n(40890),n(63412),n(44544),n(82094),n(8624),n(20827),n(34872),n(88002),n(20493),n(75830),n(10294),n(1449)),v=(n(36987),n(39034),n(97973),n(75859)),x=(n(51287),n(79590),n(69382),n(76791),n(45082),n(24143));n(22052),n(41384)},51287:function(t,e,n){"use strict";n(32676),n(36987),n(1449)},11483:function(t,e,n){"use strict";n(39034),n(1449),n(65510),n(51256),n(82037)},68368:function(t,e,n){"use strict";n(1449),n(36987),n(97423)},52861:function(t,e,n){"use strict";function r(t,e){return function(){return t.apply(e,arguments)}}n.d(e,{Z:function(){return qt}});const{toString:i}=Object.prototype,{getPrototypeOf:o}=Object,s=(a=Object.create(null),t=>{const e=i.call(t);return a[e]||(a[e]=e.slice(8,-1).toLowerCase())});var a;const c=t=>(t=t.toLowerCase(),e=>s(e)===t),l=t=>e=>typeof e===t,{isArray:u}=Array,h=l("undefined");const p=c("ArrayBuffer");const f=l("string"),d=l("function"),g=l("number"),m=t=>null!==t&&"object"==typeof t,y=t=>{if("object"!==s(t))return!1;const e=o(t);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Symbol.toStringTag in t||Symbol.iterator in t)},_=c("Date"),v=c("File"),x=c("Blob"),b=c("FileList"),w=c("URLSearchParams");function E(t,e,{allOwnKeys:n=!1}={}){if(null==t)return;let r,i;if("object"!=typeof t&&(t=[t]),u(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let s;for(r=0;r<o;r++)s=i[r],e.call(null,t[s],s,t)}}function T(t,e){e=e.toLowerCase();const n=Object.keys(t);let r,i=n.length;for(;i-- >0;)if(r=n[i],e===r.toLowerCase())return r;return null}const S="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,k=t=>!h(t)&&t!==S;const A=(M="undefined"!=typeof Uint8Array&&o(Uint8Array),t=>M&&t instanceof M);var M;const I=c("HTMLFormElement"),C=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),O=c("RegExp"),P=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};E(n,((n,i)=>{let o;!1!==(o=e(n,i,t))&&(r[i]=o||n)})),Object.defineProperties(t,r)},L="abcdefghijklmnopqrstuvwxyz",D="0123456789",R={DIGIT:D,ALPHA:L,ALPHA_DIGIT:L+L.toUpperCase()+D};const N=c("AsyncFunction");var j={isArray:u,isArrayBuffer:p,isBuffer:function(t){return null!==t&&!h(t)&&null!==t.constructor&&!h(t.constructor)&&d(t.constructor.isBuffer)&&t.constructor.isBuffer(t)},isFormData:t=>{let e;return t&&("function"==typeof FormData&&t instanceof FormData||d(t.append)&&("formdata"===(e=s(t))||"object"===e&&d(t.toString)&&"[object FormData]"===t.toString()))},isArrayBufferView:function(t){let e;return e="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&p(t.buffer),e},isString:f,isNumber:g,isBoolean:t=>!0===t||!1===t,isObject:m,isPlainObject:y,isUndefined:h,isDate:_,isFile:v,isBlob:x,isRegExp:O,isFunction:d,isStream:t=>m(t)&&d(t.pipe),isURLSearchParams:w,isTypedArray:A,isFileList:b,forEach:E,merge:function t(){const{caseless:e}=k(this)&&this||{},n={},r=(r,i)=>{const o=e&&T(n,i)||i;y(n[o])&&y(r)?n[o]=t(n[o],r):y(r)?n[o]=t({},r):u(r)?n[o]=r.slice():n[o]=r};for(let t=0,e=arguments.length;t<e;t++)arguments[t]&&E(arguments[t],r);return n},extend:(t,e,n,{allOwnKeys:i}={})=>(E(e,((e,i)=>{n&&d(e)?t[i]=r(e,n):t[i]=e}),{allOwnKeys:i}),t),trim:t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),inherits:(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},toFlatObject:(t,e,n,r)=>{let i,s,a;const c={};if(e=e||{},null==t)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)a=i[s],r&&!r(a,t,e)||c[a]||(e[a]=t[a],c[a]=!0);t=!1!==n&&o(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},kindOf:s,kindOfTest:c,endsWith:(t,e,n)=>{t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return-1!==r&&r===n},toArray:t=>{if(!t)return null;if(u(t))return t;let e=t.length;if(!g(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},forEachEntry:(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let r;for(;(r=n.next())&&!r.done;){const n=r.value;e.call(t,n[0],n[1])}},matchAll:(t,e)=>{let n;const r=[];for(;null!==(n=t.exec(e));)r.push(n);return r},isHTMLForm:I,hasOwnProperty:C,hasOwnProp:C,reduceDescriptors:P,freezeMethods:t=>{P(t,((e,n)=>{if(d(t)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=t[n];d(r)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(t,e)=>{const n={},r=t=>{t.forEach((t=>{n[t]=!0}))};return u(t)?r(t):r(String(t).split(e)),n},toCamelCase:t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(t,e,n){return e.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(t,e)=>(t=+t,Number.isFinite(t)?t:e),findKey:T,global:S,isContextDefined:k,ALPHABET:R,generateString:(t=16,e=R.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n},isSpecCompliantForm:function(t){return!!(t&&d(t.append)&&"FormData"===t[Symbol.toStringTag]&&t[Symbol.iterator])},toJSONObject:t=>{const e=new Array(10),n=(t,r)=>{if(m(t)){if(e.indexOf(t)>=0)return;if(!("toJSON"in t)){e[r]=t;const i=u(t)?[]:{};return E(t,((t,e)=>{const o=n(t,r+1);!h(o)&&(i[e]=o)})),e[r]=void 0,i}}return t};return n(t,0)},isAsyncFn:N,isThenable:t=>t&&(m(t)||d(t))&&d(t.then)&&d(t.catch)};function z(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}j.inherits(z,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:j.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const B=z.prototype,F={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((t=>{F[t]={value:t}})),Object.defineProperties(z,F),Object.defineProperty(B,"isAxiosError",{value:!0}),z.from=(t,e,n,r,i,o)=>{const s=Object.create(B);return j.toFlatObject(t,s,(function(t){return t!==Error.prototype}),(t=>"isAxiosError"!==t)),z.call(s,t.message,e,n,r,i),s.cause=t,s.name=t.name,o&&Object.assign(s,o),s};var U=z,V=n(48764).lW;function q(t){return j.isPlainObject(t)||j.isArray(t)}function W(t){return j.endsWith(t,"[]")?t.slice(0,-2):t}function G(t,e,n){return t?t.concat(e).map((function(t,e){return t=W(t),!n&&e?"["+t+"]":t})).join(n?".":""):e}const $=j.toFlatObject(j,{},null,(function(t){return/^is[A-Z]/.test(t)}));var H=function(t,e,n){if(!j.isObject(t))throw new TypeError("target must be an object");e=e||new FormData;const r=(n=j.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(t,e){return!j.isUndefined(e[t])}))).metaTokens,i=n.visitor||l,o=n.dots,s=n.indexes,a=(n.Blob||"undefined"!=typeof Blob&&Blob)&&j.isSpecCompliantForm(e);if(!j.isFunction(i))throw new TypeError("visitor must be a function");function c(t){if(null===t)return"";if(j.isDate(t))return t.toISOString();if(!a&&j.isBlob(t))throw new U("Blob is not supported. Use a Buffer instead.");return j.isArrayBuffer(t)||j.isTypedArray(t)?a&&"function"==typeof Blob?new Blob([t]):V.from(t):t}function l(t,n,i){let a=t;if(t&&!i&&"object"==typeof t)if(j.endsWith(n,"{}"))n=r?n:n.slice(0,-2),t=JSON.stringify(t);else if(j.isArray(t)&&function(t){return j.isArray(t)&&!t.some(q)}(t)||(j.isFileList(t)||j.endsWith(n,"[]"))&&(a=j.toArray(t)))return n=W(n),a.forEach((function(t,r){!j.isUndefined(t)&&null!==t&&e.append(!0===s?G([n],r,o):null===s?n:n+"[]",c(t))})),!1;return!!q(t)||(e.append(G(i,n,o),c(t)),!1)}const u=[],h=Object.assign($,{defaultVisitor:l,convertValue:c,isVisitable:q});if(!j.isObject(t))throw new TypeError("data must be an object");return function t(n,r){if(!j.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),j.forEach(n,(function(n,o){!0===(!(j.isUndefined(n)||null===n)&&i.call(e,n,j.isString(o)?o.trim():o,r,h))&&t(n,r?r.concat(o):[o])})),u.pop()}}(t),e};function Z(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,(function(t){return e[t]}))}function Y(t,e){this._pairs=[],t&&H(t,this,e)}const X=Y.prototype;X.append=function(t,e){this._pairs.push([t,e])},X.toString=function(t){const e=t?function(e){return t.call(this,e,Z)}:Z;return this._pairs.map((function(t){return e(t[0])+"="+e(t[1])}),"").join("&")};var K=Y;function J(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Q(t,e,n){if(!e)return t;const r=n&&n.encode||J,i=n&&n.serialize;let o;if(o=i?i(e,n):j.isURLSearchParams(e)?e.toString():new K(e,n).toString(r),o){const e=t.indexOf("#");-1!==e&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+o}return t}var tt=class{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){j.forEach(this.handlers,(function(e){null!==e&&t(e)}))}},et={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};var nt={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:K,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},isStandardBrowserEnv:(()=>{let t;return("undefined"==typeof navigator||"ReactNative"!==(t=navigator.product)&&"NativeScript"!==t&&"NS"!==t)&&("undefined"!=typeof window&&"undefined"!=typeof document)})(),isStandardBrowserWebWorkerEnv:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};var rt=function(t){function e(t,n,r,i){let o=t[i++];const s=Number.isFinite(+o),a=i>=t.length;if(o=!o&&j.isArray(r)?r.length:o,a)return j.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!s;r[o]&&j.isObject(r[o])||(r[o]=[]);return e(t,n,r[o],i)&&j.isArray(r[o])&&(r[o]=function(t){const e={},n=Object.keys(t);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],e[o]=t[o];return e}(r[o])),!s}if(j.isFormData(t)&&j.isFunction(t.entries)){const n={};return j.forEachEntry(t,((t,r)=>{e(function(t){return j.matchAll(/\w+|\[(\w*)]/g,t).map((t=>"[]"===t[0]?"":t[1]||t[0]))}(t),r,n,0)})),n}return null};const it={transitional:et,adapter:["xhr","http"],transformRequest:[function(t,e){const n=e.getContentType()||"",r=n.indexOf("application/json")>-1,i=j.isObject(t);i&&j.isHTMLForm(t)&&(t=new FormData(t));if(j.isFormData(t))return r&&r?JSON.stringify(rt(t)):t;if(j.isArrayBuffer(t)||j.isBuffer(t)||j.isStream(t)||j.isFile(t)||j.isBlob(t))return t;if(j.isArrayBufferView(t))return t.buffer;if(j.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(t,e){return H(t,new nt.classes.URLSearchParams,Object.assign({visitor:function(t,e,n,r){return nt.isNode&&j.isBuffer(t)?(this.append(e,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}(t,this.formSerializer).toString();if((o=j.isFileList(t))||n.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return H(o?{"files[]":t}:t,e&&new e,this.formSerializer)}}return i||r?(e.setContentType("application/json",!1),function(t,e,n){if(j.isString(t))try{return(e||JSON.parse)(t),j.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return(n||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){const e=this.transitional||it.transitional,n=e&&e.forcedJSONParsing,r="json"===this.responseType;if(t&&j.isString(t)&&(n&&!this.responseType||r)){const n=!(e&&e.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(t){if(n){if("SyntaxError"===t.name)throw U.from(t,U.ERR_BAD_RESPONSE,this,null,this.response);throw t}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:nt.classes.FormData,Blob:nt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};j.forEach(["delete","get","head","post","put","patch"],(t=>{it.headers[t]={}}));var ot=it;const st=j.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);const at=Symbol("internals");function ct(t){return t&&String(t).trim().toLowerCase()}function lt(t){return!1===t||null==t?t:j.isArray(t)?t.map(lt):String(t)}function ut(t,e,n,r,i){return j.isFunction(r)?r.call(this,e,n):(i&&(e=n),j.isString(e)?j.isString(r)?-1!==e.indexOf(r):j.isRegExp(r)?r.test(e):void 0:void 0)}class ht{constructor(t){t&&this.set(t)}set(t,e,n){const r=this;function i(t,e,n){const i=ct(e);if(!i)throw new Error("header name must be a non-empty string");const o=j.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||e]=lt(t))}const o=(t,e)=>j.forEach(t,((t,n)=>i(t,n,e)));return j.isPlainObject(t)||t instanceof this.constructor?o(t,e):j.isString(t)&&(t=t.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim())?o((t=>{const e={};let n,r,i;return t&&t.split("\n").forEach((function(t){i=t.indexOf(":"),n=t.substring(0,i).trim().toLowerCase(),r=t.substring(i+1).trim(),!n||e[n]&&st[n]||("set-cookie"===n?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)})),e})(t),e):null!=t&&i(e,t,n),this}get(t,e){if(t=ct(t)){const n=j.findKey(this,t);if(n){const t=this[n];if(!e)return t;if(!0===e)return function(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}(t);if(j.isFunction(e))return e.call(this,t,n);if(j.isRegExp(e))return e.exec(t);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=ct(t)){const n=j.findKey(this,t);return!(!n||void 0===this[n]||e&&!ut(0,this[n],n,e))}return!1}delete(t,e){const n=this;let r=!1;function i(t){if(t=ct(t)){const i=j.findKey(n,t);!i||e&&!ut(0,n[i],i,e)||(delete n[i],r=!0)}}return j.isArray(t)?t.forEach(i):i(t),r}clear(t){const e=Object.keys(this);let n=e.length,r=!1;for(;n--;){const i=e[n];t&&!ut(0,this[i],i,t,!0)||(delete this[i],r=!0)}return r}normalize(t){const e=this,n={};return j.forEach(this,((r,i)=>{const o=j.findKey(n,i);if(o)return e[o]=lt(r),void delete e[i];const s=t?function(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((t,e,n)=>e.toUpperCase()+n))}(i):String(i).trim();s!==i&&delete e[i],e[s]=lt(r),n[s]=!0})),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return j.forEach(this,((n,r)=>{null!=n&&!1!==n&&(e[r]=t&&j.isArray(n)?n.join(", "):n)})),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([t,e])=>t+": "+e)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach((t=>n.set(t))),n}static accessor(t){const e=(this[at]=this[at]={accessors:{}}).accessors,n=this.prototype;function r(t){const r=ct(t);e[r]||(!function(t,e){const n=j.toCamelCase(" "+e);["get","set","has"].forEach((r=>{Object.defineProperty(t,r+n,{value:function(t,n,i){return this[r].call(this,e,t,n,i)},configurable:!0})}))}(n,t),e[r]=!0)}return j.isArray(t)?t.forEach(r):r(t),this}}ht.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),j.reduceDescriptors(ht.prototype,(({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(t){this[n]=t}}})),j.freezeMethods(ht);var pt=ht;function ft(t,e){const n=this||ot,r=e||n,i=pt.from(r.headers);let o=r.data;return j.forEach(t,(function(t){o=t.call(n,o,i.normalize(),e?e.status:void 0)})),i.normalize(),o}function dt(t){return!(!t||!t.__CANCEL__)}function gt(t,e,n){U.call(this,null==t?"canceled":t,U.ERR_CANCELED,e,n),this.name="CanceledError"}j.inherits(gt,U,{__CANCEL__:!0});var mt=gt;var yt=nt.isStandardBrowserEnv?{write:function(t,e,n,r,i,o){const s=[];s.push(t+"="+encodeURIComponent(e)),j.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),j.isString(r)&&s.push("path="+r),j.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function _t(t,e){return t&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)?function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e}var vt=nt.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let n;function r(n){let r=n;return t&&(e.setAttribute("href",r),r=e.href),e.setAttribute("href",r),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return n=r(window.location.href),function(t){const e=j.isString(t)?r(t):t;return e.protocol===n.protocol&&e.host===n.host}}():function(){return!0};var xt=function(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i,o=0,s=0;return e=void 0!==e?e:1e3,function(a){const c=Date.now(),l=r[s];i||(i=c),n[o]=a,r[o]=c;let u=s,h=0;for(;u!==o;)h+=n[u++],u%=t;if(o=(o+1)%t,o===s&&(s=(s+1)%t),c-i<e)return;const p=l&&c-l;return p?Math.round(1e3*h/p):void 0}};function bt(t,e){let n=0;const r=xt(50,250);return i=>{const o=i.loaded,s=i.lengthComputable?i.total:void 0,a=o-n,c=r(a);n=o;const l={loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:c||void 0,estimated:c&&s&&o<=s?(s-o)/c:void 0,event:i};l[e?"download":"upload"]=!0,t(l)}}const wt={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(t){return new Promise((function(e,n){let r=t.data;const i=pt.from(t.headers).normalize(),o=t.responseType;let s,a;function c(){t.cancelToken&&t.cancelToken.unsubscribe(s),t.signal&&t.signal.removeEventListener("abort",s)}j.isFormData(r)&&(nt.isStandardBrowserEnv||nt.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.getContentType(/^\s*multipart\/form-data/)?j.isString(a=i.getContentType())&&i.setContentType(a.replace(/^\s*(multipart\/form-data);+/,"$1")):i.setContentType("multipart/form-data"));let l=new XMLHttpRequest;if(t.auth){const e=t.auth.username||"",n=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(e+":"+n))}const u=_t(t.baseURL,t.url);function h(){if(!l)return;const r=pt.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders());!function(t,e,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?e(new U("Request failed with status code "+n.status,[U.ERR_BAD_REQUEST,U.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)}((function(t){e(t),c()}),(function(t){n(t),c()}),{data:o&&"text"!==o&&"json"!==o?l.response:l.responseText,status:l.status,statusText:l.statusText,headers:r,config:t,request:l}),l=null}if(l.open(t.method.toUpperCase(),Q(u,t.params,t.paramsSerializer),!0),l.timeout=t.timeout,"onloadend"in l?l.onloadend=h:l.onreadystatechange=function(){l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))&&setTimeout(h)},l.onabort=function(){l&&(n(new U("Request aborted",U.ECONNABORTED,t,l)),l=null)},l.onerror=function(){n(new U("Network Error",U.ERR_NETWORK,t,l)),l=null},l.ontimeout=function(){let e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const r=t.transitional||et;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(new U(e,r.clarifyTimeoutError?U.ETIMEDOUT:U.ECONNABORTED,t,l)),l=null},nt.isStandardBrowserEnv){const e=(t.withCredentials||vt(u))&&t.xsrfCookieName&&yt.read(t.xsrfCookieName);e&&i.set(t.xsrfHeaderName,e)}void 0===r&&i.setContentType(null),"setRequestHeader"in l&&j.forEach(i.toJSON(),(function(t,e){l.setRequestHeader(e,t)})),j.isUndefined(t.withCredentials)||(l.withCredentials=!!t.withCredentials),o&&"json"!==o&&(l.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&l.addEventListener("progress",bt(t.onDownloadProgress,!0)),"function"==typeof t.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",bt(t.onUploadProgress)),(t.cancelToken||t.signal)&&(s=e=>{l&&(n(!e||e.type?new mt(null,t,l):e),l.abort(),l=null)},t.cancelToken&&t.cancelToken.subscribe(s),t.signal&&(t.signal.aborted?s():t.signal.addEventListener("abort",s)));const p=function(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}(u);p&&-1===nt.protocols.indexOf(p)?n(new U("Unsupported protocol "+p+":",U.ERR_BAD_REQUEST,t)):l.send(r||null)}))}};j.forEach(wt,((t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(t){}Object.defineProperty(t,"adapterName",{value:e})}}));const Et=t=>`- ${t}`,Tt=t=>j.isFunction(t)||null===t||!1===t;var St=t=>{t=j.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let o=0;o<e;o++){let e;if(n=t[o],r=n,!Tt(n)&&(r=wt[(e=String(n)).toLowerCase()],void 0===r))throw new U(`Unknown adapter '${e}'`);if(r)break;i[e||"#"+o]=r}if(!r){const t=Object.entries(i).map((([t,e])=>`adapter ${t} `+(!1===e?"is not supported by the environment":"is not available in the build")));let n=e?t.length>1?"since :\n"+t.map(Et).join("\n"):" "+Et(t[0]):"as no adapter specified";throw new U("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function kt(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new mt(null,t)}function At(t){kt(t),t.headers=pt.from(t.headers),t.data=ft.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1);return St(t.adapter||ot.adapter)(t).then((function(e){return kt(t),e.data=ft.call(t,t.transformResponse,e),e.headers=pt.from(e.headers),e}),(function(e){return dt(e)||(kt(t),e&&e.response&&(e.response.data=ft.call(t,t.transformResponse,e.response),e.response.headers=pt.from(e.response.headers))),Promise.reject(e)}))}const Mt=t=>t instanceof pt?t.toJSON():t;function It(t,e){e=e||{};const n={};function r(t,e,n){return j.isPlainObject(t)&&j.isPlainObject(e)?j.merge.call({caseless:n},t,e):j.isPlainObject(e)?j.merge({},e):j.isArray(e)?e.slice():e}function i(t,e,n){return j.isUndefined(e)?j.isUndefined(t)?void 0:r(void 0,t,n):r(t,e,n)}function o(t,e){if(!j.isUndefined(e))return r(void 0,e)}function s(t,e){return j.isUndefined(e)?j.isUndefined(t)?void 0:r(void 0,t):r(void 0,e)}function a(n,i,o){return o in e?r(n,i):o in t?r(void 0,n):void 0}const c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(t,e)=>i(Mt(t),Mt(e),!0)};return j.forEach(Object.keys(Object.assign({},t,e)),(function(r){const o=c[r]||i,s=o(t[r],e[r],r);j.isUndefined(s)&&o!==a||(n[r]=s)})),n}const Ct="1.5.1";var Ot=n(25108);const Pt={};["object","boolean","number","function","string","symbol"].forEach(((t,e)=>{Pt[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}}));const Lt={};Pt.transitional=function(t,e,n){function r(t,e){return"[Axios v1.5.1] Transitional option '"+t+"'"+e+(n?". "+n:"")}return(n,i,o)=>{if(!1===t)throw new U(r(i," has been removed"+(e?" in "+e:"")),U.ERR_DEPRECATED);return e&&!Lt[i]&&(Lt[i]=!0,Ot.warn(r(i," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,i,o)}};var Dt={assertOptions:function(t,e,n){if("object"!=typeof t)throw new U("options must be an object",U.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const o=r[i],s=e[o];if(s){const e=t[o],n=void 0===e||s(e,o,t);if(!0!==n)throw new U("option "+o+" must be "+n,U.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new U("Unknown option "+o,U.ERR_BAD_OPTION)}},validators:Pt};const Rt=Dt.validators;class Nt{constructor(t){this.defaults=t,this.interceptors={request:new tt,response:new tt}}request(t,e){"string"==typeof t?(e=e||{}).url=t:e=t||{},e=It(this.defaults,e);const{transitional:n,paramsSerializer:r,headers:i}=e;void 0!==n&&Dt.assertOptions(n,{silentJSONParsing:Rt.transitional(Rt.boolean),forcedJSONParsing:Rt.transitional(Rt.boolean),clarifyTimeoutError:Rt.transitional(Rt.boolean)},!1),null!=r&&(j.isFunction(r)?e.paramsSerializer={serialize:r}:Dt.assertOptions(r,{encode:Rt.function,serialize:Rt.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let o=i&&j.merge(i.common,i[e.method]);i&&j.forEach(["delete","get","head","post","put","patch","common"],(t=>{delete i[t]})),e.headers=pt.concat(o,i);const s=[];let a=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(a=a&&t.synchronous,s.unshift(t.fulfilled,t.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(t){c.push(t.fulfilled,t.rejected)}));let u,h=0;if(!a){const t=[At.bind(this),void 0];for(t.unshift.apply(t,s),t.push.apply(t,c),u=t.length,l=Promise.resolve(e);h<u;)l=l.then(t[h++],t[h++]);return l}u=s.length;let p=e;for(h=0;h<u;){const t=s[h++],e=s[h++];try{p=t(p)}catch(t){e.call(this,t);break}}try{l=At.call(this,p)}catch(t){return Promise.reject(t)}for(h=0,u=c.length;h<u;)l=l.then(c[h++],c[h++]);return l}getUri(t){return Q(_t((t=It(this.defaults,t)).baseURL,t.url),t.params,t.paramsSerializer)}}j.forEach(["delete","get","head","options"],(function(t){Nt.prototype[t]=function(e,n){return this.request(It(n||{},{method:t,url:e,data:(n||{}).data}))}})),j.forEach(["post","put","patch"],(function(t){function e(e){return function(n,r,i){return this.request(It(i||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Nt.prototype[t]=e(),Nt.prototype[t+"Form"]=e(!0)}));var jt=Nt;class zt{constructor(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");let e;this.promise=new Promise((function(t){e=t}));const n=this;this.promise.then((t=>{if(!n._listeners)return;let e=n._listeners.length;for(;e-- >0;)n._listeners[e](t);n._listeners=null})),this.promise.then=t=>{let e;const r=new Promise((t=>{n.subscribe(t),e=t})).then(t);return r.cancel=function(){n.unsubscribe(e)},r},t((function(t,r,i){n.reason||(n.reason=new mt(t,r,i),e(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}static source(){let t;return{token:new zt((function(e){t=e})),cancel:t}}}var Bt=zt;const Ft={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ft).forEach((([t,e])=>{Ft[e]=t}));var Ut=Ft;const Vt=function t(e){const n=new jt(e),i=r(jt.prototype.request,n);return j.extend(i,jt.prototype,n,{allOwnKeys:!0}),j.extend(i,n,null,{allOwnKeys:!0}),i.create=function(n){return t(It(e,n))},i}(ot);Vt.Axios=jt,Vt.CanceledError=mt,Vt.CancelToken=Bt,Vt.isCancel=dt,Vt.VERSION=Ct,Vt.toFormData=H,Vt.AxiosError=U,Vt.Cancel=Vt.CanceledError,Vt.all=function(t){return Promise.all(t)},Vt.spread=function(t){return function(e){return t.apply(null,e)}},Vt.isAxiosError=function(t){return j.isObject(t)&&!0===t.isAxiosError},Vt.mergeConfig=It,Vt.AxiosHeaders=pt,Vt.formToJSON=t=>rt(j.isHTMLForm(t)?new FormData(t):t),Vt.getAdapter=St,Vt.HttpStatusCode=Ut,Vt.default=Vt;var qt=Vt},47489:function(t,e){"use strict";const n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r=(()=>{if("undefined"==typeof document)return!1;const t=n[0],e={};for(const r of n){const n=r?.[1];if(n in document){for(const[n,i]of r.entries())e[t[n]]=i;return e}}return!1})(),i={change:r.fullscreenchange,error:r.fullscreenerror};let o={request:(t=document.documentElement,e)=>new Promise(((n,i)=>{const s=()=>{o.off("change",s),n()};o.on("change",s);const a=t[r.requestFullscreen](e);a instanceof Promise&&a.then(s).catch(i)})),exit:()=>new Promise(((t,e)=>{if(!o.isFullscreen)return void t();const n=()=>{o.off("change",n),t()};o.on("change",n);const i=document[r.exitFullscreen]();i instanceof Promise&&i.then(n).catch(e)})),toggle:(t,e)=>o.isFullscreen?o.exit():o.request(t,e),onchange(t){o.on("change",t)},onerror(t){o.on("error",t)},on(t,e){const n=i[t];n&&document.addEventListener(n,e,!1)},off(t,e){const n=i[t];n&&document.removeEventListener(n,e,!1)},raw:r};Object.defineProperties(o,{isFullscreen:{get:()=>Boolean(document[r.fullscreenElement])},element:{enumerable:!0,get:()=>document[r.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>Boolean(document[r.fullscreenEnabled])}}),r||(o={isEnabled:!1}),e.Z=o}},__webpack_module_cache__={},webpackQueues,webpackExports,webpackError,resolveQueue,inProgress,dataWebpackPrefix;function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e){if(void 0!==e.error)throw e.error;return e.exports}var n=__webpack_module_cache__[t]={id:t,loaded:!1,exports:{}};try{var r={id:t,module:n,factory:__webpack_modules__[t],require:__webpack_require__};__webpack_require__.i.forEach((function(t){t(r)})),n=r.module,r.factory.call(n.exports,n,n.exports,r.require)}catch(t){throw n.error=t,t}return n.loaded=!0,n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.c=__webpack_module_cache__,__webpack_require__.i=[],webpackQueues="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",webpackExports="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",webpackError="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",resolveQueue=function(t){t&&t.d<1&&(t.d=1,t.forEach((function(t){t.r--})),t.forEach((function(t){t.r--?t.r++:t()})))},__webpack_require__.a=function(t,e,n){var r;n&&((r=[]).d=-1);var i,o,s,a=new Set,c=t.exports,l=new Promise((function(t,e){s=e,o=t}));l[webpackExports]=c,l[webpackQueues]=function(t){r&&t(r),a.forEach(t),l.catch((function(){}))},t.exports=l,e((function(t){var e;i=function(t){return t.map((function(t){if(null!==t&&"object"==typeof t){if(t[webpackQueues])return t;if(t.then){var e=[];e.d=0,t.then((function(t){n[webpackExports]=t,resolveQueue(e)}),(function(t){n[webpackError]=t,resolveQueue(e)}));var n={};return n[webpackQueues]=function(t){t(e)},n}}var r={};return r[webpackQueues]=function(){},r[webpackExports]=t,r}))}(t);var n=function(){return i.map((function(t){if(t[webpackError])throw t[webpackError];return t[webpackExports]}))},o=new Promise((function(t){(e=function(){t(n)}).r=0;var o=function(t){t!==r&&!a.has(t)&&(a.add(t),t&&!t.d&&(e.r++,t.push(e)))};i.map((function(t){t[webpackQueues](o)}))}));return e.r?o:n()}),(function(t){t?s(l[webpackError]=t):o(c),resolveQueue(r)})),r&&r.d<0&&(r.d=0)},__webpack_require__.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=function(t,e){for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.hu=function(t){return t+"."+__webpack_require__.h()+".hot-update.js"},__webpack_require__.hmrF=function(){return"_index."+__webpack_require__.h()+".hot-update.json"},__webpack_require__.h=function(){return"1aa7be30f014dda686f1"},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},inProgress={},dataWebpackPrefix="faip-web:",__webpack_require__.l=function(t,e,n,r){if(inProgress[t])inProgress[t].push(e);else{var i,o;if(void 0!==n)for(var s=document.getElementsByTagName("script"),a=0;a<s.length;a++){var c=s[a];if(c.getAttribute("src")==t||c.getAttribute("data-webpack")==dataWebpackPrefix+n){i=c;break}}i||(o=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,__webpack_require__.nc&&i.setAttribute("nonce",__webpack_require__.nc),i.setAttribute("data-webpack",dataWebpackPrefix+n),i.src=t),inProgress[t]=[e];var l=function(e,n){i.onerror=i.onload=null,clearTimeout(u);var r=inProgress[t];if(delete inProgress[t],i.parentNode&&i.parentNode.removeChild(i),r&&r.forEach((function(t){return t(n)})),e)return e(n)},u=setTimeout(l.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=l.bind(null,i.onerror),i.onload=l.bind(null,i.onload),o&&document.head.appendChild(i)}},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},function(){var t,e,n,r={},i=__webpack_require__.c,o=[],s=[],a="idle",c=0,l=[];function u(t){a=t;for(var e=[],n=0;n<s.length;n++)e[n]=s[n].call(null,t);return Promise.all(e)}function h(){0==--c&&u("ready").then((function(){if(0===c){var t=l;l=[];for(var e=0;e<t.length;e++)t[e]()}}))}function p(t){if("idle"!==a)throw new Error("check() is only allowed in idle status");return u("check").then(__webpack_require__.hmrM).then((function(n){return n?u("prepare").then((function(){var r=[];return e=[],Promise.all(Object.keys(__webpack_require__.hmrC).reduce((function(t,i){return __webpack_require__.hmrC[i](n.c,n.r,n.m,t,e,r),t}),[])).then((function(){return e=function(){return t?d(t):u("ready").then((function(){return r}))},0===c?e():new Promise((function(t){l.push((function(){t(e())}))}));var e}))})):u(g()?"ready":"idle").then((function(){return null}))}))}function f(t){return"ready"!==a?Promise.resolve().then((function(){throw new Error("apply() is only allowed in ready status (state: "+a+")")})):d(t)}function d(t){t=t||{},g();var r=e.map((function(e){return e(t)}));e=void 0;var i=r.map((function(t){return t.error})).filter(Boolean);if(i.length>0)return u("abort").then((function(){throw i[0]}));var o=u("dispose");r.forEach((function(t){t.dispose&&t.dispose()}));var s,a=u("apply"),c=function(t){s||(s=t)},l=[];return r.forEach((function(t){if(t.apply){var e=t.apply(c);if(e)for(var n=0;n<e.length;n++)l.push(e[n])}})),Promise.all([o,a]).then((function(){return s?u("fail").then((function(){throw s})):n?d(t).then((function(t){return l.forEach((function(e){t.indexOf(e)<0&&t.push(e)})),t})):u("idle").then((function(){return l}))}))}function g(){if(n)return e||(e=[]),Object.keys(__webpack_require__.hmrI).forEach((function(t){n.forEach((function(n){__webpack_require__.hmrI[t](n,e)}))})),n=void 0,!0}__webpack_require__.hmrD=r,__webpack_require__.i.push((function(l){var d,g,m,y,_=l.module,v=function(e,n){var r=i[n];if(!r)return e;var s=function(s){if(r.hot.active){if(i[s]){var a=i[s].parents;-1===a.indexOf(n)&&a.push(n)}else o=[n],t=s;-1===r.children.indexOf(s)&&r.children.push(s)}else console.warn("[HMR] unexpected require("+s+") from disposed module "+n),o=[];return e(s)},l=function(t){return{configurable:!0,enumerable:!0,get:function(){return e[t]},set:function(n){e[t]=n}}};for(var p in e)Object.prototype.hasOwnProperty.call(e,p)&&"e"!==p&&Object.defineProperty(s,p,l(p));return s.e=function(t){return function(t){switch(a){case"ready":u("prepare");case"prepare":return c++,t.then(h,h),t;default:return t}}(e.e(t))},s}(l.require,l.id);_.hot=(d=l.id,g=_,y={_acceptedDependencies:{},_acceptedErrorHandlers:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:m=t!==d,_requireSelf:function(){o=g.parents.slice(),t=m?void 0:d,__webpack_require__(d)},active:!0,accept:function(t,e,n){if(void 0===t)y._selfAccepted=!0;else if("function"==typeof t)y._selfAccepted=t;else if("object"==typeof t&&null!==t)for(var r=0;r<t.length;r++)y._acceptedDependencies[t[r]]=e||function(){},y._acceptedErrorHandlers[t[r]]=n;else y._acceptedDependencies[t]=e||function(){},y._acceptedErrorHandlers[t]=n},decline:function(t){if(void 0===t)y._selfDeclined=!0;else if("object"==typeof t&&null!==t)for(var e=0;e<t.length;e++)y._declinedDependencies[t[e]]=!0;else y._declinedDependencies[t]=!0},dispose:function(t){y._disposeHandlers.push(t)},addDisposeHandler:function(t){y._disposeHandlers.push(t)},removeDisposeHandler:function(t){var e=y._disposeHandlers.indexOf(t);e>=0&&y._disposeHandlers.splice(e,1)},invalidate:function(){switch(this._selfInvalidated=!0,a){case"idle":e=[],Object.keys(__webpack_require__.hmrI).forEach((function(t){__webpack_require__.hmrI[t](d,e)})),u("ready");break;case"ready":Object.keys(__webpack_require__.hmrI).forEach((function(t){__webpack_require__.hmrI[t](d,e)}));break;case"prepare":case"check":case"dispose":case"apply":(n=n||[]).push(d)}},check:p,apply:f,status:function(t){if(!t)return a;s.push(t)},addStatusHandler:function(t){s.push(t)},removeStatusHandler:function(t){var e=s.indexOf(t);e>=0&&s.splice(e,1)},data:r[d]},t=void 0,y),_.parents=o,_.children=[],o=[],l.require=v})),__webpack_require__.hmrC={},__webpack_require__.hmrI={}}(),function(){var t;__webpack_require__.g.importScripts&&(t=__webpack_require__.g.location+"");var e=__webpack_require__.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&!t;)t=n[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=t+"../"}(),function(){__webpack_require__.b=document.baseURI||self.location.href;var t,e,n,r,i,o=__webpack_require__.hmrS_jsonp=__webpack_require__.hmrS_jsonp||{704:0},s={};function a(e,n){return t=n,new Promise((function(t,n){s[e]=t;var r=__webpack_require__.p+__webpack_require__.hu(e),i=new Error;__webpack_require__.l(r,(function(t){if(s[e]){s[e]=void 0;var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;i.message="Loading hot update chunk "+e+" failed.\n("+r+": "+o+")",i.name="ChunkLoadError",i.type=r,i.request=o,n(i)}}))}))}function c(t){function s(t){for(var e=[t],n={},r=e.map((function(t){return{chain:[t],id:t}}));r.length>0;){var i=r.pop(),o=i.id,s=i.chain,c=__webpack_require__.c[o];if(c&&(!c.hot._selfAccepted||c.hot._selfInvalidated)){if(c.hot._selfDeclined)return{type:"self-declined",chain:s,moduleId:o};if(c.hot._main)return{type:"unaccepted",chain:s,moduleId:o};for(var l=0;l<c.parents.length;l++){var u=c.parents[l],h=__webpack_require__.c[u];if(h){if(h.hot._declinedDependencies[o])return{type:"declined",chain:s.concat([u]),moduleId:o,parentId:u};-1===e.indexOf(u)&&(h.hot._acceptedDependencies[o]?(n[u]||(n[u]=[]),a(n[u],[o])):(delete n[u],e.push(u),r.push({chain:s.concat([u]),id:u})))}}}}return{type:"accepted",moduleId:t,outdatedModules:e,outdatedDependencies:n}}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];-1===t.indexOf(r)&&t.push(r)}}__webpack_require__.f&&delete __webpack_require__.f.jsonpHmr,e=void 0;var c={},l=[],u={},h=function(t){console.warn("[HMR] unexpected require("+t.id+") to disposed module")};for(var p in n)if(__webpack_require__.o(n,p)){var f,d=n[p],g=!1,m=!1,y=!1,_="";switch((f=d?s(p):{type:"disposed",moduleId:p}).chain&&(_="\nUpdate propagation: "+f.chain.join(" -> ")),f.type){case"self-declined":t.onDeclined&&t.onDeclined(f),t.ignoreDeclined||(g=new Error("Aborted because of self decline: "+f.moduleId+_));break;case"declined":t.onDeclined&&t.onDeclined(f),t.ignoreDeclined||(g=new Error("Aborted because of declined dependency: "+f.moduleId+" in "+f.parentId+_));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(f),t.ignoreUnaccepted||(g=new Error("Aborted because "+p+" is not accepted"+_));break;case"accepted":t.onAccepted&&t.onAccepted(f),m=!0;break;case"disposed":t.onDisposed&&t.onDisposed(f),y=!0;break;default:throw new Error("Unexception type "+f.type)}if(g)return{error:g};if(m)for(p in u[p]=d,a(l,f.outdatedModules),f.outdatedDependencies)__webpack_require__.o(f.outdatedDependencies,p)&&(c[p]||(c[p]=[]),a(c[p],f.outdatedDependencies[p]));y&&(a(l,[f.moduleId]),u[p]=h)}n=void 0;for(var v,x=[],b=0;b<l.length;b++){var w=l[b],E=__webpack_require__.c[w];E&&(E.hot._selfAccepted||E.hot._main)&&u[w]!==h&&!E.hot._selfInvalidated&&x.push({module:w,require:E.hot._requireSelf,errorHandler:E.hot._selfAccepted})}return{dispose:function(){var t;r.forEach((function(t){delete o[t]})),r=void 0;for(var e,n=l.slice();n.length>0;){var i=n.pop(),s=__webpack_require__.c[i];if(s){var a={},u=s.hot._disposeHandlers;for(b=0;b<u.length;b++)u[b].call(null,a);for(__webpack_require__.hmrD[i]=a,s.hot.active=!1,delete __webpack_require__.c[i],delete c[i],b=0;b<s.children.length;b++){var h=__webpack_require__.c[s.children[b]];h&&((t=h.parents.indexOf(i))>=0&&h.parents.splice(t,1))}}}for(var p in c)if(__webpack_require__.o(c,p)&&(s=__webpack_require__.c[p]))for(v=c[p],b=0;b<v.length;b++)e=v[b],(t=s.children.indexOf(e))>=0&&s.children.splice(t,1)},apply:function(e){for(var n in u)__webpack_require__.o(u,n)&&(__webpack_require__.m[n]=u[n]);for(var r=0;r<i.length;r++)i[r](__webpack_require__);for(var o in c)if(__webpack_require__.o(c,o)){var s=__webpack_require__.c[o];if(s){v=c[o];for(var a=[],h=[],p=[],f=0;f<v.length;f++){var d=v[f],g=s.hot._acceptedDependencies[d],m=s.hot._acceptedErrorHandlers[d];if(g){if(-1!==a.indexOf(g))continue;a.push(g),h.push(m),p.push(d)}}for(var y=0;y<a.length;y++)try{a[y].call(null,v)}catch(n){if("function"==typeof h[y])try{h[y](n,{moduleId:o,dependencyId:p[y]})}catch(r){t.onErrored&&t.onErrored({type:"accept-error-handler-errored",moduleId:o,dependencyId:p[y],error:r,originalError:n}),t.ignoreErrored||(e(r),e(n))}else t.onErrored&&t.onErrored({type:"accept-errored",moduleId:o,dependencyId:p[y],error:n}),t.ignoreErrored||e(n)}}}for(var _=0;_<x.length;_++){var b=x[_],w=b.module;try{b.require(w)}catch(n){if("function"==typeof b.errorHandler)try{b.errorHandler(n,{moduleId:w,module:__webpack_require__.c[w]})}catch(r){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:w,error:r,originalError:n}),t.ignoreErrored||(e(r),e(n))}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:w,error:n}),t.ignoreErrored||e(n)}}return l}}}self.webpackHotUpdatefaip_web=function(e,r,o){for(var a in r)__webpack_require__.o(r,a)&&(n[a]=r[a],t&&t.push(a));o&&i.push(o),s[e]&&(s[e](),s[e]=void 0)},__webpack_require__.hmrI.jsonp=function(t,e){n||(n={},i=[],r=[],e.push(c)),__webpack_require__.o(n,t)||(n[t]=__webpack_require__.m[t])},__webpack_require__.hmrC.jsonp=function(t,s,l,u,h,p){h.push(c),e={},r=s,n=l.reduce((function(t,e){return t[e]=!1,t}),{}),i=[],t.forEach((function(t){__webpack_require__.o(o,t)&&void 0!==o[t]?(u.push(a(t,p)),e[t]=!0):e[t]=!1})),__webpack_require__.f&&(__webpack_require__.f.jsonpHmr=function(t,n){e&&__webpack_require__.o(e,t)&&!e[t]&&(n.push(a(t)),e[t]=!0)})},__webpack_require__.hmrM=function(){if("undefined"==typeof fetch)throw new Error("No browser support: need fetch API");return fetch(__webpack_require__.p+__webpack_require__.hmrF()).then((function(t){if(404!==t.status){if(!t.ok)throw new Error("Failed to fetch update manifest "+t.statusText);return t.json()}}))}}(),__webpack_require__.nc=void 0;var __webpack_exports__=__webpack_require__(14701)})();